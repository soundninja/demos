!function(e,t){var i={};if(e.$bp.Advertising=Brid.Sprite.extend({currentAdsManager:null,videosPlayed:null,adManagerClasses:["LiveRail","GoogleIMA"],adManagers:[],init:function a(t,i){a.base.call(this,t,i),this.ads={},this.adManagers=[],this.currentAdsManager=null;var r=Brid.Util.elById(this.player.id+"_adContainer");if(!r)return null;var s=this.ads={},d=t.config;t.advertising=!0,s.adOffset=d.adOffset?parseInt(d.adOffset):0,s.adFrequency=d.adFrequency?parseInt(d.adFrequency):0,s.bridFreqType=d.Partner.frequencyType?d.Partner.frequencyType:"ad",s.bridAdFreq=d.Partner.frequency?parseInt(d.Partner.frequency):0,s.adFrequency=0==s.adFrequency?1:s.adFrequency,Brid.log("ads.adOffset",s.adOffset,"ads.adFrequency",s.adFrequency,"ads.bridAdFreq",s.bridAdFreq,"ads.bridFreqType",s.bridFreqType);for(var n=0,o=this.adManagerClasses.length;o>n;n++){var l=new e.Brid[this.adManagerClasses[n]](t);l.parent=this,this.adManagers.push(l)}t.adsManager=this,t.addOnce("ready",this.$f(this.onPlayerReady)),t.add("newContent",this.$f(this.checkSceduledAds)),t.add(["stopped","skipped"],this.$f(this.onContentEnd)),t.add("fullscreenchange",this.$f(this.onResize)),t.add("adStart",this.$f(function(){Brid.log("Advertising adStart Dispatched",this.player.getAdInProgress()),this.player.getAdInProgress()&&(this.player.controls.adInfo.el.innerHTML="<div>Advertisement</div>",this.player.trigger("showAdInfo"))})),t.add("adEnd",this.$f(function(){this.player.trigger("hideAdInfo")}))},createElement:function(){return null},resetSkin:function(){},techCall:function(e,t,i){if(i=i||this.currentAdsManager)if(Brid.log("techCall ",e,t),i.isReady)try{i[e](t)}catch(r){Brid.error(r)}else i.ready(function(){this[e](t)})},techGet:function(e,t,i){if(i=i||this.currentAdsManager,i&&i.isReady)try{return i[e](t)}catch(r){void 0===i[e]?Brid.warn("--- BridPlayer --- "+e+" method not defined for "+this.manager.name+" advertising technology.",r):"TypeError"==r.name?Brid.error("--- BridPlayer --- "+e+" unavailable on "+this.manager.name+" advertising technology element.",r):Brid.warn(r)}},onPlayerReady:function(){Brid.log("Advertising onPlayerReady"),this.player.remove("ready",this.$f(this.onPlayerReady)),this.player.config.autoplay&&(this.player.tech.support.monetizable||(Brid.log("Shouldn't play ads"),this.hide()))},setupAdsLoader:function(){if(this.player.tech.support.adManagement||!this.player.tech.support.monetizable)return void this.hide();for(var e=0,t=this.adManagers.length;t>e;e++)this.techCall("setupAdsLoader",null,this.adManagers[e])},checkSceduledAds:function(e){Brid.log("checkSceduledAds");var t,i=this.player,r=this.ads;if(this.flagOurAd=!1,this.priority=0,r.overlay=r.midroll=r.postroll=r.preroll=null,i.hasPreroll=!1,i.hasPostroll=!1,i.remove("beforeStart",this.$f(this.onBeforeStart)),i.remove("timeupdate",this.$f(this.checkForAd)),!i.tech.support.monetizable||!i.currentSource.monetize||!this.checkOffsetAndFrequency())return Brid.log("Shouldn't play ads on non monetizable techs | Video or player not monetized"),this.hide(),void this.techCall("destroyAdsLoader");if(i.config.freqCap){var a=Brid.Util.getLocalStorage(i.config.id+"_cap");if(!(e&&e.data&&e.data.reinit)&&a&&"1"==a)return}var s=i.config.Ad,d=i.currentSource.Ad;if(this.contentCompleteCalled=!1,s&&s.length>0)for(var n=0;n<s.length;n++)s[n].played=!1,"0"==s[n].adType&&(r.preroll=Brid.Util.clone(s[n])),"1"==s[n].adType&&(r.midroll=Brid.Util.clone(s[n])),"2"==s[n].adType&&(r.postroll=Brid.Util.clone(s[n])),"3"==s[n].adType&&(r.overlay=Brid.Util.clone(s[n]));if(d&&d.length>0)for(var o=0;o<d.length;o++)d[o].Ad.played=!1,"0"==d[o].Ad.adType&&(r.preroll=Brid.Util.clone(d[o].Ad)),"1"==d[o].Ad.adType&&(r.midroll=Brid.Util.clone(d[o].Ad)),"2"==d[o].Ad.adType&&(r.postroll=Brid.Util.clone(d[o].Ad)),"3"==d[o].Ad.adType&&(r.overlay=Brid.Util.clone(d[o].Ad));return"undefined"!=typeof i.currentSource.intro_video&&i.currentSource.intro_video&&(r.midroll=r.postroll=r.overlay=null),r.midroll&&(r.midroll.startTimes=r.midroll.cuepoints.split(",")),this.networkAdTagUrl=i.config.Partner.adTagUrl,"flash"==i.techName&&i.config.Partner.flashAdTagUrl&&i.config.Partner.flashAdTagUrl.length&&(this.networkAdTagUrl=i.config.Partner.flashAdTagUrl),t=this.networkAdTagUrl,r.bridAdFreq&&this.shouldPlayOurAd(r)&&(this.flagOurAd=!0,t=this.selectPriorityAdTag(t),t?(r.preroll?r.preroll.adTagUrl=t.adTagUrl:r.preroll={id:"1",player_id:i.id,video_id:"0",adTagUrl:t.adTagUrl,adType:"0",adTimeType:"s",overlayStartAt:null,overlayDuration:null,cuepoints:null},r.midroll&&(r.midroll.adTagUrl=t.adTagUrl),r.postroll&&(r.postroll.adTagUrl=t.adTagUrl)):this.flagOurAd=!1),i.hasPreroll=!!r.preroll&&r.preroll.adTagUrl,i.hasPostroll=!!r.postroll&&r.postroll.adTagUrl,i.tech.support.adManagement?(r.bridAd=this.networkAdTagUrl,r.flagOurAd=this.flagOurAd,i.techCall("ads",r),this.techCall("destroyAdsLoader"),void this.hide()):(this.show(),this.setupAdsLoader(),i.add("ended",this.$f(this.onEnded)),r.preroll&&i.add("beforeStart",this.$f(this.onBeforeStart)),Brid.log("ads.preroll",this.ads.preroll,"ads.midroll",this.ads.midroll,"ads.postroll",this.ads.postroll,"ads.overlay",this.ads.overlay),void((r.midroll||r.overlay)&&i.add("timeupdate",this.$f(this.checkForAd))))},shouldPlayOurAd:function(){var e=Brid.Util.randomInt(1,100*this.ads.bridAdFreq);return Brid.log("---randomNumber---",e),e>=1&&100>=e},checkOffsetAndFrequency:function(){var e=!0;return Brid.log("this.videosPlayed ",this.videosPlayed),("undefined"==typeof this.videosPlayed||null==this.videosPlayed)&&(this.videosPlayed=Brid.Util.getLocalStorage(this.player.config.id+"_videos_played"),Brid.log("this.videosPlayed getLocalStorage",this.videosPlayed)),this.videosPlayed||(this.videosPlayed=0),this.videosPlayed++,Brid.log("ADVERTISING MOD ",this.videosPlayed,this.ads.adFrequency,this.ads.adOffset),(this.videosPlayed<this.ads.adOffset||(this.videosPlayed-this.ads.adOffset)%this.ads.adFrequency!=0)&&(e=!1),Brid.Util.setLocalStorage(this.player.config.id+"_videos_played",this.videosPlayed),e},onContentEnd:function(){this.ads.overlay&&this.ads.overlay.playing&&this.stopNonLinear(),this.resetManager();for(var e=0,t=this.adManagers.length;t>e;e++)this.techCall("contentComplete",null,this.adManagers[e])},onBeforeStart:function(){Brid.log("ADVERTISING onBeforeStart"),this.player.remove("beforeStart",this.$f(this.onBeforeStart)),this.hasAdRules=!1,this.checkPreroll()},checkForAd:function(){!this.hasAdRules&&this.player.isPlaying&&(this.ads.midroll&&this.checkForMidroll(),this.ads.overlay&&!this.ads.overlay.played&&this.checkForOverlay())},checkPreroll:function(){Brid.log("checkPreroll",this.ads.preroll,!this.ads.preroll.played),this.ads.preroll&&!this.ads.preroll.played?(this.player.remove("timeupdate",this.$f(this.checkForAd)),this.requestAd(this.ads.preroll)):this.reset(!0)},checkForMidroll:function(){if(!(this.player.duration()<=0))for(var e,t=0;t<this.ads.midroll.startTimes.length;){if(e="s"==this.ads.midroll.adTimeType?this.ads.midroll.startTimes[t]-this.player.currentTime():this.player.duration()*this.ads.midroll.startTimes[t]/100-this.player.currentTime(),Math.abs(e)<1){this.player.remove("timeupdate",this.$f(this.checkForAd)),this.ads.midroll.startTimes.splice(t,1),this.requestAd(this.ads.midroll);break}t++,this.player.trigger(5>e&&e>0?"adStartsSoon":"hideAdInfo")}},checkForOverlay:function(){var e;"s"==this.ads.overlay.adTimeType?e=this.player.currentTime()-this.ads.overlay.overlayStartAt:(e=this.player.currentTime()-this.player.duration()*this.ads.overlay.overlayStartAt/100,this.ads.overlay.overlayDuration=this.player.duration()*this.ads.overlay.overlayDuration/100),e>0&&!this.ads.overlay.playing&&!this.ads.overlay.played&&(this.ads.overlay.playing=!0,Brid.log("requestAd OVERLAY"),this.requestAd(this.ads.overlay))},onEnded:function(){Brid.log("Advertising onEnded"),this.player.remove("ended",this.$f(this.onEnded)),this.ads.overlay&&this.ads.overlay.playing&&this.stopNonLinear(),this.contentCompleteCalled=!0;for(var e=0,t=this.adManagers.length;t>e;e++)this.techCall("contentComplete",null,this.adManagers[e]);this.checkPostroll()},checkPostroll:function(){Brid.log("checkPostroll"),this.ads.postroll&&!this.ads.postroll.played?(this.player.remove("timeupdate",this.$f(this.checkForAd)),this.requestAd(this.ads.postroll)):this.reset(!0)},setAd:function(e,t){if(Brid.log("new ad",e),this.player.currentSource.monetize){var i,r=!1;if(i="video"==t?this.player.currentSource.Ad:this.player.config.Ad,i&&i.length>0)for(var a=0;a<i.length;a++)i[a].adType==e.adType&&(i[a]=e,r=!0);else i="video"==t?this.player.currentSource.Ad=[]:this.player.config.Ad=[];Brid.log("foundSame",r),r||i.push("video"==t?{Ad:e}:e),this.checkSceduledAds(),Brid.log("updated",i,this.ads)}},playAd:function(e){Brid.log("Advertising playAd",e);var t=this.player;t.currentSource.monetize&&(this.flagOurAd&&(e=t.config.Partner.adTagUrl,"flash"==t.techName&&t.config.Partner.flashAdTagUrl&&t.config.Partner.flashAdTagUrl.length&&(e=t.config.Partner.flashAdTagUrl),e=this.selectPriorityAdTag(e)),e="string"==typeof e?{adTagUrl:e}:e,t.tech.support.adManagement?(this.hide(),this.player.techCall("playAd",e)):this.requestAd(e))},macroReplacer:function(e,t,i){return e.split(t).join(i).split(t.toUpperCase()).join(i)},selectPriorityAdTag:function(e){var t=null;return Brid.log("selectPriorityAdTag",this.priority,e.length),this.flagOurAd&&(!this.ads.overlay||!this.ads.overlay.playing)&&this.priority<e.length?(t={adTagUrl:e[this.priority]},Brid.log("selectPriorityAdTag",t),this.priority++):this.priority=0,t},selectAdsManager:function(e){Brid.log("selectAdsManager",this.adManagers,e);for(var t,i=0,r=this.adManagers.length;r>i;i++)this.techGet("supportsAdTag",e,this.adManagers[i])&&!t?t=this.adManagers[i]:this.adManagers[i].hide();return t},requestAd:function(e){var t=e.adTagUrl;if(t&&t==this.networkAdTagUrl[0]&&(this.priority=1),!t){if(e=this.selectPriorityAdTag(this.networkAdTagUrl),!e)return this.player.trigger("adError"),void this.onContentResumeRequested();t=e.adTagUrl}if(this.ad&&this.ads.overlay&&this.ads.overlay.playing&&this.stopNonLinear(),-1!=t.indexOf("doubleclick"))this.hasAdRules=-1!=t.indexOf("ad_rule=1");else{if(this.hasAdRules=!1,-1!=t.toLowerCase().indexOf("[timestamp]")){var i=(new Date).getTime();t=this.macroReplacer(t,"[timestamp]",i)}-1!=t.toLowerCase().indexOf("[referrer_url]")&&(t=this.macroReplacer(t,"[referrer_url]",Brid.Util.getEmbededUrl()))}if(-1!=t.toLowerCase().indexOf("[video_title]")&&(t=this.macroReplacer(t,"[video_title]",this.player.currentSource.title)),-1!=t.toLowerCase().indexOf("[video_duration]")&&(t=this.macroReplacer(t,"[video_duration]",this.player.duration()||this.player.currentSource.duration)),-1!=t.toLowerCase().indexOf("[video_id]")&&(t=this.macroReplacer(t,"[video_id]",this.player.currentSource.id)),-1!=t.toLowerCase().indexOf("[player_width]")&&this.player.el&&this.player.el.clientWidth&&(t=this.macroReplacer(t,"[player_width]",this.player.el.clientWidth)),-1!=t.toLowerCase().indexOf("[player_height]")&&this.player.el&&this.player.el.clientHeight&&(t=this.macroReplacer(t,"[player_height]",this.player.el.clientHeight)),-1!=t.toLowerCase().indexOf("[autoplay]")&&(t=this.macroReplacer(t,"[autoplay]",this.player.config.autoplay?"1":"0")),Brid.log("requestAd: ",t),Brid.exLog("requestAd: ",t),this.ad=Brid.Util.clone(e),this.ad.adTagUrl=t,this.ad.played=!0,this.currentAdsManager=this.selectAdsManager(t),this.currentAdsManager)(this.flagOurAd||-1!=this.networkAdTagUrl.indexOf(this.ad.adTagUrl))&&this.player.trigger("ourAdRequest"),this.currentAdsManager.requestAd(this.ad);else{Brid.error("--- BridPlayer --- Unsupported adTag"),Brid.exLog("Unsupported adTag");var t=this.selectPriorityAdTag(this.networkAdTagUrl);if(t)return void this.requestAd(t);this.resetManager(),this.player.trigger("adError"),this.onContentResumeRequested()}},stopNonLinear:function(){Brid.log("stopNonLinear"),this.onResize(null),this.ads.overlay&&(this.ads.overlay.playing=!1),this.currentAdsManager&&(this.currentAdsManager.el&&this.currentAdsManager.el.removeAttribute("style"),this.techCall("stop")),this.resetManager(),this.reset(!1)},onAdError:function(){var e=this.selectPriorityAdTag(this.networkAdTagUrl);return e?void this.requestAd(e):(this.resetManager(),this.player.trigger("adError"),void this.onContentResumeRequested())},onAdStart:function(){this.techGet("isLinear")&&(this.player.manualTimeUpdatesOn(),this.player.trigger("play")),this.player.trigger("adStart"),this.paused=!1,(this.flagOurAd||-1!=this.networkAdTagUrl.indexOf(this.ad.adTagUrl))&&this.player.trigger("ourAdStart")},onContentPauseRequested:function(){Brid.log("onContentPauseRequested",this.player.isPlaying),this.tempTime=this.player.currentTime(),this.player.isPlaying&&this.player.pause(),this.player.adInProgress=!0,this.player.remove("ended",this.$f(this.onEnded)),this.paused=!1,this.player.trigger("disableInteraction")},onContentResumeRequested:function(){Brid.log("onContentResumeRequested",this.contentCompleteCalled,this.player.currentSrc(),this.player.currentSource.src),this.player.add("ended",this.$f(this.onEnded)),this.reset(!1);var e=this.player;this.contentCompleteCalled||e.currentSrc()==e.currentSource.src?this.contentCompleteCalled?this.contentCompleteCalled&&"continuous"!=e.config.playlistPlayback?(e.remove("loadedmetadata",this.$f(this.resumeContent)),this.tempTime=null,e.src(e.currentSource),this.checkSceduledAds()):e.remove("loadedmetadata",this.$f(this.resumeContent)):(this.tempTime=null,e.play()):(e.stopTrackingCurrentTime(),e.trigger("stopTrackingTime"),e.add("loadedmetadata",this.$f(this.resumeContent)),e.src(e.currentSource),e.load(),e.play())},resumeContent:function(){Brid.log("resumeContent",this.tempTime);var e=this.player;e.remove("loadedmetadata",this.$f(this.resumeContent)),this.tempTime&&(e.currentTime(this.tempTime),this.tempTime=null),e.tech.support.timeupdateEvent||e.manualTimeUpdatesOn(),e.trigger("startTrackingTime")},reset:function(e){Brid.log("ad reset error "+e);var t=this.player;t.adInProgress=!1,e&&(t.remove("loadedmetadata",this.$f(this.resumeContent)),this.tempTime=null),t.trigger("enableInteraction"),t.remove("fullscreenchange",this.$f(this.onResize)),(this.ads.midroll||this.ads.overlay)&&t.add("timeupdate",this.$f(this.checkForAd)),t.trigger("adEnd",e)},resetManager:function(){Brid.log("resetManager"),this.ad&&(this.ad=null),this.currentAdsManager&&(this.currentAdsManager=null),this.techCall("resetManager")},togglePlay:function(){this.player.tech.support.adManagement?this.player.techCall(this.player.techGet("paused")?"play":"pause"):this.currentAdsManager&&this.techCall("togglePlay",this.paused)},duration:function(){return this.player.tech.support.adManagement?this.player.techGet("duration"):this.currentAdsManager?this.techGet("duration"):0},currentTime:function(){return this.player.tech.support.adManagement?this.player.techGet("currentTime"):this.currentAdsManager?this.techGet("currentTime"):0},volume:function(e){var t=this.player;return"undefined"==typeof e?t.tech.support.adManagement?parseFloat(t.techGet("volume")):this.currentAdsManager?this.techGet("volume"):0:t.tech.support.adManagement?void t.techCall("setVolume",e):this.currentAdsManager?this.techCall("volume",e):0},hide:function(){for(var e=0,t=this.adManagers.length;t>e;e++)this.techCall("hide",null,this.adManagers[e])},show:function(){for(var e=0,t=this.adManagers.length;t>e;e++)this.techCall("show",null,this.adManagers[e])},onResize:function(e){if(this.currentAdsManager){var t=e?100:0;setTimeout(this.$f(function(){this.techCall("onResize")}),t)}}}),Brid.GoogleIMA=Brid.Sprite.extend({adsManager:null,adsLoader:null,adDisplayContainer:null,ad:null,closeTimeout:null,hasAdRules:!1,init:function s(e,t){return s.base.call(this,e,t),this.adDisplayContainerInitialized=!1,this.el&&"undefined"!=typeof google&&"undefined"!=typeof google.ima?(this.adsManager=null,this.adsLoader=null,this.adDisplayContainer=null,this.ad=null,Brid.Util.insertAfter(this.player.tag,this.el),e.add("userInteraction",this.$f(this.onUserInteraction)),e.add("lastSecond",this.$f(this.onLastSecond)),void this.triggerReady()):null},createElement:function(){var e=Brid.Util.elById(this.player.id+"_adContainer");return e?(e.innerHTML="",Brid.Util.addClass(e,"brid-advert-container"),e.style.maxWidth="none",e.style.maxHeight="none",e.style.minWidth="0",e.style.minHeight="0",e):null},hide:function d(){this.el&&d.base.call(this)},show:function n(){this.el&&n.base.call(this)},onUserInteraction:function(){return this.player.tech.support.adManagement||!this.player.tech.support.monetizable?(Brid.log("onUserInteraction hide",this.el),void this.hide()):"undefined"==typeof google||"undefined"==typeof google.ima?(this.player.trigger("adError"),void this.hide()):(Brid.log("GIMA nUserInteraction",this.player.isPlaying,this.adDisplayContainer,this.adDisplayContainerInitialized,this.adsLoader),this.adsLoader||this.setupAdsLoader(),void(this.adDisplayContainer&&!this.adDisplayContainerInitialized&&(Brid.log("initAdDisplayContainer"),this.adDisplayContainerInitialized=!0,this.adDisplayContainer.initialize())))},setupAdsLoader:function(){Brid.log("GIMA setupAdsLoader"),this.adsLoader||(google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.el,t.getElementById(this.player.id+"_html5")),this.player.adDisplayContainer=this.adDisplayContainer,this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.$f(this.onAdsManagerLoaded),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.$f(this.onAdError),!1))},contentComplete:function(){this.adsLoader&&(Brid.log("dispatch Content Complete"),this.adsLoader.contentComplete())},requestAd:function(e){this.ad=e;var t=e.adTagUrl,i=new google.ima.AdsRequest;0!=t.indexOf("http")&&0!=t.indexOf("//")?-1!=t.indexOf("<VAST")&&-1!=t.indexOf("</VAST>")?i.adsResponse=t:(Brid.error("--- BridPlayer --- VAST Template or Ad Tag ndo not have a propper format"),Brid.exLog("VAST Template or Ad Tag ndo not have a propper format"),this.player.trigger("adError"),this.parent.onContentResumeRequested()):i.adTagUrl=t,i.linearAdSlotWidth=this.player.el.offsetWidth,i.linearAdSlotHeight=this.player.el.offsetHeight,i.nonLinearAdSlotWidth=this.player.el.offsetWidth,i.nonLinearAdSlotHeight=this.player.el.offsetHeight;try{this.adsLoader.requestAds(i)}catch(r){Brid.error("--- BridPlayer --- Google IMA Error. Google IMA initialization failed",r),Brid.exLog("Google IMA Error. Google IMA initialization failed",r),this.player.trigger("adError"),this.parent.onContentResumeRequested()}},onAdsManagerLoaded:function(e){Brid.log("onAdsManagerLoaded");var t=this.adsManager=e.getAdsManager(this.player.values);t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.$f(this.onAdError)),t.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,Brid.Util.$f(this.parent,this.parent.onContentPauseRequested)),t.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,Brid.Util.$f(this.parent,this.parent.onContentResumeRequested));var i=[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE];for(var r in i)t.addEventListener(i[r],this.$f(this.onAdEvent),!1,this);try{t.init(this.el.offsetWidth,this.el.offsetHeight,google.ima.ViewMode.NORMAL),Brid.log("adsManager.start()"),t.start()}catch(a){Brid.error("--- BridPlayer --- Google IMA Error. There was a problem with the VAST response",a.getError()),Brid.exLog("Google IMA Error. There was a problem with the VAST response",a.getError()),this.parent.onAdError()}},onAdEvent:function(e){switch(this.currentAd=e.getAd(),Brid.log("onAdEvent",e.type),Brid.exLog("IMA AdEvent",e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.currentAd.isLinear()?this.player.trigger("adDuration",{duration:this.currentAd.getDuration()}):this.player.isPlaying||this.parent.onContentResumeRequested(),this.onResize(null);break;case google.ima.AdEvent.Type.STARTED:Brid.log("adStart",this.currentAd.isLinear()),this.currentAd.isLinear()||(Brid.log("this.player.duration()",this.player.duration()),this.ad.overlayDuration&&0!=this.ad.overlayDuration||(this.ad.overlayDuration=this.player.duration()?this.player.duration()-this.player.currentTime():15),Brid.log("this.ad.overlayDuration",this.ad.overlayDuration),-1==this.currentAd.getDuration()&&(this.closeTimeout=setTimeout(Brid.Util.$f(this.parent,this.parent.stopNonLinear),1e3*this.ad.overlayDuration))),this.parent.onAdStart(),this.adsManager.setVolume(this.player.values.volume);break;case google.ima.AdEvent.Type.PAUSED:this.parent.paused=!0,this.player.trigger("pause");break;case google.ima.AdEvent.Type.RESUMED:this.parent.paused=!1,this.player.trigger("play");break;case google.ima.AdEvent.Type.COMPLETE:Brid.log("google.ima.AdEvent.Type.COMPLETE",this.currentAd.isLinear());break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:Brid.log("google.ima.AdEvent.Type.ALL_ADS_COMPLETED",this.currentAd.isLinear()),this.resetManager()}},onAdError:function(e){Brid.error("--- BridPlayer --- Google IMA Error. ",e.getError()),Brid.exLog("Google IMA Error.",e.getError()),this.parent.onAdError(e)},onLastSecond:function(){this.currentAd&&!this.currentAd.isLinear()&&this.parent.stopNonLinear()},stop:function(){this.adsManager&&this.adsManager.stop()},resetManager:function(){this.currentAd&&(this.currentAd=null),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&this.adsLoader.contentComplete()},destroyAdsLoader:function(){this.adsLoader&&(this.adsLoader.destroy(),this.adsLoader=null),this.adDisplayContainer&&(this.adDisplayContainer.destroy(),this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1)},isLinear:function(){return this.currentAd?this.currentAd.isLinear():!1},togglePlay:function(e){this.adsManager&&(e?this.adsManager.resume():this.adsManager.pause())},duration:function(){return this.currentAd?this.currentAd.getDuration():0},currentTime:function(){return this.adsManager&&this.currentAd?this.currentAd.getDuration()-this.adsManager.getRemainingTime():0},volume:function(e){var t=this.adsManager;return"undefined"==typeof e?t?t.getVolume():0:void(t&&t.setVolume(e))},onResize:function(){var e=this.player,t=e.isFullScreen?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL;if(Brid.log("AD onResize viewMode",t),this.adsManager&&this.currentAd)if(this.currentAd.isLinear())this.adsManager.resize(this.el.offsetWidth,this.el.offsetHeight,t);else{var i=e.isFullScreen?90:45;this.css({top:e.el.offsetHeight-(this.currentAd.getHeight()+50)-i+"px",bottom:"auto",left:(e.el.offsetWidth-(this.currentAd.getWidth()+50))/2+"px",right:"auto"}),this.adsManager.resize(this.currentAd.getWidth()+50,this.currentAd.getHeight()+50,t)}},supportsAdTag:function(e){return Brid.log("GoogleIMA supportsAdTag",e),!0}}),Brid.LiveRail=Brid.Sprite.extend({init:function o(e,t){o.base.call(this,e,t),this.triggerReady()},createElement:function(){return null},setupAdsLoader:function(){if(!this.LiveRailVPAID){if(this.LiveRailVPAID=e.getVPAIDAd(),this.LiveRailVPAID.handshakeVersion("2.0"),this.player.tech.support.adManagement||!this.LiveRailVPAID)return void this.hide();this.LiveRailVPAID.subscribe(this.$f(this.onAdLoaded),"AdLoaded"),this.LiveRailVPAID.subscribe(this.$f(this.onAdStopped),"AdStopped"),this.LiveRailVPAID.subscribe(this.$f(this.onAdError),"AdError"),this.LiveRailVPAID.subscribe(this.$f(this.onAdDurationChange),"AdDurationChange"),this.LiveRailVPAID.subscribe(this.$f(this.onAdPaused),"AdPaused"),this.LiveRailVPAID.subscribe(this.$f(this.onAdPlaying),"AdPlaying"),this.LiveRailVPAID.subscribe(this.$f(this.onAdImpression),"AdImpression"),this.LiveRailVPAID.subscribe(this.$f(this.onAdStarted),"AdStarted"),this.LiveRailVPAID.subscribe(function(e){Brid.log(e),Brid.exLog(e)},"AdLog")}},contentComplete:function(){},requestAd:function(e){var t=e.adTagUrl;Brid.log("LiveRail requestAd adTag",t);var i=Brid.Util.getJsonFromUrl(t);i.slot=this.player.el,i.videoSlot=this.player.tech.el,i.videoSlotCanAutoPlay=!0,"undefined"!=typeof i.LR_AUTOPLAY&&(i.LR_AUTOPLAY=parseInt(i.LR_AUTOPLAY)),Brid.log("LiveRail requestAd liveRailObject",i),Brid.exLog("LiveRail requestAd liveRailObject",i),this.LiveRailVPAID.initAd(this.player.el.offsetWidth,this.player.el.offsetHeight,"normal",600,null,i)},onAdLoaded:function(e){Brid.log("LiveRail onAdLoaded",e),Brid.exLog("LiveRail onAdLoaded",e),this.LiveRailVPAID.startAd()},onAdStarted:function(e){Brid.log("LiveRail onAdStarted",e),Brid.exLog("LiveRail onAdStarted",e),this.isLinear()&&this.parent.onContentPauseRequested(),this.parent.onAdStart(),this.LiveRailVPAID.setAdVolume(this.player.values.volume)},onAdStopped:function(e){Brid.log("LiveRail onAdStopped",e),Brid.exLog("LiveRail onAdStopped",e),this.isLinear()&&this.parent.onContentResumeRequested()},onAdDurationChange:function(e){Brid.log("LiveRail onAdDurationChange",e),Brid.exLog("LiveRail onAdDurationChange",e),this.player.trigger("durationchange")},onAdPaused:function(e){Brid.log("LiveRail onAdPaused",e),Brid.exLog("LiveRail onAdPaused",e),this.parent.paused=!0,this.player.trigger("pause")},onAdPlaying:function(e){Brid.log("LiveRail onAdPaused",e),Brid.exLog("LiveRail onAdPlaying",e),this.parent.paused=!1,this.player.trigger("play")},onAdImpression:function(e){Brid.log("LiveRail onAdImpression",e),Brid.exLog("LiveRail onAdImpression",e)},onAdError:function(e){Brid.error("--- BridPlayer --- LiveRail onAdError",e),Brid.exLog("LiveRail onAdError",e),this.parent.onAdError()},stop:function(){this.LiveRailVPAID&&this.LiveRailVPAID.stopAd()},resetManager:function(){},destroyAdsLoader:function(){this.LiveRailVPAID&&(this.LiveRailVPAID.unregisterVPAIDWrapperInstance(),this.LiveRailVPAID.unregisterVPAIDWrapperSubscriptions(),this.LiveRailVPAID.destroy(),this.LiveRailVPAID=null)},isLinear:function(){return this.LiveRailVPAID?this.LiveRailVPAID.getAdLinear():!1},togglePlay:function(e){this.LiveRailVPAID&&(e?this.LiveRailVPAID.resumeAd():this.LiveRailVPAID.pauseAd())},duration:function(){return this.LiveRailVPAID?this.LiveRailVPAID.getAdDuration()||0:0},currentTime:function(){return this.LiveRailVPAID?this.LiveRailVPAID.getAdDuration()-this.LiveRailVPAID.getAdRemainingTime():0},volume:function(e){var t=this.LiveRailVPAID;return"undefined"==typeof e?t?t.getAdVolume():0:void(t&&t.setAdVolume(e))},hide:function(){},show:function(){},onResize:function(){var e=this.player,t=e.isFullScreen?"fullscreen":"normal";this.LiveRailVPAID&&(Brid.log("AD onResize viewMode",t),this.LiveRailVPAID.resizeAd(e.el.offsetWidth,e.el.offsetHeight,t))},supportsAdTag:function(e){return Brid.log("LiveRail supportsAdTag",e),!(-1==e.indexOf("liverail.com")||-1==e.indexOf("LR_PUBLISHER_ID"))}}),i.setup=function(t){e.$bp.Util.merge(e.$bp(t).config.children,{Advertising:{}})},i.onDependenciesLoaded=function(){Brid.log("bridgima.onDependenciesLoaded"),e.$bridgima=i,Brid.event.trigger(t,"bridpluginloaded")},i.onDependenciesError=function(){Brid.log("bridgima.onDependenciesError"),e.$bridgima=i,Brid.event.trigger(t,"bridpluginloaded")},!e.$bridgima){var r=[];("undefined"==typeof google||"undefined"==typeof google.ima)&&r.push("//imasdk.googleapis.com/js/sdkloader/ima3.js"),"undefined"==typeof t.getVPAIDAd&&r.push("https://cdn-static-secure.liverail.com/js/LiveRail.AdManager-1.0.js"),r.length>0?Brid.Loader.load("js",r,i.onDependenciesLoaded,i.onDependenciesError,this):(e.$bridgima=i,Brid.event.trigger(t,"bridpluginloaded"))}}(window,document);
;!function(e,i){var t={};e.$bp.GoogleAnalytics=Brid.Class.extend({init:function(t,r){this.player=t,r=this.config=Brid.Util.merge(this.config||{},r),Brid.log("player.config.urchin",t.config.Partner.urchin),function(e,i,t,r,n,a,s){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=1*new Date,a=i.createElement(t),s=i.getElementsByTagName(t)[0],a.async=1,a.src=r,s.parentNode.insertBefore(a,s)}(e,i,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",t.config.Partner.urchin,"auto"),this.firstSent=!1,this.secondSent=!1,this.thirdSent=!1,t.add("ended",Brid.Util.$f(this,this.onEnded)),t.add("play",Brid.Util.$f(this,this.onPlay)),t.add("pause",Brid.Util.$f(this,this.onPause)),t.add("start",Brid.Util.$f(this,this.onStart)),t.add("socialshare",Brid.Util.$f(this,this.onSocial))},onSocialView:function(){var i,t,r,n=e.location.href,a=n.split("#"),s=a.length;if(s>1&&-1!=n.indexOf("brid.tv"))r=a[1];else for(var c=0;s>c;c++)if(-1!=a[c].indexOf("brid_")){r=a[c],t=c;break}if(Brid.log("onSocialView",a,r),r&&-1!=r.indexOf(this.player.id))-1!=r.indexOf("brid_fb")&&(i="fb_view"),-1!=r.indexOf("brid_tw")&&(i="tw_view"),-1!=r.indexOf("brid_gp")&&(i="gp_view"),-1!=r.indexOf("brid_pt")&&(i="pt_view"),-1!=r.indexOf("brid_rd")&&(i="rd_view"),-1!=r.indexOf("brid_cp")&&(i="cp_view");else if(r)switch(r){case"fb":i="fb_view";break;case"tw":i="tw_view";break;case"gp":i="gp_view";break;case"pt":i="pt_view";break;case"rd":i="rd_view";break;case"cp":i="cp_view"}this.player.config.shared&&(i="em_view"),i&&ga("send","event","Brid-Video",i,this.player.currentSource.title+"_*"+parseInt(this.player.currentSource.id))},onEnded:function(){ga("send","event","Brid-Video","End",this.player.currentSource.title+"_*"+parseInt(this.player.currentSource.id)),this.player.remove("timeupdate",Brid.Util.$f(this,this.onTime)),this.firstSent=!1,this.secondSent=!1,this.thirdSent=!1},onPlay:function(){ga("send","event","Brid-Video","Play",this.player.currentSource.title+"_*"+parseInt(this.player.currentSource.id))},onPause:function(){(this.player.isPlaying||this.player.getAdInProgress()||"flash"!=this.player.techName)&&ga("send","event","Brid-Video","Pause",this.player.currentSource.title+"_*"+parseInt(this.player.currentSource.id))},onStart:function(){Brid.log("Google Analytics start"),ga("send","event","Brid-Video","Start",this.player.currentSource.title+"_*"+parseInt(this.player.currentSource.id)),this.onSocialView(),this.player.add("timeupdate",Brid.Util.$f(this,this.onTime))},onSocial:function(e){Brid.log("onSocial",e);var i;switch(e.data){case"facebook":i="fb_click";break;case"twitter":i="tw_click";break;case"googleplus":i="gp_click";break;case"pinterest":i="pt_click";break;case"embed":i="em_click";break;case"link":i="cp_click"}ga("send","event","Brid-Video",i,this.player.currentSource.title+"_*"+parseInt(this.player.currentSource.id))},onTime:function(){var e=this.player.currentTime()/this.player.duration();e>.25&&this.firstSent===!1?(ga("send","event","Brid-Video","FirstQuartile",this.player.currentSource.title+"_*"+parseInt(this.player.currentSource.id)),this.firstSent=!0):e>.5&&this.secondSent===!1?(ga("send","event","Brid-Video","SecondQuartile",this.player.currentSource.title+"_*"+parseInt(this.player.currentSource.id)),this.secondSent=!0):e>.75&&this.thirdSent===!1&&(ga("send","event","Brid-Video","ThirdQuartile",this.player.currentSource.title+"_*"+parseInt(this.player.currentSource.id)),this.thirdSent=!0)}}),t.setup=function(i){e.$bp.Util.merge(e.$bp(i).config.children,{googleAnalytics:{}})},e.$bridga=t,Brid.event.trigger(i,"bridpluginloaded")}(window,document);
;!function(e){var t={};e.$bp.youtube=Brid.PlaybackTech.extend({ytPlayer:null,hdLevelAvailable:null,init:function(i,r){Brid.log("--- Brid Youtube Initializing ---"),Brid.log("test - window.onYouTubeAPIReady",e.onYouTubeAPIReady),"Brid"!=e.onYouTubeAPIReady.id&&(e.onYouTubeAPIReady=t.onYouTubeAPIReady),this.player=i,this.config=r,this.ytPlayer=null;var a=r.parentEl;this.el=Brid.Util.createElement("div",{id:"youtube_holder",className:"brid-tech",innerHTML:"<div id="+i.id+"_yt></div>"}),this.children=[];this.player.ready(function(){this.config.autoplay&&this.tech.play()}),Brid.Util.insertFirst(this.el,a),document.BridYtReady||"undefined"!=typeof YT&&"undefined"!=typeof YT.Player?this.oniFrameReady():Brid.event.add(document,"youtubeready",this.$f(this.oniFrameReady)),Brid.Loader.load("js",["//www.youtube.com/iframe_api"],t.onYouTubeAPIReady,null,this)},currentSrc:function(){return this.el.currentSrc},oniFrameReady:function(e){Brid.log("on YT iFrameReady",e),this.initializeYT()},initializeYT:function(){Brid.log("Brid initializeYT"),this.el.currentSrc=this.config.source.src,this.ytPlayer=new YT.Player(this.el.parentNode.id+"_yt",{height:this.config.parentEl.offsetHeight,width:this.config.parentEl.offsetWidth,videoId:this.config.source.src,playerVars:{autoplay:0,controls:0,enablejsapi:1,wmode:"opaque",showinfo:0,rel:0},events:{onReady:this.$f(this.onPlayerReady)}}),this.player.add(["playerresize","openRightScreen","closeRightScreen","openLeftScreen","closeLeftScreen"],this.$f(this.onResize))},onPlayerReady:function(){return Brid.log("Brid Youtube onPlayerReady",this.ytPlayer),this.isReady&&!this.player.isPlaying?(this.isReady=!1,this.ytPlayer.destroy(),void this.initializeYT()):(this.player.tag=this.el,this.fresh=!0,this.ytPlayer.addEventListener("onStateChange",this.$f(this.onPlayerStateChange)),this.ytPlayer.addEventListener("onError",this.$f(this.onPlayerError)),this.ytPlayer.addEventListener("onPlaybackQualityChange",this.$f(this.onPlaybackQualityChange)),this.player.currentSource.title||(this.player.currentSource.title=this.ytPlayer.getVideoData().title),this.triggerReady(),void this.onResize())},onPlayerStateChange:function(e){switch(Brid.log("Brid YT onPlayerStateChange "+e.data+" this.playing: "+this.playing),e.data){case YT.PlayerState.ENDED:this.player.isPlaying&&(this.playing=!1,this.player.trigger("ended"));break;case YT.PlayerState.PLAYING:this.playing||(this.playing=!0),this.fresh=!1,this.player.trigger("play"),Brid.Util.hasTouch()&&this.player.mouseOver();break;case YT.PlayerState.PAUSED:this.player.trigger("pause"),Brid.Util.hasTouch()&&this.player.mouseOver()}},onPlaybackQualityChange:function(){Brid.log("this.ytPlayer.getPlaybackQuality()",this.ytPlayer.getPlaybackQuality()),this.isHD()!=!!this.player.values.hd&&this.player.trigger("qualityChange")},onPlayerError:function(e){Brid.log("--- BridPlayer --- Youtube Error: "+e.data)},destroy:function i(){this.ytPlayer.removeEventListener("onStateChange",this.$f(this.onPlayerStateChange)),this.ytPlayer.removeEventListener("onError",this.$f(this.onPlayerError)),this.ytPlayer.removeEventListener("onPlaybackQualityChange",this.$f(this.onPlaybackQualityChange)),this.ytPlayer.destroy(),this.player.remove(["playerresize","openRightScreen","closeRightScreen","openLeftScreen","closeLeftScreen"],this.$f(this.onResize)),i.base.call(this)},onResize:function(){"undefined"!=typeof this.ytPlayer&&this.ytPlayer&&setTimeout(this.$f(function(){this.ytPlayer.setSize(this.el.offsetWidth,this.el.offsetHeight)}),50)},src:function(e){this.fresh=!1,this.playing=!1,this.el.currentSrc=e,Brid.log("loadVideoById "+e),this.ytPlayer.loadVideoById(e),this.player.currentSource.title||(this.player.currentSource.title=this.ytPlayer.getVideoData().title),this.onResize()},play:function(){return Brid.log("YT playVideo"),Brid.Util.isMobilePlatform()&&this.fresh?void this.onResize():void this.ytPlayer.playVideo()},pause:function(){this.ytPlayer.pauseVideo()},stop:function(){Brid.log("ytPlayer stop"),this.ytPlayer.pauseVideo()},paused:function(){return this.ytPlayer.getPlayerState()==YT.PlayerState.PAUSED},ended:function(){return this.ytPlayer.getPlayerState()==YT.PlayerState.ENDED},currentTime:function(){return this.ytPlayer.getCurrentTime()},setCurrentTime:function(e){this.ytPlayer.seekTo(e,!0)},duration:function(){return this.ytPlayer.getDuration()||0},buffered:function(){return Brid.Util.createTimeRange(0,this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration())},volume:function(){return this.ytPlayer.getVolume()/100},setVolume:function(e){Brid.log("YT setVolume",e),this.ytPlayer.setVolume(100*e),setTimeout(this.$f(function(){.05>e&&this.ytPlayer.setVolume(e),this.player.trigger("volumechange"),Brid.log("YT getVolume",this.ytPlayer.getVolume())}),200)},muted:function(){return this.ytPlayer.isMuted()},setMuted:function(e){e===!0?this.ytPlayer.mute():this.ytPlayer.unMute(),setTimeout(this.$f(function(){this.player.trigger("volumechange")}),200)},isHD:function(){var e=this.ytPlayer.getPlaybackQuality();return"small"==e||"medium"==e||"large"==e?!1:"hd720"==e||"hd1080"==e||"highres"==e?!0:!1},setHD:function(e){Brid.log("youtube setHD",e),this.ytPlayer.setPlaybackQuality(e?this.hdLevelAvailable:"large")},HDAvailable:function(){var e=this.ytPlayer.getAvailableQualityLevels();return e?-1!=e.indexOf("hd1080")?(this.hdLevelAvailable="hd1080",!0):-1!=e.indexOf("hd720")?(this.hdLevelAvailable="hd720",!0):(this.hdLevelAvailable=null,!1):!1},width:function(){return this.el.offsetWidth},height:function(){return this.el.offsetHeight},supportsFullScreen:function(){return!1},load:function(){this.player.trigger("loadedmetadata")}}),Brid.youtube.isSupported=function(){return!!document.createElement("video").canPlayType},Brid.youtube.canPlaySource=function(e){var t,i=Brid.Util.formatType(e.src,e.type);return t=Brid.youtube.prototype.support.formats.indexOf(i)>-1?"maybe":!1},Brid.youtube.canPlayURL=function(e){var t,i=Brid.Util.getTypeFromFile(e);return t=Brid.youtube.prototype.support.formats.indexOf(i)>-1?"maybe":!1},Brid.youtube.prototype.support={formats:["video/youtube","video/x-youtube"],progressEvent:!1,timeupdateEvent:!1,adManagement:!1,canResize:!Brid.Util.isIOS(),hasPoster:!0,monetizable:!1},t.onYouTubeAPIReady=function(e){Brid.log("onYouTubeAPIReady called","e",e,"BridYtReady",document.BridYtReady,"YT",typeof YT),"undefined"!=typeof YT&&Brid.log("onYouTubeAPIReady called","YT.Player",typeof YT.Player),clearTimeout(t.to),document.BridYtReady||"undefined"==typeof YT||"undefined"==typeof YT.Player?"undefined"!=typeof YT&&"undefined"==typeof YT.Player&&(t.to=setTimeout(t.onYouTubeAPIReady,500)):(Brid.log("onYouTubeAPIReady trigger youtubeready"),document.BridYtReady=!0,Brid.event.trigger(document,"youtubeready"))},t.setup=function(i){Brid.log("YT plugin setup",document.BridYtReady),document.BridYtReady?Brid.log("setup - document.BridYtReady"):(Brid.log("setup - window.onYouTubeAPIReady"),e.onYouTubeAPIReady=t.onYouTubeAPIReady,t.onYouTubeAPIReady.id="Brid"),Brid.log("test - window.onYouTubeAPIReady",e.onYouTubeAPIReady.id),e.$bp(i).addTech("youtube")},e.$bridyt=t,Brid.event.trigger(document,"bridpluginloaded")}(window,document);
;var _qevents=_qevents||[];!function(t,e){var n={};t.$bp.QuantCast=Brid.Class.extend({qcID:"p-LPp1zDALELqQr",partner:null,init:function(t){this.player=t,this.partner=t.config.Partner.domain_short.replace(".",""),function(){var t=e.createElement("script");t.src=("https:"==e.location.protocol?"https://secure":"http://edge")+".quantserve.com/quant.js",t.async=!0,t.type="text/javascript";var n=e.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}(),_qevents.push({qacct:this.qcID}),t.add("start",Brid.Util.$f(this,this.onStart)),t.add("ourAdStart",Brid.Util.$f(this,this.onAdStart)),t.add("ourAdRequest",Brid.Util.$f(this,this.onAdRequest))},onStart:function(){"undefined"!=typeof _qevents&&(Brid.log("QuantCast","onStart"),_qevents.push({qacct:this.qcID,labels:this.partner+".VideoView",event:"refresh"}))},onAdStart:function(){"undefined"!=typeof _qevents&&(Brid.log("QuantCast","onAdStart"),_qevents.push({qacct:this.qcID,labels:this.partner+".AdView",event:"refresh"}))},onAdRequest:function(){"undefined"!=typeof _qevents&&(Brid.log("QuantCast","onAdRequest"),_qevents.push({qacct:this.qcID,labels:this.partner+".AdRequest",event:"refresh"}))}}),n.setup=function(e){t.$bp.Util.merge(t.$bp(e).config.children,{quantCast:{}})},t.$bridqc=n,Brid.event.trigger(e,"bridpluginloaded")}(window,document);