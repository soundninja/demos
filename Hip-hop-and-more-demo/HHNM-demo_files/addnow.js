(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./app/scripts/addnow.js":[function(require,module,exports){
(function(e){"use strict";var d=require("./widget/addnow"),n=require("./widget/render");e._addnow=e._addnow||[],e._addnow.process?e._addnow.process():e._addnow=d.initiate(e._addnow),n.preview({orientation:"horizontal",buttonSize:"large"})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./widget/addnow":"/opt/addnow/widget/app/scripts/widget/addnow.js","./widget/render":"/opt/addnow/widget/app/scripts/widget/render.js"}],"/opt/addnow/widget/app/scripts/utilities/cache.js":[function(require,module,exports){
"use strict";var urlData={};exports.getUrlData=function(t){return void 0===urlData[t]&&(urlData[t]={jsonp:{},count:{},shortUrl:{},total:0}),urlData[t]};
},{}],"/opt/addnow/widget/app/scripts/utilities/filters.js":[function(require,module,exports){
"use strict";exports.toFixed=function(t,e){return Number(t.toFixed(e)).toString()},exports.shorterTotal=function(t){return t>=1e6?t=exports.toFixed(t/1e6,2)+"M":t>=1e3&&(t=exports.toFixed(t/1e3,1)+"k"),t};
},{}],"/opt/addnow/widget/app/scripts/utilities/jqLite.js":[function(require,module,exports){
(function(e){"use strict";var t,n=require("./modernizrLite.js");t=function(e){return e instanceof Function?function(){var t;try{t=JSON.parse(this.responseText)}catch(n){t=this.responseText}e(t)}:exports.noop},exports.noop=function(){},exports.param=function(e){var t="";return exports.each(e,function(e,n){t+="&"+encodeURIComponent(e)+"="+encodeURIComponent(n)}),t.substr(1)},exports.ajax=function(e){var o,r=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8",s=e.type,a=e.url,i=void 0===e.async?!0:e.async,c=e.data,p=t(e.success),d=t(e.error);if(c)switch(r){case"application/json; charset=UTF-8":c=JSON.stringify(c);break;case"application/x-www-form-urlencoded; charset=UTF-8":c=this.param(c);break;default:console.error('Unexpected contentType "'+r+'"')}n.xhr2?(o=new XMLHttpRequest,o.open(s,a,i),c&&o.setRequestHeader("Content-Type",r),o.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400?p.call(this):d.call(this))},o.send(c)):(o=new XDomainRequest,o.open(s,a),o.onload=p,o.onerror=d,o.send(c))},exports.getJSONP=function(t,n){var o,r,s;do s="jqLite"+Math.round(1e16*Math.random())+"_"+(new Date).getTime();while(s in e);e[s]=function(t){try{delete e[s]}catch(o){e[s]=void 0}n(t)},t=t.replace("{callback}",encodeURIComponent(s)),o=document.createElement("script"),o.type="text/javascript",o.async=!0,o.src=t,r=document.getElementsByTagName("script")[0],r.parentNode.insertBefore(o,r)},exports.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},exports.text=function(e,t){void 0!==e.textContent?e.textContent=t:e.innerText=t},exports.on=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,function(){n.apply(e,arguments)})},exports.each=function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&t(n,e[n])},exports.extend=function(e){var t,n;for(t=1;t<arguments.length;t+=1)n=arguments[t],n&&exports.each(n,function(t,n){"object"===exports.type(n)?("object"!==exports.type(e[t])&&(e[t]={}),exports.extend(e[t],n)):e[t]=n})},exports.type=function(e){var t;return t=void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()},exports.hide=function(e){e.style.display="none"},exports.show=function(e){e.style.display="block"},exports.isHidden=function(e){return""===e.style.display||"none"===e.style.display},exports.isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./modernizrLite.js":"/opt/addnow/widget/app/scripts/utilities/modernizrLite.js"}],"/opt/addnow/widget/app/scripts/utilities/mobile.js":[function(require,module,exports){
exports.isMobile=function(){var e=Boolean(navigator.userAgent.match(/Android/i)),a=Boolean(navigator.userAgent.match(/BlackBerry/i)),r=Boolean(navigator.userAgent.match(/iPhone|iPad|iPod/i)),n=Boolean(navigator.userAgent.match(/Opera Mini/i)),o=Boolean(navigator.userAgent.match(/IEMobile/i));return Boolean(e||a||r||n||o)},exports.get_separator=function(){var e=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),a=(/Android/i.test(navigator.userAgent),"");e&&(a=navigator.userAgent.indexOf("OS "),iOSVersion=Number(navigator.userAgent.substr(a+3,3).replace("_",".")));var r="";return r=e&&iOSVersion>=8?"&":e?";":"?"};
},{}],"/opt/addnow/widget/app/scripts/utilities/modernizrLite.js":[function(require,module,exports){
"use strict";var progEv=Boolean(window.ProgressEvent),fdata=Boolean(window.FormData),wCreds=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;exports.xhr2=Boolean(progEv&&fdata&&wCreds);
},{}],"/opt/addnow/widget/app/scripts/widget/addnow.js":[function(require,module,exports){
(function(e){var t,i,s=require("./urls"),n=require("./options"),r=require("./copy"),o=require("../utilities/jqLite"),a=require("./events"),d=require("./counters"),u=require("./sharingHash");exports.addStyles=function(){var t,i,n,r=!0,o=e.document.querySelectorAll("link");for(t=0;t<o.length;t+=1)if(i=o[t],"stylesheet"===i.getAttribute("rel")&&i.getAttribute("href")===s.cssUrl){r=!1;break}r&&(i=e.document.createElement("link"),i.setAttribute("rel","stylesheet"),i.setAttribute("href",s.cssUrl),i.setAttribute("type","text/css"),n=e.document.querySelector("script"),n.parentNode.insertBefore(i,n))},exports.push=function(t){var i,r=t.shift();switch(r){case"set":i=t.pop(),n.setOptions(n.siteOptions,t,i);break;case"domain":s.setDomain(t);break;case"setSiteId":i=t.pop(),n.setOptions(n.siteOptions,["siteId"],i);break;default:e.console.warn('Unexpected command "'+r+'"')}},t=function(){s.setDefaultDomains(),exports.addStyles(),i(onSettingsLoad)},sendViewEvent=function(){var e={eventType:a.TYPES.view,tool:a.TOOLS.sharingButtons,url:n.siteOptions.url};a.sendEvent(e)},onSettingsLoad=function(){var t=e.document.querySelectorAll(".addnow"),i=[];u.sendSharingEventByHash(),u.addSharingHash(n.siteOptions.uuid),sendViewEvent(),r.initiate();for(var s=0;s<t.length;s++){var o=parseWidgetAttributes(t[s]);t[s].attributes.getNamedItem("data-preview")||o.valid&&i.push({id:o.id,element:t[s]})}d.getCounterJson(i)},parseWidgetAttributes=function(e){var t,i,s,r,o=e.attributes;if(r=o.getNamedItem("data-id"),!r)return{id:null,valid:!0};r=r.value||r.nodeValue;var e=n.getWidget(r);if(!e)return{id:r,valid:!1};for(t=0;t<o.length;t+=1)i=o[t].nodeName.split("-"),"data"===i.shift()&&(s=o[t].value||o[t].nodeValue,(1!==i.length||"id"!==i[0])&&n.addWidgetOption(r,i,s));return{id:r,valid:!0}},i=function(e){site_id=n.siteOptions.hash_id,null===site_id?site_id=n.siteOptions.siteId:site_id=encodeURIComponent(site_id),o.ajax({type:"GET",url:s.settingsUrl+"?idsite="+site_id,contentType:"application/json; charset=UTF-8",success:function(t){var i;for(i in t.follow)exports.push(["set","follow",i,t.follow[i]]);for(i in t.sharing)exports.push(["set","sharing",i,t.sharing[i]]);t.widget_configurations.forEach(function(e){n.addWidget(e)}),exports.push(["set","uuid",t.uuid]),exports.push(["set","hash_id",t.hash_id]),e&&e()}})},exports.initiate=function(e){var i,s={push:exports.push,process:t};for(i=0;i<e.length;i+=1)exports.push(e[i]);return t(),s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","./copy":"/opt/addnow/widget/app/scripts/widget/copy.js","./counters":"/opt/addnow/widget/app/scripts/widget/counters.js","./events":"/opt/addnow/widget/app/scripts/widget/events.js","./options":"/opt/addnow/widget/app/scripts/widget/options.js","./sharingHash":"/opt/addnow/widget/app/scripts/widget/sharingHash.js","./urls":"/opt/addnow/widget/app/scripts/widget/urls.js"}],"/opt/addnow/widget/app/scripts/widget/afterShareTemplates.js":[function(require,module,exports){
"use strict";var generatePopupItem,items,sharedTemplates=require("./sharedTemplates.js"),jqLite=require("../utilities/jqLite.js"),events=require("./events.js");items=[{platform:"facebook",title:"Facebook"},{platform:"twitter",title:"Twitter"},{platform:"googlePlus",title:"Google+"},{platform:"linkedin",title:"LinkedIn"},{platform:"pinterest",title:"Pinterest"},{platform:"instagram",title:"Instagram"}],generatePopupItem=function(e,t,a,n,l){var i,r="follow-"+n,o=document.createElement("li"),d=document.createElement("a"),s=document.createElement("span");return d.setAttribute("target","_blank"),d.setAttribute("title",e),d.setAttribute("href",t),jqLite.addClass(d,r),jqLite.on(d,"click",function(){i={url:l.url,eventType:events.TYPES.follow,tool:a,source:n},events.sendEvent(i)}),o.appendChild(d),jqLite.addClass(s,"addnow-service-icon"),d.appendChild(s),o},exports.generatePopup=function(e,t){var a,n,l,i,r,o,d,s,p,u,m=[];if(t.follow.text){for(u=0;u<items.length;u+=1)d=items[u],p=t.follow[d.platform],p&&m.push(generatePopupItem(d.title,p,e,d.platform,t));if(m.length>0){for(a=document.createElement("div"),jqLite.addClass(a,"addnow-popup"),jqLite.addClass(a,"addnow-after-share"),n=document.createElement("h3"),jqLite.text(n,"Thank you for sharing."),a.appendChild(n),l=sharedTemplates.generateBlankLink(),jqLite.addClass(l,"addnow-close-popup"),jqLite.text(l,"×"),a.appendChild(l),i=document.createElement("div"),jqLite.addClass(i,"addnow-thankyou-box"),a.appendChild(i),r=document.createElement("h2"),jqLite.text(r,t.follow.text),i.appendChild(r),o=document.createElement("ul"),i.appendChild(o),u=0;u<m.length;u+=1)o.appendChild(m[u]);return s=sharedTemplates.generateBlankLink(),jqLite.addClass(s,"addnow-share-again"),jqLite.text(s,"share again"),i.appendChild(s),a.appendChild(sharedTemplates.generatePopupFooter()),{popup:a,closeButton:l,shareAgainButton:s}}}return null};
},{"../utilities/jqLite.js":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","./events.js":"/opt/addnow/widget/app/scripts/widget/events.js","./sharedTemplates.js":"/opt/addnow/widget/app/scripts/widget/sharedTemplates.js"}],"/opt/addnow/widget/app/scripts/widget/copy.js":[function(require,module,exports){
(function(e){function t(t){u.on(e.document,"mouseup",function(e){e.target===t||t.contains(e.target)||u.hide(t)})}function n(){var e,t,n,i,o,r;return e=getSelection(),t=e.getRangeAt(0).cloneRange(),t.collapse(!1),n=document.createElement("span"),t.insertNode(n),i=n.getBoundingClientRect(),n.parentNode.removeChild(n),o=i.left+i.width,r=i.top+i.height+window.scrollY,{x:o,y:r}}function i(i,o){var r,d,a,s,l,c=10;return d=e.document.getElementsByClassName(o)[0],d||(d=e.document.createElement("div"),s=document.createElement("h3"),u.text(s,"Share With Friends"),d.appendChild(s),l=h.generateBlankLink(),u.addClass(l,"addnow-close-popup"),u.text(l,"×"),u.on(l,"click",function(){u.hide(d)}),d.appendChild(l),u.addClass(d,"addnow"),u.addClass(d,"addnow-popup"),u.addClass(d,"addnow-extra-shares"),u.addClass(d,o),r={id:i,element:d},f.initiate(r,p.TOOLS.copyPaste),d.appendChild(h.generatePopupFooter())),u.show(d),t(d),a=n(),d.style.left=a.x+c+"px",d.style.top=a.y+c+"px",d}function o(e,t){var n,i,o;if(e.length<=t)return e;if(n=e.charAt(t),i=e.substring(0,t),d(n))return i;for(var r=t-1;r>0;r--)if(o=i.charAt(r),d(o))return i.substring(0,r-1);return""}function r(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function d(e){var t=[" ","	","\n","\r",".",",",":",";","!","?"];return r(t,e)}var a,s,l=require("../utilities/modernizrLite"),u=require("../utilities/jqLite"),c=require("./options"),p=require("./events"),f=require("./widgetTemplates"),h=require("./sharedTemplates"),m=require("./urlShortener"),y=1500;a=function(){var t,n,r,d=getSelection(),a=d.toString();c.siteOptions.sharing.copyPaste&&(n={keywords:o(a,y),uuid:s,url:c.siteOptions.url,eventType:p.TYPES.copy,tool:p.TOOLS.copyPaste,source:"darkSocial"},p.sendEvent(n),t=c.getWidgetsByType(c.WIDGET_TYPES.copyPaste)[0],t?(t.text=a,r=i(t.id,"addnow-copy-paste"),e.document.body.appendChild(r)):m.getShortUrl(p.TOOLS.copyPaste,null,c.siteOptions.url,s,null,function(t){var n=' Read more at: <a href="'+t+'">'+t+"</a>",i=e.document.createElement("div");a+=n,i.style.left="-99999px",i.style.position="absolute",i.innerHTML=a,e.document.body.appendChild(i),d.selectAllChildren(i),setTimeout(function(){e.document.body.removeChild(i)},0)},!1))},exports.initiate=function(){"function"===u.type(e.document.addEventListener)&&l.xhr2&&e.document.addEventListener("copy",a),s=c.siteOptions.uuid}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","../utilities/modernizrLite":"/opt/addnow/widget/app/scripts/utilities/modernizrLite.js","./events":"/opt/addnow/widget/app/scripts/widget/events.js","./options":"/opt/addnow/widget/app/scripts/widget/options.js","./sharedTemplates":"/opt/addnow/widget/app/scripts/widget/sharedTemplates.js","./urlShortener":"/opt/addnow/widget/app/scripts/widget/urlShortener.js","./widgetTemplates":"/opt/addnow/widget/app/scripts/widget/widgetTemplates.js"}],"/opt/addnow/widget/app/scripts/widget/counters.js":[function(require,module,exports){
"use strict";var countRegister,googlePlusCounterRequest,getCounterValue,mergeCounterData,updateTracker,parallel,trackerCounterJSON,fillLocalCache,render,modernizrLite=require("../utilities/modernizrLite.js"),filters=require("../utilities/filters.js"),cache=require("../utilities/cache.js"),jqLite=require("../utilities/jqLite.js"),urls=require("./urls.js"),options=require("./options.js"),widgetTemplates=require("./widgetTemplates.js"),events=require("./events.js"),urlShortener=require("./urlShortener.js"),numberOfAllRequest=0,requestCounter=0,updateTrackerJSON={},timeoutHandler={},updateTrackerRate=.1;countRegister=[],mergeCounterData=function(e,t,r,n){var u;return requestCounter++,null!==e&&e!==t?(void 0===updateTrackerJSON[r]&&(updateTrackerJSON[r]={}),updateTrackerJSON[r][n]=e,u=e):u=t,requestCounter===numberOfAllRequest&&updateTracker(updateTrackerJSON),u},updateTracker=function(e){var t=Math.random();!jqLite.isEmptyObject(e)&&updateTrackerRate>t&&jqLite.ajax({type:"PATCH",url:urls.countersUrl+"/"+options.siteOptions.hash_id,contentType:"application/json; charset=UTF-8",data:e})},fillLocalCache=function(e,t){var r=cache.getUrlData(e);trackerCounterJSON[e][t]?r.count[t]=trackerCounterJSON[e][t]:r.count[t]=0,r.total+=r.count[t]},getCounterValue=function(e,t,r){var n,u=cache.getUrlData(e);if(!u.jsonp[t]&&(u.jsonp[t]=!0,"custom"!==t&&numberOfAllRequest++,fillLocalCache(e,t),exports.render(),n=function(r){var n=mergeCounterData(r,u[t],e,t);u.count[t]!==n&&(u.total+=n-u.count[t],u.count[t]=n),exports.render()},options.siteOptions.buttonOptions[t])){var o=function(e,t,n){"linkedin"===e?urlShortener.getShortUrl(events.TOOLS.sharingButtons,e,t,null,r,n):n(t)};o(t,e,function(){var e=function(e){var t,r=0;return"undefined"!=typeof e.count?(t=String(e.count),t=t.replace("Â ",""),r+=parseInt(t,10)):e.data&&e.data.length>0&&"undefined"!=typeof e.data[0].share_count?r+=parseInt(e.data[0].total_count,10):"undefined"!=typeof e[0]&&(r+=parseInt(e[0].total_posts,10)),r},r=[];if("googlePlus"===t){for(var u=0;u<arguments.length;u++)if(null!=arguments[u]){var o=arguments[u];r.push(function(e){googlePlusCounterRequest(o,e)})}r.push(function(e){var t=e.reduce(function(e,t){return e+t},0);n(t)})}else{for(var u=0;u<arguments.length;u++)if(null!=arguments[u]){var o=arguments[u];r.push(function(e){jqLite.getJSONP(options.siteOptions.buttonOptions[t].countersUrl.replace("{url}",encodeURIComponent(o)),e)})}r.push(function(t){var r=t.map(function(t){return e(t)}),u=r.reduce(function(e,t){return e+t},0);n(u)})}parallel.apply(this,r)})}},googlePlusCounterRequest=function(e,t){return modernizrLite.xhr2?void jqLite.ajax({type:"POST",url:"https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ",data:[{method:"pos.plusones.get",id:"p",params:{nolog:!0,id:e,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"}],contentType:"application/json; charset=UTF-8",success:function(e){"undefined"!=typeof e[0].result&&t(e[0].result.metadata.globalCounts.count)},error:function(){}}):t(0)},parallel=function(e,t){function r(e,t){e.done=!0,e.result=t[0];for(var r=[],o=0;o<n.length;o++){if(!n[o].done)return;r.push(n[o].result)}u(r)}for(var n=[],u=null,o=arguments.length-1,a=0;a<arguments.length;a++)a==o?u=arguments[a]:n.push({fn:arguments[a],done:!1,result:null});return 0==n.length?void u():void n.forEach(function(e,t,n){var u=function(){r(e,arguments)};e.fn(u)})},exports.render=function(){var e;for(e=0;e<countRegister.length;e+=1)countRegister[e]()},exports.getCount=function(e,t,r,n){var u,o=cache.getUrlData(t);u="custom"===e?function(){n(filters.shorterTotal(o.total))}:function(){n(filters.shorterTotal(o.count[e]))},countRegister.push(u),getCounterValue(t,e,r),isNaN(o.count[e])||exports.render()},exports.getCounterJson=function(e){var t,r,n,u,o,a,s=[];for(n=0,o=e.length;o>n;n+=1)if(t=e[n],r=t.id?options.getWidget(t.id).url:options.getStaticWidget(t.element).url,0===s.length)s.push(r);else for(u=0,a=s.length;a>u&&s[u]!==r;u++)u+1===s.length&&s.push(r);jqLite.ajax({type:"POST",url:urls.countersUrl+"/"+options.siteOptions.hash_id,data:s,success:function(t){for(trackerCounterJSON=t,n=0;n<e.length;n+=1)widgetTemplates.initiate(e[n])}})};
},{"../utilities/cache.js":"/opt/addnow/widget/app/scripts/utilities/cache.js","../utilities/filters.js":"/opt/addnow/widget/app/scripts/utilities/filters.js","../utilities/jqLite.js":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","../utilities/modernizrLite.js":"/opt/addnow/widget/app/scripts/utilities/modernizrLite.js","./events.js":"/opt/addnow/widget/app/scripts/widget/events.js","./options.js":"/opt/addnow/widget/app/scripts/widget/options.js","./urlShortener.js":"/opt/addnow/widget/app/scripts/widget/urlShortener.js","./urls.js":"/opt/addnow/widget/app/scripts/widget/urls.js","./widgetTemplates.js":"/opt/addnow/widget/app/scripts/widget/widgetTemplates.js"}],"/opt/addnow/widget/app/scripts/widget/events.js":[function(require,module,exports){
"use strict";function getUrlToSendEvent(e){var t;switch(e){case"tracker":t=urls.trackEventUrl;break;case"dmp":t=urls.dmpEventUrl}return t}function getPixel(e,t){var i=new Image;t?i.setAttribute("src",e+"?"+jqLite.param(t)):i.setAttribute("src",e)}var urls=require("./urls"),options=require("./options"),jqLite=require("../utilities/jqLite");exports.sendEvent=function(e,t){var i;return e?options.siteOptions.hash_id?(i={idsite:options.siteOptions.hash_id,e_c:e.eventType,e_n:e.url,e_t:e.tool,e_i:document.title},e.source&&(i.e_a=e.source),e.keywords&&(i.e_k=e.keywords),e.time&&(i.e_v=e.time),e.uuid&&(i.e_u=e.uuid),getPixel(getUrlToSendEvent("tracker"),i),null===options.siteOptions.siteId?i.idsite=options.siteOptions.hash_id.split(":")[0]:i.idsite=options.siteOptions.siteId,getPixel(getUrlToSendEvent("dmp"),i),void(t&&getPixel(t,i))):void console.warn("no hash_id defined!"):void console.warn("No event options.")},exports.TOOLS={addressBar:"address-bar",sharingButtons:"sharing-buttons",copyPaste:"copy-paste"},exports.TYPES={follow:"follow",share:"share",copy:"copy",click:"click",view:"view"};
},{"../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","./options":"/opt/addnow/widget/app/scripts/widget/options.js","./urls":"/opt/addnow/widget/app/scripts/widget/urls.js"}],"/opt/addnow/widget/app/scripts/widget/extraPopupTemplates.js":[function(require,module,exports){
"use strict";var generateItem,mobile=require("../utilities/mobile"),jqLite=require("../utilities/jqLite"),sharedTemplates=require("./sharedTemplates"),popupjs=require("./popup"),events=require("./events"),urlShortener=require("./urlShortener"),options=require("./options");generateItem=function(e,t,p,a,i){var n=document.createElement("li"),d=sharedTemplates.generateBlankLink(),r=document.createElement("span"),l=document.createElement("span");return jqLite.addClass(d,e),n.appendChild(d),jqLite.addClass(r,"addnow-service-icon"),d.appendChild(r),jqLite.addClass(l,"addnow-service-label"),jqLite.text(l,t),d.appendChild(l),popupjs.generators[a]&&jqLite.on(d,"click",function(){urlShortener.getShortUrl(p,a,i.url,null,i.vanityDomain,popupjs.open(p,a,i))}),n},exports.generatePopup=function(e,t){var p,a,i,n,d;return p=document.createElement("div"),t.type===options.WIDGET_TYPES.mobile?jqLite.addClass(p,"addnow-mobile-popup"):jqLite.addClass(p,"addnow-popup"),jqLite.addClass(p,"addnow-extra-shares"),a=document.createElement("h3"),jqLite.text(a,"Share With Friends"),p.appendChild(a),i=sharedTemplates.generateBlankLink(),jqLite.addClass(i,"addnow-close-popup"),jqLite.text(i,"×"),p.appendChild(i),d=document.createElement("ul"),p.appendChild(d),d.appendChild(generateItem("pop-digg","digg",e,"digg",t)),d.appendChild(generateItem("pop-delicious","delicious",e,"delicious",t)),d.appendChild(generateItem("pop-stumbleupon","stumbleupon",e,"stumbleupon",t)),mobile.isMobile()&&(d.appendChild(generateItem("pop-whatsapp","whatsapp",e,"whatsapp",t)),d.appendChild(generateItem("pop-sms","sms",e,"sms",t))),d.appendChild(generateItem("pop-gmail","gmail",e,"gmail",t)),d.appendChild(generateItem("pop-tumblr","tumblr",e,"tumblr",t)),d.appendChild(generateItem("pop-reddit","reddit",e,"reddit",t)),n=generateItem("pop-mail","mail",e,"mail",t),t.type!=options.WIDGET_TYPES.mobile&&d.appendChild(n),p.appendChild(sharedTemplates.generatePopupFooter()),{popup:p,closeButton:i,mailButton:n}};
},{"../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","../utilities/mobile":"/opt/addnow/widget/app/scripts/utilities/mobile.js","./events":"/opt/addnow/widget/app/scripts/widget/events.js","./options":"/opt/addnow/widget/app/scripts/widget/options.js","./popup":"/opt/addnow/widget/app/scripts/widget/popup.js","./sharedTemplates":"/opt/addnow/widget/app/scripts/widget/sharedTemplates.js","./urlShortener":"/opt/addnow/widget/app/scripts/widget/urlShortener.js"}],"/opt/addnow/widget/app/scripts/widget/mailFormTemplates.js":[function(require,module,exports){
"use strict";var jqLite=require("../utilities/jqLite"),sharedTemplates=require("./sharedTemplates");exports.generatePopup=function(){var e,a,d,t,r;return e=document.createElement("div"),jqLite.addClass(e,"addnow-modal"),d=document.createElement("div"),jqLite.addClass(d,"addnow-overlay"),e.appendChild(d),a=document.createElement("div"),jqLite.addClass(a,"addnow-window"),jqLite.addClass(a,"addnow-mail-form"),e.appendChild(a),t=sharedTemplates.generateBlankLink(),jqLite.text(t,"×"),jqLite.addClass(t,"addnow-close-popup"),a.appendChild(t),r=document.createElement("iframe"),r.frameBorder=0,a.appendChild(r),a.appendChild(sharedTemplates.generatePopupFooter()),{modal:e,overlay:d,closeButton:t,iframe:r}};
},{"../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","./sharedTemplates":"/opt/addnow/widget/app/scripts/widget/sharedTemplates.js"}],"/opt/addnow/widget/app/scripts/widget/options.js":[function(require,module,exports){
(function(t){"use strict";var e=require("../utilities/jqLite"),o=require("./sharingHash"),n={siteId:null,url:document.URL,title:document.title,text:"",uuid:null,media:null,hash_id:null,dsp:{share:null},sharing:{byHash:!1,copyPaste:!1,hasShortUrls:!0},follow:{text:null,facebook:null,twitter:null,googlePlus:null,linkedin:null,instagram:null,pinterest:null},buttonOptions:{googlePlus:{size:"medium",lang:"en-US",annotation:"",countersUrl:""},facebook:{action:"like",layout:"button_count",width:"",send:"false",faces:"false",colorscheme:"",font:"",lang:"en_US",countersUrl:"https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27{url}%27&callback={callback}"},twitter:{count:"horizontal",hashtags:"",via:"",related:"",lang:"en",countersUrl:"http://cdn.api.twitter.com/1/urls/count.json?url={url}&callback={callback}"},digg:{type:"DiggCompact",countersUrl:"http://services.digg.com/2.0/story.getInfo?links={url}&type=javascript&callback={callback}"},delicious:{size:"medium",countersUrl:"http://feeds.delicious.com/v2/json/urlinfo/data?url={url}&callback={callback}"},stumbleupon:{layout:"1",countersUrl:""},linkedin:{counter:"",countersUrl:"http://www.linkedin.com/countserv/count/share?format=jsonp&url={url}&callback={callback}"},pinterest:{media:"",description:"",layout:"horizontal",countersUrl:"http://widgets.pinterest.com/v1/urls/count.json?url={url}&callback={callback}"}}},l={};exports.siteOptions=n,exports.WIDGET_TYPES={sharingButtons:"sharing-buttons",copyPaste:"copy-paste",newsletter:"newsletter",mobile:"mobile"},exports.addWidget=function(i){var r={},a=i.id;return a?(e.extend(r,n),r.id=a,r.type=i.type,r.orientation=i.orientation,r.buttonSize=i.button_size,r.buttonStyle=i.button_style,r.counterPosition=i.counter_position,r.buttons=i.buttons,r.vanityDomain=i.vanity_domain,r.type=i.type,r.type===exports.WIDGET_TYPES.mobile&&(r.min_width=i.min_width||640),o.isHashValid()?r.url=n.url.slice(0,n.url.indexOf(t.location.hash)):r.url=n.url,void(l[a]=r)):void console.warn("Incorrect format of widget data.")},exports.addWidgetOption=function(t,e,o){return l[t]?void(l[t][e]=o):void console.warn("Widget with id "+t+" not found")},exports.getWidget=function(t){return l[t]},exports.getWidgetsByType=function(t){var e=[];for(var o in l)l.hasOwnProperty(o)&&l[o].type==t&&e.push(l[o]);return e},exports.setOptions=function(t,o,n,l){var i,r="default options",a=!1,s=t;for(i=0;i<o.length-1;i+=1){if("object"!==e.type(s[o[i]])){a=!0;break}s=s[o[i]]}!a&&o[i]in s?s[o[i]]=n:a=!0,a&&(l&&(r='"'+l.outerHTML+'"'),console.warn('Unexpected option "'+o.join(".")+'" on '+r))},exports.getStaticWidget=function(t){var o,n,l,i=t.attributes,r={};for(e.extend(r,exports.siteOptions),o=0;o<i.length;o+=1)n=i[o].nodeName.split("-"),"data"===n.shift()&&(l=i[o].value||i[o].nodeValue,(1!==n.length||"layout"!==n[0])&&this.setOptions(r,n,l,t));return r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","./sharingHash":"/opt/addnow/widget/app/scripts/widget/sharingHash.js"}],"/opt/addnow/widget/app/scripts/widget/popup.js":[function(require,module,exports){
(function(t){"use strict";var e,o=require("../utilities/mobile.js"),n=require("./sharingHash"),i=require("./events"),r=require("../utilities/jqLite");e=function(e,o){var n=t.setInterval(function(){(null===e||e.closed)&&(t.clearInterval(n),o.follow.callback())},500)},exports.generators={gmail:function(o){var n=t.open("","","toolbar=0,status=0,width=900,height=600");return function(t){n.window.location.href="https://mail.google.com/mail/u/0/?"+r.param({view:"cm",fs:1,su:o.title,body:[o.text,t].join(" "),tf:1}),e(n,o)}},googlePlus:function(o){var n=t.open("","","toolbar=0,status=0,width=900,height=500");return function(t){n.window.location.href="https://plus.google.com/share?"+r.param({hl:o.buttonOptions.googlePlus.lang,url:t}),e(n,o)}},facebook:function(o){var n=t.open("","","toolbar=0,status=0,width=900,height=500");return function(t){n.window.location.href="http://www.facebook.com/sharer/sharer.php?"+r.param({u:t,t:o.title}),e(n,o)}},twitter:function(o){var n=t.open("","","toolbar=0,status=0,width=650,height=360");return function(t){var i={text:o.text||o.title,url:t};o.buttonOptions.twitter.via&&(i.via=o.buttonOptions.twitter.via),n.window.location.href="https://twitter.com/intent/tweet?"+r.param(i),e(n,o)}},digg:function(o){var n=t.open("","","toolbar=0,status=0,width=1100,height=670");return function(t){n.window.location.href="http://digg.com/submit?"+r.param({url:t}),e(n,o)}},delicious:function(o){var n=t.open("","","toolbar=no,width=550,height=550");return function(t){n.window.location.href="http://www.delicious.com/save?"+r.param({v:5,noui:"",jump:"close",url:t,title:o.title}),e(n,o)}},stumbleupon:function(o){var n=t.open("","","toolbar=no,width=550,height=550");return function(t){n.window.location.href="http://www.stumbleupon.com/badge/?"+r.param({url:t}),e(n,o)}},linkedin:function(o){var n=t.open("","","toolbar=no,width=550,height=550");return function(t){n.window.location.href="https://www.linkedin.com/cws/share?"+r.param({url:t,token:"",isFramed:"true"}),e(n,o)}},pinterest:function(o){var i;return o.media?(i=t.open("","","toolbar=no,width=700,height=300"),function(t){i.window.location.href="http://pinterest.com/pin/create/button/?"+r.param({url:t,media:o.media,description:o.text||o.title}),e(i,o)}):i=function(t){n.removingSharingHash();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("charset","UTF-8"),e.setAttribute("src","//assets.pinterest.com/js/pinmarklet.js?r="+99999999*Math.random()),document.body.appendChild(e)}},whatsapp:function(o){var n=t.open("","","toolbar=no,width=400,height=300");return function(t){n.window.location.href="whatsapp://send?"+r.param({text:o.text||o.title+": "+t}),e(n,o)}},sms:function(n){var i=o.get_separator(),a=t.open("","","toolbar=no,width=400,height=300");return function(t){a.window.location.href="sms:"+i+r.param({body:n.text||n.title+": "+t}),e(a,n)}},tumblr:function(o){var n=t.open("","","toolbar=no,width=550,height=550");return function(t){n.window.location.href="http://www.tumblr.com/share/link?"+r.param({url:t,name:o.title,description:o.text}),e(n,o)}},reddit:function(o){var n=t.open("","","toolbar=no,width=550,height=550");return function(t){n.window.location.href="http://www.reddit.com/submit?"+r.param({resubmit:!0,url:t,title:o.title}),e(n,o)}}},exports.open=function(t,e,o){var n={source:e,tool:t,eventType:i.TYPES.share,url:o.url};return i.sendEvent(n),exports.generators[e](o)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","../utilities/mobile.js":"/opt/addnow/widget/app/scripts/utilities/mobile.js","./events":"/opt/addnow/widget/app/scripts/widget/events.js","./sharingHash":"/opt/addnow/widget/app/scripts/widget/sharingHash.js"}],"/opt/addnow/widget/app/scripts/widget/render.js":[function(require,module,exports){
(function(e){function t(e){function t(e){return u.filter(function(t){return t.platform===e})[0]}var d,a,n=[];for(a=0;a<e.length;a++)d=t(e[a].service),n.push(d);return n.push(c),n}function d(e,t,d,n){var i,s,r,l,u,c={};return i=document.createElement("div"),a.addClass(i,"addnow-button-container"),c.root=i,s=o.generateBlankLink(),a.addClass(s,"addnow-button-"+e),a.addClass(s,e),i.appendChild(s),d&&(r=document.createElement("span"),a.addClass(r,"addnow-service-count"),s.appendChild(r),c.countElement=r),n&&a.on(s,"click",n),l=document.createElement("span"),a.addClass(l,"addnow-service-icon"),s.appendChild(l),u=document.createElement("span"),a.addClass(u,"addnow-service-label"),a.text(u,t),s.appendChild(u),c}var a=require("../utilities/jqLite"),n=require("../utilities/filters"),o=require("./sharedTemplates"),i=require("./urlShortener"),s=require("./counters"),r=(require("./events"),require("./popup")),l=require("./options"),u=[{platform:"facebook",text:"Facebook",isShortLink:!0},{platform:"twitter",text:"Twitter",isShortLink:!0},{platform:"linkedin",text:"LinkedIn",isShortLink:!0},{platform:"pinterest",text:"Pinterest",isShortLink:!1},{platform:"googlePlus",text:"Google",isShortLink:!0}],c={platform:"custom",text:"Share",isShortLink:!1};exports.preview=function(t){var d,a,n;for(d=e.document.querySelectorAll(".addnow"),n=0;n<d.length;n++)if(d[n].attributes.getNamedItem("data-preview")){a=d[n];break}a&&(exports.renderWidget(a,t),exports.generatePreviewShareButtons(a,t))},exports.generatePreviewShareButtons=function(e,d){var a,n,o,i;for(void 0!==d.buttons?a=t(d.buttons):(a=u.slice(),a.push(c)),i=0;i<a.length;i++)n=a[i],o=exports.generatePreviewShareButton(n,d),e.appendChild(o)},exports.generateShareButtons=function(e,d,a,n,o){var i,s,r,l;for(void 0!==a.buttons?i=t(a.buttons):(i=u.slice(),i.push(c)),l=0;l<i.length;l++)s=i[l],r=exports.generateShareButton(e,s,a,n,o[s.platform]),d.appendChild(r);return r},exports.generatePreviewShareButton=function(e,t){var o,i,s="no_counter"!==t.counterPosition;return o=d(e.platform,e.text,s,null),s&&(i=n.shorterTotal(Math.floor(1e4*Math.random())),a.text(o.countElement,i)),o.root},exports.generateShareButton=function(e,t,n,o,l){var u,c=t.platform,w=t.text,h=t.isShortLink,p=null;return l&&(p=h?function(){i.getShortUrl(e,c,n.url,null,n.vanityDomain,r.open(e,c,n))}:function(){r.open(e,c,n)(n.url)}),u=d(c,w,o,p),s.getCount(c,n.url,n.vanityDomain,function(e){o&&void 0!==e&&a.text(u.countElement,e)}),u.root},exports.renderWidget=function(t,d){if(a.addClass(t,"addnow-widget-orientation-"+d.orientation),a.addClass(t,"addnow-widget-size-"+d.buttonSize),"label"===d.buttonStyle&&(a.addClass(t,"label-like"),a.addClass(t,"addnow-has-label")),"no_counter"!==d.counterPosition&&(a.addClass(t,"addnow-counter-position-"+d.counterPosition),a.addClass(t,"addnow-has-counter")),d.type===l.WIDGET_TYPES.mobile){a.addClass(t,"addnow-mobile"),a.addClass(t,"addnow-fixed");var n=e.document.createElement("style"),o=document.createElement("script");n.type="text/css",o.type="text/javascript",o.async=!0;var i=".addnow.addnow-mobile { display: none; z-index:999999999; }\r\n.addnow.addnow-fixed { position: fixed; bottom: 0; left: 0; right: 0; text-align: center; padding: 5px; background: #333; box-shadow: 0 -2px 4px rgba(0,0,0,.15);}\r\n.addnow-hidden { display: none; transition: opacity 1s ease-out; opacity: 0; }\r\n@media screen and (max-width: %WIDTH%px) { .addnow.addnow-mobile { display: inline-block; } }",s='var addnowMobileWidget = document.getElementsByClassName("addnow-mobile")[0];var body = document.body, html = document.documentElement;var iH = window.innerHeight || html.clientHeight || body.clientHeight;var height = Math.max(body.scrollHeight, body.offsetHeight, iH, html.scrollHeight, html.offsetHeight);document.onscroll = function() {   if (addnowMobileWidget.classList.contains("addnow-hidden") && window.pageYOffset + iH < height - 5) {     addnowMobileWidget.classList.remove("addnow-hidden");  } else if (window.pageYOffset + iH >= height - 5) {    addnowMobileWidget.classList.add("addnow-hidden");  }};if (window.pageYOffset + iH >= height - 5) {  addnowMobileWidget.classList.add("addnow-hidden");}';i=i.replace(/%WIDTH%/g,d.min_width);try{n.appendChild(document.createTextNode(i)),o.appendChild(document.createTextNode(s))}catch(r){n.styleSheet.cssText=i,o.text=s}var u=e.document.head||e.document.getElementsByTagName("head")[0];u.appendChild(n),u.appendChild(o)}},exports.renderStaticWidget=function(e,t){switch(t){case"icon-big-horizontal-side-shares":return a.addClass(e,"addnow-widget-size-large"),a.addClass(e,"addnow-widget-orientation-horizontal"),a.addClass(e,"addnow-counter-position-side"),a.addClass(e,"addnow-has-counter"),!0;case"icon-big-horizontal-shares":return a.addClass(e,"addnow-widget-size-big"),a.addClass(e,"addnow-widget-orientation-horizontal"),a.addClass(e,"addnow-counter-position-top"),a.addClass(e,"addnow-has-counter"),!0;case"icon-medium-horizontal":return a.addClass(e,"addnow-widget-size-medium"),a.addClass(e,"addnow-widget-orientation-horizontal"),!1;case"icon-medium-horizontal-side-shares":return a.addClass(e,"addnow-widget-size-medium"),a.addClass(e,"addnow-widget-orientation-horizontal"),a.addClass(e,"addnow-counter-position-side"),a.addClass(e,"addnow-has-counter"),!0;case"icon-small-horizontal":return a.addClass(e,"addnow-widget-size-small"),a.addClass(e,"addnow-widget-orientation-horizontal"),!1;case"icon-small-horizontal-shares":return a.addClass(e,"addnow-widget-size-small"),a.addClass(e,"addnow-widget-orientation-horizontal"),a.addClass(e,"addnow-counter-position-side"),a.addClass(e,"addnow-has-counter"),!0;case"label-horizontal":return a.addClass(e,"addnow-widget-size-medium"),a.addClass(e,"addnow-widget-orientation-horizontal"),a.addClass(e,"addnow-has-label"),!1;case"label-horizontal-shares":return a.addClass(e,"addnow-widget-size-small"),a.addClass(e,"addnow-widget-orientation-horizontal"),a.addClass(e,"addnow-has-label"),a.addClass(e,"addnow-counter-position-side"),a.addClass(e,"addnow-has-counter"),!0;case"label-horizontal-transparent":return a.addClass(e,"addnow-widget-size-medium"),a.addClass(e,"addnow-widget-orientation-horizontal"),a.addClass(e,"addnow-has-label"),!1;case"icon-big-vertical":return a.addClass(e,"addnow-widget-size-big"),a.addClass(e,"addnow-widget-orientation-vertical"),!1;case"icon-big-vertical-shares":return a.addClass(e,"addnow-widget-size-big"),a.addClass(e,"addnow-widget-orientation-vertical"),a.addClass(e,"addnow-counter-position-top"),a.addClass(e,"addnow-has-counter"),!0;case"icon-medium-vertical":return a.addClass(e,"addnow-widget-size-medium"),a.addClass(e,"addnow-widget-orientation-vertical"),!1;default:return a.addClass(e,"addnow-widget-size-medium-small"),a.addClass(e,"addnow-widget-orientation-horizontal"),a.addClass(e,"addnow-counter-position-top"),a.addClass(e,"addnow-has-counter"),!0}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"../utilities/filters":"/opt/addnow/widget/app/scripts/utilities/filters.js","../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","./counters":"/opt/addnow/widget/app/scripts/widget/counters.js","./events":"/opt/addnow/widget/app/scripts/widget/events.js","./options":"/opt/addnow/widget/app/scripts/widget/options.js","./popup":"/opt/addnow/widget/app/scripts/widget/popup.js","./sharedTemplates":"/opt/addnow/widget/app/scripts/widget/sharedTemplates.js","./urlShortener":"/opt/addnow/widget/app/scripts/widget/urlShortener.js"}],"/opt/addnow/widget/app/scripts/widget/sharedTemplates.js":[function(require,module,exports){
"use strict";var jqLite=require("../utilities/jqLite");exports.generateBlankLink=function(){var t=document.createElement("a");return t.setAttribute("href","javascript:void(0)"),t},exports.generatePopupFooter=function(){var t=document.createElement("div"),e=document.createElement("a"),r=document.createElement("a");return jqLite.addClass(t,"addnow-pop-footer"),r.setAttribute("href","http://www.addnow.com/"),r.setAttribute("class","addnow-logo"),r.setAttribute("target","_blank"),jqLite.text(r,"AddNow"),r.setAttribute("title","AddNow"),t.appendChild(r),e.setAttribute("href","http://gravity4.com/"),e.setAttribute("class","addnow-powered-by"),e.setAttribute("target","_blank"),jqLite.text(e,"powered by Gravity4"),e.setAttribute("title","Gravity4"),t.appendChild(e),t};
},{"../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js"}],"/opt/addnow/widget/app/scripts/widget/sharingHash.js":[function(require,module,exports){
(function(i){"use strict";var e=require("./options"),n=require("./events"),s={beginning:"#$$",middle:"&&",ending:"$$",coding:36};exports.isHashValid=function(){return i.location.hash.slice(0,s.beginning.length)===s.beginning&&i.location.hash.slice(-s.ending.length)===s.ending},exports.sendSharingEventByHash=function(){var t,a,o,r,d=i.location.hash;e.siteOptions.sharing.byHash&&exports.isHashValid()&&(t=parseInt(d.slice(s.beginning.length,d.indexOf(s.middle)),s.coding),a=d.slice(d.indexOf(s.middle)+s.middle.length,-s.ending.length),o=e.siteOptions.url.slice(0,e.siteOptions.url.indexOf(d)),e.setOptions(e.siteOptions,["url"],o),r={time:t,uuid:a,eventType:n.TYPES.click,tool:n.TOOLS.addressBar,url:e.siteOptions.url,source:"darkSocial"},sessionStorage&&sessionStorage.getItem("addnow-uuid")&&r.uuid===sessionStorage.getItem("addnow-uuid")||n.sendEvent(r))},exports.addSharingHash=function(n){var t,a;e.siteOptions.sharing.byHash&&(exports.isHashValid()||""===i.location.hash?(t=Math.floor((new Date).getTime()/1e3),a=[s.beginning,t.toString(s.coding),s.middle,n,s.ending],i.history.replaceState("sharingHash","sharingHash",a.join("")),sessionStorage.setItem("addnow-uuid",n)):i.console.warn("Can't share by hash. Current hash is invalid."))},exports.removingSharingHash=function(){if(e.siteOptions.sharing&&exports.isHashValid()){var n=i.window.location;i.history.replaceState("sharingHash","sharingHash",n.pathname+n.search)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./events":"/opt/addnow/widget/app/scripts/widget/events.js","./options":"/opt/addnow/widget/app/scripts/widget/options.js"}],"/opt/addnow/widget/app/scripts/widget/urlShortener.js":[function(require,module,exports){
"use strict";var generateShortUrlCallback,cache=require("../utilities/cache"),jqLite=require("../utilities/jqLite"),urls=require("./urls"),options=require("./options");generateShortUrlCallback=function(r,l){return function(t){var e;for(r.url=t.short_url,e=0;e<r.callbacks.length;e+=1)r.callbacks[e](r.url,l);r.callbacks=[]}},exports.getShortUrl=function(r,l,t,e,s,a,i){var o,c,u=cache.getUrlData(t);options.siteOptions.sharing.hasShortUrls?(l?(void 0===u.shortUrl[r]&&(u.shortUrl[r]={}),void 0===u.shortUrl[r][l]&&(u.shortUrl[r][l]={url:null,callbacks:[]}),o=u.shortUrl[r][l]):(void 0===u.shortUrl[r]&&(u.shortUrl[r]={url:null,callbacks:[]}),o=u.shortUrl[r]),o.url?a(o.url,t):(o.callbacks.push(a),c={original_url:t,site_id:options.siteOptions.hash_id,tool:r},e&&(c.uuid=e),l&&(c.service=l),document.title&&(c.title=document.title),s&&(c.vanity_domain=s),1===o.callbacks.length&&jqLite.ajax({type:"POST",url:urls.shortUrlUrl,async:i,data:c,success:generateShortUrlCallback(o,t)}))):a(t,t)};
},{"../utilities/cache":"/opt/addnow/widget/app/scripts/utilities/cache.js","../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","./options":"/opt/addnow/widget/app/scripts/widget/options.js","./urls":"/opt/addnow/widget/app/scripts/widget/urls.js"}],"/opt/addnow/widget/app/scripts/widget/urls.js":[function(require,module,exports){
(function(e){"use strict";var r,t="cdn.addnow.com",o="api.addnow.com",s="dmp.gravity4.com",n=(require("./options.js"),"/tracker"),l="/dmp/addnow";r=function(r,t){return t||(t="/"),("https:"===e.document.location.protocol?"https://":"http://")+r+t},exports.cssUrl=null,exports.shortUrlUrl=null,exports.addNowTrackerUrl=null,exports.addNowMailFormUrl=null,exports.settingsUrl=null,exports.dmpUrl=null,exports.setDefaultDomains=function(){exports.cssUrl||exports.setDomain(["cdn",t]),exports.addNowTrackerUrl||exports.setDomain(["addnow",o]),exports.dmpUrl||exports.setDomain(["dmp",s])},exports.setDomain=function(e){var t,o;if(2!==e.length)throw new Error("Unexpected number of arguments: "+e.length);switch(t=e.shift()){case"cdn":o=r(e[0],"/widget"),exports.cssUrl=o+"/styles/addnow.css";break;case"addnow":exports.addNowTrackerUrl=r(e[0],n+"/click"),exports.addNowMailFormUrl=r(e[0],n+"/send_email"),exports.shortUrlUrl=r(e[0],n+"/create_shortlink"),exports.settingsUrl=r(e[0],n+"/s"),exports.trackEventUrl=r(e[0],n+"/e"),exports.countersUrl=r(e[0],n+"/counters");break;case"dmp":exports.dmpEventUrl=r(e[0],l);break;default:throw new Error('Unexpected domain "'+t+'"')}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{"./options.js":"/opt/addnow/widget/app/scripts/widget/options.js"}],"/opt/addnow/widget/app/scripts/widget/widgetTemplates.js":[function(require,module,exports){
"use strict";var setupPopupListeners,urls=require("./urls"),options=require("./options"),jqLite=require("../utilities/jqLite"),urlShortener=require("./urlShortener"),events=require("./events"),render=require("./render"),afterShareTemplates=require("./afterShareTemplates"),extraPopupTemplates=require("./extraPopupTemplates"),mailFormTemplates=require("./mailFormTemplates");setupPopupListeners=function(e,t,i,o,p,r){var n=function(){jqLite.hide(p.modal),o&&jqLite.show(o.popup),p.iframe.setAttribute("src","")};o&&(jqLite.on(o.closeButton,"click",function(){jqLite.hide(o.popup)}),jqLite.on(o.shareAgainButton,"click",function(){jqLite.hide(o.popup),jqLite.show(i.popup)})),jqLite.on(t,"click",function(){o&&jqLite.hide(o.popup),jqLite.isHidden(i.popup)?jqLite.show(i.popup):jqLite.hide(i.popup)}),jqLite.on(i.closeButton,"click",function(){jqLite.hide(i.popup)}),jqLite.on(i.mailButton,"click",function(){events.sendEvent({eventType:events.TYPES.share,tool:e}),urlShortener.getShortUrl(e,"mail",r.url,null,r.vanityDomain,function(e){var t=jqLite.param({url:e});p.iframe.setAttribute("src",urls.addNowMailFormUrl+"?"+t)}),jqLite.hide(i.popup),jqLite.show(p.modal)}),jqLite.on(p.closeButton,"click",n),jqLite.on(p.overlay,"click",n),r.follow.callback=function(){jqLite.hide(i.popup),o&&jqLite.show(o.popup)}},exports.initiate=function(e,t){var i,o,p,r,n,u,s,a=e.element,l=e.id;if(void 0===t&&(t=events.TOOLS.sharingButtons),l){if(i=options.getWidget(l),i.type===options.WIDGET_TYPES.newsletter||i.type===options.WIDGET_TYPES.copyPaste&&t!==events.TOOLS.copyPaste)return;o="no_counter"!==i.counterPosition,render.renderWidget(a,i)}else p=a.getAttribute("data-layout"),i=options.getStaticWidget(a),o=render.renderStaticWidget(a,p);if(r=render.generateShareButtons(t,a,i,o,options.siteOptions.buttonOptions),n=extraPopupTemplates.generatePopup(t,i),a.appendChild(n.popup),u=afterShareTemplates.generatePopup(t,i),u&&a.appendChild(u.popup),s=mailFormTemplates.generatePopup(),a.appendChild(s.modal),l&&i.type===options.WIDGET_TYPES.mobile){var d=a.parentNode.removeChild(a);document.body.appendChild(d)}setupPopupListeners(t,r,n,u,s,i)};
},{"../utilities/jqLite":"/opt/addnow/widget/app/scripts/utilities/jqLite.js","./afterShareTemplates":"/opt/addnow/widget/app/scripts/widget/afterShareTemplates.js","./events":"/opt/addnow/widget/app/scripts/widget/events.js","./extraPopupTemplates":"/opt/addnow/widget/app/scripts/widget/extraPopupTemplates.js","./mailFormTemplates":"/opt/addnow/widget/app/scripts/widget/mailFormTemplates.js","./options":"/opt/addnow/widget/app/scripts/widget/options.js","./render":"/opt/addnow/widget/app/scripts/widget/render.js","./urlShortener":"/opt/addnow/widget/app/scripts/widget/urlShortener.js","./urls":"/opt/addnow/widget/app/scripts/widget/urls.js"}]},{},["./app/scripts/addnow.js"])


//# sourceMappingURL=addnow.js.map