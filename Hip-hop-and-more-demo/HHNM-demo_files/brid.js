!function(window,undefined){var document=window.document;document.createElement("video"),document.createElement("audio");var VERSION="2.0.150827";if("undefined"==typeof document.BridDebug&&(document.BridDebug=!1),document.loadFromHost==undefined){var script=document.querySelector('script[src$="brid.min.js"]')||document.querySelector('script[src$="brid.min.dev.js"]'),dir,dn;script&&(dir=script.getAttribute("src"),dn=dir.split("//")[1].split("/",2)),document.loadFromHost=dir&&dn?"cms.brid.tv"!=window.location.hostname&&"dev.brid.tv"!=window.location.hostname&&"losmi.brid.tv"!=window.location.hostname||-1!=window.location.href.indexOf("previews")||-1!=window.location.href.indexOf("iframe")?dn[0]:window.location.hostname:"services.brid.tv"}var Brid=function(e,t,i){var n;if(Brid.log("Brid called on ",e,Brid.players,t),"string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),!t){if(Brid.players[e])return Brid.players[e];throw new TypeError("--- BridPlayer --- The ID supplied is not valid.")}n=document.getElementById(e)}else n=e;if(!n||!n.nodeName)throw new TypeError("--- BridPlayer --- The element or ID supplied is not valid.");return Brid.Util.elById.cache={},Brid.Util.elByTag.cache={},n.assets=new Brid.Assets(n,t,i),n.assets};if(window.$bp||(window.Brid=window.$bp=Brid),Brid.players={},Brid.config={autoplay:!1,volume:!0,fullscreen:!0,controls:!0,shareScreen:!0,playlistScreen:!0,controlsBehavior:"autoHide",videoPlayback:"endFrame",playlistPlayback:"stop",afterPlaylistEnd:"stop",preload:"none",defaultCSS:"div.brid{background:#000;border:0;border-collapse:collapse;border-spacing:0;color:inherit;cursor:default;font-style:normal;font-weight:400;list-style:none;margin:0;outline:0;padding:0;text-decoration:none;text-transform:none;text-align:left;vertical-align:baseline;white-space:normal;zoom:1;line-height:1;-moz-box-sizing:content-box!important;-webkit-box-sizing:content-box!important;box-sizing:content-box!important}.brid{background-color:#000;position:relative;padding:0;font-size:10px;vertical-align:middle;overflow:hidden;-webkit-font-smoothing:antialiased;-webkit-transform-style:preserve-3d}.brid *,.brid :before,.brid :after{-moz-box-sizing:content-box!important;-webkit-box-sizing:content-box!important;box-sizing:content-box!important}svg{background:none repeat scroll 0 0 transparent!important;position:relative!important;padding:0;margin:0;font-size:10px}.brid-fps-info{position:absolute;top:3em;left:1em;color:red;width:auto;font-size:12px;z-index:10;font-weight:700}.brid :focus{outline:none}.brid .brid-tech,.brid-touch-overlay,.brid-related{position:absolute;top:0;left:0;right:0;width:100%!important;height:100%!important;margin:0;padding:0}.brid.brid-fs{position:fixed;top:0!important;left:0!important;right:0!important;width:100%!important;height:100%!important;margin:0!important;padding:0!important;z-index:1000;_position:absolute}.brid-advert-container{position:absolute;left:0;right:0;width:100%;height:100%;margin:0;padding:0}.brid-overlay-play-button,.brid-buffer-indicator,.brid-hd-indicator,.brid-share-button-holder,.brid-thumb-play,.brid-dialog-title,.brid-dialog-content,.brid-dialog .brid-button{position:absolute;top:50%;left:50%}.brid iframe,.brid #youtube_holder iframe{min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important}.brid .brid-tech.animate{-webkit-transition:all .6s cubic-bezier(0.165,0.840,0.440,1.000);-moz-transition:all .6s cubic-bezier(0.165,0.840,0.440,1.000);-o-transition:all .6s cubic-bezier(0.165,0.840,0.440,1.000);transition:all .6s cubic-bezier(0.165,0.840,0.440,1.000)}.brid .brid-tech-mini-left{top:1%;left:1%;right:70%;width:30%!important;height:30%!important}.brid .brid-tech-mini-right{top:1%;right:1%;left:70%;width:30%!important;height:30%!important}.brid:-moz-full-screen{position:absolute}.brid:-webkit-full-screen,.brid:-ms-fullscreen{width:100%!important;height:100%!important}body .brid-full-window{padding:0;margin:0;height:100%;overflow-y:auto}.brid-poster{position:relative;width:100%;height:100%;display:table-cell;vertical-align:middle;margin:0 auto;padding:0;cursor:pointer!important;background:#000}.brid-poster img{display:block;margin:auto;vertical-align:middle;width:100%!important;height:100%!important;background:#000}.brid-button{cursor:pointer!important}.brid-poster-title{width:100%;height:30px;position:absolute;top:0;background:#000;background:rgba(0,0,0,0.4);z-index:2;pointer-events:none}.brid-poster-title div{position:absolute;top:.4em;left:.4em;right:.4em;text-align:left;color:#fff;overflow:hidden;white-space:nowrap;font-size:14px;height:15px}.brid-controls{z-index:3;position:absolute}.brid.brid-fs .brid-controls{left:50%;bottom:2em}.brid-control{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;position:relative;float:left}.brid-control:focus{outline:0}.brid-button.over{opacity:.6!important}.brid-volume-control,.bar-bracket,.level-bracket,.brid-time-controls,.bar-bracket,.level-bracket{float:left}.brid-volume-bar{cursor:pointer!important}.brid-volume-bar .bar-bracket{padding:0}.brid-volume-level{position:absolute}.brid-volume-bar .out{-moz-transition-delay:.2s;-webkit-transition-delay:.2s;-o-transition-delay:.2s;-ms-transition-delay:.2s;transition-delay:.2s}.brid-progress-control{position:absolute;opacity:0}.brid-progress-holder{position:relative;cursor:pointer!important;padding:0;margin:0;float:none!important}.brid-progress-holder .brid-play-progress,.brid-progress-holder .brid-load-progress{position:absolute;display:block;height:100%;margin:0;padding:0;left:0;top:0;float:none}.brid-seek-scrubber{left:0;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden;-o-backface-visibility:hidden;backface-visibility:hidden}.brid-scroller,.brid-seek-scrubber{position:absolute;top:0;z-index:3;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}.brid-fullscreen-control,.brid-hd-control{float:right}.brid-overlay-play-button{z-index:2}.brid-overlay-play-button svg{-webkit-backface-visibility:hidden}.brid-buffer-indicator{display:none;width:50px;height:50px;margin:-25px 0 0 -25px}.brid-buffer-indicator svg{width:50px;height:50px}.brid-hd-indicator{opacity:0;width:80px;height:80px;margin:-40px 0 0 -40px;pointer-events:none}.brid-hd-indicator svg{position:absolute!important;top:0;width:80px;height:80px}.brid-panel-label{color:#fff;font-weight:700;font-size:12px!important;position:absolute;top:50%;opacity:0;background:#000;padding:10px;margin-top:-17px;pointer-events:none;white-space:nowrap;-moz-border-radius:8px;-webkit-border-radius:8px;-khtml-border-radius:8px;border-radius:8px}.brid-share-button{display:block;z-index:4;position:absolute;top:50%;left:-15%;margin:-2em 0 0 .5em;pointer-events:all}.brid-share-button,.brid-share-button svg{width:40px;height:40px}.brid-left-screen{position:absolute;left:-67%;z-index:3;overflow:hidden;top:0;width:67%;height:100%;margin:0 auto}.brid-share-button-holder{width:24em;height:13em;margin:-7em 0 0 -12em;text-align:center}.brid-share-icon{width:2em;height:2em;float:left;margin:0 10em 1em}.brid-share-icon svg{width:2em;height:2em}.brid-link,.brid-embed,.brid-link-copied,.brid-embed-copied,.brid-facebook,.brid-twitter,.brid-googleplus,.brid-pinterest,.brid-reddit{float:left;text-align:left;margin:1em}.brid-link,.brid-embed{margin:.8em}.brid-link-copied,.brid-embed-copied,.brid-facebook,.brid-twitter,.brid-googleplus,.brid-pinterest,.brid-reddit{margin:1em}.brid-link,.brid-link-copied,.brid-link svg,.brid-link-copied svg,.brid-embed,.brid-embed-copied,.brid-embed svg,.brid-embed-copied svg{width:110px;height:12px}.brid-facebook,.brid-twitter,.brid-googleplus,.brid-pinterest,.brid-reddit,.brid-facebook svg,.brid-twitter svg,.brid-googleplus svg,.brid-pinterest svg,.brid-reddit svg{width:4em;height:4em}.brid-share-code{position:relative;top:50%;left:5%;width:90%;height:5em;margin:3em 0 0;text-align:left;color:#fff;font-size:11px}.brid-share-code-title{width:100%;text-align:center}.brid-share-code input{position:absolute;font-family:Helvetica,Arial,sans-serif;font-size:12px;font-style:italic;bottom:0;left:0;width:calc(100% - 2.5em);right:2.5em;height:2em;min-height:2em;color:#fff;padding:0 .5em;-moz-border-radius:0;-webkit-border-radius:0;border-radius:0}.brid-share-code input::-ms-clear{display:none}.brid-close{position:absolute;bottom:.6em;right:0}.brid-close,.brid-close svg{width:1.2em;height:1.2em}.brid-playlist-button{display:block;z-index:4;right:-15%;position:absolute;top:50%;margin:-2em .5em 0 0;pointer-events:all}.brid-playlist-button.opened svg{-ms-transform:scaleX(-1);-moz-transform:scaleX(-1);-webkit-transform:scaleX(-1);transform:scaleX(-1)}.brid-playlist-button,.brid-playlist-button svg{width:40px;height:40px}.brid-right-screen{position:absolute;right:-67%;z-index:3;overflow:hidden;top:0;width:67%;height:100%;margin:0 auto;background:#0A0B0D}.brid-playlist-control,.brid-playlist-scroll,.brid-scroll-elements-holder{position:absolute;padding:0;margin:0;top:0;bottom:0;left:0;right:0}.brid-playlist-control{opacity:0}.brid-scroll-elements-holder{overflow:hidden}.brid-scroll-elements{position:absolute;top:0;left:0;margin:0;width:100%}.brid-playlist-element{display:table;float:left;width:100%;min-height:9em;overflow:hidden;background:#000}.brid-playlist-element .brid-title,.brid-playlist-element .brid-description{padding:0;margin:.5em 1em .5em .5em;text-align:left;min-width:13em;width:auto;cursor:pointer!important}.brid-playlist-element .brid-title{font-weight:700}.brid-thumb-holder{position:relative;float:left;cursor:pointer!important;width:13em;height:9em;display:table-cell;vertical-align:middle}.brid-thumb-holder img{display:block;margin:auto;vertical-align:middle;width:100%;height:100%}.brid-thumb-play{margin:-1.5em 0 0 -1.5em;z-index:2}.brid-thumb-play,.brid-thumb-play svg{width:3em;height:3em}.brid-mini-facebook,.brid-mini-twitter,.brid-mini-googleplus,.brid-mini-pinterest,.brid-mini-reddit{float:left;margin:.5em}.brid-mini-facebook,.brid-mini-twitter,.brid-mini-googleplus,.brid-mini-pinterest,.brid-mini-reddit,.brid-mini-facebook svg,.brid-mini-twitter svg,.brid-mini-googleplus svg,.brid-mini-pinterest svg,.brid-mini-reddit svg{width:2.2em;height:2.2em}.brid-scroll-bar{width:1.4em;position:absolute;right:0;top:.2em;bottom:.2em;cursor:pointer!important}.brid-scroll-line{width:.2em;position:absolute;right:.4em;top:.3em;bottom:.3em}.brid-scroller{left:.3em;width:.8em;z-index:3;-moz-border-radius:.3em;-webkit-border-radius:.3em;border-radius:.3em;pointer-events:none}.brid-track-display{text-align:center;position:absolute;bottom:6em;left:1em;right:1em}.brid-track{display:none;text-align:center;margin-bottom:.1em}.brid-tt-cue{display:block}.brid-menu-button{float:right;position:relative;cursor:pointer!important}.brid-menu-container{float:right;padding:0;z-index:3}.brid-menu-container ul{display:none;padding:0;margin:0;right:0;position:absolute;width:10em;max-height:20em;overflow:auto}.brid-menu-opened ul{display:block;list-style:none}.brid-chapters ul{width:28em;margin:0;right:0}.brid-menu-container ul li{list-style:none;margin:0;padding:.3em 0 .3em 2em;line-height:1.4em;font-size:1.2em;text-align:left}.brid-menu-container ul li.brid-selected{text-decoration:underline}.brid-menu-container ul li:focus,.brid-menu-container ul li:hover,.brid-menu-container ul li.brid-selected:focus,.brid-menu-container ul li.brid-selected:hover{outline:0}.brid-menu-container ul li.brid-menu-title{text-align:left;text-transform:uppercase;font-size:1em;line-height:2.4em;padding:0 0 0 .3em;margin:0;height:2.4em;font-weight:700;cursor:default!important}.brid-ad-info{display:none;width:100%;height:50px;position:absolute;top:-45px;background:none;pointer-events:none}.brid-ad-info div{position:relative;top:.7em;left:.7em;text-align:left;font-size:14px;color:#fff;text-shadow:1px 1px 6px rgba(0,0,0,1),1px 1px 6px rgba(0,0,0,1)}.brid-dialog{position:absolute;top:0;left:0;width:100%;height:100%;z-index:5;background:#000;background:rgba(0,0,0,0.6)}.brid-dialog-title,.brid-dialog-content{width:90%;height:2em;line-height:2em;font-weight:700;margin:-4em 0 0 -45%;text-align:center;color:#fff}.brid-dialog-content{margin:-2em 0 0 -45%}.brid-dialog.error{color:red}.brid-dialog.warning{color:#0384F9}.brid-dialog .brid-button{width:45%;text-align:center;height:2em;line-height:2em}.brid-dialog .brid-dialog-ok{margin:0 0 0 -45%}.brid-dialog .brid-dialog-cancel{margin:0}.brid-agegate{z-index:2;background:#000}.brid-agegate .ag-content{position:absolute;top:50%;left:50%;width:300px;margin:-60px 0 0 -150px;text-align:center}.brid-agegate .ag-content .text{display:inline-block;color:#fff;font-size:12px;margin:0 auto}.brid-agegate .ag-input{display:inline-block;margin:10px;width:200px}.ag-input .month,.ag-input .day,.ag-input .year{height:20px;width:30px;margin:0 10px 0 0;text-align:center;font-size:14px;line-height:14px;border:none;background:#fff;color:#000;text-indent:0;border-radius:0;padding:0}.ag-input .year{width:55px;margin:0}.brid-agegate .ag-save{margin:40px 0 0 -67px;width:135px;height:40px;font-family:'Arial Narrow',Arial,sans-serif;font-stretch:condensed;font-size:18px;line-height:40px;font-weight:700;color:#666!important;background:#696969!important;background:-moz-linear-gradient(left,#696969 1%,#2b2b2b 100%)!important;background:-webkit-gradient(linear,left top,right top,color-stop(1%,#696969),color-stop(100%,#2b2b2b))!important;background:-webkit-linear-gradient(left,#696969 1%,#2b2b2b 100%)!important;background:-o-linear-gradient(left,#696969 1%,#2b2b2b 100%)!important;background:-ms-linear-gradient(left,#696969 1%,#2b2b2b 100%)!important;background:linear-gradient(to right,#696969 1%,#2b2b2b 100%)!important}.brid-agegate .ag-save.active{color:#fff!important}.brid-related{z-index:2;background:#000;text-align:left;color:#fff}.brid-related p{text-align:center;margin:10px auto!important}.brid-related.norelated p{position:absolute;width:100%;top:50%;margin:-35px 0 0!important;font-size:14px}.brid-related .related-share-holder{position:absolute;top:30px;left:50%;width:130px;margin:0 0 0 -65px}.brid-related.norelated .related-share-holder{top:50%;left:50%;width:240px;margin:-25px 0 0 -120px}.brid-related .related-holder{margin:50px 5px;text-align:center}.brid-related .related-holder .related-title{margin:5px 10px;font-size:11px;text-align:left}.brid-related .related-element{position:relative;display:inline-block;cursor:pointer!important;width:130px;height:75px;margin:5px;text-align:left}.brid-related .related-element .thumb{margin:auto;position:absolute;top:0;left:0;bottom:0;right:0;max-width:100%;max-height:100%}.brid-related .related-element .title{position:absolute;top:0;left:0;right:0;font-size:11px;font-weight:700;padding:5px;background:#000;background:rgba(0,0,0,0.6)}.brid-related .related-element .duration{position:absolute;font-size:12px;left:5px;bottom:5px}.brid.brid-touch .brid-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.brid.brid-touch .brid-ad-info{height:9.5em}.brid-poster-title.brid-fade-out{z-index:-2}.brid-touch .brid-progress-control{left:0!important;right:0!important;width:100%!important;margin:0!important}.brid-touch .brid-controls{left:0!important;right:0!important;margin:0!important;width:100%!important}.brid-branding{position:absolute;top:1em;left:1em;width:128px;height:128px}.brid-branding img{display:block;width:100%!important;height:auto!important}.brid-ogv-audio-button{position:absolute;top:1em;right:1em;width:3em;height:3em}.brid-ogv-audio-button svg{width:3em;height:3em}",Url:{service:"//"+document.loadFromHost,cdn:"//"+document.loadFromHost,app:"/",plugins:"player/build/plugins/",video:"services/video/",dynamic:"services/dynamic/",skin:"services/skin/",playlist:"services/playlist/",css:"player/build/css/",flash:"player/build/swf/"},children:{touch:{childClass:"TouchOverlay"},posterImage:{},posterTitle:{},hDIndicator:{},bufferIndicator:{},playButtonOverlay:{},controls:{childClass:"ControlBar"},progressControl:{childClass:"ProgressControl"},openShare:{},openPlaylist:{},shareScreen:{},playlistScreen:{},branding:{}},panelPlugins:{},controlsPlugins:{},techOrder:["html5","flash"],flash:{swf:"BridPlayer.swf"}},Brid.support={},window.Brid||Brid)Brid||(Brid=window.Brid);else{var Brid={};window.Brid=Brid}!function(){var e=!1;Brid.Class=function(){},Brid.Class.extend=function(t){function i(){!e&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;e=!0;var s=new this;e=!1;for(var r in t){var o=t[r];"function"==typeof t[r]&&"function"==typeof n[r]&&(o.base=n[r]),s[r]=o}return i.prototype=s,i.prototype.constructor=i,i.extend=arguments.callee,i}}(),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){t===undefined&&(t=0),0>t&&(t+=this.length),0>t&&(t=0);for(var i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var i=0,n=this.length;n>i;i++)i in this&&e.call(t,this[i],i,this)}),Array.prototype.move=function(e,t){for(;0>e;)e+=this.length;for(;0>t;)t+=this.length;if(t>=this.length)for(var i=t-this.length;i--+1;)this.push(undefined);return this.splice(t,0,this.splice(e,1)[0]),this},Brid.Util={merge:function(e,t,i){t||(t={});for(var n in t)!t.hasOwnProperty(n)||i&&e.hasOwnProperty(n)||(e[n]=t[n]);return e},clone:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},deepCopy:function(e,t){t=t||{};for(var i in e)"object"==typeof e[i]?(t[i]=e[i].constructor===Array?[]:{},this.deepCopy(e[i],t[i])):t[i]=e[i];return t},isIE:function(){return"Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)},ieVersion:function(){var e,t,i=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=t.exec(e)&&(i=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=t.exec(e)&&(i=parseFloat(RegExp.$1))),i},isFF:function(){return!!Brid.Util.ua.match("Firefox")},isChrome:function(){return!!Brid.Util.ua.match("Chrome")},isSafari:function(){return!!Brid.Util.ua.match("Safari")&&!Brid.Util.isChrome()},isIPad:function(){return null!==Brid.Util.ua.match(/iPad/i)},isIPhone:function(){return null!==Brid.Util.ua.match(/iPhone/i)},isIOS:function(){return Brid.Util.isIPhone()||Brid.Util.isIPad()},iOSVersion:function(){var e=Brid.Util.ua.match(/OS (\d+)_/i);return e&&e[1]?e[1]:void 0},isAndroid:function(){return null!==Brid.Util.ua.match(/Android.*AppleWebKit/i)},isOldAndroid:function(){return null!==Brid.Util.ua.match(/Android 2\.[12]/)},androidVersion:function(){var e=Brid.Util.ua.match(/Android (\d+)\./i);return e&&e[1]?e[1]:void 0},isMobilePlatform:function(){return!!(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)},hasTouch:function(){return"ontouchstart"in window},inIFrame:function(){return window.self!==window.top},isNode:function(e){return e&&e.nodeType},isDev:function(){return-1!=document.loadFromHost.indexOf("dev-services.brid.tv")},isCms:function(){return("cms.brid.tv"==window.location.hostname||"dev.brid.tv"==window.location.hostname||"losmi.brid.tv"==window.location.hostname)&&-1==window.location.href.indexOf("previews")&&-1==window.location.href.indexOf("iframe")},isDebug:function(){return Brid.Util.isDebug.cache=Brid.Util.isDebug.cache||document.BridDebug||-1!=Brid.Util.getEmbededUrl().indexOf("#BridEnableDebug")},canUseVector:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},formatType:function(e,t){return Brid.log("BUtil.formatType",t,e),e&&!t?Brid.Util.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){var t=e;return-1!=t.indexOf("?")&&(t=e.substring(0,t.indexOf("?"))),t=t.substring(t.lastIndexOf(".")+1).toLowerCase(),!t||-1==e.indexOf(".")||-1==e.indexOf("http:")&&-1==e.indexOf("https:")&&0!=e.indexOf("//")?-1!=e.indexOf("rtmp:")||-1!=e.indexOf("rtmpt:")||-1!=e.indexOf("rtmps:")||-1!=e.indexOf("rtmpe:")?"video/rtmp":11==e.length?"video/youtube":null:/(m3u8|mpd|json)/gi.test(t)?"application/"+Brid.Util.getTypeFromExtension(t):(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov|f4m|smil)/gi.test(t)?"video":"audio")+"/"+Brid.Util.getTypeFromExtension(t)},getTypeFromExtension:function(e){switch(e){case"mov":return"mov";case"smil":return"smil";case"m3u8":return"x-mpegurl";case"mpd":return"dash+xml";case"f4m":return"f4m";case"flv":case"f4v":return"flv";case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return e}},getVideosByType:function(e,t){for(var i=[],n=0,s=e.length;s>n;n++)Brid.Util.getTypeFromExtension(e[n])==t&&i.push(e[n]);return i},getJsonFromUrl:function(e){var t=e.substring(e.indexOf("?")+1),i={};return t.split("&").forEach(function(e){var t=e.split("=");i[t[0]]=decodeURIComponent(t[1])}),i},uc:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},testVid:document.createElement("video"),nav:window.navigator,ua:window.navigator.userAgent,eachProp:function(e,t){if(e)for(var i in e)e.hasOwnProperty(i)&&t.call(this,i,e[i])},each:function(e,t){if(e&&0!==e.length)for(var i=0,n=e.length;n>i;i++)t.call(this,e[i],i)},elById:function(e){return Brid.Util.elById.cache||(Brid.Util.elById.cache={}),Brid.Util.elById.cache[e]=Brid.Util.elById.cache[e]||document.getElementById(e)},elByTag:function(e){return Brid.Util.elByTag.cache||(Brid.Util.elByTag.cache={}),Brid.Util.elByTag.cache[e]=Brid.Util.elByTag.cache[e]||document.getElementsByTagName(e)},createElement:function(e,t){var i,n=document.createElement(e);for(i in t)t.hasOwnProperty(i)&&(-1!==i.indexOf("-")?n.setAttribute(i,t[i]):n[i]=t[i]);return n},setStyle:function(e,t){var i,n=[];if(document.documentMode&&5==document.documentMode){for(i in t)n.push(i+":"+t[i]);e.style.setAttribute("cssText",n.join(";"))}else if(/IE 7/i.test(navigator.userAgent))for(i in t)e.style.setAttribute(i,t[i]);else{for(i in t)n.push(i+":"+t[i]);e.setAttribute("style",n.join(";"))}},getStyle:function(e,t,i){var n;return e.currentStyle&&!i?n=e.currentStyle[t]:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n||!1},removeStyle:function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},checkIfNodeExistsByURL:function(e,t){for(var i=document.getElementsByClassName("bridload"),n=i.length,s=0;n>s;s++)if(t){if(e===i[s].getAttribute("href"))return!0}else if(e===i[s].getAttribute("src"))return!0;return!1},getChildByClass:function(e,t){for(var i,n=0,s=e.childNodes.length;s>n;n++)for(var r=e.childNodes[n].className!=undefined?e.childNodes[n].className.split(" "):[],o=0,a=r.length;a>o;o++)r[o]==t&&(i=e.childNodes[n]);return i},isChildOf:function(e,t){if(null!=t)for(;t.parentNode;)if((t=t.parentNode)==e)return!0;return!1},createCSS:function(e){var t=document.getElementById("bridcss");if(t)return null;var i=document.getElementsByTagName("head")[0],n=document.createElement("style");return n.type="text/css",n.media="screen",n.id="bridcss",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),i.appendChild(n),n},insertFirst:function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},insertAfter:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},addClass:function(e,t){-1==(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className=""===e.className?t:e.className+" "+t)},removeClass:function(e,t){if(e.className&&-1!=e.className.indexOf(t)){var i=e.className.split(" ");i.splice(i.indexOf(t),1),e.className=i.join(" ")}},blockTextSelection:function(){document.body.focus(),document.onselectstart=function(){return!1}},unblockTextSelection:function(){document.onselectstart=function(){return!0}},generateSVG:function(e,t){if(!e)return"";var i=e.indexOf("Gradient id='"),n=e.indexOf("url(#");return t&&-1!=i&&-1!=n&&(e=e.split("Gradient id='").join("Gradient id='"+t).split("url(#").join("url(#"+t)),"<span><svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' preserveAspectRatio='xMidYMid meet' viewBox='0 0 "+e+"</svg></span>"},formatTime:function(e){var t=Math.floor(e%60),i=Math.floor(e/60%60),n=Math.floor(e/3600);return n=n>0?n+":":"",i=(10>i?"0"+i:i)+":",t=10>t?"0"+t:t,n+i+t},getDate:function(){var e=new Date,t=e.getDate(),i=e.getMonth()+1,n=e.getFullYear();return n+""+i+t},getRelativePosition:function(e,t){return Math.max(0,Math.min(1,(e-Brid.Util.findPosX(t))/t.offsetWidth))},getComputedStyleValue:function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)},getCaret:function(e){var t,i=0,n=e.ownerDocument||e.document,s=n.defaultView||n.parentWindow;if("undefined"!=typeof s.getSelection){if(t=s.getSelection(),t.rangeCount>0){var r=s.getSelection().getRangeAt(0),o=r.cloneRange();o.selectNodeContents(e),o.setEnd(r.endContainer,r.endOffset),i=o.toString().length}}else if((t=n.selection)&&"Control"!=t.type){var a=t.createRange(),l=n.body.createTextRange();l.moveToElementText(e),l.setEndPoint("EndToEnd",a),i=l.text.length}return i},trim:function(e){return e.toString().replace(/^\s+/,"").replace(/\s+$/,"")},validateString:function(e){return e=e.replace(/(<([^>]+)>)/gi,""),e.replace(/\s/g,"").length?e:null},getAge:function(e){var t=new Date,i=new Date(e),n=t.getFullYear()-i.getFullYear(),s=t.getMonth()-i.getMonth();return(0>s||0===s&&t.getDate()<i.getDate())&&n--,n},round:function(e,t){return t||(t=0),Math.round(e*Math.pow(10,t))/Math.pow(10,t)},isEmpty:function(e){for(var t in e)return!1;return!0},createTimeRange:function(e,t){return{length:1,start:function(){return e},end:function(){return t}}},getEmbededUrl:function(){return window.location!=window.parent.location?document.referrer:document.location.href},nextID:1,flashID:0,cache:{},$f:function(e,t,i){t.id||(t.id=Brid.Util.nextID++);var n=function(){for(var i=new Array(arguments.length),n=0,s=arguments.length;s>n;n++)i[n]=arguments[n];return t.apply(e,i)};return n.id=i?i+"_"+t.id:t.id,n},setLocalStorage:function(e,t,i){try{var n=window.localStorage||!1}catch(s){return 18==s.code?Brid.error("--- BridPlayer --- LocalStorage is blocked",s):Brid.error("--- BridPlayer --- LocalStorage Error",s),!1}var r=i||6048e5;if(n)try{var o={value:JSON.stringify(t),timestamp:(new Date).getTime()+r};n.setItem(e,JSON.stringify(o))}catch(s){22==s.code||1014==s.code?Brid.error("--- BridPlayer --- LocalStorage Full",s):Brid.error("--- BridPlayer --- LocalStorage Error",s)}},getLocalStorage:function(e){try{var t=window.localStorage||!1}catch(i){return 18==i.code?Brid.error("--- BridPlayer --- LocalStorage is blocked",i):Brid.error("--- BridPlayer --- LocalStorage Error",i),!1}if(!t)return!1;try{var n=JSON.parse(t.getItem(e));return n?(new Date).getTime()<n.timestamp&&JSON.parse(n.value):!1}catch(i){return 22==i.code||1014==i.code?Brid.error("--- BridPlayer --- LocalStorage Full",i):Brid.error("--- BridPlayer --- LocalStorage Error",i),!1}},encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return e.toString().split("&").join("&").split("<").join("&lt;").split('"').join("&quot;")},unescapeHTML:function(e){if(e){var t,i=document.createElement("div");return i.innerHTML=e,t=i.firstChild.nodeValue}return""},truncate:function(e,t){return e.length>t&&(e=e.substring(0,t),e+="..."),e},safeTrunc:function(e,t){var i=e.length>t;return i&&(e=e.substr(0,t),-1!=e.indexOf(" ")&&(e=e.substr(0,e.lastIndexOf(" "))),e+="..."),e},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},removeSwf:function(e){if(Brid.Util.isIE())e.style.display="none",function(){4==e.readyState?Brid.Util.removeObjectInIE(e):setTimeout(arguments.callee,10)}();else{var t=e.parentNode;!t.player&&t.parentNode.player?t.parentNode.removeChild(t):e.parentNode.removeChild(e)}},removeObjectInIE:function(e){if(e){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode.removeChild(e)}},onKeyPress:function(e){switch(Brid.Util.stopEvent(e),e.which){case 37:Brid.SeekBar.stepBack();break;case 39:Brid.SeekBar.stepForward();break;case 40:Brid.VolumeBar.stepBack();break;case 38:Brid.VolumeBar.stepForward();break;case 32:Brid.PlayToggle.onClick()}},stopEvent:function(e){return e||(e=window.event),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},checkNested:function(e,t){for(var i=t.split("."),n=i.length,s=0;n>s;s++){var r=i[s];if(!(null!==e&&"object"==typeof e&&r in e))return!1;e=e[r]}return!0},randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},diffArray:function(e,t){var i=[],n=[];if(!t.length)return e;if(!e.length)return t;for(var s=0;s<t.length;s++)i[t[s]]=!0;for(var s=0;s<e.length;s++)i[e[s]]||n.push(e[s]);return n},throttle:function(e,t,i){t||(t=250);var n,s;return function(){var r=i||this,o=+new Date,a=arguments;n&&n+t>o?(clearTimeout(s),s=setTimeout(function(){n=o,e.apply(r,a)},t)):(n=o,e.apply(r,a))}}},function(){function e(e){var i=t[e];Brid[e]=function(){if(i!=t.log||BUtil.isDebug())if(i.apply)i.apply(t,arguments);else{var e=Array.prototype.slice.apply(arguments).join(" ");i(e)}}}var t=window.console;if(t)for(var i=["log","warn","error"],n=0;n<i.length;n++)e(i[n])}(),Brid.logElement=null,Brid.exLog=function(){if(Brid.logElement&&("string"==typeof Brid.logElement&&(Brid.logElement=BUtil.elById(Brid.logElement)),Brid.logElement)){var e=Array.prototype.slice.call(arguments).join(" ");Brid.logElement.innerHTML+="<br>"+e}},"getBoundingClientRect"in document.documentElement?(Brid.findPosX=function(e){var t;try{t=e.getBoundingClientRect()}catch(i){}if(!t)return 0;var n=document.documentElement,s=document.body,r=n.clientLeft||s.clientLeft||0,o=window.pageXOffset||s.scrollLeft;return t.left+o-r},Brid.findPosY=function(e){var t;try{t=e.getBoundingClientRect()}catch(i){}if(!t)return 0;var n=document.documentElement,s=document.body,r=n.clientTop||s.clientTop||0,o=window.pageYOffset||s.scrollTop;return t.top+o-r}):(Brid.findPosX=function(e){for(var t=e.offsetLeft;e=e.offsetParent;)t+=e.offsetLeft;return t},Brid.findPosY=function(e){for(var t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t}),Brid.XD={postMessage:function(e,t,i){t&&(e="Brid|"+e,i=i||parent,window.postMessage?i.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&Brid.error("--- Brid Player --- This browser doesn't support cross-domain messaging!"))},receiveMessage:function(e,t){var i;window.postMessage?(e&&(i=function(i){return"string"==typeof t&&"*"!=t&&i.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&t(i.origin)===!1||"string"!=typeof i.data||-1==i.data.indexOf("Brid")?!1:void e(i)}),e?Brid.event.add(window,"message",i,!1):Brid.event.removeAll(window)):Brid.error("--- Brid Player --- This browser doesn't support cross-domain messaging!")}};var BUtil=Brid.Util,BridEvent=function(){function e(){this._listeners=[]}return e.prototype={add:function(t,i,n,s){if(!t||!i||!n)return null;("string"==typeof i||i instanceof String)&&(i=[i]);for(var r=0,o=i.length;o>r;r++){var a={target:t,type:i[r],listener:n,useCapture:s};this._listeners.push(a),e.addEventListener_(a)}},once:function(e,t,i,n){Brid.event.add(e,t,function(e){Brid.event.remove(e.target,e.type,arguments.callee),i.apply(e.target)},n)},remove:function(t,i,n){if(!t||!i||!n)return null;("string"==typeof i||i instanceof String)&&(i=[i]);for(var s=0,r=i.length;r>s;s++)this._listeners=this._listeners.filter(function(r){return r.target==t&&r.type==i[s]&&r.listener.id==n.id?(e.removeEventListener_(r),!1):!0})},get:function(e,t){return e?e:t},trigger:function(e,t,i,n){if("string"==typeof t&&(t={type:t}),t.target||(t.target=e),!t.type)throw new Error("Event object missing 'type' property.");
    if(t.data=i,n){t.bubbles=n;for(var s=e,r=[];s;)r.unshift(s),s=s.parentNode,Brid.event.trigger(s,t,i,!1)}this._listeners.filter(function(i){i.target==e&&i.type==t.type&&i.listener.call(e,t)})},removeAll:function(t){this._listeners=this._listeners.filter(function(i){return i.target==t?(e.removeEventListener_(i),!1):!0})}},e.addEventListener_=function(e){e.target.addEventListener?e.target.addEventListener(e.type,e.listener,e.useCapture):e.target.attachEvent?e.target.attachEvent("on"+e.type,function(t){t=Brid.event.get(t,e),listener(t)}):e.target["on"+e.type]=e.listener},e.removeEventListener_=function(e){e.target.removeEventListener?e.target.removeEventListener(e.type,e.listener,e.useCapture):e.target.detachEvent?e.target.detachEvent("on"+e.type,e.listener):e.target["on"+e.type]=null},e}();Brid.event=new BridEvent,Date.now===undefined&&(Date.now=function(){return(new Date).valueOf()}),function(){window.performance=window.performance||{offset:Date.now(),now:function(){return Date.now()-this.offset}};var e,t,i,n,s,r,o,a;for(i=window.requestAnimationFrame,a=["webkit","moz","o","ms"],r=0,o=a.length;o>r;r++)s=a[r],null==i&&(i=window[s+"RequestAnimationFrame"]);null==i&&(e=0,t=n=null,i=function(i){var s,r,o;return null!=t?void t.push(i):(o=window.performance.now?window.performance.now():Date.now(),r=Math.max(0,16.66-(o-e)),t=[i],e=o+r,s=function(){var i,n,s,r;for(n=t,t=null,s=0,r=n.length;r>s;s++)(i=n[s])(e)},void(n=setTimeout(s,r)))}),window.requestAnimationFrame=i}(),Brid.Tweener=function(){var e=[];return{REVISION:"14",tween:function(e,t,i,n){return new Brid.Tweener.Tween(e).to(i,t).easing(n).start()},getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)},update:function(t){if(window.requestAnimationFrame(Brid.Tweener.update),0===e.length)return!1;var i=0;if(window.performance.offset&&Math.abs(window.performance.now()-t)>10){var n=window.performance.offset;n-=t-window.performance.now(),window.performance.offset=n}for(t=t!==undefined?t:window.performance.now?window.performance.now():Date.now();i<e.length;)e[i].update(t)?i++:(e[i]=null,e.splice(i,1));return!0}}}(),Brid.Tweener.Util={CSSproperties:"opacity,top,left,right,bottom,width,height,marginLeft,marginTop,marginBottom,marginRight".split(","),units:"px,%,in,cm,mm,pt,pc,em,ex".split(",")},Brid.Tweener.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||1>i?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/n)))},Out:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||1>i?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin(2*(e-t)*Math.PI/n)+1)},InOut:function(e){var t,i=.1,n=.4;return 0===e?0:1===e?1:(!i||1>i?(i=1,t=n/4):t=n*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?-.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/n):i*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-t)*Math.PI/n)*.5+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-Brid.Tweener.Easing.Bounce.Out(1-e)},Out:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return.5>e?.5*Brid.Tweener.Easing.Bounce.In(2*e):.5*Brid.Tweener.Easing.Bounce.Out(2*e-1)+.5}}},Brid.Tweener.Tween=Brid.Class.extend({object:null,valuesStart:null,valuesEnd:null,valuesStartRepeat:null,duration:1e3,repeat:0,yoyo:!1,isPlaying:!1,isCSS:!1,reversed:!1,delayTime:0,startTime:null,easingFunction:Brid.Tweener.Easing.Linear.None,chainedTweens:[],onStartCallback:null,onStartCallbackFired:!1,onUpdateCallback:null,onCompleteCallback:null,onStopCallback:null,init:function(e){this.valuesStart||(this.valuesStart={}),this.object||(this.object=e)},to:function(e,t){for(var i in e)if(-1!==Brid.Tweener.Util.CSSproperties.indexOf(i)){this.isCSS=!0;break}for(var n in e)this.valuesStart[n]=parseFloat(this.object[n]);return t!==undefined&&(this.duration=t),this.valuesEnd=e,this},start:function(e){this.valuesStartRepeat||(this.valuesStartRepeat={}),this.isPlaying=!0,this.onStartCallbackFired=!1,this.startTime=e!==undefined?e:window.performance.now?window.performance.now():Date.now(),this.startTime+=this.delayTime;for(var t in this.valuesEnd){if(this.valuesEnd[t]instanceof Array){if(0===this.valuesEnd[t].length)continue;this.valuesEnd[t]=[this.object[t]].concat(this.valuesEnd[t])}this.valuesStart[t]=this.isCSS?this.object.el.style[t]||0:this.object[t]||0,this.valuesStartRepeat[t]=this.valuesStart[t]||0}return Brid.Tweener.add(this),this},stop:function(){return this.isPlaying?(Brid.Tweener.remove(this),this.isPlaying=!1,null!==this.onStopCallback&&this.onStopCallback.call(this.object),this.stopChainedTweens(),this):this},stopChainedTweens:function(){for(var e=0,t=this.chainedTweens.length;t>e;e++)this.chainedTweens[e].stop()},delay:function(e){return this.delayTime=e,this},setRepeat:function(e){return this.repeat=e,this},setYoyo:function(e){return this.yoyo=e,this},easing:function(e){return this.easingFunction=e,this},chain:function(){return this.chainedTweens=arguments,this},onStart:function(e){return this.onStartCallback=e,this},onUpdate:function(e){return this.onUpdateCallback=e,this},onComplete:function(e){return this.onCompleteCallback=e,this},onStop:function(e){return this.onStopCallback=e,this},update:function(e){if(e<this.startTime)return!0;this.onStartCallbackFired===!1&&(null!==this.onStartCallback&&this.onStartCallback.call(this.object),this.onStartCallbackFired=!0);var t=(e-this.startTime)/this.duration;t=t>1?1:t;var i=this.easingFunction(t);for(var n in this.valuesEnd){var s=parseFloat(this.valuesStart[n])||0,r=this.valuesEnd[n],o="";if("string"==typeof r){for(var a=0,l=Brid.Tweener.Util.units.length;l>a;a++)if(-1!=r.indexOf(Brid.Tweener.Util.units[a])){o=Brid.Tweener.Util.units[a];break}r=parseFloat(r)}if("number"==typeof r){var h=s+(r-s)*i;this.isCSS?this.object.el.style[n]=h+o:this.object[n]=h}}if(null!==this.onUpdateCallback&&this.onUpdateCallback.call(this.object,i),1==t){if(this.repeat>0){isFinite(this.repeat)&&this.repeat--;for(n in this.valuesStartRepeat){if("string"==typeof this.valuesEnd[n]&&(this.valuesStartRepeat[n]=this.valuesStartRepeat[n]+parseFloat(this.valuesEnd[n])),this.yoyo){var d=this.valuesStartRepeat[n];this.valuesStartRepeat[n]=this.valuesEnd[n],this.valuesEnd[n]=d}this.valuesStart[n]=this.valuesStartRepeat[n]}return this.yoyo&&(this.reversed=!this.reversed),this.startTime=e+this.delayTime,!0}null!==this.onCompleteCallback&&this.onCompleteCallback.call(this.object);for(var c=0,u=this.chainedTweens.length;u>c;c++)this.chainedTweens[c].start(e);return!1}return!0}}),window.requestAnimationFrame(Brid.Tweener.update),Brid.Sprite=Brid.Class.extend({init:function(e,t){this.player=e;var i=BUtil.deepCopy(this["default"]);t=this.config=BUtil.merge(i||{},t),delete this["default"],this.oldW=null,this.oldH=null,this.visibility=!0,this.size={w:this.oldW,h:this.oldH},this.el=t.el?t.el:this.createElement(),this.el&&(this.fOT=new Brid.Tweener.Tween(this).to({opacity:0},600).easing(Brid.Tweener.Easing.Quadratic.In),this.fIT=new Brid.Tweener.Tween(this).to({opacity:1},600).easing(Brid.Tweener.Easing.Quadratic.Out),this.children=[],this.initObjects())},initObjects:function(){var e=this.config;e&&e.children&&this.eachProp(e.children,function(e,t){if(null!=t){var i=this.$f(function(){this[e]=this.addChild(e,t)});t.loadEvent?this.addOnce(t.loadEvent,i):i()}})},addChild:function(e,t){var i,n;if("string"==typeof e){if(t=t||{},i=t.childClass||BUtil.uc(e),t.name=i,n=this.config.scope||t.scope||"Brid","undefined"==typeof window[n][i])return;e=new window[n][i](this.player||this,t)}else"undefined"!=typeof e.config.name&&(this[e.config.name]=e);return this.children.push(e),e&&e.el?(this.el.appendChild(e.el),e):null},removeChild:function(e){if(e){for(var t=!1,i=this.children.length-1;i>=0;i--)if(this.children[i]===e){t=!0,this.children.splice(i,1),"undefined"!=typeof e.config.name&&this[e.config.name]&&delete this[e.config.name];break}if(t){var n=e.el;n&&n.parentNode===this.el&&(this.el.removeChild(n),Brid.event.removeAll(n))}}},removeAllChildren:function(){for(var e=this.el,t=this.children.length-1;t>=0;t--)"undefined"!=typeof this.children[t].config.name&&this[this.children[t].config.name]&&delete this[this.children[t].config.name];for(;e.lastChild;)e.removeChild(e.lastChild),Brid.event.removeAll(e.lastChild);this.children=[]},destroy:function(){if(this.children)for(var e=this.children.length-1;e>=0;e--)this.children[e].destroy&&this.children[e].destroy();this.fOT&&(this.fOT.stop(),this.fOT=null),this.fIT&&(this.fIT.stop(),this.fIT=null),this.removeAll(),this.removeAllChildren(),this.children=null,this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=null},createElement:function(e,t){return BUtil.canUseVector()&&Brid.Util.checkNested(this,"player.config.Skin."+this.config.name)&&this.player.config.Skin[this.config.name]&&t.innerHTML==undefined&&(t.innerHTML=BUtil.generateSVG(this.player.config.Skin[this.config.name],this.player.id)),BUtil.createElement(e||"div",t)},appendClassName:function(){return""},show:function(){this.visibility=!0,this.el.style.display="block"},hide:function(){this.visibility=!1,this.el.style.display="none"},addClass:function(e){BUtil.addClass(this.el,e)},removeClass:function(e){BUtil.removeClass(this.el,e)},fadeIn:function(){return this.fOT.stop(),this.fIT.start(),this.fIT},fadeOut:function(){return this.fIT.stop(),this.fOT.start(),this.fOT},lockShowing:function(){var e=this.el.style;e.display="block",e.opacity=1,e.visiblity="visible"},unlockShowing:function(){var e=this.el.style;e.display="",e.opacity="",e.visiblity=""},visible:function(e){var t=this.el.style;this.visibility=e,t.display=e===!0?"block":"none"},tween:function(e,t,i,n){return Brid.Tweener.tween(e,t,i,n)},css:function(e){return"object"==typeof e?void BUtil.setStyle(this.el,e):BUtil.getStyle(this.el,e,!1)},add:function(e,t){return Brid.event.add(this.el,e,t)},remove:function(e,t){return Brid.event.remove(this.el,e,t)},trigger:function(e,t,i){return Brid.event.trigger(this.el,e,t,i)},removeAll:function(){Brid.event.removeAll(this.el)},addOnce:function(e,t){return Brid.event.once(this.el,e,t)},ready:function(e){return e?(this.isReady?e.call(this):("undefined"==typeof this.readyQueue&&(this.readyQueue=[]),this.readyQueue.push(e)),this):this},triggerReady:function(){this.isReady=!0,this.trigger("ready",this),this.readyQueue&&this.readyQueue.length>0&&(this.each(this.readyQueue,function(e){e.call(this)}),this.readyQueue=[])},each:function(e,t){BUtil.each.call(this,e,t)},eachProp:function(e,t){BUtil.eachProp.call(this,e,t)},extend:function(e){BUtil.merge(this,e)},$f:function(e,t){return BUtil.$f(this,e,t)},width:function(e){return e&&(this.el.style.width=e+"px"),this.el.offsetWidth},height:function(e){return e&&(this.el.style.height=e+"px"),this.el.offsetHeight},rescale:function(e,t){var i=this.oldW=this.oldW&&e!==!0?this.oldW:this.el.offsetWidth,n=this.oldH=this.oldH&&e!==!0?this.oldH:this.el.offsetHeight;if(!i||!n)return null;this.resized=!0;var s,r,o=this.player.el.offsetWidth/(t+.1*t),a=this.el.style;return o=1>o?o:1,BUtil.hasTouch()&&(o+=.5*(1-o)),this.scale=o,t&&this.player.el.offsetWidth<=t?(s=Math.round(i*o),r=Math.round(n*o)):(s=i,r=n),a.width=s+"px",a.height=r+"px",this.size={w:s,h:r},this.setSVGSize(s,r),this.size},setSVGSize:function(e,t){var i=this.el.children[0].children[0];i&&(e=e?e:this.el.offsetWidth,t=t?t:this.el.offsetHeight,BUtil.setStyle(i,{width:e+"px",height:t+"px"}))},resetSkin:function(){var e=this.config;if(this.player){var t,i=this.player.config;BUtil.canUseVector()&&"undefined"!=typeof i.Skin[e.name]&&(t=BUtil.generateSVG(i.Skin[e.name],this.player.id),this.el.innerHTML=t)}var n=this.children.length;if(n>0)for(var s=0;n>s;s++)this.children[s].resetSkin&&this.children[s].resetSkin()}});var BSprite=Brid.Sprite;Brid.Button=BSprite.extend({init:function e(t,i){e.base.call(this,t,i),this.el.style.opacity=1,this.overT=new Brid.Tweener.Tween(this).to({opacity:.7},400).easing(Brid.Tweener.Easing.Quintic.Out),this.outT=new Brid.Tweener.Tween(this).to({opacity:1},400).easing(Brid.Tweener.Easing.Quintic.In),this.toggleListeners(!0)},listenersState:!1,toggleListeners:function(e){var t=e?"add":"remove";this.listenersState!=e&&(this.listenersState=e,this.el.style.pointerEvents=e?"auto":"none",this[t]("click",this.$f(this.onClick)),BUtil.hasTouch()?(this[t]("touchstart",this.$f(this.onMouseOver)),this[t]("touchend",this.$f(this.onMouseOut))):(this[t]("mouseover",this.$f(this.onMouseOver)),this[t]("mouseout",this.$f(this.onMouseOut))))},createElement:function t(e,i){return i=BUtil.merge({className:this.appendClassName(),role:"button",tabIndex:0},i),t.base.call(this,e,i)},appendClassName:function i(){return"brid-button "+i.base.call(this)},onMouseOver:function(){this.outT.stop(),this.overT.start()},onMouseOut:function(){this.overT.stop(),this.outT.start()},destroy:function n(){this.overT&&(this.overT.stop(),this.overT=null),this.outT&&(this.outT.stop(),this.outT=null),n.base.call(this)}});var BButton=Brid.Button;Brid.ToggleButton=BButton.extend({opened:null,firstStateEvent:"",secondStateEvent:"",bubbleEvent:!1,eventData:null,init:function s(e,t){s.base.call(this,e,t),this.target||(this.target=this)},onClick:function(){this.opened?this.firstState():this.secondState(),this.onMouseOut()},secondState:function(){this.opened=!0,this.target.trigger(this.firstStateEvent,this.eventData,this.bubbleEvent),this.addClass("opened"),this.toggle()},firstState:function(){this.opened=!1,this.target.trigger(this.secondStateEvent,this.eventData,this.bubbleEvent),this.removeClass("opened"),this.toggle()},resetState:function(){this.firstState()}}),Brid.PanelButton=Brid.ToggleButton.extend({position:"left",svgOpened:"",svgClosed:"",label:"",enabled:!0,init:function r(e,t){r.base.call(this,e,t),Brid.log("PanelButton init");var i,n,s=this.position,o={},a={},l={},h=this.label;this.target=e,i="right"==s?"openLeftScreen":"openRightScreen",n="right"==s?"closeLeftScreen":"closeRightScreen",o[s]="67%",o["margin"+BUtil.uc(s)]="-0.5em",a[s]="0%",a["margin"+BUtil.uc(s)]="0.5em",l[s]="-15%",this.oT=new Brid.Tweener.Tween(this).to(o,600).easing(Brid.Tweener.Easing.Quintic.Out),this.cT=new Brid.Tweener.Tween(this).to(a,600).easing(Brid.Tweener.Easing.Quintic.Out),this.fOT=new Brid.Tweener.Tween(this).to(l,600).easing(Brid.Tweener.Easing.Quintic.Out),this.fIT=new Brid.Tweener.Tween(this).to(a,600).easing(Brid.Tweener.Easing.Quintic.Out),h&&""!=h&&(Brid.log("add label",h),this.labelContainer=new Brid.PanelButtonLabel(e,{name:"PanelButtonLabel",position:s,label:h}),this.addChild(this.labelContainer)),e.add(["play","start","beforeStart","newContent"],this.$f(this.onPlay)),e.add("disableInteraction",this.$f(this.disableInteraction)),e.add("enableInteraction",this.$f(this.enableInteraction)),e.addOnce("ready",this.$f(this.onReady)),e.add("playerresize",this.$f(this.onPlayerResize)),e.add(i,this.$f(this.onOpenOpositeScreen)),e.add(n,this.$f(this.onCloseOpositeScreen))},appendClassName:function o(){return"brid-panels "+o.base.call(this)},onReady:function(){Brid.log("PanelButton onReady"),"visible"==this.player.config.controlsBehavior&&this.player.officialTech()&&this.fadeIn(),this.toggleShowHide("remove"),this.player.addOnce("start",this.$f(this.enableInteraction))},toggle:function(){if(!this.player.adInProgress&&this.enabled){var e=this.opened?"addClass":"removeClass",t=this.opened?this.svgOpened:this.svgClosed;BUtil.canUseVector()&&this.player.config.Skin[t]&&(this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin[t],this.player.id),this.labelContainer&&(this.el.appendChild(this.labelContainer.el),this.labelContainer.refresh())),this.opened?(this.cT.stop(),this.oT.start()):(this.oT.stop(),this.cT.start()),this.resized&&this.onPlayerResize(),Brid.Util.checkNested(this,"player.tech.support")&&this.player.tech.support.canResize&&this.player.tech[e]("brid-tech-mini-"+("right"==this.position?"left":"right"))}},onPlay:function(){!this.player.adInProgress&&this.enabled&&((this.player.isPlaying||this.player.ended())&&this.toggleShowHide("add"),this.opened&&this.firstState())},onOpenOpositeScreen:function(){this.fadeIn(),this.firstState(),this.opositeOpened=!0},onCloseOpositeScreen:function(){this.opositeOpened=!1},toggleShowHide:function(e){Brid.log("PanelButton toggleShowHide",e),this.listener!=e&&(this.listener=e,this.player[e]("show",this.$f(this.fadeIn)),this.player[e]("hide",this.$f(this.fadeOut)))},disableInteraction:function(){this.firstState(),this.fadeOut(),this.onMouseOut(),this.toggleListeners(!1),this.player.tech.removeClass("brid-tech-mini-"+("right"==this.poistion?"left":"right")),this.toggleShowHide("remove"),this.enabled=!1},enableInteraction:function(){this.fadeIn(),this.toggleListeners(!0),this.toggleShowHide("add"),this.onPlayerResize(),this.enabled=!0},onPlayerResize:function(e){var t=this.el.style,i=this.rescale(e,400);i&&(t.marginTop="-"+i.h/2+"px"),this.visibility?this.show():this.hide()},fadeOut:function a(){this.opened||this.opositeOpened||a.base.call(this)},fadeIn:function l(){this.opened||this.opositeOpened||l.base.call(this)},onMouseOver:function h(){h.base.call(this),this.labelContainer&&!this.opened&&this.labelContainer.show()},onMouseOut:function d(){d.base.call(this),this.labelContainer&&this.labelContainer.hide()}}),Brid.PanelButtonLabel=Brid.Sprite.extend({init:function c(e,t){c.base.call(this,e,t),e.add("ready",this.$f(this.onReady))},createElement:function u(){return u.base.call(this,"div",{className:"brid-panel-label"})},onReady:function(){this.el.innerHTML=this.config.label;var e={};e.opacity=1,e[this.config.position]=this.el.parentNode.offsetWidth+5+"px";var t={};t.opacity=0,t[this.config.position]="0px",this.labelShow=new Brid.Tweener.Tween(this).to(e,400).easing(Brid.Tweener.Easing.Quintic.Out),this.labelHide=new Brid.Tweener.Tween(this).to(t,400).easing(Brid.Tweener.Easing.Quintic.Out)},refresh:function(){this.el.innerHTML=this.config.label},show:function(){this.labelHide.stop(),this.labelShow.start()},hide:function(){this.labelShow.stop(),this.labelHide.start()}}),Brid.ControlBar=BSprite.extend({"default":{loadEvent:"play",children:{adInfo:{childClass:"AdInfo"},controlBarLeft:{},controlBarBg:{},controlBarRight:{},previous:{},playToggle:{},next:{},muteToggle:{},volumeControl:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},fullscreenToggle:{},hDToggle:{}}},init:function f(e,t){this["default"].children||(this.config.children={}),BUtil.merge(this["default"].children,e.config.controlsPlugins),f.base.call(this,e,t),e.addOnce("ready",this.$f(this.onPlayerReady)),e.add("fullscreenchange",this.$f(this.onFullScreenChange))},controlsEnabled:!0,listenersState:!1,createElement:function(){return BUtil.createElement("div",{className:"brid-controls"})},onPlayerReady:function(){this.controlsEnabled&&(this.player.add("enableInteraction",this.$f(this.onEnableControls)),this.el.style.bottom=-this.el.offsetHeight+"px","visible"==this.player.config.controlsBehavior&&this.player.officialTech()&&this.onNewContent(),this.player.add(["beforeStart","start"],this.$f(this.onNewContent)))},onNewContent:function(){Brid.log("ControlBar onNewContent"),this.toggleListeners(!1),this.onEnableControls()},toggleListeners:function(e){var t=e?"add":"remove";this.listenersState!=e&&(this.listenersState=e,BUtil.hasTouch()?(this[t](["touchstart","touchmove"],this.$f(this.onMouseOver)),this[t]("touchend",this.$f(this.onMouseOut))):(this[t](["mousemove","mouseover"],this.$f(this.onMouseOver)),this[t]("mouseout",this.$f(this.onMouseOut))),this.player[t]("show",this.$f(this.fadeIn)),this.player[t]("hide",this.$f(this.fadeOut)))},fadeIn:function(){this.fIn=Brid.Tweener.tween(this,600,{bottom:this.player.isFullScreen&&!BUtil.hasTouch()?"20px":"0px"},Brid.Tweener.Easing.Quintic.Out).onComplete(function(){this.fsDispatched&&(this.el.style.bottom=this.player.isFullScreen&&!BUtil.hasTouch()?"20px":"0px"),this.fsDispatched=!1})},fadeOut:function(){Brid.Tweener.tween(this,600,{bottom:-this.el.offsetHeight+"px"},Brid.Tweener.Easing.Quintic.Out)},onMouseOver:function(){this.player.lockShow()},onMouseOut:function(){this.player.unlockShow()},onEnableControls:function(){this.controlsEnabled=!0,this.fadeIn(),"visible"==this.player.config.controlsBehavior&&this.player.officialTech()||this.toggleListeners(!0)},onFullScreenChange:function(){this.fsDispatched=!0,this.fIn&&this.fIn.stop(),this.el.style.bottom=this.player.isFullScreen&&!BUtil.hasTouch()?"20px":"0px"}}),Brid.ControlBarLeft=BSprite.extend({createElement:function p(){return p.base.call(this,"div",{className:"brid-controls-left"})}}),Brid.ControlBarBg=BSprite.extend({createElement:function g(){return g.base.call(this,"div",{className:"brid-controls-middle"})}}),Brid.ControlBarRight=BSprite.extend({createElement:function m(){return m.base.call(this,"div",{className:"brid-controls-right"})}}),Brid.TouchOverlay=BSprite.extend({currentListener:"remove",init:function y(e,t){y.base.call(this,e,t),e.add(["disableInteraction","adStart"],this.$f(this.onDisableInteraction)),e.add(["enableInteraction","adEnd"],this.$f(this.onEnableInteraction)),e.add(["start"],this.$f(this.onStart)),e.add(["ended","newContent"],this.$f(this.reset)),e.addOnce("ready",this.$f(this.onPlayerReady)),this.add("mouseover",this.$f(function(){this.player.mouseOver()}))},createElement:function v(){return v.base.call(this,"div",{className:"brid-touch-overlay"})},onStart:function(){"flash"===this.player.techName&&this.hide()},onPlayerReady:function(){BUtil.hasTouch()?(this.add("touchstart",this.$f(this.onTouchStart)),this.add("touchend",this.$f(this.onTouchEnd))):this.add("click",this.$f(this.onClick)),this.reset()},reset:function(){var e,t=this.player;Brid.log("TouchOverlay reset",this.currentListener),this.player.tag&&"VIDEO"==this.player.tag.tagName?(e="remove",this.show()):(e="add",this.hide()),this.currentListener!=e&&(this.currentListener=e,t[e]("show",this.$f(this.hide)),t[e]("hide",this.$f(this.show)))},show:function b(){BUtil.hasTouch()&&this.player.tech.support.hasPoster||b.base.call(this)},onTouchStart:function(){var e=this.player;e.trigger("userInteraction"),e.togglePlay()},onClick:function(){this.player.trigger("userInteraction"),this.player.togglePlay()},onTouchEnd:function(){var e=this.player;e.inFocus?(e.inFocus=!1,e.trigger("hide")):(e.inFocus=!0,e.trigger("show"))},onDisableInteraction:function(){this.hide()},onEnableInteraction:function(){"html5"===this.player.techName?this.show():"flash"===this.player.techName&&this.hide()}}),Brid.PlayToggle=BButton.extend({init:function B(e,t){B.base.call(this,e,t),this.animParams={scale:1,op:1},this.scaleDownAnim=new Brid.Tweener.Tween(this.animParams).to({scale:.01,op:0},300).easing(Brid.Tweener.Easing.Quadratic.Out).onUpdate(this.$f(this.onTweenUpdate)),this.scaleUpAnim=new Brid.Tweener.Tween(this.animParams).to({scale:1,op:1},300).easing(Brid.Tweener.Easing.Quadratic.Out).onUpdate(this.$f(this.onTweenUpdate)),this.state=0,e.add(["play","start","playing"],this.$f(this.onPlay)),e.add("pause",this.$f(this.onPause)),e.add("ended",this.$f(this.onEnd)),e.add("adEnd",this.$f(this.onAdEnded)),BUtil.isMobilePlatform()&&e.add("newContent",this.$f(this.onPause))},appendClassName:function w(){return"brid-play-control brid-control "+w.base.call(this)},onTweenUpdate:function(){var e="scale("+this.animParams.scale+")",t=this.el.style;t.webkitTransform=e,t.mozTransform=e,t.transform=e,t.opacity=this.animParams.op},onClick:function(){Brid.log("PlayToggle onClick",this.player.id),this.player.trigger("userInteraction"),this.player.togglePlay()},onPlay:function(){1!=this.state&&(this.state=1,this.scaleUpAnim.stop(),this.scaleDownAnim.start().onComplete(this.$f(function(){BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.Pause?this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.Pause,this.player.id):(BUtil.removeClass(this.el,"brid-paused"),BUtil.removeClass(this.el,"brid-replay"),BUtil.addClass(this.el,"brid-playing")),this.scaleUpAnim.start()})))},onPause:function(){0!=this.state&&(this.state=0,this.scaleUpAnim.stop(),this.scaleDownAnim.start().onComplete(this.$f(function(){BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.PlayToggle?this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.PlayToggle,this.player.id):(BUtil.removeClass(this.el,"brid-playing"),BUtil.removeClass(this.el,"brid-replay"),BUtil.addClass(this.el,"brid-paused")),this.scaleUpAnim.start()})))},onEnd:function(){this.player.isNextQueued()||2!=this.state&&(this.state=2,this.scaleUpAnim.stop(),this.scaleDownAnim.start().onComplete(this.$f(function(){BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.Repeat?this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.Repeat,this.player.id):(BUtil.removeClass(this.el,"brid-playing"),BUtil.removeClass(this.el,"brid-paused"),BUtil.addClass(this.el,"brid-replay")),this.scaleUpAnim.start()})))},onAdEnded:function(){this.player.ended()&&this.onEnd()}}),Brid.Previous=BButton.extend({init:function S(e,t){S.base.call(this,e,t),this.fadeOut(),e.add(["start","enableInteraction"],this.$f(this.checkToShow)),e.addOnce("ready",this.$f(this.onPlayerReady)),e.add("disableInteraction",this.$f(this.fadeOut))},appendClassName:function T(){return"brid-previous-control brid-control "+T.base.call(this)},onPlayerReady:function(){this.player.add("playerresize",this.$f(this.onPlayerResize)),this.onPlayerResize()},onClick:function(){this.player.previous()},checkToShow:function(){var e=this.player;(1!=e.playlistLength||e.getAdInProgress())&&("loop"!=e.config.afterPlaylistEnd&&0==e.currentIndex||e.getAdInProgress()?this.fadeOut():this.fadeIn())},onPlayerResize:function(){this.player.el.offsetWidth<=300?this.hide():(this.el.style.removeProperty("padding"),this.tempPadding=this.css("padding"),this.show())},fadeIn:function P(){P.base.call(this),this.toggleListeners(!0)},fadeOut:function C(){C.base.call(this),this.toggleListeners(!1)},show:function(){this.hidden&&(this.hidden=!1,this.el.style.width=this.tempWidth,this.el.style.padding=this.tempPadding,this.el.style.visibility="visible")},hide:function(){this.hidden||(this.hidden=!0,this.tempWidth=this.css("width"),this.tempPadding=this.css("padding"),this.el.style.width="0",this.el.style.padding="0",this.el.style.visibility="hidden")}}),Brid.Next=BButton.extend({init:function x(e,t){x.base.call(this,e,t),this.fadeOut(),e.add(["start","enableInteraction"],this.$f(this.checkToShow)),e.addOnce("ready",this.$f(this.onPlayerReady)),e.add("disableInteraction",this.$f(this.fadeOut))},appendClassName:function U(){return"brid-next-control brid-control "+U.base.call(this)},onPlayerReady:function(){this.player.add("playerresize",this.$f(this.onPlayerResize)),this.onPlayerResize()},onClick:function(){this.player.next()},checkToShow:function(){var e=this.player;(1!=e.playlistLength||e.getAdInProgress())&&("loop"!=e.config.afterPlaylistEnd&&e.currentIndex==e.videos.length-1||e.getAdInProgress()?this.fadeOut():this.fadeIn())},onPlayerResize:function(){this.player.el.offsetWidth<=300?this.hide():this.show()},fadeIn:function k(){k.base.call(this),this.toggleListeners(!0)},fadeOut:function E(){E.base.call(this),this.toggleListeners(!1)},show:function(){this.hidden&&(this.hidden=!1,this.el.style.width=this.tempWidth,this.el.style.padding=this.tempPadding,this.el.style.visibility="visible")},hide:function(){this.hidden||(this.hidden=!0,this.tempWidth=this.css("width"),this.tempPadding=this.css("padding"),this.el.style.width="0",this.el.style.padding="0",this.el.style.visibility="hidden")}}),Brid.HDToggle=BButton.extend({init:function O(e,t){O.base.call(this,e,t),this.animParams={scale:1,op:1},this.scaleDownAnim=new Brid.Tweener.Tween(this.animParams).to({scale:.01,op:0},300).easing(Brid.Tweener.Easing.Quadratic.Out).onUpdate(this.$f(this.onTweenUpdate)),this.scaleUpAnim=new Brid.Tweener.Tween(this.animParams).to({scale:1,op:1},300).easing(Brid.Tweener.Easing.Quadratic.Out).onUpdate(this.$f(this.onTweenUpdate)),this.state=0,this.hide(),e.add(["start","canplay","enableInteraction"],this.$f(this.onStart)),e.add(["canplay","qualityChange"],this.$f(this.onQualityChange)),e.addOnce("ready",this.$f(this.onPlayerReady)),e.add("disableInteraction",this.$f(this.hide))},createElement:function I(){var e=BUtil.canUseVector()?BUtil.generateSVG(this.player.config.Skin.HDToggleOff,this.player.id):"";return I.base.call(this,"div",{className:"brid-hd-control brid-control brid-button",innerHTML:e})},onTweenUpdate:function(){var e="scale("+this.animParams.scale+")",t=this.el.style;t.webkitTransform=e,t.mozTransform=e,t.transform=e,t.opacity=this.animParams.op},onPlayerReady:function(){this.player.add("playerresize",this.$f(this.onPlayerResize)),this.onPlayerResize()},onClick:function(){Brid.log("this.player.isHD()",this.player.isHD()),this.player.setHD(!this.player.isHD())},onQualityChange:function(){if(BUtil.canUseVector()){Brid.log("onQualityChange",this.player.isHD());var e=this.player.isHD()?"HDToggleOn":"HDToggleOff",t=this.player.isHD()?"addClass":"removeClass",i=this.player.isHD()?1:0;this.state!=i&&(this.state=i,this.scaleUpAnim.stop(),this.scaleDownAnim.start().onComplete(this.$f(function(){this[t]("active"),this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin[e],this.player.id),this.scaleUpAnim.start()})))}},onStart:function(){this.player.HDAvailable()&&this.player.el.offsetWidth>400&&!this.player.getAdInProgress()?this.show():this.hide()},onPlayerResize:function(){this.player.el.offsetWidth<=400||!this.player.HDAvailable()||this.player.getAdInProgress()?this.hide():this.show()}}),Brid.FullscreenToggle=BButton.extend({init:function M(e,t){0!=e.config.fullscreen&&(M.base.call(this,e,t),this.animParams={scale:1,op:1},this.scaleDownAnim=new Brid.Tweener.Tween(this.animParams).to({scale:.01,op:0},300).easing(Brid.Tweener.Easing.Quadratic.Out).onUpdate(this.$f(this.onTweenUpdate)),this.scaleUpAnim=new Brid.Tweener.Tween(this.animParams).to({scale:1,op:1},300).easing(Brid.Tweener.Easing.Quadratic.Out).onUpdate(this.$f(this.onTweenUpdate)),this.state=0,e.add("fullscreenchange",this.$f(this.onFullScreenChange)))},appendClassName:function $(){return"brid-fullscreen-control brid-control "+$.base.call(this)},onTweenUpdate:function(){var e="scale("+this.animParams.scale+")",t=this.el.style;t.webkitTransform=e,t.mozTransform=e,t.transform=e,t.opacity=this.animParams.op},onClick:function(){this.player.toggleFullScreen(!this.player.isFullScreen)},onFullScreenChange:function(){if(BUtil.canUseVector()){var e=this.player,t=e.isFullScreen?"FullscreenOff":"FullscreenToggle",i=e.isFullScreen?1:0;
    this.state!=i&&(this.state=i,this.scaleUpAnim.stop(),this.scaleDownAnim.start().onComplete(this.$f(function(){this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin[t],e.id),this.scaleUpAnim.start()})),this.onMouseOut())}}}),Brid.PlayButtonOverlay=BButton.extend({init:function L(e,t){L.base.call(this,e,t),this.animParams={scale:.5,op:.8},this.blink=new Brid.Tweener.Tween(this.animParams).to({scale:1,op:0},400).easing(Brid.Tweener.Easing.Quadratic.Out).onUpdate(this.$f(this.onTweenUpdate)).onComplete(this.$f(function(){this.hide(),this.animating=!1})),e.add(["beforeStart","firstPlay","skipped","playbackerror"],this.$f(this.hide)),e.add("stopped",this.$f(this.onStopped)),e.add("disableInteraction",this.$f(this.onDisableInteraction)),e.add("start",this.$f(this.onStart)),e.addOnce("ready",this.$f(this.onReady)),this.togglePlaybackListeners(!0),this.add("click",this.$f(this.onClick)),this.hide(),this.fadeOut(),BUtil.isMobilePlatform()&&e.add("newContent",this.$f(this.toDefault))},listenersSet:!1,animating:!1,appendClassName:function N(){return"brid-overlay-play-button "+N.base.call(this)},onReady:function(){this.toDefault(),this.player.add("playerresize",this.$f(this.onPlayerResize)),this.onPlayerResize()},onClick:function(){this.player.isReady&&(this.player.trigger("userInteraction"),this.player.togglePlay())},togglePlaybackListeners:function(e){var t=e?"add":"remove";e!=this.listenersSet&&(this.listenersSet=e,this.player[t]("pause",this.$f(this.onPause)),this.player[t]("play",this.$f(this.onPlay)),this.player[t]("ended",this.$f(this.onEnded)))},onDisableInteraction:function(){this.hide(),this.player.add("enableInteraction",this.$f(this.onEnableInteraction)),this.togglePlaybackListeners(!1)},onEnableInteraction:function(){this.player.remove("enableInteraction",this.$f(this.onEnableInteraction)),this.togglePlaybackListeners(!(this.player.tech.support.hasPoster&&"flash"!=this.player.techName))},onStart:function(){this.animParams.scale=.5,this.animParams.op=.8,this.toggleListeners(!1)},onPause:function(){this.player.tech.support.hasPoster&&"flash"!=this.player.techName||(BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.PauseButtonOverlay&&(this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.PauseButtonOverlay,this.player.id),this.resized&&this.setSVGSize(this.size.w,this.size.h)),this.startAnimation())},onPlay:function(){this.player.tech.support.hasPoster&&"flash"!=this.player.techName||(BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.PlayButtonOverlay&&(this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.PlayButtonOverlay,this.player.id),this.resized&&this.setSVGSize(this.size.w,this.size.h)),this.startAnimation())},onEnded:function(){this.player.isNextQueued()||this.toDefault()},onStopped:function(){this.toDefault()},toDefault:function(){return this.player.tech.support.hasPoster&&"flash"!=this.player.techName||this.player.getAdInProgress()?(Brid.log("Hide play button"),void this.hide()):(BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.PlayButtonOverlay&&(this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.PlayButtonOverlay,this.player.id),this.resized&&this.setSVGSize(this.size.w,this.size.h)),this.toggleListeners(!0),this.show(),void this.fadeIn())},startAnimation:function(){this.animating||(this.animating=!0,this.animParams.scale=.5,this.animParams.op=.8,this.blink.start(),this.show())},onTweenUpdate:function(){var e="scale("+this.animParams.scale+")",t=this.el.style;t.webkitTransform=e,t.mozTransform=e,t.transform=e,t.opacity=this.animParams.op},onPlayerResize:function(){if(!this.player.tech.support.hasPoster||"flash"==this.player.techName){var e=this.el.style,t=this.rescale(!1,400);t&&(e.marginTop="-"+t.h/2+"px",e.marginLeft="-"+t.w/2+"px"),this.visibility?this.show():this.hide()}},hide:function F(){F.base.call(this),this.toggleListeners(!1)}}),Brid.HDIndicator=BSprite.extend({init:function R(e,t){R.base.call(this,e,t),this.fadeInT=new Brid.Tweener.Tween(this).to({opacity:1,top:"50%"},400).easing(Brid.Tweener.Easing.Quintic.Out),this.fadeOutT=new Brid.Tweener.Tween(this).to({opacity:0},400).delay(1e3).easing(Brid.Tweener.Easing.Quintic.Out).onComplete(this.$f(function(){this.hide()})),this.ap={op:0},this.colorizeT=new Brid.Tweener.Tween(this.ap).to({op:1},600).delay(400).easing(Brid.Tweener.Easing.Quintic.Out).onUpdate(this.$f(this.onTweenUpdate)).onComplete(this.$f(function(){this.el.style.opacity=1,this.fadeOutT.start()})),this.decolorizeT=new Brid.Tweener.Tween(this.ap).to({op:0},600).delay(400).easing(Brid.Tweener.Easing.Quintic.Out).onUpdate(this.$f(this.onTweenUpdate)).onComplete(this.$f(function(){this.el.style.opacity=1,this.fadeOutT.start()})),e.add("qualityChange",this.$f(this.onQualityChange)),e.addOnce("ready",this.$f(this.onReady))},createElement:function A(){var e=A.base.call(this,"div",{className:"brid-hd-indicator"});return BUtil.canUseVector()&&(e.innerHTML=BUtil.generateSVG(this.player.config.Skin.HDToggleOff,this.player.id+"1")+BUtil.generateSVG(this.player.config.Skin.HDToggleOn,this.player.id+"1")),this.hdOn=e.children[1],this.hdOn.style.opacity=0,e},onReady:function(){this.player.add("playerresize",this.$f(this.onPlayerResize)),this.onPlayerResize(),this.hide()},onQualityChange:function(){this.decolorizeT.stop(),this.colorizeT.stop(),this.fadeInT.stop(),this.fadeOutT.stop(),this.el.style.top="60%",this.el.style.opacity=0,this.show(),this.fadeInT.start(),this.player.isHD()?(this.ap.op=0,this.colorizeT.start()):(this.ap.op=1,this.decolorizeT.start())},onTweenUpdate:function(){this.hdOn.style.opacity=this.ap.op},onPlayerResize:function(){if(this.player.officialTech()){var e=this.el.style,t=this.rescale(!1,400);t&&(e.marginTop="-"+t.h/2+"px",e.marginLeft="-"+t.w/2+"px"),this.visibility?this.show():this.hide()}}}),Brid.BufferIndicator=BSprite.extend({init:function D(e,t){e.config.Skin.BufferIndicator||(e.config.Skin.BufferIndicator="51.3 51.3'><g><linearGradient id='SVGID_1_' gradientUnits='userSpaceOnUse' x1='16' y1='14.9' x2='37.9' y2='31.8'><stop  offset='0' style='stop-color:#FFFFFF'/><stop  offset='1' style='stop-color:#707070;stop-opacity:0'/></linearGradient><path fill='url(#SVGID_1_)' d='M25.7,0C11.5,0,0,11.5,0,25.7c0,0.1,0,0.2,0,0.3h2.8c0-0.1,0-0.2,0-0.3C2.8,13,13,2.8,25.7,2.8 c12.6,0,22.9,10.2,22.9,22.9c0,12.6-10.2,22.9-22.9,22.9c0,0-0.1,0-0.1,0v2.8c0,0,0.1,0,0.1,0c14.2,0,25.7-11.5,25.7-25.7 C51.3,11.5,39.9,0,25.7,0z'/></g><g><linearGradient id='SVGID_2_' gradientUnits='userSpaceOnUse' x1='-642.5' y1='-666.2166' x2='-620.6' y2='-649.4' gradientTransform='matrix(-1 0 0 -1 -607.2 -629.8)'><stop  offset='0' style='stop-color:#FFFFFF'/><stop  offset='1' style='stop-color:#707070;stop-opacity:0'/></linearGradient><path fill='url(#SVGID_2_)' d='M25.7,51.3c14.2,0,25.7-11.5,25.7-25.7c0-0.1,0-0.2,0-0.3h-2.8c0,0.1,0,0.2,0,0.3 c0,12.6-10.2,22.9-22.9,22.9C13,48.5,2.8,38.3,2.8,25.7C2.8,13,13,2.8,25.7,2.8c0,0,0.1,0,0.1,0V0c0,0-0.1,0-0.1,0 C11.5,0,0,11.5,0,25.7C0,39.9,11.5,51.3,25.7,51.3z'/></g>"),D.base.call(this,e,t),this.animParams={rot:0},this.spinner=new Brid.Tweener.Tween(this.animParams).to({rot:-360},1e3).easing(Brid.Tweener.Easing.Linear.None).setRepeat(1/0).onUpdate(this.$f(function(){var e="rotate("+this.animParams.rot+"deg)";this.el.style.webkitTransform=e,this.el.style.mozTransform=e,this.el.style.transform=e})),this.hide(),e.add("disableInteraction",this.$f(this.onDisableInteraction)),e.add("enableInteraction",this.$f(this.onEnableInteraction)),e.add("newContent",this.$f(this.onNewContent))},listenersSet:!1,createElement:function H(){return H.base.call(this,"div",{className:"brid-buffer-indicator"})},onDisableInteraction:function(){this.hide(),this.toggleListener(!1)},onEnableInteraction:function(){this.player.officialTech()&&this.toggleListener(!0)},onNewContent:function(){this.player.officialTech()?this.onEnableInteraction():this.onDisableInteraction()},hide:function z(){z.base.call(this),this.spinner.isPlaying&&(this.spinner.stop(),this.animParams.rot=0)},show:function V(){this.spinner.isPlaying||this.spinner.start(),V.base.call(this)},toggleListener:function(e){var t=e?"add":"remove";e!=this.listenersSet&&(this.listenersSet=e,this.player[t](["play","canplay","canplaythrough","playing","ended"],this.$f(this.hide)),this.player[t](["beforeStart","waiting"],this.$f(this.show)))}}),Brid.Slider=BSprite.extend({init:function _(e,t){_.base.call(this,e,t),e.add(this.updateEvent,this.$f(this.update)),e.add("enableInteraction",this.$f(this.onEnableInteraction)),this.toggleInteraction(!0),this.update()},enabled:!1,down:!1,startUpdating:function(){this.player.add(this.updateEvent,this.$f(this.update))},stopUpdating:function(){this.player.remove(this.updateEvent,this.$f(this.update))},createElement:function G(e,t){return t=BUtil.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},t),G.base.call(this,e,t)},toggleInteraction:function(e){if(this.enabled!=e){this.enabled=e;var t=BUtil.hasTouch()?"touchstart":"mousedown",i=BUtil.hasTouch()?this.onTouchStart:this.onMouseDown,n=e?"add":"remove";this[n](t,this.$f(i))}},onDisableInteraction:function(){this.toggleInteraction(!1)},onEnableInteraction:function(){this.toggleInteraction(!0)},toggleUpDown:function(e,t){e?BUtil.blockTextSelection():BUtil.unblockTextSelection();var i=e?"add":"remove";this.down=e,document.addEventListener?(Brid.event[i](document,"mousemove",BUtil.$f(this,this.onMouseMove)),Brid.event[i](document,"mouseup",BUtil.$f(this,this.onMouseUp))):(Brid.event[i](this.bar.el,"mousemove",BUtil.$f(this,this.onMouseMove)),Brid.event[i](this.bar.el,["mouseup","losecapture"],BUtil.$f(this,this.onMouseUp)),this.bar.el.setCapture()),BUtil.stopEvent(t)},onMouseDown:function(e){this.down||(this.toggleUpDown(!0,e),this.onMouseMove(e))},onMouseUp:function(e){this.toggleUpDown(!1,e)},toggleTouch:function(e,t){e?BUtil.blockTextSelection():BUtil.unblockTextSelection();var i=e?"add":"remove";this.down=e,Brid.event[i](document,"touchend",BUtil.$f(this,this.onTouchEnd)),Brid.event[i](document,"touchmove",BUtil.$f(this,this.onTouchMove)),BUtil.stopEvent(t)},onTouchStart:function(e){BUtil.blockTextSelection(),this.down||(this.toggleTouch(!0,e),this.onTouchMove(e))},onTouchEnd:function(e){this.toggleTouch(!1,e)},update:function(){var e=this.getPercent(),t=this.scrubber,i=this.bar;isNaN(e)&&(e=0),t&&(t.el.style.left=BUtil.round(100*e,2)+"%"),i.el.style.width=BUtil.round(100*(e-this.player.bufferedStart()),2)+"%",i.el.style.left=BUtil.round(100*this.player.bufferedStart(),2)+"%"},scrollTo:function(e){var t=this.el,i=Brid.findPosX(t),n=t.offsetWidth,s=e.pageX?e.pageX:e.clientX;return Math.max(0,Math.min(1,(s-i)/n))}}),Brid.ProgressControl=BSprite.extend({"default":{children:{seekBar:{}}},init:function j(e,t){j.base.call(this,e,t),BUtil.isIPhone()&&this.hide(),BUtil.hasTouch()?(this.add(["touchstart","touchmove"],this.$f(this.onMouseOver)),this.add("touchend",this.$f(this.onMouseOut))):(this.add(["mousemove","mouseover"],this.$f(this.onMouseOver)),this.add("mouseout",this.$f(this.onMouseOut))),e.addOnce("ready",this.$f(this.onPlayerReady)),e.add("fullscreenchange",this.$f(function(){this.fsDispatched=!0,this.pIn&&this.pIn.stop(),this.el.style.bottom=this.player.controls.el.offsetHeight+(this.player.isFullScreen&&!BUtil.hasTouch()?20:0)+"px"}))},createElement:function W(){return W.base.call(this,"div",{className:"brid-progress-control"})},enabled:!0,listeners:!1,onPlayerReady:function(){var e=this.player;e.add("enableInteraction",this.$f(this.onEnableControls)),e.add("disableInteraction",this.$f(this.onDisableControls)),this.el.style.bottom="0px",this.enabled&&("visible"==e.config.controlsBehavior&&e.officialTech()&&this.onNewContent(),e.add(["beforeStart","start"],this.$f(this.onNewContent)))},onNewContent:function(){Brid.log("ProgressControl onNewContent"),this.toggleListeners(!1),this.onEnableControls()},toggleListeners:function(e){var t=e?"add":"remove";Brid.log("val",e),this.listeners!=e&&(this.listeners=e,this.player[t]("show",this.$f(this.progressIn)),this.player[t]("hide",this.$f(this.progressOut)))},progressIn:function(){var e=this.player.controls.el.offsetHeight+(this.player.isFullScreen&&!BUtil.hasTouch()?20:0)+"px";this.pIn=Brid.Tweener.tween(this,600,{bottom:e},Brid.Tweener.Easing.Quintic.Out).onComplete(function(){this.fsDispatched&&(this.el.style.bottom=e),this.fsDispatched=!1})},progressOut:function(){Brid.Tweener.tween(this,600,{bottom:"0px"},Brid.Tweener.Easing.Quintic.Out)},onMouseOver:function(e){this.player.lockShow();var t=this.scrollTo(e)*this.player.duration(),i=this.player.duration();this.player.trigger("progressOver",{time:t,duration:i},!1)},onMouseOut:function(){this.player.unlockShow(),this.player.trigger("progressOut")},onDisableControls:function(){Brid.log("ProgressControl onDisableControls"),this.enabled=!1,this.toggleListeners(!1),this.progressOut(),this.fadeOut()},onEnableControls:function(){Brid.log("onEnableControls"),this.enabled=!0,this.fadeIn(),this.progressIn(),"visible"==this.player.config.controlsBehavior&&this.player.officialTech()||this.toggleListeners(!0)},scrollTo:function(e){var t=this.el,i=Brid.findPosX(t),n=t.offsetWidth,s=e.pageX?e.pageX:e.clientX;return Math.max(0,Math.min(1,(s-i)/n))},resetSkin:function Q(){this.fsDispatched=!0,this.pIn&&this.pIn.stop(),this.el.removeAttribute("style"),this.el.style.bottom=this.player.controls.el.offsetHeight+(this.player.isFullScreen&&!BUtil.hasTouch()?20:0)+"px",Q.base.call(this)}}),Brid.SeekBar=Brid.Slider.extend({"default":{children:{buffer:{childClass:"BufferBar"},bar:{childClass:"ProgressBar"},scrubber:{childClass:"Scrubber"}}},updateEvent:"timeupdate",init:function q(e,t){q.base.call(this,e,t),e.addOnce("ready",this.$f(this.onReady)),e.add("show",this.$f(this.onMouseOver)),e.add("hide",this.$f(this.onMouseOut)),e.add("startTrackingTime",this.$f(this.startUpdating)),e.add("stopTrackingTime",this.$f(this.stopUpdating)),e.add(["newContent","ended","adStart","adEnd"],this.$f(this.update)),this.onMouseOut()},onReady:function(){this.el.removeAttribute("style");var e=parseInt(BUtil.getStyle(this.el,"height",!0));this.animParams={op:1,scale:1,tpos:0,h:e},this.tSI=new Brid.Tweener.Tween(this.animParams).to({op:1,scale:1,tpos:0,h:e},200).easing(Brid.Tweener.Easing.Quadratic.Out).onUpdate(this.$f(this.onTweenUpdate)),this.tSO=new Brid.Tweener.Tween(this.animParams).to({op:0,scale:0,tpos:e/2,h:e/2},400).easing(Brid.Tweener.Easing.Quadratic.Out).onUpdate(this.$f(this.onTweenUpdate))},onMouseOver:function(){this.tSI&&(this.tSO.stop(),this.tSI.start())},onMouseOut:function(){this.tSI&&(this.tSI.stop(),this.tSO.start())},onTweenUpdate:function(){var e="scale("+this.animParams.scale+")",t=this.scrubber.el.style;t.webkitTransform=e,t.mozTransform=e,t.transform=e,t.opacity=this.animParams.op,this.el.style.top=this.animParams.tpos+"px",this.el.style.height=this.animParams.h+"px"},createElement:function Y(){return Y.base.call(this,"div",{className:"brid-progress-holder"})},getPercent:function(){return this.player.currentTime()/this.player.duration()},onMouseDown:function X(e){X.base.call(this,e),this.player.scrubbing=!0},onTouchStart:function J(e){J.base.call(this,e),this.player.scrubbing=!0},onMouseUp:function K(e){K.base.call(this,e),this.player.scrubbing=!1,Brid.log("onMouseUp")},onTouchEnd:function Z(e){Z.base.call(this,e),this.player.scrubbing=!1},onMouseMove:function(e){var t=this.scrollTo(e)*this.player.duration();t==this.player.duration()&&(t-=.5),this.player.currentTime(t),BUtil.stopEvent(e)},onTouchMove:function(e){var t=e.touches[0],i=this.scrollTo(t)*this.player.duration();i==this.player.duration()&&(i-=.5),this.player.currentTime(i),BUtil.stopEvent(e)},stepForward:function(){this.player.currentTime(this.player.currentTime()+1)},stepBack:function(){this.player.currentTime(this.player.currentTime()-1)},resetSkin:function et(){this.onReady(),et.base.call(this)}}),Brid.BufferBar=BSprite.extend({init:function tt(e,t){tt.base.call(this,e,t),e.add(["progress","start","beforeStart","newContent","canplaythrough","enableInteraction","play"],this.$f(this.update)),e.add("adStart",this.$f(this.onAdStarted)),this.update()},createElement:function it(){return it.base.call(this,"div",{className:"brid-load-progress"})},onAdStarted:function(){this.player.getAdInProgress()&&(this.el.style.width=0,this.el.style.left=0)},update:function(){if(this.el.style){var e=BUtil.round(100*(this.player.bufferedPercent()-this.player.bufferedStart()),2);e>100&&(e=100),this.el.style.width=e+"%",this.el.style.left=BUtil.round(100*this.player.bufferedStart(),2)+"%"}}}),Brid.ProgressBar=BSprite.extend({createElement:function nt(){var e="";return BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.ProgressBar&&(e=BUtil.generateSVG(this.player.config.Skin.ProgressBar,this.player.id)),nt.base.call(this,"div",{className:"brid-play-progress",innerHTML:e})}}),Brid.Scrubber=BSprite.extend({"default":{children:{scrubberTimeDisplay:{}}},createElement:function st(){return st.base.call(this,"div",{className:"brid-seek-scrubber"})}}),Brid.ScrubberTimeDisplay=BSprite.extend({init:function rt(e,t){rt.base.call(this,e,t),e.add(["beforeStart","timeupdate","adStart","adEnd"],this.$f(this.update))},createElement:function ot(){var e=ot.base.call(this,"div",{className:"brid-scrubber-time brid-scrubber-time-controls"});return this.content=BUtil.createElement("div",{className:"brid-scrubber-time-display",innerHTML:"00:00"}),e.appendChild(BUtil.createElement("div").appendChild(this.content)),e},update:function(){var e=this.player,t=e.scrubbing?e.values.currentTime:e.currentTime();this.content.innerHTML=BUtil.formatTime(t,e.duration())}}),Brid.VolumeControl=BSprite.extend({"default":{children:{volumeBarBg:{},volumeBar:{}}},autohide:!1,init:function at(e,t){0==e.config.volume||BUtil.hasTouch()||(at.base.call(this,e,t),this.player.config.Skin&&"undefined"!=typeof this.player.config.Skin.volumeAutoHide&&(this.autohide=this.player.config.Skin.volumeAutoHide,e.add("volumeOver",this.$f(this.onVolumeOver)),e.add("volumeOut",this.$f(this.onVolumeOut)),this.add("mouseover",this.$f(this.onOver)),this.add("mouseout",this.$f(this.onOut))))},createElement:function lt(){return lt.base.call(this,"div",{className:"brid-volume-control"})},onPlayerResize:function(){this.player.el.offsetWidth<=350?this.hide():this.show()},onVolumeOver:function(){this.addClass("over")},onVolumeOut:function(){this.removeClass("over")},onOver:function(){this.player.trigger("volumeOver")},onOut:function(){this.player.trigger("volumeOut")}}),Brid.VolumeBar=Brid.Slider.extend({"default":{children:{bar:{childClass:"VolumeLevel"}}},updateEvent:"volumechange",rotation:!1,init:function ht(e,t){ht.base.call(this,e,t);var i=this.player.config.Skin;i&&"undefined"!=typeof i.volumeRotation&&(this.rotation=i.volumeRotation),this.add("mousedown",this.$f(this.onMouseDown))},createElement:function dt(){this.el&&(this.el.innerHTML="");var e,t=this.player.config.Skin;e=BUtil.canUseVector()&&"undefined"!=typeof t[this.config.name]?BUtil.generateSVG(t[this.config.name],this.player.id):"";for(var i=dt.base.call(this,"div",{className:"brid-volume-bar",innerHTML:e}),n=0;7>n;n++){e="",BUtil.canUseVector()&&"undefined"!=typeof t.VolumeLevelOff&&(e=BUtil.generateSVG(t.VolumeLevelOff,this.player.id));var s=BUtil.createElement("div",{className:"bar-bracket",innerHTML:e});Brid.event.add(s,"mouseover",this.$f(this.onBracketOver)),Brid.event.add(s,"mouseout",this.$f(this.onBracketOut)),i.appendChild(s)}return this.el&&(this.el.innerHTML=i.innerHTML),i},resetSkin:function(){this.createElement(),this.bar=new Brid.VolumeLevel(this.player),this.addChild(this.bar),setTimeout(this.$f(this.update),100)},onBracketOver:function(e){BUtil.removeClass(e.currentTarget,"out"),BUtil.addClass(e.currentTarget,"over")},onBracketOut:function(e){BUtil.removeClass(e.currentTarget,"over"),BUtil.addClass(e.currentTarget,"out")},onMouseMove:function(e){this.player.muted(!1);var t=this.scrollTo(e);t=.08>t?0:t,t=t>.92?1:t,this.player.volume(t),BUtil.stopEvent(e)},getPercent:function(){return this.player.volume()},stepForward:function(){this.player.volume(this.player.volume()+.1)},stepBack:function(){this.player.volume(this.player.volume()-.1)},update:function(){var e,t=this.getPercent(),i=this.bar;(isNaN(t)||this.player.muted())&&(t=0),i.el.innerHTML="",e=Math.ceil(7*t);for(var n=0;e>n;n++){var s="";BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.VolumeLevelOn&&(s=BUtil.generateSVG(this.player.config.Skin.VolumeLevelOn,this.player.id));var r=BUtil.createElement("div",{className:"level-bracket",innerHTML:s});Brid.event.add(r,"mouseover",this.$f(this.onBracketOver)),Brid.event.add(r,"mouseout",this.$f(this.onBracketOut)),i.el.appendChild(r)}},scrollTo:function(e){var t=this.rotation,i=this.el,n=t?Brid.findPosY(i):Brid.findPosX(i),s=t?i.offsetHeight:i.offsetWidth,r=t?e.pageY?e.pageY:e.clientY:e.pageX?e.pageX:e.clientX;return t?1-Math.max(0,Math.min(1,(r-n)/s)):Math.max(0,Math.min(1,(r-n)/s))}}),Brid.VolumeBarBg=BSprite.extend({createElement:function ct(){return ct.base.call(this,"div",{className:"brid-volume-bar-bg"})}}),Brid.VolumeLevel=BSprite.extend({createElement:function ut(){return ut.base.call(this,"div",{className:"brid-volume-level"})}}),Brid.MuteToggle=BButton.extend({init:function ft(e,t){0==e.config.volume||BUtil.hasTouch()||(ft.base.call(this,e,t),e.add("volumechange",this.$f(this.update)),"undefined"!=typeof this.player.config.Skin.volumeAutoHide&&(this.add("mouseover",this.$f(this.onOver)),this.add("mouseout",this.$f(this.onOut))),this.update())},appendClassName:function pt(){return"brid-mute-control brid-control "+pt.base.call(this)},onClick:function(){this.player.muted(this.player.muted()?!1:!0)},update:function(){var e=this.player.volume(),t="on";(0==e||this.player.muted())&&(t="off"),BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.MuteToggle&&"undefined"!=typeof this.player.config.Skin.Muted?this.el.innerHTML="on"===t?BUtil.generateSVG(this.player.config.Skin.MuteToggle,this.player.id):BUtil.generateSVG(this.player.config.Skin.Muted,this.player.id):(BUtil.each.call(this,["on","off"],function(e){BUtil.removeClass(this.el,"brid-vol-"+e)}),BUtil.addClass(this.el,"brid-vol-"+t))},onOver:function(){this.player.trigger("volumeOver")},onOut:function(){this.player.trigger("volumeOut")}}),Brid.CurrentTimeDisplay=BSprite.extend({init:function gt(e,t){gt.base.call(this,e,t),e.add(["timeupdate","beforeStart","loadedmetadata","adStart","adEnd"],this.$f(this.updateContent)),e.add("playerresize",this.$f(this.onPlayerResize)),e.add("newContent",this.$f(this.onNewContent))},createElement:function mt(){var e=mt.base.call(this,"div",{className:"brid-current-time brid-time-controls"});return this.content=BUtil.createElement("div",{className:"brid-current-time-display",innerHTML:"00:00"}),e.appendChild(BUtil.createElement("div").appendChild(this.content)),e},updateContent:function(){var e=this.player.scrubbing?this.player.values.currentTime:this.player.currentTime()||0;this.content.innerHTML=BUtil.formatTime(e,this.player.duration())},onNewContent:function(){this.content.innerHTML=BUtil.formatTime(0)},onPlayerResize:function(){this.player.el.offsetWidth<=350?this.hide():this.show()}}),Brid.DurationDisplay=BSprite.extend({init:function yt(e,t){yt.base.call(this,e,t),e.add(["timeupdate","beforeStart","loadedmetadata","adStart","adEnd"],this.$f(this.updateContent)),e.add("newContent",this.$f(this.onNewContent)),e.add("playerresize",this.$f(this.onPlayerResize))},createElement:function vt(){var e=vt.base.call(this,"div",{className:"brid-duration brid-time-controls"});return this.content=BUtil.createElement("div",{className:"brid-duration-display",innerHTML:"00:00"}),e.appendChild(BUtil.createElement("div").appendChild(this.content)),e},updateContent:function(){this.player.duration()&&(this.content.innerHTML=BUtil.formatTime(this.player.duration()))},onNewContent:function(){this.content.innerHTML=BUtil.formatTime(0),this.player.addOnce("waiting",this.$f(this.updateContent))},onPlayerResize:function(){this.player.el.offsetWidth<=350?this.hide():this.show()}}),Brid.TimeDivider=BSprite.extend({init:function bt(e,t){bt.base.call(this,e,t),e.add("playerresize",this.$f(this.onPlayerResize))},createElement:function Bt(){return Bt.base.call(this,"div",{className:"brid-time-controls brid-time-divider",innerHTML:"<div><span>/</span></div>"})},onPlayerResize:function(){this.player.el.offsetWidth<=350?this.hide():this.show()}}),Brid.PosterImage=BButton.extend({init:function wt(e,t){wt.base.call(this,e,t),e.add(["beforeStart","start","playbackerror","firstPlay","skipped","adStart","vpaidStart"],this.$f(this.hide)),e.add("playerresize",this.$f(this.onPlayerResize)),e.add(["showPoster","stopped"],this.$f(this.show))},createElement:function St(){return St.base.call(this,"div",{className:"brid-poster",tabIndex:-1})},onClick:function(){this.player.isReady&&(this.player.trigger("userInteraction"),this.player.togglePlay())},onMouseOver:function(){},onMouseOut:function(){},show:function Tt(){Brid.log("Show Poster",e,this.player.tech.support.hasPoster);var e=this.player.config.poster||this.player.currentSource.poster;return"undefined"==typeof e||this.player.tech.support.hasPoster?void this.hide():(this.el.innerHTML=e?'<img src="'+e+'"/>':"",void Tt.base.call(this))},onPlayerResize:function(){this.el.style.width=this.player.el.offsetWidth+"px",this.el.style.height=this.player.el.offsetHeight+"px"}}),Brid.PosterTitle=BSprite.extend({listeners:!1,init:function Pt(e,t){Pt.base.call(this,e,t),this.hide(),e.addOnce("ready",this.$f(this.onPlayerReady)),e.addOnce(["beforeStart","start"],this.$f(this.onStart)),e.addOnce("play",this.$f(this.onPlay)),e.add(["newContent","showPoster"],this.$f(this.fadeIn)),e.add("playerresize",this.$f(this.onPlayerResize)),e.add("enableInteraction",this.$f(this.onEnableControls)),e.add("disableInteraction",this.$f(this.onDisableControls))},createElement:function Ct(){return Ct.base.call(this,"div",{className:"brid-poster-title"})},onPlayerReady:function(){"flash"==this.player.techName&&BUtil.isSafari()?this.hide():this.show()},toggleListeners:function(e){var t=e?"add":"remove";this.listeners!=e&&(this.listeners=e,this.player[t]("show",this.$f(this.fadeIn)),this.player[t]("hide",this.$f(this.fadeOut)))},onStart:function(){this.player.add("openLeftScreen",this.$f(this.onDisableControls)),this.player.add("closeLeftScreen",this.$f(this.onEnableControls)),this.onEnableControls()},onPlay:function(){!this.player.getAdInProgress()&&"flash"==this.player.techName&&BUtil.isSafari()&&this.show()},onDisableControls:function(){this.toggleListeners(!1),this.fadeOut()},onEnableControls:function(){this.fadeIn(),this.toggleListeners(!0)},fadeIn:function xt(){this.onPlayerResize(),xt.base.call(this)},fadeOut:function Ut(){Ut.base.call(this)},onPlayerResize:function(){var e,t,i=this.player.currentSource.title;"undefined"!=typeof i&&(e=this.player.el.offsetWidth/480,t=Math.floor(60*e),this.el.innerHTML="<div>"+BUtil.safeTrunc(i,t)+"</div>")}}),Brid.FpsInfo=BSprite.extend({init:function kt(e,t){kt.base.call(this,e,t),this.startTime=0,this.frameNumber=0,this.looping()},getFPS:function(){this.frameNumber++;var e=(new Date).getTime(),t=(e-this.startTime)/1e3,i=Math.floor(this.frameNumber/t);return t>1&&(this.startTime=(new Date).getTime(),this.frameNumber=0),i},createElement:function Et(){return Et.base.call(this,"div",BUtil.merge({className:"brid-fps-info",innerHTML:"0 fps"}))},looping:function(){setTimeout(this.$f(this.looping),1e3/60),this.el.innerHTML=this.getFPS()+" FPS"}}),Brid.AdInfo=BSprite.extend({init:function Ot(e,t){Ot.base.call(this,e,t),this.hide(),e.add("showAdInfo",this.$f(this.onShow)),e.add(["newContent","ended"],this.$f(this.hide)),e.add("hideAdInfo",this.$f(this.onHideAdInfo)),e.add("adStartsSoon",this.$f(this.onAdStartsSoon))},createElement:function(){return BUtil.createElement("div",{className:"brid-ad-info",innerHTML:"<div>Advertisement</div>"})},onAdStartsSoon:function(){this.el.innerHTML="<div>Advertisement will start soon</div>",this.show(),this.player.remove("hideAdInfo",this.$f(this.onHideAdInfo)),this.player.add("hideAdInfo",this.$f(this.onHideAdInfo))},onHideAdInfo:function(){this.hide(),this.player.remove("hideAdInfo",this.$f(this.onHideAdInfo))},onShow:function(){this.show(),this.player.remove("hideAdInfo",this.$f(this.onHideAdInfo)),this.player.add("hideAdInfo",this.$f(this.onHideAdInfo))}}),Brid.Scroll=BSprite.extend({"default":{children:{bar:{childClass:"ScrollBar"}}},scope:null,elementsClass:null,active:null,verPos:0,init:function It(e,t){It.base.call(this,e,t),this.elements=null,this.elementsHolder=null,this.el.tabIndex=0,setTimeout(this.$f(function(){this.elementsHolder=new Brid.ElementsHolder(this.player,{elementsClass:this.elementsClass,scope:this.scope}),this.config.children.elementsHolder=this.elementsHolder.config,BUtil.insertFirst(this.elementsHolder.el,this.el),this.elements=this.elementsHolder.elements,this.elements.add("change",BUtil.throttle(this.$f(this.onChange),1e3,this)),this.onChange()}),100)},createElement:function Mt(e,t){return t=BUtil.merge({role:"scrollbar","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},t),Mt.base.call(this,e,t)},onChange:function(){if(!this.changed){var e;if(e=this.elements.height()||0,e>this.height()){this.toggleActive(!0);var t=this.height()/e;this.bar.scrubber.el.style.height=t*this.bar.el.offsetHeight+"px"}else this.toggleActive(!1)}},toggleActive:function(e){if(this.active!=e){this.active=e,this.bar.visible(e),e||this.scrollTo(0);var t=e?"add":"remove";BUtil.hasTouch()?this.elements[t]("touchstart",this.$f(this.onTouchStart)):(this.bar[t]("mousedown",this.$f(this.onMouseDown)),this[t]("mouseover",this.$f(this.onFocus)),this[t]("mouseout",this.$f(this.onBlur)))}},getVisibleHeight:function(e){var t=e.offsetTop;return e.offsetHeight-t},onFocus:function(){var e=this.elements.height()||0;e>this.height()&&(this.add("mousewheel",this.$f(this.onMouseWheel)),this.add("DOMMouseScroll",this.$f(this.onMouseWheel)))},onBlur:function(){this.remove("mousewheel",this.$f(this.onMouseWheel)),this.remove("DOMMouseScroll",this.$f(this.onMouseWheel))},onMouseWheel:function(e){Brid.Util.stopEvent(e);var t,i=e.detail,n=e.wheelDelta,s=225,r=s-1;i=i?n&&(t=n/i)?i/t:-i/1.35:n/120,i=1>i?-1>i?(-Math.pow(i,2)-r)/s:i:(Math.pow(i,2)+r)/s,e.delta=-Math.min(Math.max(i/2,-1),1);var o=20*e.delta;this.scrollTo(o,"relative")},toggleUpDown:function(e,t){e?BUtil.blockTextSelection():BUtil.unblockTextSelection();var i=e?"add":"remove";this.down=e,document.addEventListener?(Brid.event[i](document,"mousemove",BUtil.$f(this,this.onMouseMove)),Brid.event[i](document,"mouseup",BUtil.$f(this,this.onMouseUp))):(this.bar.add("mousemove",this.$f(this.onMouseMove)),this.bar.add(["mouseup","losecapture"],this.$f(this.onMouseUp)),this.bar.el.setCapture()),BUtil.stopEvent(t)},onMouseDown:function(e){this.down||(this.toggleUpDown(!0,e),this.onMouseMove(e))},onMouseUp:function(e){this.toggleUpDown(!1,e)},toggleTouch:function(e,t){e?BUtil.blockTextSelection():BUtil.unblockTextSelection();var i=e?"add":"remove";this.down=e,Brid.event[i](document,"touchend",BUtil.$f(this,this.onTouchEnd)),Brid.event[i](document,"touchmove",BUtil.$f(this,this.onTouchMove)),BUtil.stopEvent(t)},onTouchStart:function(e){BUtil.blockTextSelection(),this.down||(this.lasttouchy=this.touchstarty=e.touches[0].pageY,this.toggleTouch(!0,e),this.onTouchMove(e))},onTouchEnd:function(e){this.toggleTouch(!1,e),Math.abs(this.touchstarty-this.touchmovey)<20&&Brid.event.trigger(e.target,"click",null,!0)},onMouseMove:function(e){this.scrollTo(e,"event"),BUtil.stopEvent(e)},onTouchMove:function(e){this.touchmovey=e.touches[0].pageY;var t=this.elements.height()/this.bar.height(),i=(this.lasttouchy-this.touchmovey)/t;this.lasttouchy=this.touchmovey,this.scrollTo(i,"relative"),BUtil.stopEvent(e)},scrollTo:function(e,t){if(this.bar&&this.elements){var i,n,s,r,o,a,l,h=0;switch(i=this.bar.el,n=Brid.findPosY(i),s=i.offsetHeight,o=this.elements.height(),r=this.bar.scrubber,a=r.height()||0,n+=a/2,s-=a,t){case"event":h=e.pageY?e.pageY:e.clientY;
    break;case"relative":h=this.verPos+e,h=0>h?0:h>s?s:h,h+=n;break;case"direct":var d,c=Brid.findPosY(this.elements.getItem(e).el)-(n-a/2);d=c/(o-(s+a)),h=this.verPos+d*s+n}l=0==s?0:Math.max(0,Math.min(1,(h-n)/s)),this.verPos=Math.round(l*s),r.el.style.top=this.verPos+"px",this.elements.el.style.top=Math.round(-(o-(s+a))*l)+"px",.05>l&&!this.hitTopDispatched?this.onScrollHitTop():l>.95&&!this.hitBottomDispatched?this.onScrollHitBottom():l>=.05&&.9>=l&&(this.hitTopDispatched=!1,this.hitBottomDispatched=!1),this.trigger("scroll")}},onScrollHitTop:function(){this.hitTopDispatched=!0,this.trigger("scrollHitTop")},onScrollHitBottom:function(){this.hitBottomDispatched=!0,this.trigger("scrollHitBottom")}}),Brid.ScrollBar=BSprite.extend({"default":{children:{scrubber:{childClass:"Scroller"}}},createElement:function $t(){var e=$t.base.call(this,"div",{className:"brid-scroll-bar"});return e.appendChild(BUtil.createElement("div",{className:"brid-scroll-line"})),e}}),Brid.ElementsHolder=BSprite.extend({init:function Lt(e,t){Lt.base.call(this,e,t);var i=t.scope||"Brid";this.elements=new window[i][t.elementsClass](e,{name:t.elementsClass}),this.addChild(this.elements)},createElement:function Nt(){return Nt.base.call(this,"div",{className:"brid-scroll-elements-holder"})}}),Brid.Elements=BSprite.extend({init:function Ft(e,t){this.dataProvider=[],Ft.base.call(this,e,t)},createElement:function Rt(){return Rt.base.call(this,"div",{className:"brid-scroll-elements"})},addItem:function(e,t,i){var n=this.dataProvider.indexOf(e);return-1==n||i?(this.dataProvider.push(e),setTimeout(this.$f(function(){this.trigger("change")}),50),this.addChild(e,t)):void 0},removeItem:function(e){var t=this.dataProvider.indexOf(e);return-1!=t&&e.el.parentNode==this.el?(this.dataProvider.splice(t,1),setTimeout(this.$f(function(){this.trigger("change")}),50),this.removeChild(e)):void 0},getItem:function(e){return e=0>e?0:e>this.dataProvider.length-1?this.dataProvider.length-1:e,this.dataProvider[e]},removeAllItems:function(){for(;this.dataProvider.length>0;)this.removeChild(this.dataProvider[0]),this.dataProvider.splice(0,1);this.dataProvider=[],setTimeout(this.$f(function(){this.trigger("change")}),50)},destroy:function At(){this.dataProvider=[],At.base.call(this)}}),Brid.Scroller=BSprite.extend({createElement:function Dt(){var e="",t=this.player.config.Skin;return BUtil.canUseVector()&&t&&t.Scrubber&&(e=BUtil.generateSVG(t.Scrubber,this.player.id)),Dt.base.call(this,"div",{className:"brid-scroller",innerHTML:e})}}),Brid.Menu=BSprite.extend({addItem:function(e){this.addChild(e),e.add("click",this.$f(function(){this.unlockShowing()}))},createElement:function Ht(){return Ht.base.call(this,"ul",{className:"brid-menu"})}}),Brid.MenuItem=BButton.extend({init:function zt(e,t){zt.base.call(e,t),t.selected&&this.addClass("brid-selected")},createElement:function Vt(e,t){return Vt.base.call(this,"li",Brid.Util.merge({className:"brid-menu-item",innerHTML:this.config.label},t))},onClick:function(){this.selected(!0)},selected:function(e){e?this.addClass("brid-selected"):this.removeClass("brid-selected")}}),Brid.Dialog=BSprite.extend({"default":{title:"",content:"",type:"error",children:{title:{childClass:"DialogTitle"},content:{childClass:"DialogContent"},okButton:{childClass:"DialogOK"},cancelButton:{childClass:"DialogCancel"}}},init:function _t(e,t){_t.base.call(this,e,t),"custom"!=this.config.type&&(""!=this.config.title?this.title.el.innerHTML=this.config.title:(this.removeChild(this.title),this.title=null),""!=this.config.content?this.content.el.innerHTML=this.config.content:(this.removeChild(this.content),this.content=null),this.addClass(this.config.type))},appendClassName:function Gt(){return"brid-dialog "+Gt.base.call(this)},createElement:function jt(){return jt.base.call(this,"div",{className:this.appendClassName()})}});var BDialog=Brid.Dialog;Brid.DialogTitle=BSprite.extend({createElement:function Wt(){return Wt.base.call(this,"div",{className:"brid-dialog-title"})}}),Brid.DialogContent=BSprite.extend({createElement:function Qt(){return Qt.base.call(this,"div",{className:"brid-dialog-content"})}}),Brid.DialogOK=BButton.extend({createElement:function qt(){return qt.base.call(this,"div",{className:"brid-dialog-ok brid-button brid-panels",innerHTML:"OK"})},onClick:function(){this.trigger("ok",null,!0)}}),Brid.DialogCancel=BButton.extend({createElement:function Yt(){return Yt.base.call(this,"div",{className:"brid-dialog-cancel brid-button brid-panels",innerHTML:"CANCEL"})},onClick:function(){this.trigger("cancel",null,!0)}}),Brid.Close=BButton.extend({createElement:function Xt(){return Xt.base.call(this,"div",{className:"brid-close brid-button brid-panels"})},onClick:function(){this.trigger("close",null,!0)}}),Brid.AgeGate=BDialog.extend({"default":{type:"custom",children:{content:{childClass:"AgeGateContent"}}},appendClassName:function Jt(){return"brid-agegate "+Jt.base.call(this)},ban:function(){var e=this.content;e.text.innerHTML="You do not meet the minimum age requirement to view this content.",e.input.visible(!1),e.save.visible(!1)}}),Brid.AgeGateContent=BSprite.extend({"default":{children:{input:{childClass:"DateInput"},save:{childClass:"Save"}}},init:function Kt(e,t){Kt.base.call(this,e,t),this.input.add("dateEntered",this.$f(this.onDateEntered))},createElement:function Zt(){var e=Zt.base.call(this,"div",{className:"ag-content"});return this.text=BUtil.createElement("div",{className:"text",innerHTML:"The content in this video requires age verification.</br>Please enter your date of birth below."}),e.appendChild(this.text),e},onDateEntered:function(e){this.player.values.age=BUtil.getAge(e.data),this.player.values.birthDay=e.data,this.save.activate(),this.input.remove("dateEntered",this.$f(this.onDateEntered)),this.input.add("dateBad",this.$f(this.onDateBad))},onDateBad:function(){this.input.add("dateEntered",this.$f(this.onDateEntered)),this.input.remove("dateBad",this.$f(this.onDateBad)),this.save.deactivate()}}),Brid.DateInput=BSprite.extend({init:function ei(e,t){ei.base.call(this,e,t),this.add("keyup",BUtil.$f(this,this.onKeyPress))},createElement:function ti(){var e,t,i,n=ti.base.call(this,"div",{className:"ag-input"});return e=this.month=ti.base.call(this,"input",{value:"MM",className:"month"}),e.setAttribute("maxlength",2),Brid.event.add(e,"focus",this.$f(function(){"MM"==e.value&&(e.value="")})),n.appendChild(e),t=this.day=ti.base.call(this,"input",{value:"DD",className:"day"}),t.setAttribute("maxlength",2),Brid.event.add(t,"focus",this.$f(function(){"DD"==t.value&&(t.value="")})),n.appendChild(t),i=this.year=ti.base.call(this,"input",{value:"YYYY",className:"year"}),i.setAttribute("maxlength",4),Brid.event.add(i,"focus",this.$f(function(){"YYYY"==i.value&&(i.value="")})),n.appendChild(i),n},onKeyPress:function(e){var t=this.month.value.length<2?"0"+this.month.value:this.month.value,i=this.day.value.length<2?"0"+this.day.value:this.day.value,n=t+"/"+i+"/"+this.year.value;13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),Brid.log("Enter Pressed"),this.isValidDate(n)&&this.trigger("save",null,!0)),this.isValidDate(n)?this.trigger("dateEntered",this.year.value+"/"+this.month.value+"/"+this.day.value):this.trigger("dateBad")},isValidDate:function(e){if(!/^\d{2}\/\d{2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),i=parseInt(t[1],10),n=parseInt(t[0],10),s=parseInt(t[2],10);if(1e3>s||s>3e3||0==n||n>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];return(s%400==0||s%100!=0&&s%4==0)&&(r[1]=29),i>0&&i<=r[n-1]}}),Brid.Save=BButton.extend({init:function ii(e,t){ii.base.call(this,e,t),this.remove("click",this.$f(this.onClick))},createElement:function ni(){return ni.base.call(this,"div",{className:"ag-save brid-button",innerHTML:"CONFIRM"})},activate:function(){this.addClass("active"),this.add("click",this.$f(this.onClick))},deactivate:function(){this.removeClass("active"),this.remove("click",this.$f(this.onClick))},onClick:function(){this.trigger("save",null,!0)}}),Brid.Related=BSprite.extend({init:function si(e,t){si.base.call(this,e,t),Brid.log("Init Related"),this.fadeOut();var i=this.player.currentSource;i.name="RelatedShareHolder",this.relatedShareHolder=new Brid.RelatedShareHolder(e,i),this.addChild(this.relatedShareHolder),this.loadRelated()},loadRelated:function(){Brid.log("Load Related");var e,t=this.player.config;return this.player.currentSource.id&&t.Partner&&t.Partner.id?(e=t.Url.service+t.Url.app+t.Url.dynamic+"tagid/"+this.player.currentSource.id+"/"+t.Partner.id+"/1/10.json",void Brid.Loader.loadText(e,BUtil.$f(this,this.onRelatedLoad),BUtil.$f(this,this.onError))):void this.onError()},createElement:function ri(){return ri.base.call(this,"div",{className:"brid-related",innerHTML:"<p>SHARE THE VIDEO YOU JUST WATCHED</p>"})},onError:function(){this.addClass("norelated"),this.addShare("large")},addShare:function(e){var t={},i="";switch(e){case"small":t=this.player.currentSource,i="Mini";break;default:t={},this.fadeIn()}t.name=i+"Facebook",this.facebook=new Brid[t.name](this.player,t),t.name=i+"Twitter",this.twitter=new Brid[t.name](this.player,t),t.name=i+"GooglePlus",this.googlePlus=new Brid[t.name](this.player,t),t.name=i+"Reddit",this.reddit=new Brid[t.name](this.player,t),this.relatedShareHolder.addChild(this.facebook),this.relatedShareHolder.addChild(this.twitter),this.relatedShareHolder.addChild(this.googlePlus),this.relatedShareHolder.addChild(this.reddit)},onRelatedLoad:function(e){this.parseRelated(JSON.parse(e||"{}"))},parseRelated:function(e){if(this.player.related=[],"undefined"==typeof e.Video)return Brid.error("--- Brid Player Error. RELATED VIDEOS PARSE FAILED ----"),void this.onError();if(e.Video.error)return void this.onError();try{e.Video instanceof Array?this.player.related=e.Video:this.player.related[0]=e.Video}catch(t){return Brid.error("--- Brid Player Error. RELATED VIDEOS PARSE FAILED ----",t),void this.onError()}this.relatedHolder=new Brid.RelatedHolder(this.player);for(var i=this.player.related.length,n=0;i>n;)if(this.player.related[n].error||this.player.related[n].intro_video){if(this.player.related.splice(n,1),i--,this.player.related.length<=0)return this.addClass("norelated"),void this.addShare("large")}else n++;i=this.player.related.length,this.addShare("small"),this.addChild(this.relatedHolder);for(var s=0;i>s;s++){this.player.related[s].title=this.player.related[s].name,this.player.related[s].poster=this.player.related[s].image;var r={name:"Related"+s,video:this.player.related[s]},o=new Brid.RelatedVideo(this.player,r);this.relatedHolder.addChild(o),o.checkIfOffScreen()}this.fadeIn()}}),Brid.RelatedShareHolder=BSprite.extend({createElement:function oi(){return oi.base.call(this,"div",{className:"related-share-holder"})}}),Brid.RelatedHolder=Brid.RelatedVideo=BSprite.extend({createElement:function ai(){return ai.base.call(this,"div",{className:"related-holder",innerHTML:'<div class="related-title">RELATED CONTENT</div>'})}}),Brid.RelatedVideo=BSprite.extend({init:function li(e,t){li.base.call(this,e,t),this.add("mouseover",this.$f(this.onMouseOver)),this.add("mouseout",this.$f(this.onMouseOut)),this.add("click",this.$f(this.onClick)),this.el.appendChild(BUtil.createElement("img",{className:"thumb",src:this.config.video.poster})),this.el.appendChild(BUtil.createElement("div",{className:"title",innerHTML:BUtil.safeTrunc(this.config.video.title,30)})),this.el.appendChild(BUtil.createElement("div",{className:"duration",innerHTML:BUtil.formatTime(this.config.video.duration)}));var i={name:"ThumbnailOverlay"};this.play=new Brid.ThumbnailOverlay(e,i),this.addChild(this.play),this.onPlayerResize(),e.add("playerresize",this.$f(this.onPlayerResize))},createElement:function hi(){return hi.base.call(this,"div",{className:"related-element"})},onMouseOver:function(){this.addClass("over")},onMouseOut:function(){this.removeClass("over")},onClick:function(){this.player.src(this.config.video),this.player.trigger("newContent"),this.player.start()},onPlayerResize:function(){var e,t=this.player.el.offsetWidth,i=16/9,n=(t-10)/3-10;n=130>n?130:n,e=n/i,this.el.style.width=Math.floor(n)+"px",this.el.style.height=Math.floor(e)+"px",this.checkIfOffScreen()},checkIfOffScreen:function(){var e=Brid.findPosY(this.el),t=this.el.offsetHeight,i=e+t+10,n=Brid.findPosY(this.player.el),s=n+this.player.el.offsetHeight;Brid.log("posY",e,"h",t,"b",i,"playerPosY",n,"playerB",s),this.el.style.visibility=i>s?"hidden":"visible"}}),Brid.MiniFacebook=BButton.extend({init:function di(e,t){di.base.call(this,e,t),this.resetSkin(),e.add("playerresize",this.$f(this.onPlayerResize)),setTimeout(this.$f(function(){this.onPlayerResize()}),100)},appendClassName:function ci(){return"brid-mini-facebook brid-panels "+ci.base.call(this)},resetSkin:function(){BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.Facebook&&(this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.Facebook,this.player.id))},onClick:function(){var e;e="player"!=this.player.config.share||this.player.externalVideo?BUtil.getEmbededUrl()+"#brid_fb_"+this.player.id:(BUtil.isDev()?"http://dev.":"https://")+"btv.social/"+this.config.id+"_"+this.player.config.id+"/#fb",e=encodeURIComponent(e);var t="http://www.facebook.com/sharer/sharer.php?u="+e+"&title="+this.config.title+"&summary="+this.config.description;window.open(t,"PopUpWindow","width=650,height=440,toolbar=no,scrollbars=yes"),this.player.trigger("socialshare","facebook")},onPlayerResize:function(){this.rescale(!1,400)}}),Brid.MiniTwitter=BButton.extend({init:function ui(e,t){ui.base.call(this,e,t),this.resetSkin(),e.add("playerresize",this.$f(this.onPlayerResize)),setTimeout(this.$f(function(){this.onPlayerResize()}),100)},appendClassName:function fi(){return"brid-mini-twitter brid-panels "+fi.base.call(this)},resetSkin:function(){BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.Twitter&&(this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.Twitter,this.player.id))},onClick:function(){var e;e="player"!=this.player.config.share||this.player.externalVideo?BUtil.getEmbededUrl()+"#brid_tw_"+this.player.id:(BUtil.isDev()?"http://dev.":"https://")+"btv.social/"+this.config.id+"_"+this.player.config.id+"/#tw",e=encodeURIComponent(e);var t="http://twitter.com/home?status="+this.config.title+": "+e;window.open(t,"PopUpWindow","width=680,height=300,toolbar=no,scrollbars=yes"),this.player.trigger("socialshare","twitter")},onPlayerResize:function(){this.rescale(!1,400)}}),Brid.MiniGooglePlus=BButton.extend({init:function pi(e,t){pi.base.call(this,e,t),this.resetSkin(),e.add("playerresize",this.$f(this.onPlayerResize)),setTimeout(this.$f(function(){this.onPlayerResize()}),100)},appendClassName:function gi(){return"brid-mini-googleplus brid-panels "+gi.base.call(this)},resetSkin:function(){BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.GooglePlus&&(this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.GooglePlus,this.player.id))},onClick:function(){var e;e="player"==this.player.config.share?(BUtil.isDev()?"http://dev.":"https://")+"btv.social/"+this.config.id+"_"+this.player.config.id+"/#gp":BUtil.getEmbededUrl()+"#brid_gp_"+this.player.id;var t="https://plus.google.com/share?hl=en&url="+e;window.open(t,"PopUpWindow","width=500,height=320,toolbar=no,scrollbars=yes"),this.player.trigger("socialshare","googleplus")},onPlayerResize:function(){this.player.el.offsetWidth<=400?(this.el.style.width=this.newW+"px",this.el.style.height=this.newH+"px",this.setSVGSize(this.newW,this.newH)):(this.el.style.width=this.oldW+"px",this.el.style.height=this.oldH+"px",this.setSVGSize(this.oldW,this.oldH))}}),Brid.MiniReddit=BButton.extend({init:function mi(e,t){mi.base.call(this,e,t),this.resetSkin(),e.add("playerresize",this.$f(this.onPlayerResize)),setTimeout(this.$f(function(){this.onPlayerResize()}),100)},appendClassName:function yi(){return"brid-mini-reddit brid-panels "+yi.base.call(this)},resetSkin:function(){BUtil.canUseVector()&&"undefined"!=typeof this.player.config.Skin.Reddit&&(this.el.innerHTML=BUtil.generateSVG(this.player.config.Skin.Reddit,this.player.id))},onClick:function(){var e;e="player"!=this.player.config.share||this.player.externalVideo?BUtil.getEmbededUrl()+"#brid_rd_"+this.player.id:(BUtil.isDev()?"http://dev.":"https://")+"btv.social/"+this.config.id+"_"+this.player.config.id+"/#rd",e=encodeURIComponent(e);var t="http://www.reddit.com/submit?title= "+this.config.title+"&text="+this.config.description+"&url="+e;window.open(t,"PopUpWindow","width=650,height=440,toolbar=no,scrollbars=yes"),this.player.trigger("socialshare","reddit")},onPlayerResize:function(){this.rescale(!1,400)}}),Brid.Branding=BButton.extend({init:function vi(e,t){vi.base.call(this,e,t),Brid.log("Branding init"),BUtil.merge(this.config,e.config.branding),this.el.style.opacity=0,this.fIT=new Brid.Tweener.Tween(this).to({opacity:.6},600).easing(Brid.Tweener.Easing.Quadratic.Out),this.outT=new Brid.Tweener.Tween(this).to({opacity:.6},400).easing(Brid.Tweener.Easing.Quintic.In),this.config.img&&this.createImageElement(),this.el.style.top=0==this.config.pos||1==this.config.pos?"10px":"auto",this.el.style.left=0==this.config.pos||2==this.config.pos?"10px":"auto",this.el.style.right=1==this.config.pos||3==this.config.pos?"10px":"auto",this.el.style.bottom=2==this.config.pos||3==this.config.pos?this.getBottom():"auto",e.addOnce("ready",this.$f(this.onPlayerReady)),e.add("playerresize",this.$f(this.onPlayerResize)),this.fadeOut()},isBottom:function(){return 2==this.config.pos||3==this.config.pos},getBottom:function(){return this.player.controls.el.offsetHeight+15+"px"},fadeIn:function bi(){bi.base.call(this),this.fIn=Brid.Tweener.tween(this,600,{bottom:this.getBottom()},Brid.Tweener.Easing.Quintic.Out)},fadeOut:function Bi(){return this.isBottom()?void Brid.Tweener.tween(this,600,{bottom:"15px"},Brid.Tweener.Easing.Quintic.Out):void Bi.base.call(this)},appendClassName:function wi(){return"brid-branding "+wi.base.call(this)},onPlayerReady:function(){1==this.config.pos&&"ogv"==this.player.techName&&this.player.config.autoplay&&(this.el.style.right="40px"),this.fadeIn(),this.player.add("enableInteraction",this.$f(this.onEnableControls)),this.player.add("disableInteraction",this.$f(this.onDisableControls)),this.player.add(["beforeStart","start"],this.$f(this.onNewContent))},onNewContent:function(){Brid.log("Branding onNewContent"),this.toggleFadeInOut(!1),this.onEnableControls()},toggleFadeInOut:function(e){Brid.log("Branding toggleFadeInOut",e);var t=e?"add":"remove";this.listenersState!=e&&(this.listenersState=e,this.player[t]("show",this.$f(this.fadeIn)),this.player[t]("hide",this.$f(this.fadeOut)))},onEnableControls:function(){Brid.log("Branding onEnableControls"),this.fadeIn(),this.isBottom()&&("visible"==this.player.config.controlsBehavior&&this.player.officialTech()||this.toggleFadeInOut(!0))},onDisableControls:function(){Brid.log("Branding onDisableControls"),this.fOT.start(),this.isBottom()&&("visible"==this.player.config.controlsBehavior&&this.player.officialTech()||this.toggleFadeInOut(!1))},createImageElement:function(){this.image=BUtil.createElement("img",{src:this.config.img,alt:this.config.alt}),this.image.onload=this.$f(this.onImageLoad),this.el.appendChild(this.image)},onImageLoad:function(){Brid.log("this.image.offsetWidth",this.image.offsetWidth),Brid.log("this.image.offsetHeight",this.image.offsetHeight),this.el.style.width=this.image.offsetWidth+"px",this.el.style.height=this.image.offsetHeight+"px"},onClick:function(){this.config.url&&window.open(this.config.url,"_blank")},onPlayerResize:function(e){this.rescale(e,400),this.onImageLoad(),this.visibility?this.show():this.hide()}}),Brid.Player=BSprite.extend({init:function(e,t,i){Brid.log("Init Brid Player Version: ",VERSION);var n,s=this.el=e,r=(t.width||480)+"",o=(t.height||320)+"";this.skinClass=t.className?t.className:t.Skin.Style?t.Skin.Style.skinClass:t.Style.skinClass,!BUtil.isMobilePlatform()||!t.autoplay||BUtil.isIPhone()&&t.play_in_page||(t.autoplay=!1,(!BUtil.isIPhone()||t.iAutoplay)&&Brid.event.add(document,"touchend",this.$f(this.doAutoplay,s.id),!0)),t.showOnPreroll&&t.autoplay&&(Brid.log("showOnPreroll hide player "),s.style.opacity=0),this.children=[],this.videos=[],this.tag=n=BUtil.createElement("video"),n.player=s.player=this,this.ready(i),s.appendChild(n),n.id=this.id=s.id,n.id+="_html5",n.className="brid-tech",s.className+=" "+this.skinClass,BUtil.hasTouch()&&(s.className+=" brid-touch"),Brid.players[s.id]=this,Brid.log("Player Init width",r,"height",o),s.style.width=-1!=r.indexOf("%")||-1!=r.indexOf("px")?r:r+"px",s.style.height=-1!=o.indexOf("%")||-1!=o.indexOf("px")?o:o+"px",Brid.log("Player Init el.style.width",s.style.width,"el.style.height",s.style.height),this.originalWidth=parseFloat(Brid.Util.getStyle(this.el,"width",!0)),this.originalHeight=parseFloat(Brid.Util.getStyle(this.el,"height",!0)),this.config=t,Brid.log("config ID",t.id),this.send("setConfig",[JSON.stringify(this.config)]);for(var a=0;a<t.Plugin.length;a++)Brid.log("config.Plugin[j].id",t.Plugin[a].id+"-",window["$"+t.Plugin[a].id]),window["$"+t.Plugin[a].id]&&window["$"+t.Plugin[a].id].setup(s.id);"undefined"==typeof this.config.controls||this.config.controls||(this.config.children.controls=null,this.config.children.progressControl=null),"undefined"==typeof this.config.shareScreen||this.config.shareScreen||(this.config.children.openShare=null,this.config.children.shareScreen=null),"undefined"==typeof this.config.playlistScreen||this.config.playlistScreen||(this.config.children.openPlaylist=null,this.config.children.playlistScreen=null),this.config.branding||(this.config.children.branding=null),this.isPlaying=!1,this.addClass("brid-paused"),this.values={playing:!1,currentTime:0,agPassed:!1,hd:!1},this.config.play_in_page&&BUtil.isIPhone()&&(-1==this.config.techOrder.indexOf("ogv")?this.config.techOrder.unshift("ogv"):this.config.techOrder.move(this.config.techOrder.indexOf("ogv"),0)),this.add("loadstart",this.$f(this.onStartLoad)),this.add("play",this.$f(this.onPlay)),this.add("pause",this.$f(this.onPause)),this.add("progress",this.$f(this.onProgress)),this.add("error",this.$f(this.onError)),this.add("enableInteraction",this.$f(this.onEnableInteraction)),this.add("userInteraction",this.$f(this.onUserInteraction)),this.add(["adStart","vpaidStart"],this.$f(this.onAdStarted)),this.add("adEnd",this.$f(this.onAdEnded)),this.add("adError",this.$f(this.onAdError)),this.add("adError",this.$f(this.onAdError)),this.add("qualityChange",this.$f(this.onQualityChange)),this.add("durationChange",this.$f(this.onDurationChange)),this.add("focusin",this.$f(function(){Brid.log("FOCUS ON PLAYER")})),this.add("focusout",this.$f(function(){Brid.log("FOCUS OUT PLAYER")})),Brid.event.add(window,"orientationchange",this.$f(this.onOrientationChange)),Brid.event.add(window,"resize",BUtil.throttle(this.$f(this.onResize),250,this)),this.add("fullscreenchange",this.$f(this.onFullscreenChange)),this.ready(function(){Brid.XD.receiveMessage(this.$f(this.receive),"*"),this.config.autoplay&&this.officialTech()?this.doAutoplay():this.config.autoplay||(setTimeout(this.$f(function(){this.config.showOnPreroll&&(this.hasPreroll||(this.trigger("adError"),this.destroy()))}),100),this.trigger("showPoster"))}),Brid.log("Brid Core Ready"),this.initObjects(),this.onResize(!0),this.playerReady=!0,Brid.isReady||this.dispatchAPIReady()},values:{},currentIndex:0,playlistLength:0,videos:[],currentSource:{},inFocus:!1,canUseVector:!1,HDToggle:!1,resumeplay:!1,hasPreroll:!1,hasPostroll:!1,advertising:!1,userInteracted:!1,adsManager:null,adInProgress:!1,lastSecondDispatched:!1,ageGate:null,playerReady:!1,isFullScreen:!1,resetDuration:!0,attempt:0,externalVideo:!1,hasHLS:!1,newContent:!0,receive:function(e){if(!this.getAdInProgress()){var t=e.data.split("|");this[t[1]]&&this[t[1]](t[2]?t[2]:null)}},send:function(e,t){if(BUtil.inIFrame()){var i,n=this.config.Partner.id,s=this.config.autoplay,r="",o=1==this.playlistLength?1:50;this.config.playlist?"string"==typeof this.config.playlist?i=this.config.playlist:(i=this.config.playlist.id,o=this.config.playlist.items):this.config.video&&"string"==typeof this.config.video&&(i=this.config.video,o=1);for(var a=i+"-"+n+"-"+this.config.id+"-"+(s?"1":"0")+"-"+o,l=0,h=t.length;h>l;l++)r+="|"+t[l];Brid.XD.postMessage(a+"|"+e+r,"*")}},getVersion:function(){return VERSION},checkReady:function(){this.send("trigger",["ready"])},dispatchAPIReady:function(){Brid.log("dispatchAPIReady"),document.APIReadyDispatched=!0,Brid.isReady=!0,document.BridAPIReady&&document.BridAPIReady()},trigger:function Si(e,t,i){var n;return n="string"==typeof e?e:e.type,this.send("trigger",[n]),Si.base.call(this,e,t,i)},playAd:function(e){Brid.log("Player playAd",e),this.getAdInProgress()||("string"==typeof e&&-1!=e.indexOf("{")&&(e=JSON.parse(e)),this.adsManager&&(this.relatedScreen&&(this.removeChild(this.relatedScreen),this.relatedScreen=null),this.adsManager.playAd(e)))},setAd:function(e,t){"string"==typeof e&&-1!=e.indexOf("{")&&(e=JSON.parse(e)),this.adsManager&&this.adsManager.setAd(e,t)},changeSkin:function(e){var t=this.config.Url.service+this.config.Url.app+this.config.Url.skin+e+".json";Brid.Loader.loadText(t,BUtil.$f(this,this.onSkinLoad),BUtil.$f(this,this.onError))},loadPlaylist:function(e){this.assets.loadPlaylist(e)},onSkinLoad:function(e){Brid.log("onSkinLoad",this.skinClass),this.hide();var t=document.getElementsByClassName("bridload"),i=this.config,n=this.el.className;Brid.log("onSkinLoad old styles",t);for(var s=0,r=t.length;r>s;s++)("STYLE"===t[s].tagName||"LINK"===t[s].tagName)&&(t[s].parentNode.removeChild(t[s]),s--,r--);n=n.replace(this.skinClass,""),e&&(i=BUtil.merge(i,JSON.parse(e||"{}"))),this.skinClass=i.Skin.Style?i.Skin.Style.skinClass:i.Style.skinClass,this.el.className=n+" "+this.skinClass+" ",Brid.log("onSkinLoad loadCSS"),this.assets.loadCSS(!0)},showMessage:function(e){this.message=new Brid.DialogContent(this,{name:"DialogContent"}),this.message.el.innerHTML=e,this.addChild(this.message)},manualProgressOn:function(){this.manualProgress=!0,this.bufferedPercent()<1&&this.add("play",this.$f(this.trackProgress)),this.tech.add("progress",function(){Brid.event.remove(this,"progress",arguments.callee),this.support.progressEvent=!0,this.player.manualProgressOff()})},stopTrackingProgress:function(){clearInterval(this.progressInterval),this.progressInterval=null},manualProgressOff:function(){this.manualProgress=!1,this.stopTrackingProgress(),this.remove("play",this.$f(this.trackProgress))},trackProgress:function(){this.progressInterval||(this.progressInterval=setInterval(BUtil.$f(this,function(){this.values.bufferEnd<this.buffered().end()?this.trigger("progress"):1==this.bufferedPercent()&&(this.stopTrackingProgress(),this.trigger("progress"))}),500))},manualTimeUpdatesOn:function(){this.manualTimeUpdates=!0,this.remove("play",this.$f(this.trackCurrentTime)),this.remove("pause",this.$f(this.stopTrackingCurrentTime)),this.add("play",this.$f(this.trackCurrentTime)),this.add("pause",this.$f(this.stopTrackingCurrentTime)),this.tech.add("timeupdate",function(){Brid.event.remove(this,"timeupdate",arguments.callee),this.player&&(this.player.tech.support.timeupdateEvent=!0,this.player.manualTimeUpdatesOff())})},manualTimeUpdatesOff:function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.remove("play",this.$f(this.trackCurrentTime)),this.remove("pause",this.$f(this.stopTrackingCurrentTime))},trackCurrentTime:function(){this.currentTimeInterval||(this.currentTimeInterval=setInterval(this.$f(function(){this.trigger("timeupdate")}),500))},stopTrackingCurrentTime:function(){clearInterval(this.currentTimeInterval),this.currentTimeInterval=null},showRelated:function(){this.relatedScreen=new Brid.Related(this),this.addChild(this.relatedScreen)},onAdStarted:function(e){Brid.log("onAdStarted",e),this.config.showOnPreroll&&(this.el.style.opacity=1),this.config.freqCap&&Brid.Util.setLocalStorage(this.config.id+"_cap","1",60*this.config.freqCap*60*1e3),this.resetDuration=!0,this.remove("ended",this.$f(this.onEnded))},onAdEnded:function(){Brid.log("Player onAdEnded"),this.isPostroll&&this.onPostollEnd(),this.resetDuration=!0,this.remove("ended",this.$f(this.onEnded)),this.add("ended",this.$f(this.onEnded))},onAdError:function(){this.resetDuration=!0,this.config.showOnPreroll&&this.destroy()},onEnded:function(){if(Brid.log("Player onEnded"),this.remove("ended",this.$f(this.onEnded)),this.isPlaying=!1,this.send("setEnded",["true"]),Brid.log("this.hasPostroll",this.hasPostroll),this.isNextQueued())return this.hasPostroll?void(this.isPostroll=!0):void this.next(!0);if(this.videos[this.currentIndex].intro_video)return void this.next(!0);if(this.tech.isReady){if(this.hasPostroll)return void(this.isPostroll=!0);Brid.log("onEnded ",this.config.videoPlayback,this.relatedScreen),"startScreen"==this.config.videoPlayback?this.trigger("showPoster"):"endFrame"!=this.config.videoPlayback||this.relatedScreen||this.showRelated()}},onPostollEnd:function(){Brid.log("onPostollEnd",this.config.videoPlayback,this.relatedScreen),this.isPostroll=!1,this.isNextQueued()?this.next(!0):"endFrame"!=this.config.videoPlayback||this.relatedScreen?"startScreen"==this.config.videoPlayback&&this.trigger("showPoster"):this.showRelated()},onStartLoad:function(){},onPlay:function(){Brid.log("onPlay this.isPlaying",this.isPlaying),BUtil.removeClass(this.el,"brid-paused"),BUtil.addClass(this.el,"brid-playing"),this.isPlaying||this.getAdInProgress()||(this.resetDuration=!0,this.isPlaying=!0,this.remove("ended",this.$f(this.onEnded)),this.add("ended",this.$f(this.onEnded)),this.trigger("start"),this.promptFullScreenHD(),this.setDefaultVolume())},onPause:function(){BUtil.removeClass(this.el,"brid-playing"),BUtil.addClass(this.el,"brid-paused")},onProgress:function(){1==this.bufferedPercent()&&this.trigger("loadedalldata")},onError:function(e){this.isPlaying=!1,Brid.error("--- BridPlayer --- Video Error",e),this.showMessage("VIDEO ERROR")},techCall:function(e,t){var i=this.tech;if(i)if(i.isReady)try{i[e](t)}catch(n){Brid.error(n)}else i.ready(function(){this[e](t)})},techGet:function(e,t){var i=this.tech;if(i&&i.isReady)try{return i[e](t)}catch(n){i[e]===undefined?Brid.warn("--- BridPlayer --- "+e+" method not defined for "+this.techName+" playback technology.",n):"TypeError"==n.name?Brid.error("--- BridPlayer --- "+e+" unavailable on "+this.techName+" playback technology element.",n):Brid.warn(n)}},load:function(){return Brid.log("load"),this.add("loadedmetadata",this.$f(this.loadedMetadata)),this.techCall("load"),this},loadedMetadata:function(){Brid.log("loadedMetadata"),this.remove("loadedmetadata",this.$f(this.loadedMetadata)),BUtil.isMobilePlatform()&&(this.hasPreroll||this.play(),this.trigger("beforeStart")),this.resetDuration=!0,this.send("duration",[this.duration()])},togglePlay:function(){return this.currentSource.error?void 0:(Brid.log("this.isPlaying",this.isPlaying,"this.ended()",this.ended(),"this.paused()",this.paused()),this.getAdInProgress()?void this.adsManager.togglePlay():void(!this.isPlaying&&this.ended()?(Brid.log("replay video"),this.remove("ended",this.$f(this.onEnded)),this.src(this.currentSource),this.newContent=!0,this.trigger("newContent"),this.start()):this.isPlaying?this.paused()&&this.isPlaying?(this.play(),Brid.log("this.play ")):(this.pause(),Brid.log("this.pause ")):this.start()))},doAutoplay:function(e){return e&&Brid.event.remove(document,"touchend",this.$f(this.doAutoplay,this.el.id),!0),this.newContent=!0,Brid.log("AUTOPLAY"),this.trigger("userInteraction"),this.trigger("newContent"),this.config.showOnPreroll&&!this.hasPreroll?(this.trigger("adError"),void this.destroy()):void this.start()},checkAgeGate:function(){BUtil.getLocalStorage("bridBirthDate")?(this.values.birthDay=BUtil.getLocalStorage("bridBirthDate"),this.values.age=BUtil.getAge(this.values.birthDay),this.onAgeSave()):this.ageGate||(this.ageGate=new Brid.AgeGate(this),this.ageGate.add("save",this.$f(this.onAgeSave)),this.addChild(this.ageGate))
},onAgeSave:function(){var e;switch(this.currentSource.age_gate_id){case"2":e=17;break;case"3":e=18}BUtil.setLocalStorage("bridBirthDate",this.values.birthDay),Brid.log("this.currentSource.agPassed",e,this.values.age),e<=this.values.age?(this.currentSource.agPassed=!0,this.start()):(this.ageGate||(this.ageGate=new Brid.AgeGate(this),this.addChild(this.ageGate)),this.ageGate.ban())},start:function(){return Brid.log("START this.hasPreroll ",this.hasPreroll),this.trigger("firstPlay"),this.relatedScreen&&(this.removeChild(this.relatedScreen),this.relatedScreen=null),this.currentSource.age_gate_id&&"1"!=this.currentSource.age_gate_id&&!this.currentSource.agPassed?void this.checkAgeGate():(this.currentSource.agPassed=!0,void(this.currentSource.agPassed&&(this.ageGate&&(this.removeChild(this.ageGate),this.ageGate=null),"flash"==this.techName&&this.techCall("setModelData"),this.send("setEnded",["false"]),this.lastSecondDispatched=!1,this.resetDuration=!0,BUtil.isIPhone()&&"html5"==this.techName&&(BUtil.setStyle(this.tag,{"-webkit-transform":"translateX(0)"}),this.toggleFullScreen(!0)),this.newContent=!1,BUtil.isMobilePlatform()?(this.load(),(BUtil.isFF()||"ogv"==this.techName)&&this.play()):this.hasPreroll&&!this.tech.support.adManagement?this.trigger("beforeStart"):(this.load(),this.trigger("beforeStart"),this.play()))))},play:function(){return Brid.log("play",this.newContent),this.newContent?void this.start():(this.getAdInProgress()&&this.adsManager.togglePlay(),!this.currentSource.age_gate_id||"1"==this.currentSource.age_gate_id||this.currentSource.agPassed?(this.techCall("play"),this):void 0)},pause:function(){return this.getAdInProgress()&&this.adsManager.togglePlay(),this.techCall("pause"),this},stop:function(){return Brid.log("player stop isPlaying",this.isPlaying),this.isPlaying&&!this.getAdInProgress()?(this.currentTime(0),this.pause(),this.officialTech()?this.techCall("stop"):(this.unloadTech(),this.src(this.currentSource)),this.trigger("stopped"),this.isPlaying=!1,this):void 0},next:function(e){var t=this.currentIndex+1;if(this.isPlaying=!1,t>=this.playlistLength&&"loop"==this.config.afterPlaylistEnd)t=0;else if(t>=this.playlistLength&&"loop"!=this.config.afterPlaylistEnd)return;this.playByIndex(t,e)},previous:function(){var e=this.currentIndex-1;if(this.isPlaying=!1,0>e&&"loop"==this.config.afterPlaylistEnd)e=this.playlistLength-1;else if(0>e&&"loop"!=this.config.afterPlaylistEnd)return;this.playByIndex(e)},paused:function(){return this.techGet("paused")!==!1},currentTime:function(e){if(!this.currentSource.error){if(this.getAdInProgress()){var t=this.adsManager.currentTime();return 0>t?0:t}if(e!==undefined)return this.lastSecondDispatched=!1,this.values.lastSetCurrentTime=e,this.techCall("setCurrentTime",e),this.trigger("timeupdate"),this;var i=this.values.currentTime=this.techGet("currentTime")||0,n=this.duration();return i=i>0?i:0,this.send("currentTime",[i]),n>0&&1>=n-i&&!this.lastSecondDispatched&&this.isPlaying&&(this.lastSecondDispatched=!0,this.trigger("lastSecond")),i}},duration:function(){return this.resetDuration&&(this.values.duration=this.getAdInProgress()?this.adsManager.duration():this.techGet("duration")||0,this.values.duration>0?this.resetDuration=!1:this.values.duration=0),this.values.duration},buffered:function(){var e=this.techGet("buffered"),t=this.values.bufferStart=this.values.bufferStart||0,i=this.values.bufferEnd=this.values.bufferEnd||0,n=this.currentTime();if(e&&e.length>0)for(var s=0,r=e.length;r>s;s++)if(n>=e.start(s)&&n<=e.end(s)&&(t!=e.start(s)||i!=e.end(s))){this.values.bufferEnd=i=e.end(s),this.values.bufferStart=t=e.start(s);break}return BUtil.createTimeRange(t,i)},bufferedPercent:function(){return this.values.duration?this.buffered().end()/this.values.duration:0},bufferedStart:function(){return this.values.duration?this.buffered().start()/this.values.duration:0},setDefaultVolume:function(){if(Brid.log("setDefaultVolume"),BUtil.hasTouch())this.volume(1);else{var e,t,i=parseFloat(BUtil.getLocalStorage(this.config.id+"_volume"));e="volume"in this.values?this.values.volume:i,t="mute"in this.values?this.values.mute:0==i,("undefined"==typeof e||isNaN(e))&&(e=.5),("undefined"==typeof t||isNaN(t))&&(t=!1),t=!(1!=t),this.volume(e),this.muted(t)}},volume:function(e){var t;return e!==undefined?(t=Math.max(0,Math.min(1,parseFloat(e))),this.values.volume=t,this.techCall("setVolume",t),this.getAdInProgress()&&this.adsManager.volume(t),BUtil.setLocalStorage(this.config.id+"_volume",t.toString()),this):this.getAdInProgress()?this.adsManager.volume():(t=parseFloat(this.techGet("volume")),this.send("volume",[t]),isNaN(t)?.5:t)},setVolume:function(e){this.volume(e)},getVolume:function(){return this.volume()},muted:function(e){return e!==undefined?(BUtil.setLocalStorage(this.config.id+"_muted",e?"1":"0"),this.values.mute=e,this.getAdInProgress()&&this.adsManager.volume(e?0:this.values.volume),this.techCall("setMuted",e),this):this.techGet("muted")||!1},supportsFullScreen:function(){return this.techGet("supportsFullScreen")||!1},toggleFullScreen:function(e){Brid.log("toggleFullScreen",e);var t=Brid.support.requestFullScreen;return this.isFullScreen=e,BUtil.isIOS()&&"html5"==this.techName?e?this.tech.el.webkitSupportsFullscreen&&(this.tech.el.webkitEnterFullscreen(),this.tech.add("webkitendfullscreen",this.$f(this.oniOSFullscreenEnd))):this.tech.el.webkitExitFullScreen():BUtil.isIOS()||!t||BUtil.isIE()&&BUtil.inIFrame()?this.tech.supportsFullScreen()?(Brid.log("Tech supports FullScreen"),e===!0?this.techCall("enterFullScreen"):e===!1&&this.techCall("exitFullScreen"),this.trigger("fullscreenchange"),this.onResize()):BUtil.inIFrame()?(Brid.log("Inside iFrame, go Full Window on iFrame"),this.send("toggleFullScreen",[e]),e?Brid.event.add(document,"keydown",this.$f(this.fullWindowOnEscKey)):Brid.event.remove(document,"keydown",this.$f(this.fullWindowOnEscKey)),this.trigger("fullscreenchange")):(Brid.log("No FullScreen Support, go Full Window"),this.toggleFullWindow(e),this.trigger("fullscreenchange"),this.onResize()):(Brid.log("Browser supports FullScreen"),"undefined"==typeof document[t.isFullScreen]&&(this.isFullScreen=e),e===!0?(Brid.event.add(document,t.eventName,this.$f(function(){"undefined"!=typeof document[t.isFullScreen]&&(this.isFullScreen=document[t.isFullScreen]),0==this.isFullScreen&&Brid.event.remove(document,t.eventName,arguments.callee),this.trigger("fullscreenchange"),this.onResize()})),this.el.webkitRequestFullScreen&&!BUtil.isSafari()?this.el.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):this.el[t.requestFn]()):e===!1&&document[t.cancelFn]()),this},toggleFullWindow:function(e){Brid.warn("--- BridPlayer --- toggleFullWindow: "+e),e===!0?(this.docOrigOverflow=document.documentElement.style.overflow,Brid.event.add(document,"keydown",this.$f(this.fullWindowOnEscKey)),document.documentElement.style.overflow="hidden",BUtil.addClass(document.body,"brid-full-window")):e===!1&&(document.documentElement.style.overflow=this.docOrigOverflow,Brid.event.remove(document,"keydown",this.fullWindowOnEscKey),BUtil.removeClass(document.body,"brid-full-window"))},fullWindowOnEscKey:function(e){this.isFullScreen&&27==e.keyCode&&this.toggleFullScreen(!1)},oniOSFullscreenEnd:function(){this.isFullScreen=!1,Brid.event.remove(this.tech.el,"webkitendfullscreen",this.$f(this.oniOSFullscreenEnd)),!this.getAdInProgress()&&BUtil.isIPad()&&(this.tempTime=this.currentTime(),this.stopTrackingCurrentTime(),this.trigger("stopTrackingTime"),this.add("loadedmetadata",this.$f(this.goToTime)),this.src(this.currentSource,!1),this.load(),this.play())},onFullscreenChange:function(){Brid.log("Player onFullscreenChange this.isFullScreen",this.isFullScreen),this.isFullScreen?this.addClass("brid-fs"):this.removeClass("brid-fs"),this.send("fullscreen",[this.isFullScreen]),this.promptFullScreenHD(),this.el.focus(),this.mouseOver(),this.onChangeInteraction(!0)},promptFullScreenHD:function(){this.HDAvailable()&&this.setHD(this.isFullScreen?!0:!1)},playByIndex:function(e,t){this.getAdInProgress()||(Brid.log("playByIndex",e,t),this.remove("ended",this.$f(this.onEnded)),this.trigger("skipped"),this.currentIndex=e,this.src(this.videos[e]),this.currentSource.error||(t||this.trigger("userInteraction"),this.newContent=!0,this.trigger("newContent"),Brid.log("this.userInteracted",this.userInteracted),BUtil.isMobilePlatform()&&!this.userInteracted&&this.hasPreroll||(this.tech.isReady?(Brid.log("playByIndex START now"),this.start()):this.resumeplay=!0)))},loadDefaultTech:function(){var e="html5",t=Brid[e];t.isSupported()&&this.loadTech(e)},loadTech:function(e,t){Brid.log("loadTech "+e+" "+t),this.tech?this.unloadTech():"html5"!=e&&this.tag&&(this.tag.parentNode==this.el&&this.el.removeChild(this.tag),this.tag=null),this.techName=e,this.isReady=!1;var i=function(){var e=this.player;Brid.log("Brid Tech Ready "+this.player.techName),this.player.onChangeInteraction(!0),e.send("setOfficialTech",[e.officialTech().toString()]),e.setDefaultVolume(),e.triggerReady(),this.support.progressEvent||e.manualProgress||e.manualProgressOn(),this.support.timeupdateEvent||e.manualTimeUpdates||e.manualTimeUpdatesOn(),e.officialTech()||e.mouseOut(),e.config.start_muted&&(e.config.start_muted=!1,e.volume(0),e.muted(!0)),e.resumeplay&&(Brid.log("techReady START now"),e.hasPreroll?setTimeout(BUtil.$f(this,function(){e.start()}),100):e.start(),e.resumeplay=!1)},n=BUtil.merge({source:t,parentEl:this.el},this.config[e]);t&&(t==this.values.src&&this.values.currentTime>0&&(n.startTime=this.values.currentTime),this.values.src=t.src),this.tech=new Brid[e](this,n),this.tech.ready(i)},unloadTech:function(){this.userInteracted=!1,this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),this.tech&&(this.tech.destroy(),this.tech=null),this.techName=""},destroy:function(){Brid.log("Player DESTROY!"),this.stopTrackingProgress(),this.stopTrackingCurrentTime(),Brid.players[this.id]=null,delete Brid.players[this.id],this.tech&&this.unloadTech(),Brid.event.remove(window,"orientationchange",this.$f(this.onOrientationChange)),Brid.event.remove(window,"resize",this.$f(this.onResize)),this.removeAll(),this.el.parentNode&&this.el.parentNode.removeChild(this.el)},selectSource:function(e){var t,i=this.config.techOrder,n=i.length;for(Brid.log("techs",i),t=0;n>t;t++){var s=i[t],r=Brid[s];if(Brid.log("techs 2",s),r.isSupported()&&r.canPlaySource.call(this,e))return{source:e,tech:s}}return!1},src:function(e,t,i){if(Brid.log("src source ",e),this.message&&(this.removeChild(this.message),this.message=null),Brid.Util.getChildByClass(this.el,"brid-dialog-content")&&this.el.removeChild(Brid.Util.getChildByClass(this.el,"brid-dialog-content")),!this.getAdInProgress()){if("string"==typeof e&&-1!=e.indexOf("{")&&(e=JSON.parse(e)),t||(this.isPlaying=!1),e instanceof Object){var n,s;if(e.error)return this.currentSource=e,this.loadDefaultTech(),void setTimeout(this.$f(function(){this.trigger("playbackerror"),this.showMessage(e.title||e.description)}),100);if((!e.src||i)&&(Brid.log("source.poster",e.poster),this.config.poster=e.poster,this.config.tracks=e.tracks,this.config.tracks&&this.config.tracks.length>0&&this.addTextTracks&&this.addTextTracks(this.config.tracks),e.src=this.config.play_in_page&&BUtil.isIPhone()&&e.source.ogg?e.source.ogg:this.HDToggle&&e.source.hd?e.source.hd:this.config.autoplay&&this.el.offsetWidth<=320&&e.source.ld?e.source.ld:e.source.sd?e.source.sd:e.source.hd,e.type=BUtil.getTypeFromFile(e.src)),this.currentSource=e,n=this.selectSource(e),this.send("setCurrentSource",[JSON.stringify(e)]),n){var r=n.source.src;"flash"==n.tech&&e.rtmp&&(r=e.src=this.HDToggle&&e.rtmp.hd?e.rtmp.hd:this.config.autoplay&&this.el.offsetWidth<=320&&e.rtmp.ld?e.rtmp.ld:e.rtmp.sd?e.rtmp.sd:e.rtmp.hd),s=n.tech,Brid.log("techName "+s+" this.techName "+this.techName),s==this.techName?this.isReady?this.techCall("src",r):this.ready(function(){this.src(e)}):(this.values.src=r,this.loadTech(s,e))}else Brid.warn("--- BridPlayer --- No compatible source and playback technology were found."),this.loadDefaultTech(),setTimeout(this.$f(function(){this.trigger("playbackerror"),this.showMessage("UNSUPPORTED VIDEO FORMAT")}),100)}else{var o=e;e={},e.src=o,e.source={sd:o},e.type=BUtil.getTypeFromFile(e.src),this.src(e,!0)}return this}},currentSrc:function(){return this.techGet("currentSrc")||this.values.src||""},preload:function(e){return e!==undefined?(this.techCall("setPreload",e),this.config.preload=e,this):this.techGet("preload")},autoplay:function(e){return e!==undefined?(this.techCall("setAutoplay",e),this.config.autoplay=e,this):this.techGet("autoplay",e)},loop:function(e){return e!==undefined?(this.techCall("setLoop",e),this.config.loop=e,this):this.techGet("loop")},isHD:function(){var e;return e=this.officialTech()?this.currentSource.source||this.currentSource.rtmp?this.currentSource.src==this.currentSource.source.hd||this.currentSource.rtmp&&this.currentSource.src==this.currentSource.rtmp.hd:!1:this.techGet("isHD"),this.send("hd",[e]),e},setHD:function(e){return Brid.log("setHD",e,this.isHD()),!this.currentSource.error&&this.HDAvailable()&&e!=!!this.isHD()&&!this.getAdInProgress()&&this.isPlaying?(this.HDToggle=e,this.officialTech()?(this.tempTime=this.currentTime(),this.stopTrackingCurrentTime(),this.trigger("stopTrackingTime"),this.currentSource.src=null,this.add("loadedmetadata",this.$f(this.goToTime)),this.src(this.currentSource,!0),this.load(),void this.play()):this.techCall("setHD",e)):void 0},onQualityChange:function(){this.values.hd=this.isHD()},onDurationChange:function(){this.resetDuration=!0},goToTime:function(e){Brid.log("goToTime",this.tempTime),this.remove("loadedmetadata",this.$f(this.goToTime)),this.currentTime(this.tempTime),this.tech.support.timeupdateEvent||this.manualTimeUpdatesOn(),this.trigger("startTrackingTime"),e&&this.trigger("qualityChange")},HDAvailable:function(){return!this.currentSource.error&&this.currentSource.source?this.officialTech()?"flash"==this.techName&&this.currentSource.rtmp?!(!this.currentSource.rtmp.hd||!this.currentSource.rtmp.sd||this.currentSource.rtmp.hd==this.currentSource.rtmp.sd):!(!this.currentSource.source.hd||!this.currentSource.source.sd||this.currentSource.source.hd==this.currentSource.source.sd):this.techGet("HDAvailable"):!1},getAdInProgress:function(){return this.tech?this.tech.support.adManagement?this.techGet("adInProgress"):this.adInProgress:!1},mouseOver:function(){this.overTrigered||(this.trigger("show"),this.overTrigered=!0),clearTimeout(this.fadeoutTimer),this.fadeoutTimer=setTimeout(this.$f(function(){this.trigger("hide"),this.inFocus=!1,this.overTrigered=!1}),3e3)},mouseOut:function(){clearTimeout(this.fadeoutTimer),this.fadeoutTimer=setTimeout(this.$f(function(){this.trigger("hide"),this.inFocus=!1,this.overTrigered=!1}),1e3)},getFullScreen:function(){return this.isFullScreen},onEnableInteraction:function(){Brid.log("onEnableInteraction"),this.onChangeInteraction(!0)},onChangeInteraction:function(e){if(this.interactionEnabled!=e){this.interactionEnabled=e;var t=1==e?"add":"remove";e&&this.mouseOver(),BUtil.hasTouch()?this[t](["touchstart","touchmove"],this.$f(this.mouseOver)):(this[t](["mousemove","mouseover"],this.$f(this.mouseOver)),this[t]("mouseout",this.$f(this.mouseOut)))}},lockShow:function(){clearTimeout(this.fadeoutTimer),this.onChangeInteraction(!1)},unlockShow:function(){this.onChangeInteraction(!0)},onUserInteraction:function(){this.userInteracted=!0},calcVideoResolution:function(e,t){if(!this.el.parentNode)return{w:e,h:t};Brid.log("calcVideoResolution",e,t);var i,n,s,r=parseInt(BUtil.getStyle(this.el.parentNode,"padding-left",!0))||0,o=parseInt(BUtil.getStyle(this.el.parentNode,"padding-right",!0))||0,a=parseInt(BUtil.getStyle(this.el,"margin-left",!0))||0,l=parseInt(BUtil.getStyle(this.el,"margin-right",!0))||0;Brid.log("calcVideoResolution mL",a),Brid.log("calcVideoResolution mR",l);for(var h=this.el;h.parentNode;){if(h.parentNode.offsetWidth){s=h.parentNode.offsetWidth;break}h=h.parentNode}return Brid.log("calcVideoResolution vWidth",i),i=s-r-o-a-l,Brid.log("calcVideoResolution vWidth 1",i),i>e?{w:e,h:t}:(i=i>e?e:i,n=i*t/e,{w:Math.floor(i),h:Math.floor(n)})},onOrientationChange:function(){this.trigger("playerresize")},onResize:function(e){if(e){var t=this.calcVideoResolution(this.originalWidth,this.originalHeight);this.el.style.width=t.w+"px",this.el.style.height=t.h+"px"}this.trigger("playerresize")},officialTech:function(){return"html5"===this.techName||"flash"===this.techName||"ogv"===this.techName},isNextQueued:function(){return"continuous"==this.config.playlistPlayback&&(this.currentIndex<this.playlistLength-1||"loop"==this.config.afterPlaylistEnd)},addTech:function(e){-1==this.config.techOrder.indexOf(e)&&this.config.techOrder.push(e)},controls:function(){return this.config.controls},poster:function(){return this.techGet("poster")},error:function(){return this.techGet("error")},ended:function(){return this.techGet("ended")},networkState:function(){return this.techCall("networkState")},readyState:function(){return this.techCall("readyState")}}),function(){var e,t,i;i=document.createElement("div"),t={},i.cancelFullscreen!==undefined?(t.requestFn="requestFullscreen",t.cancelFn="exitFullscreen",t.eventName="fullscreenchange",t.isFullScreen="fullScreen"):(document.mozCancelFullScreen?(e="moz",t.isFullScreen=e+"FullScreen"):document.webkitCancelFullScreen?(e="webkit",t.isFullScreen=e+"IsFullScreen"):document.msExitFullscreen&&(e="ms",t.isFullScreen=undefined),i[e+"RequestFullScreen"]?(t.requestFn=e+"RequestFullScreen",t.cancelFn=e+"CancelFullScreen",t.eventName=e+"fullscreenchange"):i[e+"RequestFullscreen"]&&(t.requestFn=e+"RequestFullscreen","ms"!=e?(t.cancelFn=e+"CancelFullscreen",t.eventName=e+"fullscreenchange"):(t.cancelFn=e+"ExitFullscreen",t.eventName="MSFullscreenChange"))),document[t.cancelFn]&&(Brid.support.requestFullScreen=t)}(),function(){var e=document.createElement("div"),t=e.style,i=""===t.MozTransform?"MozTransform":""===t.MsTransform?"MsTransform":""===t.WebkitTransform?"WebkitTransform":""===t.OTransform?"OTransform":""===t.transform?"transform":!1,n=""===t.MozAnimation?{name:"MozAnimation",end:"animationend"}:""===t.MsAnimation?{name:"MsAnimation",end:"MSAnimationEnd"}:""===t.WebkitAnimation?{name:"WebkitAnimation",end:"webkitAnimationEnd"}:""===t.OAnimation?{name:"OAnimation",end:"oanimationend"}:""===t.animation?{name:"animation",end:"animationend"}:!1;Brid.support.transition=""===t.MozTransition?{name:"MozTransition",end:"transitionend"}:""===t.MsTransition?{name:"MsTransition",end:"msTransitionend"}:""===t.WebkitTransition?{name:"WebkitTransition",end:"webkitTransitionEnd"}:""===t.OTransition?{name:"OTransition",end:"oTransitionEnd"}:""===t.transition?{name:"transition",end:"transitionend"}:!1,Brid.support.transform=i,Brid.support.animation=n,Brid.support.transform.name&&(Brid.support.transformProp=Brid.support.transform.name.replace(/([A-Z])/g,"-$1").toLowerCase())}(),Brid.PlaybackTech=BSprite.extend({support:{},init:function Ti(e,t){Ti.base.call(this,e,t),this.add("click",this.$f(this.onClick))},onClick:function(){Brid.log("PlaybackTech onClick"),Brid.PlayToggle.prototype.onClick.call(this)}}),Brid.apiMethods="play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted".split(","),BUtil.each(Brid.apiMethods,function(e){Brid.PlaybackTech.prototype[e]=function(){throw new Error("--- BridPlayer --- The '"+e+"' method is not available on the playback technology's API")}}),Brid.html5=Brid.PlaybackTech.extend({init:function(e,t,i){this.player=e,this.el=this.createElement(),this.ready(i);var n=t.source;n&&(this.el.src=n.src),this.addClass("animate"),this.setupTriggers(),this.triggerReady()},destroy:function(){this.player.tag=!1,this.removeTriggers(),this.el.parentNode.removeChild(this.el)},createElement:function(){var e,t=this.player,i=t.tag;return i&&"VIDEO"==i.tagName||(e=BUtil.createElement("video",{id:t.el.id+"_html5",className:"brid-tech"}),i=e,BUtil.insertFirst(i,t.el)),i.autoplay=!1,i.preload="none",i.loop=!1,i.muted=!1,this.player.tag=i,BUtil.isIPhone()&&BUtil.setStyle(i,{"-webkit-transform":"translateX(1024px)"}),i},setupTriggers:function(){BUtil.each.call(this,Brid.html5.events,function(e){Brid.event.add(this.el,e,BUtil.$f(this.player,this.eventHandler))})},removeTriggers:function(){BUtil.each.call(this,Brid.html5.events,function(e){Brid.event.remove(this.el,e,BUtil.$f(this.player,this.eventHandler))})},eventHandler:function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,this.trigger(e)},play:function(){Brid.log("HTML5 Play"),this.el.play()},pause:function(){this.el.pause()},stop:function(){Brid.log("player html5 stop"),this.src(""),this.player.load(),this.player.src(this.player.currentSource)},paused:function(){return this.el.paused},currentTime:function(){return this.el.currentTime},setCurrentTime:function(e){try{this.el.currentTime=e}catch(t){Brid.log("--- BridPlayer --- Video isn't ready. ",t)}},duration:function(){return this.el.duration||0},buffered:function(){return this.el.buffered},volume:function(){return this.el.volume},setVolume:function(e){this.el.volume=e},muted:function(){return this.el.muted},setMuted:function(e){this.el.muted=e},width:function(){return this.el.offsetWidth},height:function(){return this.el.offsetHeight},supportsFullScreen:function(){return!1},src:function(e){this.el.src=e},load:function(){this.el.load()},currentSrc:function(){return this.el.currentSrc},preload:function(){return this.el.preload},setPreload:function(e){this.el.preload=e},autoplay:function(){return this.el.autoplay},setAutoplay:function(e){this.el.autoplay=e},loop:function(){return this.el.loop},setLoop:function(e){this.el.loop=e},error:function(){return this.el.error},networkState:function(){return this.el.networkState},readyState:function(){return this.el.readyState},seeking:function(){return this.el.seeking},ended:function(){return this.el.ended},controls:function(){return this.player.config.controls},defaultMuted:function(){return this.el.defaultMuted}}),Brid.html5.isSupported=function(){return!!document.createElement("video").canPlayType},Brid.html5.canPlaySource=function(e){var t=BUtil.formatType(e.src,e.type);return document.createElement("video").canPlayType?!!document.createElement("video").canPlayType(t):!1},Brid.html5.canPlayURL=function(e){var t=BUtil.getTypeFromFile(e);return document.createElement("video").canPlayType?!!document.createElement("video").canPlayType(t):!1},Brid.html5.events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange,webkitbeginfullscreen,webkitendfullscreen".split(","),Brid.html5.prototype.support={fullscreen:typeof BUtil.testVid.webkitEnterFullScreen!==undefined?BUtil.ua.match("Chrome")||BUtil.ua.match("Mac OS X 10.5")?!1:!0:!1,movingElementInDOM:!BUtil.isIOS(),progressEvent:!0,timeupdateEvent:!0,monetizable:!0,adManagement:!1,canResize:!0,hasPoster:!1},BUtil.isAndroid()&&BUtil.androidVersion()<3&&(document.createElement("video").constructor.prototype.canPlayType=function(e){return e&&-1!=e.toLowerCase().indexOf("video/mp4")?"maybe":""}),Brid.flash=Brid.PlaybackTech.extend({playCalled:!1,adProgress:!1,durationCache:0,init:function(e,t){this.player=e;var i=t.source,n=t.parentEl,s=this.el=BUtil.createElement("div",{id:n.id+"_temp_flash"}),r=e.el.id+"_flash_"+BUtil.flashID++,o=e.config,a="opaque",l=e.config.Url.cdn+"/"+e.config.Url.flash+"plugins/",h=BUtil.merge({readyFunction:"Brid.flash.onReady",eventProxyFunction:"Brid.flash.onEvent",errorEventProxyFunction:"Brid.flash.onError",autoplay:!!o.autoplay,preload:!!o.preload,poster:i.poster,loop:o.loop,muted:o.muted,monetize:o.monetize,showOnPreroll:!!o.showOnPreroll,premiumPartner:!!o.Partner.premium,configID:o.id,pluginsRoot:l,hasHLS:e.hasHLS,inCms:BUtil.isCms()},t.flashVars),d=BUtil.merge({wmode:a,bgcolor:"#000000",allowFullScreen:"true"},t.params),c=BUtil.merge({id:r,name:r,"class":"brid-tech"},t.attributes);i&&(h.src=BUtil.encodeUrl(BUtil.absolutizeUrl(i.src))),BUtil.insertFirst(s,n),t.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(t.startTime)});var u=e.config.Url.cdn+"/"+e.config.Url.flash+t.swf;e.tag=this.el=Brid.flash.embed(u,s,h,d,c),e.add("fullscreenchange",this.$f(this.onFullScreenChange)),e.add("end",this.$f(this.onEnd)),e.add("adInProgressChange",this.$f(this.onAdInProgressChange)),e.add("srcnotfound",this.$f(this.onSrcNotFound)),e.add("playbackerror",this.$f(this.onPlaybackError)),e.add("unsopportedformat",this.$f(this.unsupportedFormat)),BUtil.isSafari()&&e.add("showPoster",this.$f(this.onShowPoster)),e.add("techClick",this.$f(this.onClick))},onClick:function(){Brid.log("Flash Tech onClick"),Brid.PlayToggle.prototype.onClick.call(this)},elem:function(){return this.el&&this.el.parentNode?this.el:(BUtil.elById.cache[this.el.id]=null,this.el=BUtil.elById(this.el.id),this.el)},destroy:function(){this.elem().b_stop(),BUtil.removeSwf(this.elem()),this.el=null,this.player.remove("fullscreenchange",this.$f(this.onFullScreenChange)),this.player.remove("end",this.$f(this.onEnd)),this.player.remove("adInProgressChange",this.$f(this.onAdInProgressChange)),this.player.remove("showPoster",this.$f(this.onShowPoster)),this.player.remove("techClick",this.$f(this.onClick)),this.player.remove("srcnotfound",this.$f(this.onSrcNotFound)),this.player.remove("playbackerror",this.$f(this.onPlaybackError)),this.player.remove("unsopportedformat",this.$f(this.unsupportedFormat))},play:function(){this.playCalled=!0,this.elem().b_play()},pause:function(){this.elem().b_pause()},stop:function(){this.elem().b_stop()},playAd:function(e){this.elem().b_playAd(e)},src:function(e){Brid.log("FLASH src",e),e=BUtil.absolutizeUrl(e),this.elem().b_src(e),this.setModelData()},ads:function(e){Brid.log("Flash setAds"),this.elem().b_ads(e)},load:function(){this.canPlayThrough=!1,this.elem().b_load()},onShowPoster:function(){this.elem().b_showPoster&&this.elem().b_showPoster()},onEnd:function(){this.onFullScreenChange()},onFullScreenChange:function(){this.elem().b_fullScreenChange(this.player.isFullScreen)},poster:function(){this.elem().b_getProperty("poster")},onAdInProgressChange:function(e){this.adProgress=e.data},buffered:function(){var e=this.elem().b_getProperty("buffered");return Brid.Util.createTimeRange(0,e)},onSrcNotFound:function(){this.player.trigger("playbackerror"),this.player.showMessage("VIDEO FILE NOT FOUND")},onPlaybackError:function(){this.player.trigger("playbackerror"),this.player.showMessage("PLAYBACK ERROR")},unsupportedFormat:function(){this.player.trigger("playbackerror"),this.player.showMessage("FILE FORMAT NOT SUPPORTED")},adInProgress:function(){return this.adProgress},supportsFullScreen:function(){return!1},setModelData:function(){this.elem().b_setProperty("title",this.player.currentSource.title),this.elem().b_setProperty("videoID",this.player.currentSource.id),this.elem().b_setProperty("external_duration",this.player.currentSource.duration),this.elem().b_setProperty("poster",this.player.currentSource.poster)}}),function(){var e=Brid.flash.prototype,t="currentTime,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted,title,videoID".split(","),i="duration,ended,error,currentSrc,networkState,readyState,seeking,initialTime,startOffsetTime,loadedmetadata,paused,played,seekable,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(","),n=("load,play,pause,stop".split(","),function(t){var i=t.charAt(0).toUpperCase()+t.slice(1);e["set"+i]=function(e){return this.elem().b_setProperty(t,e)}}),s=function(t){e[t]=function(){return this.elem().b_getProperty(t)}};BUtil.each(t,function(e){s(e),n(e)}),BUtil.each(i,function(e){s(e)})}(),Brid.flash.isSupported=function(){return Brid.flash.version()[0]>=10},Brid.flash.prototype.support={formats:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/f4v","application/x-mpegurl","video/smil","video/f4m"],progressEvent:!1,timeupdateEvent:!1,fullscreenResize:!1,canResize:!0,monetizable:!0,adManagement:!0,hasPoster:BUtil.isSafari(),parentResize:!BUtil.ua.match("Firefox")},Brid.flash.canPlaySource=function(e){if(BUtil.isMobilePlatform())return!1;var t,i=BUtil.formatType(e.src,e.type);return t=Brid.flash.prototype.support.formats.indexOf(i)>-1?"maybe":!1},Brid.flash.canPlayURL=function(e){if(BUtil.isMobilePlatform())return!1;var t,i=BUtil.getTypeFromFile(e);return t=Brid.flash.prototype.support.formats.indexOf(i)>-1?"maybe":!1},Brid.flash.killWrapperStyle=function(e){Brid.Util.setStyle(e,{padding:"0",margin:"0",width:"100%",height:"100%",position:"absolute"})},Brid.flash.onReady=function(e){BUtil.elById.cache[e]=null;var t=BUtil.elById(e);Brid.log("Flash onReady",e,t.player,t.parentNode.player,t.parentNode.parentNode.player);var i=t.parentNode;!i.player&&i.parentNode.player&&Brid.flash.killWrapperStyle(i);var n=(t.player||t.parentNode.player||t.parentNode.parentNode.player).tech;return Brid.log("Flash onReady isReady",n.isReady),t.player=t.player||t.parentNode.player||t.parentNode.parentNode.player,n.el=t,n.isReady?(n.player.trigger("newContent",{reinit:!0}),void(n.playCalled&&n.player.start())):void Brid.flash.checkReady(n)},Brid.flash.checkReady=function(e){Brid.log("Flash checkReady"),e.el.b_getProperty?(Brid.log("Flash trigger ready"),e.triggerReady()):setTimeout(function(){Brid.flash.checkReady(e)},50)},Brid.flash.onEvent=function(e,t,i){Brid.log("Brid.flash.onEvent swfID",e,"eventName",t);var n=BUtil.elById(e).player;n.trigger(t,i)},Brid.flash.onError=function(e,t){var i=BUtil.elById(e).player;i.trigger("error"),Brid.log("--- Brid Player --- Flash Error ",t,e)},Brid.flash.version=function(){var e="0,0,0";try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(t){}}return e.split(",")},Brid.flash.embed=function(e,t,i,n,s){var r=Brid.flash.getEmbedCode(e,i,n,s),o=BUtil.createElement("div",{innerHTML:r}).childNodes[0],a=t.parentNode;if(a.replaceChild(o,t),BUtil.isIE()){var l=a.childNodes[0];setTimeout(function(){l.style.display="block"},1e3)}return o},Brid.flash.getEmbedCode=function(e,t,i,n){var s='<object type="application/x-shockwave-flash"',r="",o="",a="";return t&&BUtil.eachProp(t,function(e,t){r+=e+"="+t+"&"}),i=BUtil.merge({movie:e,flashvars:r,allowScriptAccess:"always",allowNetworking:"all"},i),BUtil.eachProp(i,function(e,t){o+='<param name="'+e+'" value="'+t+'" />'}),n=BUtil.merge({data:e,width:"100%",height:"100%"},n),BUtil.eachProp(n,function(e,t){a+=e+'="'+t+'" '}),s+a+">"+o+"</object>"},Brid.ogv=Brid.PlaybackTech.extend({audio:null,init:function Pi(e,t){Pi.base.call(this,e,t),this.player=e,this.config=t,BUtil.insertFirst(this.el,e.el),e.add("playerresize",this.$f(this.onPlayerResize));var i=this.player.config.Url.cdn+"/"+this.player.config.Url.plugins;Brid.Loader.load("js",[i+"ogv-codec.min.js",i+"ogv.min.js"],this.onScriptsLoaded,null,this)},createElement:function Ci(){return Ci.base.call(this,"div",{className:"brid-ogv brid-tech"})},onScriptsLoaded:function(){this.ogvPlayer=new OgvJsPlayer({webGL:!0}),this.ogvPlayer.width=this.player.el.offsetWidth,this.ogvPlayer.height=this.player.el.offsetHeight,this.setupTriggers();
    var e=this.config.source;e&&(this.ogvPlayer.src=e.src,this.ogvPlayer.duration=e.duration),this.setAutoplay(this.player.config.autoplay),this.el.appendChild(this.ogvPlayer),this.trigger("loadstart"),this.addClass("animate"),this.ogvPlayer.load(),this.triggerReady()},destroy:function xi(){this.ogvPlayer.stop(),this.player.tag=!1,this.removeTriggers(),this.ogvPlayer=null,xi.base.call(this)},onLoadedMetadata:function(){Brid.log("Brid Ogv onLoadedMetadata"),this.player.trigger("loadedmetadata"),this.player.trigger("play")},onPlay:function(){Brid.log("Brid Ogv onPlay"),this.player.trigger("play")},onPause:function(){Brid.log("Brid Ogv onPause"),this.player.trigger("pause")},onEnded:function(){Brid.log("Brid Ogv onEnded"),this.player.trigger("ended")},onTimeUpdate:function(){Brid.log("Brid Ogv onTimeUpdate"),this.player.trigger("timeupdate")},setupTriggers:function(){this.ogvPlayer.onloadedmetadata=this.$f(this.onLoadedMetadata),this.ogvPlayer.onplay=this.$f(this.onPlay),this.ogvPlayer.onpause=this.$f(this.onPause),this.ogvPlayer.onended=this.$f(this.onEnded),this.ogvPlayer.ontimeupdate=this.$f(this.onTimeUpdate)},removeTriggers:function(){this.ogvPlayer.onloadedmetadata=null,this.ogvPlayer.onplay=null,this.ogvPlayer.onpause=null,this.ogvPlayer.onended=null,this.ogvPlayer.ontimeupdate=null},onPlayerResize:function(){this.ogvPlayer.width=this.player.el.offsetWidth,this.ogvPlayer.height=this.player.el.offsetHeight},play:function(){Brid.log("Brid Ogv play this.player.isPlaying",this.autoplay(),this.player.isPlaying),(!this.autoplay()||this.player.isPlaying)&&(this.ogvPlayer.play(),this.audio&&4==this.audio.readyState()&&(Brid.log("Brid Ogv play audio.setCurrentTime",this.currentTime()),this.audio.play(),this.audio.setCurrentTime(this.currentTime())))},pause:function(){Brid.log("Brid Ogv pause"),this.ogvPlayer.pause(),this.audio&&4==this.audio.readyState()&&this.audio.pause()},stop:function(){this.ogvPlayer.stop(),this.audio&&4==this.audio.readyState()&&this.audio.stop()},paused:function(){return this.ogvPlayer.paused},currentTime:function(){return this.ogvPlayer.currentTime},setCurrentTime:function(e){Brid.log("Brid Ogv setCurrentTime",e)},duration:function(){return this.player.currentSource.duration||0},buffered:function(){return this.ogvPlayer.buffered},volume:function(){return this.audio?this.audio.volume():this.muted()?1:0},setVolume:function(e){this.audio?this.audio.setVolume(e):this.ogvPlayer.muted=e>0?0:1},muted:function(){return this.audio?this.audio.muted():this.ogvPlayer.muted},setMuted:function(e){this.audio?4==this.audio.readyState()?this.audio.setMuted(e):this.audio.load():this.ogvPlayer.muted=e},width:function(){return this.el.offsetWidth},height:function(){return this.el.offsetHeight},src:function(e){Brid.log("Brid Ogv src",e),this.ogvPlayer.stop(),this.setAutoplay(!1),this.ogvPlayer.playVideo=!0,this.ogvPlayer.playSound=!0,this.ogvPlayer.src=e,this.ogvPlayer.load(),this.ogvPlayer.duration=this.player.currentSource.duration,this.trigger("loadstart")},load:function(){},currentSrc:function(){return this.ogvPlayer.src},setPreload:function(e){this.el.preload=e},autoplay:function(){return this.ogvPlayer.playVideo},setAutoplay:function(e){var t=e&&0==this.player.currentIndex;Brid.log("Brid Ogv setAutoplay",t),this.ogvPlayer.playVideo=t,this.ogvPlayer.playSound=!t,t?(this.audio=new Brid.OgvAudio(this.player,{src:this.player.currentSource.source.mp3}),this.audio.addOnce("canplaythrough",this.$f(function(){Brid.log("Brid Ogv audio canplaythrough"),this.audio.play(),this.audio.setCurrentTime(this.currentTime())})),this.addChild(this.audio)):this.audio&&(this.removeChild(this.audio),this.audio.destroy(),this.audio=null)},seeking:function(){return this.ogvPlayer.seeking},ended:function(){return this.ogvPlayer.ended},controls:function(){return this.player.config.controls},supportsFullScreen:function(){return!1},HDAvailable:function(){return!1}}),Brid.OgvAudio=Brid.Sprite.extend({init:function Ui(e,t){Ui.base.call(this,e,t),t.src&&(this.el.src=t.src,this.audioToggle=new Brid.OGVAudioToggle(e),this.audioToggle.add("ogvUnmute",this.$f(this.onUnmute)),this.audioToggle.add("ogvMute",this.$f(this.onMute)),e.addChild(this.audioToggle),this.setupTriggers())},createElement:function ki(){var e=ki.base.call(this,"audio",{className:"brid-progress-holder"});return e.autoplay=!1,e.preload="none",e.loop=!1,e.muted=!1,e},destroy:function Ei(){this.audioToggle&&(this.player.removeChild(this.audioToggle),this.audioToggle.destroy(),this.audioToggle=null),Ei.base.call(this)},setupTriggers:function(){BUtil.each.call(this,Brid.OgvAudio.events,function(e){Brid.event.add(this.el,e,BUtil.$f(this.player,this.eventHandler))})},removeTriggers:function(){BUtil.each.call(this,Brid.OgvAudio.events,function(e){Brid.event.remove(this.el,e,BUtil.$f(this.player,this.eventHandler))})},eventHandler:function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,this.trigger(e)},onUnmute:function(){return Brid.log("Brid Ogv Audio onUnmute",this.readyState()),4==this.readyState()?void this.setMuted(!1):void this.load()},onMute:function(){return Brid.log("Brid Ogv Audio onMute"),4==this.readyState()?void this.setMuted(!0):void 0},play:function(){Brid.log("Audio Play"),this.el.play()},pause:function(){this.el.pause()},stop:function(){Brid.log("player html5 stop"),this.src(""),this.load(),this.src(this.currentSrc())},paused:function(){return this.el.paused},currentTime:function(){return this.el.currentTime},setCurrentTime:function(e){try{this.el.currentTime=e}catch(t){Brid.log("--- BridPlayer --- OGV audio isn't ready. ",t)}},duration:function(){return this.el.duration||0},volume:function(){return this.el.volume},setVolume:function(e){this.el.volume=e},muted:function(){return this.el.muted},setMuted:function(e){this.el.muted=e},src:function(e){this.el.src=e},currentSrc:function(){return this.el.currentSrc},load:function(){this.el.load()},readyState:function(){return this.el.readyState}}),Brid.OGVAudioToggle=Brid.ToggleButton.extend({currentState:"first",target:null,firstStateEvent:"ogvUnmute",secondStateEvent:"ogvMute",svgOpened:"22 21.6'><g><path fill='#58595B' d='M15.3,21.7l-9-4.4H0V6.6h6.7l8.6-5.4V21.7z M3,14.3h4l5.3,2.6V6.6l-4.7,3H3V14.3z'/><path fill='#58595B' d='M19.8,17c-1.8-1.2-3-3.3-3-5.5c0-2.3,1.3-4.5,3.3-5.7l1.5,2.6c-1.1,0.7-1.8,1.9-1.8,3.1 c0,1.2,0.6,2.4,1.6,3L19.8,17z'/><path fill='#FFFFFF' d='M20.2,15.9c-1.8-1.2-3-3.3-3-5.5c0-2.3,1.3-4.5,3.3-5.7L22,7.3c-1.1,0.7-1.8,1.9-1.8,3.1 c0,1.2,0.6,2.4,1.6,3L20.2,15.9z'/><path fill='#FFFFFF' d='M15.3,20.4l-9-4.4H0V5.4h6.7L15.3,0V20.4z M3,13.1h4l5.3,2.6V5.4l-4.7,3H3V13.1z'/></g>",svgClosed:"22 21.6'><g><g><g><polygon fill='#58595B' points='11.9,6.9 12.3,7.3 12.3,6.7'/><polygon fill='#58595B' points='12.3,6.7 12.3,7.3 15.3,10.4 15.3,1.3 9.8,4.7 11.9,6.9'/><polygon fill='#58595B' points='7,14.3 3,14.3 3,9.6 3.4,9.6 0.5,6.6 0,6.6 0,17.3 6.3,17.3 15.2,21.6 15.1,20.3'/></g><rect x='-0.3' y='9.9' transform='matrix(0.6972 0.7169 -0.7169 0.6972 11.4036 -4.2276)' fill='#58595B' width='22.1' height='3'/></g><g><g><polygon fill='none' points='12,5.6 12.4,6 12.4,5.4'/><polygon fill='#FFFFFF' points='12.4,5.4 12.4,6 15.4,9.1 15.4,0 9.8,3.4 12,5.6'/><polygon fill='#FFFFFF' points='7,13.1 3.1,13.1 3.1,8.4 3.5,8.4 0.6,5.4 0.1,5.4 0.1,16.1 6.4,16.1 15.1,20.3 8.9,14'/></g><linearGradient id='SVGID_1_' gradientUnits='userSpaceOnUse' x1='1.9763' y1='10.1201' x2='19.5408' y2='10.1201'><stop  offset='0' style='stop-color:#FF3B00'/><stop  offset='1' style='stop-color:#FF2A5E'/></linearGradient><polygon fill='url(#SVGID_1_)' points='17.4,19.1 2,3.2 4.1,1.1 19.5,17'/></g></g>",init:function Oi(e,t){Oi.base.call(this,e,t),this.firstState()},appendClassName:function Ii(){return"brid-ogv-audio-button "+Ii.base.call(this)},toggle:function(){var e=(this.opened?"addClass":"removeClass",this.opened?this.svgOpened:this.svgClosed);BUtil.canUseVector()&&(this.el.innerHTML=BUtil.generateSVG(e,this.player.id))}}),Brid.OgvAudio.events="canplaythrough,playing,waiting,ended,timeupdate,progress,play,pause,volumechange".split(","),Brid.ogv.isSupported=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&(window.AudioContext||window.webkitAudioContext)},Brid.ogv.canPlaySource=function(e){var t=BUtil.formatType(e.src,e.type);return'audio/ogg; codecs="vorbis"'===t?"probably":'audio/ogg; codecs="opus"'===t?"probably":t.match(/^audio\/ogg\b/)?"maybe":'video/ogg; codecs="theora"'===t?"probably":'video/ogg; codecs="theora,vorbis"'===t?"probably":'video/ogg; codecs="theora,opus"'===t?"probably":t.match(/^video\/ogg\b/)?"maybe":!1},Brid.ogv.canPlayURL=function(e){var t=BUtil.getTypeFromFile(e);return'audio/ogg; codecs="vorbis"'===t?"probably":'audio/ogg; codecs="opus"'===t?"probably":t.match(/^audio\/ogg\b/)?"maybe":'video/ogg; codecs="theora"'===t?"probably":'video/ogg; codecs="theora,vorbis"'===t?"probably":'video/ogg; codecs="theora,opus"'===t?"probably":t.match(/^video\/ogg\b/)?"maybe":!1},Brid.ogv.prototype.support={fullscreen:typeof BUtil.testVid.webkitEnterFullScreen!==undefined?BUtil.ua.match("Chrome")||BUtil.ua.match("Mac OS X 10.5")?!1:!0:!1,movingElementInDOM:!BUtil.isIOS(),progressEvent:!1,timeupdateEvent:!0,monetizable:!1,adManagement:!1,canResize:!1,hasPoster:!1},Brid.OpenShare=Brid.PanelButton.extend({currentState:"first",target:null,firstStateEvent:"openShareScreen",secondStateEvent:"closeShareScreen",position:"left",svgOpened:"BackButton",svgClosed:"OpenShare",label:"Share",appendClassName:function Mi(){return"brid-share-button "+Mi.base.call(this)},fadeIn:function $i(){$i.base.call(this)},fadeOut:function Li(){Li.base.call(this)}}),Brid.ShareScreen=BSprite.extend({"default":{children:{shareButtonHolder:{},shareCode:{childClass:"ShareCode"}}},init:function Ni(e,t){Ni.base.call(this,e,t),this.el.style.left="-67%",this.oT=new Brid.Tweener.Tween(this).to({left:"0%"},600).easing(Brid.Tweener.Easing.Quintic.Out),this.cT=new Brid.Tweener.Tween(this).to({left:"-67%"},600).easing(Brid.Tweener.Easing.Quintic.Out),e.add("openShareScreen",this.$f(this.onOpenShareScreen)),this.add("openShareCode",this.$f(this.onOpenShareCode))},createElement:function Fi(){return Fi.base.call(this,"div",{className:"brid-left-screen"})},onOpenShareScreen:function(){this.player.trigger("openLeftScreen"),this.player.add("closeShareScreen",this.$f(this.onCloseShareScreen)),this.cT.stop(),this.oT.start()},onCloseShareScreen:function(){this.player.trigger("closeLeftScreen"),this.player.remove("closeShareScreen",this.$f(this.onCloseShareScreen)),this.oT.stop(),this.cT.start()},onOpenShareCode:function(e){this.shareCode.show(e.data)}}),Brid.ShareButtonHolder=BSprite.extend({"default":{children:{link:{},embed:{},facebook:{},twitter:{},googlePlus:{},reddit:{}}},init:function Ri(e,t){Ri.base.call(this,e,t),e.add("playerresize",this.$f(this.onPlayerResize))},createElement:function Ai(){return Ai.base.call(this,"div",{className:"brid-share-button-holder"})},onPlayerResize:function(){var e=this.el.style,t=this.rescale(!1,400);t&&(e.width=t.w+10+"px",e.marginTop="-"+t.h/2+"px",e.marginLeft="-"+t.w/2+"px")}}),Brid.Link=BButton.extend({init:function Di(e,t){Di.base.call(this,e,t),e.add("playerresize",this.$f(this.onPlayerResize))},appendClassName:function Hi(){return"brid-link brid-panels "+Hi.base.call(this)},onClick:function(){{var e;this.player}e="player"!=this.player.config.share||this.player.externalVideo?BUtil.getEmbededUrl()+"#brid_cp_"+this.player.id:(BUtil.isDev()?"http://dev.":"https://")+"btv.social/"+this.player.currentSource.id+"_"+this.player.config.id+"/#cp",this.trigger("openShareCode",e,!0),this.player.trigger("socialshare","link")},onPlayerResize:function(){var e=this.el.style,t=this.rescale(!1,400);if(t){var i=Math.floor(7*this.scale)+"px";e.marginTop=i,e.marginRight=i,e.marginBottom=i,e.marginLeft=i}}}),Brid.Embed=BButton.extend({init:function zi(e,t){zi.base.call(this,e,t),e.add("playerresize",this.$f(this.onPlayerResize))},appendClassName:function Vi(){return"brid-embed brid-panels "+Vi.base.call(this)},onClick:function(){Brid.log("Embed onClick");var e,t=this.player,i='"'+t.currentSource.id+'"',n="video",s=0,r="";if(t.externalVideo&&(i='{ "src": "'+t.currentSrc()+'", "name": "'+t.currentSource.title+'", "image": "'+t.currentSource.poster+'"}'),t.config.yt){e=t.videos,i='"'+t.config.video+'"';for(var o=0,a=e.length;a>o;o++)if(e[o].external_url&&-1!=e[o].external_url.indexOf("youtube")){r=', "yt" : { "src": "'+e[o].src+'", "name": "'+e[o].title+'", "image": "'+e[o].poster+'"}';break}}var l='<script type="text/javascript" src="http://'+document.loadFromHost+'/player/build/brid.min.js"></script><div id="'+t.id+'" class="brid" itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><div id="'+t.id+'_adContainer">Initialize ads</div></div><script type="text/javascript"> $bp("'+t.id+'", {"id":"'+t.config.id+'"'+r+', "width":"'+t.el.offsetWidth+'","height":"'+t.el.offsetHeight+'","'+n+'":'+i+', "autoplay":'+s+',"shared":true});</script><script type="text/javascript" src="http://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>';this.trigger("openShareCode",l,!0),t.trigger("socialshare","embed")},onPlayerResize:function(){var e=this.el.style,t=this.rescale(!1,400);if(t){var i=Math.floor(7*this.scale)+"px";e.marginTop=i,e.marginRight=i,e.marginBottom=i,e.marginLeft=i}}}),Brid.Facebook=BButton.extend({init:function _i(e,t){_i.base.call(this,e,t),e.add("playerresize",this.$f(this.onPlayerResize))},appendClassName:function Gi(){return"brid-facebook brid-panels "+Gi.base.call(this)},onClick:function(){var e,t=this.player;e="player"!=t.config.share||t.externalVideo?BUtil.getEmbededUrl()+"#brid_fb_"+t.id:(BUtil.isDev()?"http://dev.":"https://")+"btv.social/"+t.currentSource.id+"_"+t.config.id+"/#fb",e=encodeURIComponent(e);var i="http://www.facebook.com/sharer/sharer.php?u="+e+"&title="+t.currentSource.title+"&summary="+t.currentSource.description;window.open(i,"PopUpWindow","width=650,height=440,toolbar=no,scrollbars=yes"),t.trigger("socialshare","facebook")},onPlayerResize:function(){var e=this.el.style,t=this.rescale(!1,400);if(t){var i=Math.floor(10*this.scale)+"px";e.marginTop=i,e.marginRight=i,e.marginBottom=i,e.marginLeft=i}}}),Brid.Twitter=BButton.extend({init:function ji(e,t){ji.base.call(this,e,t),e.add("playerresize",this.$f(this.onPlayerResize))},appendClassName:function Wi(){return"brid-twitter brid-panels "+Wi.base.call(this)},onClick:function(){var e,t=this.player;e="player"!=t.config.share||t.externalVideo?BUtil.getEmbededUrl()+"#brid_tw_"+t.id:(BUtil.isDev()?"http://dev.":"https://")+"btv.social/"+t.currentSource.id+"_"+t.config.id+"/#tw",e=encodeURIComponent(e);var i=encodeURIComponent(t.currentSource.title),n="http://twitter.com/home?status="+i+": "+e;window.open(n,"PopUpWindow","width=680,height=300,toolbar=no,scrollbars=yes"),t.trigger("socialshare","twitter")},onPlayerResize:function(){var e=this.el.style,t=this.rescale(!1,400);if(t){var i=Math.floor(10*this.scale)+"px";e.marginTop=i,e.marginRight=i,e.marginBottom=i,e.marginLeft=i}}}),Brid.GooglePlus=BButton.extend({init:function Qi(e,t){Qi.base.call(this,e,t),e.add("playerresize",this.$f(this.onPlayerResize))},appendClassName:function qi(){return"brid-googleplus brid-panels "+qi.base.call(this)},onClick:function(){var e,t=this.player;e="player"!=t.config.share||t.externalVideo?BUtil.getEmbededUrl()+"#brid_gp_"+t.id:(BUtil.isDev()?"http://dev.":"https://")+"btv.social/"+t.currentSource.id+"_"+t.config.id+"/#gp";var i="https://plus.google.com/share?hl=en&url="+e;window.open(i,"PopUpWindow","width=500,height=320,toolbar=no,scrollbars=yes"),t.trigger("socialshare","googleplus")},onPlayerResize:function(){var e=this.el.style,t=this.rescale(!1,400);if(t){var i=Math.floor(10*this.scale)+"px";e.marginTop=i,e.marginRight=i,e.marginBottom=i,e.marginLeft=i}}}),Brid.Reddit=BButton.extend({init:function Yi(e,t){Yi.base.call(this,e,t),e.add("playerresize",this.$f(this.onPlayerResize))},appendClassName:function Xi(){return"brid-reddit brid-panels "+Xi.base.call(this)},onClick:function(){var e,t=this.player;e="player"!=t.config.share||t.externalVideo?BUtil.getEmbededUrl()+"#brid_rd_"+t.id:(BUtil.isDev()?"http://dev.":"https://")+"btv.social/"+t.currentSource.id+"_"+t.config.id+"/#rd",e=encodeURIComponent(e);var i="http://www.reddit.com/submit?title= "+t.currentSource.title+"&text="+t.currentSource.description+"&url="+e;window.open(i,"PopUpWindow","width=650,height=440,toolbar=no,scrollbars=yes"),t.trigger("socialshare","reddit")},onPlayerResize:function(){var e=this.el.style,t=this.rescale(!1,400);if(t){var i=Math.floor(10*this.scale)+"px";e.marginTop=i,e.marginRight=i,e.marginBottom=i,e.marginLeft=i}}}),Brid.ShareCode=BSprite.extend({"default":{children:{close:{}}},init:function Ji(e,t){Ji.base.call(this,e,t),this.add("click",this.$f(this.onClick)),this.add("close",this.$f(this.hide)),e.add("closeShareScreen",this.$f(this.hide)),this.hide()},createElement:function Ki(){var e=Ki.base.call(this,"div",{className:"brid-share-code"});return e.appendChild(Ki.base.call(this,"div",{className:"brid-share-code-title",innerHTML:"Copy to clipboard: Ctrl+C / Cmd+C"})),this.input=Ki.base.call(this,"input",{value:this.username,type:"text",readonly:"readonly"}),e.appendChild(this.input),e},onClick:function(){this.input.select()},show:function Zi(e){this.input.value=e,Zi.base.call(this),this.input.focus(),this.input.select()}}),Brid.OpenPlaylist=Brid.PanelButton.extend({currentState:"first",target:null,firstStateEvent:"openPlaylistScreen",secondStateEvent:"closePlaylistScreen",position:"right",svgOpened:"BackButton",svgClosed:"OpenPlaylist",label:"Playlist",appendClassName:function en(){return"brid-playlist-button "+en.base.call(this)},fadeIn:function tn(){tn.base.call(this)},fadeOut:function nn(){nn.base.call(this)}}),Brid.PlaylistScreen=BSprite.extend({init:function sn(e,t){sn.base.call(this,e,t),this.el.style.right="-67%",this.oT=new Brid.Tweener.Tween(this).to({right:"0%"},600).easing(Brid.Tweener.Easing.Quintic.Out).onComplete(this.$f(function(){this.playlist||(this.playlist=new Brid.PlaylistControl(this.player,{name:"PlaylistControl"}),this.addChild(this.playlist),this.playlist.fadeIn())})),this.cT=new Brid.Tweener.Tween(this).to({right:"-67%"},600).easing(Brid.Tweener.Easing.Quintic.Out),e.add("openPlaylistScreen",this.$f(this.onOpenPlaylistScreen)),e.add("playlistchange",this.$f(this.onPlaylistChange))},createElement:function rn(){return rn.base.call(this,"div",{className:"brid-right-screen"})},onOpenPlaylistScreen:function(){Brid.log("onOpenPlaylistScreen"),this.player.trigger("openRightScreen"),this.player.add("closePlaylistScreen",this.$f(this.onClosePlaylistScreen)),this.addClass("opened"),this.cT.stop(),this.oT.start()},onPlaylistChange:function(){this.playlist&&this.player.assets.newPlaylist&&(this.removeChild(this.playlist),this.playlist.destroy(),this.playlist=null)},onClosePlaylistScreen:function(){this.player.trigger("closeRightScreen"),this.player.remove("closePlaylistScreen",this.$f(this.onClosePlaylistScreen)),this.removeClass("opened"),this.oT.stop(),this.cT.start()}}),Brid.PlaylistControl=BSprite.extend({"default":{children:{scroll:{childClass:"PlaylistScroll"}}},init:function on(e,t){on.base.call(this,e,t)},createElement:function an(){return an.base.call(this,"div",{className:"brid-playlist-control"})}}),Brid.PlaylistScroll=Brid.Scroll.extend({"default":{children:{bar:{childClass:"ScrollBar"}}},elementsClass:"PlaylistElements",init:function ln(e,t){ln.base.call(this,e,t),e.add("newContent",this.$f(this.onNewContent)),e.add(["playerresize","openPlaylistScreen"],this.$f(this.onPlayerResize)),this.onNewContent()},createElement:function hn(){return hn.base.call(this,"div",{className:"brid-playlist-scroll"})},onNewContent:function(){setTimeout(this.$f(function(){Brid.log(" this.scrollTo",this.player.currentIndex),this.scrollTo(this.player.currentIndex,"direct")}),100)},onPlayerResize:function(){this.onChange()},onScrollHitBottom:function cn(){cn.base.call(this),Brid.log("onScrollHitBottom"),this.player.videosPage*this.player.videos.limit<this.player.videos.items&&(this.player.videosPage++,this.player.addOnce("playlistchange",this.$f(this.onPlaylistChange)),this.player.assets.loadPlaylist(this.player.config.playlist,!1,this.player.videosPage,this.player.videos.limit))},onPlaylistChange:function(){var e=this.player.videos,t=this.elements.dataProvider.length+this.elements.introVideosNum,i=e.limit+t,n=i<e.items+this.elements.introVideosNum?i:e.items+this.elements.introVideosNum;Brid.log("onPlaylistChange",t,n,this.elements.introVideosNum);for(var s=t;n>s;s++)if(e[s].intro_video)n++,this.elements.introVideosNum++;else{var r={video:e[s],name:"Element"+s};Brid.log("add playlist item",r);var o=new Brid.Element(this.player,r);this.elements.addItem(o)}}}),Brid.PlaylistElements=Brid.Elements.extend({dataProvider:[],initObjects:function(){var e=this.player;if(this.introVideosNum=0,e.videos&&e.playlistLength>0)for(var t=0;t<e.playlistLength;t++)if(e.videos[t].intro_video)this.introVideosNum++;else{var i={video:e.videos[t],name:"Element"+t},n=new Brid.Element(e,i);this.addItem(n)}},appendClassName:function un(){return"brid-playlist-elements-holder "+un.base.call(this)}}),Brid.Element=BSprite.extend({init:function fn(e,t){fn.base.call(this,e,t),this.add("mouseover",this.$f(this.onMouseOver)),this.add("mouseout",this.$f(this.onMouseOut)),e.add("start",this.$f(this.onVideoStart)),this.ap={x:0,y:0,z:0},this.oT=new Brid.Tweener.Tween(this.ap).to({x:65,y:64,z:66},400).easing(Brid.Tweener.Easing.Quintic.Out).onUpdate(this.$f(this.onTweenUpdate)),this.aT=new Brid.Tweener.Tween(this.ap).to({x:52,y:52,z:52},400).easing(Brid.Tweener.Easing.Quintic.Out).onUpdate(this.$f(this.onTweenUpdate)),this.bT=new Brid.Tweener.Tween(this.ap).to({x:0,y:0,z:0},400).easing(Brid.Tweener.Easing.Quintic.Out).onUpdate(this.$f(this.onTweenUpdate));var i=this.config.video;this.index=this.config.video.index,i.name="ThumbnailHolder",this.thumbnail=new Brid.ThumbnailHolder(e,i),i.name="TitleText",this.title=new Brid.TitleText(e,i),i.name="DescriptionText",this.description=new Brid.DescriptionText(e,i),this.addChild(this.thumbnail),this.addChild(this.title),this.addChild(this.description),e.add("playerresize",this.$f(this.onPlayerResize)),this.onVideoStart()},createElement:function pn(){return pn.base.call(this,"div",{className:"brid-playlist-element"})},onTweenUpdate:function(){this.el.style.backgroundColor="rgb("+Math.round(this.ap.x)+","+Math.round(this.ap.y)+","+Math.round(this.ap.z)+")"},onMouseOver:function(){this.active||(this.bT.stop(),this.oT.start())},onMouseOut:function(){this.active||(this.oT.stop(),this.bT.start())},onVideoStart:function(){this.player.currentIndex==this.index?(this.active=!0,this.thumbnail.visible(!1),this.bT.stop(),this.aT.start()):(this.active=!1,this.thumbnail.visible(!0),this.aT.stop(),this.bT.start())},onPlayerResize:function(){this.title.el.style.styleFloat=this.title.el.style.cssFloat=this.description.el.style.styleFloat=this.description.el.style.cssFloat=this.player.el.offsetWidth<420?"left":"none"}}),Brid.ThumbnailHolder=BSprite.extend({"default":{children:{thumbnailOverlay:{}}},adnimated:!1,init:function gn(e,t){gn.base.call(this,e,t),this.add("mouseover",this.$f(this.onMouseOver)),this.add("mouseout",this.$f(this.onMouseOut)),this.index=this.config.index;var i=t.thumbnail?t.thumbnail:t.poster;this.el.innerHTML+='<img id="thumb" src="'+i+'"></img>',this.add("click",this.$f(this.onClick))},createElement:function mn(){return mn.base.call(this,"div",{className:"brid-thumb-holder"})},onMouseOver:function(){this.addClass("over")},onMouseOut:function(){this.removeClass("over")},onClick:function(){this.player.playByIndex(this.index)}}),Brid.TitleText=BSprite.extend({init:function yn(e,t){yn.base.call(this,e,t),this.index=this.config.index,t.title?this.el.innerHTML=BUtil.safeTrunc(t.title,30):this.hide(),this.add("click",this.$f(this.onClick)),this.add(["start","newContent"],this.$f(this.refresh))},createElement:function vn(){return vn.base.call(this,"p",{className:"brid-title"})},refresh:function(){var e=this.config,t=this.player.videos[this.index].title;!e.title&&t?(e.title=t,this.el.innerHTML=BUtil.safeTrunc(e.title,30),this.show()):e.title&&this.show()},onClick:function(){this.player.playByIndex(this.index)}}),Brid.DescriptionText=BSprite.extend({init:function bn(e,t){bn.base.call(this,e,t),this.index=this.config.index,t.description?this.el.innerHTML=BUtil.safeTrunc(t.description,90):this.hide(),this.add("click",this.$f(this.onClick))},createElement:function Bn(){return Bn.base.call(this,"p",{className:"brid-description"})},onClick:function(){this.player.playByIndex(this.index)}}),Brid.ThumbnailOverlay=BButton.extend({appendClassName:function wn(){return"brid-thumb-play brid-panels "+wn.base.call(this)},onClick:function(){}}),Brid.CuePoints=Brid.Class.extend({init:function(e,t){this.player=e,this.config=t,this.id=t.trackID,this.cues=[],this.activeCues=[]},parseCues:function(e){var t,i,n,s,r=e.split("\n"),o="";this.cues=[],this.activeCues=[];for(var a=1,l=r.length;l>a;a++)if(o=BUtil.trim(r[a])){for(-1==o.indexOf("-->")?(s=o,o=BUtil.trim(r[++a])):s=this.cues.length,t={id:s,index:this.cues.length},i=o.split(" --> "),t.startTime=this.parseCueTime(i[0]),t.endTime=this.parseCueTime(i[1]),n=[];r[++a]&&(o=BUtil.trim(r[a]));)n.push(o);t.text=n.join("<br/>"),this.cues.push(t)}return this.loaded(),this.cues},parseCueTime:function(e){var t,i,n,s,r,o=e.split(":"),a=0;return 3==o.length?(t=o[0],i=o[1],n=o[2]):(t=0,i=o[0],n=o[1]),n=n.split(/\s+/),s=n.splice(0,1)[0],s=s.split(/\.|,/),r=parseFloat(s[1]),s=s[0],a+=3600*parseFloat(t),a+=60*parseFloat(i),a+=parseFloat(s),r&&(a+=r/1e3),a},update:function(){if(this.cues.length>0){var e=this.player.currentTime();if(this.prevChange===undefined||e<this.prevChange||this.nextChange<=e){var t,i,n,s,r=this.cues,o=this.player.duration(),a=0,l=!1,h=[];for(e>=this.nextChange||this.nextChange===undefined?s=this.firstActiveIndex!==undefined?this.firstActiveIndex:0:(l=!0,s=this.lastActiveIndex!==undefined?this.lastActiveIndex:r.length-1);;){if(n=r[s],n.endTime<=e)a=Math.max(a,n.endTime),n.active&&(n.active=!1);else if(e<n.startTime){if(o=Math.min(o,n.startTime),n.active&&(n.active=!1),!l)break}else l?(h.splice(0,0,n),i===undefined&&(i=s),t=s):(h.push(n),t===undefined&&(t=s),i=s),o=Math.min(o,n.endTime),a=Math.max(a,n.startTime),n.active=!0;if(l){if(0===s)break;s--}else{if(s===r.length-1)break;s++}}this.activeCues=h,this.nextChange=o,this.prevChange=a,this.firstActiveIndex=t,this.lastActiveIndex=i,this.cueChange()}}},activate:function(){this.player.add("timeupdate",this.$f(this.update,this.id))},deactivate:function(){this.player.remove("timeupdate",this.$f(this.update,this.id))},reset:function(){this.nextChange=0,this.prevChange=this.player.duration(),this.firstActiveIndex=0,this.lastActiveIndex=0},$f:function(e,t){return BUtil.$f(this,e,t)},loaded:function(){},cueChange:function(){}}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,s,r,o,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;r>i;i+=1)o[i]=str(i,l)||"null";return s=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;r>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],s=str(n,l),s&&o.push(quote(n)+(gap?": ":":")+s));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(s=str(n,l),s&&o.push(quote(n)+(gap?": ":":")+s));return s=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,s=e[t];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n=walk(s,i),n!==undefined?s[i]=n:delete s[i]);return reviver.call(e,t,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Brid.Assets=Brid.Class.extend({player:null,count:0,init:function(e,t,i){Brid.log("Assests config",t),this.config=t||{},this.readyMethod=i,this.playlist=t.playlist?t.playlist:null,this.video=t.video?t.video:null,this.el=e,this.playlistLoaded=!1,this.configLoaded=!1,this.cssLoaded=!1,BUtil.createCSS(Brid.config.defaultCSS);var n;n=-1!=t.id.indexOf("http")?t.id:"//"+document.loadFromHost+"/services/player/"+t.id,-1==n.indexOf(".json")&&-1==n.indexOf(".php")&&(n+=".json"),this.loadPlayerConfig(t.id,n),this.checkIfAssetsLoaded()},onConfigLoad:function(e){var t,i,n=BUtil.clone(Brid.config),s=this.config;e="string"==typeof e?JSON.parse(e||"{}"):e,playerCacheDuration=6e5,Brid.log("inCms",e.Player.inCms,typeof e.Player.inCms),!this.localStoragePlayerKey||BUtil.getLocalStorage(this.localStoragePlayerKey)||e.Player.inCms||(Brid.log("setPlayerConfigOnLocalStorage"),BUtil.setLocalStorage(this.localStoragePlayerKey,e,playerCacheDuration)),n=BUtil.merge(n,e),n=BUtil.merge(n,n.Player),s=BUtil.merge(n,s),s.id=s.Player.id,s.Player=null,delete s.Player;var r=[],o=s.Plugin||[],a=[];this.servicePart=s.Url.service,this.cdnPart=s.Url.cdn,this.appPart=s.Url.app,this.pluginPart=s.Url.plugins,this.videoPart=s.Url.video,this.playlistPart=s.Url.playlist,this.dynamicPart=s.Url.dynamic,this.partnerID=s.Partner.id,this.playlistLoaded=!1,this.configLoaded=!1,this.cssLoaded=!1,-1!=this.cdnPart.indexOf("http:")&&(this.cdnPart=this.cdnPart.substr(5)),-1!=this.cdnPart.indexOf("https:")&&(this.cdnPart=this.cdnPart.substr(6)),-1!=this.servicePart.indexOf("http:")&&(this.servicePart=this.servicePart.substr(5)),-1!=this.servicePart.indexOf("https:")&&(this.servicePart=this.servicePart.substr(6)),i=this.cdnPart+"/player/min/?f=";for(var l=0,h=o.length;h>l;l++){t="string"==typeof o[l]?o[l]:o[l].url,-1!=t.indexOf("http://")||-1!=t.indexOf("https://")?r.push(t):i+=t+",";var d=t.split("/");if(d.length>0)var c=d[d.length-1];else c=t;for(var d=c.split("."),u="",f=0,p=2;p>f;f++)u+="min"!=d[f]?d[f]:"";a.push({id:u,url:t,oop:o[l].oop?o[l].oop:!1})}s.Plugin=a,this.config=s,this.loadCSS(),a.length>0?(r.length>0&&(Brid.log("pluginsURLs-",r),Brid.Loader.load("js",r,this.onPluginsLoad,null,this)),i!=this.cdnPart+"/player/min/?f="&&(i=i.substring(0,i.length-1),Brid.Loader.load("js",i,this.onPluginsLoad,null,this))):this.configLoaded=!0,this.checkIfAssetsLoaded()
},loadCSS:function(e){Brid.log("this.config",this.config);var t=this.config.css?this.config.css:this.config.Style?this.config.Style.name:"",i=!this.config.Skin.templatized;Brid.log("loadCSS",t,i),t&&""!=t?-1!=t.indexOf("http")?Brid.Loader.load("css",t,this.onCssLoad,null,this,e):Brid.Loader.load("css",this.cdnPart+"/ugc/partners/"+(i?"":this.partnerID+"/")+"style/"+t,this.onCssLoad,null,this,e):(this.cssLoaded=!0,Brid.warn("--- Brid Player --- No CSS present"))},onPluginsLoad:function(){var e=!0;Brid.event.remove(document,"bridpluginloaded",Brid.Util.$f(this,this.onPluginsLoad,this.el.id));for(var t=0;t<this.config.Plugin.length;t++)if(Brid.log("onPluginsLoad",this.el.id,this.config.Plugin[t].id,window["$"+this.config.Plugin[t].id]),!window["$"+this.config.Plugin[t].id]){e=!1;break}return e?void(this.configLoaded||(this.configLoaded=!0,this.checkIfAssetsLoaded())):void Brid.event.add(document,"bridpluginloaded",Brid.Util.$f(this,this.onPluginsLoad,this.el.id))},onCssLoad:function(){return Brid.log("onCssLoad"),this.cssLoaded?void(this.player&&(this.player.resetSkin(),this.player.show())):(this.cssLoaded=!0,void this.checkIfAssetsLoaded())},formatPlaylistUrl:function(e,t,i){var n=this.playlist?this.playlistPart:this.videoPart;if(t=t?"/"+t:"",i=i?"/"+i:"",e){if("string"==typeof e)e=this.servicePart+this.appPart+n+e+t+i+".json";else if(e.mode){var s=e.mode+"/"+e.id+"/"+this.config.Partner.id+"/"+(e.page?e.page:"1")+"/"+(e.items?+e.items:"50");this.config.video_type&&(s+="/"+this.config.video_type),e=this.servicePart+this.appPart+this.dynamicPart+s+".json"}else Brid.error("--- Brid Player --- Playlist Object not valid "),this.player.showMessage("NO VALID PLAYLIST PRESENT");return e}return Brid.error("--- Brid Player --- No playlist present"),this.player.showMessage("NO PLAYLIST PRESENT"),this.playlistLoaded=!0,!1},loadPlaylist:function(e,t,i,n){if(this.playlistLoaded=!1,this.newPlaylist="undefined"!=typeof t?t:!0,Brid.log("loadPlaylist",e,t,i,n),"string"==typeof e){-1==e.indexOf("http")&&0!=e.indexOf("//")&&(e=this.formatPlaylistUrl(e,i,n));var s=BUtil.getTypeFromFile(e);s&&"application/json"!=s?(this.player.externalVideo=!0,this.parsePlaylist({Video:{src:e}})):Brid.Loader.loadText(e,BUtil.$f(this,this.onPlaylistLoad),Brid.Loader.onError)}else"object"==typeof e?e.Video?(Brid.log("Playlist Object already well formated"),this.parsePlaylist(e)):e.source||e.src?(this.player.externalVideo=!0,this.parsePlaylist({Video:e})):(e=this.formatPlaylistUrl(e),this.loadPlaylist(e,t,i,n)):(Brid.error("--- Brid Player Error. Playlist needs to be type of Object or String ----"),this.player.showMessage("Playlist needs to be type of Object or String"))},onPlaylistLoad:function(e){Brid.log("onPlaylistLoad",this.player.el.id),this.playlistLoaded||(this.playlistLoaded=!0,this.parsePlaylist(JSON.parse(e||"{}")))},parsePlaylist:function(e){var t=this.player;if(Brid.log("parsePlaylist",e,"this.newPlaylist",this.newPlaylist),this.newPlaylist&&(t.videos=[]),"undefined"==typeof e.Video)return Brid.error("--- Brid Player Error. PLAYLIST PARSE FAILED ----"),void t.showMessage("PLAYLIST PARSE FAILED");if(e.Video.error)return void t.showMessage(e.Video.name||"Video doesn't exist");try{e.Video instanceof Array?t.videos=t.videos.concat(e.Video):t.videos[0]=e.Video}catch(i){return Brid.error("--- Brid Player Error. PLAYLIST PARSE FAILED ----",i),void t.showMessage("PLAYLIST PARSE FAILED")}this.config.yt&&(t.externalVideo=!0,t.config.yt.external_url="http://www.youtube.com/watch?v="+t.config.yt.src,t.videos.push(this.config.yt),t.videos[0].name=this.config.yt.name,t.videos[0].image=this.config.yt.image),t.playlistLength=t.videos.length;for(var n=0;n<t.playlistLength;n++){var s=t.videos[n];s.title=BUtil.unescapeHTML(s.name?s.name:s.title),s.poster=s.image?s.image:s.poster,s.description=BUtil.unescapeHTML(s.description),s.index=n,(s.source&&s.source.sd&&-1!=s.source.sd.indexOf(".m3u8")||s.src&&-1!=s.src.indexOf(".m3u8"))&&!t.hasHLS&&(t.hasHLS=!0),delete s.name,delete s.image}e.Playlist?(t.videos.items=e.Playlist.items||t.videos.length,t.videos.limit=e.Playlist.limit||t.videos.length):(t.videos.items=t.videos.length,t.videos.limit=t.videos.length),this.newPlaylist&&(t.videosPage=1,t.isPlaying&&(t.currentTime(0),t.pause(),t.trigger("stopped")),Brid.log("parsePlaylist",t.videos[0].type),t.src(t.videos[0]||this.config.sources),t.config.autoplay||(t.trigger("newContent"),t.trigger("showPoster")),t.send("setVideos",[JSON.stringify({videos:t.videos})])),Brid.log("player.videos",t.videos),t.trigger("playlistchange"),this.newPlaylist=!1},onLoaded:function(){},checkIfAssetsLoaded:function(){Brid.log("checkIfAssetsLoaded","playlistLoaded",this.playlistLoaded,"skinLoaded",this.skinLoaded,"cssLoaded",this.cssLoaded,"configLoaded",this.configLoaded,"player",this.player),this.configLoaded&&this.cssLoaded&&!this.player&&(this.player=new Brid.Player(this.el,this.config,this.readyMethod),this.player.assets=this,this.onLoaded(this.player),this.loadPlaylist(this.playlist||this.video,!0))},loadPlayerConfig:function(e,t){this.localStoragePlayerKey="bridPlayer_"+e;var i=BUtil.getLocalStorage(this.localStoragePlayerKey);!i||Brid.forceConfigLoad?Brid.Loader.loadText(t,BUtil.$f(this,this.onConfigLoad),Brid.Loader.onError):this.onConfigLoad(i)}}),Brid.Loader={env:null,head:null,pending:{},pollCount:0,queue:{css:[],js:[]},styleSheets:document.styleSheets,finish:function(e){var t,i,n=this.pending[e];n&&(t=n.callback,i=n.urls,i.shift(),this.pollCount=0,i.length||(this.pending[e]=null,this.queue[e].length&&this.load(e),t&&t.call(n.context,n.obj)))},getEnv:function(){var e=BUtil.ua;this.env={async:BUtil.createElement("script").async===!0},(this.env.webkit=/AppleWebKit\//.test(e))||(this.env.ie=/MSIE/.test(e))||(this.env.opera=/Opera/.test(e))||(this.env.gecko=/Gecko\//.test(e))||(this.env.unknown=!0)},load:function(e,t,i,n,s,r){var o,a,l,h,d,c,u,f;if(o="css"===e,a=[],this.env||this.getEnv(),t)if(t="string"==typeof t?[t]:t.concat(),o||this.env.async||this.env.gecko||this.env.opera)this.queue[e].push({urls:t,callback:i,obj:n,context:s});else for(l=0,h=t.length;h>l;++l)this.queue[e].push({urls:[t[l]],callback:l===h-1?i:null,obj:n,context:s});if((r||!this.pending[e])&&(c=this.pending[e]=this.queue[e].shift())){for(this.head||(this.head=document.head||document.getElementsByTagName("head")[0]),u=c.urls,l=0,h=u.length;h>l;++l)f=u[l],!BUtil.checkIfNodeExistsByURL(f,o)&&f?(o?d=this.env.gecko?BUtil.createElement("style"):BUtil.createElement("link",{href:f,rel:"stylesheet"}):this.env.ie?(d=BUtil.createElement("script"),d.async=!1):(d=BUtil.createElement("script",{src:f}),d.async=!1),d.className=n?n["class"]||"bridload":"bridload",d.setAttribute("charset","utf-8"),this.env.ie&&!o?(/loaded|complete/.test(d.readyState)?this.finish(e):d.onreadystatechange=BUtil.$f(this,function(){/loaded|complete/.test(d.readyState)&&(d.onreadystatechange=null,this.finish(e))}),d.setAttribute("src",f)):o&&(this.env.gecko||this.env.webkit)?this.env.webkit?(c.urls[l]=d.href,this.pollWebKit()):(d.innerHTML='@import "'+f+'";',this.pollGecko(d)):d.onload=d.onerror=BUtil.$f(this,function(){this.finish(e)}),a.push(d)):this.finish(e);for(l=0,h=a.length;h>l;++l)this.head.appendChild(a[l])}},loadText:function(e,t,i,n){var s=0==e.indexOf("file:")||0==window.location.href.indexOf("file:")&&-1==e.indexOf("http:")&&-1==e.indexOf("https:")&&0!=e.indexOf("//");"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(i){}throw new Error("This browser does not support XMLHttpRequest.")});var r=new XMLHttpRequest;if("withCredentials"in r){Brid.log("withCredentials GET",e);try{r.open("GET",e,!0)}catch(o){return Brid.log("--- BridPlayer --- XMLHttpRequest (open)",o),!1}}else{if("undefined"==typeof XDomainRequest)return void(r=null);Brid.log("GET",e),r=new XDomainRequest;try{r.open("GET",e),r.onload=function(){t(r.responseText,n)},r.onerror=function(e){i&&i(e)},r.onprogress=function(){},r.ontimeout=function(){}}catch(o){return Brid.log("--- BridPlayer --- XDomainRequest (open)",o),!1}}r.onreadystatechange=BUtil.$f(this,function(){4==r.readyState&&(200==r.status||s&&0==r.status?t(r.responseText,n):i&&i())});try{setTimeout(function(){r.send()},0)}catch(o){Brid.log("Brid HttpRequest (send)",o),i&&i(o)}},pollGecko:function(e){var t;try{t=!!e.sheet.cssRules}catch(i){return this.pollCount+=1,void(this.pollCount<20?setTimeout(BUtil.$f(this,function(){this.pollGecko(e)}),50):t&&this.finish("css"))}this.finish("css")},pollWebKit:function(){var e,t=this.pending.css;if(t){for(e=this.styleSheets.length;--e>=0;)if(this.styleSheets[e].href===t.urls[0]){this.finish("css");break}this.pollCount+=1,t&&(this.pollCount<20?setTimeout(BUtil.$f(this,this.pollWebKit),50):this.finish("css"))}},onError:function(){Brid.log("--- Brid Player --- URL not valid or Network Error")}}}(window);