/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*! jQuery v2.1.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//        var mq = window.matchMedia('(min-device-width: 768px)');
//        if(mq.matches) {
//            window.$zopim||(function(d,s){var z=$zopim=function(c){z._.push(c)},$=z.s=
//                d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set.
//                _.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute('charset','utf-8');
//                $.src='//v2.zopim.com/?2pEYiMIytp31Vgv10cyfecHTTEsGf58M';z.t=+new Date;$.
//                    type='text/javascript';e.parentNode.insertBefore($,e)})(document,'script');
//        }

/*
 * Date Format 1.2.3
 * (c) 2007-2009 Steven Levithan <stevenlevithan.com>
 * MIT license
 *
 * Includes enhancements by Scott Trenda <scott.trenda.net>
 * and Kris Kowal <cixar.com/~kris.kowal/>
 *
 * Accepts a date, a mask, or a date and a mask.
 * Returns a formatted version of the given date.
 * The date defaults to the current date/time.
 * The mask defaults to dateFormat.masks.default.
 */

/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 * Isotope PACKAGED v2.0.0
 * Filter & sort magical layouts
 * http://isotope.metafizzy.co
 */

/*!
 * imagesLoaded PACKAGED v3.1.7
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */

/**
 * Copyright Facebook Inc.
 *
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 */

/**
     * @providesModule JSON3
     * @preserve-header
     *
     *! JSON v3.2.3 | http://bestiejs.github.com/json3 | Copyright 2012, Kit Cambridge | http://kit.mit-license.org
     */

define("js/lib/domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t=e.length,n=o.type(e);return"function"===n||o.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,n){if(o.isFunction(t))return o.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return o.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(w.test(t))return o.filter(t,e,n);t=o.filter(t,e)}return o.grep(e,function(e){return g.call(t,e)>=0!==n})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return o.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){m.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),o.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=o.expando+Math.random()}function P(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(O,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:N.test(n)?o.parseJSON(n):n}catch(i){}M.set(e,t,n)}else n=void 0;return n}function Z(){return!0}function $(){return!1}function _(){try{return m.activeElement}catch(e){}}function jb(e,t){return o.nodeName(e,"table")&&o.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function kb(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function lb(e){var t=gb.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function mb(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function nb(e,t){var n,r,i,s,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(s=L.access(e),u=L.set(t,s),l=s.events)){delete u.handle,u.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)o.event.add(t,i,l[i][n])}M.hasData(e)&&(a=M.access(e),f=o.extend({},a),M.set(t,f))}}function ob(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&o.nodeName(e,t)?o.merge([e],n):n}function pb(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sb(e,t){var n=o(t.createElement(e)).appendTo(t.body),r=a.getDefaultComputedStyle?a.getDefaultComputedStyle(n[0]).display:o.css(n[0],"display");return n.detach(),r}function tb(e){var t=m,n=rb[e];return n||(n=sb(e,t),"none"!==n&&n||(qb=(qb||o("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qb[0].contentDocument,t.write(),t.close(),n=sb(e,t),qb.detach()),rb[e]=n),n}function xb(e,t,n){var r,i,s,u,a=e.style;return n=n||wb(e),n&&(u=n.getPropertyValue(t)||n[t]),n&&(""!==u||o.contains(e.ownerDocument,e)||(u=o.style(e,t)),vb.test(u)&&ub.test(t)&&(r=a.width,i=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=n.width,a.width=r,a.minWidth=i,a.maxWidth=s)),void 0!==u?u+"":u}function yb(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fb(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Eb.length;while(i--)if(t=Eb[i]+n,t in e)return t;return r}function Gb(e,t,n){var r=Ab.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Hb(e,t,n,r,i){for(var s=n===(r?"border":"content")?4:"width"===t?1:0,u=0;4>s;s+=2)"margin"===n&&(u+=o.css(e,n+R[s],!0,i)),r?("content"===n&&(u-=o.css(e,"padding"+R[s],!0,i)),"margin"!==n&&(u-=o.css(e,"border"+R[s]+"Width",!0,i))):(u+=o.css(e,"padding"+R[s],!0,i),"padding"!==n&&(u+=o.css(e,"border"+R[s]+"Width",!0,i)));return u}function Ib(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=wb(e),u="border-box"===o.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=xb(e,t,s),(0>i||null==i)&&(i=e.style[t]),vb.test(i))return i;r=u&&(l.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Hb(e,t,n||(u?"border":"content"),r,s)+"px"}function Jb(e,t){for(var n,r,i,s=[],u=0,a=e.length;a>u;u++)r=e[u],r.style&&(s[u]=L.get(r,"olddisplay"),n=r.style.display,t?(s[u]||"none"!==n||(r.style.display=""),""===r.style.display&&S(r)&&(s[u]=L.access(r,"olddisplay",tb(r.nodeName)))):s[u]||(i=S(r),(n&&"none"!==n||!i)&&L.set(r,"olddisplay",i?n:o.css(r,"display"))));for(u=0;a>u;u++)r=e[u],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[u]||"":"none"));return e}function Kb(e,t,n,r,i){return new Kb.prototype.init(e,t,n,r,i)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=o.now()}function Tb(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ub(e,t,n){for(var r,i=(Rb[t]||[]).concat(Rb["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Vb(e,t,n){var r,i,s,u,a,f,l,c=this,h={},p=e.style,d=e.nodeType&&S(e),v=L.get(e,"fxshow");n.queue||(a=o._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,o.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=o.css(e,"display"),"none"===l&&(l=tb(e.nodeName)),"inline"===l&&"none"===o.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Nb.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;d=!0}h[r]=v&&v[r]||o.style(e,r)}if(!o.isEmptyObject(h)){v?"hidden"in v&&(d=v.hidden):v=L.access(e,"fxshow",{}),s&&(v.hidden=!d),d?o(e).show():c.done(function(){o(e).hide()}),c.done(function(){var t;L.remove(e,"fxshow");for(t in h)o.style(e,t,h[t])});for(r in h)u=Ub(d?v[r]:0,r,c),r in v||(v[r]=u.start,d&&(u.end=u.start,u.start="width"===r||"height"===r?1:0))}}function Wb(e,t){var n,r,i,s,u;for(n in e)if(r=o.camelCase(n),i=t[r],s=e[n],o.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),u=o.cssHooks[r],u&&"expand"in u){s=u.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function Xb(e,t,n){var r,i,s=0,u=Qb.length,a=o.Deferred().always(function(){delete f.elem}),f=function(){if(i)return!1;for(var t=Lb||Sb(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,s=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(s);return a.notifyWith(e,[l,s,n]),1>s&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:o.extend({},t),opts:o.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Lb||Sb(),duration:n.duration,tweens:[],createTween:function(t,n){var r=o.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wb(c,l.opts.specialEasing);u>s;s++)if(r=Qb[s].call(l,e,c,l.opts))return r;return o.map(c,Ub,l),o.isFunction(l.opts.start)&&l.opts.start.call(e,l),o.fx.timer(o.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function rc(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(o.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function sc(e,t,n,r){function u(l){var h;return i[l]=!0,o.each(e[l]||[],function(e,o){var a=o(t,n,r);return"string"!=typeof a||s||i[a]?s?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var i={},s=e===oc;return u(t.dataTypes[0])||!i["*"]&&u("*")}function tc(e,t){var n,r,i=o.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&o.extend(!0,e,r),e}function uc(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function vc(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Bc(e,t,n,r){var i;if(o.isArray(t))o.each(t,function(t,i){n||xc.test(e)?r(e,i):Bc(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==o.type(t))r(e,t);else for(i in t)Bc(e+"["+i+"]",t[i],n,r)}function Kc(e){return o.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m=a.document,n="2.1.0",o=function(e,t){return new o.fn.init(e,t)},p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};o.fn=o.prototype={jquery:n,constructor:o,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=o.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return o.each(this,e,t)},map:function(e){return this.pushStack(o.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},o.extend=o.fn.extend=function(){var e,t,n,r,i,s,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||o.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)n=u[t],r=e[t],u!==r&&(l&&r&&(o.isPlainObject(r)||(i=o.isArray(r)))?(i?(i=!1,s=n&&o.isArray(n)?n:[]):s=n&&o.isPlainObject(n)?n:{},u[t]=o.extend(l,s,r)):void 0!==r&&(u[t]=r));return u},o.extend({expando:"jQuery"+(n+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===o.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isPlainObject:function(e){if("object"!==o.type(e)||e.nodeType||o.isWindow(e))return!1;try{if(e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=o.trim(a),a&&(1===a.indexOf("use strict")?(b=m.createElement("script"),b.text=a,m.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":k.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(s(Object(e))?o.merge(n,"string"==typeof e?[e]:e):f.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),o.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(t||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||o.guid++,i):void 0},now:Date.now,support:l}),o.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function rt(e,t,r,i){var s,o,u,a,f,h,v,m,w,E;if((t?t.ownerDocument||t:b)!==c&&l(t),t=t||c,r=r||[],!e||"string"!=typeof e)return r;if(1!==(a=t.nodeType)&&9!==a)return[];if(p&&!i){if(s=G.exec(e))if(u=s[1]){if(9===a){if(o=t.getElementById(u),!o||!o.parentNode)return r;if(o.id===u)return r.push(o),r}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&g(t,o)&&o.id===u)return r.push(o),r}else{if(s[2])return _.apply(r,t.getElementsByTagName(e)),r;if((u=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return _.apply(r,t.getElementsByClassName(u)),r}if(n.qsa&&(!d||!d.test(e))){if(m=v=y,w=t,E=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){h=dt(e),(v=t.getAttribute("id"))?m=v.replace(Z,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=h.length;while(f--)h[f]=m+vt(h[f]);w=Y.test(e)&&ht(t.parentNode)||t,E=h.join(",")}if(E)try{return _.apply(r,w.querySelectorAll(E)),r}catch(S){}finally{v||t.removeAttribute("id")}}}return xt(e.replace(R,"$1"),t,r,i)}function it(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function st(e){return e[y]=!0,e}function ot(e){var t=c.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ut(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function at(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e){return e&&typeof e.getElementsByTagName!==C&&e}function pt(){}function dt(e,t){var n,i,s,o,u,a,f,l=x[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=U.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=z.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(R," ")}),u=u.slice(n.length));for(o in r.filter)!(i=$[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?rt.error(e):x(e,a).slice(0)}function vt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function mt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=E++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[w,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[y]||(t[y]={}),(u=a[r])&&u[0]===w&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function yt(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function bt(e,t,n,r,i,s){return r&&!r[y]&&(r=bt(r)),i&&!i[y]&&(i=bt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||St(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:yt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=yt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=yt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function wt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],a=o||r.relative[" "],f=o?1:0,l=mt(function(e){return e===t},a,!0),c=mt(function(e){return P.call(t,e)>-1},a,!0),h=[function(e,n,r){return!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];s>f;f++)if(n=r.relative[e[f].type])h=[mt(gt(h),n)];else{if(n=r.filter[e[f].type].apply(null,e[f].matches),n[y]){for(i=++f;s>i;i++)if(r.relative[e[i].type])break;return bt(f>1&&gt(h),f>1&&vt(e.slice(0,f-1).concat({value:" "===e[f-2].type?"*":""})).replace(R,"$1"),n,i>f&&wt(e.slice(f,i)),s>i&&wt(e=e.slice(i)),s>i&&vt(e))}h.push(n)}return gt(h)}function Et(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,a,f,l){var h,p,d,v=0,m="0",g=s&&[],y=[],b=u,E=s||i&&r.find.TAG("*",l),S=w+=null==b?1:Math.random()||.1,x=E.length;for(l&&(u=o!==c&&o);m!==x&&null!=(h=E[m]);m++){if(i&&h){p=0;while(d=e[p++])if(d(h,o,a)){f.push(h);break}l&&(w=S)}n&&((h=!d&&h)&&v--,s&&g.push(h))}if(v+=m,n&&m!==v){p=0;while(d=t[p++])d(g,y,o,a);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=O.call(f));y=yt(y)}_.apply(f,y),l&&!s&&y.length>0&&v+t.length>1&&rt.uniqueSort(f)}return l&&(w=S,u=b),g};return n?st(s):s}function St(e,t,n){for(var r=0,i=t.length;i>r;r++)rt(e,t[r],n);return n}function xt(e,t,i,s){var u,a,f,l,c,h=dt(e);if(!s&&1===h.length){if(a=h[0]=h[0].slice(0),a.length>2&&"ID"===(f=a[0]).type&&n.getById&&9===t.nodeType&&p&&r.relative[a[1].type]){if(t=(r.find.ID(f.matches[0].replace(et,tt),t)||[])[0],!t)return i;e=e.slice(a.shift().value.length)}u=$.needsContext.test(e)?0:a.length;while(u--){if(f=a[u],r.relative[l=f.type])break;if((c=r.find[l])&&(s=c(f.matches[0].replace(et,tt),Y.test(a[0].type)&&ht(t.parentNode)||t))){if(a.splice(u,1),e=s.length&&vt(a),!e)return _.apply(i,s),i;break}}}return o(e,h)(s,t,!p,i,Y.test(e)&&ht(t.parentNode)||t),i}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y="sizzle"+ -(new Date),b=e.document,w=0,E=0,S=it(),x=it(),T=it(),N=function(e,t){return e===t&&(f=!0),0},C="undefined",k=1<<31,L={}.hasOwnProperty,A=[],O=A.pop,M=A.push,_=A.push,D=A.slice,P=A.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=j.replace("w","w#"),I="\\["+B+"*("+j+")"+B+"*(?:([*^$|!~]?=)"+B+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+F+")|)|)"+B+"*\\]",q=":("+j+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),U=new RegExp("^"+B+"*,"+B+"*"),z=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),W=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),X=new RegExp(q),V=new RegExp("^"+F+"$"),$={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+H+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,Z=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),tt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{_.apply(A=D.call(b.childNodes),b.childNodes),A[b.childNodes.length].nodeType}catch(nt){_={apply:A.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=rt.support={},s=rt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},l=rt.setDocument=function(e){var t,i=e?e.ownerDocument||e:b,o=i.defaultView;return i!==c&&9===i.nodeType&&i.documentElement?(c=i,h=i.documentElement,p=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){l()},!1):o.attachEvent&&o.attachEvent("onunload",function(){l()})),n.attributes=ot(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ot(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(i.getElementsByClassName)&&ot(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=ot(function(e){return h.appendChild(e).id=y,!i.getElementsByName||!i.getElementsByName(y).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==C&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==C&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==C?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==C&&p?t.getElementsByClassName(e):void 0},v=[],d=[],(n.qsa=Q.test(i.querySelectorAll))&&(ot(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&d.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||d.push("\\["+B+"*(?:value|"+H+")"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&d.push("name"+B+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(n.matchesSelector=Q.test(m=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){n.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=d.length&&new RegExp(d.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),g=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},N=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===b&&g(b,e)?-1:t===i||t.ownerDocument===b&&g(b,t)?1:a?P.call(a,e)-P.call(a,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],l=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:a?P.call(a,e)-P.call(a,t):0;if(s===o)return at(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)l.unshift(n);while(u[r]===l[r])r++;return r?at(u[r],l[r]):u[r]===b?-1:l[r]===b?1:0},i):c},rt.matches=function(e,t){return rt(e,null,null,t)},rt.matchesSelector=function(e,t){if((e.ownerDocument||e)!==c&&l(e),t=t.replace(W,"='$1']"),!(!n.matchesSelector||!p||v&&v.test(t)||d&&d.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return rt(t,c,null,[e]).length>0},rt.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},rt.attr=function(e,t){(e.ownerDocument||e)!==c&&l(e);var i=r.attrHandle[t.toLowerCase()],s=i&&L.call(r.attrHandle,t.toLowerCase())?i(e,t,!p):void 0;return void 0!==s?s:n.attributes||!p?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},rt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},rt.uniqueSort=function(e){var t,r=[],i=0,s=0;if(f=!n.detectDuplicates,a=!n.sortStable&&e.slice(0),e.sort(N),f){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return a=null,e},i=rt.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=rt.selectors={cacheLength:50,createPseudo:st,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||rt.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&rt.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return $.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:n&&X.test(n)&&(t=dt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(et,tt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==C&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=rt.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),b=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&b){l=m[y]||(m[y]={}),f=l[e]||[],p=f[0]===w&&f[1],h=f[0]===w&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[w,p,h];break}}else if(b&&(f=(t[y]||(t[y]={}))[e])&&f[0]===w)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(b&&((c[y]||(c[y]={}))[e]=[w,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||rt.error("unsupported pseudo: "+e);return i[y]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=P.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:st(function(e){var t=[],n=[],r=o(e.replace(R,"$1"));return r[y]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return rt(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:st(function(e){return V.test(e||"")||rt.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[0>n?n+t:n]}),even:ct(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:ct(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ft(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=lt(t);return pt.prototype=r.filters=r.pseudos,r.setFilters=new pt,o=rt.compile=function(e,t){var n,r=[],i=[],s=T[e+" "];if(!s){t||(t=dt(e)),n=t.length;while(n--)s=wt(t[n]),s[y]?r.push(s):i.push(s);s=T(e,Et(i,r))}return s},n.sortStable=y.split("").sort(N).join("")===y,n.detectDuplicates=!!f,l(),n.sortDetached=ot(function(e){return 1&e.compareDocumentPosition(c.createElement("div"))}),ot(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ut("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ot(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ut("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ot(function(e){return null==e.getAttribute("disabled")})||ut(H,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),rt}(a);o.find=t,o.expr=t.selectors,o.expr[":"]=o.expr.pseudos,o.unique=t.uniqueSort,o.text=t.getText,o.isXMLDoc=t.isXML,o.contains=t.contains;var u=o.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;o.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?o.find.matchesSelector(r,e)?[r]:[]:o.find.matches(e,o.grep(t,function(e){return 1===e.nodeType}))},o.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(o(e).filter(function(){for(t=0;n>t;t++)if(o.contains(i[t],this))return!0}));for(t=0;n>t;t++)o.find(e,i[t],r);return r=this.pushStack(n>1?o.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?o(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=o.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof o?t[0]:t,o.merge(this,o.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),v.test(n[1])&&o.isPlainObject(t))for(n in t)o.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=m.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=m,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):o.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(o):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),o.makeArray(e,this))};A.prototype=o.fn,y=o(m);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};o.extend({dir:function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&o(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),o.fn.extend({has:function(e){var t=o(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(o.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,s=[],a=u.test(e)||"string"!=typeof e?o(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&o.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?o.unique(s):s)},index:function(e){return e?"string"==typeof e?g.call(o(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(o.unique(o.merge(this.get(),o(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),o.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return o.dir(e,"parentNode")},parentsUntil:function(e,t,n){return o.dir(e,"parentNode",n)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return o.dir(e,"nextSibling")},prevAll:function(e){return o.dir(e,"previousSibling")},nextUntil:function(e,t,n){return o.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return o.dir(e,"previousSibling",n)},siblings:function(e){return o.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return o.sibling(e.firstChild)},contents:function(e){return e.contentDocument||o.merge([],e.childNodes)}},function(e,t){o.fn[e]=function(n,r){var i=o.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=o.filter(r,i)),this.length>1&&(C[e]||o.unique(i),B.test(e)&&i.reverse()),this.pushStack(i)}});var E=/\S+/g,F={};o.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):o.extend({},e);var t,n,r,i,s,u,a=[],f=!e.once&&[],l=function(o){for(t=e.memory&&o,n=!0,u=i||0,i=0,s=a.length,r=!0;a&&s>u;u++)if(a[u].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var n=a.length;!function u(t){o.each(t,function(t,n){var r=o.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==r&&u(n)})}(arguments),r?s=a.length:t&&(i=n,l(t))}return this},remove:function(){return a&&o.each(arguments,function(e,t){var n;while((n=o.inArray(t,a,n))>-1)a.splice(n,1),r&&(s>=n&&s--,u>=n&&u--)}),this},has:function(e){return e?o.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],s=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||n&&!f||(t=t||[],t=[e,t.slice?t.slice():t],r?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},o.extend({Deferred:function(e){var t=[["resolve","done",o.Callbacks("once memory"),"resolved"],["reject","fail",o.Callbacks("once memory"),"rejected"],["notify","progress",o.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return o.Deferred(function(n){o.each(t,function(t,s){var u=o.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&o.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?o.extend(e,r):r}},i={};return r.pipe=r.then,o.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&o.isFunction(e.promise)?r:0,s=1===i?e:o.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},a,f,l;if(r>1)for(a=new Array(r),f=new Array(r),l=new Array(r);r>t;t++)n[t]&&o.isFunction(n[t].promise)?n[t].promise().done(u(t,l,n)).fail(s.reject).progress(u(t,f,a)):--i;return i||s.resolveWith(l,n),s.promise()}});var H;o.fn.ready=function(e){return o.ready.promise().done(e),this},o.extend({isReady:!1,readyWait:1,holdReady:function(e){e?o.readyWait++:o.ready(!0)},ready:function(e){(e===!0?--o.readyWait:o.isReady)||(o.isReady=!0,e!==!0&&--o.readyWait>0||(H.resolveWith(m,[o]),o.fn.trigger&&o(m).trigger("ready").off("ready")))}}),o.ready.promise=function(e){return H||(H=o.Deferred(),"complete"===m.readyState?setTimeout(o.ready):(m.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},o.ready.promise();var J=o.access=function(e,t,n,r,i,s,u){var a=0,f=e.length,l=null==n;if("object"===o.type(n)){i=!0;for(a in n)o.access(e,t,a,n[a],!0,s,u)}else if(void 0!==r&&(i=!0,o.isFunction(r)||(u=!0),l&&(u?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(o(e),n)})),t))for(;f>a;a++)t(e[a],n,u?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):f?t(e[0],n):s};o.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=o.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=K.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,o.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),s=this.cache[i];if("string"==typeof t)s[t]=n;else if(o.isEmptyObject(s))o.extend(this.cache[i],t);else for(r in t)s[r]=t[r];return s},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,o.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,s=this.key(e),u=this.cache[s];if(void 0===t)this.cache[s]={};else{o.isArray(t)?r=t.concat(t.map(o.camelCase)):(i=o.camelCase(t),t in u?r=[t,i]:(r=i,r=r in u?[r]:r.match(E)||[])),n=r.length;while(n--)delete u[r[n]]}},hasData:function(e){return!o.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;o.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),o.fn.extend({data:function(e,t){var n,r,i,s=this[0],u=s&&s.attributes;if(void 0===e){if(this.length&&(i=M.get(s),1===s.nodeType&&!L.get(s,"hasDataAttrs"))){n=u.length;while(n--)r=u[n].name,0===r.indexOf("data-")&&(r=o.camelCase(r.slice(5)),P(s,r,i[r]));L.set(s,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var n,r=o.camelCase(e);if(s&&void 0===t){if(n=M.get(s,e),void 0!==n)return n;if(n=M.get(s,r),void 0!==n)return n;if(n=P(s,r,void 0),void 0!==n)return n}else this.each(function(){var n=M.get(this,r);M.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),o.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=L.get(e,t),n&&(!r||o.isArray(n)?r=L.access(e,t,o.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=o.queue(e,t),r=n.length,i=n.shift(),s=o._queueHooks(e,t),u=function(){o.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,u,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return L.get(e,n)||L.access(e,n,{empty:o.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",n])})})}}),o.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?o.queue(this[0],e):void 0===t?this:this.each(function(){var n=o.queue(this,e,t);o._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&o.dequeue(this,e)})},dequeue:function(e){return this.each(function(){o.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=o.Deferred(),s=this,u=this.length,a=function(){--r||i.resolveWith(s,[s])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)n=L.get(s[u],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===o.css(e,"display")||!o.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=m.createDocumentFragment(),t=e.appendChild(m.createElement("div"));t.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";l.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;o.event={global:{},add:function(e,t,n,r,i){var s,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){n.handler&&(s=n,n=s.handler,i=s.selector),n.guid||(n.guid=o.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof o!==U&&o.event.triggered!==t.type?o.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=o.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=o.event.special[d]||{},c=o.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&o.expr.match.needsContext.test(i),namespace:v.join(".")},s),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,r,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),o.event.global[d]=!0)}},remove:function(e,t,n,r,i){var s,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=o.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=s=p.length;while(s--)c=p[s],!i&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(s,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||o.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)o.event.remove(e,d+t[l],n,r,!0);o.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,n,r){var i,s,u,f,l,c,h,p=[n||m],d=j.call(e,"type")?e.type:e,v=j.call(e,"namespace")?e.namespace.split("."):[];if(s=u=n=n||m,3!==n.nodeType&&8!==n.nodeType&&!X.test(d+o.event.triggered)&&(d.indexOf(".")>=0&&(v=d.split("."),d=v.shift(),v.sort()),l=d.indexOf(":")<0&&"on"+d,e=e[o.expando]?e:new o.Event(d,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=v.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:o.makeArray(t,[e]),h=o.event.special[d]||{},r||!h.trigger||h.trigger.apply(n,t)!==!1)){if(!r&&!h.noBubble&&!o.isWindow(n)){for(f=h.delegateType||d,X.test(f+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),u=s;u===(n.ownerDocument||m)&&p.push(u.defaultView||u.parentWindow||a)}i=0;while((s=p[i++])&&!e.isPropagationStopped())e.type=i>1?f:h.bindType||d,c=(L.get(s,"events")||{})[e.type]&&L.get(s,"handle"),c&&c.apply(s,t),c=l&&s[l],c&&c.apply&&o.acceptData(s)&&(e.result=c.apply(s,t),e.result===!1&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||h._default&&h._default.apply(p.pop(),t)!==!1||!o.acceptData(n)||l&&o.isFunction(n[d])&&!o.isWindow(n)&&(u=n[l],u&&(n[l]=null),o.event.triggered=d,n[d](),o.event.triggered=void 0,u&&(n[l]=u)),e.result}},dispatch:function(e){e=o.event.fix(e);var t,n,r,i,s,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=o.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=o.event.handlers.call(this,e,f),t=0;while((i=u[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem,n=0;while((s=i.handlers[n++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,r=((o.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,s,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)s=t[n],i=s.selector+" ",void 0===r[i]&&(r[i]=s.needsContext?o(i,this).index(f)>=0:o.find(i,this,null,[f]).length),r[i]&&r.push(s);r.length&&u.push({elem:f,handlers:r})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||m,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[o.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=W.test(i)?this.mouseHooks:V.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new o.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=m),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&o.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return o.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=o.extend(new o.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?o.event.trigger(i,null,t):o.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},o.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},o.Event=function(e,t){return this instanceof o.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.getPreventDefault&&e.getPreventDefault()?Z:$):this.type=e,t&&o.extend(this,t),this.timeStamp=e&&e.timeStamp||o.now(),void (this[o.expando]=!0)):new o.Event(e,t)},o.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z,this.stopPropagation()}},o.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){o.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!o.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),l.focusinBubbles||o.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){o.event.simulate(t,e.target,o.event.fix(e),!0)};o.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=L.access(r,t);i||r.addEventListener(e,n,!0),L.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=L.access(r,t)-1;i?L.access(r,t,i):(r.removeEventListener(e,n,!0),L.remove(r,t))}}}),o.fn.extend({on:function(e,t,n,r,i){var s,u;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(u in e)this.on(u,t,n,e[u],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=$;else if(!r)return this;return 1===i&&(s=r,r=function(e){return o().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=o.guid++)),this.each(function(){o.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,o(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=$),this.each(function(){o.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){o.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?o.event.trigger(e,t,n,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,o.extend({clone:function(e,t,n){var r,i,s,u,a=e.cloneNode(!0),f=o.contains(e.ownerDocument,e);if(!(l.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||o.isXMLDoc(e)))for(u=ob(a),s=ob(e),r=0,i=s.length;i>r;r++)pb(s[r],u[r]);if(t)if(n)for(s=s||ob(e),u=u||ob(a),r=0,i=s.length;i>r;r++)nb(s[r],u[r]);else nb(e,a);return u=ob(a,"script"),u.length>0&&mb(u,!f&&ob(e,"script")),a},buildFragment:function(e,t,n,r){for(var i,s,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(i=e[p],i||0===i)if("object"===o.type(i))o.merge(h,i.nodeType?[i]:i);else if(cb.test(i)){s=s||c.appendChild(t.createElement("div")),u=(bb.exec(i)||["",""])[1].toLowerCase(),a=ib[u]||ib._default,s.innerHTML=a[1]+i.replace(ab,"<$1></$2>")+a[2],l=a[0];while(l--)s=s.lastChild;o.merge(h,s.childNodes),s=c.firstChild,s.textContent=""}else h.push(t.createTextNode(i));c.textContent="",p=0;while(i=h[p++])if((!r||-1===o.inArray(i,r))&&(f=o.contains(i.ownerDocument,i),s=ob(c.appendChild(i),"script"),f&&mb(s),n)){l=0;while(i=s[l++])fb.test(i.type||"")&&n.push(i)}return c},cleanData:function(e){for(var t,n,r,i,s,u,a=o.event.special,f=0;void 0!==(n=e[f]);f++){if(o.acceptData(n)&&(s=n[L.expando],s&&(t=L.cache[s]))){if(r=Object.keys(t.events||{}),r.length)for(u=0;void 0!==(i=r[u]);u++)a[i]?o.event.remove(n,i):o.removeEvent(n,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[n[M.expando]]}}}),o.fn.extend({text:function(e){return J(this,function(e){return void 0===e?o.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?o.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||o.cleanData(ob(n)),n.parentNode&&(t&&o.contains(n.ownerDocument,n)&&mb(ob(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(o.cleanData(ob(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return o.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!db.test(e)&&!ib[(bb.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ab,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(o.cleanData(ob(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,o.cleanData(ob(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,n){t=e.apply([],t);var r,i,s,u,a,f,c=0,h=this.length,p=this,d=h-1,v=t[0],m=o.isFunction(v);if(m||h>1&&"string"==typeof v&&!l.checkClone&&eb.test(v))return this.each(function(e){var r=p.eq(e);m&&(t[0]=v.call(this,e,r.html())),r.domManip(t,n)});if(h&&(r=o.buildFragment(t,this[0].ownerDocument,!1,this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(s=o.map(ob(r,"script"),kb),u=s.length;h>c;c++)a=r,c!==d&&(a=o.clone(a,!0,!0),u&&o.merge(s,ob(a,"script"))),n.call(this[c],a,c);if(u)for(f=s[s.length-1].ownerDocument,o.map(s,lb),c=0;u>c;c++)a=s[c],fb.test(a.type||"")&&!L.access(a,"globalEval")&&o.contains(f,a)&&(a.src?o._evalUrl&&o._evalUrl(a.src):o.globalEval(a.textContent.replace(hb,"")))}return this}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){o.fn[e]=function(e){for(var n,r=[],i=o(e),s=i.length-1,u=0;s>=u;u++)n=u===s?this:this.clone(!0),o(i[u])[t](n),f.apply(r,n.get());return this.pushStack(r)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function u(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}var e,t,n="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",r=m.documentElement,i=m.createElement("div"),s=m.createElement("div");s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",i.appendChild(s),a.getComputedStyle&&o.extend(l,{pixelPosition:function(){return u(),e},boxSizingReliable:function(){return null==t&&u(),t},reliableMarginRight:function(){var e,t=s.appendChild(m.createElement("div"));return t.style.cssText=s.style.cssText=n,t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),s.innerHTML="",e}})}(),o.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:0,fontWeight:400},Eb=["Webkit","O","Moz","ms"];o.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xb(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,u,a=o.camelCase(t),f=e.style;return t=o.cssProps[a]||(o.cssProps[a]=Fb(f,a)),u=o.cssHooks[t]||o.cssHooks[a],void 0===n?u&&"get"in u&&void 0!==(i=u.get(e,!1,r))?i:f[t]:(s=typeof n,"string"===s&&(i=Bb.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(o.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||o.cssNumber[a]||(n+="px"),l.clearCloneStyle||""!==n||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(n=u.set(e,n,r))||(f[t]="",f[t]=n)),void 0)}},css:function(e,t,n,r){var i,s,u,a=o.camelCase(t);return t=o.cssProps[a]||(o.cssProps[a]=Fb(e.style,a)),u=o.cssHooks[t]||o.cssHooks[a],u&&"get"in u&&(i=u.get(e,!0,n)),void 0===i&&(i=xb(e,t,r)),"normal"===i&&t in Db&&(i=Db[t]),""===n||n?(s=parseFloat(i),n===!0||o.isNumeric(s)?s||0:i):i}}),o.each(["height","width"],function(e,t){o.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&zb.test(o.css(e,"display"))?o.swap(e,Cb,function(){return Ib(e,t,r)}):Ib(e,t,r):void 0},set:function(e,n,r){var i=r&&wb(e);return Gb(e,n,r?Hb(e,t,r,"border-box"===o.css(e,"boxSizing",!1,i),i):0)}}}),o.cssHooks.marginRight=yb(l.reliableMarginRight,function(e,t){return t?o.swap(e,{display:"inline-block"},xb,[e,"marginRight"]):void 0}),o.each({margin:"",padding:"",border:"Width"},function(e,t){o.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ub.test(e)||(o.cssHooks[e+t].set=Gb)}),o.fn.extend({css:function(e,t){return J(this,function(e,t,n){var r,i,s={},u=0;if(o.isArray(t)){for(r=wb(e),i=t.length;i>u;u++)s[t[u]]=o.css(e,t[u],!1,r);return s}return void 0!==n?o.style(e,t,n):o.css(e,t)},e,t,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?o(this).show():o(this).hide()})}}),o.Tween=Kb,Kb.prototype={constructor:Kb,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(o.cssNumber[n]?"":"px")},cur:function(){var e=Kb.propHooks[this.prop];return e&&e.get?e.get(this):Kb.propHooks._default.get(this)},run:function(e){var t,n=Kb.propHooks[this.prop];return this.pos=t=this.options.duration?o.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=o.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){o.fx.step[e.prop]?o.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[o.cssProps[e.prop]]||o.cssHooks[e.prop])?o.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},o.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},o.fx=Kb.prototype.init,o.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ob.exec(t),s=i&&i[3]||(o.cssNumber[e]?"":"px"),u=(o.cssNumber[e]||"px"!==s&&+r)&&Ob.exec(o.css(n.elem,e)),a=1,f=20;if(u&&u[3]!==s){s=s||u[3],i=i||[],u=+r||1;do a=a||".5",u/=a,o.style(n.elem,e,u+s);while(a!==(a=n.cur()/r)&&1!==a&&--f)}return i&&(u=n.start=+u||+r||0,n.unit=s,n.end=i[1]?u+(i[1]+1)*i[2]:+i[2]),n}]};o.Animation=o.extend(Xb,{tweener:function(e,t){o.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Rb[n]=Rb[n]||[],Rb[n].unshift(t)},prefilter:function(e,t){t?Qb.unshift(e):Qb.push(e)}}),o.speed=function(e,t,n){var r=e&&"object"==typeof e?o.extend({},e):{complete:n||!n&&t||o.isFunction(e)&&e,duration:e,easing:n&&t||t&&!o.isFunction(t)&&t};return r.duration=o.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in o.fx.speeds?o.fx.speeds[r.duration]:o.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){o.isFunction(r.old)&&r.old.call(this),r.queue&&o.dequeue(this,r.queue)},r},o.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=o.isEmptyObject(e),s=o.speed(t,n,r),u=function(){var t=Xb(this,o.extend({},e),s);(i||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,i||s.queue===!1?this.each(u):this.queue(s.queue,u)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=o.timers,u=L.get(this);if(i)u[i]&&u[i].stop&&r(u[i]);else for(i in u)u[i]&&u[i].stop&&Pb.test(i)&&r(u[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&o.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=L.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=o.timers,u=r?r.length:0;for(n.finish=!0,o.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;u>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),o.each(["toggle","show","hide"],function(e,t){var n=o.fn[t];o.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Tb(t,!0),e,r,i)}}),o.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){o.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),o.timers=[],o.fx.tick=function(){var e,t=0,n=o.timers;for(Lb=o.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||o.fx.stop(),Lb=void 0},o.fx.timer=function(e){o.timers.push(e),e()?o.fx.start():o.timers.pop()},o.fx.interval=13,o.fx.start=function(){Mb||(Mb=setInterval(o.fx.tick,o.fx.interval))},o.fx.stop=function(){clearInterval(Mb),Mb=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(e,t){return e=o.fx?o.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=m.createElement("input"),t=m.createElement("select"),n=t.appendChild(m.createElement("option"));e.type="checkbox",l.checkOn=""!==e.value,l.optSelected=n.selected,t.disabled=!0,l.optDisabled=!n.disabled,e=m.createElement("input"),e.value="t",e.type="radio",l.radioValue="t"===e.value}();var Yb,Zb,$b=o.expr.attrHandle;o.fn.extend({attr:function(e,t){return J(this,o.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){o.removeAttr(this,e)})}}),o.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===U?o.prop(e,t,n):(1===s&&o.isXMLDoc(e)||(t=t.toLowerCase(),r=o.attrHooks[t]||(o.expr.match.bool.test(t)?Zb:Yb)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=o.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void o.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&1===e.nodeType)while(n=s[i++])r=o.propFix[n]||n,o.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!l.radioValue&&"radio"===t&&o.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Zb={set:function(e,t,n){return t===!1?o.removeAttr(e,n):e.setAttribute(n,n),n}},o.each(o.expr.match.bool.source.match(/\w+/g),function(e,t){var n=$b[t]||o.find.attr;$b[t]=function(e,t,r){var i,s;return r||(s=$b[t],$b[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,$b[t]=s),i}});var _b=/^(?:input|select|textarea|button)$/i;o.fn.extend({prop:function(e,t){return J(this,o.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[o.propFix[e]||e]})}}),o.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return s=1!==u||!o.isXMLDoc(e),s&&(t=o.propFix[t]||t,i=o.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_b.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),l.optSelected||(o.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;o.fn.extend({addClass:function(e){var t,n,r,i,s,u,a="string"==typeof e&&e,f=0,l=this.length;if(o.isFunction(e))return this.each(function(t){o(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(n=this[f],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ac," "):" ")){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");u=o.trim(r),n.className!==u&&(n.className=u)}return this},removeClass:function(e){var t,n,r,i,s,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(o.isFunction(e))return this.each(function(t){o(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(n=this[f],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ac," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");u=e?o.trim(r):"",n.className!==u&&(n.className=u)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(o.isFunction(e)?function(n){o(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n){var t,r=0,i=o(this),s=e.match(E)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else(n===U||"boolean"===n)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ac," ").indexOf(t)>=0)return!0;return!1}});var bc=/\r/g;o.fn.extend({val:function(e){var t,n,r,i=this[0];if(arguments.length)return r=o.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,o(this).val()):e,null==i?i="":"number"==typeof i?i+="":o.isArray(i)&&(i=o.map(i,function(e){return null==e?"":e+""})),t=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=o.valHooks[i.type]||o.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(bc,""):null==n?"":n)}}),o.extend({valHooks:{select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,u=s?null:[],a=s?i+1:r.length,f=0>i?a:s?i:0;a>f;f++)if(n=r[f],!(!n.selected&&f!==i||(l.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&o.nodeName(n.parentNode,"optgroup"))){if(t=o(n).val(),s)return t;u.push(t)}return u},set:function(e,t){var n,r,i=e.options,s=o.makeArray(t),u=i.length;while(u--)r=i[u],(r.selected=o.inArray(o(r).val(),s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(e,t){return o.isArray(t)?e.checked=o.inArray(o(e).val(),t)>=0:void 0}},l.checkOn||(o.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),o.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){o.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),o.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cc=o.now(),dc=/\?/;o.parseJSON=function(e){return JSON.parse(e+"")},o.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&o.error("Invalid XML: "+e),t};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=m.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[],o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":o.parseJSON,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?tc(tc(e,o.ajaxSettings),t):tc(o.ajaxSettings,e)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(e,t){function T(e,t,s,a){var l,g,y,w,E,x=t;2!==b&&(b=2,u&&clearTimeout(u),n=void 0,i=a||"",S.readyState=e>0?4:0,l=e>=200&&300>e||304===e,s&&(w=uc(c,S,s)),w=vc(c,w,S,l),l?(c.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(o.lastModified[r]=E),E=S.getResponseHeader("etag"),E&&(o.etag[r]=E)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,S]):d.rejectWith(h,[S,x,y]),S.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,x]),f&&(p.trigger("ajaxComplete",[S,c]),--o.active||o.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,s,u,a,f,l,c=o.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?o(h):o.event,d=o.Deferred(),v=o.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s){s={};while(t=ic.exec(i))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return n&&n.abort(t),T(0,t),this}};if(d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=o.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(a=mc.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ec[1]&&a[2]===ec[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=o.param(c.data,c.traditional)),sc(nc,c,t,S),2===b)return S;f=c.global,f&&0===o.active++&&o.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!kc.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(dc.test(r)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=hc.test(r)?r.replace(hc,"$1_="+cc++):r+(dc.test(r)?"&":"?")+"_="+cc++)),c.ifModified&&(o.lastModified[r]&&S.setRequestHeader("If-Modified-Since",o.lastModified[r]),o.etag[r]&&S.setRequestHeader("If-None-Match",o.etag[r])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+pc+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)S.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})S[l](c[l]);if(n=sc(oc,c,t,S)){S.readyState=1,f&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,n.send(g,T)}catch(x){if(!(2>b))throw x;T(-1,x)}}else T(-1,"No Transport");return S}return S.abort()},getJSON:function(e,t,n){return o.get(e,t,n,"json")},getScript:function(e,t){return o.get(e,void 0,t,"script")}}),o.each(["get","post"],function(e,t){o[t]=function(e,n,r,i){return o.isFunction(n)&&(i=i||r,r=n,n=void 0),o.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){o.fn[t]=function(e){return this.on(t,e)}}),o._evalUrl=function(e){return o.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},o.fn.extend({wrapAll:function(e){var t;return o.isFunction(e)?this.each(function(t){o(this).wrapAll(e.call(this,t))}):(this[0]&&(t=o(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(o.isFunction(e)?function(t){o(this).wrapInner(e.call(this,t))}:function(){var t=o(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=o.isFunction(e);return this.each(function(n){o(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){o.nodeName(this,"body")||o(this).replaceWith(this.childNodes)}).end()}}),o.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},o.expr.filters.visible=function(e){return!o.expr.filters.hidden(e)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;o.param=function(e,t){var n,r=[],i=function(e,t){t=o.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=o.ajaxSettings&&o.ajaxSettings.traditional),o.isArray(e)||e.jquery&&!o.isPlainObject(e))o.each(e,function(){i(this.name,this.value)});else for(n in e)Bc(n,e[n],t,i);return r.join("&").replace(wc,"+")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=o.prop(this,"elements");return e?o.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!o(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var n=o(this).val();return null==n?null:o.isArray(n)?o.map(n,function(e){return{name:t.name,value:e.replace(yc,"\r\n")}}):{name:t.name,value:n.replace(yc,"\r\n")}}).get()}}),o.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=o.ajaxSettings.xhr();a.ActiveXObject&&o(a).on("unload",function(){for(var e in Dc)Dc[e]()}),l.cors=!!Fc&&"withCredentials"in Fc,l.ajax=Fc=!!Fc,o.ajaxTransport(function(e){var t;return l.cors||Fc&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Cc;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Dc[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Ec[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Dc[o]=t("abort"),s.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}:void 0}),o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return o.globalEval(e),e}}}),o.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),o.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=o("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gc.pop()||o.expando+"_"+cc++;return this[e]=!0,e}}),o.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,s,u=e.jsonp!==!1&&(Hc.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=o.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Hc,"$1"+r):e.jsonp!==!1&&(e.url+=(dc.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||o.error(r+" was not called"),s[0]},e.dataTypes[0]="json",i=a[r],a[r]=function(){s=arguments},n.always(function(){a[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gc.push(r)),s&&o.isFunction(i)&&i(s[0]),s=i=void 0}),"script"):void 0}),o.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||m;var r=v.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=o.buildFragment([e],t,i),i&&i.length&&o(i).remove(),o.merge([],r.childNodes))};var Ic=o.fn.load;o.fn.load=function(e,t,n){if("string"!=typeof e&&Ic)return Ic.apply(this,arguments);var r,i,s,u=this,a=e.indexOf(" ");return a>=0&&(r=e.slice(a),e=e.slice(0,a)),o.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),u.length>0&&o.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){s=arguments,u.html(r?o("<div>").append(o.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){u.each(n,s||[e.responseText,t,e])}),this},o.expr.filters.animated=function(e){return o.grep(o.timers,function(t){return e===t.elem}).length};var Jc=a.document.documentElement;o.offset={setOffset:function(e,t,n){var r,i,s,u,a,f,l,c=o.css(e,"position"),h=o(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),s=o.css(e,"top"),f=o.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(s+f).indexOf("auto")>-1,l?(r=h.position(),u=r.top,i=r.left):(u=parseFloat(s)||0,i=parseFloat(f)||0),o.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):h.css(p)}},o.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){o.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},s=r&&r.ownerDocument;if(s)return t=s.documentElement,o.contains(t,r)?(typeof r.getBoundingClientRect!==U&&(i=r.getBoundingClientRect()),n=Kc(s),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===o.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),o.nodeName(e[0],"html")||(r=e.offset()),r.top+=o.css(e[0],"borderTopWidth",!0),r.left+=o.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-o.css(n,"marginTop",!0),left:t.left-r.left-o.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Jc;while(e&&!o.nodeName(e,"html")&&"static"===o.css(e,"position"))e=e.offsetParent;return e||Jc})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;o.fn[e]=function(r){return J(this,function(e,r,i){var s=Kc(e);return void 0===i?s?s[t]:e[r]:void (s?s.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i)},e,r,arguments.length,null)}}),o.each(["top","left"],function(e,t){o.cssHooks[t]=yb(l.pixelPosition,function(e,n){return n?(n=xb(e,t),vb.test(n)?o(e).position()[t]+"px":n):void 0})}),o.each({Height:"height",Width:"width"},function(e,t){o.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){o.fn[r]=function(r,i){var s=arguments.length&&(n||"boolean"!=typeof r),u=n||(r===!0||i===!0?"margin":"border");return J(this,function(t,n,r){var i;return o.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?o.css(t,n,u):o.style(t,n,r,u)},t,s?r:void 0,s,null)}})}),o.fn.size=function(){return this.length},o.fn.andSelf=o.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return o});var Lc=a.jQuery,Mc=a.$;return o.noConflict=function(e){return a.$===o&&(a.$=Mc),e&&a.jQuery===o&&(a.jQuery=Lc),o},typeof b===U&&(a.jQuery=a.$=o),o}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?void (this._wrapped=e):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(null==e)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o=x.keys(e),i=0,s=o.length;s>i;i++)if(t.call(r,e[o[i]],o[i],e)===n)return;return e};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,i=-1/0;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=1/0,i=1/0;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;i>u&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return null==e?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,s=r.length;s>i;i++)r[i]===x&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();u||n.leading!==!1||(u=f);var l=t-(f-u);return r=this,i=arguments,0>=l?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):o||n.trailing===!1||(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;t>f?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},x.pairs=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){for(var t={},n=x.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if("[object Array]"==i){if(a=e.length,l=a==t.length)for(;a--&&(l=M(e[a],t[a],n,r)););}else{for(var c in e)if(x.has(e,c)&&(a++,!(l=x.has(t,c)&&M(e[c],t[c],n,r))))break;if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),function(){function e(e){throw e}function m(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n,e.wa=t.prototype}var t=!0,n=null,r=!1,i,s,o,u,a,f,l,c,h,p,d,v={}.hasOwnProperty;i=function(e,t,r,i,s){s==n&&(s=d),s.n(e),s.l(e),s.N(e),s.o(t),s.z(t),s.p(t.length,255),s.n(i),s.l(i),this.ce=e,this.bp=t,this.bq=i,r?(s.Ua(r),this.bs=r):this.bs={}},s=function(){function e(){}return e.ia=function(e){var t,n,r,i,s,o,u,a,f,e=this.Ob(e);u="";for(r=a=0,f=e.length;a<f;r=a+=3)t=e.charCodeAt(r),n=e.charCodeAt(r+1),r=e.charCodeAt(r+2),i=t>>2,t=(t&3)<<4|n>>4,s=(n&15)<<2|r>>6,o=r&63,isNaN(n)?s=o=64:isNaN(r)&&(o=64),u+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o);return u},e.lb=function(e){var t,n,r,i,s,o,u,a,e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");o="";for(s=u=0,a=e.length;u<a;s=u+=4)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(s)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(s+1)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(s+2)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(s+3)),t=t<<2|n>>4,n=(n&15)<<4|i>>2,r=(i&3)<<6|s,o+=String.fromCharCode(t),i!==64&&(o+=String.fromCharCode(n)),s!==64&&(o+=String.fromCharCode(r));return o=this.Nb(o)},e.Ob=function(e){var t,n,r,i,e=e.replace(/\r\n/g,"\n");n="";for(t=r=0,i=e.length;0<=i?r<i:r>i;t=0<=i?++r:--r)t=e.charCodeAt(t),t<128?n+=String.fromCharCode(t):(t>127&&t<2048?n+=String.fromCharCode(t>>6|192):(n+=String.fromCharCode(t>>12|224),n+=String.fromCharCode(t>>6&63|128)),n+=String.fromCharCode(t&63|128));return n},e.Nb=function(e){var t,n,r,i,s;s="";for(i=0;i<e.length;)t=e.charCodeAt(i),t<128?(s+=String.fromCharCode(t),i++):t>191&&t<224?(n=e.charCodeAt(i+1),s+=String.fromCharCode((t&31)<<6|n&63),i+=2):(n=e.charCodeAt(i+1),r=e.charCodeAt(i+2),s+=String.fromCharCode((t&15)<<12|(n&63)<<6|r&63),i+=3);return s},e}(),o=function(){function e(){}return e.bb=function(e){var t,n,r,i,s;t=1,n=0;for(r=i=0,s=e.length;0<=s?i<s:i>s;r=0<=s?++i:--i)r=e.charCodeAt(r),t+=r,n+=t;return t%=65521,n%=65521,n*65536+t},e}(),u=function(e){function t(e,r,i,s,o,u){u==n&&(u=d),u.M(s),t.wa.constructor.call(this,e,r,i,o),this.timed=s,this.br=0}return m(t,e),t}(i),a=function(){function i(){}var u;return u=function(e){var t,n;n={};try{t=s.lb(e),n=JSON.parse(t)}catch(r){console.log(r)}return n},i.ga=function(e,t){return(t?this.Da:"")+{install:"fit",session:"fs",lastPoll:"flp",firstPartyCookie:"fid"}[e]},i.i=t,i.appVersion="",i.O="",i.Ha=0,i.ka=Date.now(),i.Da=n,i.F=n,i.Ka=t,i.Bb=t,i.Qa=r,i.Ea=r,i.localStorage=r,i.fa=n,i.Ja="",i.referrer="",i.J=0,i.e=n,i.$=[],i.w=n,i.Y=5e3,i.ea=n,i.I=r,i.Z=n,i.h=function(e){if(this.Qa)return typeof e=="string"?this.g(""+e):this.g(""+e.name+"=>"+e.message)},i.g=function(e){if(this.Ea)return console.log("Flurry "+new Date+": "+e)},i.Ub=function(){},i.ub=function(){return this.g("getFlurryAgentVersion() called"),9},i.da=function(e){this.g("setAppVersion("+e+") called");try{return d.o(e),d.z(e),d.p(e.length,255),this.appVersion=e,this.e&&this.e.da(e),this.i=t}catch(n){return this.h(n)}},i.ua=function(e){this.g("setUserId("+e+") called");try{return d.j(this.e),d.o(e),d.z(e),d.p(e.length,"userId"),this.e.ua(e),this.i=t}catch(n){return this.h(n)}},i.ra=function(e){this.g("setGender("+e+") called");try{return d.j(this.e),d.o(e),d.Ta(e,{m:1,f:0}),this.e.ra(e),this.i=t}catch(n){return this.h(n)}},i.qa=function(e){this.g("setAge("+e+") called");try{return d.j(this.e),d.n(e),d.l(e),d.N(e),d.va(e),this.e.qa(e),this.i=t}catch(n){return this.h(n)}},i.sa=function(e,r,i){i==n&&(i=0),this.g("setLocation("+e+","+r+","+i+") called");try{return d.j(this.e),d.n(e),d.l(e),d.n(r),d.l(r),d.n(i),d.l(i),this.e.sa(e,r,i),this.i=t}catch(s){return this.h(s)}},i.mb=function(){this.Ja=navigator.platform},i.nb=function(){this.referrer=document.referrer},i.ib=function(){this.mb(),this.nb()},i.L=function(e){this.g("setSessionContinueSeconds("+e+") called");try{if(d.n(e),d.l(e),d.N(e),d.va(e),this.J=e,this.e)return this.e.L(e)}catch(t){return this.h(t)}},i.Jb=function(e){this.g("setShowErrorInLogEnabled("+e+") called");try{return d.M(e),this.Qa=e}catch(t){return this.h(t)}},i.Gb=function(e){this.g("setDebugLogEnabled("+e+") called");try{return d.M(e),this.Ea=e}catch(t){return this.h(t)}},i.Ib=function(e){this.g("setLocalStorageEnabled("+e+") called");try{d.M(e),this.localStorage=e}catch(t){this.h(t)}},i.kb=function(){var e,t,r=this;t=window.onfocus,window.onfocus=function(){r.g("ACTIVE"),t!=n&&t();if(r.e)return r.e.Ma()?r.ta():(r.A(),r.Ra(r.O))},e=window.onblur,window.onblur=function(){var t;r.g("PAUSE"),e!=n&&e();if(r.e&&(t=Date.now(),r.e.Pa(t),r.Q(),r.Bb))return r.q()}},i.jb=function(){var e;(e=parseInt(this.G("install")))?this.ka=e:this.K("install",this.ka)},i.Ca=function(){var e;(e=this.G("firstPartyCookie",r))?this.F=e:this.F!==n&&this.K("firstPartyCookie",this.F,r)},i.Fb=function(){this.Da=s.ia(this.O).replace("=","")+"_"},i.G=function(e,r){var i,s,o,u,a,f,l;r==n&&(r=t),a=this.ga(e,r),s=document.cookie.split(";");for(f=0,l=s.length;f<l;f++)if(i=s[f],u=i.indexOf("="),o=i.slice(0,u).trim(),o===a)return i.slice(u+1);return n},i.eb=function(){return this.G("install")!=n},i.ha=function(e){var r;return r==n&&(r=t),document.cookie=""+this.ga(e,r)+"=; expires='Thu, 01 Jan 1970 00:00:00 GMT'; path=/"},i.K=function(e,r,i){var s;i==n&&(i=t),s=new Date,s.setTime(Date.now()+31536e7),document.cookie=this.ga(e,i)+"="+r+"; expires="+s.toGMTString()+"; path=/"},i.ta=function(e){var t=this;try{e&&d.va(e*1e3-5e3),d.j(this.e)}catch(n){this.h(n);return}return this.Q(),e&&(this.Y=e*1e3),this.fa=window.setInterval(function(){return t.ea=Date.now(),t.K("lastPoll",t.ea),t.q()},this.Y),this.ea&&Date.now()-this.ea>this.Y&&this.q(),this.Y/1e3},i.Q=function(){this.fa&&window.clearInterval(this.fa),this.fa=n},i.$a=function(){var e,t,r;return t=this.G("session"),e=this.G("lastPoll"),this.ha("session"),this.ha("lastPoll"),t!=n&&e!=n&&(this.g("found paused session"),t=u(t),t[p.c.r]=e,e=new p(t),this.J&&e.L(this.J),e.Ma()&&(this.g("paused session resumed"),r=e)),r||(this.g("creating new session"),r=new p,this.J&&r.L(this.J)),this.appVersion&&r.da(this.appVersion),r},i.Ra=function(n){this.g("startSession("+n+") called");try{if(!this.e)return d.o(n),d.z(n),d.p(n,255),this.O=n,this.Fb(),this.i=t,this.e=this.$a(),this.jb(),this.Ca(),this.eb()||(this.Ka=r,this.A(),e("CookieError=>session ending since cookies not enabled!")),this.Ha||(this.ib(),this.kb()),this.ta(),this.q(),this.Ha++}catch(i){return this.h(i)}},i.A=function(){this.g("endSession() called");try{if(this.Q(),this.e)return this.e.A(),this.i=t,this.Ka?this.q():this.$.push(this.e),this.e=n,this.ha("session")}catch(e){return this.h(e)}},i.yb=function(){this.g("pauseSession() called");try{return this.Q(),this.Na(),this.e?(this.q(),this.e=n):this.g("no session to pause!")}catch(e){return this.h(e)}},i.Na=function(){var e;try{d.j(this.e),e=Date.now(),this.e.Pa(e),this.Tb=e,this.K("session",this.e.Ya()),this.K("lastPoll",e)}catch(t){this.h(t)}},i.t=function(e,i,s){i==n&&(i={}),s==n&&(s=r),this.g("logEvent("+e+","+i+","+s+") called");try{return d.j(this.e),this.e.Wa(e,i,s),this.i=t}catch(o){return this.h(o)}},i.qb=function(e,r){r==n&&(r=n),this.g("endTimedEvent("+e+","+r+") called");try{return d.j(this.e),this.e.pb(e,r),this.i=t}catch(i){return this.h(i)}},i.k=function(){var e,t,n,r,i;t=[];try{d.j(this.e),i=this.e[p.c.k];for(n=0,r=i.length;n<r;n++)e=i[n],t.push(e.bp)}catch(s){this.h(s)}return t},i.Hb=function(e){this.g("setEventLogging("+e+") called");try{return d.j(this.e),d.M(e),this.e.ja=e}catch(t){return this.h(t)}},i.U=function(e,r,i,s){r==n&&(r=0),i==n&&(i="USD"),s==n&&(s={}),this.g("logPurchase("+e+","+r+","+i+","+s+") called");try{return d.j(this.e),this.e.Xa(e,r,i,s),this.i=t}catch(o){return this.h(o)}},i.wb=function(e,r,i){i==n&&(i=0),this.g("logError("+e+","+r+","+i+") called");try{return d.j(this.e),this.e.Va(e,r,i),this.i=t}catch(s){return this.h(s)}},i.q=function(){var e;this.g("REQUEST INITIATED");try{if(!this.I){this.w?this.w.Kb():this.i&&(e=new h,e.Za(this.appVersion,this.O,this.ka,this.Ja,this.Rb,this.referrer,this.e,this.$,this.F),this.w=e.request,this.fb(e));if(this.w)return this.Na(),this.rb(JSON.stringify(this.w))}}catch(t){return this.h(t)}},i.fb=function(e){this.e.gb(e.sessionIncluded.events,e.sessionIncluded.purchases,e.sessionIncluded.errors),this.$=this.$.slice(e.sessionsIncluded),e.level===0&&(this.i=r)},i.rb=function(e){var n,i=this;return this.g("REQUEST EXECUTED"),this.I=t,this.Z=window.setInterval(function(){return i.P(r)},1e4),n=document.createElement("script"),n.type="text/javascript",n.async=t,n.src=encodeURI(c.Fa+"?d="+s.ia(e)+"&c="+o.bb(e)),e=document.getElementsByTagName("script"),e[0].parentNode.insertBefore(n,e[0])},i.Cb=function(i){this.g("RESPONSE RECEIVED");try{this.I||e("ResponseError=>request considered timed out!"),typeof i!="object"&&(this.P(r),e("ResponseError=>input is not a valid object!")),i.a!=n&&i.a>0?this.P(t):this.P(r),i.b!=n&&this.Ib(i.b),i.d!=n&&(this.F=i.d,this.Ca(),this.i=t);if(this.i)return this.q()}catch(s){return this.h(s)}},i.P=function(e){this.g("CLEAR REQUEST with "+e);if(this.I)return this.Z&&window.clearInterval(this.Z),e&&(this.w=n),this.I=r,this.Z=n},i}(),window.FlurryAgent=a,a.setAppVersion=a.da,a.getFlurryAgentVersion=a.ub,a.setShowErrorInLogEnabled=a.Jb,a.setDebugLogEnabled=a.Gb,a.setSessionContinueSeconds=a.L,a.setRequestInterval=a.ta,a.startSession=a.Ra,a.endSession=a.A,a.pauseSession=a.yb,a.logEvent=a.t,a.endTimedEvent=a.qb,a.timedEvents=a.k,a.logError=a.wb,a.logPurchase=a.U,a.setUserId=a.ua,a.setAge=a.qa,a.setGender=a.ra,a.setLocation=a.sa,a.setEventLogging=a.Hb,a.requestCallback=a.Cb,f=function(e,t,r,i,s){s==n&&(s=d),s.n(e),s.l(e),s.N(e),s.o(t),s.z(t),s.p(t.length,255),s.o(r),s.z(r),s.p(r.length,255),s.n(i),s.l(i),s.N(i),this.cf=e,this.bz=t,this.ca=r,this.cb=i.toString(),this.cc=Date.now()},l=function(e){function t(e,i,s,o,u,a,f){f==n&&(f=d),f.n(s),f.l(s),f.Qb(s),f.o(o),f.Ta(o,r),t.wa.constructor.call(this,e,i,u,a),this.bw=s*100,this.bx=r[o]}var r;return m(t,e),r={USD:0,EUR:1,GBP:2,CHF:3},t}(i),c=function(){function e(i,s,o,u,a,f,l,c,h,d,v){this.a={},this.a.af=Date.now(),this.a.aa=t,this.a.ab=i,this.a.ac=s,this.a.ae=o,this.a.ad=u,this.a.ag=a,this.a.ah=h[p.c.timestamp],e.g("about to check if firstPartyCookieUID "+v+" should be assigned to global map in the report request"),v!==n&&(this.a.cg=v,e.g("firstPartyCookieUID "+v+" was assigned to global map")),h.requestsMade===0&&(this.a.ai=f,this.a.aj=c,h.Db()),this.a.ak=r,this.b=[],h&&(h.Oa(),o=e.za(h),this.b.push(o));for(i=0,s=d.length;i<s;i++)o=d[i],o=e.za(o),this.b.push(o)}var t,r;return r=t=1,e.Ab={timedEvents:"timedEvents",eventLogging:"eventLogging",sessionContinue:"sessionContinue",pauseTimestamp:"pauseTimestamp",age:"age",numEventNames:"numEventNames",numPurchaseNames:"numPurchaseNames",requestsMade:"requestsMade",totalEventNames:"totalEventNames",totalPurchaseNames:"totalPurchaseNames",numEventsLogged:"numEventsLogged",numPurchasesLogged:"numPurchasesLogged",numErrorsLogged:"numErrorsLogged",eventCounter:"eventCounter",purchaseCounter:"purchaseCounter",errorCounter:"errorCounter"},e.zb={timed:"timed"},e.Fa="https://data.flurry.com/aah.do",e.g=function(){},e.Sb=function(){return this.Fa},e.hb=function(e){var t,n,r;n={};for(t in e)r=e[t],this.zb.hasOwnProperty(t)||(n[t]=r);return n},e.za=function(e){var t,r,i,s,o,u;i={};for(r in e)if(s=e[r],r===p.c.location)s.bg!=n&&(i[r]=s);else if(r===p.c.D){i[r]=[];for(o=0,u=s.length;o<u;o++)t=s[o],i[r].push(this.hb(t))}else this.Ab.hasOwnProperty(r)||(i[r]=s);return i},e.prototype.Kb=function(){this.a.af=Date.now()},e}(),h=function(){function t(){this.sessionsIncluded=0,this.sessionIncluded={},this.request={},this.level=0}return t.g=function(){},t.prototype.Za=function(t,n,r,i,s,o,u,a,f){this.request=new c(10,9,t,n,r,i,s,o,u,a,f);for(n=[];;){this.level===4&&e("RequestError=>request length is set too short!"),t=JSON.stringify(this.request);if(t.length*4/3<=3e3){this.sessionsIncluded=this.request.b.length-1,this.sessionIncluded.events=this.request.b[0].bo.length,this.sessionIncluded.purchases=this.request.b[0].bv.length,this.sessionIncluded.errors=this.request.b[0].by.length;break}n.push(this.request=this.xb(this.request))}},t.prototype.xb=function(e){switch(this.level){case 0:e.b.length===1?this.level=1:e.b=this.R(e.b);break;case 1:e.b[0].by.length===0?this.level=2:e.b[0].by=this.R(e.b[0].by);break;case 2:e.b[0].bv.length===0?this.level=3:e.b[0].bv=this.R(e.b[0].bv);break;case 3:e.b[0].bo.length===0?this.level=4:e.b[0].bo=this.R(e.b[0].bo)}return e},t.prototype.R=function(e){var t;return e.length>=1&&(t=parseInt(e.length/2),e=e.slice(0,t)),e},t}(),p=function(){function i(e){e==n&&(e={}),this[i.c.appVersion]="",this[i.c.Sa]="",this[i.c.Ga]=-1,this[i.c.xa]=0,this[i.c.ya]=0,this[i.c.location]={},this[i.c.vb]=i.sb(),this[i.c.k]=e[i.c.k]||[],this[i.c.C]=e[i.c.C]||0,this[i.c.D]=[],this[i.c.V]=0,this[i.c.Aa]=r,this[i.c.T]={},this[i.c.s]={},this[i.c.ma]=0,this[i.c.H]=e[i.c.H]||0,this[i.c.X]=[],this[i.c.W]=0,this[i.c.Ba]=r,this[i.c.oa]={},this[i.c.v]={},this[i.c.na]=0,this[i.c.B]=e[i.c.B]||0,this[i.c.S]=[],this[i.c.la]=0,this[i.c.Ia]=0,this.ba=e[i.c.timestamp]||Date.now(),this[i.c.duration]=0,this[i.c.ja]=t,this[i.c.pa]=o,this[i.c.r]=e[i.c.r]||0,this[i.c.u]=e[i.c.u]||-1,this[i.c.La]=0,this[i.c.Lb]=i.tb()}var o;return i.c={appVersion:"bd",Sa:"be",Ga:"bk",xa:"age",ya:"bl",location:"bf",vb:"bj",k:"timedEvents",C:"eventCounter",D:"bo",V:"numEventsLogged",Aa:"bm",T:"totalEventNames",s:"bn",ma:"numEventNames",H:"purchaseCounter",X:"bv",W:"numPurchasesLogged",Ba:"bt",oa:"totalPurchaseNames",v:"bu",na:"numPurchaseNames",B:"errorCounter",S:"by",la:"numErrorsLogged",Ia:"cd",timestamp:"ba",duration:"bb",ja:"eventLogging",pa:"sessionContinue",r:"pauseTimestamp",u:"bc",La:"requestsMade",Lb:"ch"},o=3e5,i.sb=function(){var e;return e="",navigator.language!=n?e=navigator.language:navigator.Mb!=n&&(e=navigator.Mb),e},i.tb=function(){var e;return e=(new Date).getTimezoneOffset()/60,"Etc/GMT"+(e>0?"+":"-")+Math.abs(e)},i.prototype.Db=function(){this[i.c.La]++},i.prototype.da=function(e){return this[i.c.appVersion]=e},i.prototype.ua=function(e){return this[i.c.Sa]=e},i.prototype.ra=function(e){return this[i.c.Ga]=e==="f"?0:1},i.prototype.qa=function(e){return this.Eb(e),this[i.c.xa]=e},i.prototype.Eb=function(e){var t;t=new Date,this[i.c.ya]=(new Date(t.getFullYear()-e,t.getMonth(),1)).getTime()},i.prototype.sa=function(e,t,n){return this[i.c.location]={bg:e,bh:t,bi:n}},i.prototype.L=function(e){return this[i.c.pa]=e*1e3},i.prototype.Oa=function(){this[i.c.duration]=Date.now()-this[i.c.timestamp]},i.prototype.gb=function(e,t,n){this[i.c.D]=this[i.c.D].slice(e),this[i.c.s]={},this[i.c.X]=this[i.c.X].slice(t),this[i.c.v]={},this[i.c.S]=this[i.c.S].slice(n)},i.prototype.A=function(){this.ob(),this.Oa(),this[i.c.V]<1e3&&(this[i.c.Aa]=r);if(this[i.c.W]<100)return this[i.c.Ba]=r},i.prototype.Pa=function(e){this[i.c.r]=e},i.prototype.Ma=function(){var e;return e=this[i.c.r]>0?Date.now()-this[i.c.r]:0,e>0&&(this[i.c.u]===-1&&(this[i.c.u]=0),this[i.c.u]+=e,this[i.c.r]=0),e<this[i.c.pa]},i.prototype.Ya=function(){var e,t,n,r,o;e={},n=[i.c.timestamp,i.c.u,i.c.C,i.c.H,i.c.B,i.c.k];for(r=0,o=n.length;r<o;r++)t=n[r],e[t]=this[t];return s.ia(JSON.stringify(e))},i.prototype.t=function(e){if(this[i.c.ja]&&this[i.c.V]<1e3)return e.timed&&!e.br?this[i.c.k].push(e):(this[i.c.D].push(e),this[i.c.V]++)},i.prototype.Wa=function(t,n,r){this[i.c.C]++,n=new u(this[i.c.C],t,n,r,Date.now()-this[i.c.timestamp]),t in this[i.c.T]?(this[i.c.T][t]++,t in this[i.c.s]?this[i.c.s][t]++:this[i.c.s][t]=1,this.t(n)):this[i.c.ma]<100?(this[i.c.T][t]=this[i.c.s][t]=1,this[i.c.ma]++,this.t(n)):e("LogError=>unique name limit reached!")},i.prototype.pb=function(e,t){var n,r,s,o,u;r=0,u=this[i.c.k];for(s=0,o=u.length;s<o;s++){n=u[s];if(n.bp===e){n.br=Date.now()-(this[i.c.timestamp]+n.bq),t&&d.Ua(t)&&(n.bs=t),this.t(n);break}r++}this[i.c.k].splice(r,1)},i.prototype.ob=function(){var e,t,n,r;r=this[i.c.k];for(t=0,n=r.length;t<n;t++)e=r[t],e.br=Date.now()-(this[i.c.timestamp]+e.bq),this.t(e);this[i.c.k]=[]},i.prototype.U=function(e){if(this[i.c.W]<100)return this[i.c.X].push(e),this[i.c.W]++},i.prototype.Xa=function(t,n,r,s){this[i.c.H]++,n=new l(this[i.c.H],t,n,r,s,Date.now()-this[i.c.timestamp]),t in this[i.c.oa]?(this.totalPurchaseNames[t]++,t in this[i.c.v]?this[i.c.v][t]++:this[i.c.v][t]=1,this.U(n)):this[i.c.na]<10?(this[i.c.oa][t]=this[i.c.v][t]=1,this[i.c.na]++,this.U(n)):e("PurchaseError=>unique name limit reached!")},i.prototype.Va=function(e,t,n){this[i.c.B]++,e=new f(this[i.c.B],e,t,n),this[i.c.la]<10&&(this[i.c.S].push(e),this[i.c.la]++),this[i.c.Ia]++},i}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),d=function(){function n(){}return n.M=function(t){typeof t!="boolean"&&e("ValidationError=>input is not valid!")},n.n=function(t){typeof t!="number"&&e("ValidationError=>input is not valid!")},n.o=function(t){typeof t!="string"&&e("ValidationError=>input is not valid!")},n.Pb=function(t){typeof t!="object"&&e("ValidationError=>input is not valid!")},n.N=function(t){t!==parseInt(t)&&e("ValidationError=>input is not valid!")},n.z=function(t){t.trim()||e("ValidationError=>input is not valid!")},n.p=function(t,n){t>n&&e("ValidationError=>input is not valid!")},n.l=function(t){isNaN(t)&&e("ValidationError=>input is not valid!")},n.Qb=function(t){t===parseInt(t)||t.toFixed(2)===t.toString()||t.toFixed(1)===t.toString()||e("ValidationError=>input is not valid!")},n.Ta=function(t,n){n.hasOwnProperty(t)||e("ValidationError=>input is not valid!")},n.va=function(t){t<0&&e("ValidationError=>input is not valid!")},n.j=function(t){t||e("ValidationError=>input does not exist!")},n.Ua=function(e){var n,r,i;this.Pb(e),r=1;for(n in e)i=e[n],this.o(n),this.p(n.length,255),this.o(i),this.p(i.length,255),this.p(r,10),r++;return t},n}()}(),define("flurry",function(e){return function(){var t,n;return t||e.FlurryAgent}}(this)),function(){function r(e,t){return e.href=t}function U(e){R.set(e)}function xt(e){if(100!=e.get(Er)&&_i(It(e,fr))%1e4>=100*qt(e,Er))throw"abort"}function Tt(e){if(lt(It(e,cr)))throw"abort"}function Nt(){var e=at[p][g];if("http:"!=e&&"https:"!=e)throw"abort"}function Ct(e){try{ut.XMLHttpRequest&&"withCredentials"in new ut.XMLHttpRequest?U(40):ut.XDomainRequest&&U(41),ut[j][O]&&U(42)}catch(t){}e.set(Wn,W(e),!0),e.set(on,qt(e,on)+1);var n=[];jt.map(function(t,r){if(r.p){var i=e.get(t);void 0!=i&&i!=r[k]&&("boolean"==typeof i&&(i*=1),n[E](r.p+"="+Z(""+i)))}}),n[E]("z="+Dt()),e.set(rn,n[F]("&"),!0)}function kt(e){var t=It(e,Tr)||mt()+"/collect",n=It(e,rn),r=e.get(nn),i=e.get(sn),r=r||Y;i&&(i=r,ut[j][O]?ut[j][O](t,n)?(i(),i=!0):i=!1:i=!1);if(!i)if(2036>=n[A])yt(t,n,r);else{if(!(8192>=n[A]))throw Et("len",n[A]),new gt(n[A]);wt(t,n,r)||bt(t,n,r)||yt(t,n,r)}e.set(nn,Y,!0)}function Lt(e){var t=ut.gaData;t&&(t.expId&&e.set(Bn,t.expId),t.expVar&&e.set(jn,t.expVar))}function At(){if(ut[j]&&"preview"==ut[j].loadPurpose)throw"abort"}function Ot(e){var t=ut.gaDevIds;$(t)&&0!=t[A]&&e.set("&did",t[F](","),!0)}function Mt(e){if(!e.get(cr))throw"abort"}function Ht(e){var t=qt(e,Rn);500<=t&&U(15);var r=It(e,tn);if("transaction"!=r&&"item"!=r){var r=qt(e,zn),i=(new Date)[c](),s=qt(e,Un);0==s&&e.set(Un,i),s=n.round(2*(i-s)/1e3),0<s&&(r=n.min(r+s,20),e.set(Un,i));if(0>=r)throw"abort";e.set(zn,--r)}e.set(Rn,++t)}function Cr(e,t,n,r){t[e]=function(){try{return r&&U(r),n[w](this,arguments)}catch(t){throw Et("exc",e,t&&t[L]),t}}}function Mr(){var e,t,n;if((n=(n=ut[j])?n.plugins:null)&&n[A])for(var r=0;r<n[A]&&!t;r++){var i=n[r];-1<i[L][C]("Shockwave Flash")&&(t=i.description)}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),t=e.GetVariable("$version")}catch(s){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),t="WIN 6,0,21,0",e.AllowScriptAccess="always",t=e.GetVariable("$version")}catch(u){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),t=e.GetVariable("$version")}catch(a){}return t&&(e=t[o](/[\d]+/g))&&3<=e[A]&&(t=e[0]+"."+e[1]+" r"+e[2]),t||void 0}function $r(e,t,n){"none"==t&&(t="");var r=[],i=ct(e);e="__utma"==e?6:2;for(var s=0;s<i[A];s++){var o=(""+i[s])[h](".");o[A]>=e&&r[E]({hash:o[0],R:i[s],O:o})}return 0==r[A]?void 0:1==r[A]?r[0]:Jr(t,r)||Jr(n,r)||Jr(null,r)||r[0]}function Jr(e,t){var n,r;null==e?n=r=1:(n=_i(e),r=_i(K(e,".")?e[B](1):"."+e));for(var i=0;i<t[A];i++)if(t[i][S]==n||t[i][S]==r)return t[i]}function Gr(e){e=e.get(fr);var t=Yr(e,0);return"_ga=1."+Z(t+"."+e)}function Yr(e,t){for(var n=new Date,r=ut[j],i=r.plugins||[],n=[e,r.userAgent,n.getTimezoneOffset(),n.getYear(),n.getDate(),n.getHours(),n.getMinutes()+t],r=0;r<i[A];++r)n[E](i[r].description);return _i(n[F]("."))}function ni(e,t){if(t==at[p][v])return!1;for(var n=0;n<e[A];n++)if(e[n]instanceof RegExp){if(e[n][x](t))return!0}else if(0<=t[C](e[n]))return!0;return!1}function xi(e){return 0<=e[C](".")||0<=e[C](":")}function _i(e){var t=1,n=0,r;if(e)for(t=0,r=e[A]-1;0<=r;r--)n=e.charCodeAt(r),t=(t<<6&268435455)+n+(n<<14),n=t&266338304,t=0!=n?t^n>>21:t;return t}var e=encodeURIComponent,t=window,n=Math,i="replace",s="data",o="match",u="send",a="port",f="createElement",l="setAttribute",c="getTime",h="split",p="location",d="hasOwnProperty",v="hostname",m="search",g="protocol",y="href",b="action",w="apply",E="push",S="hash",x="test",T="slice",N="cookie",C="indexOf",k="defaultValue",L="name",A="length",O="sendBeacon",M="prototype",_="clientWidth",D="target",P="call",H="clientHeight",B="substring",j="navigator",F="join",I="toLowerCase",q=function(e){this.w=e||[]};q[M].set=function(e){this.w[e]=!0},q[M].encode=function(){for(var e=[],t=0;t<this.w[A];t++)this.w[t]&&(e[n.floor(t/6)]=e[n.floor(t/6)]^1<<t%6);for(t=0;t<e[A];t++)e[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(e[t]||0);return e[F]("")+"~"};var R=new q,z=function(e,t){var n=new q(X(e));n.set(t),e.set(Xn,n.w)},W=function(e){e=X(e),e=new q(e);for(var t=R.w[T](),n=0;n<e.w[A];n++)t[n]=t[n]||e.w[n];return(new q(t)).encode()},X=function(e){return e=e.get(Xn),$(e)||(e=[]),e},V=function(e){return"function"==typeof e},$=function(e){return"[object Array]"==Object[M].toString[P](Object(e))},J=function(e){return void 0!=e&&-1<(e.constructor+"")[C]("String")},K=function(e,t){return 0==e[C](t)},Q=function(e){return e?e[i](/^[\s\xa0]+|[\s\xa0]+$/g,""):""},G=function(e){var t=at[f]("img");return t.width=1,t.height=1,t.src=e,t},Y=function(){},Z=function(t){return e instanceof Function?e(t):(U(28),t)},et=function(e,t,n,r){try{e.addEventListener?e.addEventListener(t,n,!!r):e.attachEvent&&e.attachEvent("on"+t,n)}catch(i){U(27)}},tt=function(e,t){if(e){var n=at[f]("script");n.type="text/javascript",n.async=!0,n.src=e,t&&(n.id=t);var r=at.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}},nt=function(){return"https:"==at[p][g]},rt=function(){var e=""+at[p][v];return 0==e[C]("www.")?e[B](4):e},it=function(e){var t=at.referrer;if(/^https?:\/\//i[x](t)){if(e)return t;e="//"+at[p][v];var n=t[C](e);if(5==n||6==n)if(e=t.charAt(n+e[A]),"/"==e||"?"==e||""==e||":"==e)return;return t}},st=function(e,t){if(1==t[A]&&null!=t[0]&&"object"==typeof t[0])return t[0];for(var r={},i=n.min(e[A]+1,t[A]),s=0;s<i;s++){if("object"==typeof t[s]){for(var o in t[s])t[s][d](o)&&(r[o]=t[s][o]);break}s<e[A]&&(r[e[s]]=t[s])}return r},ot=function(){this.keys=[],this.values={},this.m={}};ot[M].set=function(e,t,n){this.keys[E](e),n?this.m[":"+e]=t:this.values[":"+e]=t},ot[M].get=function(e){return this.m[d](":"+e)?this.m[":"+e]:this.values[":"+e]},ot[M].map=function(e){for(var t=0;t<this.keys[A];t++){var n=this.keys[t],r=this.get(n);r&&e(n,r)}};var ut=t,at=document,ft=function(){for(var e=ut[j].userAgent+(at[N]?at[N]:"")+(at.referrer?at.referrer:""),t=e[A],n=ut.history[A];0<n;)e+=n--^t++;return _i(e)},lt=function(e){var t=ut._gaUserPrefs;if(t&&t.ioo&&t.ioo()||e&&!0===ut["ga-disable-"+e])return!0;try{var n=ut.external;if(n&&n._gaUserPrefs&&"oo"==n._gaUserPrefs)return!0}catch(r){}return!1},ct=function(e){var t=[],n=at[N][h](";");e=new RegExp("^\\s*"+e+"=\\s*(.*?)\\s*$");for(var r=0;r<n[A];r++){var i=n[r][o](e);i&&t[E](i[1])}return t},ht=function(e,t,n,r,i,s){i=lt(i)?!1:vt[x](at[p][v])||"/"==n&&dt[x](r)?!1:!0;if(!i)return!1;t&&1200<t[A]&&(t=t[B](0,1200),U(24)),n=e+"="+t+"; path="+n+"; ",s&&(n+="expires="+(new Date((new Date)[c]()+s)).toGMTString()+"; "),r&&"none"!=r&&(n+="domain="+r+";"),r=at[N],at.cookie=n;if(!(r=r!=at[N]))e:{e=ct(e);for(r=0;r<e[A];r++)if(t==e[r]){r=!0;break e}r=!1}return r},pt=function(e){return Z(e)[i](/\(/g,"%28")[i](/\)/g,"%29")},dt=/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/,vt=/(^|\.)doubleclick\.net$/i,mt=function(){return(Qt||nt()?"https:":"http:")+"//www.google-analytics.com"},gt=function(e){this.name="len",this.message=e+"-8192"},yt=function(e,t,n){var r=G(e+"?"+t);r.onload=r.onerror=function(){r.onload=null,r.onerror=null,n()}},bt=function(e,t,n){var r;return r=ut.XDomainRequest,r?(r=new r,r.open("POST",e),r.onerror=function(){n()},r.onload=n,r[u](t),!0):!1},wt=function(e,t,n){var r=ut.XMLHttpRequest;if(!r)return!1;var i=new r;return"withCredentials"in i?(i.open("POST",e,!0),i.withCredentials=!0,i.setRequestHeader("Content-Type","text/plain"),i.onreadystatechange=function(){4==i.readyState&&(n(),i=null)},i[u](t),!0):!1},Et=function(e,t,r){1<=100*n.random()||lt("?")||(e=["t=error","_e="+e,"_v=j33","sr=1"],t&&e[E]("_f="+t),r&&e[E]("_m="+Z(r[B](0,100))),e[E]("aip=1"),e[E]("z="+Pt()),yt(mt()+"/collect",e[F]("&"),Y))},St=function(){this.t=[]};St[M].add=function(e){this.t[E](e)},St[M].D=function(e){try{for(var t=0;t<this.t[A];t++){var n=e.get(this.t[t]);n&&V(n)&&n[P](ut,e)}}catch(r){}t=e.get(nn),t!=Y&&V(t)&&(e.set(nn,Y,!0),setTimeout(t,10))};var _t=function(){return n.round(2147483647*n.random())},Dt=function(){try{var e=new Uint32Array(1);return ut.crypto.getRandomValues(e),e[0]&2147483647}catch(t){return _t()}},Pt=_t,Bt=function(){this.data=new ot},jt=new ot,Ft=[];Bt[M].get=function(e){var t=zt(e),n=this[s].get(e);return t&&void 0==n&&(n=V(t[k])?t[k]():t[k]),t&&t.n?t.n(this,e,n):n};var It=function(e,t){var n=e.get(t);return void 0==n?"":""+n},qt=function(e,t){var n=e.get(t);return void 0==n||""===n?0:1*n};Bt[M].set=function(e,t,n){if(e)if("object"==typeof e)for(var r in e)e[d](r)&&Rt(this,r,e[r],n);else Rt(this,e,t,n)};var Rt=function(e,t,n,r){if(void 0!=n)switch(t){case cr:vi[x](n)}var i=zt(t);i&&i.o?i.o(e,t,n,r):e[s].set(t,n,r)},Ut=function(e,t,n,r,i){this.name=e,this.p=t,this.n=r,this.o=i,this.defaultValue=n},zt=function(e){var t=jt.get(e);if(!t)for(var n=0;n<Ft[A];n++){var r=Ft[n],i=r[0].exec(e);if(i){t=r[1](i),jt.set(t[L],t);break}}return t},Wt=function(e){var t;return jt.map(function(n,r){r.p==e&&(t=r)}),t&&t[L]},Xt=function(e,t,n,r,i){return e=new Ut(e,t,n,r,i),jt.set(e[L],e),e[L]},Vt=function(e,t){Ft[E]([new RegExp("^"+e+"$"),t])},$t=function(e,t,n){return Xt(e,t,n,void 0,Jt)},Jt=function(){},Kt=J(t.GoogleAnalyticsObject)&&Q(t.GoogleAnalyticsObject)||"ga",Qt=!1,Gt=Xt("_br"),Yt=$t("apiVersion","v"),Zt=$t("clientVersion","_v");Xt("anonymizeIp","aip");var en=Xt("adSenseId","a"),tn=Xt("hitType","t"),nn=Xt("hitCallback"),rn=Xt("hitPayload");Xt("nonInteraction","ni"),Xt("currencyCode","cu");var sn=Xt("useBeacon",void 0,!1);Xt("dataSource","ds"),Xt("sessionControl","sc",""),Xt("sessionGroup","sg"),Xt("queueTime","qt");var on=Xt("_s","_s");Xt("screenName","cd");var un=Xt("location","dl",""),an=Xt("referrer","dr"),fn=Xt("page","dp","");Xt("hostname","dh");var ln=Xt("language","ul"),cn=Xt("encoding","de");Xt("title","dt",function(){return at.title||void 0}),Vt("contentGroup([0-9]+)",function(e){return new Ut(e[0],"cg"+e[1])});var hn=Xt("screenColors","sd"),pn=Xt("screenResolution","sr"),dn=Xt("viewportSize","vp"),vn=Xt("javaEnabled","je"),mn=Xt("flashVersion","fl");Xt("campaignId","ci"),Xt("campaignName","cn"),Xt("campaignSource","cs"),Xt("campaignMedium","cm"),Xt("campaignKeyword","ck"),Xt("campaignContent","cc");var gn=Xt("eventCategory","ec"),yn=Xt("eventAction","ea"),bn=Xt("eventLabel","el"),wn=Xt("eventValue","ev"),En=Xt("socialNetwork","sn"),Sn=Xt("socialAction","sa"),xn=Xt("socialTarget","st"),Tn=Xt("l1","plt"),Nn=Xt("l2","pdt"),Cn=Xt("l3","dns"),kn=Xt("l4","rrt"),Ln=Xt("l5","srt"),An=Xt("l6","tcp"),On=Xt("l7","dit"),Mn=Xt("l8","clt"),_n=Xt("timingCategory","utc"),Dn=Xt("timingVar","utv"),Pn=Xt("timingLabel","utl"),Hn=Xt("timingValue","utt");Xt("appName","an"),Xt("appVersion","av",""),Xt("appId","aid",""),Xt("appInstallerId","aiid",""),Xt("exDescription","exd"),Xt("exFatal","exf");var Bn=Xt("expId","xid"),jn=Xt("expVar","xvar"),Fn=Xt("_utma","_utma"),In=Xt("_utmz","_utmz"),qn=Xt("_utmht","_utmht"),Rn=Xt("_hc",void 0,0),Un=Xt("_ti",void 0,0),zn=Xt("_to",void 0,20);Vt("dimension([0-9]+)",function(e){return new Ut(e[0],"cd"+e[1])}),Vt("metric([0-9]+)",function(e){return new Ut(e[0],"cm"+e[1])}),Xt("linkerParam",void 0,void 0,Gr,Jt);var Wn=Xt("usage","_u"),Xn=Xt("_um");Xt("forceSSL",void 0,void 0,function(){return Qt},function(e,t,n){U(34),Qt=!!n});var Vn=Xt("_j1","jid"),$n=Xt("_j2","gjid");Vt("\\&(.*)",function(e){var t=new Ut(e[0],e[1]),n=Wt(e[0][B](1));return n&&(t.n=function(e){return e.get(n)},t.o=function(e,t,r,i){e.set(n,r,i)},t.p=void 0),t});var Jn=$t("_oot"),Kn=Xt("previewTask"),Qn=Xt("checkProtocolTask"),Gn=Xt("validationTask"),Yn=Xt("checkStorageTask"),Zn=Xt("historyImportTask"),er=Xt("samplerTask"),tr=$t("_rlt"),nr=Xt("buildHitTask"),rr=Xt("sendHitTask"),ir=Xt("ceTask"),sr=Xt("devIdTask"),or=Xt("timingTask"),ur=Xt("displayFeaturesTask"),ar=$t("name"),fr=$t("clientId","cid"),lr=Xt("userId","uid"),cr=$t("trackingId","tid"),hr=$t("cookieName",void 0,"_ga"),pr=$t("cookieDomain"),dr=$t("cookiePath",void 0,"/"),vr=$t("cookieExpires",void 0,63072e3),mr=$t("legacyCookieDomain"),gr=$t("legacyHistoryImport",void 0,!0),yr=$t("storage",void 0,"cookie"),br=$t("allowLinker",void 0,!1),wr=$t("allowAnchor",void 0,!0),Er=$t("sampleRate","sf",100),Sr=$t("siteSpeedSampleRate",void 0,1),xr=$t("alwaysSendReferrer",void 0,!1),Tr=Xt("transportUrl"),Nr=Xt("_r","_r"),kr=function(e,t,n){this.V=1e4,this.fa=e,this.$=!1,this.B=t,this.ea=n||1},Lr=function(e,t){var r;if(e.fa&&e.$)return 0;e.$=!0;if(t){if(e.B&&qt(t,e.B))return qt(t,e.B);if(0==t.get(Sr))return 0}return 0==e.V?0:(void 0===r&&(r=Dt()),0==r%e.V?n.floor(r/e.V)%e.ea+1:0)},Ar=new kr(!0,Gt,5),Or=function(e){if(!nt()&&!Qt){var t=Lr(Ar,e);if(t&&(ut[j][O]||!(4<=t))){var n=(new Date).getHours(),r=[Dt(),Dt(),Dt()][F](".");e=(3==t||5==t?"https:":"http:")+"//www.google-analytics.com/collect?z=br.",e+=[t,"A",n,r][F](".");var i=1!=t&&4!=t?"https:":"http:",i=i+"//www.google-analytics.com/collect?z=br.",i=i+[t,"B",n,r][F]("."),n=function(){4<=t?ut[j][O](i,""):G(i)};Dt()%2?(G(e),n()):(n(),G(e))}}},_r=function(e,t){var r=n.min(qt(e,Sr),100);if(!(_i(It(e,fr))%100>=r)&&(r={},Dr(r)||Pr(r))){var i=r[Tn];void 0==i||Infinity==i||isNaN(i)||(0<i?(Hr(r,Cn),Hr(r,An),Hr(r,Ln),Hr(r,Nn),Hr(r,kn),Hr(r,On),Hr(r,Mn),t(r)):et(ut,"load",function(){_r(e,t)},!1))}},Dr=function(e){var t=ut.performance||ut.webkitPerformance,t=t&&t.timing;if(!t)return!1;var n=t.navigationStart;return 0==n?!1:(e[Tn]=t.loadEventStart-n,e[Cn]=t.domainLookupEnd-t.domainLookupStart,e[An]=t.connectEnd-t.connectStart,e[Ln]=t.responseStart-t.requestStart,e[Nn]=t.responseEnd-t.responseStart,e[kn]=t.fetchStart-n,e[On]=t.domInteractive-n,e[Mn]=t.domContentLoadedEventStart-n,!0)},Pr=function(e){if(ut.top!=ut)return!1;var t=ut.external,n=t&&t.onloadT;return t&&!t.isValidLoadTime&&(n=void 0),2147483648<n&&(n=void 0),0<n&&t.setPageReadyTime(),void 0==n?!1:(e[Tn]=n,!0)},Hr=function(e,t){var n=e[t];if(isNaN(n)||Infinity==n||0>n)e[t]=void 0},Br=function(e){return function(t){"pageview"!=t.get(tn)||e.I||(e.I=!0,_r(t,function(t){e[u]("timing",t)}))}},jr=!1,Fr=function(e){if("cookie"==It(e,yr)){var t=It(e,hr),n=Rr(e),r=Xr(It(e,dr)),i=zr(It(e,pr)),o=1e3*qt(e,vr),u=It(e,cr);if("auto"!=i)ht(t,n,r,i,u,o)&&(jr=!0);else{U(32);var a;e:{n=[],i=rt()[h](".");if(4==i[A]&&(a=i[i[A]-1],parseInt(a,10)==a)){a=["none"];break e}for(a=i[A]-2;0<=a;a--)n[E](i[T](a)[F]("."));n[E]("none"),a=n}for(var f=0;f<a[A];f++)if(i=a[f],e[s].set(pr,i),n=Rr(e),ht(t,n,r,i,u,o)){jr=!0;return}e[s].set(pr,"auto")}}},Ir=function(e){if("cookie"==It(e,yr)&&!jr&&(Fr(e),!jr))throw"abort"},qr=function(e){if(e.get(gr)){var t=It(e,pr),n=It(e,mr)||rt(),r=$r("__utma",n,t);r&&(U(19),e.set(qn,(new Date)[c](),!0),e.set(Fn,r.R),(t=$r("__utmz",n,t))&&r[S]==t[S]&&e.set(In,t.R))}},Rr=function(e){var t=pt(It(e,fr)),n=Wr(It(e,pr));return e=Vr(It(e,dr)),1<e&&(n+="-"+e),["GA1",n,t][F](".")},Ur=function(e,t,n){for(var r=[],i=[],s,o=0;o<e[A];o++){var u=e[o];u.r[n]==t?r[E](u):void 0==s||u.r[n]<s?(i=[u],s=u.r[n]):u.r[n]==s&&i[E](u)}return 0<r[A]?r:i},zr=function(e){return 0==e[C](".")?e.substr(1):e},Wr=function(e){return zr(e)[h](".")[A]},Xr=function(e){return e?(1<e[A]&&e.lastIndexOf("/")==e[A]-1&&(e=e.substr(0,e[A]-1)),0!=e[C]("/")&&(e="/"+e),e):"/"},Vr=function(e){return e=Xr(e),"/"==e?1:e[h]("/")[A]},Kr=new RegExp(/^https?:\/\/([^\/:]+)/),Qr=/(.*)([?&#])(?:_ga=[^&#]*)(?:&?)(.*)/,Zr=function(e){U(48),this.target=e,this.T=!1};Zr[M].Q=function(e,t){if(e.tagName){if("a"==e.tagName[I]()){e[y]&&r(e,ei(this,e[y],t));return}if("form"==e.tagName[I]())return ti(this,e)}if("string"==typeof e)return ei(this,e,t)};var ei=function(e,t,n){var r=Qr.exec(t);r&&3<=r[A]&&(t=r[1]+(r[3]?r[2]+r[3]:"")),e=e[D].get("linkerParam");var i=t[C]("?"),r=t[C]("#");return n?t+=(-1==r?"#":"&")+e:(n=-1==i?"?":"&",t=-1==r?t+(n+e):t[B](0,r)+n+e+t[B](r)),t},ti=function(e,t){if(t&&t[b]){var n=e[D].get("linkerParam")[h]("=")[1];if("get"==t.method[I]()){for(var r=t.childNodes||[],i=0;i<r[A];i++)if("_ga"==r[i][L]){r[i][l]("value",n);return}r=at[f]("input"),r[l]("type","hidden"),r[l]("name","_ga"),r[l]("value",n),t.appendChild(r)}else"post"==t.method[I]()&&(t.action=ei(e,t[b]))}};Zr[M].S=function(e,t,n){function i(n){try{n=n||ut.event;var i;e:{var u=n[D]||n.srcElement;for(n=100;u&&0<n;){if(u[y]&&u.nodeName[o](/^a(?:rea)?$/i)){i=u;break e}u=u.parentNode,n--}i={}}("http:"==i[g]||"https:"==i[g])&&ni(e,i[v]||"")&&i[y]&&r(i,ei(s,i[y],t))}catch(a){U(26)}}var s=this;this.T||(this.T=!0,et(at,"mousedown",i,!1),et(at,"touchstart",i,!1),et(at,"keyup",i,!1));if(n){n=function(t){t=t||ut.event;if((t=t[D]||t.srcElement)&&t[b]){var n=t[b][o](Kr);n&&ni(e,n[1])&&ti(s,t)}};for(var u=0;u<at.forms[A];u++)et(at.forms[u],"submit",n)}};var ri=function(e,t,n,r){this.U=t,this.aa=n,(t=r)||(t=(t=It(e,ar))&&"t0"!=t?ai[x](t)?"_gat_"+pt(It(e,cr)):"_gat_"+pt(t):"_gat"),this.Y=t},ii=function(e,t){var n=t.get(nr);t.set(nr,function(t){si(e,t);var r=n(t);return oi(e,t),r});var r=t.get(rr);t.set(rr,function(t){var n=r(t);return ui(e,t),n})},si=function(e,t){t.get(e.U)||("1"==ct(e.Y)[0]?t.set(e.U,"",!0):t.set(e.U,""+Pt(),!0))},oi=function(e,t){t.get(e.U)&&ht(e.Y,"1",t.get(dr),t.get(pr),t.get(cr),6e5)},ui=function(e,t){if(t.get(e.U)){var n=new ot,r=function(e){n.set(zt(e).p,t.get(e))};r(Yt),r(Zt),r(cr),r(fr),r(e.U),n.set(zt(Wn).p,W(t));var i=e.aa;n.map(function(e,t){i+=Z(e)+"=",i+=Z(""+t)+"&"}),i+="z="+Pt(),G(i),t.set(e.U,"",!0)}},ai=/^gtm\d+$/,fi=function(e,t){var n=e.b;if(!n.get("dcLoaded")){z(n,29),t=t||{};var r;t[hr]&&(r=pt(t[hr])),r=new ri(n,Vn,"https://stats.g.doubleclick.net/collect?t=dc&aip=1&",r),ii(r,n),n.set("dcLoaded",!0)}},li=function(e){var t;t=e.get("dcLoaded")?!1:"cookie"!=e.get(yr)?!1:!0,t&&(z(e,51),t=new ri(e,Vn),si(t,e),oi(t,e),e.get(t.U)&&(e.set(Nr,1,!0),e.set(Tr,mt()+"/r/collect",!0)))},ci=function(e,t){var n=e.b;if(!n.get("_rlsaLoaded")){z(n,38),t=t||{};if(t[hr])var r=pt(t[hr]);r=new ri(n,$n,"https://www.google.com/ads/ga-audiences?t=sr&aip=1&",r),ii(r,n),n.set("_rlsaLoaded",!0),ki("displayfeatures",e,t)}},hi=function(){var e=ut.gaGlobal=ut.gaGlobal||{};return e.hid=e.hid||Pt()},pi,di=function(e,n,r){if(!pi){var i;i=at[p][S];var s=ut[L],u=/^#?gaso=([^&]*)/;if(s=(i=(i=i&&i[o](u)||s&&s[o](u))?i[1]:ct("GASO")[0]||"")&&i[o](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))ht("GASO",""+i,r,n,e,0),t._udo||(t._udo=n),t._utcp||(t._utcp=r),e=s[1],tt("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(e?"prefix="+e+"&":"")+Pt(),"_gasojs");pi=!0}},vi=/^(UA|YT|MO|GP)-(\d+)-(\d+)$/,mi=function(e){function t(e,t){r.b[s].set(e,t)}function n(e,n){t(e,n),r.filters.add(e)}var r=this;this.b=new Bt,this.filters=new St,t(ar,e[ar]),t(cr,Q(e[cr])),t(hr,e[hr]),t(pr,e[pr]||rt()),t(dr,e[dr]),t(vr,e[vr]),t(mr,e[mr]),t(gr,e[gr]),t(br,e[br]),t(wr,e[wr]),t(Er,e[Er]),t(Sr,e[Sr]),t(xr,e[xr]),t(yr,e[yr]),t(lr,e[lr]),t(Yt,1),t(Zt,"j33"),n(Jn,Tt),n(Kn,At),n(Qn,Nt),n(Gn,Mt),n(Yn,Ir),n(Zn,qr),n(er,xt),n(tr,Ht),n(ir,Lt),n(sr,Ot),n(ur,li),n(nr,Ct),n(rr,kt),n(or,Br(this)),gi(this.b,e[fr]),yi(this.b),this.b.set(en,hi()),di(this.b.get(cr),this.b.get(pr),this.b.get(dr))},gi=function(e,t){if("cookie"==It(e,yr)){jr=!1;var r;e:{var u=ct(It(e,hr));if(u&&!(1>u[A])){r=[];for(var a=0;a<u[A];a++){var f;f=u[a][h](".");var l=f.shift();("GA1"==l||"1"==l)&&1<f[A]?(l=f.shift()[h]("-"),1==l[A]&&(l[1]="1"),l[0]*=1,l[1]*=1,f={r:l,s:f[F](".")}):f=void 0,f&&r[E](f)}if(1==r[A]){U(13),r=r[0].s;break e}if(0!=r[A]){U(14),u=Wr(It(e,pr)),r=Ur(r,u,0);if(1==r[A]){r=r[0].s;break e}u=Vr(It(e,dr)),r=Ur(r,u,1),r=r[0]&&r[0].s;break e}U(12)}r=void 0}r||(r=It(e,pr),u=It(e,mr)||rt(),r=$r("__utma",u,r),void 0!=r?(U(10),r=r.O[1]+"."+r.O[2]):r=void 0),r&&(e[s].set(fr,r),jr=!0)}r=e.get(wr);if(a=(r=at[p][r?"href":"search"][o]("(?:&|#|\\?)"+Z("_ga")[i](/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"=([^&#]*)"))&&2==r[A]?r[1]:"")e.get(br)?(r=a[C]("."),-1==r?U(22):(u=a[B](r+1),"1"!=a[B](0,r)?U(22):(r=u[C]("."),-1==r?U(22):(a=u[B](0,r),r=u[B](r+1),a!=Yr(r,0)&&a!=Yr(r,-1)&&a!=Yr(r,-2)?U(23):(U(11),e[s].set(fr,r)))))):U(21);t&&(U(9),e[s].set(fr,Z(t))),e.get(fr)||((r=(r=ut.gaGlobal&&ut.gaGlobal.vid)&&-1!=r[m](/^(?:utma\.)?\d+\.\d+$/)?r:void 0)?(U(17),e[s].set(fr,r)):(U(8),e[s].set(fr,[Pt()^ft()&2147483647,n.round((new Date)[c]()/1e3)][F](".")))),Fr(e)},yi=function(e){var t=ut[j],n=ut.screen,r=at[p];e.set(an,it(e.get(xr)));if(r){var i=r.pathname||"";"/"!=i.charAt(0)&&(U(31),i="/"+i),e.set(un,r[g]+"//"+r[v]+i+r[m])}n&&e.set(pn,n.width+"x"+n.height),n&&e.set(hn,n.colorDepth+"-bit");var n=at.documentElement,s=(i=at.body)&&i[_]&&i[H],o=[];n&&n[_]&&n[H]&&("CSS1Compat"===at.compatMode||!s)?o=[n[_],n[H]]:s&&(o=[i[_],i[H]]),n=0>=o[0]||0>=o[1]?"":o[F]("x"),e.set(dn,n),e.set(mn,Mr()),e.set(cn,at.characterSet||at.charset),e.set(vn,t&&"function"==typeof t.javaEnabled&&t.javaEnabled()||!1),e.set(ln,(t&&(t.language||t.browserLanguage)||"")[I]());if(r&&e.get(wr)&&(t=at[p][S])){t=t[h](/[?&#]+/),r=[];for(n=0;n<t[A];++n)(K(t[n],"utm_id")||K(t[n],"utm_campaign")||K(t[n],"utm_source")||K(t[n],"utm_medium")||K(t[n],"utm_term")||K(t[n],"utm_content")||K(t[n],"gclid")||K(t[n],"dclid")||K(t[n],"gclsrc"))&&r[E](t[n]);0<r[A]&&(t="#"+r[F]("&"),e.set(un,e.get(un)+t))}};mi[M].get=function(e){return this.b.get(e)},mi[M].set=function(e,t){this.b.set(e,t)};var bi={pageview:[fn],event:[gn,yn,bn,wn],social:[En,Sn,xn],timing:[_n,Dn,Hn,Pn]};mi[M].send=function(e){if(!(1>arguments[A])){var t,n;"string"==typeof arguments[0]?(t=arguments[0],n=[][T][P](arguments,1)):(t=arguments[0]&&arguments[0][tn],n=arguments),t&&(n=st(bi[t]||[],n),n[tn]=t,this.b.set(n,void 0,!0),this.filters.D(this.b),this.b[s].m={},Or(this.b))}};var wi=function(e){return"prerender"==at.visibilityState?!1:(e(),!0)},Ei=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,Si=function(e){if(V(e[0]))this.u=e[0];else{var t=Ei.exec(e[0]);null!=t&&4==t[A]&&(this.c=t[1]||"t0",this.e=t[2]||"",this.d=t[3],this.a=[][T][P](e,1),this.e||(this.A="create"==this.d,this.i="require"==this.d,this.g="provide"==this.d,this.ba="remove"==this.d),this.i&&(3<=this.a[A]?(this.X=this.a[1],this.W=this.a[2]):this.a[1]&&(J(this.a[1])?this.X=this.a[1]:this.W=this.a[1]))),t=e[1],e=e[2];if(!this.d)throw"abort";if(this.i&&(!J(t)||""==t))throw"abort";if(this.g&&(!J(t)||""==t||!V(e)))throw"abort";if(xi(this.c)||xi(this.e))throw"abort";if(this.g&&"t0"!=this.c)throw"abort"}},Ti,Ni,Ci;Ti=new ot,Ci=new ot,Ni={ec:45,ecommerce:46,linkid:47};var ki=function(e,t,n){t==Oi||t.get(ar);var r=Ti.get(e);return V(r)?(t.plugins_=t.plugins_||new ot,t.plugins_.get(e)?!0:(t.plugins_.set(e,new r(t,n||{})),!0)):!1},Li=function(e){function t(e){var t=(e[v]||"")[h](":")[0][I](),n=(e[g]||"")[I](),n=1*e[a]||("http:"==n?80:"https:"==n?443:"");return e=e.pathname||"",K(e,"/")||(e="/"+e),[t,""+n,e]}var n=at[f]("a");r(n,at[p][y]);var i=(n[g]||"")[I](),s=t(n),o=n[m]||"",u=i+"//"+s[0]+(s[1]?":"+s[1]:"");return K(e,"//")?e=i+e:K(e,"/")?e=u+e:!e||K(e,"?")?e=u+s[2]+(e||o):0>e[h]("/")[0][C](":")&&(e=u+s[2][B](0,s[2].lastIndexOf("/"))+"/"+e),r(n,e),i=t(n),{protocol:(n[g]||"")[I](),host:i[0],port:i[1],path:i[2],G:n[m]||"",url:e||""}},Ai={ga:function(){Ai.f=[]}};Ai.ga(),Ai.D=function(e){var t=Ai.J[w](Ai,arguments),t=Ai.f.concat(t);for(Ai.f=[];0<t[A]&&!Ai.v(t[0])&&!(t.shift(),0<Ai.f[A]););Ai.f=Ai.f.concat(t)},Ai.J=function(e){for(var t=[],n=0;n<arguments[A];n++)try{var r=new Si(arguments[n]);if(r.g)Ti.set(r.a[0],r.a[1]);else{if(r.i){var i=r,s=i.a[0];if(!V(Ti.get(s))&&!Ci.get(s)){Ni[d](s)&&U(Ni[s]);var o=i.X;!o&&Ni[d](s)?(U(39),o=s+".js"):U(43);if(o){o&&0<=o[C]("/")||(o=(Qt||nt()?"https:":"http:")+"//www.google-analytics.com/plugins/ua/"+o);var u=Li(o),i=void 0,f=u[g],l=at[p][g],i="https:"==f||f==l?!0:"http:"!=f?!1:"http:"==l,c;if(c=i){var i=u,h=Li(at[p][y]);if(i.G||0<=i.url[C]("?")||0<=i.path[C]("://"))c=!1;else if(i.host==h.host&&i[a]==h[a])c=!0;else{var v="http:"==i[g]?80:443;c="www.google-analytics.com"==i.host&&(i[a]||v)==v&&K(i.path,"/plugins/")?!0:!1}}c&&(tt(u.url),Ci.set(s,!0))}}}t[E](r)}}catch(m){}return t},Ai.v=function(e){try{if(e.u)e.u[P](ut,Oi.j("t0"));else{var t=e.c==Kt?Oi:Oi.j(e.c);if(e.A)"t0"==e.c&&Oi.create[w](Oi,e.a);else if(e.ba)Oi.remove(e.c);else if(t)if(e.i){if(!ki(e.a[0],t,e.W))return!0}else if(e.e){var n=e.d,r=e.a,i=t.plugins_.get(e.e);i[n][w](i,r)}else t[e.d][w](t,e.a)}}catch(s){}};var Oi=function(e){U(1),Ai.D[w](Ai,[arguments])};Oi.h={},Oi.P=[],Oi.L=0,Oi.answer=42;var Mi=[cr,pr,ar];Oi.create=function(e){var t=st(Mi,[][T][P](arguments));t[ar]||(t[ar]="t0");var n=""+t[ar];return Oi.h[n]?Oi.h[n]:(t=new mi(t),Oi.h[n]=t,Oi.P[E](t),t)},Oi.remove=function(e){for(var t=0;t<Oi.P[A];t++)if(Oi.P[t].get(ar)==e){Oi.P.splice(t,1),Oi.h[e]=null;break}},Oi.j=function(e){return Oi.h[e]},Oi.K=function(){return Oi.P[T](0)},Oi.N=function(){"ga"!=Kt&&U(49);var e=ut[Kt];if(!e||42!=e.answer){Oi.L=e&&e.l,Oi.loaded=!0;var t=ut[Kt]=Oi;Cr("create",t,t.create),Cr("remove",t,t.remove),Cr("getByName",t,t.j,5),Cr("getAll",t,t.K,6),t=mi[M],Cr("get",t,t.get,7),Cr("set",t,t.set,4),Cr("send",t,t[u]),t=Bt[M],Cr("get",t,t.get),Cr("set",t,t.set);if(!nt()&&!Qt){e:{for(var t=at.getElementsByTagName("script"),n=0;n<t[A]&&100>n;n++){var r=t[n].src;if(r&&0==r[C]("https://www.google-analytics.com/analytics")){U(33),t=!0;break e}}t=!1}t&&(Qt=!0)}nt()||Qt||!Lr(new kr)||(U(36),Qt=!0),(ut.gaplugins=ut.gaplugins||{}).Linker=Zr,t=Zr[M],Ti.set("linker",Zr),Cr("decorate",t,t.Q,20),Cr("autoLink",t,t.S,25),Ti.set("displayfeatures",fi),Ti.set("adfeatures",ci),e=e&&e.q,$(e)?Ai.D[w](Oi,e):U(50)}},Oi.k=function(){for(var e=Oi.K(),t=0;t<e[A];t++)e[t].get(ar)},function(){var e=Oi.N;if(!wi(e)){U(16);var t=!1,n=function(){if(!t&&wi(e)){t=!0;var r=n,i=at;i.removeEventListener?i.removeEventListener("visibilitychange",r,!1):i.detachEvent&&i.detachEvent("onvisibilitychange",r)}};et(at,"visibilitychange",n)}}()}(window),define("google-analytics",function(e){return function(){var t,n;return t||e.ga}}(this)),define("js/lib/track",["jquery","underscore","flurry","google-analytics"],function(e,t,n,r){(function(e,t){if(!t.__SV){var n,r,i,s;window.mixpanel=t,t._i=[],t.init=function(e,n,r){function o(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var u=t;"undefined"!=typeof r?u=t[r]=[]:r="mixpanel",u.people=u.people||[],u.toString=function(e){var t="mixpanel";return"mixpanel"!==r&&(t+="."+r),e||(t+=" (stub)"),t},u.people.toString=function(){return u.toString(1)+".people (stub)"},i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(s=0;s<i.length;s++)o(u,i[s]);t._i.push([e,n,r])},t.__SV=1.2,n=e.createElement("script"),n.type="text/javascript",n.async=!0,n.src=("https:"===e.location.protocol?"https:":"http:")+"//cdn.mxpnl.com/libs/mixpanel-2.2.min.js",r=e.getElementsByTagName("script")[0],r.parentNode.insertBefore(n,r)}})(document,window.mixpanel||[]),mixpanel.init("06757d17f61e08d4cf0c544fc78016d0"),r("create","UA-54890126-1","auto");var i={startSession:function(){if(isPhantom)return;n&&n.startSession("NCQPRJNWZMW2827R373H"),mixpanel.track("session_start")},addUserContext:function(e){this.user=e},addCityContext:function(e){this.city=e},logEvent:function(e,t){if(isPhantom)return;t||(t={}),this.city&&(t.city=this.city.getCityId()),this.user&&(t.user_id=this.user.userId),t.ts=Date.now(),t.sessionStartTs=sessionStart,window.isWidget?t.isWidget=!0:t.isWidget=!1,e==="click"?r("send","event",t.control,"click"):e==="buy_ticket"||e==="play"||e==="search"||e==="cityUpdate"||e==="signup"?r("send","event",e,e):e==="pageview"&&(t.path?r("send","pageview",{path:t.path}):r("send","pageview")),mixpanel.track(e,t),n&&(e==="error"?n.logError("error",t.msg):n.logEvent(e,t))}};return i.startSession(),window.onerror=function(t,n,r){return i.logEvent("error",{msg:t,url:n,lineNumber:r}),!1},i}),define("js/lib/utils",["jquery","underscore","backbone","js/lib/track"],function(e,t,n,r){var i={navigate:function(e,t,r,i){n.history.navigate(e,t),this.postNav(r,i)},postNav:function(t,i){var s="/"+n.history.fragment;!t&&!i&&(t="Discover great live music around you | Shubaloo",i="Check out who's playing in town soon - while streaming their music. Follow your bands, venues and your friends to personalize your experience."),r.logEvent("pageview",{path:s,title:t}),document.title=t,e("meta[name=description]").attr("content",i)},isMobile:function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1},getPicForEvent:function(e){var t=i.getPic(e.pics,256);return t==null&&e.associations&&e.associations.PERFORMER&&e.associations.PERFORMER[0]&&(t=i.getPic(e.associations.PERFORMER[0],256)),t==null&&(t=i.getPic(e.pics,200)),t==null&&e.associations&&e.associations.PERFORMER&&e.associations.PERFORMER[0]&&(t=i.getPic(e.associations.PERFORMER[0],200)),t},getPic:function(e,t){var n=null;if(e){for(var r=0;r<e.length;r++){var i=e[r].sizes,s=99999;for(var o=0;o<i.length;o++){if(i[o].width<t)continue;i[o].width<s&&(s=i[o],n=i[o].uri)}}return n}},parseConf:function(e){var n={};return e&&t.each(t.map(decodeURI(e).split(/&/g),function(e,t){var n=e.split("="),r={};if(n.length>=1){var i=undefined;n.length==2&&(i=n[1]),r[n[0]]=i}return r}),function(e){t.extend(n,e)}),n}};return i}),function(e){e.fn.touchwipe=function(t){var n={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return t&&e.extend(n,t),this.each(function(){function i(){this.removeEventListener("touchmove",s),e=null,r=!1}function s(s){n.preventDefaultEvents&&s.preventDefault();if(r){var o=s.touches[0].pageX,u=s.touches[0].pageY,a=e-o,f=t-u;Math.abs(a)>=n.min_move_x?(i(),a>0?n.wipeLeft():n.wipeRight()):Math.abs(f)>=n.min_move_y&&(i(),f>0?n.wipeDown():n.wipeUp())}}function o(n){n.touches.length==1&&(e=n.touches[0].pageX,t=n.touches[0].pageY,r=!0,this.addEventListener("touchmove",s,!1))}var e,t,r=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",o,!1)}),this}}(jQuery),define("touchwipe",["jquery"],function(e){return function(){var t,n;return t||e.touchwipe}}(this)),define("js/models/app",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({initialize:function(){}}),i=new r;return require(["touchwipe"],function(){var t=null,n=null;e(window).touchwipe({wipeLeft:function(){i.set("showDashboard",!1)},wipeRight:function(){i.set("showDashboard",!0)},min_move_x:25,preventDefaultEvents:!0})}),new r});var geoip2=function(){function Lookup(e,t,n,r){this.successCallback=e,this.errorCallback=t,this.geolocation=n&&n.hasOwnProperty("geolocation")?n.geolocation:navigator.geolocation,this.type=r}var exports={};Lookup.prototype.returnSuccess=function(e){this.successCallback&&"function"==typeof this.successCallback&&this.successCallback(this.fillInObject(this.objectFromJSON(e)))},Lookup.prototype.returnError=function(e){this.errorCallback&&"function"==typeof this.errorCallback&&(e||(e={error:"Unknown error"}),this.errorCallback(e))},Lookup.prototype.objectFromJSON=function(json){return"undefined"!=typeof window.JSON&&"function"==typeof window.JSON.parse?window.JSON.parse(json):eval("("+json+")")};var fillIns={country:[["continent","Object","names","Object"],["country","Object","names","Object"],["registered_country","Object","names","Object"],["represented_country","Object","names","Object"],["traits","Object"]],city:[["city","Object","names","Object"],["continent","Object","names","Object"],["country","Object","names","Object"],["location","Object"],["postal","Object"],["registered_country","Object","names","Object"],["represented_country","Object","names","Object"],["subdivisions","Array",0,"Object","names","Object"],["traits","Object"]]};return Lookup.prototype.fillInObject=function(e){for(var t="country"===this.type?fillIns.country:fillIns.city,n=0;n<t.length;n++)for(var r=t[n],i=e,s=0;s<r.length;s+=2){var o=r[s];i[o]||(i[o]="Object"===r[s+1]?{}:[]),i=i[o]}try{Object.defineProperty(e.continent,"continent_code",{enumerable:!1,get:function(){return this.code},set:function(e){this.code=e}})}catch(u){e.continent.code&&(e.continent.continent_code=e.continent.code)}if("country"!==this.type)try{Object.defineProperty(e,"most_specific_subdivision",{enumerable:!1,get:function(){return this.subdivisions[this.subdivisions.length-1]},set:function(e){this.subdivisions[this.subdivisions.length-1]=e}})}catch(u){e.most_specific_subdivision=e.subdivisions[e.subdivisions.length-1]}return e},Lookup.prototype.getGeoIPResult=function(){var e,t,n=this,r="//js.maxmind.com/geoip/v2.1/"+this.type+"/me?",i={referrer:location.protocol+"//"+location.hostname};if(!this.alreadyRan){this.alreadyRan=1,"Microsoft Internet Explorer"===navigator.appName&&window.XDomainRequest&&-1===navigator.appVersion.indexOf("MSIE 1")?(t=new XDomainRequest,r=window.location.protocol+r,t.onprogress=function(){}):(t=new window.XMLHttpRequest,r="https:"+r);for(e in i)i.hasOwnProperty(e)&&i[e]&&(r+=e+"="+encodeURIComponent(i[e])+"&");r=r.substring(0,r.length-1),t.open("GET",r,!0),t.onload=function(){if("undefined"==typeof t.status||200===t.status)n.returnSuccess(t.responseText);else{var e,r=t.hasOwnProperty("contentType")?t.contentType:t.getResponseHeader("Content-Type");if(/json/.test(r)&&t.responseText.length)try{e=n.objectFromJSON(t.responseText)}catch(i){e={code:"HTTP_ERROR",error:"The server returned a "+t.status+" status with an invalid JSON body."}}else e=t.responseText.length?{code:"HTTP_ERROR",error:"The server returned a "+t.status+" status with the following body: "+t.responseText}:{code:"HTTP_ERROR",error:"The server returned a "+t.status+" status but either the server did not return a body or this browser is a version of Internet Explorer that hides error bodies."};n.returnError(e)}},t.ontimeout=function(){n.returnError({code:"HTTP_TIMEOUT",error:"The request to the GeoIP2 web service timed out."})},t.onerror=function(){n.returnError({code:"HTTP_ERROR",error:"There was a network error receiving the response from the GeoIP2 web service."})},t.send(null)}},exports.country=function(e,t,n){var r=new Lookup(e,t,n,"country");r.getGeoIPResult()},exports.city=function(e,t,n){var r=new Lookup(e,t,n,"city");r.getGeoIPResult()},exports.insights=function(e,t,n){var r=new Lookup(e,t,n,"insights");r.getGeoIPResult()},exports}();define("geoip2",function(e){return function(){var t,n;return t||e.geoip2}}(this)),define("js/models/user",["underscore","backbone","js/lib/track"],function(e,t,n){var r=t.Model.extend({state:"authUnattempted",url:function(){return USER_PATH+this.userId+"?enrich=true&accessToken="+this.accessToken},sync:function(e,n,r){this.userId&&this.accessToken&&t.sync(e,n,r)},initialize:function(){e.bindAll(this,"handleFbStatusChange","onLogin","login"),this.set("filterTags",[]),this.set("removedEvents",[]),this.listenTo(t,"fbLoginClick",this.login),n.addUserContext(this)},login:function(e,t){var n=this,r={scope:"user_likes,public_profile,email,user_friends"};t&&(r.auth_type="rerequest"),FB.login(function(){FB.getLoginStatus(function(t){n.handleFbStatusChange(t,e)})},r)},onLoginFailure:function(e,t,r){this.logginStatus="shubaloo_fail",n.logEvent("error",{msg:"failed to fb login "+JSON.stringify(e)+", response: "+JSON.stringify(t)})},onLogin:function(e){this.logginStatus="success",this.get("filterTags")||this.set("filterTags",[]),this.get("removedEvents")||this.set("removedEvents",[]);if(!this.get("thumb")&&this.get("pics")){var t=this.get("pics");for(var n=0;n<t.length;n++){var r=t[n].sizes;for(var i=0;i<r.length;i++)if(r[i].width<=30&&r[i].width<=30){this.set("thumb",r[i].uri);break}}}this.state="loggedIn",this.trigger("loggedIn"),e&&e()},onFbConnect:function(e,t,r){this.userId="fb_u_"+e,this.accessToken=t;var i=this;!this.logginStatus!=="success"&&(this.trigger("loggingIn"),this.fetch({error:i.onLoginFailure,statusCode:{201:function(){n.logEvent("signup"),i.set("signup",!0),i.onLogin(r)},200:function(){i.onLogin(r),n.logEvent("login")}}}),this.logginStatus="fb_success")},handleFbStatusChange:function(e,t){e.status==="connected"?this.onFbConnect(e.authResponse.userID,e.authResponse.accessToken,t):e.status==="not_authorized"?(this.state="unauthorized",this.trigger("loginFail")):(this.state="notLoggedIn",this.trigger("loginFail"))},addTag:function(e){if(!e)return;var t=$.inArray(e,this.get("filterTags"));t==-1&&(this.get("filterTags").push(e),this.trigger("change:filterTags",this,this.get("filterTags")),this.trigger("change"),this.save(),n.logEvent("add_tag",{tag:e}))},removeTag:function(e){var t=$.inArray(e,this.get("filterTags"));t!=-1&&(this.get("filterTags").splice(t,1),this.trigger("change:filterTags",this,this.get("filterTags")),this.trigger("change"),this.save(),n.logEvent("remove_tag",{tag:e}))}});return new r}),define("js/models/city",["jquery","underscore","backbone","flurry","geoip2","js/lib/track","js/lib/utils","js/models/user","js/models/app"],function(e,t,n,r,i,s,o,u,a){var f=n.Model.extend({defaults:function(){return{displayCity:null,locationInput:null}},initialize:function(){t.bindAll(this,"handleMmGeolocation","handleBrowserGeolocation","handleLocationInput"),this.listenTo(this,"change:data",this.checkSupportedCountry),isPhantom||!this.tryToSetLocationFromLocalCache()&&!this.tryToSetLocationFromUser()&&(this.listenTo(u,"sync",this.tryToSetLocationFromUser),i.city(this.handleMmGeolocation),!window.isWidget&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition&&navigator.geolocation.getCurrentPosition(this.handleBrowserGeolocation)),this.listenTo(this,"change:locationInput",this.handleLocationInput),s.addCityContext(this)},tryToSetLocationFromLocalCache:function(){if(!localStorage)return!1;var e=localStorage.getItem("location");if(!e)return!1;var t;try{t=JSON.parse(e)}catch(n){return!1}return this.setData("localcache",null,null,null,t),this.set("displayCity",t.city),!0},tryToSetLocationFromUser:function(){return u.get("location")?(this.setData("user",null,null,null,u.get("location")),!0):u.get("locationStr")?(this.setData("user",u.get("locationStr").split(" ").join("+").toLowerCase()),!0):!1},handleMmGeolocation:function(e){if(!e||!e.location)return;var t={city:e.city.names.en,region:e.most_specific_subdivision.iso_code,countryCode:e.country.iso_code,latitude:e.location.latitude,longitude:e.location.longitude};this.setData("ip",null,null,null,t)},handleBrowserGeolocation:function(e){this.setData("browser",null,e.coords.latitude,e.coords.longitude)},handleLocationInput:function(){if(!this.get("locationInput"))return;var e=this.get("locationInput").trim().split(" ").join("+").toLowerCase();e==="vancouver"&&(e="vancouver,bc"),this.setData("input",e)},setData:function(t,n,i,o,a){var f=this,l;if(this.get("data")&&this.get("data").src=="input"&&t!="input")return;if(this.get("data")&&this.get("data").src=="path"&&t!="input")return;if(this.get("data")&&this.get("data").src&&t!="input"&&t!="path")return;if(!a){if(!n&&(!i||!o)){s.logEvent("error",{msg:"Neither city id, lat/lng or location object is provided by "+t});return}i&&o?l="https://maps.googleapis.com/maps/api/geocode/json?sensor=true&latlng="+i+","+o:l="https://maps.googleapis.com/maps/api/geocode/json?sensor=true&address="+n,e.ajax({url:l,type:"GET",success:function(e){a=f.parseGeocodingResult(e),f.setData(t,n,i,o,a),t=="user"&&(u.set("location",a),u.save())},error:function(e,t){s.logEvent("error",{msg:"Failed geocoding call for "+n})}});return}i&&o?r.setLocation(i,o):a.latitude&&a.longitude&&r.setLocation(a.latitude,a.longitude),t!="input"?this.set("locationInput",null):s.logEvent("cityUpdate",{input:this.get("locationInput")}),localStorage&&localStorage.setItem("location",JSON.stringify(a)),this.set("displayCity",a.city),this.set("data",{src:t,location:a})},parseGeocodingResult:function(t,n,r){var i={};for(var s=0;s<t.results.length;s++){for(var o=0;o<t.results[s].address_components.length;o++){var u=t.results[s].address_components[o];e.inArray("locality",u.types)!==-1?i.city=u.long_name:e.inArray("country",u.types)!==-1?i.countryCode=u.short_name:e.inArray("administrative_area_level_1",u.types)!==-1&&(i.region=u.short_name)}if(i.countryCode&&i.region&&i.city)break}if(n&&r)i.latitude=n,i.longitude=r;else if(t.results[0]&&t.results[0].geometry){var a=t.results[0].geometry;a.bounds?(i.latitude=(a.bounds.northeast.lat+a.bounds.southwest.lat)/2,i.longitude=(a.bounds.northeast.lng+a.bounds.southwest.lng)/2):a.location&&(i.latitude=a.location.latitude,i.longitude=a.location.longitude)}return i},getCityId:function(){var e=this.get("data");if(!e||!e.location)return e;e=e.location;var t=e.city+",";return e.region?t+=e.region:t+=e.countryCode,t=t.split(" ").join("+").toLowerCase(),t},checkSupportedCountry:function(){this.get("data")&&this.get("data").location.countryCode&&typeof this.get("data").location.countryCode=="string"&&this.get("data").location.countryCode.toLowerCase()!="us"&&this.get("data").location.countryCode.toLowerCase()!="ca"&&!a.get("overlayContent")&&(localStorage&&localStorage.removeItem("location"),a.set("overlayContent","<h1> Sorry, Shubaloo only works in North America right now. </h1>"),o.navigate("change-location",{trigger:!1}),s.logEvent("bad-location",{countryCode:this.get("data").location.countryCode}))}});return new f}),define("js/models/playlist",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({hasPlayed:!1,initialize:function(){this.set("state",{})},setEvents:function(e,t,r,i){var s=0,o;r?o=r-1:o=-1,e instanceof n.Collection&&this.listenTo(e,"remove",function(e){e.id===this.contentIterator.lastResult.event.id?this.next():e.id===this.contentIterator.nextEvent.id&&this.contentIterator.cacheNext()}),this.setContentIterator({init:function(){return this.next(),this},getParentEvent:function(){return o<e.length?e instanceof n.Collection?e.at(o):e[o]:null},cacheNext:function(){for(;;){++o>=e.length&&s<7&&(o=0,s++),this.nextEvent=this.getParentEvent();if(this.nextEvent===null){this.nextContent=null;break}if(!this.nextEvent.get("flatVideoList")||this.nextEvent.get("flatVideoList").length<=s)continue;this.nextContent=this.nextEvent.get("flatVideoList")[s];if(t&&t(this.nextEvent.toJSON()))continue;if(this.lastResult&&this.lastResult.content&&this.nextContent.link==this.lastResult.content.link)continue;break}},next:function(){return this.lastResult={content:this.nextContent,event:this.nextEvent},this.cacheNext(),this.lastResult},hasNext:function(){return this.nextContent!==null}}.init(),i)},setContentIterator:function(e,t){this.contentIterator=e,this.next(t)},next:function(e){var t=this.contentIterator;if(t&&t.hasNext()){var n=t.next();this.setCurrent(n.event,n.content,!1,e),this.hasPlayed=!0}else this.setCurrent(null,null)},setCurrent:function(e,t,n,r){this.set("state",{currentEvent:e,currentVideo:t,forceplay:r})}});return new r});var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,r=function(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e};return function(i,s,o){var u=dateFormat;arguments.length==1&&Object.prototype.toString.call(i)=="[object String]"&&!/\d/.test(i)&&(s=i,i=undefined),i=i?new Date(i):new Date;if(isNaN(i))throw SyntaxError("invalid date");s=String(u.masks[s]||s||u.masks["default"]),s.slice(0,4)=="UTC:"&&(s=s.slice(4),o=!0);var a=o?"getUTC":"get",f=i[a+"Date"](),l=i[a+"Day"](),c=i[a+"Month"](),h=i[a+"FullYear"](),p=i[a+"Hours"](),d=i[a+"Minutes"](),v=i[a+"Seconds"](),m=i[a+"Milliseconds"](),g=o?0:i.getTimezoneOffset(),y={d:f,dd:r(f),ddd:u.i18n.dayNames[l],dddd:u.i18n.dayNames[l+7],m:c+1,mm:r(c+1),mmm:u.i18n.monthNames[c],mmmm:u.i18n.monthNames[c+12],yy:String(h).slice(2),yyyy:h,h:p%12||12,hh:r(p%12||12),H:p,HH:r(p),M:d,MM:r(d),s:v,ss:r(v),l:r(m,3),L:r(m>99?Math.round(m/10):m),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:o?"UTC":(String(i).match(t)||[""]).pop().replace(n,""),o:(g>0?"-":"+")+r(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10]};return s.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return dateFormat(this,e,t)},define("dateformat",function(e){return function(){var t,n;return t||e.DateFormat}}(this)),define("js/models/event",["jquery","underscore","backbone","js/lib/utils","js/models/playlist","dateformat"],function(e,t,n,r){var i=n.Model.extend({defaults:function(){return{name:"",date:null,tickets:[]}},parse:function(e){if(!e)return e;var n=new Date(e.start_time);e.date=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()),e.end_time&&(n=new Date(e.end_time),e.end=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes())),e.formatted_time=e.date.format("ddd m/dd"),e.displayImg=r.getPic(e.pics,200),e.time_unknown||(e.time_unknown=!1),n.getUTCHours()==3&&n.getUTCMinutes()==30&&(e.time_unknown=!0);var i=[];if(e.tags)for(var s=0;s<e.tags.length;s++)e.tags[s].split(" ").length<2&&i.push(e.tags[s]);e.tags=i;var o=[];if(e.associations.PERFORMER){e.formatted_performers="";for(var s=0;s<e.associations.PERFORMER.length;s++){var u=e.associations.PERFORMER[s].name;if(s==1||s==2)e.formatted_performers.length>0&&(e.formatted_performers+=", "),e.formatted_performers+=u;e.displayImg||(e.displayImg=r.getPic(e.associations.PERFORMER[s].pics,200)),e.associations.PERFORMER[s].previewImg=r.getPic(e.associations.PERFORMER[s].pics,100),e.associations.PERFORMER[s].tags&&(e.tags=t.union(e.tags,e.associations.PERFORMER[s].tags))}for(var s=0;s<3;s++)for(var a=0;a<e.associations.PERFORMER.length;a++)e.associations.PERFORMER[a].content&&e.associations.PERFORMER[a].content.length>s&&o.push(e.associations.PERFORMER[a].content[s])}e.flatVideoList=o,e.associations.HOST&&e.associations.HOST[0]&&(e.associations.HOST[0].previewImg=r.getPic(e.associations.HOST[0].pics,100));var f=e.location;return e.formattedLocation=f.name,f.city&&(e.formattedLocation+=", "+f.city),e.associations&&e.associations.PERFORMER&&e.associations.PERFORMER.length>0&&e.location&&e.location?(e.urlPath="/"+e.associations.PERFORMER[0].name.split(" ").join("-")+"-"+e.location.city.split(" ").join("-")+"/"+e.id,e.pageTitle=e.associations.PERFORMER[0].name+" in "+e.location.city,e.pageDesc=e.name+" @ "+e.formattedLocation+", "+e.date.format("dddd, mmmm d, yyyy")+" with "+e.formatted_performers+". Listen to their music, buy tickets and follow them on Shubaloo."):e.urlPath="/events/"+e.id,e.tickets&&Array.isArray(e.tickets)&&e.tickets.length>0&&(e.tickets=t.sortBy(e.tickets,function(e){return e&&e.provider=="Ticketmaster"?-1:1})),this.collection&&this.collection.isEventFiltered&&(e.filtered=this.collection.isEventFiltered(e)),e}});return i}),define("js/models/association",["jquery","underscore","backbone","js/models/event"],function(e,t,n,r){var i=r.extend({sync:function(e,t,r){if(e==="create"||e==="update"||e==="patch")r.contentType="text/plain",r.data=t.get("associationType");return n.sync(e,t,r)}});return i}),define("js/collections/baseCollection",["underscore","jquery","backbone","js/lib/track","js/models/association","js/models/user"],function(e,t,n){var r=n.Collection.extend({setState:function(e){this.state={previous:this.state?this.state.current:null,current:e},this.trigger("stateChange",this.state)},fetch:function(e){var t=this;return e.reset?this.setState(EVENT_LIST_STATES.resetting):this.setState(EVENT_LIST_STATES.paginating),this.listenToOnce(this,"sync",function(){t.setState(EVENT_LIST_STATES.loaded)}),n.Collection.prototype.fetch.apply(this,arguments)}});return r}),define("js/collections/baseEventList",["underscore","jquery","js/collections/baseCollection","js/models/event","js/models/user"],function(e,t,n,r,i){var s=n.extend({model:r,initialize:function(){this.listenTo(i,"change:filterTags",this.onUserFilterUpdate),this.listenTo(i,"change:removedEvents",this.onUserFilterUpdate),this.innerInit&&this.innerInit()},onUserFilterUpdate:function(){var e=0;return this.each(function(t){this.isEventFiltered(t.toJSON())?t.set("filtered",!0):(e++,t.set("filtered",!1))},this),this.trigger("filtersUpdated"),e},comparator:function(e){return e.get("start_time")},isEventFiltered:function(t){return e.contains(i.get("removedEvents"),t.id)||!t.displayImg||!t.associations||!t.associations.PERFORMER}});return s}),define("js/models/user2",["jquery","underscore","backbone","js/lib/utils","js/collections/baseEventList","js/models/event"],function(e,t,n,r,i,s){var o=n.Model.extend({defaults:function(){return{events:null}},parse:function(e,n){if(!e)return;e.pics&&(e.displayImg=r.getPic(e.pics,240),e.thumbnail=r.getPic(e.pics,30)),e.displayImg||(e.displayImg=""),e.thumbnail||(e.thumbnail="");var o=[];t.forEach(["HOST","PERFORMER","GOING_TO","COLLECTION"],function(n){e.associations&&e.associations[n]&&t.forEach(e.associations[n],function(e){o.push(new s(e,{parse:!0}))})});if(o.length>0||n.forceParseEventCollection)e.events=new i(o),e.events.setState(EVENT_LIST_STATES.loaded);return e.content===undefined&&(e.content=[]),e.urlPath="/"+e.name.split(" ").join("-")+"/"+e.id,e.category==="PERFORMER"?(e.pageTitle=e.name+" Tour Dates - See "+e.name+" in Concert | Shubaloo",e.pageDesc=e.name+" music, tour dates and tickets. Follow your favorite bands and more, discover great live music on Shubaloo."):e.category==="VENUE"&&(e.pageTitle=e.name+" Upcoming Concerts",e.location&&e.location.city&&(e.pageTitle+=" in "+e.location.city),e.pageTitle+=" | Shubaloo",e.pageDesc="Listen to upcoming bands at "+e.name,e.location&&e.location.city&&(e.pageDesc+=" in "+e.location.city),e.pageDesc+=" and buy tickets to their shows."),e},getEventsCollection:function(){if(this.get("events"))return this.get("events");var n=new i;return n.url="/REST/users/"+this.id+"/events",n.parse=function(e){var n=[];return t.forEach(["HOST","PERFORMER","GOING_TO","COLLECTION"],function(t){e[t]&&e[t].length>0&&(n=n.concat(e[t]))}),n},n.fetch({parse:!0,reset:!0,data:e.param({enrich:!0}),error:function(e,t){Track.logEvent("error",{msg:"failed to retrieve associated events for user "+user.id+", response: "+t}),n.setState(EVENT_LIST_STATES.loadFailed)}}),this.set("events",n),n}});return o}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!modules/dashboard/templates/dashboard.html",[],function(){return'<div id="dashboard">\n    <ul id="dashboardExploreContainer"></ul>\n\n    <ul id="dashboardYouContainer">\n    </ul>\n\n    <h3>Folks I follow</h3>\n    <div class="button importButton">+ Import</div>\n    <div id="allFollowedContainer" />\n    <div style="clear:both" />\n    <ul id="dashboardFollowingContainer"/>\n\n    <ul id="dashboardFeaturedUsersContainer">\n    </ul>\n\n    <div id="site-about-container">\n        <ul class="site-about">\n            <li class="footer-item">\n                 2015 Shubaloo\n            </li>\n            <li class="footer-item">\n                <a href="https://twitter.com/shubaloobaloo" target="_blank">Twitter</a>\n            </li>\n            <li class="footer-item">\n                <a href="https://www.facebook.com/shubaloobaloo" target="_blank">Facebook</a>\n            </li>\n            <li class="footer-item">\n                <a href="https://instagram.com/shubaloo_app" target="_blank">Instagram</a>\n            </li>\n            <li class="footer-item">\n                <a href="https://medium.com/@shuisonfire">Blog</a>\n            </li>\n            <li class="footer-item">\n                <a href="mailto:yourfriends@shubaloo.com">Email</a>\n            </li>\n            <li class="footer-item">\n                <a href="/policy.html">Privacy Policy</a>\n            </li>\n        </ul>\n    </div>\n\n    <a id="mixpanel-badge" href="https://mixpanel.com/f/partner"><img src="//cdn.mxpnl.com/site_media/images/partner/badge_light.png" alt="Mobile Analytics" /></a>\n\n</div>'}),define("modules/dashboard/views/dashboardContainer",["jquery","underscore","backbone","js/lib/utils","js/models/app","text!modules/dashboard/templates/dashboard.html"],function(e,t,n,r,i,s){var o=n.View.extend({el:"#dashboard-container",template:t.template(s),initialize:function(e){this.listenTo(i,"change:showDashboard",this.handleDashboardVisibilityChange),this.handleDashboardVisibilityChange(),this.render(e.content)},render:function(e){this.$el.html(e)},handleDashboardVisibilityChange:function(){i.get("showDashboard")?this.$el.removeClass("move-left"):this.$el.addClass("move-left")}});return o}),function(e){function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function i(t,n){e.fn[t]=function(i){if("string"==typeof i){for(var u=r.call(arguments,1),a=0,f=this.length;f>a;a++){var l=this[a],c=e.data(l,t);if(c)if(e.isFunction(c[i])&&"_"!==i.charAt(0)){var h=c[i].apply(c,u);if(void 0!==h)return h}else s("no such method '"+i+"' for "+t+" instance");else s("cannot call methods on "+t+" prior to initialization; "+"attempted to call '"+i+"'")}return this}return this.each(function(){var r=e.data(this,t);r?(r.option(i),r._init()):(r=new n(this,i),e.data(this,t,r))})}}if(e){var s="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),i(e,t)},e.bridget}}var r=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],n):n(e.jQuery)}(window),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,r=function(){};n.addEventListener?r=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(r=function(e,n,r){e[n+r]=r.handleEvent?function(){var n=t(e);r.handleEvent.call(r,n)}:function(){var n=t(e);r.call(e,n)},e.attachEvent("on"+n,e[n+r])});var i=function(){};n.removeEventListener?i=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=void 0}});var s={bind:r,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",s):"object"==typeof exports?module.exports=s:e.eventie=s}(this),function(e){function t(e){"function"==typeof e&&(t.isReady?e():s.push(e))}function n(e){var n="readystatechange"===e.type&&"complete"!==i.readyState;if(!t.isReady&&!n){t.isReady=!0;for(var r=0,o=s.length;o>r;r++){var u=s[r];u()}}}function r(r){return r.bind(i,"DOMContentLoaded",n),r.bind(i,"readystatechange",n),r.bind(e,"load",n),t}var i=e.document,s=[];t.isReady=!1,"function"==typeof define&&define.amd?(t.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],r)):e.docReady=r(e.eventie)}(this),function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){function t(e){if(e){if("string"==typeof r[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,s=0,u=n.length;u>s;s++)if(t=n[s]+e,"string"==typeof r[t])return t}}var n="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),function(e){function t(e){var t=parseFloat(e),n=-1===e.indexOf("%")&&!isNaN(t);return n&&t}function n(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=o.length;n>t;t++){var r=o[t];e[r]=0}return e}function r(e){function r(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var r=s(e);if("none"===r.display)return n();var i={};i.width=e.offsetWidth,i.height=e.offsetHeight;for(var l=i.isBorderBox=!!f&&!!r[f]&&"border-box"===r[f],c=0,h=o.length;h>c;c++){var d=o[c],v=r[d];v=u(e,v);var m=parseFloat(v);i[d]=isNaN(m)?0:m}var g=i.paddingLeft+i.paddingRight,y=i.paddingTop+i.paddingBottom,b=i.marginLeft+i.marginRight,w=i.marginTop+i.marginBottom,E=i.borderLeftWidth+i.borderRightWidth,S=i.borderTopWidth+i.borderBottomWidth,x=l&&a,T=t(r.width);T!==!1&&(i.width=T+(x?0:g+E));var N=t(r.height);return N!==!1&&(i.height=N+(x?0:y+S)),i.innerWidth=i.width-(g+E),i.innerHeight=i.height-(y+S),i.outerWidth=i.width+b,i.outerHeight=i.height+w,i}}function u(e,t){if(i||-1===t.indexOf("%"))return t;var n=e.style,r=n.left,s=e.runtimeStyle,o=s&&s.left;return o&&(s.left=e.currentStyle.left),n.left=t,t=n.pixelLeft,n.left=r,o&&(s.left=o),t}var a,f=e("boxSizing");return function(){if(f){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[f]="border-box";var n=document.body||document.documentElement;n.appendChild(e);var r=s(e);a=200===t(r.width),n.removeChild(e)}}(),r}var i=e.getComputedStyle,s=i?function(e){return i(e,null)}:function(e){return e.currentStyle},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],r):"object"==typeof exports?module.exports=r(require("get-style-property")):e.getSize=r(e.getStyleProperty)}(window),function(e,t){function n(e,t){return e[u](t)}function r(e){if(!e.parentNode){var t=document.createDocumentFragment();t.appendChild(e)}}function i(e,t){r(e);for(var n=e.parentNode.querySelectorAll(t),i=0,s=n.length;s>i;i++)if(n[i]===e)return!0;return!1}function s(e,t){return r(e),n(e,t)}var o,u=function(){if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],n=0,r=e.length;r>n;n++){var i=e[n],s=i+"MatchesSelector";if(t[s])return s}}();if(u){var a=document.createElement("div"),f=n(a,"div");o=f?n:s}else o=i;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return o}):window.matchesSelector=o}(this,Element.prototype),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){for(var t in e)return!1;return t=null,!0}function r(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function i(e,i,s){function u(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var a=s("transition"),f=s("transform"),l=a&&f,c=!!s("perspective"),h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[a],p=["transform","transition","transitionDuration","transitionProperty"],d=function(){for(var e={},t=0,n=p.length;n>t;t++){var r=p[t],i=s(r);i&&i!==r&&(e[r]=i)}return e}();t(u.prototype,e.prototype),u.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},u.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},u.prototype.getSize=function(){this.size=i(this.element)},u.prototype.css=function(e){var t=this.element.style;for(var n in e){var r=d[n]||n;t[r]=e[n]}},u.prototype.getPosition=function(){var e=o(this.element),t=this.layout.options,n=t.isOriginLeft,r=t.isOriginTop,i=parseInt(e[n?"left":"right"],10),s=parseInt(e[r?"top":"bottom"],10);i=isNaN(i)?0:i,s=isNaN(s)?0:s;var u=this.layout.size;i-=n?u.paddingLeft:u.paddingRight,s-=r?u.paddingTop:u.paddingBottom,this.position.x=i,this.position.y=s},u.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={};t.isOriginLeft?(n.left=this.position.x+e.paddingLeft+"px",n.right=""):(n.right=this.position.x+e.paddingRight+"px",n.left=""),t.isOriginTop?(n.top=this.position.y+e.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+e.paddingBottom+"px",n.top=""),this.css(n),this.emitEvent("layout",[this])};var v=c?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};u.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=parseInt(e,10),s=parseInt(t,10),o=i===this.position.x&&s===this.position.y;if(this.setPosition(e,t),o&&!this.isTransitioning)return this.layoutPosition(),void 0;var u=e-n,a=t-r,f={},l=this.layout.options;u=l.isOriginLeft?u:-u,a=l.isOriginTop?a:-a,f.transform=v(u,a),this.transition({to:f,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},u.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},u.prototype.moveTo=l?u.prototype._transitionTo:u.prototype.goTo,u.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},u.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},u.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(e),void 0;var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);var r=this.element.offsetHeight;r=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var m=f&&r(f)+",opacity";u.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:m,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(h,this,!1))},u.prototype.transition=u.prototype[a?"_transition":"_nonTransition"],u.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},u.prototype.onotransitionend=function(e){this.ontransitionend(e)};var g={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};u.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,r=g[e.propertyName]||e.propertyName;if(delete t.ingProperties[r],n(t.ingProperties)&&this.disableTransition(),r in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[r]),r in t.onEnd){var i=t.onEnd[r];i.call(this),delete t.onEnd[r]}this.emitEvent("transitionEnd",[this])}},u.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(h,this,!1),this.isTransitioning=!1},u.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var y={transitionProperty:"",transitionDuration:""};return u.prototype.removeTransitionStyles=function(){this.css(y)},u.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},u.prototype.remove=function(){if(!a||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var e=this;this.on("transitionEnd",function(){return e.removeElem(),!0}),this.hide()},u.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options;this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0})},u.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options;this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},u.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},u}var s=e.getComputedStyle,o=s?function(e){return s(e,null)}:function(e){return e.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],i):(e.Outlayer={},e.Outlayer.Item=i(e.EventEmitter,e.getSize,e.getStyleProperty))}(window),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){return"[object Array]"===c.call(e)}function r(e){var t=[];if(n(e))t=e;else if(e&&"number"==typeof e.length)for(var r=0,i=e.length;i>r;r++)t.push(e[r]);else t.push(e);return t}function i(e,t){var n=p(t,e);-1!==n&&t.splice(n,1)}function s(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()}function o(n,o,c,p,d,v){function m(e,n){if("string"==typeof e&&(e=u.querySelector(e)),!e||!h(e))return a&&a.error("Bad "+this.constructor.namespace+" element: "+e),void 0;this.element=e,this.options=t({},this.constructor.defaults),this.option(n);var r=++g;this.element.outlayerGUID=r,y[r]=this,this._create(),this.options.isInitLayout&&this.layout()}var g=0,y={};return m.namespace="outlayer",m.Item=v,m.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},t(m.prototype,c.prototype),m.prototype.option=function(e){t(this.options,e)},m.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),t(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},m.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},m.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),n=this.constructor.Item,r=[],i=0,s=t.length;s>i;i++){var o=t[i],u=new n(o,this);r.push(u)}return r},m.prototype._filterFindItemElements=function(e){e=r(e);for(var t=this.options.itemSelector,n=[],i=0,s=e.length;s>i;i++){var o=e[i];if(h(o))if(t){d(o,t)&&n.push(o);for(var u=o.querySelectorAll(t),a=0,f=u.length;f>a;a++)n.push(u[a])}else n.push(o)}return n},m.prototype.getItemElements=function(){for(var e=[],t=0,n=this.items.length;n>t;t++)e.push(this.items[t].element);return e},m.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},m.prototype._init=m.prototype.layout,m.prototype._resetLayout=function(){this.getSize()},m.prototype.getSize=function(){this.size=p(this.element)},m.prototype._getMeasurement=function(e,t){var n,r=this.options[e];r?("string"==typeof r?n=this.element.querySelector(r):h(r)&&(n=r),this[e]=n?p(n)[t]:r):this[e]=0},m.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},m.prototype._getItemsForLayout=function(e){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n];i.isIgnored||t.push(i)}return t},m.prototype._layoutItems=function(e,t){function n(){r.emitEvent("layoutComplete",[r,e])}var r=this;if(!e||!e.length)return n(),void 0;this._itemsOn(e,"layout",n);for(var i=[],s=0,o=e.length;o>s;s++){var u=e[s],a=this._getItemLayoutPosition(u);a.item=u,a.isInstant=t||u.isLayoutInstant,i.push(a)}this._processLayoutQueue(i)},m.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},m.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];this._positionItem(r.item,r.x,r.y,r.isInstant)}},m.prototype._positionItem=function(e,t,n,r){r?e.goTo(t,n):e.moveTo(t,n)},m.prototype._postLayout=function(){this.resizeContainer()},m.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},m.prototype._getContainerSize=l,m.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},m.prototype._itemsOn=function(e,t,n){function r(){return i++,i===s&&n.call(o),!0}for(var i=0,s=e.length,o=this,u=0,a=e.length;a>u;u++){var f=e[u];f.on(t,r)}},m.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},m.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},m.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;n>t;t++){var r=e[t];this.ignore(r)}}},m.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,n=e.length;n>t;t++){var r=e[t];i(r,this.stamps),this.unignore(r)}},m.prototype._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=r(e)):void 0},m.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;t>e;e++){var n=this.stamps[e];this._manageStamp(n)}}},m.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},m.prototype._manageStamp=l,m.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,r=p(e),i={left:t.left-n.left-r.marginLeft,top:t.top-n.top-r.marginTop,right:n.right-t.right-r.marginRight,bottom:n.bottom-t.bottom-r.marginBottom};return i},m.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},m.prototype.bindResize=function(){this.isResizeBound||(n.bind(e,"resize",this),this.isResizeBound=!0)},m.prototype.unbindResize=function(){this.isResizeBound&&n.unbind(e,"resize",this),this.isResizeBound=!1},m.prototype.onresize=function(){function e(){t.resize(),delete t.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},m.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},m.prototype.needsResizeLayout=function(){var e=p(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},m.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},m.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},m.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)}},m.prototype.reveal=function(e){var t=e&&e.length;if(t)for(var n=0;t>n;n++){var r=e[n];r.reveal()}},m.prototype.hide=function(e){var t=e&&e.length;if(t)for(var n=0;t>n;n++){var r=e[n];r.hide()}},m.prototype.getItem=function(e){for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];if(r.element===e)return r}},m.prototype.getItems=function(e){if(e&&e.length){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n],s=this.getItem(i);s&&t.push(s)}return t}},m.prototype.remove=function(e){e=r(e);var t=this.getItems(e);if(t&&t.length){this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])});for(var n=0,s=t.length;s>n;n++){var o=t[n];o.remove(),i(o,this.items)}}},m.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];r.destroy()}this.unbindResize(),delete this.element.outlayerGUID,f&&f.removeData(this.element,this.constructor.namespace)},m.data=function(e){var t=e&&e.outlayerGUID;return t&&y[t]},m.create=function(e,n){function r(){m.apply(this,arguments)}return Object.create?r.prototype=Object.create(m.prototype):t(r.prototype,m.prototype),r.prototype.constructor=r,r.defaults=t({},m.defaults),t(r.defaults,n),r.prototype.settings={},r.namespace=e,r.data=m.data,r.Item=function(){v.apply(this,arguments)},r.Item.prototype=new v,o(function(){for(var t=s(e),n=u.querySelectorAll(".js-"+t),i="data-"+t+"-options",o=0,l=n.length;l>o;o++){var c,h=n[o],p=h.getAttribute(i);try{c=p&&JSON.parse(p)}catch(d){a&&a.error("Error parsing "+i+" on "+h.nodeName.toLowerCase()+(h.id?"#"+h.id:"")+": "+d);continue}var v=new r(h,c);f&&f.data(h,e,v)}}),f&&f.bridget&&f.bridget(e,r),r},m.Item=v,m}var u=e.document,a=e.console,f=e.jQuery,l=function(){},c=Object.prototype.toString,h="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},p=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],o):e.Outlayer=o(e.eventie,e.docReady,e.EventEmitter,e.getSize,e.matchesSelector,e.Outlayer.Item)}(window),function(e){function t(e){function t(){e.Item.apply(this,arguments)}return t.prototype=new e.Item,t.prototype._create=function(){this.id=this.layout.itemGUID++,e.Item.prototype._create.call(this),this.sortData={}},t.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var e=this.layout.options.getSortData,t=this.layout._sorters;for(var n in e){var r=t[n];this.sortData[n]=r(this.element,this)}}},t}"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],t):(e.Isotope=e.Isotope||{},e.Isotope.Item=t(e.Outlayer))}(window),function(e){function t(e,t){function n(e){this.isotope=e,e&&(this.options=e.options[this.namespace],this.element=e.element,this.items=e.filteredItems,this.size=e.size)}return function(){function e(e){return function(){return t.prototype[e].apply(this.isotope,arguments)}}for(var r=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],s=0,o=r.length;o>s;s++){var u=r[s];n.prototype[u]=e(u)}}(),n.prototype.needsVerticalResizeLayout=function(){var t=e(this.isotope.element),n=this.isotope.size&&t;return n&&t.innerHeight!==this.isotope.size.innerHeight},n.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},n.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},n.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},n.prototype.getSegmentSize=function(e,t){var n=e+t,r="outer"+t;if(this._getMeasurement(n,r),!this[n]){var i=this.getFirstItemSize();this[n]=i&&i[r]||this.isotope.size["inner"+t]}},n.prototype.getFirstItemSize=function(){var t=this.isotope.filteredItems[0];return t&&t.element&&e(t.element)},n.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},n.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},n.modes={},n.create=function(e,t){function r(){n.apply(this,arguments)}return r.prototype=new n,t&&(r.options=t),r.prototype.namespace=e,n.modes[e]=r,r},n}"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],t):(e.Isotope=e.Isotope||{},e.Isotope.LayoutMode=t(e.getSize,e.Outlayer))}(window),function(e){function t(e,t){var r=e.create("masonry");return r.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.maxY=0},r.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],n=e&&e.element;this.columnWidth=n&&t(n).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},r.prototype.getContainerWidth=function(){var e=this.options.isFitWidth?this.element.parentNode:this.element,n=t(e);this.containerWidth=n&&n.innerWidth},r.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,r=t&&1>t?"round":"ceil",s=Math[r](e.size.outerWidth/this.columnWidth);s=Math.min(s,this.cols);for(var o=this._getColGroup(s),u=Math.min.apply(Math,o),a=n(o,u),f={x:this.columnWidth*a,y:u},l=u+e.size.outerHeight,c=this.cols+1-o.length,h=0;c>h;h++)this.colYs[a+h]=l;return f},r.prototype._getColGroup=function(e){if(2>e)return this.colYs;for(var t=[],n=this.cols+1-e,r=0;n>r;r++){var i=this.colYs.slice(r,r+e);t[r]=Math.max.apply(Math,i)}return t},r.prototype._manageStamp=function(e){var n=t(e),r=this._getElementOffset(e),i=this.options.isOriginLeft?r.left:r.right,s=i+n.outerWidth,o=Math.floor(i/this.columnWidth);o=Math.max(0,o);var u=Math.floor(s/this.columnWidth);u-=s%this.columnWidth?0:1,u=Math.min(this.cols-1,u);for(var a=(this.options.isOriginTop?r.top:r.bottom)+n.outerHeight,f=o;u>=f;f++)this.colYs[f]=Math.max(a,this.colYs[f])},r.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},r.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},r.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},r}var n=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++){var i=e[n];if(i===t)return n}return-1};"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],t):e.Masonry=t(e.Outlayer,e.getSize)}(window),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,n){var r=e.create("masonry"),i=r.prototype._getElementOffset,s=r.prototype.layout,o=r.prototype._getMeasurement;t(r.prototype,n.prototype),r.prototype._getElementOffset=i,r.prototype.layout=s,r.prototype._getMeasurement=o;var u=r.prototype.measureColumns;r.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,u.call(this)};var a=r.prototype._manageStamp;return r.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,a.apply(this,arguments)},r}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],n):n(e.Isotope.LayoutMode,e.Masonry)}(window),function(e){function t(e){var t=e.create("fitRows");return t.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0},t.prototype._getItemLayoutPosition=function(e){e.getSize(),0!==this.x&&e.size.outerWidth+this.x>this.isotope.size.innerWidth&&(this.x=0,this.y=this.maxY);var t={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+e.size.outerHeight),this.x+=e.size.outerWidth,t},t.prototype._getContainerSize=function(){return{height:this.maxY}},t}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],t):t(e.Isotope.LayoutMode)}(window),function(e){function t(e){var t=e.create("vertical",{horizontalAlignment:0});return t.prototype._resetLayout=function(){this.y=0},t.prototype._getItemLayoutPosition=function(e){e.getSize();var t=(this.isotope.size.innerWidth-e.size.outerWidth)*this.options.horizontalAlignment,n=this.y;return this.y+=e.size.outerHeight,{x:t,y:n}},t.prototype._getContainerSize=function(){return{height:this.y}},t}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],t):t(e.Isotope.LayoutMode)}(window),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){return"[object Array]"===l.call(e)}function r(e){var t=[];if(n(e))t=e;else if(e&&"number"==typeof e.length)for(var r=0,i=e.length;i>r;r++)t.push(e[r]);else t.push(e);return t}function i(e,t){var n=c(t,e);-1!==n&&t.splice(n,1)}function s(e,n,s,a,l){function c(e,t){return function(n,r){for(var i=0,s=e.length;s>i;i++){var o=e[i],u=n.sortData[o],a=r.sortData[o];if(u>a||a>u){var f=void 0!==t[o]?t[o]:t,l=f?1:-1;return(u>a?1:-1)*l}}return 0}}var h=e.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});h.Item=a,h.LayoutMode=l,h.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),e.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var t in l.modes)this._initLayoutMode(t)},h.prototype.reloadItems=function(){this.itemGUID=0,e.prototype.reloadItems.call(this)},h.prototype._itemize=function(){for(var t=e.prototype._itemize.apply(this,arguments),n=0,r=t.length;r>n;n++){var i=t[n];i.id=this.itemGUID++}return this._updateItemsSortData(t),t},h.prototype._initLayoutMode=function(e){var n=l.modes[e],r=this.options[e]||{};this.options[e]=n.options?t(n.options,r):r,this.modes[e]=new n(this)},h.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?(this.arrange(),void 0):(this._layout(),void 0)},h.prototype._layout=function(){var e=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,e),this._isLayoutInited=!0},h.prototype.arrange=function(e){this.option(e),this._getIsInstant(),this.filteredItems=this._filter(this.items),this._sort(),this._layout()},h.prototype._init=h.prototype.arrange,h.prototype._getIsInstant=function(){var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=e,e},h.prototype._filter=function(e){function t(){c.reveal(i),c.hide(s)}var n=this.options.filter;n=n||"*";for(var r=[],i=[],s=[],o=this._getFilterTest(n),u=0,a=e.length;a>u;u++){var f=e[u];if(!f.isIgnored){var l=o(f);l&&r.push(f),l&&f.isHidden?i.push(f):l||f.isHidden||s.push(f)}}var c=this;return this._isInstant?this._noTransition(t):t(),r},h.prototype._getFilterTest=function(e){return o&&this.options.isJQueryFiltering?function(t){return o(t.element).is(e)}:"function"==typeof e?function(t){return e(t.element)}:function(t){return s(t.element,e)}},h.prototype.updateSortData=function(e){this._getSorters(),e=r(e);var t=this.getItems(e);t=t.length?t:this.items,this._updateItemsSortData(t)},h.prototype._getSorters=function(){var e=this.options.getSortData;for(var t in e){var n=e[t];this._sorters[t]=d(n)}},h.prototype._updateItemsSortData=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];r.updateSortData()}};var d=function(){function e(e){if("string"!=typeof e)return e;var n=u(e).split(" "),r=n[0],i=r.match(/^\[(.+)\]$/),s=i&&i[1],o=t(s,r),a=h.sortDataParsers[n[1]];return e=a?function(e){return e&&a(o(e))}:function(e){return e&&o(e)}}function t(e,t){var n;return n=e?function(t){return t.getAttribute(e)}:function(e){var n=e.querySelector(t);return n&&f(n)}}return e}();h.sortDataParsers={parseInt:function(e){return parseInt(e,10)},parseFloat:function(e){return parseFloat(e)}},h.prototype._sort=function(){var e=this.options.sortBy;if(e){var t=[].concat.apply(e,this.sortHistory),n=c(t,this.options.sortAscending);this.filteredItems.sort(n),e!==this.sortHistory[0]&&this.sortHistory.unshift(e)}},h.prototype._mode=function(){var e=this.options.layoutMode,t=this.modes[e];if(!t)throw Error("No layout mode: "+e);return t.options=this.options[e],t},h.prototype._resetLayout=function(){e.prototype._resetLayout.call(this),this._mode()._resetLayout()},h.prototype._getItemLayoutPosition=function(e){return this._mode()._getItemLayoutPosition(e)},h.prototype._manageStamp=function(e){this._mode()._manageStamp(e)},h.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},h.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},h.prototype.appended=function(e){var t=this.addItems(e);if(t.length){var n=this._filterRevealAdded(t);this.filteredItems=this.filteredItems.concat(n)}},h.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps();var r=this._filterRevealAdded(t);this.layoutItems(n),this.filteredItems=r.concat(this.filteredItems)}},h.prototype._filterRevealAdded=function(e){var t=this._noTransition(function(){return this._filter(e)});return this.layoutItems(t,!0),this.reveal(t),e},h.prototype.insert=function(e){var t=this.addItems(e);if(t.length){var n,r,i=t.length;for(n=0;i>n;n++)r=t[n],this.element.appendChild(r.element);var s=this._filter(t);for(this._noTransition(function(){this.hide(s)}),n=0;i>n;n++)t[n].isLayoutInstant=!0;for(this.arrange(),n=0;i>n;n++)delete t[n].isLayoutInstant;this.reveal(s)}};var v=h.prototype.remove;return h.prototype.remove=function(e){e=r(e);var t=this.getItems(e);if(v.call(this,e),t&&t.length)for(var n=0,s=t.length;s>n;n++){var o=t[n];i(o,this.filteredItems)}},h.prototype._noTransition=function(e){var t=this.options.transitionDuration;this.options.transitionDuration=0;var n=e.call(this);return this.options.transitionDuration=t,n},h}var o=e.jQuery,u=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s+|\s+$/g,"")},a=document.documentElement,f=a.textContent?function(e){return e.textContent}:function(e){return e.innerText},l=Object.prototype.toString,c=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1};"function"==typeof define&&define.amd?define("js/lib/isotope.pkgd.min",["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],s):e.Isotope=s(e.Outlayer,e.getSize,e.matchesSelector,e.Isotope.Item,e.Isotope.LayoutMode)}(window),function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if("object"==typeof e){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if("object"===n)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,r=function(){};n.addEventListener?r=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(r=function(e,n,r){e[n+r]=r.handleEvent?function(){var n=t(e);r.handleEvent.call(r,n)}:function(){var n=t(e);r.call(e,n)},e.attachEvent("on"+n,e[n+r])});var i=function(){};n.removeEventListener?i=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=void 0}});var s={bind:r,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",s):e.eventie=s}(this),function(e,t){"function"==typeof define&&define.amd?define("js/lib/imagesloaded.pkgd.min",["eventEmitter/EventEmitter","eventie/eventie"],function(n,r){return t(e,n,r)}):"object"==typeof exports?module.exports=t(e,require("eventEmitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){function r(e,t){for(var n in t)e[n]=t[n];return e}function i(e){return"[object Array]"===h.call(e)}function s(e){var t=[];if(i(e))t=e;else if("number"==typeof e.length)for(var n=0,r=e.length;r>n;n++)t.push(e[n]);else t.push(e);return t}function o(e,t,n){if(!(this instanceof o))return new o(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=s(e),this.options=r({},this.options),"function"==typeof t?n=t:r(this.options,t),n&&this.on("always",n),this.getImages(),f&&(this.jqDeferred=new f.Deferred);var i=this;setTimeout(function(){i.check()})}function u(e){this.img=e}function a(e){this.src=e,p[e]=this}var f=e.jQuery,l=e.console,c=l!==void 0,h=Object.prototype.toString;o.prototype=new t,o.prototype.options={},o.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);var r=n.nodeType;if(r&&(1===r||9===r||11===r))for(var i=n.querySelectorAll("img"),s=0,o=i.length;o>s;s++){var u=i[s];this.addImage(u)}}},o.prototype.addImage=function(e){var t=new u(e);this.images.push(t)},o.prototype.check=function(){function e(e,i){return t.options.debug&&c&&l.log("confirm",e,i),t.progress(e),n++,n===r&&t.complete(),!0}var t=this,n=0,r=this.images.length;if(this.hasAnyBroken=!1,!r)return this.complete(),void 0;for(var i=0;r>i;i++){var s=this.images[i];s.on("confirm",e),s.check()}},o.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},f&&(f.fn.imagesLoaded=function(e,t){var n=new o(this,e,t);return n.jqDeferred.promise(f(this))}),u.prototype=new t,u.prototype.check=function(){var e=p[this.img.src]||new a(this.img.src);if(e.isConfirmed)return this.confirm(e.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var t=this;e.on("confirm",function(e,n){return t.confirm(e.isLoaded,n),!0}),e.check()},u.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var p={};return a.prototype=new t,a.prototype.check=function(){if(!this.isChecked){var e=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},a.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},a.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},a.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},a.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},a.prototype.unbindProxyEvents=function(e){n.unbind(e.target,"load",this),n.unbind(e.target,"error",this)},o}),define("conf/prod",[],function(){var e={};return e.listingIsotope={},e.listingIsotope.itemSelector=".eventContainer",e.listingIsotope.masonry={},e.listingIsotope.masonry.gutter=10,e.listingIsotope.masonry.columnWidth=240,e.listingIsotope.masonry.isAnimated=!0,e.listingIsotope.masonry.isFitWidth=!0,e.listingIsotope.getSortData={time:"[data-time]"},e.listingIsotope.sortBy=["time"],e.tagsIsotope={},e.tagsIsotope.masonry={},e.tagsIsotope.masonry.columnWidth=1,e}),define("js/collections/eventList",["underscore","jquery","backbone","js/collections/baseEventList","js/lib/track","js/lib/utils","js/models/app","js/models/event","js/models/city","js/models/user"],function(e,t,n,r,i,s,o,u,a,f){var l=r.extend({model:u,hasMore:!0,min:40,innerInit:function(){this.handleCityChange(),this.listenTo(a,"change:data",this.handleCityChange),this.listenTo(this,"stateChange",function(){this.state.current==EVENT_LIST_STATES.loaded&&this.onUserFilterUpdate()})},parse:function(e){if(!e)return null;this.genreCount=[];for(var t in e.genreCount)if(e.genreCount.hasOwnProperty(t)){var n=e.genreCount[t];this.genreCount.push({genre:t,count:n})}return this.totalEvents=e.count,this.genreCount.sort(function(e,t){return t.count-e.count}),e.events},pausePagination:function(e){this.pausePaginate=e},onUserFilterUpdate:function(){var e=r.prototype.onUserFilterUpdate.call(this);this.hasMore&&e<this.min&&this.paginate()},url:function(){var e="/REST/events?enrich=true&cityId="+a.getCityId()+"&page="+this.page++;return e},handleCityChange:function(){var e=a.get("data");e&&e.location&&this.initialFetchForCity(e.location)},initialFetchForCity:function(e){var t=this;if(this.lasLoc&&this.lastLoc.city==e.city&&this.lastLoc.region==e.region)return;this.lastLoc=e,this.lastFetch&&this.lastFetch.abort(),n.trigger("loadingData","Retrieving events..."),this.locationStr=JSON.stringify(e),this.page=0,this.fetching=!0,this.hasMore=!0,this.lastFetch=this.fetch({reset:!0,parse:!0,success:function(){t.fetching=!1,i.logEvent("loaded_listing",{size:t.models.length,totalEvents:t.totalEvents}),t.trigger("resetComplete"),t.models.length<10&&!o.get("overlayContent")&&(o.set("overlayContent","<h1> Sorry, we can't find many concerts in "+e.city+". </h1>"+"<p> Please try some larger cities nearby. Sorry again, we'll be improving this experience soon. </p>"),s.navigate("change-location",{trigger:!1}),i.logEvent("bad-location",{city:e.city}))}})},paginate:function(e){if(this.pausePaginate)return;var t=this.page,n=this,r=this.length;!this.fetching&&this.hasMore&&(this.trigger("paginateStart"),this.fetching=!0,this.lastFetch=this.fetch({remove:!1,success:function(){n.trigger("paginateEnd"),n.fetching=!1,r==n.length&&(n.hasMore=!1)}}))},isEventFiltered:function(t){return f.get("filterTags")&&f.get("filterTags").length!=0&&e.intersection(t.tags,f.get("filterTags")).length==0||r.prototype.isEventFiltered.call(this,t)}});return new l}),define("js/models/tag",["jquery","underscore","backbone","js/models/user"],function(e,t,n,r){var i=n.Model.extend({initialize:function(){this.setFilteredField(),this.listenTo(r,"change:filterTags",this.setFilteredField)},setFilteredField:function(){t.contains(r.get("filterTags"),this.get("name"))?this.set("filtered",!0):this.set("filtered",!1)}});return i}),define("js/models/tagsList",["jquery","underscore","backbone","js/collections/eventList","js/models/tag"],function(e,t,n,r,i){var s=n.Model.extend({initialize:function(){t.bindAll(this,"addTagsFromEvent"),this.listenTo(n,"loadingData",this.reset),this.listenTo(r,"add",this.addTagsFromEvent),this.listenTo(r,"resetComplete",this.addTagsFromEventList)},reset:function(){this.attributes={},this.trigger("clear")},addTagsFromEvent:function(e){var t=e.get("tags");if(t)for(var n=t.length;n--;){var r=this.get(t[n]);if(!r)r=new i({name:t[n]}),r.count=1,this.set(t[n],r);else{r.count++;var s={};s[t[n]]=r,this.trigger("change",{changed:s})}}},addTagsFromEventList:function(){r.each(function(e){this.addTagsFromEvent(e)},this)}});return new s}),define("js/collections/heartList",["underscore","jquery","js/collections/baseEventList","js/lib/track","js/models/association","js/models/user"],function(e,t,n,r,i,s){var o=n.extend({model:i,innerInit:function(){var e=this;s.id?this.init():(s.state=="authUnattempted"?e.setState(EVENT_LIST_STATES.waiting):e.setState(EVENT_LIST_STATES.unitialized),this.listenToOnce(s,"loggedIn",this.init),this.listenToOnce(s,"loginFail",function(){e.setState(EVENT_LIST_STATES.unitialized)}))},parse:function(t){if(!t)return null;var n=[];return e.forEach(["HOST","PERFORMER","GOING_TO"],function(r){e.forEach(t[r],function(e){e.associationType=r,n.push(e)})}),n},url:function(){return"/REST/users/"+s.id+"/events"},init:function(){var e=this;this.fetch({parse:!0,reset:!0,data:t.param({enrich:!0}),error:function(t,n){r.logEvent("error",{msg:"failed to retrieve associated events for user "+s.id+", response: "+n}),e.setState(EVENT_LIST_STATES.loadFailed)}})}});return new o}),define("text!templates/controls/heart.html",[],function(){return'<% if (heart) { %>\n    <div class="liked">\n        <span title="like" class="icon-heart"></span>\n        <span title="unlike" class="icon-heart-broken"></span>\n<% } else { %>\n    <div class="like">\n        <span title="like" class="icon-heart"></span>\n<% } %>\n    </div>'}),define("js/views/controls/authenticatedClickable",["jquery","underscore","backbone","js/lib/track","js/models/user","js/collections/heartList","text!templates/controls/heart.html"],function(e,t,n,r,i){var s=n.View.extend({events:{click:"onClick"},initialize:function(e){t.bindAll(this,"innerOnClick"),this.innerInitialize(e)},innerInitialize:function(e){},onClick:function(e){e.stopPropagation(),e.preventDefault(),i.id?this.innerOnClick(i):i.login(this.innerOnClick)},innerOnClick:function(e){},runWhenCollectionReady:function(e){return!this.collection||this.collection.state&&this.collection.state.current===EVENT_LIST_STATES.loaded?(e(),!0):(this.listenTo(this.collection,"stateChange",function(t){t.current===EVENT_LIST_STATES.loaded&&e()}),!1)}});return s}),define("text!modules/notice/templates/notice.html",[],function(){return"<%= message %>\n<div>\n    <span class=\"callToAction\"><%= callToAction %></span>\n    <span class='prompt-dismiss'> Dismiss </span>\n</div>"}),define("modules/notice/views/notice",["jquery","underscore","backbone","text!modules/notice/templates/notice.html"],function(e,t,n,r){var i=n.View.extend({el:"#notice",template:t.template(r),events:{"click .prompt-dismiss":"remove"},initialize:function(e){this.data=t.extend({callToAction:""},e),this.render()},render:function(){return this.$el.html(this.template(this.data)),this.$el.css("visibility","visible"),this},remove:function(){return this.$el.css("visibility","hidden"),this.undelegateEvents(),this.$el.empty(),this.stopListening(),this}});return i});var shortenerLoaded=null;define("gapi",["jquery","js/lib/track"],function(e,t){return shortenerLoaded||(shortenerLoaded=e.Deferred(),window.gapiStart=function(){gapi.client.setApiKey(GOOGLE_API_KEY),gapi.client.load("urlshortener","v1",function(){shortenerLoaded.resolve()})},require(["https://apis.google.com/js/client.js?onload=gapiStart"],function(){},function(){t.logEvent("error",{msg:"failed to load google api"}),shortenerLoaded.reject()})),{shortenerLoad:shortenerLoaded.promise()}}),define("js/lib/shortener",["js/lib/track","gapi"],function(e,t){return function(r,i,s,o){if(!r&&s===null)return;if(!r&&s){s.call(o);return}r.get("shortUrl")&&s&&s.call(o),t.shortenerLoad.done(function(){if(!r.get("shortUrl")){var e=gapi.client.urlshortener.url.insert({longUrl:i});e.then(function(e){r.get("shortUrl")||r.set("shortUrl",e.result.id),s&&s.call(o)})}}).fail(function(){e.logEvent("error",{msg:"url shortening request failed:"})})}}),define("js/views/controls/shareButton",["jquery","underscore","backbone","js/lib/track","js/models/user","js/lib/shortener"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"span",template:t.template("<%= icon %>"),events:{click:"checkUrl"},initialize:function(e){this.longUrl=e.longUrl,this.model!==undefined?this.baseLogContext={event:this.model.id,network:e.network}:this.baseLogContext={event:"index",network:e.network},this.buttonConfig(e),this.render()},buttonConfig:function(e){switch(e.network){case"fb":e.iconType==="rounded"?this.icon="&#xe427":e.iconType==="circle"&&(this.icon="&#xe227"),this.shareMethod="feed",this.shareDialog=this.showFBDialog;break;case"twitter":e.iconType==="rounded"?this.icon="&#xe486":e.iconType==="circle"&&(this.icon="&#xe286;"),this.shareDialog=this.showTwitterDialog;break;case"stumble":e.iconType==="rounded"?this.icon="&#xe483":e.iconType==="circle"&&(this.icon="&#xe283"),this.shareDialog=this.showStumbleDialog;break;case"email":e.iconType==="rounded"?this.icon="&#xe424":e.iconType==="circle"&&(this.icon="&#xe224"),this.shareDialog=this.showEmailDialog;break;case"google":e.iconType==="rounded"?this.icon="&#xe439":e.iconType==="circle"&&(this.icon="&#xe239"),this.shareDialog=this.showGoogleDialog;break;case"messenger":e.iconType==="rounded"?this.icon="<img src='//storage.googleapis.com/cdn.shubaloo.com/img/messenger-square.png'> </img>":e.iconType==="circle"&&(this.icon="<img src='//storage.googleapis.com/cdn.shubaloo.com/img/messenger-square.png'> </img>"),this.shareMethod="send",this.shareDialog=this.showFBDialog}},render:function(){this.$el.html(this.template({icon:this.icon}))},checkUrl:function(e){e.stopPropagation(),s(this.model,this.longUrl,this.showDialog,this)},showDialog:function(){var e,t,n;this.model?t=this.model.get("shortUrl"):t=this.longUrl,e={shareURL:t,shareDesc:"Shubaloo: Effortless Concert Discovery",features:"width=600,height=300"},this.model&&this.model!==i&&(n=this.model.toJSON(),e.eventName=n.name,e.eventDetails=n.formatted_time+" @ "+n.formattedLocation,e.shareMessage="See "+n.headliner+" with me @ "+n.formattedLocation+". Music, tickets and info here:"),r.logEvent("shareDialog",this.baseLogContext),this.shareDialog(e)},showFBDialog:function(e){var n={method:this.shareMethod,link:e.shareURL,display:"popup",caption:window.decodeURIComponent(e.shareDesc)};this.model&&(this.model===i?n.name=this.model.attributes.name+"'s favorite events on Shubaloo":(n.name=e.eventName,n.description=e.eventDetails,n.caption=e.shareDesc)),FB.ui(n,function(e){if(e&&!e.error)FB.api("/"+e.post_id,function(e){if(e&&!e.error){var n={};t.extend(n,this.baseLogContext,{message:e.message}),r.logEvent("share",n)}});else{var n={};t.extend(n,this.baseLogContext,{error:e.error}),r.logEvent("shareFailure",n)}})},showTwitterDialog:function(e){var t;this.model&&this.model===i?t="Check out my favorite upcoming #concerts from @shubaloobaloo: "+e.shareURL:this.model?t=e.shareMessage+" "+e.shareURL+" #shubaloo #concerts":t="Discover great live music around you - "+e.shareURL;var n="http://twitter.com/home?status="+encodeURIComponent(t);window.open(n,"Share",e.features)},showStumbleDialog:function(e){var t="http://www.stumbleupon.com/submit?url="+e.shareURL+"&title="+e.shareDesc;window.open(t,"Share",e.features)},showEmailDialog:function(e){var t=e.shareDesc,n="mailto:?subject="+e.shareDesc+"&body="+t+e.shareURL;window.open(n,"_self")},showGoogleDialog:function(e){var t="https://plus.google.com/share?url="+e.shareURL;window.open(t,"Share",e.features)}});return o}),define("modules/notice/views/eventAddedNotice",["jquery","underscore","modules/notice/views/notice","js/collections/heartList","js/views/controls/shareButton","js/models/app","js/lib/shortener"],function(e,t,n,r,i,s,o){var u=n.extend({initialize:function(){this.events["click .callToAction"]="checkUrl",this.listenTo(r,"add remove",this.remove),u.__super__.initialize.apply(this,[{message:"Event added.",callToAction:"Invite"}])},checkUrl:function(){var e="http://shubaloo.com"+this.model.get("urlPath");o(this.model,e,this.share,this)},share:function(){s.set("overlayContent","shareOverlay",{model:this.model})}});return u}),define("js/views/controls/heart",["jquery","underscore","js/views/controls/authenticatedClickable","js/lib/track","js/collections/heartList","text!templates/controls/heart.html","modules/notice/views/eventAddedNotice","js/lib/shortener"],function(e,t,n,r,i,s,o,u){var a=n.extend({tagName:"div",className:"heart",template:t.template(s),innerInitialize:function(e){t.bindAll(this,"updateModelAndRender","updateHeartList"),this.event=e.event,this.event.associationType="GOING_TO",this.baseLogContext={event:this.event.id,parent:e.parent,control:"heart"},this.collection=i,this.runWhenCollectionReady(this.updateModelAndRender)||this.render()},updateModelAndRender:function(){this.model=i.get(this.event.id),this.render()},render:function(){this.model?this.$el.html(this.template({heart:!0})):this.$el.html(this.template({heart:!1}))},innerOnClick:function(){this.runWhenCollectionReady(this.updateHeartList)},updateHeartList:function(){var e={};this.model?(this.model.destroy(),this.model=null,t.extend(e,this.baseLogContext,{result:"disliked"})):(this.model=i.create(this.event),new o({model:this.model}),t.extend(e,this.baseLogContext,{result:"liked"})),this.render(),r.logEvent("click",e)}});return a}),define("text!templates/controls/tickets.html",[],function(){return'<a class="button orangeButton" target="_blank" href="<%= url %>">Buy\n    Tickets</a>'}),define("js/views/controls/tickets",["jquery","underscore","backbone","js/lib/track","text!templates/controls/tickets.html"],function(e,t,n,r,i){var s=n.View.extend({tagName:"div",className:"tickets",template:t.template(i),events:{click:"onClick"},initialize:function(e){this.baseLogContext={parent:e.parent,control:"tickets",event:this.model.id},this.render()},render:function(){var t=this.model.get("tickets");return t&&e.isArray(t)&&t[0]&&t[0].url?this.$el.html(this.template({url:t[0].url})):this.$el.html(""),this},onClick:function(e){e.stopPropagation(),r.logEvent("click",this.baseLogContext)}});return s}),define("text!templates/content/eventListItem.html",[],function(){return'<a href="<%= urlPath %>">\n    <img src="<%= displayImg %>" class="eventImg" alt="Upcoming <%= name %> show <%= location.city %>"/>\n    <% if (flatVideoList && flatVideoList.length > 0) { %>\n        <% if (isPlaying) { %>\n        <div class="top-icon-container playing">\n            <span class="glyphicon glyphicon-pause"></span>\n            <span class="text">Pause</span>\n        </div>\n        <% } else { %>\n        <div class="top-icon-container play">\n            <span class="icon-play"></span>\n            <span>Play</span>\n        </div>\n        <% } %>\n    <% } %>\n    <div class="top-icon-container heart-container">\n    </div>\n    <div class="top-icon-container remove">\n        <span title="remove" class="icon-remove">X</span>\n    </div>\n\n    <div class="expandButton"><span class="glyphicon glyphicon-resize-full"/></div>\n\n    <div class="figcaption-brief figcaption">\n        <!--<h5 class="name"><%= name %></h5>-->\n        <h5>\n            <span class="name"><%= associations.PERFORMER[0].name %></span><% if (formatted_performers) { %><span>, <%= formatted_performers %></span></h5><% } %>\n        <h6><%= formatted_time %> @ <%= associations.HOST[0].name %></h6>\n    </div>\n</a>'}),define("text!templates/content/widgetEventListItem.html",[],function(){return'<a href="http://shubaloo.com<%= urlPath %>" target="_blank">\n    <img src="<%= displayImg %>" class="eventImg" alt="Upcoming <%= name %> show <%= location.city %>"/>\n    <% if (flatVideoList && flatVideoList.length > 0) { %>\n        <% if (isPlaying) { %>\n        <div class="top-icon-container playing">\n            <span class="glyphicon glyphicon-pause"></span>\n            <span class="text">Pause</span>\n        </div>\n        <% } else { %>\n        <div class="top-icon-container play">\n            <span class="icon-play"></span>\n            <span>Play</span>\n        </div>\n        <% } %>\n    <% } %>\n\n    <div class="figcaption-brief figcaption">\n        <h5 class="name"><%= name %></h5>\n        <h6><%= formatted_time %> @ <%= associations.HOST[0].name %></h6>\n    </div>\n</a>'}),define("text!templates/removedEventListItem.html",[],function(){return'<div class="undo-container">\n    <div class="top-icon-container remove">\n        <span title="remove" class="icon-remove">X</span>\n    </div>\n    <h6>You\'ve removed <br><em>"<%= name %>"</em>.</h6>\n    <a class="undo-button">Undo</a>\n\n    <% if (tags && tags.length > 0) { %>\n    <h6>Filter similar:</h6>\n    <div class="tags"></div>\n    <% } %>\n</div>'}),define("text!templates/video.html",[],function(){return'<span class="youtube-details">\n    <div id="thumb-wrapper"></div>\n    <div id="video-title" class="ellipsis"></div>\n    <img id="youtube-logo" src="//storage.googleapis.com/cdn.shubaloo.com/img/YouTube-logo-light.png"/>\n</span>\n<span id="toggle-play" class="glyphicon glyphicon-play"></span>\n<span id="next-button" class="glyphicon glyphicon-forward"></span>\n<div class="heart-container"></div>\n<a id="footer-event-link">\n    <div id="footer-event-info">\n        <div id="date-venue"></div>\n    </div>\n</a>'}),define("js/views/video",["jquery","underscore","backbone","js/lib/track","js/lib/utils","js/models/app","js/models/playlist","js/views/controls/heart","text!templates/video.html"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({el:"#player-details",template:t.template(a),events:{"click #next-button":"onNextClick","click .youtube-details":"togglePlayerVisibility","click #footer-event-info":"navigateToEvent","click #toggle-play":"togglePlay"},initialize:function(){this.listenTo(o,"change:state",this.play),this.listenTo(n,"loadingData",this.stop);var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);var i=this;window.onYouTubeIframeAPIReady=function(){i.youtubeIframeAPIReady=!0,(i.onDom=!0)&&i.initializePlayerDetectDimensions()},e("#player-container .remove").on("click",function(){e("#player-container").hide()}),this.$el.html(this.template())},initializePlayerDetectDimensions:function(){var t=window.matchMedia("screen and (min-width : 641px)");if(t.matches)this.initializePlayer(320,240);else{var n=e(window).width();this.initializePlayer(n,n*.75),e("#player-container").height(n*.75)}},initializePlayer:function(e,t){var n=this;this.player=new YT.Player("player",{width:e,height:t,events:{onReady:function(){n.onPlayerReady()},onStateChange:function(e){e.data==YT.PlayerState.ENDED?n.next("videoEnded"):e.data==YT.PlayerState.PLAYING?(r.logEvent("play"),n.hasPlayed=!0,n.$el.find("#toggle-play").addClass("glyphicon-pause"),n.$el.find("#toggle-play").removeClass("glyphicon-play")):e.data==YT.PlayerState.PAUSED&&(r.logEvent("pause"),n.$el.find("#toggle-play").removeClass("glyphicon-pause"),n.$el.find("#toggle-play").addClass("glyphicon-play"))},onError:function(e){r.logEvent("error",{errorType:"youtube",status:e.data,videoUrl:e.target.B.videoUrl})}}})},navigateToEvent:function(e){e.preventDefault(),s.set("overlayContent",o.get("state").currentEvent),i.navigate(o.get("state").currentEvent.get("urlPath"),{trigger:!1},o.get("state").currentEvent.get("pageTitle"),o.get("state").currentEvent.get("pageDesc"))},togglePlayerVisibility:function(){e("#player-container").toggle()},onNextClick:function(){this.next("user")},onPlayerReady:function(){this.playerRdy=!0,o.get("state").currentVideo&&this.setVideo()},getContext:function(){var e={parent:"footer"},t=o.get("state").currentEvent;t&&(e.eventId=t.get("id"))},next:function(e){r.logEvent("next",this.getContext()),o.next()},setVideo:function(){if(!this.playerRdy)return;var t=o.get("state").currentVideo,n=o.get("state").currentEvent;if(t){if(!this.lastQueuedLink||this.lastQueuedLink!=t.link)this.player.cueVideoById(t.link,0,"large"),this.lastQueuedLink=t.link,e("#video-title").html(t.title),e("#thumb-wrapper").html("<img class=video-thumb src='"+t.thumb+"'/>"),n&&(e("#footer-event-link").attr("href",n.get("urlPath")),e("#date-venue").html(n.get("formatted_time")+" @ "+n.get("associations").HOST[0].name),this.$el.find(".heart-container").html((new u({event:n.toJSON(),parent:"footer"})).el))}else this.player.stopVideo(),e("#video-title").html(""),e("#thumb-wrapper").html("")},play:function(){this.setVideo(),this.player&&!this.player.playVideo&&o.get("state").forceplay?e("#player-container").show():this.hasPlayed||o.get("state").forceplay&&!i.isMobile()?this.player.playVideo():o.get("state").forceplay&&e("#player-container").show()},stop:function(){this.playerRdy&&this.player.stopVideo()},togglePlay:function(){if(!this.playerRdy)return;this.player.getPlayerState()===YT.PlayerState.PLAYING?this.player.pauseVideo():this.player.playVideo()}});return new f}),define("modules/utils/structuredDataMarkupUtils",["jquery","underscore","js/models/user2"],function(e,t,n){var r={getEventStructuredData:function(e){var r=this,i={"@context":"http://schema.org","@type":"MusicEvent"};return i.name=e.get("name"),i.startDate=(new Date(e.get("start_time"))).format("isoDateTime"),i.url="http://shubaloo.com"+e.get("urlPath"),i.location=this.getVenueStructuredData(new n(e.get("associations").HOST[0]),{parse:!0}),i.performer=[],t.forEach(e.get("associations").PERFORMER,function(e){i.performer.push(r.getPerformerStructuredData(new n(e),{parse:!0}))}),i},getPerformerStructuredData:function(e){return{"@context":"http://schema.org","@type":"MusicGroup",name:e.get("name"),url:e.get("urlPath")}},getVenueStructuredData:function(e){var t={"@context":"http://schema.org","@type":"Place"};return t.name=e.get("name"),t.address={"@context":"http://schema.org","@type":"PostalAddress"},t.address.streetAddress=e.get("location").address,t.address.addressLocality=e.get("location").city,t.address.addressRegion=e.get("location").region,t.address.postalCode=e.get("location").postalCode,t.address.addressCountry=e.get("location").countryCode,t.url=e.get("urlPath"),t},getMarkup:function(t){var n=e('<script type="application/ld+json" />');return n.html(JSON.stringify(t)),n.get(0)}};return r}),define("js/views/eventListItem",["underscore","jquery","backbone","js/lib/track","js/lib/utils","js/lib/imagesloaded.pkgd.min","js/lib/isotope.pkgd.min","conf/prod","js/models/app","js/models/user","js/models/playlist","js/models/tagsList","js/views/controls/heart","js/views/controls/tickets","text!templates/content/eventListItem.html","text!templates/content/widgetEventListItem.html","text!templates/removedEventListItem.html","js/views/video","modules/utils/structuredDataMarkupUtils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=n.View.extend({tagName:"div",className:"eventContainer",template:e.template(d),removedTemplate:e.template(m),events:{click:"showEvent","click .play":"play","click .remove":"close","click .undo-button":"undoClose","click .playing":"togglePlay"},initialize:function(){this.model.set("isPlaying",!1),window.isWidget?this.template=e.template(v):this.template=e.template(d),this.listenTo(this.model,"change",this.render),this.$el.attr("data-time",this.model.get("start_time")),this.listenTo(l,"change",this.updatePlaying)},updatePlaying:function(){!this.model.get("isPlaying")&&l.get("state").currentEvent&&this.model.id===l.get("state").currentEvent.id?this.model.set("isPlaying",!0):this.model.get("isPlaying")&&(!l.get("state").currentEvent||this.model.id!==l.get("state").currentEvent.id)&&this.model.set("isPlaying",!1)},render:function(t){var n=this;if(this.model.get("filtered"))this.$el.addClass("filtered-event"),e.isFunction(t)&&t(this.el);else{if(!this.model.get("almostClosed")){this.$el.html(this.template(this.model.toJSON())),this.$el.append(y.getMarkup(y.getEventStructuredData(this.model)));var r=this.el;if(window.callPhantom||window._phantom||/PhantomJS/.test(window.navigator.userAgent))this.$el.find("img").height("135px"),e.isFunction(t)&&t(r);else{var i=s(this.$el);i.on("done",function(){e.isFunction(t)&&t(r)}),i.on("fail",function(){n.model.set("displayImg",null)})}}else this.$el.html(this.removedTemplate(this.model.toJSON())),e.isFunction(t)&&t(this.el);this.$el.removeClass("filtered-event"),this.$el.find(".heart-container").html((new h({event:this.model.toJSON(),parent:"eventListItem"})).el)}return this},toggleSubRender:function(){var e=g.player.getPlayerState();e===2?(this.$el.find(".glyphicon").removeClass("glyphicon-play"),this.$el.find(".glyphicon").addClass("glyphicon-pause"),this.$el.find(".text").text("Pause")):e===1&&(this.$el.find(".glyphicon").removeClass("glyphicon-pause"),this.$el.find(".glyphicon").addClass("glyphicon-play"),this.$el.find(".text").text("Resume"))},play:function(e){e.stopPropagation(),e.preventDefault();var t=this.model.collection.isEventFiltered;l.setEvents(this.model.collection,t,this.model.collection.indexOf(this.model),!0)},close:function(e){e.stopPropagation(),e.preventDefault(),f.get("removedEvents").push(this.model.get("id")),f.save(),f.trigger("change:removedEvents",f,f.get("removedEvents")),r.logEvent("remove",this.getLogContext())},undoClose:function(t){t.stopPropagation(),t.preventDefault(),f.set("removedEvents",e.without(f.get("removedEvents"),this.model.get("id"))),f.save(),this.model.set({almostClosed:!1}),this.render(),this.model.set("state","restored"),r.logEvent("undo_remove",this.getLogContext())},getLogContext:function(){var e={event_id:this.model.get("id")};return l.get("state").currentEvent&&(e.playing_event_id=l.get("state").currentEvent.get("id")),e},showEvent:function(e){if(window.isWidget)return;e.preventDefault(),a.set("overlayContent",this.model),i.navigate(this.model.get("urlPath"),{trigger:!1},this.model.get("pageTitle"),this.model.get("pageDesc"))},togglePlay:function(e){e.preventDefault(),e.stopPropagation(),g.togglePlay(),this.toggleSubRender()}});return b}),define("text!templates/message.html",[],function(){return'<!--<div class="pod">-->\n    <!--<div class="pod-body">-->\n        <p class="text-center"><%= message %></p>\n        <ul class="loader">\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n        </ul>\n<!--</div>-->\n    <!--</div>-->\n\n<!--<div id="searchContainer"></div>-->'}),define("js/views/loader",["jquery","underscore","backbone","js/lib/track","text!templates/message.html"],function(e,t,n,r,i){var s=n.View.extend({template:t.template(i),render:function(e,t){return e.html(this.template({message:t})),this}});return s}),define("text!templates/content/eventList.html",[],function(){return"<div class='eventList'></div>\n<div class='eventListLoader'></div>\n<div class='eventListMessageContainer'>\n    <div class='eventListMessage'></div>\n</div>"}),define("js/views/content/eventList",["jquery","underscore","backbone","js/lib/utils","js/lib/isotope.pkgd.min","js/lib/imagesloaded.pkgd.min","js/lib/track","conf/prod","js/models/app","js/models/user2","js/models/playlist","js/views/eventListItem","js/views/loader","text!templates/content/eventList.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=n.View.extend({className:"eventListContainer",template:t.template(p),eventViews:[],initialize:function(){this.$el.html(this.template());var t=this;(new h).render(this.$el.find(".eventListLoader"),"Loading..."),e(document).ready(t.changeIsoConfigs),e(window).resize(t.changeIsoConfigs)},addedToDom:function(){this.iso=new i(this.$el.find(".eventList").get(0),u.listingIsotope);var e=this.$el.parent(),t=this;e.on("scroll",function(){e.scrollTop()+e.innerHeight()>=e.get(0).scrollHeight-100&&t.collection&&t.collection.hasMore&&t.collection.paginate()}),this.listenTo(this.collection,"add",this.addEvent),this.listenTo(this.collection,"remove",this.removeEvent),this.listenTo(this.collection,"stateChange",this.handleStateChange),this.listenTo(this.collection,"change:state",this.handleEventStateChange),this.listenTo(this.collection,"filtersUpdated",this.handleFilterUpdate),this.handleStateChange(this.collection.state)},changeIsoConfigs:function(){e(window).width()<250?u.listingIsotope.masonry.columnWidth=e(window).width()-20:e(window).width()<300?u.listingIsotope.masonry.columnWidth=240:e(window).width()<=510?u.listingIsotope.masonry.columnWidth=(e(window).width()-30)/2:u.listingIsotope.masonry.columnWidth=240,this.iso&&this.iso.layout()},handleStateChange:function(e){if(!e)return;switch(e.current){case EVENT_LIST_STATES.loadFailed:this.hideLoader(),e.previous==EVENT_LIST_STATES.resetting&&(this.clear(),this.$el.find(".eventListMessage").html("Something went wrong, the issue has been reported. Sorry!"));break;case EVENT_LIST_STATES.resetting:this.clear(),this.showLoader();break;case EVENT_LIST_STATES.paginating:this.showLoader();break;case EVENT_LIST_STATES.loaded:this.hideLoader(),(e.previous!=EVENT_LIST_STATES.paginating||this.eventViews.length==0)&&this.setEvents();break;case EVENT_LIST_STATES.unitialized:this.setEvents();break;case EVENT_LIST_STATES.waiting:this.showLoader()}},handleFilterUpdate:function(){var e=this,t=l.get("state").currentEvent;t&&this.collection.isEventFiltered(t.toJSON())&&l.next();var n=s(this.$el);n.once("always",function(){e.layout()})},handleEventStateChange:function(e,t,n){this.layout();if(t==="semi-removed"){var r=l.get("state").currentEvent;r.get("id")==e.get("id")&&l.next()}},setEvents:function(){var e=a.get("noEventsMessage");this.hideLoader();var n=this.collection.isEventFiltered;l.setEvents(this.collection,n,0,!1),e&&this.collection.length==0?(t.isFunction(e)&&(e=e()),this.$el.find(".eventListMessage").html(e)):(this.clear(),this.$el.find(".eventListMessage").html(""),this.listEvents(this),this.layout())},listEvents:function(){this.collection.each(function(e){this.addEvent(e)},this),n.trigger("listingLoaded")},removeEvent:function(e){var n=this;t.forEach(this.eventViews,function(r){r.model.id===e.id&&(n.iso.remove(r.el),n.eventViews=t.without(n.eventViews,r),n.eventViews.length==0&&this.noEventsMessage&&this.$el.find(".eventListMessage").html(this.noEventsMessage),n.layout())})},addEvent:function(e){this.$el.find(".eventListMessage").html("");var t=new c({model:e});this.eventViews.push(t),this.renderEvent(t)},renderEvent:function(e){var n=this.iso,r=this,i=!1;e.render(function(s){if(t.contains(r.eventViews,e))try{n.insert(s),n.items.length==10&&o.logEvent("list_view_loaded")}catch(u){i||(i=!0,o.logEvent("error",{failed_component:"iso",action:"insert",msg:JSON.stringify(u)}))}})},layout:function(){try{this.iso.layout()}catch(e){this.layoutErrorLogged||(this.layoutErrorLogged=!0,o.logEvent("error",{failed_component:"iso",action:"layout",msg:JSON.stringify(e)}))}},clear:function(){this.iso.destroy(),this.$el.find(".eventList").html(""),this.iso=new i(this.$el.find(".eventList").get(0),u.listingIsotope),this.$el.find(".eventListMessage").html(""),this.$el.find(".eventList").removeClass("eventList-bordered"),this.eventViews=[]},showLoader:function(){this.$el.find(".eventListLoader").show()},hideLoader:function(){this.$el.find(".eventListLoader").hide()},onTearDown:function(){this.iso.destroy(),this.loader.tearDown(),t.forEach(this.eventViews,function(e){e.tearDown()})}});return d}),define("text!templates/content/exploreTags.html",[],function(){return'<h1 class="explore-heading"><%= count %> Upcoming Concerts In <%= city %> <a class="change-location-link" href="/change-location">(Change)</a></h1>\n\n<!--<p>Check out bands playing in town, listen to their music, buy tickets and follow your favorites!</p>-->\n\n<div class="tags-container">\n    <h2>Filter by genres...</h2>\n    <% if (selectedGenres && selectedGenres.length > 0) { %>\n    <% for (var idx = 0; idx < selectedGenres.length; idx++) { %>\n    <div class="tag selected"><%= selectedGenres[idx] %></div>\n    <% } %>\n    <% } %>\n\n    <% if (unselectedGenres) { %>\n        <% for (var idx = 0; idx < unselectedGenres.length; idx++) { %>\n    <div class="tag unselected"><%= unselectedGenres[idx] %></div>\n        <% } %>\n    <% } %>\n\n</div>\n\n<input class="tag-input typeahead" type="text" placeholder="add tags">'}),define("text!templates/content/exploreTag.html",[],function(){return"<div class='tag'><%= genre %></div>\n<div class=\"genre-count\"><%= count %> events</div>"}),function(e){var t=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e=="undefined"},toStr:function(n){return t.isUndefined(n)||n===null?"":n+""},bind:e.proxy,each:function(t,n){function r(e,t){return n(t,e)}e.each(t,r)},map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,function(e,i){if(!(r=n.call(null,i,e,t)))return!1}),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,function(e,i){if(r=n.call(null,i,e,t))return!1}),!!r):r},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(n){function r(){return String(n)}return e.isFunction(n)?n:r},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var s=this,o=arguments,u,a;return u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r,clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},throttle:function(e,t){var n,r,i,s,o,u;return o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)},function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},noop:function(){}}}(),n=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),r=function(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(e.input,{marginTop:"-1px"}),e}(),i=function(){function r(t){(!t||!t.el)&&e.error("EventBus initialized without el"),this.$el=e(t.el)}var n="typeahead:";return t.mixin(r.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger(n+e,t)}}),r}(),s=function(){function n(t,n,r,i){var s;if(!r)return this;n=n.split(e),r=i?f(r,i):r,this._callbacks=this._callbacks||{};while(s=n.shift())this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(r);return this}function r(e,t,r){return n.call(this,"async",e,t,r)}function i(e,t,r){return n.call(this,"sync",e,t,r)}function s(t){var n;if(!this._callbacks)return this;t=t.split(e);while(n=t.shift())delete this._callbacks[n];return this}function o(n){var r,i,s,o,a;if(!this._callbacks)return this;n=n.split(e),s=[].slice.call(arguments,1);while((r=n.shift())&&(i=this._callbacks[r]))o=u(i.sync,this,[r].concat(s)),a=u(i.async,this,[r].concat(s)),o()&&t(a);return this}function u(e,t,n){function r(){var r;for(var i=0,s=e.length;!r&&i<s;i+=1)r=e[i].apply(t,n)===!1;return!r}return r}function a(){var e;return window.setImmediate?e=function(t){setImmediate(function(){t()})}:e=function(t){setTimeout(function(){t()},0)},e}function f(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var e=/\s+/,t=a();return{onSync:i,onAsync:r,off:s,trigger:o}}(),o=function(e){function r(e,n,r){var i=[],s;for(var o=0,u=e.length;o<u;o++)i.push(t.escapeRegExChars(e[o]));return s=r?"\\b("+i.join("|")+")\\b":"("+i.join("|")+")",n?new RegExp(s):new RegExp(s,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function u(t){var n,r,i;if(n=o.exec(t.data))i=e.createElement(s.tagName),s.className&&(i.className=s.className),r=t.splitText(n.index),r.splitText(n[0].length),i.appendChild(r.cloneNode(!0)),t.parentNode.replaceChild(i,r);return!!n}function a(e,t){var n,r=3;for(var i=0;i<e.childNodes.length;i++)n=e.childNodes[i],n.nodeType===r?i+=t(n)?1:0:a(n,t)}var o;s=t.mixin({},n,s);if(!s.node||!s.pattern)return;s.pattern=t.isArray(s.pattern)?s.pattern:[s.pattern],o=r(s.pattern,s.caseSensitive,s.wordsOnly),a(s.node,u)}}(window.document),u=function(){function r(r){var s=this,o,u,a,f;r=r||{},r.input||e.error("input is missing"),o=t.bind(this._onBlur,this),u=t.bind(this._onFocus,this),a=t.bind(this._onKeydown,this),f=t.bind(this._onInput,this),this.$hint=e(r.hint),this.$input=e(r.input).on("blur.tt",o).on("focus.tt",u).on("keydown.tt",a),this.$hint.length===0&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){if(n[e.which||e.keyCode])return;t.defer(t.bind(s._onInput,s,e))}):this.$input.on("input.tt",f),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function o(e,t){return r.normalizeQuery(e)===r.normalizeQuery(t)}function u(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var n;return n={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},r.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(r.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var r=n[t.which||t.keyCode];this._managePreventDefault(r,t),r&&this._shouldTrigger(r,t)&&this.trigger(r+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,n){var r,i,s;switch(t){case"tab":i=this.getHint(),s=this.getInputValue(),r=i&&i!==s&&!u(n);break;case"up":case"down":r=!u(n);break;default:r=!1}r&&n.preventDefault()},_shouldTrigger:function(t,n){var r;switch(t){case"tab":r=!u(n);break;default:r=!0}return r},_checkInputValue:function(){var t,n,r;t=this.getInputValue(),n=o(t,this.query),r=n?this.query.length!==t.length:!1,this.query=t,n?r&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,n){this.$input.val(t),n?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,n,r,i;t=this.getInputValue(),n=this.getHint(),r=t!==n&&n.indexOf(t)===0,i=t!==""&&r&&!this.hasOverflow(),!i&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var e,n,r;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:document.selection?(r=document.selection.createRange(),r.moveStart("character",-e),e===r.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),r}(),a=function(){function f(r){r=r||{},r.templates=r.templates||{},r.source||e.error("missing source"),r.name&&!h(r.name)&&e.error("invalid dataset name: "+r.name),this.query=null,this.highlight=!!r.highlight,this.name=r.name||t.getUniqueId(),this.source=r.source,this.displayFn=l(r.display||r.displayKey),this.templates=c(r.templates,this.displayFn),this.$el=e(n.dataset.replace("%CLASS%",this.name))}function l(e){function n(t){return t[e]}return e=e||"value",t.isFunction(e)?e:n}function c(e,n){function r(e){return"<p>"+n(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||r}}function h(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var i="ttDataset",u="ttValue",a="ttDatum";return f.extractDatasetName=function(n){return e(n).data(i)},f.extractValue=function(n){return e(n).data(u)},f.extractDatum=function(n){return e(n).data(a)},t.mixin(f.prototype,s,{_render:function(f,l){function p(){return c.templates.empty({query:f,isEmpty:!0})}function d(){function p(t){var s;return s=e(n.suggestion).append(c.templates.suggestion(t)).data(i,c.name).data(u,c.displayFn(t)).data(a,t),s.children().each(function(){e(this).css(r.suggestionChild)}),s}var s,h;return s=e(n.suggestions).css(r.suggestions),h=t.map(l,p),s.append.apply(s,h),c.highlight&&o({className:"tt-highlight",node:s[0],pattern:f}),s}function v(){return c.templates.header({query:f,isEmpty:!h})}function m(){return c.templates.footer({query:f,isEmpty:!h})}if(!this.$el)return;var c=this,h;this.$el.empty(),c.templates||(c.templates={}),h=l&&l.length,!h&&this.templates.empty?this.$el.html(p()).prepend(c.templates.header?v():null).append(c.templates.footer?m():null):h&&this.$el.html(d()).prepend(c.templates.header?v():null).append(c.templates.footer?m():null),this.trigger("rendered")},getRoot:function(){return this.$el},update:function(t){function r(e){!n.canceled&&t===n.query&&n._render(t,e)}var n=this;this.query=t,this.canceled=!1,this.source(t,r)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),f}(),f=function(){function n(n){var r=this,s,o,u;n=n||{},n.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(n.datasets,i),s=t.bind(this._onSuggestionClick,this),o=t.bind(this._onSuggestionMouseEnter,this),u=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(n.menu).on("click.tt",".tt-suggestion",s).on("mouseenter.tt",".tt-suggestion",o).on("mouseleave.tt",".tt-suggestion",u),t.each(this.datasets,function(e){r.$menu.append(e.getRoot()),e.onSync("rendered",r._onRendered,r)})}function i(e){return new a(e)}return t.mixin(n.prototype,s,{_onSuggestionClick:function(n){this.trigger("suggestionClicked",e(n.currentTarget))},_onSuggestionMouseEnter:function(n){this._removeCursor(),this._setCursor(e(n.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function n(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,n),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,n){t.first().addClass("tt-cursor"),!n&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var n,r,i,s;if(!this.isOpen)return;r=this._getCursor(),n=this._getSuggestions(),this._removeCursor(),i=n.index(r)+t,i=(i+1)%(n.length+1)-1;if(i===-1){this.trigger("cursorRemoved");return}i<-1&&(i=n.length-1),this._setCursor(s=n.eq(i)),this._ensureVisible(s)},_ensureVisible:function(t){var n,r,i,s;n=t.position().top,r=n+t.outerHeight(!0),i=this.$menu.scrollTop(),s=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),n<0?this.$menu.scrollTop(i+n):s<r&&this.$menu.scrollTop(i+(r-s))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css(t==="ltr"?r.ltr:r.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var n=null;return t.length&&(n={raw:a.extractDatum(t),value:a.extractValue(t),datasetName:a.extractDatasetName(t)}),n},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(n){function r(e){e.update(n)}t.each(this.datasets,r)},empty:function(){function n(e){e.clear()}t.each(this.datasets,n),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function n(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,n)}}),n}(),l=function(){function o(n){var r,s,o;n=n||{},n.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.$node=a(n.input,n.withHint),r=this.$node.find(".tt-dropdown-menu"),s=this.$node.find(".tt-input"),o=this.$node.find(".tt-hint"),s.on("blur.tt",function(e){var n,i,o;n=document.activeElement,i=r.is(n),o=r.has(n).length>0,t.isMsie()&&(i||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){s.focus()}))}),r.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=n.eventBus||new i({el:s}),this.dropdown=(new f({menu:r,datasets:n.datasets})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=(new u({input:s,hint:o})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function a(t,i){var o,u,a,f;o=e(t),u=e(n.wrapper).css(r.wrapper),a=e(n.dropdown).css(r.dropdown),f=o.clone().css(r.hint).css(l(o)),f.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),o.data(s,{dir:o.attr("dir"),autocomplete:o.attr("autocomplete"),spellcheck:o.attr("spellcheck"),style:o.attr("style")}),o.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(i?r.input:r.inputWithNoHint);try{!o.attr("dir")&&o.attr("dir","auto")}catch(c){}return o.wrap(u).parent().prepend(i?f:null).append(a)}function l(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function c(e){var n=e.find(".tt-input");t.each(n.data(s),function(e,r){t.isUndefined(e)?n.removeAttr(r):n.attr(r,e)}),n.detach().removeData(s).removeClass("tt-input").insertAfter(e),e.remove()}var s="ttAttrs";return t.mixin(o.prototype,{_onSuggestionClicked:function(t,n){var r;(r=this.dropdown.getDatumForSuggestion(n))&&this._select(r)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0;var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(t,n){var r,i;r=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),r?(this._select(r),n.preventDefault()):this.autoselect&&i&&(this._select(i),n.preventDefault())},_onTabKeyed:function(t,n){var r;(r=this.dropdown.getDatumForCursor())?(this._select(r),n.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){this.dir==="rtl"&&this._autocomplete()},_onRightKeyed:function(){this.dir==="ltr"&&this._autocomplete()},_onQueryChanged:function(t,n){this.input.clearHintIfInvalid(),n.length>=this.minLength?this.dropdown.update(n):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var n,r,i,s,o,a;n=this.dropdown.getDatumForTopSuggestion(),r=this.input.getInputValue(),n&&this.dropdown.isVisible()&&!this.input.hasOverflow()&&r.length>0?(i=u.normalizeQuery(r),s=t.escapeRegExChars(i),o=new RegExp("^(?:"+s+")(.+$)","i"),a=o.exec(n.value),a?this.input.setHint(r+a[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var n,r,i,s;n=this.input.getHint(),r=this.input.getQuery(),i=t||this.input.isCursorAtEnd(),n&&r!==n&&i&&(s=this.dropdown.getDatumForTopSuggestion(),s&&this.input.setInputValue(s.value),this.eventBus.trigger("autocompleted",s.raw,s.datasetName))},_select:function(n){this.input.setQuery(n.value),this.input.setInputValue(n.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",n.raw,n.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(n){n=t.toStr(n),this.isActivated?this.input.setInputValue(n):(this.input.setQuery(n),this.input.setInputValue(n,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),c(this.$node),this.$node=null}}),o}();(function(){var n,r,s;n=e.fn.typeahead,r="ttTypeahead",s={initialize:function(s,o){function u(){var n=e(this),u,a;t.each(o,function(e){e.highlight=!!s.highlight}),a=new l({input:n,eventBus:u=new i({el:n}),withHint:t.isUndefined(s.hint)?!0:!!s.hint,minLength:s.minLength,autoselect:s.autoselect,datasets:o}),n.data(r,a)}return o=t.isArray(o)?o:[].slice.call(arguments,1),s=s||{},this.each(u)},open:function(){function n(){var t=e(this),n;(n=t.data(r))&&n.open()}return this.each(n)},close:function(){function n(){var t=e(this),n;(n=t.data(r))&&n.close()}return this.each(n)},val:function(n){function i(){var t=e(this),i;(i=t.data(r))&&i.setVal(n)}function s(e){var t,n;if(t=e.data(r))n=t.getVal();return n}return arguments.length?this.each(i):s(this.first())},destroy:function(){function n(){var t=e(this),n;if(n=t.data(r))n.destroy(),t.removeData(r)}return this.each(n)}},e.fn.typeahead=function(t){var n;return s[t]&&t!=="initialize"?(n=this.filter(function(){return!!e(this).data(r)}),s[t].apply(n,[].slice.call(arguments,1))):s.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this}})()}(window.jQuery),define("typeahead",["jquery"],function(e){return function(){var t,n;return t||e.typeahead}}(this)),define("js/views/content/exploreTags",["jquery","underscore","backbone","js/lib/track","js/lib/utils","js/collections/eventList","js/models/app","js/models/user","js/models/city","text!templates/content/exploreTags.html","text!templates/content/exploreTag.html","typeahead"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=n.View.extend({className:"top-content",template:t.template(f),tagInputTemplate:t.template(l),events:{"click .tag.selected":"removeTag","click .tag.unselected":"onUnselectedTagClick","click .change-location-link":"showChangeLocationOverlay","focus .typeahead":"onTypeaheadFocus"},initialize:function(){this.listenTo(s,"stateChange",this.handleStateChange),this.listenTo(u,"change:filterTags",this.render),this.render()},handleStateChange:function(e){if(!e)return;(e.current==EVENT_LIST_STATES.loaded&&e.previous!=EVENT_LIST_STATES.paginating||s.state.current==EVENT_LIST_STATES.resetting)&&this.render()},onUnselectedTagClick:function(t){this.addTag(e(t.target).text())},onTypeaheadFocus:function(t){if(i.isMobile()){var n=e("#top-content-container").height()-e(".typeahead").height()-e("#navbar").height();e("#content-container").scrollTop(n)}},addTag:function(e){u.addTag(e)},removeTag:function(t){u.removeTag(e(t.target).text())},render:function(){if(s.state&&s.state.current==EVENT_LIST_STATES.resetting){this.$el.hide();return}this.$el.show();var n=this,r=[],i=s.totalEvents;i||(i=0);if(s.genreCount)for(var o=0;o<Math.min(14,s.genreCount.length);o++)-1==e.inArray(s.genreCount[o].genre,u.get("filterTags"))&&r.push(s.genreCount[o].genre);var f=a.get("displayCity");f||(f=a.get("locationInput")),f===undefined&&(f=null),this.$el.html(this.template({city:f,count:i,selectedGenres:u.get("filterTags"),unselectedGenres:r})),this.$el.find(".typeahead").typeahead({highlight:!1,minLength:0,hint:!0},{source:function(e,n){var r=[];t.forEach(s.genreCount,function(t){(e.length==0||t.genre.indexOf(e)==0)&&r.push(t)}),n(r)},displayKey:"genre",templates:{suggestion:function(e){return n.tagInputTemplate(e)}}}),this.$el.find(".typeahead").on("typeahead:selected",function(e,t){n.addTag(t.genre)}),this.$el.find(".typeahead").on("typeahead:autocompleted",function(e,t){n.addTag(t.genre)}),!s.totalEvents||s.totalEvents<20?(this.$el.find(".tags-container").hide(),this.$el.find(".tag-input").hide()):(this.$el.find(".tags-container").show(),this.$el.find(".tag-input").show())},showChangeLocationOverlay:function(e){e.preventDefault(),o.set("overlayContent",""),i.navigate("change-location",{trigger:!1})}});return h}),define("js/collections/followingList",["underscore","jquery","js/collections/baseCollection","js/lib/track","js/models/user","js/models/user2","js/models/event","js/models/city","js/collections/baseEventList"],function(e,t,n,r,i,s,o,u,a){var f=n.extend({model:s,eventList:new a,url:function(){return"/REST/users/"+i.id+"/following"},initialize:function(){var e=this;this.eventList=new a,this.on("add remove",function(){e.updateEventList()}),i.id?this.init():(i.state=="authUnattempted"?(e.setState(EVENT_LIST_STATES.waiting),e.eventList.setState(EVENT_LIST_STATES.waiting)):(e.setState(EVENT_LIST_STATES.unitialized),e.eventList.setState(EVENT_LIST_STATES.unitialized)),this.listenToOnce(i,"loggedIn",this.init),this.listenToOnce(i,"loginFail",function(){e.setState(EVENT_LIST_STATES.unitialized),e.eventList.setState(EVENT_LIST_STATES.unitialized)}))},updateEventList:function(){var t=this.eventList;return t.reset(),e.forEach(this.models,function(n){var r=n.get("associations");r&&r.HOST&&e.forEach(r.HOST,function(e){t.contains(e.id)||t.add(new o(e,{parse:!0}))}),r&&r.PERFORMER&&e.forEach(r.PERFORMER,function(e){t.contains(e.id)||t.add(new o(e,{parse:!0}))}),r&&r.GOING_TO&&e.forEach(r.GOING_TO,function(e){t.contains(e.id)||t.add(new o(e,{parse:!0}))})}),t},fetchEvents:function(e){var n=this;this.fetch({parse:!0,reset:!0,data:t.param({enrich:!0,cityId:u.getCityId()}),forceParseEventCollection:!0,success:function(){n.updateEventList(),n.eventList.setState(EVENT_LIST_STATES.loaded),e&&e()},error:function(e,t){r.logEvent("error",{msg:"failed to retrieve following list for user "+i.id+", response: "+t}),n.setState(EVENT_LIST_STATES.loadFailed),n.eventList.setState(EVENT_LIST_STATES.loadFailed)}})},init:function(){this.fetchEvents(),this.listenTo(u,"change:data",this.fetchEvents())}});return new f}),define("text!templates/controls/follow.html",[],function(){return'<div class="btn-container">\n    <div class="button followButton">\n<% if (!following) { %>\n        <div class="highlighted follow"><span class="glyphicon glyphicon-plus"></span> Follow</a></div>\n<% } else { %>\n    <div class="unhighlighted">\n        <div class="unhighlighted following"><span class="glyphicon glyphicon-ok"></span> Followed</a></div>\n        <div class="unhighlighted unfollow"><span class="glyphicon glyphicon-minus"></span> Unfollow</a></div>\n<% } %>\n    </div>'}),define("js/views/controls/follow",["jquery","underscore","js/views/controls/authenticatedClickable","js/lib/track","js/models/user","js/models/city","js/collections/followingList","text!templates/controls/follow.html"],function(e,t,n,r,i,s,o,u){var a=n.extend({tagName:"div",className:"follow",template:t.template(u),innerInitialize:function(e){if(e.user.category=="FEST")return;t.bindAll(this,"updateModelAndRender","updateCollection"),this.user=e.user,this.baseLogContext={user:this.user.id,parent:e.parent,control:"follow"},this.collection=o,this.runWhenCollectionReady(this.updateModelAndRender)||this.render()},updateModelAndRender:function(){this.model=o.get(this.user.id),this.render()},render:function(){if(i.id==this.user.id){this.$el.html("");return}this.model?this.$el.html(this.template({following:!0})):this.$el.html(this.template({following:!1}))},innerOnClick:function(){this.runWhenCollectionReady(this.updateCollection)},updateCollection:function(){var e={};this.model?(this.model.destroy(),this.model=null,t.extend(e,this.baseLogContext,{result:"unfollowed"})):(this.model=o.create(this.user,{data:s.getCityId()}),t.extend(e,this.baseLogContext,{result:"followed"})),this.render(),r.logEvent("click",e)}});return a}),define("text!templates/content/top.html",[],function(){return'<div class="info-container">\n\n    <img src="<%=displayImg %>" alt="<%= name %>"/>\n\n    <h1><%= name %></h1>\n\n    <div class="follow-container"/>\n    <% if (location && location.address) { %>\n        <a href=<%= encodeURI("http://maps.google.com/?q=" + location.address)  %> target="_blank">\n            <h5>\n                <%= location.address %> (map) <br>\n                <% if (location.city) { %>\n                    <%= location.city %>\n                <% } %>\n                <% if (location.region) { %>\n                    <%= location.region %>\n                <% } %>\n                <% if (location.countryName) { %>\n                    <%= location.countryName %>\n                <% } %>\n            </h5>\n        </a>\n    <% } %>\n\n    <% if (events && events.length > 0) { %>\n    <hr>\n    <p class="counter"><%= events.length %> events</p>\n    <% } %>\n</div>'}),define("js/views/content/top",["jquery","underscore","backbone","js/lib/track","js/views/controls/follow","text!templates/content/top.html"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"div",className:"top-content",template:t.template(s),initialize:function(){this.render(),this.listenTo(this.model,"change:events",this.render)},innerRender:function(){},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$el.find(".follow-container").html((new i({user:this.model.toJSON(),parent:"userPage"})).el),this.innerRender()}});return o}),define("modules/edit/models/editEventModel",["underscore","backbone","js/lib/track","js/models/event"],function(e,t,n,r){var i=t.Model.extend({defaults:function(){return{event:null,ticket:{},errors:[]}},initialize:function(e,t){var n=t.event;n.get("associations")||n.set("associations",{}),n.get("tags")&&n.get("tags").length>0&&n.set("commaDelimitedTags",this.model.get("tags").join(", ")),n.get("commaDelimitedTags")||n.set("commaDelimitedTags",""),this.set("event",n),this.listenTo(n,"change",function(){this.trigger("change")})},checkForErrors:function(){var e=[];return(!this.get("event").get("associations").PERFORMER||this.get("event").get("associations").PERFORMER.length==0)&&e.push("performer"),this.get("event").get("start_time")||e.push("time"),(!this.get("event").get("associations").HOST||this.get("event").get("associations").HOST.length==0)&&e.push("venue"),this.set("errors",e),e.length>0?!0:!1}});return i}),define("text!templates/facebooklogin.html",[],function(){return'<a class="button fb-btn"><span class="icon-facebook"></span><span><%= text %></span></a>'});try{window.FB||function(e){function f(){}var t=e,n=e.document,r=void 0,i=e.setTimeout,s=e.setInterval,o=e.clearTimeout,u=e.clearInterval,a=0,l={},c,h,p,d;(function(){var e={},t=function(e,t){if(!e&&!t)return null;var n={};return typeof e!="undefined"&&(n.type=e),typeof t!="undefined"&&(n.signature=t),n},n=function(e,n){return t(e&&/^[A-Z]/.test(e)?e:r,n&&(n.params&&n.params.length||n.returns)?"function("+(n.params?n.params.map(function(e){return/\?/.test(e)?"?"+e.replace("?",""):e}).join(","):"")+")"+(n.returns?":"+n.returns:""):r)},i=function(e,t,n){return e},s=function(e,t,i){"sourcemeta"in l&&(e.__SMmeta=t);if("typechecks"in l){var s=n(t?t.name:r,i);s&&p(e,s)}return e},o=function(e,t,n){return n.apply(e,t)},u=function(e,t,n,r){r&&r.params&&d.apply(e,r.params);var i=n.apply(e,t);return r&&r.returns&&d([i,r.returns]),i},a=function(t,n,r,i,s){if(s){s.callId||(s.callId=s.module+":"+(s.line||0)+":"+(s.column||0));var o=s.callId;e[o]=(e[o]||0)+1}return r.apply(t,n)};typeof l=="undefined"?(c=i,h=o):(c=s,"codeusage"in l?(c=i,h=a,h.getCodeUsage=function(){return e},h.clearCodeUsage=function(){e={}}):"typechecks"in l?h=u:h=o)})(),d=function(e){return e[0]},p=function(e){return e};var v,m;(function(e){var t={},n={},r=["global","require","requireDynamic","requireLazy","module","exports"];v=function(r,i){if(n.hasOwnProperty(r))return n[r];if(!t.hasOwnProperty(r)){if(i)return null;throw new Error("Module "+r+" has not been defined")}var s=t[r],o=s.deps,u=s.factory.length,a,f=[];for(var l=0;l<u;l++){switch(o[l]){case"module":a=s;break;case"exports":a=s.exports;break;case"global":a=e;break;case"require":a=v;break;case"requireDynamic":a=v;break;case"requireLazy":a=null;break;default:a=v.call(null,o[l])}f.push(a)}return s.factory.apply(e,f),n[r]=s.exports,s.exports},v.__markCompiled=function(){},m=function(e,i,s,o){typeof s=="function"?(t[e]={factory:s,deps:r.concat(i),exports:{}},o===3&&v.call(null,e)):n[e]=s}})(this),m("ES5ArrayPrototype",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={};u.map=function(e,t){if(typeof e!="function")throw new TypeError;var n,r=this.length,i=new Array(r);for(n=0;n<r;++n)n in this&&(i[n]=e.call(t,this[n],n,this));return i},u.forEach=function(e,t){u.map.call(this,e,t)},u.filter=function(e,t){if(typeof e!="function")throw new TypeError;var n,r,i=this.length,s=[];for(n=0;n<i;++n)n in this&&(r=this[n],e.call(t,r,n,this)&&s.push(r));return s},u.every=function(e,t){if(typeof e!="function")throw new TypeError;var n=new Object(this),r=n.length;for(var i=0;i<r;i++)if(i in n&&!e.call(t,n[i],i,n))return!1;return!0},u.some=function(e,t){if(typeof e!="function")throw new TypeError;var n=new Object(this),r=n.length;for(var i=0;i<r;i++)if(i in n&&e.call(t,n[i],i,n))return!0;return!1},u.indexOf=function(e,t){var n=this.length;t|=0,t<0&&(t+=n);for(;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s.exports=u},null),m("ES5FunctionPrototype",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={};u.bind=function(e){function r(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}if(typeof this!="function")throw new TypeError("Bind must be called on a function");var t=this,n=Array.prototype.slice.call(arguments,1);return r.displayName="bound:"+(t.displayName||t.name||"(?)"),r.toString=function(){return"bound: "+t},r},s.exports=u},null),m("ES5StringPrototype",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={};u.trim=function(){if(this==null)throw new TypeError("String.prototype.trim called on null or undefined");return String.prototype.replace.call(this,/^\s+|\s+$/g,"")},u.startsWith=function(e){var t=String(this);if(this==null)throw new TypeError("String.prototype.startsWith called on null or undefined");var n=arguments.length>1?Number(arguments[1]):0;isNaN(n)&&(n=0);var r=Math.min(Math.max(n,0),t.length);return t.indexOf(String(e),n)==r},u.endsWith=function(e){var t=String(this);if(this==null)throw new TypeError("String.prototype.endsWith called on null or undefined");var n=t.length,r=String(e),i=arguments.length>1?Number(arguments[1]):n;isNaN(i)&&(i=0);var s=Math.min(Math.max(i,0),n),o=s-r.length;return o<0?!1:t.lastIndexOf(r,o)==o},u.contains=function(e){if(this==null)throw new TypeError("String.prototype.contains called on null or undefined");var t=String(this),n=arguments.length>1?Number(arguments[1]):0;return isNaN(n)&&(n=0),t.indexOf(String(e),n)!=-1},u.repeat=function(e){if(this==null)throw new TypeError("String.prototype.repeat called on null or undefined");var t=String(this),n=e?Number(e):0;isNaN(n)&&(n=0);if(n<0||n===Infinity)throw RangeError();if(n===1)return t;if(n===0)return"";var r="";while(n){n&1&&(r+=t);if(n>>=1)t+=t}return r},s.exports=u},null),m("ES5Array",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={};u.isArray=function(e){return Object.prototype.toString.call(e)=="[object Array]"},s.exports=u},null),m("ie8DontEnum",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","prototypeIsEnumerable","constructor"],a={}.hasOwnProperty,f=function(){};(({toString:!0})).propertyIsEnumerable("toString")&&(f=function(e,t){for(var n=0;n<u.length;n++){var r=u[n];a.call(e,r)&&t(r)}}),s.exports=f},null),m("ES5Object",["ie8DontEnum"],function(t,n,r,i,s,o,u){function l(){}n.__markCompiled&&n.__markCompiled();var a={}.hasOwnProperty,f={};f.create=function(e){var t=typeof e;if(t!="object"&&t!="function")throw new TypeError("Object prototype may only be a Object or null");return l.prototype=e,new l},f.keys=function(e){var t=typeof e;if(t!="object"&&t!="function"||e===null)throw new TypeError("Object.keys called on non-object");var n=[];for(var r in e)a.call(e,r)&&n.push(r);return u(e,function(e){return n.push(e)}),n},s.exports=f},null),m("ES5Date",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={};u.now=function(){return(new Date).getTime()},s.exports=u},null),m("JSON3",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled(),function(){var e={}.toString,t,n,r,i=s.exports={},o='{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S=new Date(-0xc782b5b800cec),x,T,N;try{S=S.getUTCFullYear()==-109252&&S.getUTCMonth()===0&&S.getUTCDate()==1&&S.getUTCHours()==10&&S.getUTCMinutes()==37&&S.getUTCSeconds()==6&&S.getUTCMilliseconds()==708}catch(C){}S||(x=Math.floor,T=[0,31,59,90,120,151,181,212,243,273,304,334],N=function(e,t){return T[t]+365*(e-1970)+x((e-1969+(t=+(t>1)))/4)-x((e-1901+t)/100)+x((e-1601+t)/400)}),typeof JSON=="object"&&JSON&&(i.stringify=JSON.stringify,i.parse=JSON.parse);if(u=typeof i.stringify=="function"&&!N){(S=function(){return 1}).toJSON=S;try{u=i.stringify(0)==="0"&&i.stringify(new Number)==="0"&&i.stringify(new String)=='""'&&i.stringify(e)===r&&i.stringify(r)===r&&i.stringify()===r&&i.stringify(S)==="1"&&i.stringify([S])=="[1]"&&i.stringify([r])=="[null]"&&i.stringify(null)=="null"&&i.stringify([r,e,null])=="[null,null,null]"&&i.stringify({result:[S,true,false,null,"\0\b\n\f\r	"]})==o&&i.stringify(null,S)==="1"&&i.stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&i.stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&i.stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&i.stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&i.stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(C){u=!1}}if(typeof i.parse=="function")try{if(i.parse("0")===0&&!i.parse(!1)){S=i.parse(o);if(h=S.A.length==5&&S.A[0]==1){try{h=!i.parse('"	"')}catch(C){}if(h)try{h=i.parse("01")!=1}catch(C){}}}}catch(C){h=!1}S=o=null;if(!u||!h)(t={}.hasOwnProperty)||(t=function(n){var r={},i;return(r.__proto__=null,r.__proto__={toString:1},r).toString!=e?t=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(i=r.constructor,t=function(e){var t=(this.constructor||i).prototype;return e in this&&!(e in t&&this[e]===t[e])}),r=null,t.call(this,n)}),n=function(n,r){var i=0,s,o,u,a;(s=function(){this.valueOf=0}).prototype.valueOf=0,o=new s;for(u in o)t.call(o,u)&&i++;return s=o=null,i?i==2?a=function(n,r){var i={},s=e.call(n)=="[object Function]",o;for(o in n)(!s||o!="prototype")&&!t.call(i,o)&&(i[o]=1)&&t.call(n,o)&&r(o)}:a=function(n,r){var i=e.call(n)=="[object Function]",s,o;for(s in n)(!i||s!="prototype")&&t.call(n,s)&&!(o=s==="constructor")&&r(s);(o||t.call(n,s="constructor"))&&r(s)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],a=function(n,r){var i=e.call(n)=="[object Function]",s,u;for(s in n)(!i||s!="prototype")&&t.call(n,s)&&r(s);for(u=o.length;s=o[--u];t.call(n,s)&&r(s));}),a(n,r)},u||(a={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},f=function(e,t){return("000000"+(t||0)).slice(-e)},l=function(e){var t='"',n=0,r;for(;r=e.charAt(n);n++)t+='\\"\b\f\n\r	'.indexOf(r)>-1?a[r]:r<" "?"\\u00"+f(2,r.charCodeAt(0).toString(16)):r;return t+'"'},c=function(i,s,o,u,a,h,p){var d=s[i],v,m,g,y,b,w,E,S,T,C,L,A,O,M,_;if(typeof d=="object"&&d){v=e.call(d);if(v=="[object Date]"&&!t.call(d,"toJSON"))if(d>-1/0&&d<1/0){if(N){y=x(d/864e5);for(m=x(y/365.2425)+1970-1;N(m+1,0)<=y;m++);for(g=x((y-N(m,0))/30.42);N(m,g+1)<=y;g++);y=1+y-N(m,g),b=(d%864e5+864e5)%864e5,w=x(b/36e5)%24,E=x(b/6e4)%60,S=x(b/1e3)%60,T=b%1e3}else m=d.getUTCFullYear(),g=d.getUTCMonth(),y=d.getUTCDate(),w=d.getUTCHours(),E=d.getUTCMinutes(),S=d.getUTCSeconds(),T=d.getUTCMilliseconds();d=(m<=0||m>=1e4?(m<0?"-":"+")+f(6,m<0?-m:m):f(4,m))+"-"+f(2,g+1)+"-"+f(2,y)+"T"+f(2,w)+":"+f(2,E)+":"+f(2,S)+"."+f(3,T)+"Z"}else d=null;else typeof d.toJSON=="function"&&(v!="[object Number]"&&v!="[object String]"&&v!="[object Array]"||t.call(d,"toJSON"))&&(d=d.toJSON(i))}o&&(d=o.call(s,i,d));if(d===null)return"null";v=e.call(d);if(v=="[object Boolean]")return""+d;if(v=="[object Number]")return d>-1/0&&d<1/0?""+d:"null";if(v=="[object String]")return l(d);if(typeof d=="object"){for(O=p.length;O--;)if(p[O]===d)throw TypeError();p.push(d),C=[],M=h,h+=a;if(v=="[object Array]"){for(A=0,O=d.length;A<O;_||(_=!0),A++)L=c(A,d,o,u,a,h,p),C.push(L===r?"null":L);return _?a?"[\n"+h+C.join(",\n"+h)+"\n"+M+"]":"["+C.join(",")+"]":"[]"}return n(u||d,function(e){var t=c(e,d,o,u,a,h,p);t!==r&&C.push(l(e)+":"+(a?" ":"")+t),_||(_=!0)}),_?a?"{\n"+h+C.join(",\n"+h)+"\n"+M+"}":"{"+C.join(",")+"}":"{}"}},i.stringify=function(t,n,r){var i,s,o,u,a,f;if(typeof n=="function"||typeof n=="object"&&n)if(e.call(n)=="[object Function]")s=n;else if(e.call(n)=="[object Array]"){o={};for(u=0,a=n.length;u<a;f=n[u++],(e.call(f)=="[object String]"||e.call(f)=="[object Number]")&&(o[f]=1));}if(r)if(e.call(r)=="[object Number]"){if((r-=r%1)>0)for(i="",r>10&&(r=10);i.length<r;i+=" ");}else e.call(r)=="[object String]"&&(i=r.length<=10?r:r.slice(0,10));return c("",(f={},f[""]=t,f),s,o,i,"",[])}),h||(p=String.fromCharCode,d={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"	",n:"\n",f:"\f",r:"\r"},v=function(){throw w=E=null,SyntaxError()},m=function(){var e=E,t=e.length,n,r,i,s,o;while(w<t){n=e.charAt(w);if("	\r\n ".indexOf(n)>-1)w++;else{if("{}[]:,".indexOf(n)>-1)return w++,n;if(n=='"'){for(r="@",w++;w<t;){n=e.charAt(w);if(n<" ")v();else if(n=="\\"){n=e.charAt(++w);if('\\"/btnfr'.indexOf(n)>-1)r+=d[n],w++;else if(n=="u"){i=++w;for(s=w+4;w<s;w++)n=e.charAt(w),n>="0"&&n<="9"||n>="a"&&n<="f"||n>="A"&&n<="F"||v();r+=p("0x"+e.slice(i,w))}else v()}else{if(n=='"')break;r+=n,w++}}if(e.charAt(w)=='"')return w++,r;v()}else{i=w,n=="-"&&(o=!0,n=e.charAt(++w));if(n>="0"&&n<="9"){n=="0"&&(n=e.charAt(w+1),n>="0"&&n<="9")&&v(),o=!1;for(;w<t&&(n=e.charAt(w),n>="0"&&n<="9");w++);if(e.charAt(w)=="."){s=++w;for(;s<t&&(n=e.charAt(s),n>="0"&&n<="9");s++);s==w&&v(),w=s}n=e.charAt(w);if(n=="e"||n=="E"){n=e.charAt(++w),(n=="+"||n=="-")&&w++;for(s=w;s<t&&(n=e.charAt(s),n>="0"&&n<="9");s++);s==w&&v(),w=s}return+e.slice(i,w)}o&&v();if(e.slice(w,w+4)=="true")return w+=4,!0;if(e.slice(w,w+5)=="false")return w+=5,!1;if(e.slice(w,w+4)=="null")return w+=4,null;v()}}}return"$"},g=function(e){var t,n,r;e=="$"&&v();if(typeof e=="string"){if(e.charAt(0)=="@")return e.slice(1);if(e=="["){t=[];for(;;n||(n=!0)){e=m();if(e=="]")break;n&&(e==","?(e=m(),e=="]"&&v()):v()),e==","&&v(),t.push(g(e))}return t}if(e=="{"){t={};for(;;n||(n=!0)){e=m();if(e=="}")break;n&&(e==","?(e=m(),e=="}"&&v()):v()),(e==","||typeof e!="string"||e.charAt(0)!="@"||m()!=":")&&v(),t[e.slice(1)]=g(m())}return t}v()}return e},b=function(e,t,n){var i=y(e,t,n);i===r?delete e[t]:e[t]=i},y=function(t,r,i){var s=t[r],o;if(typeof s=="object"&&s)if(e.call(s)=="[object Array]")for(o=s.length;o--;)b(s,o,i);else n(s,function(e){b(s,e,i)});return i.call(t,r,s)},i.parse=function(t,n){w=0,E=t;var r=g(m());return m()!="$"&&v(),w=E=null,n&&e.call(n)=="[object Function]"?y((S={},S[""]=r,S),"",n):r})}.call(this)},null,{}),m("ES6Object",["ie8DontEnum"],function(t,n,r,i,s,o,u){n.__markCompiled&&n.__markCompiled();var a={}.hasOwnProperty,f={assign:function(e){if(e==null)throw new TypeError("Object.assign target cannot be null or undefined");e=Object(e);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0;i<n.length;i++){var s=n[i];if(s==null)continue;s=Object(s);for(var o in s)a.call(s,o)&&(e[o]=s[o]);u(s,function(t){return e[t]=s[t]})}return e}};s.exports=f},null),m("ES6ArrayPrototype",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={find:function(e,t){if(this==null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof e!="function")throw new TypeError("predicate must be a function");var n=u.findIndex.call(this,e,t);return n===-1?void 0:this[n]},findIndex:function(e,t){if(this==null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof e!="function")throw new TypeError("predicate must be a function");var n=Object(this),r=n.length>>>0;for(var i=0;i<r;i++)if(e.call(t,n[i],i,n))return i;return-1}};s.exports=u},null),m("ES6DatePrototype",[],function(t,n,r,i,s,o){function u(e){return(e<10?"0":"")+e}n.__markCompiled&&n.__markCompiled();var a={toISOString:function(){if(!isFinite(this))throw new Error("Invalid time value");var e=this.getUTCFullYear();return e=(e<0?"-":e>9999?"+":"")+("00000"+Math.abs(e)).slice(0<=e&&e<=9999?-4:-6),e+"-"+u(this.getUTCMonth()+1)+"-"+u(this.getUTCDate())+"T"+u(this.getUTCHours())+":"+u(this.getUTCMinutes())+":"+u(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}};s.exports=a},null),m("ES6Number",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={isFinite:function(e){return typeof e=="number"&&isFinite(e)},isNaN:function(e){return typeof e=="number"&&isNaN(e)}};s.exports=u},null),m("ES",["ES5ArrayPrototype","ES5FunctionPrototype","ES5StringPrototype","ES5Array","ES5Object","ES5Date","JSON3","ES6Object","ES6ArrayPrototype","ES6DatePrototype","ES6Number"],function(n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){function x(t){for(var n in t){if(!t.hasOwnProperty(n))continue;var r=t[n],i=n.split("."),s=i.length==2?e[i[0]][i[1]]:e[n];for(var o in r){if(!r.hasOwnProperty(o))continue;var u=s[o];w[n+"."+o]=u&&/\{\s+\[native code\]\s\}/.test(u)?u:r[o]}}}function T(e,t,n){var r=n?b.call(e).slice(8,-1)+".prototype":e,i=w[r+"."+t]||e[t];if(typeof i=="function"){for(var s=arguments.length,o=Array(s>3?s-3:0),u=3;u<s;u++)o[u-3]=arguments[u];return i.apply(e,o)}}r.__markCompiled&&r.__markCompiled();var b={}.toString,w={"JSON.stringify":d.stringify,"JSON.parse":d.parse},E={"Array.prototype":a,"Function.prototype":f,"String.prototype":l,Object:h,Array:c,Date:p},S={Object:v,"Array.prototype":m,"Date.prototype":g,Number:y};x(E),x(S),o.exports=T},null),m("sdk.babelHelpers",["ES5Object","ES6Object"],function(t,n,r,i,s,o,u,a){n.__markCompiled&&n.__markCompiled();var f={},l=Object.prototype.hasOwnProperty;f.inherits=function(e,t){return a.assign(e,t),e.prototype=u.create(t&&t.prototype),e.prototype.constructor=e,e.__superConstructor__=t,t},f._extends=a.assign,f.objectWithoutProperties=function(e,t){var n={};for(var r in e){if(!l.call(e,r)||t.indexOf(r)>=0)continue;n[r]=e[r]}return n},f.taggedTemplateLiteralLoose=function(e,t){return e.raw=t,e},s.exports=f},null);var g=v("ES"),y=v("sdk.babelHelpers");m("JSSDKRuntimeConfig",[],{locale:"en_US",rtl:!1,revision:"1911928"}),m("JSSDKConfig",[],{bustCache:!0,tagCountLogRate:.01,errorHandling:{rate:4},usePluginPipe:!0,features:{dialog_resize_refactor:!0,allow_non_canvas_app_events:!1,event_subscriptions_log:{rate:.01,value:1e4},should_force_single_dialog_instance:!0,kill_fragment:!0,xfbml_profile_pic_server:!0,error_handling:{rate:4},e2e_ping_tracking:{rate:1e-6},xd_timeout:{rate:4,value:3e4},use_bundle:!0,launch_payment_dialog_via_pac:{rate:100},plugin_tags_blacklist:["recommendations_bar","registration","activity","recommendations","facepile"],should_log_response_error:!0},api:{mode:"warn",whitelist:["AppEvents","AppEvents.EventNames","AppEvents.ParameterNames","AppEvents.activateApp","AppEvents.logEvent","AppEvents.logPurchase","Canvas","Canvas.Prefetcher","Canvas.Prefetcher.addStaticResource","Canvas.Prefetcher.setCollectionMode","Canvas.getPageInfo","Canvas.hideFlashElement","Canvas.scrollTo","Canvas.setAutoGrow","Canvas.setDoneLoading","Canvas.setSize","Canvas.setUrlHandler","Canvas.showFlashElement","Canvas.startTimer","Canvas.stopTimer","Event","Event.subscribe","Event.unsubscribe","Music.flashCallback","Music.init","Music.send","Payment","Payment.cancelFlow","Payment.continueFlow","Payment.init","Payment.lockForProcessing","Payment.parse","Payment.setSize","Payment.unlockForProcessing","ThirdPartyProvider","ThirdPartyProvider.init","ThirdPartyProvider.sendData","UA","UA.nativeApp","XFBML","XFBML.RecommendationsBar","XFBML.RecommendationsBar.markRead","XFBML.parse","addFriend","api","getAccessToken","getAuthResponse","getLoginStatus","getUserID","init","login","logout","publish","share","ui"]},initSitevars:{enableMobileComments:1,iframePermissions:{read_stream:!1,manage_mailbox:!1,manage_friendlists:!1,read_mailbox:!1,publish_checkins:!0,status_update:!0,photo_upload:!0,video_upload:!0,sms:!1,create_event:!0,rsvp_event:!0,offline_access:!0,email:!0,xmpp_login:!1,create_note:!0,share_item:!0,export_stream:!1,publish_stream:!0,publish_likes:!0,ads_management:!1,contact_email:!0,access_private_data:!1,read_insights:!1,read_requests:!1,read_friendlists:!0,manage_pages:!1,physical_login:!1,manage_groups:!1,read_deals:!1}}}),m("UrlMapConfig",[],{www:"www.facebook.com",m:"m.facebook.com",connect:"connect.facebook.net",business:"business.facebook.com",api_https:"api.facebook.com",api_read_https:"api-read.facebook.com",graph_https:"graph.facebook.com",fbcdn_http:"fbstatic-a.akamaihd.net",fbcdn_https:"fbstatic-a.akamaihd.net",cdn_http:"static.ak.facebook.com",cdn_https:"s-static.ak.facebook.com"}),m("JSSDKXDConfig",[],{XdUrl:"/connect/xd_arbiter.php?version=41",XdBundleUrl:"/connect/xd_arbiter/44OwK74u0Ie.js?version=41",Flash:{path:"https://connect.facebook.net/rsrc.php/v1/yW/r/yOZN1vHw3Z_.swf"},useCdn:!0}),m("JSSDKCssConfig",[],{rules:'.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow-x:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}\n.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}\n.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}',components:["css:fb.css.base","css:fb.css.dialog","css:fb.css.iframewidget"]}),m("ApiClientConfig",[],{FlashRequest:{swfUrl:"https://connect.facebook.net/rsrc.php/v1/yd/r/mxzow1Sdmxr.swf"}}),m("JSSDKCanvasPrefetcherConfig",[],{blacklist:[0x83d70a64a992],sampleRate:500}),m("JSSDKPluginPipeConfig",[],{threshold:0,enabledApps:{0xbec51e4718e7:1,0xaa568c1d5c06:1}}),m("QueryString",[],function(t,n,r,i,s,o){function u(e){var t=[];return g(g("Object","keys",!1,e).sort(),"forEach",!0,function(n){var r=e[n];if(typeof r=="undefined")return;if(r===null){t.push(n);return}t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}),t.join("&")}function a(e,t){var n={};if(e==="")return n;var r=e.split("&");for(var i=0;i<r.length;i++){var s=r[i].split("=",2),o=decodeURIComponent(s[0]);if(t&&n.hasOwnProperty(o))throw new URIError("Duplicate key: "+o);n[o]=s.length===2?decodeURIComponent(s[1]):null}return n}function f(e,t){return e+(g(e,"indexOf",!0,"?")!==-1?"&":"?")+(typeof t=="string"?t:l.encode(t))}n.__markCompiled&&n.__markCompiled();var l={encode:u,decode:a,appendToUrl:f};s.exports=l},null),m("ManagedError",[],function(t,n,r,i,s,o){function u(e,t){Error.prototype.constructor.call(this,e),this.message=e,this.innerError=t}n.__markCompiled&&n.__markCompiled(),u.prototype=new Error,u.prototype.constructor=u,s.exports=u},null),m("AssertionError",["ManagedError"],function(t,n,r,i,s,o,u){function a(e){u.prototype.constructor.apply(this,arguments)}n.__markCompiled&&n.__markCompiled(),a.prototype=new u,a.prototype.constructor=a,s.exports=a},null),m("sprintf",[],function(t,n,r,i,s,o){function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0;return e.replace(/%s/g,function(e){return n[i++]})}n.__markCompiled&&n.__markCompiled(),s.exports=u},null),m("Assert",["AssertionError","sprintf"],function(t,n,i,s,o,u,a,f){function l(e,t){if(typeof e!="boolean"||!e)throw new a(t);return e}function c(e,t,n){var i;if(t===r)i="undefined";else if(t===null)i="null";else{var s=Object.prototype.toString.call(t);i=/\s(\w*)/.exec(s)[1].toLowerCase()}return l(g(e,"indexOf",!0,i)!==-1,n||f("Expression is of type %s, not %s",i,e)),t}function h(e,t,n){return l(t instanceof e,n||"Expression not instance of type"),t}function p(e,t){d["is"+e]=t,d["maybe"+e]=function(e,n){e!=null&&t(e,n)}}n.__markCompiled&&n.__markCompiled();var d={isInstanceOf:h,isTrue:l,isTruthy:function(e,t){return l(!!e,t)},type:c,define:function(e,t){e=e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase(),p(e,function(e,n){l(t(e),n)})}};g(["Array","Boolean","Date","Function","Null","Number","Object","Regexp","String","Undefined"],"forEach",!0,function(e){p(e,g(c,"bind",!0,null,e.toLowerCase()))}),o.exports=d},null),m("Type",["Assert"],function(t,n,r,i,s,o,u){function a(){var e=this.__mixins;if(e)for(var t=0;t<e.length;t++)e[t].apply(this,arguments)}function f(e,t){if(t instanceof e)return!0;if(t instanceof a)for(var n=0;n<t.__mixins.length;n++)if(t.__mixins[n]==e)return!0;return!1}function l(e,t){var n=e.prototype;g("Array","isArray",!1,t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r];typeof i=="function"&&(n.__mixins.push(i),i=i.prototype),g(g("Object","keys",!1,i),"forEach",!0,function(e){n[e]=i[e]})}}function c(e,t,n){function i(){}var r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){this.parent.apply(this,arguments)};u.isFunction(r);if(e&&e.prototype instanceof a==0)throw new Error("parent type does not inherit from Type");return e=e||a,i.prototype=e.prototype,r.prototype=new i,t&&g("Object","assign",!1,r.prototype,t),r.prototype.constructor=r,r.parent=e,r.prototype.__mixins=e.prototype.__mixins?Array.prototype.slice.call(e.prototype.__mixins):[],n&&l(r,n),r.prototype.parent=function(){this.parent=e.prototype.parent,e.apply(this,arguments)},r.prototype.parentCall=function(t){return e.prototype[t].apply(this,Array.prototype.slice.call(arguments,1))},r.extend=function(e,t){return c(this,e,t)},r}n.__markCompiled&&n.__markCompiled(),g("Object","assign",!1,a.prototype,{instanceOf:function(e){return f(e,this)}}),g("Object","assign",!1,a,{extend:function(e,t){return typeof e=="function"?c.apply(null,arguments):c(null,e,t)},instanceOf:f}),s.exports=a},null),m("ObservableMixin",[],function(t,n,r,s,o,u){function a(){this.__observableEvents={}}n.__markCompiled&&n.__markCompiled(),a.prototype={inform:function(e){var t=Array.prototype.slice.call(arguments,1),n=Array.prototype.slice.call(this.getSubscribers(e));for(var r=0;r<n.length;r++){if(n[r]===null)continue;try{n[r].apply(this,t)}catch(s){i(function(){throw s},0)}}return this},getSubscribers:function(e){return this.__observableEvents[e]||(this.__observableEvents[e]=[])},clearSubscribers:function(e){return e&&(this.__observableEvents[e]=[]),this},clearAllSubscribers:function(){return this.__observableEvents={},this},subscribe:function(e,t){var n=this.getSubscribers(e);return n.push(t),this},unsubscribe:function(e,t){var n=this.getSubscribers(e);for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}return this},monitor:function(e,t){if(!t()){var n=g(function(r){t.apply(t,arguments)&&this.unsubscribe(e,n)},"bind",!0,this);this.subscribe(e,n)}return this}},o.exports=a},null),m("sdk.Model",["Type","ObservableMixin"],function(t,n,r,i,s,o,u,a){n.__markCompiled&&n.__markCompiled();var f=u.extend({constructor:function(e){this.parent();var t={},n=this;g(g("Object","keys",!1,e),"forEach",!0,function(r){t[r]=e[r],n["set"+r]=function(e){return e===t[r]?this:(t[r]=e,n.inform(r+".change",e),n)},n["get"+r]=function(){return t[r]}})}},a);s.exports=f},null),m("sdk.Runtime",["sdk.Model","JSSDKRuntimeConfig"],function(n,i,s,o,u,a,f,l){i.__markCompiled&&i.__markCompiled();var c={UNKNOWN:0,PAGETAB:1,CANVAS:2,PLATFORM:4},h=new f({AccessToken:"",ClientID:"",CookieUserID:"",Environment:c.UNKNOWN,Initialized:!1,IsVersioned:!1,KidDirectedSite:r,Locale:l.locale,LoginStatus:r,Revision:l.revision,Rtl:l.rtl,Scope:r,Secure:r,UseCookie:!1,UserID:"",Version:r});g("Object","assign",!1,h,{ENVIRONMENTS:c,isEnvironment:function(e){var t=this.getEnvironment();return(e|t)===t},isCanvasEnvironment:function(){return this.isEnvironment(c.CANVAS)||this.isEnvironment(c.PAGETAB)}}),function(){var t=/app_runner/.test(e.name)?c.PAGETAB:/iframe_canvas/.test(e.name)?c.CANVAS:c.UNKNOWN;(t|c.PAGETAB)===t&&(t|=c.CANVAS),h.setEnvironment(t)}(),u.exports=h},null),m("sdk.Cookie",["QueryString","sdk.Runtime"],function(t,r,i,s,o,u,a,f){function c(e,t,r){e+=f.getClientID();var i=l&&l!==".";i&&(n.cookie=e+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;",n.cookie=e+"=; expires=Wed, 04 Feb 2004 08:00:00 GMT;"+"domain="+location.hostname+";");var s=(new Date(r)).toGMTString();n.cookie=e+"="+t+(t&&r===0?"":"; expires="+s)+"; path=/"+(i?"; domain="+l:"")}function h(e){e+=f.getClientID();var t=new RegExp("\\b"+e+"=([^;]*)\\b");return t.test(n.cookie)?RegExp.$1:null}r.__markCompiled&&r.__markCompiled();var l=null,p={setDomain:function(e){l=e;var t=a.encode({base_domain:l&&l!=="."?l:""}),n=new Date;n.setFullYear(n.getFullYear()+1),c("fbm_",t,n.getTime())},getDomain:function(){return l},loadMeta:function(){var e=h("fbm_");if(e){var t=a.decode(e);return l||(l=t.base_domain),t}},loadSignedRequest:function(){return h("fbsr_")},setSignedRequestCookie:function(e,t){if(!e)throw new Error("Value passed to Cookie.setSignedRequestCookie was empty.");c("fbsr_",e,t)},clearSignedRequestCookie:function(){c("fbsr_","",0)},setRaw:c};o.exports=p},null),m("wrapFunction",[],function(t,n,r,i,s,o){function a(e,t,n){return t=t||"default",function(){var r=t in u?u[t](e,n):e;return r.apply(this,arguments)}}n.__markCompiled&&n.__markCompiled();var u={};a.setWrapper=function(e,t){t=t||"default",u[t]=e},s.exports=a},null),m("DOMEventListener",["wrapFunction"],function(n,r,i,s,o,u,a){r.__markCompiled&&r.__markCompiled();var f,l;e.addEventListener?(f=function(e,t,n){n.wrapper=a(n,"entry","DOMEventListener.add "+t),e.addEventListener(t,n.wrapper,!1)},l=function(e,t,n){e.removeEventListener(t,n.wrapper,!1)}):e.attachEvent?(f=function(e,t,n){n.wrapper=a(n,"entry","DOMEventListener.add "+t),e.attachEvent("on"+t,n.wrapper)},l=function(e,t,n){e.detachEvent("on"+t,n.wrapper)}):l=f=function(){};var c={add:function(e,t,n){return f(e,t,n),{remove:function(){l(e,t,n),e=null}}},remove:l};o.exports=c},null),m("sdk.UA",[],function(t,n,r,i,s,o){function d(e){return g(e.split("."),"map",!0,function(e){return parseFloat(e)})}n.__markCompiled&&n.__markCompiled();var u=navigator.userAgent,a={iphone:/\b(iPhone|iP[ao]d)/.test(u),ipad:/\b(iP[ao]d)/.test(u),android:/Android/i.test(u),nativeApp:/FBAN\/\w+;/i.test(u)},f=/Mobile/i.test(u),l={ie:"",firefox:"",chrome:"",webkit:"",osx:""},c=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(u);if(c){l.ie=c[1]?parseFloat(c[1]):c[4]?parseFloat(c[4]):"",l.firefox=c[2]||"",l.webkit=c[3]||"";if(c[3]){var h=/(?:Chrome\/(\d+\.\d+))/.exec(u);l.chrome=h?h[1]:""}}var p=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(u);p&&(l.osx=p[1]);var v={};g(g("Object","keys",!1,l),"map",!0,function(e){v[e]=function(){return parseFloat(l[e])},v[e].getVersionParts=function(){return d(l[e])}}),g(g("Object","keys",!1,a),"map",!0,function(e){v[e]=function(){return a[e]}}),v.mobile=function(){return a.iphone||a.ipad||a.android||f},s.exports=v},null),m("getBlankIframeSrc",["sdk.UA"],function(t,n,r,i,s,o,u){function a(){return u.ie()<10?"javascript:false":"about:blank"}n.__markCompiled&&n.__markCompiled(),s.exports=a},null),m("guid",[],function(t,n,r,i,s,o){function u(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")}n.__markCompiled&&n.__markCompiled(),s.exports=u},null),m("UserAgent_DEPRECATED",[],function(t,r,i,s,o,u){function T(){if(a)return;a=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);w=/\b(iPhone|iP[ao]d)/.exec(e),E=/\b(iP[ao]d)/.exec(e),y=/Android/i.exec(e),S=/FBAN\/\w+;/i.exec(e),x=/Mobile/i.exec(e),b=!!/Win64/.exec(e);if(t){f=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,f&&n&&n.documentMode&&(f=n.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(e);d=i?parseFloat(i[1])+4:f,l=t[2]?parseFloat(t[2]):NaN,c=t[3]?parseFloat(t[3]):NaN,h=t[4]?parseFloat(t[4]):NaN,h?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),p=t&&t[1]?parseFloat(t[1]):NaN):p=NaN}else f=l=c=p=h=NaN;if(r){if(r[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);v=s?parseFloat(s[1].replace("_",".")):!0}else v=!1;m=!!r[2],g=!!r[3]}else v=m=g=!1}r.__markCompiled&&r.__markCompiled();var a=!1,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,N={ie:function(){return T()||f},ieCompatibilityMode:function(){return T()||d>f},ie64:function(){return N.ie()&&b},firefox:function(){return T()||l},opera:function(){return T()||c},webkit:function(){return T()||h},safari:function(){return N.webkit()},chrome:function(){return T()||p},windows:function(){return T()||m},osx:function(){return T()||v},linux:function(){return T()||g},iphone:function(){return T()||w},mobile:function(){return T()||w||E||y||x},nativeApp:function(){return T()||S},android:function(){return T()||y},ipad:function(){return T()||E}};o.exports=N},null),m("hasNamePropertyBug",["guid","UserAgent_DEPRECATED"],function(t,i,s,o,u,a,f,l){function h(){var e=n.createElement("form"),t=e.appendChild(n.createElement("input"));return t.name=f(),c=t!==e.elements[t.name],e=t=null,c}function p(){return typeof c=="undefined"?h():c}i.__markCompiled&&i.__markCompiled();var c=l.ie()?r:!1;u.exports=p},null),m("sdk.createIframe",["DOMEventListener","getBlankIframeSrc","guid","hasNamePropertyBug"],function(t,r,i,s,o,u,a,f,l,c){function h(e){e=g("Object","assign",!1,{},e);var t,r=e.name||l(),i=e.root,s=e.style||{border:"none"},o=e.url,u=e.onload,h=e.onerror;c()?t=n.createElement('<iframe name="'+r+'"/>'):(t=n.createElement("iframe"),t.name=r),delete e.style,delete e.name,delete e.url,delete e.root,delete e.onload,delete e.onerror;var p=g("Object","assign",!1,{frameBorder:0,allowTransparency:!0,allowFullscreen:!0,scrolling:"no"},e);p.width&&(t.width=p.width+"px"),p.height&&(t.height=p.height+"px"),delete p.height,delete p.width;for(var d in p)p.hasOwnProperty(d)&&t.setAttribute(d,p[d]);g("Object","assign",!1,t.style,s),t.src=f(),i.appendChild(t);if(u)var v=a.add(t,"load",function(){v.remove(),u()});if(h)var m=a.add(t,"error",function(){m.remove(),h()});return t.src=o,t}r.__markCompiled&&r.__markCompiled(),o.exports=h},null),m("DOMWrapper",[],function(r,i,s,o,u,a){i.__markCompiled&&i.__markCompiled();var f,l,c={setRoot:function(e){f=e},getRoot:function(){return f||n.body},setWindow:function(e){l=e},getWindow:function(){return l||t}};u.exports=c},null),m("eprintf",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u=function(e){var t=g(Array.prototype.slice.call(arguments),"map",!0,function(e){return String(e)}),n=e.split("%s").length-1;if(n!==t.length-1)return u("eprintf args number mismatch: %s",g("JSON","stringify",!1,t));var r=1;return e.replace(/%s/g,function(e){return String(t[r++])})};s.exports=u},null),m("ex",["eprintf"],function(t,n,r,i,s,o,u){n.__markCompiled&&n.__markCompiled();var a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=g(t,"map",!0,function(e){return String(e)}),t[0].split("%s").length!==t.length?a("ex args number mismatch: %s",g("JSON","stringify",!1,t)):a._prefix+g("JSON","stringify",!1,t)+a._suffix};a._prefix="<![EX[",a._suffix="]]>",s.exports=a},null),m("invariant",["ex","sprintf"],function(t,n,i,s,o,u,a,f){n.__markCompiled&&n.__markCompiled();var l=a,c=function(e,t){if(!e){var n;if(t===r)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=["Invariant Violation: "+t];for(var s=2,o=arguments.length;s<o;s++)i.push(arguments[s]);n=new Error(l.apply(null,i)),n.messageWithParams=i}throw n.framesToPop=1,n}};o.exports=c},null),m("sdk.feature",["JSSDKConfig","invariant"],function(t,n,i,s,o,u,a,f){function l(e,t){arguments.length>=2?r:f(0);if(a.features&&e in a.features){var n=a.features[e];return typeof n=="object"&&typeof n.rate=="number"?n.rate&&Math.random()*100<=n.rate?n.value||!0:n.value?null:!1:n}return t}n.__markCompiled&&n.__markCompiled(),o.exports=l},null),m("sdk.getContextType",["sdk.Runtime","sdk.UA"],function(t,n,r,i,s,o,u,a){function f(){return a.nativeApp()?3:a.mobile()?2:u.isEnvironment(u.ENVIRONMENTS.CANVAS)?5:1}n.__markCompiled&&n.__markCompiled(),s.exports=f},null),m("Log",["sprintf"],function(n,r,i,s,o,u,a){function l(t,n){var r=Array.prototype.slice.call(arguments,2),i=a.apply(null,r),s=e.console;s&&c.level>=n&&s[t in s?t:"log"](i)}r.__markCompiled&&r.__markCompiled();var f={DEBUG:3,INFO:2,WARNING:1,ERROR:0},c={level:-1,Level:f,debug:g(l,"bind",!0,null,"debug",f.DEBUG),info:g(l,"bind",!0,null,"info",f.INFO),warn:g(l,"bind",!0,null,"warn",f.WARNING),error:g(l,"bind",!0,null,"error",f.ERROR)};o.exports=c},null),m("sdk.domReady",[],function(r,s,o,u,a,f){function h(){if(!l)return;var e;while(e=l.shift())e();l=null}function p(e){if(l){l.push(e);return}e()}s.__markCompiled&&s.__markCompiled();var l,c="readyState"in n?/loaded|complete/.test(n.readyState):!!n.body;if(!c){l=[],n.addEventListener?(n.addEventListener("DOMContentLoaded",h,!1),e.addEventListener("load",h,!1)):n.attachEvent&&(n.attachEvent("onreadystatechange",h),e.attachEvent("onload",h));if(n.documentElement.doScroll&&e==e.top){var d=function(){try{n.documentElement.doScroll("left")}catch(e){i(d,0);return}h()};d()}}a.exports=p},3),m("sdk.Content",["Log","sdk.UA","sdk.domReady"],function(t,i,s,o,u,a,f,l,c){i.__markCompiled&&i.__markCompiled();var h,p,d={append:function(e,t){t||(h?t=h:(h=t=n.getElementById("fb-root"),t||(f.warn('The "fb-root" div has not been created, auto-creating'),h=t=n.createElement("div"),t.id="fb-root",l.ie()||!n.body?c(function(){n.body.appendChild(t)}):n.body.appendChild(t)),t.className+=" fb_reset"));if(typeof e=="string"){var r=n.createElement("div");return t.appendChild(r).innerHTML=e,r}return t.appendChild(e)},appendHidden:function(e){if(!t){var t=n.createElement("div"),r=t.style;r.position="absolute",r.top="-10000px",r.width=r.height=0,t=d.append(t)}return d.append(e,t)},submitToTarget:function(e,t){var i=n.createElement("form");i.action=e.url,i.target=e.target,i.method=t?"GET":"POST",d.appendHidden(i);for(var s in e.params)if(e.params.hasOwnProperty(s)){var o=e.params[s];if(o!==null&&o!==r){var u=n.createElement("input");u.name=s,u.value=o,i.appendChild(u)}}i.submit(),i.parentNode.removeChild(i)}};u.exports=d},null),m("Miny",[],function(t,n,r,i,s,o){function l(e){for(var t=a.encode.length;t<e;t++){var n=t.toString(32).split("");n[n.length-1]=f[parseInt(n[n.length-1],32)],n=n.join(""),a.encode[t]=n,a.decode[n]=t}return a}function c(e){if(/^$|[~\\]|__proto__/.test(e))return e;var t=e.match(/\w+|\W+/g),n={};for(var r=0;r<t.length;r++)n[t[r]]=(n[t[r]]||0)+1;var i=g("Object","keys",!1,n);i.sort(function(e,t){return n[e]<n[t]?1:n[t]<n[e]?-1:0});var s=l(i.length).encode;for(r=0;r<i.length;r++)n[i[r]]=s[r];var o=[];for(r=0;r<t.length;r++)o[r]=n[t[r]];return[u,i.length].concat(i).concat(o.join("")).join("~")}function h(e){var t=e.split("~");if(t.shift()!=u)return e;var n=parseInt(t.shift(),10),r=t.pop();r=r.match(/[0-9a-v]*[\-w-zA-Z_]/g);var i=t,s=l(n).decode,o=[];for(var a=0;a<r.length;a++)o[a]=i[s[r[a]]];return o.join("")}n.__markCompiled&&n.__markCompiled();var u="Miny1",a={encode:[],decode:{}},f="wxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_".split(""),p={encode:c,decode:h};s.exports=p},null),m("UrlMap",["UrlMapConfig"],function(t,n,r,i,s,o,u){n.__markCompiled&&n.__markCompiled();var a={resolve:function(e,t){var n=typeof t=="undefined"?location.protocol.replace(":",""):t?"https":"http";if(e in u)return n+"://"+u[e];if(typeof t=="undefined"&&e+"_"+n in u)return n+"://"+u[e+"_"+n];if(t!==!0&&e+"_http"in u)return"http://"+u[e+"_http"];if(t!==!1&&e+"_https"in u)return"https://"+u[e+"_https"]}};s.exports=a},null),m("dotAccess",[],function(t,n,r,i,s,o){function u(e,t,n){var r=t.split(".");do{var i=r.shift();e=e[i]||n&&(e[i]={})}while(r.length&&e);return e}n.__markCompiled&&n.__markCompiled(),s.exports=u},null),m("GlobalCallback",["DOMWrapper","dotAccess","guid","wrapFunction"],function(t,n,r,i,s,o,u,a,f,l){n.__markCompiled&&n.__markCompiled();var c,h,p={setPrefix:function(e){c=a(u.getWindow(),e,!0),h=e},create:function(e,t){c||this.setPrefix("__globalCallbacks");var n=f();return c[n]=l(e,"entry",t||"GlobalCallback"),h+"."+n},remove:function(e){var t=e.substring(h.length+1);delete c[t]}};s.exports=p},null),m("insertIframe",["GlobalCallback","getBlankIframeSrc","guid"],function(t,s,o,u,a,f,l,c,h){function p(e){e.id=e.id||h(),e.name=e.name||h();var t=!1,s=!1,o=function(){t&&!s&&(s=!0,e.onload&&e.onload(e.root.firstChild))},u=l.create(o);if(n.attachEvent){var a='<iframe id="'+e.id+'"'+' name="'+e.name+'"'+(e.title?' title="'+e.title+'"':"")+(e.className?' class="'+e.className+'"':"")+' style="border:none;'+(e.width?"width:"+e.width+"px;":"")+(e.height?"height:"+e.height+"px;":"")+'"'+' src="'+c()+'"'+' frameborder="0"'+' scrolling="no"'+' allowtransparency="true"'+' onload="'+u+'()"'+"></iframe>";e.root.innerHTML='<iframe src="'+c()+'"'+' frameborder="0"'+' scrolling="no"'+' style="height:1px"></iframe>',t=!0,i(function(){e.root.innerHTML=a,e.root.firstChild.src=e.url,e.onInsert&&e.onInsert(e.root.firstChild)},0)}else{var f=n.createElement("iframe");f.id=e.id,f.name=e.name,f.onload=o,f.scrolling="no",f.style.border="none",f.style.overflow="hidden",e.title&&(f.title=e.title),e.className&&(f.className=e.className),e.height!==r&&(f.style.height=e.height+"px"),e.width!==r&&(e.width=="100%"?f.style.width=e.width:f.style.width=e.width+"px"),e.root.appendChild(f),t=!0,f.src=e.url,e.onInsert&&e.onInsert(f)}}s.__markCompiled&&s.__markCompiled(),a.exports=p},null),m("sdk.Impressions",["sdk.Content","Miny","QueryString","sdk.Runtime","UrlMap","getBlankIframeSrc","guid","insertIframe"],function(t,n,r,i,s,o,u,a,f,l,c,h,p,d){function v(e){var t=l.getClientID();!e.api_key&&t&&(e.api_key=t),e.kid_directed_site=l.getKidDirectedSite();var n=c.resolve("www",!0)+"/impression.php/"+p()+"/",r=f.appendToUrl(n,e);if(r.length>2e3&&e.payload&&typeof e.payload=="string"){var i=a.encode(e.payload);i&&i.length<e.payload.length&&(e.payload=i,r=f.appendToUrl(n,e))}if(r.length<=2e3){var s=new Image;s.src=r}else{var o=p(),v=u.appendHidden("");d({url:h(),root:v,name:o,className:"fb_hidden fb_invisible",onload:function(){v.parentNode.removeChild(v)}}),u.submitToTarget({url:n,target:o,params:e})}}n.__markCompiled&&n.__markCompiled();var m={log:function(e,t){t.source||(t.source="jssdk"),v({lid:e,payload:g("JSON","stringify",!1,t)})},impression:v};s.exports=m},null),m("Base64",[],function(t,n,r,i,s,o){function a(e){return e=e.charCodeAt(0)<<16|e.charCodeAt(1)<<8|e.charCodeAt(2),String.fromCharCode(u.charCodeAt(e>>>18),u.charCodeAt(e>>>12&63),u.charCodeAt(e>>>6&63),u.charCodeAt(e&63))}function l(e){return e=f.charCodeAt(e.charCodeAt(0)-43)<<18|f.charCodeAt(e.charCodeAt(1)-43)<<12|f.charCodeAt(e.charCodeAt(2)-43)<<6|f.charCodeAt(e.charCodeAt(3)-43),String.fromCharCode(e>>>16,e>>>8&255,e&255)}n.__markCompiled&&n.__markCompiled();var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=">___?456789:;<=_______\0\b	\n\f\r______ !\"#$%&'()*+,-./0123",c={encode:function(e){e=unescape(encodeURI(e));var t=(e.length+2)%3;return e=(e+"\0\0".slice(t)).replace(/[\s\S]{3}/g,a),e.slice(0,e.length+t-2)+"==".slice(t)},decode:function(e){e=e.replace(/[^A-Za-z0-9+\/]/g,"");var t=e.length+3&3;e=(e+"AAA".slice(t)).replace(/..../g,l),e=e.slice(0,e.length+t-3);try{return decodeURIComponent(escape(e))}catch(n){throw new Error("Not valid UTF-8")}},encodeObject:function(e){return c.encode(g("JSON","stringify",!1,e))},decodeObject:function(e){return g("JSON","parse",!1,c.decode(e))},encodeNums:function(e){return String.fromCharCode.apply(String,g(e,"map",!0,function(e){return u.charCodeAt((e|-(e>63))&-(e>0)&63)}))}};s.exports=c},null),m("sdk.SignedRequest",["Base64"],function(t,n,r,i,s,o,u){function a(e){if(!e)return null;var t=e.split(".",2)[1].replace(/\-/g,"+").replace(/\_/g,"/");return u.decodeObject(t)}n.__markCompiled&&n.__markCompiled();var f={parse:a};s.exports=f},null),m("URIRFC3986",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u=new RegExp("^([^:/?#]+:)?(//([^\\\\/?#@]*@)?(\\[[A-Fa-f0-9:.]+\\]|[^\\/?#:]*)(:[0-9]*)?)?([^?#]*)(\\?[^#]*)?(#.*)?"),a={parse:function(e){if(g(e,"trim",!0)==="")return null;var t=e.match(u),n={};return n.uri=t[0]?t[0]:null,n.scheme=t[1]?t[1].substr(0,t[1].length-1):null,n.authority=t[2]?t[2].substr(2):null,n.userinfo=t[3]?t[3].substr(0,t[3].length-1):null,n.host=t[2]?t[4]:null,n.port=t[5]?t[5].substr(1)?parseInt(t[5].substr(1),10):null:null,n.path=t[6]?t[6]:null,n.query=t[7]?t[7].substr(1):null,n.fragment=t[8]?t[8].substr(1):null,n.isGenericURI=n.authority===null&&!!n.scheme,n}};s.exports=a},null),m("createObjectFrom",[],function(t,n,i,s,o,u){function a(e,t){var n={},i=g("Array","isArray",!1,t);t===r&&(t=!0);for(var s=e.length-1;s>=0;s--)n[e[s]]=i?t[s]:t;return n}n.__markCompiled&&n.__markCompiled(),o.exports=a},null),m("URISchemes",["createObjectFrom"],function(t,n,r,i,s,o,u){n.__markCompiled&&n.__markCompiled();var a=u(["fb","fb-ama","fb-messenger","fbcf","fbconnect","fbmobilehome","fbrpc","file","ftp","http","https","mailto","ms-app","intent","itms","itms-apps","itms-services","market","svn+ssh","fbstaging","tel","sms","pebblejs","sftp"]),f={isAllowed:function(e){return e?a.hasOwnProperty(e.toLowerCase()):!0}};s.exports=f},null),m("URIBase",["URIRFC3986","URISchemes","ex","invariant"],function(t,n,i,s,o,u,a,f,l,c){function d(e,t,n,r){if(!t)return!0;if(t instanceof m)return e.setProtocol(t.getProtocol()),e.setDomain(t.getDomain()),e.setPort(t.getPort()),e.setPath(t.getPath()),e.setQueryData(r.deserialize(r.serialize(t.getQueryData()))),e.setFragment(t.getFragment()),e.setForceFragmentSeparator(t.getForceFragmentSeparator()),!0;t=g(t.toString(),"trim",!0);var i=a.parse(t)||{};if(!n&&!f.isAllowed(i.scheme))return!1;e.setProtocol(i.scheme||"");if(!n&&h.test(i.host))return!1;e.setDomain(i.host||""),e.setPort(i.port||""),e.setPath(i.path||"");if(n)e.setQueryData(r.deserialize(i.query)||{});else try{e.setQueryData(r.deserialize(i.query)||{})}catch(s){return!1}e.setFragment(i.fragment||""),i.fragment===""&&e.setForceFragmentSeparator(!0);if(i.userinfo!==null){if(n)throw new Error(l("URI.parse: invalid URI (userinfo is not allowed in a URI): %s",e.toString()));return!1}if(!e.getDomain()&&g(e.getPath(),"indexOf",!0,"\\")!==-1){if(n)throw new Error(l("URI.parse: invalid URI (no domain but multiple back-slashes): %s",e.toString()));return!1}if(!e.getProtocol()&&p.test(t)){if(n)throw new Error(l("URI.parse: invalid URI (unsafe protocol-relative URLs): %s",e.toString()));return!1}return!0}function m(e,t){t?r:c(0),this.$URIBase1=t,this.$URIBase2="",this.$URIBase3="",this.$URIBase4="",this.$URIBase5="",this.$URIBase6="",this.$URIBase7={},this.$URIBase8=!1,d(this,e,!0,t)}n.__markCompiled&&n.__markCompiled();var h=new RegExp("[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]"),p=new RegExp("^(?:[^/]*:|[\\x00-\\x1f]*/[\\x00-\\x1f]*/)"),v=[];m.prototype.setProtocol=function(e){return f.isAllowed(e)?r:c(0),this.$URIBase2=e,this},m.prototype.getProtocol=function(e){return this.$URIBase2},m.prototype.setSecure=function(e){return this.setProtocol(e?"https":"http")},m.prototype.isSecure=function(){return this.getProtocol()==="https"},m.prototype.setDomain=function(e){if(h.test(e))throw new Error(l("URI.setDomain: unsafe domain specified: %s for url %s",e,this.toString()));return this.$URIBase3=e,this},m.prototype.getDomain=function(){return this.$URIBase3},m.prototype.setPort=function(e){return this.$URIBase4=e,this},m.prototype.getPort=function(){return this.$URIBase4},m.prototype.setPath=function(e){return this.$URIBase5=e,this},m.prototype.getPath=function(){return this.$URIBase5},m.prototype.addQueryData=function(e,t){return Object.prototype.toString.call(e)==="[object Object]"?g("Object","assign",!1,this.$URIBase7,e):this.$URIBase7[e]=t,this},m.prototype.setQueryData=function(e){return this.$URIBase7=e,this},m.prototype.getQueryData=function(){return this.$URIBase7},m.prototype.removeQueryData=function(e){g("Array","isArray",!1,e)||(e=[e]);for(var t=0,n=e.length;t<n;++t)delete this.$URIBase7[e[t]];return this},m.prototype.setFragment=function(e){return this.$URIBase6=e,this.setForceFragmentSeparator(!1),this},m.prototype.getFragment=function(){return this.$URIBase6},m.prototype.setForceFragmentSeparator=function(e){return this.$URIBase8=e,this},m.prototype.getForceFragmentSeparator=function(){return this.$URIBase8},m.prototype.isEmpty=function(){return!(this.getPath()||this.getProtocol()||this.getDomain()||this.getPort()||g("Object","keys",!1,this.getQueryData()).length>0||this.getFragment())},m.prototype.toString=function(){var e=this;for(var t=0;t<v.length;t++)e=v[t](e);return e.$URIBase9()},m.prototype.$URIBase9=function(){var e="",t=this.getProtocol();t&&(e+=t+"://");var n=this.getDomain();n&&(e+=n);var r=this.getPort();r&&(e+=":"+r);var i=this.getPath();i?e+=i:e&&(e+="/");var s=this.$URIBase1.serialize(this.getQueryData());s&&(e+="?"+s);var o=this.getFragment();return o?e+="#"+o:this.getForceFragmentSeparator()&&(e+="#"),e},m.registerFilter=function(e){v.push(e)},m.prototype.getOrigin=function(){var e=this.getPort();return this.getProtocol()+"://"+this.getDomain()+(e?":"+e:"")},m.isValidURI=function(e,t){return d(new m(null,t),e,!1,t)},o.exports=m},null),m("sdk.URI",["Assert","QueryString","URIBase"],function(t,n,r,i,s,o,u,a,f){function d(e){u.isString(e,"The passed argument was of invalid type."),c.constructor.call(this,e,p)}n.__markCompiled&&n.__markCompiled();var l,c,h=/\.facebook\.com$/,p={serialize:function(e){return e?a.encode(e):""},deserialize:function(e){return e?a.decode(e):{}}};l=y.inherits(d,f),c=l&&l.prototype,d.prototype.isFacebookURI=function(){return h.test(this.getDomain())},d.prototype.valueOf=function(){return this.toString()},s.exports=d},null),m("sdk.Event",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={SUBSCRIBE:"event.subscribe",UNSUBSCRIBE:"event.unsubscribe",subscribers:function(){return this._subscribersMap||(this._subscribersMap={}),this._subscribersMap},subscribe:function(e,t){var n=this.subscribers();n[e]?g(n[e],"indexOf",true,t)==-1&&n[e].push(t):n[e]=[t],e!=this.SUBSCRIBE&&e!=this.UNSUBSCRIBE&&this.fire(this.SUBSCRIBE,e,n[e])},unsubscribe:function(e,t){var n=this.subscribers()[e];n&&g(n,"forEach",!0,function(e,r){e==t&&n.splice(r,1)}),e!=this.SUBSCRIBE&&e!=this.UNSUBSCRIBE&&this.fire(this.UNSUBSCRIBE,e,n)},monitor:function(e,t){if(!t()){var n=this,r=function(){t.apply(t,arguments)&&n.unsubscribe(e,r)};this.subscribe(e,r)}},clear:function(e){delete this.subscribers()[e]},fire:function(e){var t=Array.prototype.slice.call(arguments,1),n=this.subscribers()[e];n&&g(n,"forEach",!0,function(e){e&&e.apply(this,t)})}};s.exports=u},null),m("Queue",[],function(t,n,r,s,u,a){function l(e){this._opts=y._extends({interval:0,processor:null},e),this._queue=[],this._stopped=!0}n.__markCompiled&&n.__markCompiled();var f={};l.prototype._dispatch=function(e){if(this._stopped||this._queue.length===0)return;if(!this._opts.processor)throw this._stopped=!0,new Error("No processor available");if(this._opts.interval)this._opts.processor.call(this,this._queue.shift()),this._timeout=i(g(this._dispatch,"bind",!0,this),this._opts.interval);else while(this._queue.length)this._opts.processor.call(this,this._queue.shift())},l.prototype.enqueue=function(e){return this._opts.processor&&!this._stopped?this._opts.processor.call(this,e):this._queue.push(e),this},l.prototype.start=function(e){return e&&(this._opts.processor=e),this._stopped=!1,this._dispatch(),this},l.prototype.isStarted=function(){return!this._stopped},l.prototype.dispatch=function(){this._dispatch(!0)},l.prototype.stop=function(e){return this._stopped=!0,e&&o(this._timeout),this},l.prototype.merge=function(e,t){return this._queue[t?"unshift":"push"].apply(this._queue,e._queue),e._queue=[],this._dispatch(),this},l.prototype.getLength=function(){return this._queue.length},l.get=function(e,t){var n;return e in f?n=f[e]:n=f[e]=new l(t),n},l.exists=function(e){return e in f},l.remove=function(e){return delete f[e]},u.exports=l},null),m("JSONRPC",["Log"],function(t,n,r,s,o,u,a){function f(e){this.$JSONRPC1=0,this.$JSONRPC2={},this.remote=g(function(e){return this.$JSONRPC3=e,this.remote},"bind",!0,this),this.local={},this.$JSONRPC4=e}n.__markCompiled&&n.__markCompiled(),f.prototype.stub=function(e){this.remote[e]=g(function(){var t={jsonrpc:"2.0",method:e};for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];typeof r[r.length-1]=="function"&&(t.id=++this.$JSONRPC1,this.$JSONRPC2[t.id]=r.pop()),t.params=r,this.$JSONRPC4(g("JSON","stringify",!1,t),this.$JSONRPC3||{method:e})},"bind",!0,this)},f.prototype.read=function(e,t){var n=g("JSON","parse",!1,e),r=n.id;if(!n.method){if(!this.$JSONRPC2[r]){a.warn("Could not find callback %s",r);return}var s=this.$JSONRPC2[r];delete this.$JSONRPC2[r],delete n.id,delete n.jsonrpc,s(n);return}var o=this,u=this.local[n.method],f;r?f=function(e,n){var s={jsonrpc:"2.0",id:r};s[e]=n,i(function(){o.$JSONRPC4(g("JSON","stringify",!1,s),t)},0)}:f=function(){};if(!u){a.error('Method "%s" has not been defined',n.method),f("error",{code:-32601,message:"Method not found",data:n.method});return}n.params.push(g(f,"bind",!0,null,"result")),n.params.push(g(f,"bind",!0,null,"error"));try{var l=u.apply(t||null,n.params);typeof l!="undefined"&&f("result",l)}catch(c){a.error("Invokation of RPC method %s resulted in the error: %s",n.method,c.message),f("error",{code:-32603,message:"Internal error",data:c.message})}},o.exports=f},null),m("sdk.RPC",["Assert","JSONRPC","Queue"],function(t,n,r,i,s,o,u,a,f){n.__markCompiled&&n.__markCompiled();var l=new f,c=new a(function(e){l.enqueue(e)}),h={local:c.local,remote:c.remote,stub:g(c.stub,"bind",!0,c),setInQueue:function(e){u.isInstanceOf(f,e),e.start(function(e){c.read(e)})},getOutQueue:function(){return l}};s.exports=h},null),m("sdk.Scribe",["QueryString","sdk.Runtime","UrlMap"],function(t,n,r,i,s,o,u,a,f){function l(e,t){typeof t.extra=="object"&&(t.extra.revision=a.getRevision()),(new Image).src=u.appendToUrl(f.resolve("www",!0)+"/common/scribe_endpoint.php",{c:e,m:g("JSON","stringify",!1,t)})}n.__markCompiled&&n.__markCompiled();var c={log:l};s.exports=c},null),m("emptyFunction",[],function(t,n,r,i,s,o){function u(e){return function(){return e}}function a(){}n.__markCompiled&&n.__markCompiled(),a.thatReturns=u,a.thatReturnsFalse=u(!1),a.thatReturnsTrue=u(!0),a.thatReturnsNull=u(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},s.exports=a},null),m("htmlSpecialChars",[],function(t,n,r,i,s,o){function h(e){return typeof e=="undefined"||e===null||!e.toString?"":e===!1?"0":e===!0?"1":e.toString().replace(u,"&amp;").replace(l,"&quot;").replace(c,"&#039;").replace(a,"&lt;").replace(f,"&gt;")}n.__markCompiled&&n.__markCompiled();var u=/&/g,a=/</g,f=/>/g,l=/"/g,c=/'/g;s.exports=h},null),m("Flash",["DOMEventListener","DOMWrapper","QueryString","UserAgent_DEPRECATED","guid","htmlSpecialChars"],function(n,r,i,s,o,u,a,f,l,c,h,p){function g(e){var t=m.getElementById(e);t&&t.parentNode.removeChild(t),delete d[e]}function b(){for(var e in d)d.hasOwnProperty(e)&&g(e)}function w(e){return e.replace(/\d+/g,function(e){return"000".substring(e.length)+e})}function E(t){v||(c.ie()>=9&&a.add(e,"unload",b),v=!0),d[t]=t}r.__markCompiled&&r.__markCompiled();var d={},v,m=f.getWindow().document,S={embed:function(e,t,n,r){var i=h();e=p(e).replace(/&amp;/g,"&"),n=y._extends({allowscriptaccess:"always",flashvars:r,movie:e},n),typeof n.flashvars=="object"&&(n.flashvars=l.encode(n.flashvars));var s=[];for(var o in n)n.hasOwnProperty(o)&&n[o]&&s.push('<param name="'+p(o)+'" value="'+p(n[o])+'">');var u=t.appendChild(m.createElement("span")),a="<object "+(c.ie()?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':'type="application/x-shockwave-flash"')+'data="'+e+'" '+(n.height?'height="'+n.height+'" ':"")+(n.width?'width="'+n.width+'" ':"")+'id="'+i+'">'+s.join("")+"</object>";u.innerHTML=a;var f=u.firstChild;return E(i),f},remove:g,getVersion:function(){var e="Shockwave Flash",t="application/x-shockwave-flash",n="ShockwaveFlash.ShockwaveFlash",r;if(navigator.plugins&&typeof navigator.plugins[e]=="object"){var i=navigator.plugins[e].description;i&&navigator.mimeTypes&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(r=i.match(/\d+/g))}if(!r)try{r=(new ActiveXObject(n)).GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),r=Array.prototype.slice.call(r,1)}catch(s){}return r},getVersionString:function(){var e=S.getVersion();return e?e.join("."):""},checkMinVersion:function(e){var t=S.getVersion();return t?w(t.join("."))>=w(e):!1},isAvailable:function(){return!!S.getVersion()}};o.exports=S},null),m("XDM",["DOMEventListener","DOMWrapper","emptyFunction","Flash","GlobalCallback","guid","Log","UserAgent_DEPRECATED","wrapFunction"],function(t,n,r,s,u,a,f,l,c,h,p,d,v,m,g){function E(e){var t={},n=e.length,r=b.transports;while(n--)t[e[n]]=1;n=r.length;while(n--){var i=r[n],s=y[i];if(!t[i]&&s.isAvailable())return i}}n.__markCompiled&&n.__markCompiled();var y={},b={transports:[]},w=l.getWindow(),S={register:function(e,t){v.debug("Registering %s as XDM provider",e),b.transports.push(e),y[e]=t},create:function(e){if(!e.whenReady&&!e.onMessage)throw v.error("An instance without whenReady or onMessage makes no sense"),new Error("An instance without whenReady or onMessage makes no sense");e.channel||(v.warn("Missing channel name, selecting at random"),e.channel=d()),e.whenReady||(e.whenReady=c),e.onMessage||(e.onMessage=c);var t=e.transport||E(e.blacklist||[]),n=y[t];if(n&&n.isAvailable())return v.debug("%s is available",t),n.init(e),t}};S.register("flash",function(){var e=!1,t,n=!1,r=15e3,s;return{isAvailable:function(){return h.checkMinVersion("8.0.24")},init:function(u){v.debug("init flash: "+u.channel);var a={send:function(e,n,r,i){v.debug("sending to: %s (%s)",n,i),t.postMessage(e,n,i)}};if(e){u.whenReady(a);return}var f=u.root.appendChild(w.document.createElement("div")),l=p.create(function(){p.remove(l),o(s),v.info("xdm.swf called the callback");var e=p.create(function(e,t){e=decodeURIComponent(e),t=decodeURIComponent(t),v.debug("received message %s from %s",e,t),u.onMessage(e,t)},"xdm.swf:onMessage");t.init(u.channel,e),u.whenReady(a)},"xdm.swf:load");t=h.embed(u.flashUrl,f,null,{protocol:location.protocol.replace(":",""),host:location.host,callback:l,log:n}),s=i(function(){v.warn("The Flash component did not load within %s ms - verify that the container is not set to hidden or invisible using CSS as this will cause some browsers to not load the components",r)},r),e=!0}}}());var x=/\.facebook\.com(\/|$)/;S.register("postmessage",function(){var e=!1;return{isAvailable:function(){return!!w.postMessage},init:function(t){v.debug("init postMessage: "+t.channel);var n="_FB_"+t.channel,r={send:function(e,t,n,r){if(w===n)throw v.error("Invalid windowref, equal to window (self)"),new Error;v.debug("sending to: %s (%s)",t,r);var s=function(){n.postMessage("_FB_"+r+e,t)};m.ie()==8||m.ieCompatibilityMode()?i(s,0):s()}};if(e){t.whenReady(r);return}f.add(w,"message",g(function(e){var r=e.data,i=e.origin||"native";if(!/^(https?:\/\/|native$)/.test(i)){v.debug("Received message from invalid origin type: %s",i);return}if(i!=="native"&&!x.test(location.hostname)&&!x.test(e.origin))return;if(typeof r!="string"){v.warn("Received message of type %s from %s, expected a string",typeof r,i);return}v.debug("received message %s from %s",r,i),r.substring(0,n.length)==n&&(r=r.substring(n.length)),t.onMessage(r,i)},"entry","onMessage")),t.whenReady(r),e=!0}}}()),u.exports=S},null),m("isFacebookURI",[],function(t,n,r,i,s,o){function f(e){return u||(u=new RegExp("(^|\\.)facebook\\.com$","i")),e.isEmpty()&&e.toString()!=="#"?!1:!e.getDomain()&&!e.getProtocol()?!0:g(a,"indexOf",!0,e.getProtocol())!==-1&&u.test(e.getDomain())}n.__markCompiled&&n.__markCompiled();var u=null,a=["http","https"];f.setRegex=function(e){u=e},s.exports=f},null),m("sdk.XD",["sdk.Content","sdk.Event","Log","QueryString","Queue","sdk.RPC","sdk.Runtime","sdk.Scribe","sdk.URI","UrlMap","JSSDKXDConfig","XDM","isFacebookURI","sdk.createIframe","sdk.feature","guid"],function(t,r,s,o,u,a,f,l,c,h,p,d,v,m,y,b,w,E,S,x,T,N){function z(e){c.info("Remote XD can talk to facebook.com (%s)",e),v.setEnvironment(e==="canvas"?v.ENVIRONMENTS.CANVAS:v.ENVIRONMENTS.PAGETAB)}function W(e,t){if(!t)throw c.error("No senderOrigin"),new Error;var n=/^https?/.exec(t)[0];switch(e.xd_action){case"proxy_ready":var r,i;n=="https"?(r=L,i=O):(r=k,i=A),e.registered&&(z(e.registered),C=r.merge(C)),c.info("Proxy ready, starting queue %s containing %s messages",n+"ProxyQueue",r.getLength()),r.start(function(e){F.send(typeof e=="string"?e:h.encode(e),t,i.contentWindow,B+"_"+n)});break;case"plugin_ready":c.info("Plugin %s ready, protocol: %s",e.name,n),R[e.name]={protocol:n};if(p.exists(e.name)){var s=p.get(e.name);c.debug("Enqueuing %s messages for %s in %s",s.getLength(),e.name,n+"ProxyQueue"),(n=="https"?L:k).merge(s)}}e.data&&X(e.data,t)}function X(e,t){if(t&&t!=="native"&&!S(new y(t)))return;if(typeof e=="string"){if(/^FB_RPC:/.test(e)){U.enqueue(e.substring(7));return}if(e.substring(0,1)=="{")try{e=g("JSON","parse",!1,e)}catch(n){c.warn("Failed to decode %s as JSON",e);return}else e=h.decode(e)}t||e.xd_sig==M&&(t=e.xd_origin);if(e.xd_action){W(e,t);return}e.access_token&&v.setSecure(/^https/.test(j));if(e.cb){var r=J._callbacks[e.cb];J._forever[e.cb]||delete J._callbacks[e.cb],r&&r(e)}}function V(e,t){if(e=="facebook")t.relation="parent.parent",C.enqueue(t);else{t.relation='parent.frames["'+e+'"]';var n=R[e];n?(c.debug("Enqueuing message for plugin %s in %s",e,n.protocol+"ProxyQueue"),(n.protocol=="https"?L:k).enqueue(t)):(c.debug("Buffering message for plugin %s",e),p.get(e).enqueue(t))}}function $(e){if(I)return;var t=f.appendHidden(n.createElement("div")),r=E.create({blacklist:null,root:t,channel:B,flashUrl:w.Flash.path,whenReady:function(n){F=n;var i={channel:B,origin:location.protocol+"//"+location.host,transport:r,xd_name:e},s="#"+h.encode(i);v.getSecure()!==!0&&(A=x({url:P+s,name:"fb_xdm_frame_http",id:"fb_xdm_frame_http",root:t,"aria-hidden":!0,title:q,tabindex:-1})),O=x({url:H+s,name:"fb_xdm_frame_https",id:"fb_xdm_frame_https",root:t,"aria-hidden":!0,title:q,tabindex:-1})},onMessage:X});r||m.log("jssdk_error",{appId:v.getClientID(),error:"XD_TRANSPORT",extra:{message:"Failed to create a valid transport"}}),I=!0}r.__markCompiled&&r.__markCompiled();var C=new p,k=new p,L=new p,A,O,M=N(),_=w.useCdn?"cdn":"www",D=T("use_bundle",!1)?w.XdBundleUrl:w.XdUrl,P=b.resolve(_,!1)+D,H=b.resolve(_,!0)+D,B=N(),j=location.protocol+"//"+location.host,F,I=!1,q="Facebook Cross Domain Communication Frame",R={},U=new p;d.setInQueue(U),d.getOutQueue().start(function(e){V("facebook","FB_RPC:"+e)});var J={rpc:d,_callbacks:{},_forever:{},_channel:B,_origin:j,onMessage:X,recv:X,init:$,sendToFacebook:V,inform:function(e,t,n,r){V("facebook",{method:e,params:g("JSON","stringify",!1,t||{}),behavior:r||"p",relation:n})},handler:function(e,t,n,r){var i="#"+h.encode({cb:this.registerCallback(e,n,r),origin:j+"/"+B,domain:location.hostname,relation:t||"opener"});return(location.protocol=="https:"?H:P)+i},registerCallback:function(e,t,n){return n=n||N(),t&&(J._forever[n]=!0),J._callbacks[n]=e,n}};l.subscribe("init:post",function(e){$(e.xdProxyName);var t=T("xd_timeout",!1);t&&i(function(){var e=O&&!!A==k.isStarted()&&!!O==L.isStarted();e||m.log("jssdk_error",{appId:v.getClientID(),error:"XD_INITIALIZATION",extra:{message:"Failed to initialize in "+t+"ms"}})},t)}),u.exports=J},null),m("sdk.Auth",["sdk.Cookie","sdk.createIframe","DOMWrapper","sdk.feature","sdk.getContextType","guid","sdk.Impressions","Log","ObservableMixin","sdk.Runtime","sdk.SignedRequest","UrlMap","sdk.URI","sdk.XD"],function(t,n,r,s,u,a,f,l,c,h,p,d,v,m,y,b,w,E,S,x){function k(e,t){var n=b.getUserID(),r="";if(e)if(e.userID)r=e.userID;else if(e.signedRequest){var i=w.parse(e.signedRequest);i&&i.user_id&&(r=i.user_id)}var s=b.getLoginStatus(),o=s==="unknown"&&e||b.getUseCookie()&&b.getCookieUserID()!==r,u=n&&!e,a=e&&n&&n!=r,f=e!=T,l=t!=(s||"unknown");b.setLoginStatus(t),b.setAccessToken(e&&e.accessToken||null),b.setUserID(r),T=e;var c={authResponse:e,status:t};return(u||a)&&C.inform("logout",c),(o||a)&&C.inform("login",c),f&&C.inform("authresponse.change",c),l&&C.inform("status.change",c),c}function L(){return T}function A(e,t,n){return function(r){var i;if(r&&r.access_token){var s=w.parse(r.signed_request);t={accessToken:r.access_token,userID:s.user_id,expiresIn:parseInt(r.expires_in,10),signedRequest:r.signed_request},r.granted_scopes&&(t.grantedScopes=r.granted_scopes);if(b.getUseCookie()){var o=t.expiresIn===0?0:g("Date","now",!1)+t.expiresIn*1e3,u=f.getDomain();!u&&r.base_domain&&f.setDomain("."+r.base_domain),f.setSignedRequestCookie(r.signed_request,o)}i="connected",k(t,i)}else if(n==="logout"||n==="login_status")r.error&&r.error==="not_authorized"?i="not_authorized":i="unknown",k(null,i),b.getUseCookie()&&f.clearSignedRequestCookie();return r&&r.https==1&&b.setSecure(!0),e&&e({authResponse:t,status:b.getLoginStatus()}),t}}function O(e){var t,n=g("Date","now",!1);N&&(o(N),N=null);var r=A(e,T,"login_status"),s=(new S(E.resolve("www",!0)+"/connect/ping")).setQueryData({client_id:b.getClientID(),response_type:"token,signed_request,code",domain:location.hostname,origin:p(),redirect_uri:x.handler(function(e){if(h("e2e_ping_tracking",!0)){var s={init:n,close:g("Date","now",!1),method:"ping"};m.debug("e2e: %s",g("JSON","stringify",!1,s)),v.log(114,{payload:s})}t.parentNode.removeChild(t),r(e)&&(N=i(function(){O(function(){})},12e5))},"parent"),sdk:"joey",kid_directed_site:b.getKidDirectedSite()});t=l({root:c.getRoot(),name:d(),url:s.toString(),style:{display:"none"}})}function _(e,t){if(!b.getClientID()){m.warn("FB.getLoginStatus() called before calling FB.init().");return}if(e){if(!t&&M=="loaded"){e({status:b.getLoginStatus(),authResponse:L()});return}C.subscribe("FB.loginStatus",e)}if(!t&&M=="loading")return;M="loading";var n=function(e){M="loaded",C.inform("FB.loginStatus",e),C.clearSubscribers("FB.loginStatus")};O(n)}n.__markCompiled&&n.__markCompiled();var T,N,C=new y,M;g("Object","assign",!1,C,{getLoginStatus:_,fetchLoginStatus:O,setAuthResponse:k,getAuthResponse:L,parseSignedRequest:w.parse,xdResponseWrapper:A}),u.exports=C},null),m("toArray",["invariant"],function(t,n,i,s,o,u,a){function f(e){var t=e.length;!!g("Array","isArray",!1,e)||typeof e!="object"&&typeof e!="function"?a(0):r,typeof t!="number"?a(0):r,t===0||t-1 in e?r:a(0);if(e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}var i=Array(t);for(var s=0;s<t;s++)i[s]=e[s];return i}n.__markCompiled&&n.__markCompiled(),o.exports=f},null),m("createArrayFromMixed",["toArray"],function(t,n,r,i,s,o,u){function a(e){return!!e&&(typeof e=="object"||typeof e=="function")&&"length"in e&&!("setInterval"in e)&&typeof e.nodeType!="number"&&(g("Array","isArray",!1,e)||"callee"in e||"item"in e)}function f(e){return a(e)?g("Array","isArray",!1,e)?e.slice():u(e):[e]}n.__markCompiled&&n.__markCompiled(),s.exports=f},null),m("sdk.DOM",["Assert","sdk.UA","createArrayFromMixed","sdk.domReady"],function(r,i,s,o,u,a,f,l,c,h){function d(e,t){var n=e.getAttribute(t)||e.getAttribute(t.replace(/_/g,"-"))||e.getAttribute(t.replace(/-/g,"_"))||e.getAttribute(t.replace(/-/g,""))||e.getAttribute(t.replace(/_/g,""))||e.getAttribute("data-"+t)||e.getAttribute("data-"+t.replace(/_/g,"-"))||e.getAttribute("data-"+t.replace(/-/g,"_"))||e.getAttribute("data-"+t.replace(/-/g,""))||e.getAttribute("data-"+t.replace(/_/g,""));return n?String(n):null}function v(e,t){var n=d(e,t);return n?/^(true|1|yes|on)$/.test(n):null}function m(e,t){f.isTruthy(e,"element not specified"),f.isString(t);try{return String(e[t])}catch(n){throw new Error("Could not read property "+t+" : "+n.message)}}function y(e,t){f.isTruthy(e,"element not specified"),f.isString(t);try{e.innerHTML=t}catch(n){throw new Error("Could not set innerHTML : "+n.message)}}function b(e,t){f.isTruthy(e,"element not specified"),f.isString(t);var n=" "+m(e,"className")+" ";return g(n,"indexOf",!0," "+t+" ")>=0}function w(e,t){f.isTruthy(e,"element not specified"),f.isString(t),b(e,t)||(e.className=m(e,"className")+" "+t)}function E(e,t){f.isTruthy(e,"element not specified"),f.isString(t);var n=new RegExp("\\s*"+t,"g");e.className=g(m(e,"className").replace(n,""),"trim",!0)}function S(e,t,r){f.isString(e),t=t||n.body,r=r||"*";if(t.querySelectorAll)return c(t.querySelectorAll(r+"."+e));var i=t.getElementsByTagName(r),s=[];for(var o=0,u=i.length;o<u;o++)b(i[o],e)&&(s[s.length]=i[o]);return s}function x(e,t){f.isTruthy(e,"element not specified"),f.isString(t),t=t.replace(/-(\w)/g,function(e,t){return t.toUpperCase()});var r=e.currentStyle||n.defaultView.getComputedStyle(e,null),i=r[t];return/backgroundPosition?/.test(t)&&/top|left/.test(i)&&(i="0%"),i}function T(e,t,n){f.isTruthy(e,"element not specified"),f.isString(t),t=t.replace(/-(\w)/g,function(e,t){return t.toUpperCase()}),e.style[t]=n}function N(e,t){var r=!0;for(var i=0,s;s=t[i++];)s in p||(r=!1,p[s]=!0);if(r)return;if(l.ie()<11)try{n.createStyleSheet().cssText=e}catch(o){n.styleSheets[0]&&(n.styleSheets[0].cssText+=e)}else{var u=n.createElement("style");u.type="text/css",u.textContent=e,n.getElementsByTagName("head")[0].appendChild(u)}}function C(){var t=n.documentElement&&n.compatMode=="CSS1Compat"?n.documentElement:n.body;return{scrollTop:t.scrollTop||n.body.scrollTop,scrollLeft:t.scrollLeft||n.body.scrollLeft,width:e.innerWidth?e.innerWidth:t.clientWidth,height:e.innerHeight?e.innerHeight:t.clientHeight}}function k(e){f.isTruthy(e,"element not specified");var t=0,n=0;do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return{x:t,y:n}}i.__markCompiled&&i.__markCompiled();var p={},L={containsCss:b,addCss:w,removeCss:E,getByClass:S,getStyle:x,setStyle:T,getAttr:d,getBoolAttr:v,getProp:m,html:y,addCssRules:N,getViewportInfo:C,getPosition:k,ready:h};u.exports=L},null),m("sdk.ErrorHandling",["ManagedError","sdk.Runtime","sdk.Scribe","sdk.UA","sdk.feature","wrapFunction"],function(n,r,o,u,a,f,l,c,h,p,d,v){function b(e){var t=e._originalError;throw delete e._originalError,h.log("jssdk_error",{appId:c.getClientID(),error:e.name||e.message,extra:e}),t}function w(e){var t={line:e.lineNumber||e.line,message:e.message,name:e.name,script:e.fileName||e.sourceURL||e.script,stack:e.stackTrace||e.stack};t._originalError=e,p.chrome()&&/([\w:\.\/]+\.js):(\d+)/.test(e.stack)&&(t.script=RegExp.$1,t.line=parseInt(RegExp.$2,10));for(var n in t)t[n]==null&&delete t[n];return t}function E(e,t){return function(){if(!m)return e.apply(this,arguments);try{return y=t,e.apply(this,arguments)}catch(n){if(n instanceof l)throw n;var r=w(n);r.entry=t;var i=g(Array.prototype.slice.call(arguments),"map",!0,function(e){var t=Object.prototype.toString.call(e);return/^\[object (String|Number|Boolean|Object|Date)\]$/.test(t)?e:e.toString()});r.args=g("JSON","stringify",!1,i).substring(0,200),b(r)}finally{y=""}}}function S(t){return t.__wrapper||(t.__wrapper=function(){try{return t.apply(this,arguments)}catch(n){return e.setTimeout(function(){throw n},0),!1}}),t.__wrapper}function x(e,t){return function(n,r){var i=t+":"+(y||"[global]")+":"+(n.name||"[anonymous]"+(arguments.callee.caller.name?"("+arguments.callee.caller.name+")":""));return e(v(n,"entry",i),r)}}r.__markCompiled&&r.__markCompiled();var m=d("error_handling",!1),y="";m&&(i=x(i,"setTimeout"),s=x(s,"setInterval"),v.setWrapper(E,"entry"));var T={guard:E,unguard:S};a.exports=T},null),m("sdk.Insights",["sdk.Impressions"],function(t,n,r,i,s,o,u){n.__markCompiled&&n.__markCompiled();var a={TYPE:{NOTICE:"notice",WARNING:"warn",ERROR:"error"},CATEGORY:{DEPRECATED:"deprecated",APIERROR:"apierror"},log:function(e,t,n){var r={source:"jssdk",type:e,category:t,payload:n};u.log(113,r)},impression:u.impression};s.exports=a},null),m("FB",["sdk.Auth","JSSDKCssConfig","dotAccess","sdk.domReady","sdk.DOM","sdk.ErrorHandling","sdk.Content","DOMWrapper","GlobalCallback","sdk.Insights","Log","sdk.Runtime","sdk.Scribe","JSSDKConfig"],function(r,i,s,o,u,a,f,l,c,h,p,d,v,m,y,b,w,E,S,x){function O(e,t,n,r){var i;/^_/.test(n)?i="hide":N&&!N[t]&&(i=C);switch(i){case"hide":return;case"stub":return function(){w.warn("The method FB.%s has been removed from the JS SDK.",t)};default:return d.guard(function(){function n(e){return g("Array","isArray",!1,e)?g(e,"map",!0,n):e&&typeof e=="object"&&e.__wrapped?e.__wrapped:typeof e=="function"&&/^function/.test(e.toString())?d.unguard(e):e}i==="warn"&&(w.warn("The method FB.%s is not officially supported by Facebook and access to it will soon be removed.",t),k.hasOwnProperty(t)||(b.log(b.TYPE.WARNING,b.CATEGORY.DEPRECATED,"FB."+t),S.log("jssdk_error",{appId:E.getClientID(),error:"Private method used",extra:{args:t}}),k[t]=!0));var s=g(Array.prototype.slice.call(arguments),"map",!0,n),o=e.apply(r,s),u,a=!0;if(o&&typeof o=="object"){u=g("Object","create",!1,o),u.__wrapped=o;for(var f in o){var l=o[f];if(typeof l!="function"||f==="constructor")continue;a=!1,u[f]=O(l,t+":"+f,f,o)}}return a?a?o:u:u},t)}}function M(e,t){var n=e?c(T,e,!0):T;g(g("Object","keys",!1,t),"forEach",!0,function(r){var i=t[r];if(typeof i=="function"){var s=(e?e+".":"")+r,o=O(i,s,r,t);o&&(n[r]=o)}else typeof i=="object"&&(s=(e?e+".":"")+r,N&&N[s]&&(n[r]=i))})}i.__markCompiled&&i.__markCompiled();var T,N,C=c(x,"api.mode"),k={};T=e.FB={};var L={};w.level=0,y.setPrefix("FB.__globalCallbacks");var A=n.createElement("div");m.setRoot(A),h(function(){w.info("domReady"),v.appendHidden(A),l.rules&&p.addCssRules(l.rules,l.components)}),E.subscribe("AccessToken.change",function(e){!e&&E.getLoginStatus()==="connected"&&f.getLoginStatus(null,!0)}),c(x,"api.whitelist.length")&&(N={},g(x.api.whitelist,"forEach",!0,function(e){N[e]=1})),E.setSecure(function(){var t=/iframe_canvas|app_runner/.test(e.name),n=/dialog/.test(e.name);if(location.protocol=="https:"&&(e==top||!t&&!n))return!0;if(/_fb_https?/.test(e.name))return g(e.name,"indexOf",true,"_fb_https")!=-1}()),g("Object","assign",!1,L,{provide:M}),u.exports=L},null),m("ArgumentError",["ManagedError"],function(t,n,r,i,s,o,u){function a(e,t){u.prototype.constructor.apply(this,arguments)}n.__markCompiled&&n.__markCompiled(),a.prototype=new u,a.prototype.constructor=a,s.exports=a},null),m("CORSRequest",["wrapFunction","QueryString"],function(n,r,i,s,o,u,a,f){function l(e,n){if(!t.XMLHttpRequest)return null;var r=new XMLHttpRequest,i=function(){};if("withCredentials"in r)r.open(e,n,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded");else{if(!t.XDomainRequest)return null;r=new XDomainRequest;try{r.open(e,n),r.onprogress=r.ontimeout=i}catch(s){return null}}var o={send:function(e){r.send(e)}},u=a(function(){u=i,"onload"in o&&o.onload(r)},"entry","XMLHttpRequest:load"),f=a(function(){f=i,"onerror"in o&&o.onerror(r)},"entry","XMLHttpRequest:error");return r.onload=function(){u()},r.onerror=function(){f()},r.onreadystatechange=function(){r.readyState==4&&(r.status==200?u():f())},o}function c(e,t,n,r){n.suppress_http_code=1;var i=f.encode(n);t!="post"&&(e=f.appendToUrl(e,i),i="");var s=l(t,e);return s?(s.onload=function(e){r(g("JSON","parse",!1,e.responseText))},s.onerror=function(e){e.responseText?r(g("JSON","parse",!1,e.responseText)):r({error:{type:"http",message:"unknown error",status:e.status}})},s.send(i),!0):!1}r.__markCompiled&&r.__markCompiled();var h={execute:c};o.exports=h},null),m("FlashRequest",["DOMWrapper","Flash","GlobalCallback","QueryString","Queue"],function(t,n,r,i,s,o,u,a,f,l,c){function m(){if(!d)throw new Error("swfUrl has not been set");var e=f.create(function(){h.start(function(e){var t=v.execute(e.method,e.url,e.body);if(!t)throw new Error("Could create request");p[t]=e.callback})}),t=f.create(function(e,t,n){var r;try{r=g("JSON","parse",!1,decodeURIComponent(n))}catch(i){r={error:{type:"SyntaxError",message:i.message,status:t,raw:n}}}p[e](r),delete p[e]});v=a.embed(d,u.getRoot(),null,{log:!1,initCallback:e,requestCallback:t})}function y(e,t,n,r){n.suppress_http_code=1,n.method||(n.method=t);var i=l.encode(n);t==="get"&&e.length+i.length<2e3?(e=l.appendToUrl(e,i),i=""):t="post";if(!h){if(!a.isAvailable())return!1;h=new c,m()}return h.enqueue({method:t,url:e,body:i,callback:r}),!0}n.__markCompiled&&n.__markCompiled();var h,p={},d,v,b={setSwfUrl:function(e){d=e},execute:y};s.exports=b},null),m("flattenObject",[],function(t,n,i,s,o,u){function a(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(null===i||r===i)continue;typeof i=="string"?t[n]=i:t[n]=g("JSON","stringify",!1,i)}return t}n.__markCompiled&&n.__markCompiled(),o.exports=a},null),m("JSONPRequest",["DOMWrapper","GlobalCallback","QueryString"],function(t,r,s,o,u,a,f,l,c){function p(e,t,r,s){var o=n.createElement("script"),u=function(e){u=function(){},l.remove(r.callback),s(e),o.parentNode.removeChild(o)};r.callback=l.create(u),r.method||(r.method=t),e=c.appendToUrl(e,r);if(e.length>h)return l.remove(r.callback),!1;o.onerror=function(){u({error:{type:"http",message:"unknown error"}})};var a=function(){i(function(){u({error:{type:"http",message:"unknown error"}})},0)};return o.addEventListener?o.addEventListener("load",a,!1):o.onreadystatechange=function(){/loaded|complete/.test(this.readyState)&&a()},o.src=e,f.getRoot().appendChild(o),!0}r.__markCompiled&&r.__markCompiled();var h=2e3,d={execute:p,MAX_QUERYSTRING_LENGTH:h};u.exports=d},null),m("ApiClient",["ArgumentError","Assert","CORSRequest","FlashRequest","flattenObject","JSONPRequest","Log","ObservableMixin","QueryString","sprintf","sdk.URI","UrlMap","ApiClientConfig","invariant"],function(t,n,s,u,a,f,l,c,h,p,d,v,m,y,b,w,E,S,x,T){function q(e,t,n,r){var i=j!==0&&H>=j;if(i){B.push(function(){return q(e,t,n,r)}),$.inform("request.queued",e,t,n);return}H++,k&&(n=g("Object","assign",!1,{},k,n)),n.access_token=n.access_token||N,n.pretty=n.pretty||0,n=d(n);var s={jsonp:v,cors:h,flash:p},o;n.transport?(o=[n.transport],delete n.transport):o=M;for(var u=0;u<o.length;u++){var a=s[o[u]],f=g("Object","assign",!1,{},n);if(a.execute(e,t,f,r))return}r({error:{type:"no-transport",message:"Could not find a usable transport for request"}})}function R(e,t,n,r,i,s){s&&s.error&&$.inform("request.error",t,n,r,s,g("Date","now",!1)-i),$.inform("request.complete",t,n,r,s,g("Date","now",!1)-i),H--,e&&e(s);var o=B.length>0&&H<j;if(o){var u=B.shift();u()}}function U(e){var t=e.shift();c.isString(t,"Invalid path"),!/^https?/.test(t)&&t.charAt(0)!=="/"&&(t="/"+t);var n,r={};try{n=new E(t)}catch(i){throw new l(i.message,i)}g(e,"forEach",!0,function(e){return r[typeof e]=e});var s=(r.string||"get").toLowerCase();c.isTrue(A.hasOwnProperty(s),w("Invalid method passed to ApiClient: %s",s));var o=r["function"];o||m.warn("No callback passed to the ApiClient"),r.object&&n.addQueryData(d(r.object));var u=n.getQueryData();return u.method=s,{uri:n,callback:o,params:u}}function z(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=U(t),i=r.uri,s=r.callback,o=r.params,u=o.method;J(i,u)&&(u="post");var a=i.getProtocol()&&i.getDomain()?i.setQueryData({}).toString():S.resolve("graph")+i.getPath();$.inform("request.prepare",a,o),q(a,u=="get"?"get":"post",o,g(R,"bind",!0,null,s,i.getPath(),u,o,g("Date","now",!1)))}function W(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=U(t),s=r.uri,u=r.callback,a=r.params.method,f={method:a,relative_url:s.removeQueryData("method").toString()};a.toLowerCase()=="post"&&(f.body=b.encode(s.getQueryData()),f.relative_url=s.setQueryData({}).toString()),_.push(f),D.push(u),_.length==F?(P&&o(P),X()):P||(P=i(X,0))}function X(){_.length>0?r:T(0),_.length!==D.length?T(0):r;var e=_,t=D;_=[],D=[],P=null;if(e.length===1){var n=e[0],i=t[0],s=n.body?b.decode(n.body):null;z(n.relative_url,n.method,s,i);return}z("/","POST",{batch:e,include_headers:!1,batch_app_id:C||I},function(e){g("Array","isArray",!1,e)?g(e,"forEach",!0,function(e,n){t[n](g("JSON","parse",!1,e.body))}):g(t,"forEach",!0,function(e){return e({error:{message:"Fatal: batch call failed."}})})})}function V(e,t){c.isObject(e),c.isString(e.method,"method missing"),t||m.warn("No callback passed to the ApiClient");var n=e.method.toLowerCase().replace(".","_");e.format="json-strings",e.api_key=C;var r=n in O?"api_read":"api",i=S.resolve(r)+"/restserver.php",s=g(R,"bind",!0,null,t,"/restserver.php","get",e,g("Date","now",!1));q(i,"get",e,s)}function J(e,t){return e.toString().length>L&&t==="get"}n.__markCompiled&&n.__markCompiled();var N,C,k,L=v.MAX_QUERYSTRING_LENGTH,A={get:!0,post:!0,"delete":!0,put:!0},O={fql_query:!0,fql_multiquery:!0,friends_get:!0,notifications_get:!0,stream_get:!0,users_getinfo:!0},M=["jsonp","cors","flash"],_=[],D=[],P=null,H=0,B=[],j=0,F=50,I=105440539523,$=g("Object","assign",!1,new y,{setAccessToken:function(e){N=e},getAccessToken:function(){return N},setClientID:function(e){C=e},setDefaultParams:function(e){k=e},setDefaultTransports:function(e){M=e},setMaxConcurrentRequests:function(e){j=e},getCurrentlyExecutingRequestCount:function(){return H},getQueuedRequestCount:function(){return B.length},rest:V,graph:z,scheduleBatchCall:W});p.setSwfUrl(x.FlashRequest.swfUrl),a.exports=$},null),m("sdk.PlatformVersioning",["sdk.Runtime","ManagedError"],function(t,n,r,i,s,o,u,a){n.__markCompiled&&n.__markCompiled();var f=/^v\d+\.\d\d?$/,l={REGEX:f,assertVersionIsSet:function(){if(!u.getVersion())throw new a("init not called with valid version")},assertValidVersion:function(e){if(!f.test(e))throw new a("invalid version specified")}};s.exports=l},null),m("sdk.api",["ApiClient","sdk.PlatformVersioning","sdk.Runtime","sdk.Scribe","sdk.URI","sdk.feature"],function(t,n,r,i,s,o,u,a,f,l,c,h){function v(e){if(typeof e=="string")if(f.getIsVersioned()){a.assertVersionIsSet(),!/https?/.test(e)&&e.charAt(0)!=="/"&&(e="/"+e),e=(new c(e)).setDomain(null).setProtocol(null).toString(),a.REGEX.test(e.substring(1,g(e,"indexOf",!0,"/",1)))||(e="/"+f.getVersion()+e);var t=[e].concat(Array.prototype.slice.call(arguments,1));u.graph.apply(u,t)}else u.graph.apply(u,arguments);else u.rest.apply(u,arguments)}n.__markCompiled&&n.__markCompiled();var p=h("should_log_response_error",!1),d;f.subscribe("ClientID.change",function(e){return u.setClientID(e)}),f.subscribe("AccessToken.change",function(e){d=e,u.setAccessToken(e)}),u.setDefaultParams({sdk:"joey"}),u.subscribe("request.complete",function(e,t,n,r){var i=!1;if(r&&typeof r=="object")if(r.error){if(r.error=="invalid_token"||r.error.type=="OAuthException"&&r.error.code==190)i=!0}else r.error_code&&r.error_code=="190"&&(i=!0);i&&d===f.getAccessToken()&&f.setAccessToken(null)}),u.subscribe("request.complete",function(e,t,n,r){(e=="/me/permissions"&&t==="delete"||e=="/restserver.php"&&n.method=="Auth.revokeAuthorization")&&r===!0&&f.setAccessToken(null)}),u.subscribe("request.error",function(e,t,n,r){p&&r.error.type==="http"&&l.log("jssdk_error",{appId:f.getClientID(),error:"transport",extra:{name:"transport",message:g("JSON","stringify",!1,r.error)}})}),s.exports=v},null),m("legacy:fb.api",["FB","sdk.api"],function(t,n,r,i,s,o,u,a){n.__markCompiled&&n.__markCompiled(),u.provide("",{api:a})},3),m("sdk.AppEvents",["Assert","sdk.Impressions","sdk.Runtime"],function(t,n,r,i,s,o,u,a,f){function v(e,t,n,r){u.isTrue(m(t),"Invalid event name: "+t+". "+"It must be between 1 and "+p+" characters, "+"and must be contain only alphanumerics, _, - or spaces, "+"starting with alphanumeric or _.");var i={ae:1,ev:t,vts:n,canvas:f.isCanvasEnvironment()?1:0};r&&(i.cd=r),a.impression({api_key:e,payload:g("JSON","stringify",!1,i)})}function m(e){return e===null||e.length===0||e.length>p||!(new RegExp(d)).test(e)?!1:!0}function b(e,t,n,r){var i={};i[h.CURRENCY]=n,v(e,c.PURCHASED,t,y._extends({},r,i))}function w(e){v(e,c.ACTIVATED_APP)}n.__markCompiled&&n.__markCompiled();var l={COMPLETED_REGISTRATION:"fb_mobile_complete_registration",VIEWED_CONTENT:"fb_mobile_content_view",SEARCHED:"fb_mobile_search",RATED:"fb_mobile_rate",COMPLETED_TUTORIAL:"fb_mobile_tutorial_completion",ADDED_TO_CART:"fb_mobile_add_to_cart",ADDED_TO_WISHLIST:"fb_mobile_add_to_wishlist",INITIATED_CHECKOUT:"fb_mobile_initiated_checkout",ADDED_PAYMENT_INFO:"fb_mobile_add_payment_info",ACHIEVED_LEVEL:"fb_mobile_level_achieved",UNLOCKED_ACHIEVEMENT:"fb_mobile_achievement_unlocked",SPENT_CREDITS:"fb_mobile_spent_credits"},c={ACTIVATED_APP:"fb_mobile_activate_app",PURCHASED:"fb_mobile_purchase"},h={CURRENCY:"fb_currency",REGISTRATION_METHOD:"fb_registration_method",CONTENT_TYPE:"fb_content_type",CONTENT_ID:"fb_content_id",SEARCH_STRING:"fb_search_string",SUCCESS:"fb_success",MAX_RATING_VALUE:"fb_max_rating_value",PAYMENT_INFO_AVAILABLE:"fb_payment_info_available",NUM_ITEMS:"fb_num_items",LEVEL:"fb_level",DESCRIPTION:"fb_description"},p=40,d="^[0-9a-zA-Z_]+[0-9a-zA-Z _-]*$";s.exports={activateApp:w,logEvent:v,logPurchase:b,isValidEventName:m,EventNames:l,ParameterNames:h}},null),m("legacy:fb.appevents",["Assert","sdk.AppEvents","FB","sdk.feature","sdk.Runtime"],function(t,n,r,i,s,o,u,a,f,l,c){n.__markCompiled&&n.__markCompiled(),f.provide("AppEvents",{logEvent:function(e,t,n){u.isTrue(l("allow_non_canvas_app_events",!1)||c.isCanvasEnvironment(),"You can only use this function in Facebook Canvas environment"),u.isString(e,"Invalid eventName"),u.maybeNumber(t,"Invalid valueToSum"),u.maybeObject(n,"Invalid params");var r=c.getClientID();u.isTrue(r!==null&&r.length>0,"You need to call FB.init() with App ID first."),a.logEvent(r,e,t,n)},logPurchase:function(e,t,n){u.isTrue(l("allow_non_canvas_app_events",!1)||c.isCanvasEnvironment(),"You can only use this function in Facebook Canvas environment"),u.isNumber(e,"Invalid purchaseAmount"),u.isString(t,"Invalid currency"),u.maybeObject(n,"Invalid params");var r=c.getClientID();u.isTrue(r!==null&&r.length>0,"You need to call FB.init() with App ID first."),a.logPurchase(r,e,t,n)},activateApp:function(){u.isTrue(l("allow_non_canvas_app_events",!1)||c.isCanvasEnvironment(),"You can only use this function in Facebook Canvas environment");var e=c.getClientID();u.isTrue(e!==null&&e.length>0,"You need to call FB.init() with App ID first."),a.activateApp(e)},EventNames:a.EventNames,ParameterNames:a.ParameterNames})},3),m("sdk.Canvas.Environment",["sdk.RPC"],function(t,n,r,i,s,o,u){function a(e){u.remote.getPageInfo(function(t){e(t.result)})}function f(e,t){u.remote.scrollTo({x:e||0,y:t||0})}n.__markCompiled&&n.__markCompiled(),u.stub("getPageInfo"),u.stub("scrollTo");var l={getPageInfo:a,scrollTo:f};s.exports=l},null),m("sdk.fbt",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={_:function(e){return typeof e=="string"?e:e[0]}};s.exports=u},null),m("sdk.Dialog",["sdk.Canvas.Environment","sdk.Content","sdk.DOM","DOMEventListener","ObservableMixin","sdk.Runtime","Type","sdk.UA","sdk.fbt","sdk.feature"],function(r,s,o,u,a,f,l,c,h,p,d,v,m,y,b,w){function C(){if(w("dialog_resize_refactor",!1)){var e=h.getViewportInfo();if(e.height&&e.width)return{width:Math.min(e.width,E),height:Math.min(e.height,S)}}return null}s.__markCompiled&&s.__markCompiled();var E=590,S=500,x=240,T=575,N=function(){var e;if(w("dialog_resize_refactor",!1)){var t=C();e=t&&(t.height>=E||t.width>=S)}else e=!!y.ipad();return N=function(){return e},e},k=m.extend({constructor:function(t,n){this.parent(),this.id=t,this.display=n,this._e2e={},L._dialogs||(L._dialogs={},L._addOrientationHandler()),L._dialogs[t]=this,this.trackEvent("init")},trackEvent:function(e,t){return this._e2e[e]?this:(this._e2e[e]=t||g("Date","now",!1),e=="close"&&this.inform("e2e:end",this._e2e),this)},trackEvents:function(e){typeof e=="string"&&(e=g("JSON","parse",!1,e));for(var t in e)e.hasOwnProperty(t)&&this.trackEvent(t,e[t]);return this}},d),L={newInstance:function(e,t){return new k(e,t)},_dialogs:null,_lastYOffset:0,_loaderEl:null,_overlayEl:null,_stack:[],_active:null,get:function(e){return L._dialogs[e]},_findRoot:function(e){while(e){if(h.containsCss(e,"fb_dialog"))return e;e=e.parentNode}},_createWWWLoader:function(e){return e=e?e:460,L.create({content:'<div class="dialog_title">  <a id="fb_dialog_loader_close">    <div class="fb_dialog_close_icon"></div>  </a>  <span>Facebook</span>  <div style="clear:both;"></div></div><div class="dialog_content"></div><div class="dialog_footer"></div>',width:e})},_createMobileLoader:function(){var e;return y.nativeApp()?e='<div class="dialog_header"></div>':N()?e='<div class="overlayLoader"><div id="fb_dialog_loader_spinner"></div><a id="fb_dialog_loader_close" href="#">'+b._("Cancel")+"</a>"+"</div>":e='<div class="dialog_header"><table>  <tbody>    <tr>      <td class="header_left">        <label class="touchable_button">          <input type="submit" value="'+b._("Cancel")+'"'+'            id="fb_dialog_loader_close"/>'+"        </label>"+"      </td>"+'      <td class="header_center">'+"        <div>"+"         "+b._("Loading...")+"        </div>"+"      </td>"+'      <td class="header_right">'+"      </td>"+"    </tr>"+"  </tbody>"+"</table>"+"</div>",L.create({classes:"loading"+(N()?" centered":""),content:e})},_restoreBodyPosition:function(){if(!N()){var e=n.body;h.removeCss(e,"fb_hidden"),h.removeCss(e,"fb_reposition")}},_showTabletOverlay:function(){if(!N())return;L._overlayEl||(L._overlayEl=n.createElement("div"),L._overlayEl.setAttribute("id","fb_dialog_ipad_overlay"),c.append(L._overlayEl,null)),L._overlayEl.className=""},_hideTabletOverlay:function(){N()&&(L._overlayEl.className="hidden")},showLoader:function(e,t){L._showTabletOverlay(),L._loaderEl||(L._loaderEl=L._findRoot(y.mobile()?L._createMobileLoader():L._createWWWLoader(t))),e||(e=function(){});var r=n.getElementById("fb_dialog_loader_close");if(r){h.removeCss(r,"fb_hidden"),r.onclick=function(){L._hideLoader(),L._restoreBodyPosition(),L._hideTabletOverlay(),e()};var i=n.getElementById("fb_dialog_ipad_overlay");i&&(i.ontouchstart=r.onclick)}L._makeActive(L._loaderEl)},_hideLoader:function(){L._loaderEl&&L._loaderEl==L._active&&(L._loaderEl.style.top="-10000px")},_makeActive:function(e){L._setDialogSizes(),L._lowerActive(),L._active=e,v.isEnvironment(v.ENVIRONMENTS.CANVAS)&&l.getPageInfo(function(e){L._centerActive(e)}),L._centerActive()},_lowerActive:function(){if(!L._active)return;L._active.style.top="-10000px",L._active=null},_removeStacked:function(e){L._stack=g(L._stack,"filter",!0,function(t){return t!=e})},_centerActive:function(e){var t=L._active;if(!t)return;var r=h.getViewportInfo(),i=parseInt(t.offsetWidth,10),s=parseInt(t.offsetHeight,10),o=r.scrollLeft+(r.width-i)/2,u=(r.height-s)/2.5;o<u&&(u=o);var a=r.height-s-u,f=(r.height-s)/2;e&&(f=e.scrollTop-e.offsetTop+(e.clientHeight-s)/2),f<u?f=u:f>a&&(f=a),f+=r.scrollTop;if(y.mobile()){var l=100,c=n.body;N()?(l+=(r.height-s)/2,h.addCss(c,"fb_reposition")):(h.addCss(c,"fb_hidden"),w("dialog_resize_refactor",!1)&&(c.style.width="auto"),f=1e4);var p=h.getByClass("fb_dialog_padding",t);p.length&&(p[0].style.height=l+"px")}t.style.left=(o>0?o:0)+"px",t.style.top=(f>0?f:0)+"px"},_setDialogSizes:function(){if(!y.mobile()||N())return;for(var e in L._dialogs)if(L._dialogs.hasOwnProperty(e)){var t=n.getElementById(e);t&&(t.style.width=L.getDefaultSize().width+"px",t.style.height=L.getDefaultSize().height+"px")}},getDefaultSize:function(){if(y.mobile()){var t=C();if(t)return t;if(y.ipad())return{width:S,height:E};if(y.android())return{width:screen.availWidth,height:screen.availHeight};var n=e.innerWidth,r=e.innerHeight,i=n/r>1.2;return{width:n,height:Math.max(r,i?screen.width:screen.height)}}return{width:T,height:x}},_handleOrientationChange:function(e){var t=w("dialog_resize_refactor",!1)?h.getViewportInfo().width:screen.availWidth;if(y.android()&&t==L._availScreenWidth){i(L._handleOrientationChange,50);return}L._availScreenWidth=t;if(N())L._centerActive();else{var r=L.getDefaultSize().width;for(var s in L._dialogs)if(L._dialogs.hasOwnProperty(s)){var o=n.getElementById(s);o&&(o.style.width=r+"px")}}},_addOrientationHandler:function(){if(!y.mobile())return;var t="onorientationchange"in e?"orientationchange":"resize";L._availScreenWidth=w("dialog_resize_refactor",!1)?h.getViewportInfo().width:screen.availWidth,p.add(e,t,L._handleOrientationChange)},create:function(e){e=e||{};var t=n.createElement("div"),r=n.createElement("div"),i="fb_dialog";if(e.closeIcon&&e.onClose){var s=n.createElement("a");s.className="fb_dialog_close_icon",s.onclick=e.onClose,t.appendChild(s)}i+=" "+(e.classes||""),y.ie()?(i+=" fb_dialog_legacy",g(["vert_left","vert_right","horiz_top","horiz_bottom","top_left","top_right","bottom_left","bottom_right"],"forEach",!0,function(e){var r=n.createElement("span");r.className="fb_dialog_"+e,t.appendChild(r)})):i+=y.mobile()?" fb_dialog_mobile":" fb_dialog_advanced",e.content&&c.append(e.content,r),t.className=i;var o=parseInt(e.width,10);isNaN(o)||(t.style.width=o+"px"),r.className="fb_dialog_content",t.appendChild(r);if(y.mobile()){var u=n.createElement("div");u.className="fb_dialog_padding",t.appendChild(u)}return c.append(t),e.visible&&L.show(t),r},show:function(e){var t=L._findRoot(e);t&&(L._removeStacked(t),L._hideLoader(),L._makeActive(t),L._stack.push(t),"fbCallID"in e&&L.get(e.fbCallID).inform("iframe_show").trackEvent("show"))},hide:function(e){var t=L._findRoot(e);L._hideLoader(),t==L._active&&(L._lowerActive(),L._restoreBodyPosition(),L._hideTabletOverlay(),"fbCallID"in e&&L.get(e.fbCallID).inform("iframe_hide").trackEvent("hide"))},remove:function(e){e=L._findRoot(e);if(e){var t=L._active==e;L._removeStacked(e),t?(L._hideLoader(),L._stack.length>0?L.show(L._stack.pop()):(L._lowerActive(),L._restoreBodyPosition(),L._hideTabletOverlay())):L._active===null&&L._stack.length>0&&L.show(L._stack.pop()),i(function(){e.parentNode.removeChild(e)},3e3)}},isActive:function(e){var t=L._findRoot(e);return t&&t===L._active},isTablet:N};a.exports=L},null),m("sdk.Frictionless",["sdk.Auth","sdk.api","sdk.Event","sdk.Dialog"],function(t,n,r,i,s,o,u,a,f,l){n.__markCompiled&&n.__markCompiled();var c={_allowedRecipients:{},_useFrictionless:!1,_updateRecipients:function(){c._allowedRecipients={},a("/me/apprequestformerrecipients",function(e){if(!e||e.error)return;g(e.data,"forEach",!0,function(e){c._allowedRecipients[e.recipient_id]=!0})})},init:function(){c._useFrictionless=!0,u.getLoginStatus(function(e){e.status=="connected"&&c._updateRecipients()}),f.subscribe("auth.login",function(e){e.authResponse&&c._updateRecipients()})},_processRequestResponse:function(e,t){return function(n){var r=n&&n.updated_frictionless;c._useFrictionless&&r&&c._updateRecipients(),n&&(!t&&n.frictionless&&(l._hideLoader(),l._restoreBodyPosition(),l._hideIPadOverlay()),delete n.frictionless,delete n.updated_frictionless),e&&e(n)}},isAllowed:function(e){if(!e)return!1;if(typeof e=="number")return e in c._allowedRecipients;typeof e=="string"&&(e=e.split(",")),e=g(e,"map",!0,function(e){return g(String(e),"trim",!0)});var t=!0,n=!1;return g(e,"forEach",!0,function(e){t=t&&e in c._allowedRecipients,n=!0}),t&&n}};f.subscribe("init:post",function(e){e.frictionlessRequests&&c.init()}),s.exports=c},null),m("sdk.Native",["Log","sdk.UA"],function(n,r,i,s,o,u,a,f){r.__markCompiled&&r.__markCompiled();var l="fbNativeReady",c={onready:function(t){if(!f.nativeApp()){a.error("FB.Native.onready only works when the page is rendered in a WebView of the native Facebook app. Test if this is the case calling FB.UA.nativeApp()");return}e.__fbNative&&!this.nativeReady&&g("Object","assign",!1,this,e.__fbNative);if(this.nativeReady)t();else{var n=function(r){e.removeEventListener(l,n),this.onready(t)};e.addEventListener(l,n,!1)}}};o.exports=c},null),m("resolveURI",[],function(r,i,s,o,u,a){function f(t){if(!t)return e.location.href;t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;");var r=n.createElement("div");return r.innerHTML='<a href="'+t+'"></a>',r.firstChild.href}i.__markCompiled&&i.__markCompiled(),u.exports=f},null),m("sdk.UIServer",["sdk.Auth","sdk.Content","sdk.DOM","sdk.Dialog","sdk.Event","sdk.Frictionless","Log","sdk.Native","QueryString","sdk.RPC","sdk.Runtime","JSSDKConfig","sdk.UA","UrlMap","sdk.XD","createObjectFrom","sdk.feature","flattenObject","sdk.getContextType","guid","insertIframe","resolveURI"],function(o,a,f,l,c,h,p,d,v,m,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H){function I(e,t){return F[t]=!0,function(n){delete F[t],e(n)}}function q(e){if(!O("should_force_single_dialog_instance",!0))return!1;var t=e.method.toLowerCase();return t==="pay"&&e.display==="async"?!0:!1}a.__markCompiled&&a.__markCompiled();var B={transform:function(t){return t.params.display==="touch"&&B.shouldEnableIframeTest(t)&&e.postMessage?(t.params.channel=R._xdChannelHandler(t.id,"parent"),C.nativeApp()||(t.params.in_iframe=1),t):R.genericTransform(t)},getXdRelation:function(t){var n=t.display;return n==="touch"&&e.postMessage&&t.in_iframe?"parent":R.getXdRelation(t)},shouldEnableIframeTest:function(e){return e.params.access_token?!0:T.getLoginStatus()==="not_authorized"?e.params.iframe_test:!1}},j={"stream.share":{size:{width:670,height:340},url:"sharer.php",transform:function(t){return t.params.u||(t.params.u=e.location.toString()),t.params.display="popup",t}},apprequests:{transform:function(e){return e=B.transform(e),e.params.frictionless=b&&b._useFrictionless,e.params.frictionless&&(b.isAllowed(e.params.to)&&(e.params.display="iframe",e.params.in_iframe=!0,e.hideLoader=!0),e.cb=b._processRequestResponse(e.cb,e.hideLoader)),e.closeIcon=!1,e},getXdRelation:B.getXdRelation},feed:B,"permissions.oauth":{url:"dialog/oauth",size:{width:C.mobile()?null:475,height:C.mobile()?null:183},transform:function(e){if(!T.getClientID()){w.error("FB.login() called before FB.init().");return}if(p.getAuthResponse()&&!e.params.scope&&!e.params.auth_type){w.error("FB.login() called when user is already connected."),e.cb&&e.cb({status:T.getLoginStatus(),authResponse:p.getAuthResponse()});return}var t=e.cb,n=e.id;delete e.cb;var r=g("Object","keys",!1,g("Object","assign",!1,e.params.response_type?A(e.params.response_type.split(",")):{},{token:!0,signed_request:!0})).join(",");return e.params.display==="async"?(g("Object","assign",!1,e.params,{client_id:T.getClientID(),origin:_(),response_type:r,domain:location.hostname}),e.cb=p.xdResponseWrapper(t,p.getAuthResponse(),"permissions.oauth")):g("Object","assign",!1,e.params,{client_id:T.getClientID(),redirect_uri:H(R.xdHandler(t,n,"opener",p.getAuthResponse(),"permissions.oauth")),origin:_(),response_type:r,domain:location.hostname}),e}},"auth.logout":{url:"logout.php",transform:function(e){if(!T.getClientID())w.error("FB.logout() called before calling FB.init().");else{if(!!p.getAuthResponse())return e.params.next=R.xdHandler(e.cb,e.id,"parent",p.getAuthResponse(),"logout"),e;w.error("FB.logout() called without an access token.")}}},"login.status":{url:"dialog/oauth",transform:function(e){var t=e.cb,n=e.id;return delete e.cb,g("Object","assign",!1,e.params,{client_id:T.getClientID(),redirect_uri:R.xdHandler(t,n,"parent",p.getAuthResponse(),"login_status"),origin:_(),response_type:"token,signed_request,code",domain:location.hostname}),e}},pay:{size:{width:555,height:120},connectDisplay:"popup"}},F={},R={Methods:j,_loadedNodes:{},_defaultCb:{},_resultToken:'"xxRESULTTOKENxx"',genericTransform:function(e){return(e.params.display=="dialog"||e.params.display=="iframe")&&g("Object","assign",!1,e.params,{display:"iframe",channel:R._xdChannelHandler(e.id,"parent.parent")},!0),e},checkOauthDisplay:function(e){var t=e.scope||e.perms||T.getScope();if(!t)return e.display;var n=t.split(/\s|,/g);for(var r=0;r<n.length;r++)if(!N.initSitevars.iframePermissions[g(n[r],"trim",!0)])return"popup";return e.display},prepareCall:function(t,n){var i=t.method.toLowerCase(),s=R.Methods.hasOwnProperty(i)?g("Object","assign",!1,{},R.Methods[i]):{},o=D(),u=T.getSecure()||i!=="auth.status"&&i!="login.status";g("Object","assign",!1,t,{app_id:T.getClientID(),locale:T.getLocale(),sdk:"joey",access_token:u&&T.getAccessToken()||r}),(i==="share"||i==="share_open_graph")&&t.iframe_test&&(s=g("Object","assign",!1,{},B)),t.display=R.getDisplayMode(s,t),s.url||(s.url="dialog/"+i),(s.url=="dialog/oauth"||s.url=="dialog/permissions.request")&&(t.display=="iframe"||t.display=="touch"&&t.in_iframe)&&(t.display=R.checkOauthDisplay(t)),t.display=="popup"&&delete t.access_token,T.getIsVersioned()&&s.url.substring(0,7)==="dialog/"&&(s.url=t.version+"/"+s.url);if(q(t)){if(F[i]){var a='Dialog "'+i+'" is trying to run more than once.';w.warn(a),n({error_code:-100,error_message:a});return}n=I(n,i)}var f={cb:n,id:o,size:s.size||R.getDefaultSize(),url:k.resolve(t.display=="touch"?"m":"www",u)+"/"+s.url,params:t,name:i,dialog:m.newInstance(o,t.display)},l=s.transform?s.transform:R.genericTransform;if(l){f=l(f);if(!f)return}t.display==="touch"&&t.in_iframe&&(f.params.parent_height=e.innerHeight);var c=s.getXdRelation||R.getXdRelation,h=c(f.params);return!(f.id in R._defaultCb)&&!("next"in f.params)&&!("redirect_uri"in f.params)&&(f.params.next=R._xdResult(f.cb,f.id,h,!0)),h==="parent"&&g("Object","assign",!1,f.params,{channel_url:R._xdChannelHandler(o,"parent.parent")},!0),f=R.prepareParams(f),f},prepareParams:function(e){e.params.display!=="async"&&delete e.params.method,e.params=M(e.params);var t=S.encode(e.params);return!C.nativeApp()&&R.urlTooLongForIE(e.url+"?"+t)?e.post=!0:t&&(e.url+="?"+t),e},urlTooLongForIE:function(e){return e.length>2e3},getDisplayMode:function(e,t){if(t.display==="hidden"||t.display==="none")return t.display;var n=T.isEnvironment(T.ENVIRONMENTS.CANVAS)||T.isEnvironment(T.ENVIRONMENTS.PAGETAB);return n&&!t.display?"async":C.mobile()||t.display==="touch"?"touch":!T.getAccessToken()&&(t.display=="iframe"||t.display=="dialog")&&!e.loggedOutIframe?(w.error('"dialog" mode can only be used when the user is connected.'),"popup"):e.connectDisplay&&!n?e.connectDisplay:t.display||(T.getAccessToken()?"dialog":"popup")},getXdRelation:function(t){var n=t.display;if(n==="popup"||n==="touch")return"opener";if(n==="dialog"||n==="iframe"||n==="hidden"||n==="none")return"parent";if(n==="async")return"parent.frames["+e.name+"]"},popup:function(t){var r=typeof e.screenX!="undefined"?e.screenX:e.screenLeft,i=typeof e.screenY!="undefined"?e.screenY:e.screenTop,s=typeof e.outerWidth!="undefined"?e.outerWidth:n.documentElement.clientWidth,o=typeof e.outerHeight!="undefined"?e.outerHeight:n.documentElement.clientHeight-22,u=C.mobile()?null:t.size.width,a=C.mobile()?null:t.size.height,f=r<0?e.screen.width+r:r,l=parseInt(f+(s-u)/2,10),c=parseInt(i+(o-a)/2.5,10),h=[];u!==null&&h.push("width="+u),a!==null&&h.push("height="+a),h.push("left="+l),h.push("top="+c),h.push("scrollbars=1"),(t.name=="permissions.request"||t.name=="permissions.oauth")&&h.push("location=1,toolbar=0"),h=h.join(",");var p;t.post?(p=e.open("about:blank",t.id,h),p&&(R.setLoadedNode(t,p,"popup"),d.submitToTarget({url:t.url,target:t.id,params:t.params}))):(p=e.open(t.url,t.id,h),p&&R.setLoadedNode(t,p,"popup"));if(!p)return;t.id in R._defaultCb&&R._popupMonitor()},setLoadedNode:function(e,t,n){n==="iframe"&&(t.fbCallID=e.id),t={node:t,type:n,fbCallID:e.id},R._loadedNodes[e.id]=t},getLoadedNode:function(e){var t=typeof e=="object"?e.id:e,n=R._loadedNodes[t];return n?n.node:null},hidden:function(e){e.className="FB_UI_Hidden",e.root=d.appendHidden(""),R._insertIframe(e)},iframe:function(e){e.className="FB_UI_Dialog";var t=function(){R._triggerDefault(e.id)};e.root=m.create({onClose:t,closeIcon:e.closeIcon===r?!0:e.closeIcon,classes:m.isTablet()?"centered":""}),e.hideLoader||m.showLoader(t,e.size.width),v.addCss(e.root,"fb_dialog_iframe"),R._insertIframe(e)},touch:function(e){e.params&&e.params.in_iframe?e.ui_created?m.showLoader(function(){R._triggerDefault(e.id)},0):R.iframe(e):C.nativeApp()&&!e.ui_created?(e.frame=e.id,E.onready(function(){R.setLoadedNode(e,E.open(e.url+"#cb="+e.frameName),"native")}),R._popupMonitor()):e.ui_created||R.popup(e)},async:function(e){e.params.redirect_uri=location.protocol+"//"+location.host+location.pathname,delete e.params.access_token,x.remote.showDialog(e.params,function(t){var n=t.result;if(n&&n.e2e){var r=m.get(e.id);r.trackEvents(n.e2e),r.trackEvent("close"),delete n.e2e}e.cb(n)})},getDefaultSize:function(){return m.getDefaultSize()},_insertIframe:function(e){R._loadedNodes[e.id]=!1;var t=function(t){e.id in R._loadedNodes&&R.setLoadedNode(e,t,"iframe")};e.post?P({url:"about:blank",root:e.root,className:e.className,width:e.size.width,height:e.size.height,id:e.id,onInsert:t,onload:function(t){d.submitToTarget({url:e.url,target:t.name,params:e.params})}}):P({url:e.url,root:e.root,className:e.className,width:e.size.width,height:e.size.height,id:e.id,name:e.frameName,onInsert:t})},_handleResizeMessage:function(e,t){var n=R.getLoadedNode(e);if(!n)return;t.height&&(n.style.height=t.height+"px"),t.width&&(n.style.width=t.width+"px"),L.inform("resize.ack",t||{},"parent.frames["+n.name+"]"),m.isActive(n)?m._centerActive():m.show(n)},_triggerDefault:function(e){R._xdRecv({frame:e},R._defaultCb[e]||function(){})},_popupMonitor:function(){var e;for(var t in R._loadedNodes)if(R._loadedNodes.hasOwnProperty(t)&&t in R._defaultCb){var n=R._loadedNodes[t];if(n.type!="popup"&&n.type!="native")continue;var r=n.node;try{r.closed?R._triggerDefault(t):e=!0}catch(i){}}e&&!R._popupInterval?R._popupInterval=s(R._popupMonitor,100):!e&&R._popupInterval&&(u(R._popupInterval),R._popupInterval=null)},_xdChannelHandler:function(e,t){return L.handler(function(t){var n=R.getLoadedNode(e);if(!n)return;if(t.type=="resize")R._handleResizeMessage(e,t);else if(t.type=="hide")m.hide(n);else if(t.type=="rendered"){var r=m._findRoot(n);m.show(r)}else t.type=="fireevent"&&y.fire(t.event)},t,!0,null)},_xdNextHandler:function(e,t,n,r){return r&&(R._defaultCb[t]=e),L.handler(function(t){R._xdRecv(t,e)},n)+"&frame="+t},_xdRecv:function(t,n){var r=R.getLoadedNode(t.frame);if(r)if(r.close)try{r.close(),/iPhone.*Version\/(5|6)/.test(navigator.userAgent)&&RegExp.$1!=="5"&&e.focus(),R._popupCount--}catch(s){}else v.containsCss(r,"FB_UI_Hidden")?i(function(){r.parentNode.parentNode.removeChild(r.parentNode)},3e3):v.containsCss(r,"FB_UI_Dialog")&&m.remove(r);delete R._loadedNodes[t.frame],delete R._defaultCb[t.frame];if(t.e2e){var o=m.get(t.frame);o.trackEvents(t.e2e),o.trackEvent("close"),delete t.e2e}n(t)},_xdResult:function(e,t,n,r){return R._xdNextHandler(function(t){e&&e(t.result&&t.result!=R._resultToken&&g("JSON","parse",!1,t.result))},t,n,r)+"&result="+encodeURIComponent(R._resultToken)},xdHandler:function(e,t,n,r,i){return R._xdNextHandler(p.xdResponseWrapper(e,r,i),t,n,!0)}};x.stub("showDialog"),c.exports=R},null),m("sdk.ui",["Assert","sdk.Impressions","Log","sdk.PlatformVersioning","sdk.Runtime","sdk.UIServer","sdk.feature"],function(t,n,r,i,s,o,u,a,f,l,c,h,p){function d(e,t){u.isObject(e),u.maybeFunction(t),c.getIsVersioned()&&(l.assertVersionIsSet(),e.version?l.assertValidVersion(e.version):e.version=c.getVersion()),e=g("Object","assign",!1,{},e);if(!e.method)return f.error('"method" is a required parameter for FB.ui().'),null;e.method=="pay.prompt"&&(e.method="pay");var n=e.method;e.redirect_uri&&(f.warn("When using FB.ui, you should not specify a redirect_uri."),delete e.redirect_uri),(n=="permissions.request"||n=="permissions.oauth")&&(e.display=="iframe"||e.display=="dialog")&&(e.display=h.checkOauthDisplay(e));var r=p("e2e_tracking",!0);r&&(e.e2e={});var i=h.prepareCall(e,t||function(){});if(!i)return null;var s=i.params.display;s==="dialog"?s="iframe":s==="none"&&(s="hidden");var o=h[s];return o?(r&&i.dialog.subscribe("e2e:end",function(e){e.method=n,e.display=s,f.debug("e2e: %s",g("JSON","stringify",!1,e)),a.log(114,{payload:e})}),o(i),i.dialog):(f.error('"display" must be one of "popup", "dialog", "iframe", "touch", "async", "hidden", or "none"'),null)}n.__markCompiled&&n.__markCompiled(),s.exports=d},null),m("legacy:fb.auth",["sdk.Auth","sdk.Cookie","sdk.Event","FB","Log","sdk.Runtime","sdk.SignedRequest","sdk.ui"],function(t,n,r,i,s,o,u,a,f,l,c,h,p,d){n.__markCompiled&&n.__markCompiled(),l.provide("",{getLoginStatus:function(){return u.getLoginStatus.apply(u,arguments)},getAuthResponse:function(){return u.getAuthResponse()},getAccessToken:function(){return h.getAccessToken()||null},getUserID:function(){return h.getUserID()||h.getCookieUserID()},login:function(e,t){t&&t.perms&&!t.scope&&(t.scope=t.perms,delete t.perms,c.warn("OAuth2 specification states that 'perms' should now be called 'scope'.  Please update."));var n=h.isEnvironment(h.ENVIRONMENTS.CANVAS)||h.isEnvironment(h.ENVIRONMENTS.PAGETAB);d(y._extends({method:"permissions.oauth",display:n?"async":"popup",domain:location.hostname},t||{}),e)},logout:function(e){d({method:"auth.logout",display:"hidden"},e)}}),u.subscribe("logout",g(f.fire,"bind",!0,f,"auth.logout")),u.subscribe("login",g(f.fire,"bind",!0,f,"auth.login")),u.subscribe("authresponse.change",g(f.fire,"bind",!0,f,"auth.authResponseChange")),u.subscribe("status.change",g(f.fire,"bind",!0,f,"auth.statusChange")),f.subscribe("init:post",function(e){e.status&&u.getLoginStatus();if(h.getClientID())if(e.authResponse)u.setAuthResponse(e.authResponse,"connected");else if(h.getUseCookie()){var t=a.loadSignedRequest(),n;if(t){try{n=p.parse(t)}catch(r){a.clearSignedRequestCookie()}n&&n.user_id&&h.setCookieUserID(n.user_id)}a.loadMeta()}})},3),m("sdk.Canvas.IframeHandling",["DOMWrapper","sdk.RPC"],function(n,i,o,a,f,l,c,h){function v(){var e=c.getWindow().document,t=e.body,n=e.documentElement,r=Math.max(t.offsetTop,0),i=Math.max(n.offsetTop,0),s=t.scrollHeight+r,o=t.offsetHeight+r,u=n.scrollHeight+i,a=n.offsetHeight+i;return Math.max(s,o,u,a)}function m(t){typeof t!="object"&&(t={});var n=0,r=0;t.height||(t.height=v(),n=16,r=4),t.frame||(t.frame=e.name||"iframe_canvas");if(d){var i=d.height,s=t.height-i;if(s<=r&&s>=-n)return!1}return d=t,h.remote.setSize(t),!0}function g(e,t){t===r&&typeof e=="number"&&(t=e,e=!0),e||e===r?(p===null&&(p=s(function(){m()},t||100)),m()):p!==null&&(u(p),p=null)}i.__markCompiled&&i.__markCompiled();var p=null,d;h.stub("setSize");var y={setSize:m,setAutoGrow:g};f.exports=y},null),m("sdk.Canvas.Navigation",["sdk.RPC"],function(t,n,r,i,s,o,u){function a(e){u.local.navigate=function(t){e({path:t})},u.remote.setNavigationEnabled(!0)}n.__markCompiled&&n.__markCompiled(),u.stub("setNavigationEnabled");var f={setUrlHandler:a};s.exports=f},null),m("sdk.Canvas.Plugin",["Log","sdk.RPC","sdk.Runtime","sdk.UA","sdk.api","createArrayFromMixed"],function(n,r,s,o,u,a,f,l,c,h,p,d){function E(e){e._hideunity_savedstyle={},e._hideunity_savedstyle.left=e.style.left,e._hideunity_savedstyle.position=e.style.position,e._hideunity_savedstyle.width=e.style.width,e._hideunity_savedstyle.height=e.style.height,e.style.left="-10000px",e.style.position="absolute",e.style.width="1px",e.style.height="1px"}function S(e){e._hideunity_savedstyle&&(e.style.left=e._hideunity_savedstyle.left,e.style.position=e._hideunity_savedstyle.position,e.style.width=e._hideunity_savedstyle.width,e.style.height=e._hideunity_savedstyle.height)}function x(e){e._old_visibility=e.style.visibility,e.style.visibility="hidden"}function T(e){e.style.visibility=e._old_visibility||"",delete e._old_visibility}function N(e){var t=e.type?e.type.toLowerCase():null,n=t==="application/x-shockwave-flash"||e.classid&&e.classid.toUpperCase()==v;if(!n)return!1;var r=/opaque|transparent/i;if(r.test(e.getAttribute("wmode")))return!1;for(var i=0;i<e.childNodes.length;i++){var s=e.childNodes[i];if(/param/i.test(s.nodeName)&&/wmode/i.test(s.name)&&r.test(s.value))return!1}return!0}function C(e){var t=e.type?e.type.toLowerCase():null;return t==="application/vnd.unity"||e.classid&&e.classid.toUpperCase()==m}function k(t){var n=d(e.document.getElementsByTagName("object"));n=n.concat(d(e.document.getElementsByTagName("embed")));var r=!1,s=!1;g(n,"forEach",!0,function(e){var n=N(e),o=w&&C(e);if(!n&&!o)return;r=r||n,s=s||o;var u=function(){t.state==="opened"?n?x(e):E(e):n?T(e):S(e)};if(y){f.info("Calling developer specified callback");var a={state:t.state,elem:e};y(a),i(u,200)}else u()});if(Math.random()<=.001){var o={unity:s,flash:r};p(c.getClientID()+"/occludespopups","post",o)}}function L(){x(),E()}function A(){T(),S()}r.__markCompiled&&r.__markCompiled();var v="CLSID:D27CDB6E-AE6D-11CF-96B8-444553540000",m="CLSID:444785F1-DE89-4295-863A-D46C3A781394",y=null,b=h.osx()&&h.osx.getVersionParts(),w=!(b&&b[0]>10&&b[1]>10&&(h.chrome()>=31||h.webkit()>=537.71||h.firefox()>=25));l.local.hidePluginObjects=function(){f.info("hidePluginObjects called"),k({state:"opened"})},l.local.showPluginObjects=function(){f.info("showPluginObjects called"),k({state:"closed"})},l.local.showFlashObjects=l.local.showPluginObjects,l.local.hideFlashObjects=l.local.hidePluginObjects;var O={_setHidePluginCallback:function(e){y=e},hidePluginElement:L,showPluginElement:A};u.exports=O},null),m("sdk.Canvas.Tti",["sdk.RPC","sdk.Runtime"],function(t,n,r,i,s,o,u,a){function f(e,t){var n={appId:a.getClientID(),time:g("Date","now",!1),name:t},r=[n];e&&r.push(function(t){e(t.result)}),u.remote.logTtiMessage.apply(null,r)}function l(){f(null,"StartIframeAppTtiTimer")}function c(e){f(e,"StopIframeAppTtiTimer")}function h(e){f(e,"RecordIframeAppTti")}n.__markCompiled&&n.__markCompiled(),u.stub("logTtiMessage");var p={setDoneLoading:h,startTimer:l,stopTimer:c};s.exports=p},null),m("legacy:fb.canvas",["Assert","sdk.Canvas.Environment","sdk.Event","FB","sdk.Canvas.IframeHandling","sdk.Canvas.Navigation","sdk.Canvas.Plugin","sdk.RPC","sdk.Runtime","sdk.Canvas.Tti"],function(t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){n.__markCompiled&&n.__markCompiled(),l.provide("Canvas",{setSize:function(e){return u.maybeObject(e,"Invalid argument"),c.setSize.apply(null,arguments)},setAutoGrow:function(){return c.setAutoGrow.apply(null,arguments)},getPageInfo:function(e){return u.isFunction(e,"Invalid argument"),a.getPageInfo.apply(null,arguments)},scrollTo:function(e,t){return u.maybeNumber(e,"Invalid argument"),u.maybeNumber(t,"Invalid argument"),a.scrollTo.apply(null,arguments)},setDoneLoading:function(e){return u.maybeFunction(e,"Invalid argument"),m.setDoneLoading.apply(null,arguments)},startTimer:function(){return m.startTimer.apply(null,arguments)},stopTimer:function(e){return u.maybeFunction(e,"Invalid argument"),m.stopTimer.apply(null,arguments)},getHash:function(e){return u.isFunction(e,"Invalid argument"),h.getHash.apply(null,arguments)},setHash:function(e){return u.isString(e,"Invalid argument"),h.setHash.apply(null,arguments)},setUrlHandler:function(e){return u.isFunction(e,"Invalid argument"),h.setUrlHandler.apply(null,arguments)}}),d.local.fireEvent=g(f.fire,"bind",!0,f),f.subscribe("init:post",function(e){v.isEnvironment(v.ENVIRONMENTS.CANVAS)&&(u.isTrue(!e.hideFlashCallback||!e.hidePluginCallback,"cannot specify deprecated hideFlashCallback and new hidePluginCallback"),p._setHidePluginCallback(e.hidePluginCallback||e.hideFlashCallback))})},3),m("legacy:fb.canvas.syncrequests",["sdk.RPC","sdk.Event"],function(t,n,r,i,s,o,u,a){function f(e,t){if(e!="canvas.syncRequestUpdated")return;u.remote.initPendingSyncRequests(),a.unsubscribe(a.SUBSCRIBE,f)}n.__markCompiled&&n.__markCompiled(),u.stub("initPendingSyncRequests"),a.subscribe(a.SUBSCRIBE,f)},3),m("sdk.Canvas.Prefetcher",["sdk.api","createArrayFromMixed","JSSDKCanvasPrefetcherConfig","sdk.Runtime"],function(t,r,s,o,u,a,f,l,c,h){function b(){var e={object:"data",link:"href",script:"src"};m==p.AUTOMATIC&&g(g("Object","keys",!1,e),"forEach",!0,function(t){var r=e[t];g(l(n.getElementsByTagName(t)),"forEach",!0,function(e){e[r]&&y.push(e[r])})});if(y.length===0)return;f(h.getClientID()+"/staticresources","post",{urls:g("JSON","stringify",!1,y),is_https:location.protocol==="https:"}),y=[]}function w(){if(!h.isEnvironment(h.ENVIRONMENTS.CANVAS)||!h.getClientID()||!d)return;if(Math.random()>1/d||v=="*"||~g(v,"indexOf",!0,h.getClientID()))return;i(b,3e4)}function E(e){m=e}function S(e){y.push(e)}r.__markCompiled&&r.__markCompiled();var p={AUTOMATIC:0,MANUAL:1},d=c.sampleRate,v=c.blacklist,m=p.AUTOMATIC,y=[],x={COLLECT_AUTOMATIC:p.AUTOMATIC,COLLECT_MANUAL:p.MANUAL,addStaticResource:S,setCollectionMode:E,_maybeSample:w};u.exports=x},null),m("legacy:fb.canvas.prefetcher",["FB","sdk.Canvas.Prefetcher","sdk.Event","sdk.Runtime"],function(t,n,r,i,s,o,u,a,f,l){n.__markCompiled&&n.__markCompiled(),u.provide("Canvas.Prefetcher",a),f.subscribe("init:post",function(e){l.isEnvironment(l.ENVIRONMENTS.CANVAS)&&a._maybeSample()})},3),m("legacy:fb.canvas.presence",["sdk.RPC","sdk.Event"],function(t,n,r,i,s,o,u,a){function f(e,t){if(e!="canvas.friendsOnlineUpdated")return;t.length===1&&u.remote.useFriendsOnline(!0)}function l(e,t){if(e!="canvas.friendsOnlineUpdated")return;t.length===0&&u.remote.useFriendsOnline(!1)}n.__markCompiled&&n.__markCompiled(),a.subscribe(a.SUBSCRIBE,f),a.subscribe(a.UNSUBSCRIBE,l),u.stub("useFriendsOnline")},3),m("legacy:fb.event",["FB","sdk.Event","sdk.Runtime","sdk.Scribe","sdk.feature"],function(t,n,r,s,o,u,a,f,l,c,h){n.__markCompiled&&n.__markCompiled();var p=[],d=null,v=h("event_subscriptions_log",!1);a.provide("Event",{subscribe:function(e,t){return v&&(p.push(e),d||(d=i(function(){c.log("jssdk_error",{appId:l.getClientID(),error:"EVENT_SUBSCRIPTIONS_LOG",extra:{line:0,name:"EVENT_SUBSCRIPTIONS_LOG",script:"N/A",stack:"N/A",message:p.sort().join(",")}}),p.length=0,d=null},v))),f.subscribe(e,t)},unsubscribe:g(f.unsubscribe,"bind",!0,f)})},3),m("legacy:fb.frictionless",["FB","sdk.Frictionless"],function(t,n,r,i,s,o,u,a){n.__markCompiled&&n.__markCompiled(),u.provide("Frictionless",a)},3),m("sdk.init",["sdk.Cookie","sdk.ErrorHandling","sdk.Event","Log","ManagedError","sdk.PlatformVersioning","QueryString","sdk.Runtime","sdk.URI","createArrayFromMixed"],function(r,s,o,u,a,f,l,c,h,p,d,v,m,y,b,w){function E(e){var t=typeof e=="number"&&e>0||typeof e=="string"&&/^[0-9a-f]{21,}$|^[0-9]{1,21}$/.test(e);return t?e.toString():(p.warn("Invalid App Id: Must be a number or numeric string representing the application id."),null)}function S(e){y.getInitialized()&&p.warn("FB.init has already been called - this could indicate a problem");if(y.getIsVersioned()){if(Object.prototype.toString.call(e)!=="[object Object]")throw new d("Invalid argument");e.authResponse&&p.warn("Setting authResponse is not supported"),e.version||(e.version=(new b(location.href)).getQueryData().sdk_version),v.assertValidVersion(e.version),y.setVersion(e.version)}else/number|string/.test(typeof e)&&(p.warn("FB.init called with invalid parameters"),e={apiKey:e}),e=g("Object","assign",!1,{status:!0},e||{});var t=E(e.appId||e.apiKey);t!==null&&y.setClientID(t),"scope"in e&&y.setScope(e.scope),e.cookie&&(y.setUseCookie(!0),typeof e.cookie=="string"&&l.setDomain(e.cookie)),e.kidDirectedSite&&y.setKidDirectedSite(!0),y.setInitialized(!0),h.fire("init:post",e)}s.__markCompiled&&s.__markCompiled(),i(function(){var t=/(connect\.facebook\.net|\.facebook\.com\/assets.php).*?#(.*)/;g(w(n.getElementsByTagName("script")),"forEach",!0,function(e){if(e.src){var n=t.exec(e.src);if(n){var r=m.decode(n[2]);for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s=="0"&&(r[i]=0)}S(r)}}}),e.fbAsyncInit&&!e.fbAsyncInit.hasRun&&(e.fbAsyncInit.hasRun=!0,c.unguard(e.fbAsyncInit)())},0),a.exports=S},null),m("legacy:fb.init",["FB","sdk.init"],function(t,n,r,i,s,o,u,a){n.__markCompiled&&n.__markCompiled(),u.provide("",{init:a})},3),m("legacy:fb.ui",["FB","sdk.ui"],function(t,n,r,i,s,o,u,a){n.__markCompiled&&n.__markCompiled(),u.provide("",{ui:a})},3),m("runOnce",[],function(t,n,r,i,s,o){function u(e){var t,n;return function(){return t||(t=!0,n=e()),n}}n.__markCompiled&&n.__markCompiled(),s.exports=u},null),m("XFBML",["Assert","sdk.DOM","Log","ObservableMixin","sdk.UA","createArrayFromMixed","runOnce"],function(t,s,o,u,a,f,l,c,h,p,d,v,m){function S(e,t){return g(e[t]+"","trim",!0)}function x(e){return e.scopeName?e.scopeName+":"+e.nodeName:""}function T(e){return y[S(e,"nodeName").toLowerCase()]||y[x(e).toLowerCase()]}function N(e){var t=g(S(e,"className").split(/\s+/),"filter",!0,function(e){return b.hasOwnProperty(e)});if(t.length===0)return r;if(e.getAttribute("fb-xfbml-state")||!e.childNodes||e.childNodes.length===0||e.childNodes.length===1&&e.childNodes[0].nodeType===3||e.children.length===1&&S(e.children[0],"className")==="fb-xfbml-parse-ignore")return b[t[0]]}function C(e){var t={};return g(v(e.attributes),"forEach",!0,function(e){t[S(e,"name")]=S(e,"value")}),t}function k(e,t,r){var i=n.createElement("div");return c.addCss(e,t+"-"+r),g(v(e.childNodes),"forEach",!0,function(e){i.appendChild(e)}),g(v(e.attributes),"forEach",!0,function(e){i.setAttribute(e.name,e.value)}),e.parentNode.replaceChild(i,e),i}function L(e,t,n){l.isTrue(e&&e.nodeType&&e.nodeType===1&&!!e.getElementsByTagName,"Invalid DOM node passed to FB.XFBML.parse()"),l.isFunction(t,"Invalid callback passed to FB.XFBML.parse()");var r=++w;h.info("XFBML Parsing Start %s",r);var s=1,o=0,u=function(){s--,s===0&&(h.info("XFBML Parsing Finish %s, %s tags found",r,o),t(),E.inform("render",r,o)),l.isTrue(s>=0,"onrender() has been called too many times")};g(v(e.getElementsByTagName("*")),"forEach",!0,function(e){if(!n&&e.getAttribute("fb-xfbml-state"))return;if(e.nodeType!==1)return;var t=T(e)||N(e);if(!t)return;d.ie()<9&&e.scopeName&&(e=k(e,t.xmlns,t.localName)),s++,o++;var r=new t.ctor(e,t.xmlns,t.localName,C(e));r.subscribe("render",m(function(){e.setAttribute("fb-xfbml-state","rendered"),u()}));var i=function(){e.getAttribute("fb-xfbml-state")=="parsed"?E.subscribe("render.queue",i):(e.setAttribute("fb-xfbml-state","parsed"),r.process())};i()}),E.inform("parse",r,o);var a=3e4;i(function(){s>0&&h.warn("%s tags failed to render in %s ms",s,a)},a),u()}s.__markCompiled&&s.__markCompiled();var y={},b={},w=0,E=new p;E.subscribe("render",function(){var e=E.getSubscribers("render.queue");E.clearSubscribers("render.queue"),g(e,"forEach",!0,function(e){e()})}),g("Object","assign",!1,E,{registerTag:function(e){var t=e.xmlns+":"+e.localName;l.isUndefined(y[t],t+" already registered"),y[t]=e,b[e.xmlns+"-"+e.localName]=e},parse:function(e,t){L(e||n.body,t||function(){},!0)},parseNew:function(){L(n.body,function(){},!1)}}),a.exports=E},null),m("PluginPipe",["sdk.Content","sdk.feature","guid","insertIframe","Miny","ObservableMixin","JSSDKPluginPipeConfig","sdk.Runtime","sdk.UA","UrlMap","XFBML"],function(t,i,s,o,u,a,f,l,c,h,p,d,v,m,y,b,w){function T(){return!(!l("plugin_pipe",!1)||m.getSecure()===r||!y.chrome()&&!y.firefox()||!v.enabledApps[m.getClientID()])}function N(){function n(){t--,t===0&&C(e)}var e=x;x=[];if(e.length<=S){g(e,"forEach",!0,function(e){h(e.config)});return}var t=e.length+1;g(e,"forEach",!0,function(e){var t={};for(var r in e.config)t[r]=e.config[r];t.url=b.resolve("www",m.getSecure())+"/plugins/plugin_pipe_shell.php",t.onload=n,h(t)}),n()}function C(e){var t=n.createElement("span");f.appendHidden(t);var r={};g(e,"forEach",!0,function(e){r[e.config.name]={plugin:e.tag,params:e.params}});var i=g("JSON","stringify",!1,r),s=p.encode(i);g(e,"forEach",!0,function(e){var t=n.getElementsByName(e.config.name)[0];t.onload=e.config.onload});var o=b.resolve("www",m.getSecure())+"/plugins/pipe.php",u=c();h({url:"about:blank",root:t,name:u,className:"fb_hidden fb_invisible",onload:function(){f.submitToTarget({url:o,target:u,params:{plugins:s.length<i.length?s:i}})}})}i.__markCompiled&&i.__markCompiled();var E=new d,S=v.threshold,x=[];w.subscribe("parse",N),g("Object","assign",!1,E,{add:function(e){var t=T();return t&&x.push({config:e._config,tag:e._tag,params:e._params}),t}}),u.exports=E},null),m("IframePlugin",["sdk.Auth","sdk.DOM","sdk.Event","Log","ObservableMixin","sdk.PlatformVersioning","PluginPipe","QueryString","sdk.Runtime","Type","sdk.UA","sdk.URI","UrlMap","sdk.XD","sdk.createIframe","sdk.feature","guid","resolveURI"],function(s,u,a,f,l,c,h,p,d,v,m,y,b,w,E,S,x,T,N,C,k,L,A,O){function _(e,t,n){if(t||t===0)t==="100%"?e.style.width="100%":e.style.width=t+"px";if(n||n===0)e.style.height=n+"px"}function D(e){return function(t){var n={width:t.width,height:t.height,pluginID:e};d.fire("xfbml.resize",n)}}function H(e,t){var n=e[t]||e[t.replace(/_/g,"-")]||e[t.replace(/_/g,"")]||e["data-"+t]||e["data-"+t.replace(/_/g,"-")]||e["data-"+t.replace(/_/g,"")]||r;return n}function B(e,t,n,r){g(g("Object","keys",!1,e),"forEach",!0,function(i){e[i]=="text"&&!n[i]&&(n[i]=t.textContent||t.innerText||"",t.setAttribute(i,n[i])),r[i]=P[e[i]](H(n,i))})}function j(e){return e==="100%"?"100%":e||e==="0"||e===0?parseInt(e,10):r}function F(e){e&&_(e,0,0)}u.__markCompiled&&u.__markCompiled();var M={skin:"string",font:"string",width:"px",height:"px",ref:"string",color_scheme:"string"},P={string:function(e){return e},bool:function(e){return e?/^(?:true|1|yes|on)$/i.test(e):r},url:function(e){return O(e)},url_maybe:function(e){return e?O(e):e},hostname:function(t){return t||e.location.hostname},px:function(e){return/^(\d+)(?:px)?$/.test(e)?parseInt(RegExp.$1,10):r},text:function(e){return e}},I=S.extend({constructor:function(t,r,i,s){this.parent(),i=i.replace(/-/g,"_");var u=H(s,"plugin_id");this.subscribe("xd.resize",D(u)),this.subscribe("xd.resize.flow",D(u)),this.subscribe("xd.resize.flow",g(function(e){g("Object","assign",!1,this._iframeOptions.root.style,{verticalAlign:"bottom",overflow:""}),_(this._iframeOptions.root,j(e.width),j(e.height)),this.updateLift(),o(this._timeoutID)},"bind",!0,this)),this.subscribe("xd.resize",g(function(e){g("Object","assign",!1,this._iframeOptions.root.style,{verticalAlign:"bottom",overflow:""}),_(this._iframeOptions.root,j(e.width),j(e.height)),_(this._iframe,j(e.width),j(e.height)),this._isIframeResized=!0,this.updateLift(),o(this._timeoutID)},"bind",!0,this)),this.subscribe("xd.resize.iframe",g(function(e){e.reposition==="true"&&L("reposition_iframe",!1)&&this.reposition(j(e.width)),_(this._iframe,j(e.width),j(e.height)),this._isIframeResized=!0,this.updateLift(),o(this._timeoutID)},"bind",!0,this)),this.subscribe("xd.sdk_event",function(e){var n=g("JSON","parse",!1,e.data);n.pluginID=u,d.fire(e.event,n,t)});var a=E.getSecure()||e.location.protocol=="https:",f=N.resolve("www",a)+"/plugins/"+i+".php?",l={};B(this.getParams(),t,s,l),B(M,t,s,l),g("Object","assign",!1,l,{app_id:E.getClientID(),locale:E.getLocale(),sdk:"joey",kid_directed_site:E.getKidDirectedSite(),channel:C.handler(g(function(e){return this.inform("xd."+e.type,e)},"bind",!0,this),"parent.parent",!0)}),l.container_width=t.offsetWidth,p.addCss(t,"fb_iframe_widget");var c=A();this.subscribe("xd.verify",function(e){C.sendToFacebook(c,{method:"xd/verify",params:g("JSON","stringify",!1,e.token)})}),this.subscribe("xd.refreshLoginStatus",g(h.getLoginStatus,"bind",!0,h,g(this.inform,"bind",!0,this,"login.status"),!0));var v=n.createElement("span");g("Object","assign",!1,v.style,{verticalAlign:"top",width:"0px",height:"0px",overflow:"hidden"}),this._element=t,this._ns=r,this._tag=i,this._params=l,this._config=this.getConfig(),this._iframeOptions={root:v,url:f+w.encode(l),name:c,width:this._config.mobile_fullsize&&x.mobile()?void 0:l.width||1e3,height:l.height||1e3,style:{border:"none",visibility:"hidden"},title:this._ns+":"+this._tag+" Facebook Social Plugin",onload:g(function(){return this.inform("render")},"bind",!0,this),onerror:g(function(){return F(this._iframe)},"bind",!0,this)},this.isFluid()&&(p.addCss(this._element,"fb_iframe_widget_fluid_desktop"),!l.width&&this._config.full_width&&(this._element.style.width="100%",this._iframeOptions.root.style.width="100%",this._iframeOptions.style.width="100%",this._params.container_width=this._element.offsetWidth,this._iframeOptions.url=f+w.encode(this._params)))},process:function(){if(E.getIsVersioned()){y.assertVersionIsSet();var e=new T(this._iframeOptions.url);this._iframeOptions.url=e.setPath("/"+E.getVersion()+e.getPath()).toString()}var t=g("Object","assign",!1,{},this._params);delete t.channel;var n=w.encode(t);if(this._element.getAttribute("fb-iframe-plugin-query")==n){v.info("Skipping render: %s:%s %s",this._ns,this._tag,n),this.inform("render");return}this._element.setAttribute("fb-iframe-plugin-query",n),this.subscribe("render",g(function(){this._iframe.style.visibility="visible",this._isIframeResized||F(this._iframe)},"bind",!0,this));while(this._element.firstChild)this._element.removeChild(this._element.firstChild);this._element.appendChild(this._iframeOptions.root);var r=x.mobile()?120:45;this._timeoutID=i(g(function(){F(this._iframe),v.warn("%s:%s failed to resize in %ss",this._ns,this._tag,r)},"bind",!0,this),r*1e3),b.add(this)||(this._iframe=k(this._iframeOptions));if(x.mobile()){p.addCss(this._element,"fb_iframe_widget_fluid");if(!this._iframeOptions.width){g("Object","assign",!1,this._element.style,{display:"block",width:"100%",height:"auto"}),g("Object","assign",!1,this._iframeOptions.root.style,{width:"100%",height:"auto"});var s={height:"auto",position:"static",width:"100%"};(x.iphone()||x.ipad())&&g("Object","assign",!1,s,{width:"220px","min-width":"100%"}),g("Object","assign",!1,this._iframe.style,s)}}},getConfig:function(){return{}},isFluid:function(){var e=this.getConfig();return e.fluid},reposition:function(e){var t=p.getPosition(this._iframe).x,n=p.getViewportInfo().width,r=parseInt(p.getStyle(this._iframe,"width"),10),i={};if(t+e>n&&t>e)this._iframe.style.left=parseInt(p.getStyle(this._iframe,"width"),10)-e+"px",this._isRepositioned=!0,i.type="reposition";else{if(!this._isRepositioned||r-e===0)return;this._iframe.style.left="0px",this._isRepositioned=!1,i.type="restore"}C.sendToFacebook(this._iframe.name,{method:"xd/reposition",params:g("JSON","stringify",!1,i)})},updateLift:function(){var e=this._iframe.style.width===this._iframeOptions.root.style.width&&this._iframe.style.height===this._iframeOptions.root.style.height;p[e?"removeCss":"addCss"](this._iframe,"fb_iframe_widget_lift")}},m);I.getVal=H,I.withParams=function(e,t){return I.extend({getParams:function(){return e},getConfig:function(){return t?t:{}}})},l.exports=I},null),m("PluginConfig",["sdk.feature"],function(t,n,r,i,s,o,u){n.__markCompiled&&n.__markCompiled();var a={messengerpreconfirmation:{mobile_fullsize:!0},messengeraccountconfirmation:{mobile_fullsize:!0},messengerbusinesslink:{mobile_fullsize:!0},messengertoggle:{mobile_fullsize:!0},messengermessageus:{mobile_fullsize:!0},post:{fluid:u("fluid_embed",!1),mobile_fullsize:!0}};s.exports=a},null),m("PluginTags",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={composer:{action_type:"string",action_properties:"string"},create_event_button:{},follow:{href:"url",layout:"string",show_faces:"bool"},like:{href:"url",layout:"string",show_faces:"bool",share:"bool",action:"string",send:"bool"},like_box:{href:"string",show_faces:"bool",header:"bool",stream:"bool",force_wall:"bool",show_border:"bool",id:"string",connections:"string",profile_id:"string",name:"string"},page:{href:"string",hide_cta:"bool",hide_cover:"bool",small_header:"bool",adapt_container_width:"bool",show_facepile:"bool",show_posts:"bool",tabs:"string"},messengerpreconfirmation:{messenger_app_id:"string"},messengeraccountconfirmation:{messenger_app_id:"string",state:"string"},messengerbusinesslink:{messenger_app_id:"string",state:"string"},messengertoggle:{messenger_app_id:"string",token:"string"},messengermessageus:{messenger_app_id:"string",color:"string",size:"string"},page_events:{href:"url"},post:{href:"url",show_border:"bool"},privacy_selector:{},profile_pic:{uid:"string",linked:"bool",href:"string",size:"string",facebook_logo:"bool"},send:{href:"url"},send_to_mobile:{max_rows:"string",show_faces:"bool",size:"string"},story:{href:"url",show_border:"bool"},topic:{topic_name:"string",topic_id:"string"}},a={subscribe:"follow",fan:"like_box",likebox:"like_box"};g(g("Object","keys",!1,a),"forEach",!0,function(e){u[e]=u[a[e]]}),s.exports=u},null),m("sdk.Arbiter",[],function(t,n,r,i,s,o){n.__markCompiled&&n.__markCompiled();var u={BEHAVIOR_EVENT:"e",BEHAVIOR_PERSISTENT:"p",BEHAVIOR_STATE:"s"};s.exports=u},null),m("sdk.XFBML.Element",["sdk.DOM","Type","ObservableMixin"],function(t,r,i,s,o,u,a,f,l){r.__markCompiled&&r.__markCompiled();var c=f.extend({constructor:function(e){this.parent(),this.dom=e},fire:function(){this.inform.apply(this,arguments)},getAttribute:function(e,t,n){var r=a.getAttr(this.dom,e);return r?n?n(r):r:t},_getBoolAttribute:function(e,t){var n=a.getBoolAttr(this.dom,e);return n===null?t:n},_getPxAttribute:function(e,t){return this.getAttribute(e,t,function(e){var n=parseInt(e,10);return isNaN(n)?t:n})},_getLengthAttribute:function(e,t){return this.getAttribute(e,t,function(e){if(e==="100%")return e;var n=parseInt(e,10);return isNaN(n)?t:n})},_getAttributeFromList:function(e,t,n){return this.getAttribute(e,t,function(e){return e=e.toLowerCase(),g(n,"indexOf",!0,e)>-1?e:t})},isValid:function(){for(var e=this.dom;e;e=e.parentNode)if(e==n.body)return!0},clear:function(){a.html(this.dom,"")}},l);o.exports=c},null),m("sdk.XFBML.IframeWidget",["sdk.Arbiter","sdk.Auth","sdk.Content","sdk.DOM","sdk.Event","sdk.XFBML.Element","guid","insertIframe","QueryString","sdk.Runtime","sdk.ui","UrlMap","sdk.XD"],function(t,r,i,s,o,u,a,f,l,c,h,p,d,v,m,y,b,w,E){function N(){var e={};for(var t in T){var n=T[t];e[t]={widget:n.getUrlBits().name,params:n._getQS()}}return e}r.__markCompiled&&r.__markCompiled();var S=p.extend({_iframeName:null,_showLoader:!0,_refreshOnAuthChange:!1,_allowReProcess:!1,_fetchPreCachedLoader:!1,_visibleAfter:"load",_widgetPipeEnabled:!1,_borderReset:!1,_repositioned:!1,getUrlBits:function(){throw new Error("Inheriting class needs to implement getUrlBits().")},setupAndValidate:function(){return!0},oneTimeSetup:function(){},getSize:function(){},getIframeName:function(){return this._iframeName},getIframeTitle:function(){return"Facebook Social Plugin"},getChannelUrl:function(){if(!this._channelUrl){var e=this;this._channelUrl=E.handler(function(t){e.fire("xd."+t.type,t)},"parent.parent",!0)}return this._channelUrl},getIframeNode:function(){return this.dom.getElementsByTagName("iframe")[0]},arbiterInform:function(e,t,n){E.sendToFacebook(this.getIframeName(),{method:e,params:g("JSON","stringify",!1,t||{}),behavior:n||a.BEHAVIOR_PERSISTENT})},_arbiterInform:function(e,t,n){var r='parent.frames["'+this.getIframeNode().name+'"]';E.inform(e,t,r,n)},getDefaultWebDomain:function(){return w.resolve("www")},process:function(e){if(this._done){if(!this._allowReProcess&&!e)return;this.clear()}else this._oneTimeSetup();this._done=!0,this._iframeName=this.getIframeName()||this._iframeName||d();if(!this.setupAndValidate()){this.fire("render");return}this._showLoader&&this._addLoader(),c.addCss(this.dom,"fb_iframe_widget"),this._visibleAfter!="immediate"?c.addCss(this.dom,"fb_hide_iframes"):this.subscribe("iframe.onload",g(this.fire,"bind",!0,this,"render"));var t=this.getSize()||{},r=this.getFullyQualifiedURL();t.width=="100%"&&c.addCss(this.dom,"fb_iframe_widget_fluid"),this.clear(),v({url:r,root:this.dom.appendChild(n.createElement("span")),name:this._iframeName,title:this.getIframeTitle(),className:y.getRtl()?"fb_rtl":"fb_ltr",height:t.height,width:t.width,onload:g(this.fire,"bind",!0,this,"iframe.onload")}),this._resizeFlow(t),this.loaded=!1,this.subscribe("iframe.onload",g(function(){this.loaded=!0,this._isResizeHandled||c.addCss(this.dom,"fb_hide_iframes")},"bind",!0,this))},generateWidgetPipeIframeName:function(){return x++,"fb_iframe_"+x},getFullyQualifiedURL:function(){var e=this._getURL();e+="?"+m.encode(this._getQS());if(e.length>2e3){e="about:blank";var t=g(function(){this._postRequest(),this.unsubscribe("iframe.onload",t)},"bind",!0,this);this.subscribe("iframe.onload",t)}return e},_getWidgetPipeShell:function(){return w.resolve("www")+"/common/widget_pipe_shell.php"},_oneTimeSetup:function(){this.subscribe("xd.resize",g(this._handleResizeMsg,"bind",!0,this)),this.subscribe("xd.resize",g(this._bubbleResizeEvent,"bind",!0,this)),this.subscribe("xd.resize.iframe",g(this._resizeIframe,"bind",!0,this)),this.subscribe("xd.resize.flow",g(this._resizeFlow,"bind",!0,this)),this.subscribe("xd.resize.flow",g(this._bubbleResizeEvent,"bind",!0,this)),this.subscribe("xd.refreshLoginStatus",function(){f.getLoginStatus(function(){},!0)}),this.subscribe("xd.logout",function(){b({method:"auth.logout",display:"hidden"},function(){})}),this._refreshOnAuthChange&&this._setupAuthRefresh(),this._visibleAfter=="load"&&this.subscribe("iframe.onload",g(this._makeVisible,"bind",!0,this)),this.subscribe("xd.verify",g(function(e){this.arbiterInform("xd/verify",e.token)},"bind",!0,this)),this.oneTimeSetup()},_makeVisible:function(){this._removeLoader(),c.removeCss(this.dom,"fb_hide_iframes"),this.fire("render")},_setupAuthRefresh:function(){f.getLoginStatus(g(function(e){var t=e.status;h.subscribe("auth.statusChange",g(function(e){if(!this.isValid())return;(t=="unknown"||e.status=="unknown")&&this.process(!0),t=e.status},"bind",!0,this))},"bind",!0,this))},_handleResizeMsg:function(e){if(!this.isValid())return;this._resizeIframe(e),this._resizeFlow(e),this._borderReset||(this.getIframeNode().style.border="none",this._borderReset=!0),this._isResizeHandled=!0,this._makeVisible()},_bubbleResizeEvent:function(e){var t={height:e.height,width:e.width,pluginID:this.getAttribute("plugin-id")};h.fire("xfbml.resize",t)},_resizeIframe:function(e){var t=this.getIframeNode();e.reposition==="true"&&this._repositionIframe(e),e.height&&(t.style.height=e.height+"px"),e.width&&(t.style.width=e.width+"px"),this._updateIframeZIndex()},_resizeFlow:function(e){var t=this.dom.getElementsByTagName("span")[0];e.height&&(t.style.height=e.height+"px"),e.width&&(t.style.width=e.width+"px"),this._updateIframeZIndex()},_updateIframeZIndex:function(){var e=this.dom.getElementsByTagName("span")[0],t=this.getIframeNode(),n=t.style.height===e.style.height&&t.style.width===e.style.width,r=n?"removeCss":"addCss";c[r](t,"fb_iframe_widget_lift")},_repositionIframe:function(e){var t=this.getIframeNode(),n=parseInt(c.getStyle(t,"width"),10),r=c.getPosition(t).x,i=c.getViewportInfo().width,s=parseInt(e.width,10);r+s>i&&r>s?(t.style.left=n-s+"px",this.arbiterInform("xd/reposition",{type:"horizontal"}),this._repositioned=!0):this._repositioned&&(t.style.left="0px",this.arbiterInform("xd/reposition",{type:"restore"}),this._repositioned=!1)},_addLoader:function(){this._loaderDiv||(c.addCss(this.dom,"fb_iframe_widget_loader"),this._loaderDiv=n.createElement("div"),this._loaderDiv.className="FB_Loader",this.dom.appendChild(this._loaderDiv))},_removeLoader:function(){this._loaderDiv&&(c.removeCss(this.dom,"fb_iframe_widget_loader"),this._loaderDiv.parentNode&&this._loaderDiv.parentNode.removeChild(this._loaderDiv),this._loaderDiv=null)},_getQS:function(){return g("Object","assign",!1,{api_key:y.getClientID(),locale:y.getLocale(),sdk:"joey",kid_directed_site:y.getKidDirectedSite(),ref:this.getAttribute("ref")},this.getUrlBits().params)},_getURL:function(){var e=this.getDefaultWebDomain(),t="";return e+"/plugins/"+t+this.getUrlBits().name+".php"},_postRequest:function(){l.submitToTarget({url:this._getURL(),target:this.getIframeNode().name,params:this._getQS()})}}),x=0,T={};o.exports=S},null),m("sdk.XFBML.Comments",["sdk.Event","sdk.XFBML.IframeWidget","QueryString","sdk.Runtime","JSSDKConfig","sdk.UA","UrlMap","sdk.feature"],function(r,i,s,o,u,a,f,l,c,h,p,d,v,m){i.__markCompiled&&i.__markCompiled();var y=l.extend({_visibleAfter:"immediate",_refreshOnAuthChange:!0,setupAndValidate:function(){var t={channel_url:this.getChannelUrl(),colorscheme:this.getAttribute("colorscheme"),skin:this.getAttribute("skin"),numposts:this.getAttribute("num-posts",10),width:this._getLengthAttribute("width"),href:this.getAttribute("href"),permalink:this.getAttribute("permalink"),publish_feed:this.getAttribute("publish_feed"),order_by:this.getAttribute("order_by"),mobile:this._getBoolAttribute("mobile"),version:this.getAttribute("version")};!t.width&&!t.permalink&&(t.width=550),p.initSitevars.enableMobileComments&&d.mobile()&&t.mobile!==!1&&(t.mobile=!0,delete t.width),t.skin||(t.skin=t.colorscheme);if(!t.href){t.migrated=this.getAttribute("migrated"),t.xid=this.getAttribute("xid"),t.title=this.getAttribute("title",n.title),t.url=this.getAttribute("url",n.URL),t.quiet=this.getAttribute("quiet"),t.reverse=this.getAttribute("reverse"),t.simple=this.getAttribute("simple"),t.css=this.getAttribute("css"),t.notify=this.getAttribute("notify");if(!t.xid){var r=g(n.URL,"indexOf",!0,"#");r>0?t.xid=encodeURIComponent(n.URL.substring(0,r)):t.xid=encodeURIComponent(n.URL)}t.migrated&&(t.href=v.resolve("www")+"/plugins/comments_v1.php?"+"app_id="+h.getClientID()+"&xid="+encodeURIComponent(t.xid)+"&url="+encodeURIComponent(t.url))}else{var i=this.getAttribute("fb_comment_id");i||(i=c.decode(n.URL.substring(g(n.URL,"indexOf",!0,"?")+1)).fb_comment_id,i&&g(i,"indexOf",!0,"#")>0&&(i=i.substring(0,g(i,"indexOf",!0,"#")))),i&&(t.fb_comment_id=i,this.subscribe("render",g(function(){e.location.hash||(e.location.hash=this.getIframeNode().id)},"bind",!0,this)))}return t.version||(t.version=h.getVersion()),this._attr=t,!0},oneTimeSetup:function(){this.subscribe("xd.commentCreated",g(this._handleCommentCreatedMsg,"bind",!0,this)),this.subscribe("xd.commentRemoved",g(this._handleCommentRemovedMsg,"bind",!0,this))},getSize:function(){if(!this._attr.permalink)return{width:this._attr.mobile?"100%":this._attr.width,height:100}},getUrlBits:function(){return{name:"comments",params:this._attr}},getDefaultWebDomain:function(){return this._attr.mobile&&!m("one_comment_controller",!1)&&this._attr.version!=="v2.3"?v.resolve("m",!0):v.resolve("www",!0)},_handleCommentCreatedMsg:function(e){if(!this.isValid())return;var t={href:e.href,commentID:e.commentID,parentCommentID:e.parentCommentID,message:e.message};f.fire("comment.create",t)},_handleCommentRemovedMsg:function(e){if(!this.isValid())return;var t={href:e.href,commentID:e.commentID};f.fire("comment.remove",t)}});u.exports=y},null),m("sdk.XFBML.CommentsCount",["ApiClient","sdk.DOM","sdk.XFBML.Element","sprintf"],function(n,r,i,s,o,u,a,f,l,c){r.__markCompiled&&r.__markCompiled();var h=l.extend({process:function(){f.addCss(this.dom,"fb_comments_count_zero");var t=this.getAttribute("href",e.location.href);a.scheduleBatchCall("/v2.1/"+encodeURIComponent(t),{fields:"share"},g(function(e){var t=e.share&&e.share.comment_count||0;f.html(this.dom,c('<span class="fb_comments_count">%s</span>',t)),t>0&&f.removeCss(this.dom,"fb_comments_count_zero"),this.fire("render")},"bind",!0,this))}});o.exports=h},null),m("safeEval",[],function(n,r,i,s,o,u){function a(t,n){if(t===null||typeof t=="undefined")return;return typeof t!="string"?t:/^\w+$/.test(t)&&typeof e[t]=="function"?e[t].apply(null,n||[]):Function('return eval("'+t.replace(/"/g,'\\"')+'");').apply(null,n||[])}r.__markCompiled&&r.__markCompiled(),o.exports=a},null),m("sdk.Helper",["sdk.ErrorHandling","sdk.Event","UrlMap","safeEval","sprintf"],function(n,r,i,s,o,u,a,f,l,c,h){r.__markCompiled&&r.__markCompiled();var p={isUser:function(e){return e<22e8||e>=1e14&&e<=0x5b0a58f100ef||e>=89e12&&e<=89999999999999||e>=6000001e7&&e<=60000019999999},upperCaseFirstChar:function(e){return e.length>0?e.substr(0,1).toUpperCase()+e.substr(1):e},getProfileLink:function(e,t,n){return!n&&e&&(n=h("%s/profile.php?id=%s",l.resolve("www"),e.uid||e.id)),n&&(t=h('<a class="fb_link" href="%s">%s</a>',n,t)),t},invokeHandler:function(e,t,n){e&&(typeof e=="string"?a.unguard(c)(e,n):e.apply&&a.unguard(e).apply(t,n||[]))},fireEvent:function(e,t){var n=t._attr.href;t.fire(e,n),f.fire(e,n,t)},executeFunctionByName:function(t){var n=Array.prototype.slice.call(arguments,1),r=t.split("."),i=r.pop(),s=e;for(var o=0;o<r.length;o++)s=s[r[o]];return s[i].apply(this,n)}};o.exports=p},null),m("sdk.XFBML.LoginButton",["sdk.Helper","IframePlugin","sdk.ui"],function(t,n,r,i,s,o,u,a,f){n.__markCompiled&&n.__markCompiled();var l=a.extend({constructor:function(e,t,n,r){this.parent(e,t,n,r);var i=a.getVal(r,"on_login");i&&this.subscribe("login.status",function(e){u.invokeHandler(i,null,[e])}),this.subscribe("xd.login_button_native_open",function(e){f(g("JSON","parse",!1,e.params))})},getParams:function(){return{scope:"string",perms:"string",size:"string",login_text:"text",show_faces:"bool",max_rows:"string",show_login_face:"bool",registration_url:"url_maybe",auto_logout_link:"bool",one_click:"bool",show_banner:"bool",auth_type:"string",default_audience:"string"}}});s.exports=l},null),m("escapeHTML",[],function(t,n,r,i,s,o){function f(e){return e.replace(u,function(e){return a[e]})}n.__markCompiled&&n.__markCompiled();var u=/[&<>"'\/]/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","/":"&#x2F;"};s.exports=f},null),m("sdk.XFBML.Name",["ApiClient","escapeHTML","sdk.Event","sdk.XFBML.Element","sdk.Helper","Log","sdk.Runtime"],function(t,n,i,s,o,u,a,f,l,c,h,p,d){n.__markCompiled&&n.__markCompiled();var v={}.hasOwnProperty,m=c.extend({process:function(){g("Object","assign",!1,this,{_uid:this.getAttribute("uid"),_firstnameonly:this._getBoolAttribute("first-name-only"),_lastnameonly:this._getBoolAttribute("last-name-only"),_possessive:this._getBoolAttribute("possessive"),_reflexive:this._getBoolAttribute("reflexive"),_objective:this._getBoolAttribute("objective"),_linked:this._getBoolAttribute("linked",!0),_subjectId:this.getAttribute("subject-id")});if(!this._uid){p.error('"uid" is a required attribute for <fb:name>'),this.fire("render");return}var e=[];this._firstnameonly?e.push("first_name"):this._lastnameonly?e.push("last_name"):e.push("name"),this._subjectId&&(e.push("gender"),this._subjectId==d.getUserID()&&(this._reflexive=!0)),l.monitor("auth.statusChange",g(function(){if(!this.isValid())return this.fire("render"),!0;if(!this._uid||this._uid=="loggedinuser")this._uid=d.getUserID();if(!this._uid)return;a.scheduleBatchCall("/v1.0/"+this._uid,{fields:e.join(",")},g(function(e){if(v.call(e,"error")){p.warn("The name is not found for ID: "+this._uid);return}this._subjectId==this._uid?this._renderPronoun(e):this._renderOther(e),this.fire("render")},"bind",!0,this))},"bind",!0,this))},_renderPronoun:function(e){var t="",n=this._objective;this._subjectId&&(n=!0,this._subjectId===this._uid&&(this._reflexive=!0));if(this._uid==d.getUserID()&&this._getBoolAttribute("use-you",!0))this._possessive?this._reflexive?t="your own":t="your":this._reflexive?t="yourself":t="you";else switch(e.gender){case"male":this._possessive?t=this._reflexive?"his own":"his":this._reflexive?t="himself":n?t="him":t="he";break;case"female":this._possessive?t=this._reflexive?"her own":"her":this._reflexive?t="herself":n?t="her":t="she";break;default:this._getBoolAttribute("use-they",!0)?this._possessive?this._reflexive?t="their own":t="their":this._reflexive?t="themselves":n?t="them":t="they":this._possessive?this._reflexive?t="his/her own":t="his/her":this._reflexive?t="himself/herself":n?t="him/her":t="he/she"}this._getBoolAttribute("capitalize",!1)&&(t=h.upperCaseFirstChar(t)),this.dom.innerHTML=t},_renderOther:function(e){var t="",n="";this._uid==d.getUserID()&&this._getBoolAttribute("use-you",!0)?this._reflexive?this._possessive?t="your own":t="yourself":this._possessive?t="your":t="you":e&&(null===e.first_name&&(e.first_name=""),null===e.last_name&&(e.last_name=""),this._firstnameonly&&e.first_name!==r?t=f(e.first_name):this._lastnameonly&&e.last_name!==r&&(t=f(e.last_name)),t||(t=f(e.name)),t!==""&&this._possessive&&(t+="'s")),t||(t=f(this.getAttribute("if-cant-see","Facebook User"))),t&&(this._getBoolAttribute("capitalize",!1)&&(t=h.upperCaseFirstChar(t)),e&&this._linked?n=h.getProfileLink(e,t,this.getAttribute("href",null)):n=t),this.dom.innerHTML=n}});o.exports=m},null),m("sdk.XFBML.Registration",["sdk.Auth","sdk.Helper","sdk.XFBML.IframeWidget","sdk.Runtime","UrlMap"],function(n,r,i,s,o,u,a,f,l,c,h){r.__markCompiled&&r.__markCompiled();var p=l.extend({_visibleAfter:"immediate",_baseHeight:167,_fieldHeight:28,_skinnyWidth:520,_skinnyBaseHeight:173,_skinnyFieldHeight:52,setupAndValidate:function(){return this._attr={action:this.getAttribute("action"),border_color:this.getAttribute("border-color"),channel_url:this.getChannelUrl(),client_id:c.getClientID(),fb_only:this._getBoolAttribute("fb-only",!1),fb_register:this._getBoolAttribute("fb-register",!1),fields:this.getAttribute("fields"),height:this._getPxAttribute("height"),redirect_uri:this.getAttribute("redirect-uri",e.location.href),no_footer:this._getBoolAttribute("no-footer"),no_header:this._getBoolAttribute("no-header"),onvalidate:this.getAttribute("onvalidate"),width:this._getPxAttribute("width",600),target:this.getAttribute("target")},this._attr.onvalidate&&this.subscribe("xd.validate",g(function(e){var t=g("JSON","parse",!1,e.value),n=g(function(t){this.arbiterInform("Registration.Validation",{errors:t,id:e.id})},"bind",!0,this),r=f.executeFunctionByName(this._attr.onvalidate,t,n);r&&n(r)},"bind",!0,this)),this.subscribe("xd.authLogin",g(this._onAuthLogin,"bind",!0,this)),this.subscribe("xd.authLogout",g(this._onAuthLogout,"bind",!0,this)),!0},getSize:function(){return{width:this._attr.width,height:this._getHeight()}},_getHeight:function(){if(this._attr.height)return this._attr.height;var e;if(!this._attr.fields)e=["name"];else try{e=g("JSON","parse",!1,this._attr.fields)}catch(t){e=this._attr.fields.split(/,/)}return this._attr.width<this._skinnyWidth?this._skinnyBaseHeight+e.length*this._skinnyFieldHeight:this._baseHeight+e.length*this._fieldHeight},getUrlBits:function(){return{name:"registration",params:this._attr}},getDefaultWebDomain:function(){return h.resolve("www",!0)},_onAuthLogin:function(){a.getAuthResponse()||a.getLoginStatus(),f.fireEvent("auth.login",this)},_onAuthLogout:function(){a.getAuthResponse()||a.getLoginStatus(),f.fireEvent("auth.logout",this)}});o.exports=p},null),m("sdk.XFBML.ShareButton",["IframePlugin","sdk.ui"],function(t,n,r,i,s,o,u,a){n.__markCompiled&&n.__markCompiled();var f=u.extend({constructor:function(e,t,n,r){this.parent(e,t,n,r),this.subscribe("xd.shareTriggerIframe",function(e){var t=g("JSON","parse",!1,e.data);a({method:"share",href:t.href,iframe_test:!0})})},getParams:function(){return{href:"url",layout:"string",type:"string"}}});s.exports=f},null),m("sdk.XFBML.Video",["Assert","sdk.Event","IframePlugin","ObservableMixin","sdk.XD"],function(t,n,i,s,o,u,a,f,l,c,h){function p(e){this.$VideoCache1=e.isMuted,this.$VideoCache2=e.volume,this.$VideoCache3=e.timePosition,this.$VideoCache4=e.duration}function d(e,t,n){this.$VideoController1=e,this.$VideoController2=t,this.$VideoController3=n}n.__markCompiled&&n.__markCompiled(),p.prototype.update=function(e){e.isMuted!==r&&(this.$VideoCache1=e.isMuted),e.volume!==r&&(this.$VideoCache2=e.volume),e.timePosition!==r&&(this.$VideoCache3=e.timePosition),e.duration!==r&&(this.$VideoCache4=e.duration)},p.prototype.isMuted=function(){return this.$VideoCache1},p.prototype.getVolume=function(){return this.$VideoCache1?0:this.$VideoCache2},p.prototype.getCurrentPosition=function(){return this.$VideoCache3},p.prototype.getDuration=function(){return this.$VideoCache4},d.prototype.play=function(){h.sendToFacebook(this.$VideoController1,{method:"play",params:g("JSON","stringify",!1,{})})},d.prototype.pause=function(){h.sendToFacebook(this.$VideoController1,{method:"pause",params:g("JSON","stringify",!1,{})})},d.prototype.seek=function(e){a.isNumber(e,"Invalid argument"),h.sendToFacebook(this.$VideoController1,{method:"seek",params:g("JSON","stringify",!1,{target:e})})},d.prototype.mute=function(){h.sendToFacebook(this.$VideoController1,{method:"mute",params:g("JSON","stringify",!1,{})})},d.prototype.unmute=function(){h.sendToFacebook(this.$VideoController1,{method:"unmute",params:g("JSON","stringify",!1,{})})},d.prototype.setVolume=function(e){a.isNumber(e,"Invalid argument"),h.sendToFacebook(this.$VideoController1,{method:"setVolume",params:g("JSON","stringify",!1,{volume:e})})},d.prototype.isMuted=function(){return this.$VideoController3.isMuted()},d.prototype.getVolume=function(){return this.$VideoController3.getVolume()},d.prototype.getCurrentPosition=function(){return this.$VideoController3.getCurrentPosition()},d.prototype.getDuration=function(){return this.$VideoController3.getDuration()},d.prototype.subscribe=function(e,t){return a.isString(e,"Invalid argument"),a.isFunction(t,"Invalid argument"),this.$VideoController2.subscribe(e,t),{release:g(function(){this.$VideoController2.unsubscribe(e,t)},"bind",!0,this)}};var v=l.extend({constructor:function(e,t,n,r){this.parent(e,t,n,r),this._videoController=null,this._sharedObservable=null,this._sharedVideoCache=null,this.subscribe("xd.onVideoAPIReady",function(e){this._sharedObservable=new c,this._sharedVideoCache=new p(g("JSON","parse",!1,e.data)),this._videoController=new d(this._iframeOptions.name,this._sharedObservable,this._sharedVideoCache),f.fire("xfbml.ready",{type:"video",id:r.id,instance:this._videoController})}),this.subscribe("xd.stateChange",function(e){this._sharedObservable.inform(e.state)}),this.subscribe("xd.cachedStateUpdateRequest",function(e){this._sharedVideoCache.update(g("JSON","parse",!1,e.data))})},getParams:function(){return{allowfullscreen:"bool",autoplay:"bool",controls:"bool",href:"url"}},getConfig:function(){return{fluid:!0,full_width:!0}}});o.exports=v},null),m("legacy:fb.xfbml",["Assert","sdk.Event","FB","IframePlugin","PluginConfig","PluginTags","XFBML","sdk.domReady","sdk.feature","wrapFunction","sdk.XFBML.Comments","sdk.XFBML.CommentsCount","sdk.XFBML.LoginButton","sdk.XFBML.Name","sdk.XFBML.Registration","sdk.XFBML.ShareButton","sdk.XFBML.Video"],function(t,r,s,o,u,a,f,l,c,h,p,d,v,m,y,b){r.__markCompiled&&r.__markCompiled();var w={comments:r("sdk.XFBML.Comments"),comments_count:r("sdk.XFBML.CommentsCount"),login_button:r("sdk.XFBML.LoginButton"),name:r("sdk.XFBML.Name"),registration:r("sdk.XFBML.Registration"),share_button:r("sdk.XFBML.ShareButton"),video:r("sdk.XFBML.Video")},E=y("plugin_tags_blacklist",[]);g(g("Object","keys",!1,d),"forEach",!0,function(e){if(g(E,"indexOf",!0,e)!==-1)return;v.registerTag({xmlns:"fb",localName:e.replace(/_/g,"-"),ctor:h.withParams(d[e],p[e])})}),g(g("Object","keys",!1,w),"forEach",!0,function(e){if(g(E,"indexOf",!0,e)!==-1)return;v.registerTag({xmlns:"fb",localName:e.replace(/_/g,"-"),ctor:w[e]})}),c.provide("XFBML",{parse:function(e){return f.maybeXfbml(e,"Invalid argument"),e&&e.nodeType===9&&(e=e.body),v.parse.apply(null,arguments)}}),v.subscribe("parse",g(l.fire,"bind",!0,l,"xfbml.parse")),v.subscribe("render",g(l.fire,"bind",!0,l,"xfbml.render")),l.subscribe("init:post",function(e){e.xfbml&&i(b(g(m,"bind",!0,null,v.parse),"entry","init:post:xfbml.parse"),0)}),f.define("Xfbml",function(e){return(e.nodeType===1||e.nodeType===9)&&typeof e.nodeName=="string"});try{n.namespaces&&!n.namespaces.item.fb&&n.namespaces.add("fb")}catch(S){}},3),m("legacy:fb.versioned-sdk",["sdk.Runtime"],function(t,n,r,i,s,o,u){n.__markCompiled&&n.__markCompiled(),u.setIsVersioned(!0)},3)}.call({},window.inDapIF?parent.window:window)}catch(e){(new Image).src="https://www.facebook.com/common/scribe_endpoint.php?c=jssdk_error&m="+encodeURIComponent('{"error":"LOAD", "extra": {"name":"'+e.name+'","line":"'+(e.lineNumber||e.line)+'","script":"'+(e.fileName||e.sourceURL||e.script)+'","stack":"'+(e.stackTrace||e.stack)+'","revision":"1911928","message":"'+e.message+'"}}')}define("facebook",function(e){return function(){var t,n;return t||e.FB}}(this)),define("js/fb",["js/models/user"],function(e){require(["facebook"],function(){FB.init({appId:"528978907168453",cookie:!0,xfbml:!0,version:"v2.0"}),FB.getLoginStatus(function(t){e.handleFbStatusChange(t)})})});var app=app||{};define("js/views/facebooklogin",["jquery","backbone","text!templates/facebooklogin.html","js/fb"],function(e,t,n){var r=t.View.extend({tagName:"div",events:{click:"onClick"},template:_.template(n),initialize:function(){this.render()},render:function(){this.$el.html(this.template(this.model))},onClick:function(e){e.stopPropagation(),t.trigger("fbLoginClick")}});return r}),define("modules/edit/views/authenticationRequired",["jquery","underscore","backbone","js/lib/track","js/models/user","js/views/facebooklogin"],function(e,t,n,r,i,s){var o=n.View.extend({initialize:function(n){t.bindAll(this,"onUserLogin");if(!i.id){var r=e('<div class="text-center"><div class="errorBlock">This page requires login.</div></div>');r.append((new s({model:{text:"Log in"}})).el),this.$el.html(r.get(0)),this.options=n,this.listenToOnce(i,"loggedIn",this.onUserLogin);return}this.innerInitialize(n)},onUserLogin:function(){e("html").has(this.$el).length&&this.innerInitialize(this.options)}});return o}),define("modules/edit/models/editUserModel",["underscore","backbone","js/lib/track","js/models/user","js/models/user2"],function(e,t,n,r,i){var s=t.Model.extend({defaults:function(){return{shubalooUser:null,fbUser:null,suggestedUsers:[],action:"",errors:[],fetchingFbSuggestions:!1,fetchingContent:!1}},initialize:function(e,t){var r=this,s;if(t.userId){s="Edit ";var o=new i;o.url="/REST/users/"+t.userId+"?enrich=false",o.fetch({success:function(){r.set("shubalooUser",o),r.get("shubalooUser").get("category")=="PERFORMER"?s+="Artist":s+="Venue",r.set("action",s),r.listenTo(r.get("shubalooUser"),"change",function(){this.trigger("change")})},error:function(e,r){n.logEvent("error",{msg:"failed to retrieve user "+t.userId+", response: "+JSON.stringify(r)})},parse:!0});if(t.fbId){var u=new i;u.url="/REST/users/"+t.fbId+"?enrich=false",u.fetch({success:function(){r.set("fbUser",u)},error:function(e,r){n.logEvent("error",{msg:"failed to retrieve user "+(t.fbId+", response: "+JSON.stringify(r))})},parse:!0})}}else s="Create ",this.set("shubalooUser",new i({name:t.name?t.name:"",category:t.category?t.category:"PERFORMER"})),this.getSuggestions(),t.category=="PERFORMER"&&this.getContent(),this.get("shubalooUser").get("category")=="PERFORMER"?s+="Artist":s+="Venue",this.set("action",s),this.listenTo(this.get("shubalooUser"),"change",function(){this.trigger("change")})},getSuggestions:function(){console.trace();var e=this;this.lastGetSuggestions&&this.lastGetSuggestions.abort(),this.set("fetchingFbSuggestions",!0),this.lastGetSuggestions=$.ajax({url:"/REST/users/suggestions/"+this.get("shubalooUser").get("name"),data:$.param({accessToken:r.accessToken,category:this.get("shubalooUser").get("category")}),type:"GET",success:function(t,r){Array.isArray(t)||n.logEvent("error",{msg:"invalid response retrieving user suggestions for: "+name+", response: "+t}),e.set("suggestedUsers",t),e.set("fetchingFbSuggestions",!1)},error:function(t,r){n.logEvent("error",{msg:"failed to retrieve user suggestions for: "+name+", response: "+JSON.stringify(t)}),e.set("fetchingFbSuggestions",!1)}})},getContent:function(){var e=this;this.lastGetContent&&this.lastGetContent.abort(),this.set("fetchingContent",!0),this.lastGetContent=$.ajax({url:"/REST/contents/search/"+this.get("shubalooUser").get("name"),type:"GET",success:function(t,r){Array.isArray(t)||n.logEvent("error",{msg:"invalid response retrieving content for: "+name+", response: "+t}),e.get("shubalooUser").set("content",t),e.set("fetchingContent",!1)},error:function(t,r){n.logEvent("error",{msg:"failed to retrieve content for: "+name+", response: "+JSON.stringify(t)}),e.set("fetchingContent",!1)}})},checkForErrors:function(){var e=[];return!this.get("fbUser")&&this.get("suggestedUsers")&&this.get("suggestedUsers").length>0&&e.push("fb"),this.get("shubalooUser").get("category")=="VENUE"&&!this.get("shubalooUser").get("location")&&e.push("address"),e.length>0?(this.set("errors",e),!0):!1}});return s}),define("modules/controls/views/completionDetectingInput",["jquery","underscore","backbone"],function(e,t,n){var r=n.View.extend({tagName:"input",events:{keypress:"handleKeyPress",paste:"handlePaste"},initialize:function(e){t.bindAll(this,"handleKeyPress"),this.className=e.className,this.cb=e.cb,this.data=e.data,this.$el.val(e.startingVal),e.placeholder&&this.$el.attr("placeholder",e.placeholder)},handleKeyPress:function(e){var t=this;e.which===ENTER_KEY?(this.timeOutId&&clearTimeout(this.timeOutId),this.cb(this.$el.val(),this.data)):(this.timeOutId&&clearTimeout(this.timeOutId),this.timeOutId=setTimeout(function(){t.cb(t.$el.val(),t.data)},1e3))},handlePaste:function(e){var t=this;this.timeOutId&&clearTimeout(this.timeOutId),this.timeOutId=setTimeout(function(){t.cb(t.$el.val(),t.data)},100)}});return r}),define("js/collections/searchResults",["underscore","jquery","backbone","js/lib/track","js/models/user2"],function(e,t,n,r,i){var s=n.Collection.extend({model:i,url:"/REST/search"});return s}),define("text!modules/user/templates/userRow.html",[],function(){return'<img src="<%= thumbnail %>" />\n\n<div class="info">\n    <span class="name"><%= name %></span>\n\n    <% if (category == \'VENUE\'){ %>\n    <div class="detail">\n                <% if (location.city) { %>\n                 <%= location.city %>\n                <% } %>\n                , <% if (location.region) { %>\n                <%= location.region %>\n                <% } %>\n                <% if (location.countryName) { %>\n                , <%= location.countryName %>\n                <% } %>\n    </div>\n    <% } %>\n\n</div>\n\n<div style="clear:both"></div>'}),define("modules/user/views/userRow",["jquery","underscore","backbone","js/lib/utils","js/models/app","text!modules/user/templates/userRow.html"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"div",className:"searchResultContainer",template:t.template(s),events:{click:"onClick"},initialize:function(e){this.onClick=e.onClick,this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this}});return o}),define("text!templates/noResult.html",[],function(){return'<div class="pod">\n    <div class="pod-body">\n        <h5>No Search results.</h5>\n    </div>\n</div>'}),define("js/views/noResult",["jquery","underscore","backbone","text!templates/noResult.html"],function(e,t,n,r){return ViewNoResult=n.View.extend({template:t.template(r),render:function(e,t){e.html(this.template(t))}}),ViewNoResult}),define("modules/search/views/searchResults",["jquery","underscore","backbone","js/lib/utils","js/lib/track","js/collections/searchResults","modules/user/views/userRow","js/views/loader","js/views/noResult"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({initialize:function(e){this.onSelection=e.onSelection,this.searchResults=new s},search:function(t,n){if(!t||!t.trim())return;var r=this,s={q:t};n&&(s.c=n),r.waitingForServer=!0,r.lastFetch&&r.lastFetch&&r.lastFetch.abort(),r.lastFetch=this.searchResults.fetch({data:e.param(s),reset:!0,success:function(e,n,s){i.logEvent("search",{query:t,result:e.length}),r.waitingForServer=!1,r.render()},error:function(e,t,n){i.logEvent("error",{failedComponent:"search",msg:JSON.stringify(t)})}}),r.render()},render:function(){if(this.waitingForServer)(new u).render(this.$el,"Searching");else if(this.searchResults.length<1)(new a).render(this.$el,"No Results.");else{this.$el.html("");var e=0;this.searchResults.each(function(t){e++<10&&this.renderSearchResult(t)},this)}this.$el.show()},renderSearchResult:function(e){var t=this,n=new o({model:e,onClick:function(n){n.stopPropagation(),t.onSelection(e)}});this.$el.append(n.render().el)}});return f});var google_maps_loaded_def=null;define("js/lib/gplaces",["jquery","js/lib/track"],function(e,t){return google_maps_loaded_def||(google_maps_loaded_def=e.Deferred(),window.google_maps_loaded=function(){google_maps_loaded_def.resolve(google.maps)},require(["http://maps.googleapis.com/maps/api/js?libraries=places&callback=google_maps_loaded"],function(){},function(e){t.logEvent("error",{msg:"failed to load google places api. Cause: "+e}),google_maps_loaded_def.reject()})),google_maps_loaded_def.promise()}),define("text!modules/videoPreviews/templates/videoPreviews.html",[],function(){return'<div>\n    <div class="row">\n        <% var idx = 0; endIdx = content.length - 1; %>\n        <% _.each(content, function(content) { %>\n        <div class="youtube-preview col-md-4 col-sm-6" data_idx="<%=idx%>">\n            <div class="thumb-container">\n                <img src="<%= content.thumb %>" alt="<%= content.title %>">\n                <div class="top-icon-container play">\n                    <span class="icon-play"></span>\n                    <span>Play</span>\n                </div>\n            </div>\n            <div class="track-title"><%=content.title %></div>\n            <% if (editModeEnabled) { %>\n            <span class="glyphicon glyphicon-remove col-sm-4 removeVideo" data_idx="<%=idx%>"></span>\n\n                <% if (idx != 0) { %>\n            <span class="glyphicon glyphicon-hand-left col-sm-4" data_idx="<%=idx%>"></span>\n                <% } %>\n\n                <% if (idx != endIdx) { %>\n            <span class="glyphicon glyphicon-hand-right col-sm-4" data_idx="<%=idx%>"></span>\n                <% } %>\n            <% } %>\n        </div>\n        <% idx++; %>\n        <% }); %>\n    </div>\n    <% if (editModeEnabled && (!content || content.length < 3)) { %>\n        <% if (_.contains(errors, \'videoInput\')) { %>\n    <div class="form-group has-error has-feedback">\n        <label class="control-label" for="videoInput">Invalid youtube url</label>\n        <input type="text" class="form-control" id="videoInput" aria-describedby="videoInputStatus" placeholder="http://www.youtube.com/watch?v=abcde12345">\n        <span class="glyphicon glyphicon-warning-sign form-control-feedback" aria-hidden="true"></span>\n        <span id="videoInputStatus" class="sr-only">(not a valid youtube url)</span>\n    </div>\n        <% } else { %>\n    <div class="col-sm-10">\n        <input type="text" class="form-control" id="videoInput" placeholder="http://www.youtube.com/watch?v=abcde12345">\n    </div>\n        <% } %>\n    <button id="addVideo" class="btn btn-default col-sm-2">Add</button>\n    <div style="clear:both"/>\n    <% } %>\n</div>'}),define("modules/videoPreviews/views/videoPreviews",["jquery","underscore","backbone","js/lib/track","js/models/playlist","text!modules/videoPreviews/templates/videoPreviews.html"],function(e,t,n,r,i,s){var o=n.View.extend({template:t.template(s),events:{"click .youtube-preview":"play","click .removeVideo":"removeVideo","click #addVideo":"addVideo","click .glyphicon-hand-left":"shiftContentLeft","click .glyphicon-hand-right":"shiftContentRight"},initialize:function(e){t.bindAll(this,"removeVideo"),this.editMode=e.editMode?!0:!1,this.errors=[],this.parentEvent=e.parentEvent,this.render()},render:function(){var e={content:this.model.get("content"),editModeEnabled:this.editMode,errors:this.errors};return this.$el.html(this.template(e)),this},play:function(e){var t=e.currentTarget.attributes.data_idx.value;i.setCurrent(this.parentEvent,this.model.get("content")[t],!0,!0)},removeVideo:function(e){e.stopPropagation();var t=e.currentTarget.attributes.data_idx.value;this.model.get("content").splice(t,1),this.render()},shiftContentLeft:function(e){e.stopPropagation();var t=parseInt(e.currentTarget.attributes.data_idx.value);if(t<1)return;var n=this.model.get("content")[t];this.model.get("content")[t]=this.model.get("content")[t-1],this.model.get("content")[t-1]=n,this.render()},shiftContentRight:function(e){e.stopPropagation();var t=parseInt(e.currentTarget.attributes.data_idx.value);if(t>=this.model.get("content").length)return;var n=this.model.get("content")[t];this.model.get("content")[t]=this.model.get("content")[t+1],this.model.get("content")[t+1]=n,this.render()},addVideo:function(n){n.stopPropagation();var i=this.$el.find("#videoInput").val();if(!i)return;var s=i.split("?v=");if(s.length!=2){s=i.split("&v=");if(s.length!=2){this.errors.push("videoInput"),this.render();return}}this.errors=t.without(this.errors,"videoInput");var o=s[1],u=o.indexOf("&");u!=-1&&(o=o.substring(0,u));var a=this;e.ajax({url:"/REST/contents/"+o,type:"GET",success:function(e,t){!Array.isArray(e)||e.length<1?r.logEvent("error",{msg:"invalid response retrieving youtube content: "+o+", response: "+e}):a.model.get("content").push(e[0]),a.render()},error:function(e,t){r.logEvent("error",{msg:"failed to retrieve youtube content with id: "+o+", response: "+JSON.stringify(e)})}})}});return o}),define("text!modules/user/templates/fbUserRow.html",[],function(){return'<div class="fbLink"><a href="<%=fbPage%>" target="_blank"><%=fbPage%></a></div>\n<img src="<%= thumbnail %>" />\n<div class="info">\n    <span class="name"><%= name %></span>\n\n    <% if (category == \'VENUE\'){ %>\n    <div class="detail">\n                <% if (location.city) { %>\n                 <%= location.city %>\n                <% } %>\n                , <% if (location.region) { %>\n                <%= location.region %>\n                <% } %>\n                <% if (location.countryName) { %>\n                , <%= location.countryName %>\n                <% } %>\n    </div>\n    <% } %>\n\n</div>\n\n<div style="clear:both"></div>'}),define("modules/user/views/fbUserRow",["jquery","underscore","backbone","modules/user/views/userRow","text!modules/user/templates/fbUserRow.html"],function(e,t,n,r,i){var s=r.extend({className:"fbUserRow searchResultContainer",template:t.template(i),events:{click:"onClick","click .fbLink":"stopPropagation"},stopPropagation:function(e){e.stopPropagation()}});return s}),define("text!modules/edit/templates/editUser.html",[],function(){return'<h1><%= action %></h1>\n\n<h3>Name</h3>\n<div class="form-group">\n    <input type="text" class="form-control nameInput" placeholder="Name" value="<%= shubalooUser.get(\'name\') %>">\n</div>\n\n<div class="form-group">\n    <% if (shubalooUser.get(\'displayImg\')) { %>\n    <h3>Image</h3>\n    <div><img width="240" height="240" src="<%= shubalooUser.get(\'displayImg\') %>" /></div>\n    <div class="link" id="changeImg">Change</div>\n    <% } else if (fbUser && fbUser.get(\'displayImg\')) { %>\n    <h3>Image</h3>\n    <div><img width="240" height="240" src="<%= fbUser.get(\'displayImg\') %>" /></div>\n    <% } %>\n</div>\n\n<h3>Facebook Page</h3>\n<div class="form-group">\n    <% if (fetchingFbSuggestions) { %>\n    <div id="fbLoaderContainer"></div><br>\n    <% } else if (fbUser) { %>\n    <a href="<%= fbUser.get(\'fbPage\') %>" target="_blank"><%= fbUser.get(\'fbPage\') %></a>\n    <div class="link" id="changeFb">Change</div>\n    <% } else if (suggestedUsers && suggestedUsers.length > 0) { %>\n    <label>Select from the following</label><br>\n    <div id="fbSuggestionsContainer"></div><br>\n    <label>Or input manually</label><br>\n    <div id="fbInputContainer" /><br>\n    <label>Or</label><br>\n    <button class="btn btn-default noFb">No FB Page</button>\n    <% } else { %>\n    <div id="fbInputContainer" />\n    <% } %>\n\n    <% if (_.contains(errors, \'fb\')) { %>\n    <div class="errorBlock">\n        Please select or input a facebook page, or select <span class="noFb link">No FB Page</span>\n    </div>\n    <% } %>\n</div>\n\n<% if (shubalooUser.get(\'category\') == \'PERFORMER\') { %>\n<h3>Youtube Videos (Up to 3)</h3>\n<div class="form-group">\n    <% if (fetchingContent) { %>\n    <div id="contentLoaderContainer"></div><br>\n    <% } else { %>\n    <div id="videoPreviewsContainer"></div>\n    <% } %>\n</div>\n<% } %>\n\n<% if (shubalooUser.get(\'category\') == \'VENUE\') { %>\n<h3>Address</h3>\n<div class="form-group">\n    <% if (shubalooUser.get(\'location\')) { %>\n    <h5>\n        <%= shubalooUser.get(\'location\').address %><br>\n        <% if (shubalooUser.get(\'location\').city) { %>\n        <%= shubalooUser.get(\'location\').city %>\n        <% } %>\n        <% if (shubalooUser.get(\'location\').region) { %>\n        <%= shubalooUser.get(\'location\').region %>\n        <% } %>\n        <% if (shubalooUser.get(\'location\').countryName) { %>\n        <%= shubalooUser.get(\'location\').countryName %>\n        <% } %>\n    </h5>\n    <div class="link" id="changeAddress">Change</div>\n    <% } else { %>\n    <input type="text" class="form-control" id="address" placeholder="Address">\n    <% } %>\n\n    <% if (_.contains(errors, \'address\')) { %>\n    <div class="errorBlock">\n        Address is required.\n    </div>\n    <% } %>\n</div>\n<% } %>\n\n<button class="btn btn-default btn-lg submit">Save</button>\n'}),define("modules/edit/views/editUser",["jquery","underscore","backbone","js/lib/track","js/lib/utils","js/lib/gplaces","js/models/app","js/models/user","js/models/user2","js/views/loader","modules/edit/views/authenticationRequired","modules/edit/models/editUserModel","modules/controls/views/completionDetectingInput","modules/videoPreviews/views/videoPreviews","modules/user/views/fbUserRow","text!modules/edit/templates/editUser.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=l.extend({tagName:"div",className:"editUser",template:t.template(v),events:{"click .selectFb":"selectFb","click #changeFb":"deleteFb","click .noFb":"deleteSuggestions","click #changeAddress":"deleteAddress","click .submit":"validateSaveUser","change .nameInput":"onNameInput"},innerInitialize:function(e){t.bindAll(this,"render","updateFb","deleteFb"),this.onUserSaved=e.onUserSaved,this.model=new c({},{name:e.name,category:e.category,userId:e.userId,fbId:e.fbId}),this.render(),this.listenTo(this.model,"change",this.render)},render:function(){if(!this.model.get("shubalooUser")){this.$el.html("loading...");return}var e=this;this.$el.html(this.template(this.model.toJSON()));var n=this.$el.find("#fbLoaderContainer");n.length>0&&(new f).render(n,"Finding potential facebook pages for "+this.model.get("shubalooUser").get("name")),t.forEach(this.model.get("suggestedUsers"),function(t){e.$el.find("#fbSuggestionsContainer").append((new d({model:new a(t.fb,{parse:!0}),onClick:function(n){n.stopPropagation(),e.selectFb(t)}})).el)});var r=this.$el.find("#fbInputContainer");r.length>0&&r.html((new h({cb:e.updateFb,className:"form-control",placeholder:"https://www.facebook.com/pages/abcde"})).el);var i=this.$el.find("#contentLoaderContainer");i.length>0&&(new f).render(i,"Finding youtube videos for "+this.model.get("shubalooUser").get("name"));var s=this.$el.find("#videoPreviewsContainer");return s.length>0&&s.html((new p({model:this.model.get("shubalooUser"),editMode:!0})).el),this.$el.find("#address").length>0&&this.renderGooglePlacesAutocomplete(),this},onNameInput:function(e){e.stopPropagation(),this.model.get("shubalooUser").set({name:this.$el.find(".nameInput").val()},{silent:!0})},selectFb:function(e){this.model.set({fbUser:new a(e.fb,{parse:!0})},{silent:!0}),e.shubaloo?this.model.set({shubalooUser:new a(e.shubaloo,{parse:!0})},{silent:!0}):(this.model.get("shubalooUser").set({name:e.fb.name},{silent:!0}),this.model.get("shubalooUser").get("location")||this.model.get("shubalooUser").set({location:e.fb.location},{silent:!0})),this.model.set({errors:t.without(this.model.get("errors"),"fb")},{silent:!0}),this.render()},updateFb:function(t){var n=this;e.ajax({url:"/REST/users/fb",data:e.param({fbPage:t,accessToken:u.accessToken}),type:"GET",success:function(e,t){e.category=n.model.get("shubalooUser").get("category"),n.selectFb({fb:e})},error:function(e,n){r.logEvent("error",{msg:"failed to retrieve fb user for: "+t+", response: "+JSON.stringify(e)})}})},deleteFb:function(e){e.stopPropagation(),this.model.set({errors:t.without(this.model.get("errors","fb"))},{silent:!0}),this.model.set({fbUser:null},{silent:!0}),this.render()},deleteSuggestions:function(e){e.stopPropagation(),this.model.set("suggestedUsers",[])},deleteAddress:function(e){e.stopPropagation(),this.model.get("shubalooUser").set("location",null)},renderGooglePlacesAutocomplete:function(){var e,n=this;s.done(function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var n=new google.maps.LatLng(t.coords.latitude,t.coords.longitude),r=new google.maps.Circle({center:n,radius:t.coords.accuracy});e.setBounds(r.getBounds())}),e=new google.maps.places.Autocomplete(n.$el.find("#address").get(0),{types:["geocode"]}),google.maps.event.addListener(e,"place_changed",function(){var r=e.getPlace(),i={street_number:"",route:"",locality:"",administrative_area_level_1:"",country:"",postal_code:""},s={};for(var o=0;o<r.address_components.length;o++){var u=r.address_components[o].types[0];i[u]=r.address_components[o].short_name}s.address=i.street_number+" "+i.route,s.city=i.locality,s.region=i.administrative_area_level_1,s.countryCode=i.country,s.postalCode=i.postal_code,n.model.set({errors:t.without(this.errors,"address")},{silent:!0}),n.model.get("shubalooUser").set("location",s)})}).fail(function(){r.logEvent("error",{msg:"google places request failed:"})})},validateSaveUser:function(e){e.stopPropagation();var t=this;if(this.model.checkForErrors())return;this.model.get("shubalooUser").get("location")&&(this.model.get("shubalooUser").get("location").name=this.model.get("shubalooUser").get("name")),this.model.get("shubalooUser").urlRoot=USER_PATH,this.model.get("shubalooUser").get("id")||this.model.get("shubalooUser").set("createdBy",u.get("id")),this.model.get("shubalooUser").save(null,{success:function(e){r.logEvent("edit",{id:t.model.get("shubalooUser").get("id"),name:t.model.get("shubalooUser").get("name")}),t.model.get("fbUser")&&(t.model.get("fbUser").set({canonicalId:t.model.get("shubalooUser").get("id")},{silent:!0}),t.model.get("fbUser").urlRoot=USER_PATH,t.model.get("fbUser").save(null)),t.onUserSaved(e)},error:this.onSaveFailed,parse:!0}),(new f).render(this.$el,"Saving user.")},onSaveFailed:function(e,t,n){r.logEvent("error",{msg:"failed to save user "+e+", response: "+JSON.stringify(t)}),this.$el.html('<div class="errorBlock">Something went wrong. The issue has been reported. If this continues to happen, please email yourfriends@shubaloo.com.</div>')}});return m}),define("text!modules/edit/templates/editEvent.html",[],function(){return'<div class="col-sm-6 eventData">\n    <h1>Create Event</h1>\n\n    <br>\n\n    <h3>Artists</h3>\n    <div id="artistInputs"></div>\n    <div class="artistSearchResults" />\n\n    <% if (_.contains(errors, \'performer\')) { %>\n    <div class="errorBlock">\n        Please add at least 1 artist.\n    </div>\n    <% } %>\n\n    <h3>Event Name</h3>\n    <div class="form-group">\n        <input type="text" class="form-control nameInput" value="<%= event.get(\'name\') %>">\n    </div>\n\n    <h3>Time</h3>\n    <div class="form-group">\n        <% if (event.get(\'date\')) { %>\n        <input type="datetime-local" class="form-control timeInput" value="<%=event.get(\'date\').format(\'isoDateTime\')%>"/>\n        <% } else { %>\n        <input type="datetime-local" class="form-control timeInput"/>\n        <% } %>\n    </div>\n\n    <% if (_.contains(errors, \'time\')) { %>\n    <div class="errorBlock">\n        Please set the time for the event.\n    </div>\n    <% } %>\n\n    <h3>Venue</h3>\n    <div class="form-group">\n        <div id="venueInput"></div>\n    </div>\n\n    <div class="venueSearchResults" />\n\n    <% if (_.contains(errors, \'venue\')) { %>\n    <div class="errorBlock">\n        Please set a venue for the event.\n    </div>\n    <% } %>\n\n    <h3>Tickets (optional)</h3>\n\n    <div class="form-group">\n        <% var idx = 0 %>\n        <% _.forEach(event.get(\'tickets\'), function(ticket) { %>\n        <div>\n            <a class="col-sm-8" href="<%= ticket.url %>"><%=ticket.provider%> - $<%=ticket.lowestPrice%></a>\n            <div class="col-sm-4 link removeTicket" data_idx="<%=idx++%>">Remove</div>\n            <br>\n        </div>\n        <% }); %>\n    </div>\n\n    <div class="form-group">\n        <label class="col-sm-2 control-label">Provider</label>\n        <div class="col-sm-10">\n            <input type="text" class="form-control ticketProviderName" placeholder="Ticketmaster, At the door, etc." value="<%=ticket.provider%>">\n        </div>\n\n        <label class="col-sm-2 control-label">Price</label>\n        <div class="col-sm-10">\n            <div class="input-group">\n                <span class="input-group-addon">$</span>\n                <input type="text" class="form-control ticketPrice" aria-label="Amount (to the nearest dollar)">\n                <span class="input-group-addon">.00</span>\n            </div>\n        </div>\n\n        <label class="col-sm-2 control-label">Ticket Link</label>\n        <div class="col-sm-10">\n            <input type="text" class="form-control ticketUrl" value="<%=ticket.url%>">\n        </div>\n        <div style="clear:both"/>\n        <button class="btn btn-default addTicket col-sm-offset-2">Add Ticket</button>\n    </div>\n\n    <h3>Tags (optional)</h3>\n    <div class="form-group">\n        <input type="text" class="form-control tagsInput" placeholder="rock, alternative, ..." value="<%=event.get(\'commaDelimitedTags\')%>"/>\n    </div>\n\n    <button class="btn btn-lg btn-default saveEvent">Save</button>\n</div>\n\n<div class="col-sm-6 userData">\n</div>\n\n<div style="clear:both"/>'}),define("text!modules/edit/templates/editUserRow.html",[],function(){return'<div class="form-group">\n    <div class="col-sm-10 inputContainer"></div>\n    <% if (isSet) { %>\n    <div class="btn btn-default col-sm-2 removeUser">Remove</div>\n    <% } else { %>\n    <div class="btn btn-default col-sm-2 findUser">Find</div>\n    <% } %>\n\n    <div style="clear:both"/>\n</div>'}),define("text!modules/edit/templates/searchResults.html",[],function(){return'<div class="editSearchResultContainer">\n<h2>Select <%=type%></h2>\n<div class="search-results"></div>\n\n<div style="clear:both"/>\n<br>\n\n<button type="button" class="btn btn-default createUser" data_type="<%=type%>">Create New</button>\n</div>'}),define("modules/edit/views/editEvent",["jquery","underscore","backbone","js/lib/track","js/lib/utils","js/models/app","js/models/user","js/models/user2","js/views/loader","modules/edit/views/authenticationRequired","modules/edit/models/editUserModel","modules/edit/models/editEventModel","modules/controls/views/completionDetectingInput","modules/search/views/searchResults","modules/edit/views/editUser","text!modules/edit/templates/editEvent.html","text!modules/edit/templates/editUserRow.html","text!modules/edit/templates/searchResults.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=f.extend({tagName:"div",className:"editEvent",template:t.template(v),editUserRowTemplate:t.template(m),searchResultsTemplate:t.template(g),events:{"click .createUser":"createUser","click .addTicket":"addTicket","click .removeTicket":"removeTicket","change .nameInput":"onNameInput","change .timeInput":"onTimeInput","change .tagsInput":"onTagsInput","click .saveEvent":"validateSaveEvent","change .ticketProviderName":"onTicketProviderNameChange","change .ticketUrl":"onTicketUrlChange","change .ticketPrice":"onTicketPriceChange"},innerInitialize:function(e){t.bindAll(this,"onEventSaveFailed","handleArtistSearchTermUpdate","onSearchResultSelection","handleVenueSearchTermUpdate","render"),this.onEventSaved=e.onEventSaved,this.render()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.renderArtists();var e="";return this.model.get("event").get("associations").HOST&&this.model.get("event").get("associations").HOST.length>0&&(e=this.model.get("event").get("associations").HOST[0].name),this.$el.find("#venueInput").append((new h({className:"form-control venueInput",cb:this.handleVenueSearchTermUpdate,startingVal:e})).el),this},getFbId:function(e){if(!e.linkedIds||e.linkedIds.length==0)return null;for(var t=0;t<e.linkedIds.length;t++)if(e.linkedIds[t].slice(0,3)=="fb_")return e.linkedIds[t];return null},renderArtists:function(){var n=this,r=0;this.$el.find("#artistInputs").html(""),this.model.get("event").get("associations")&&this.model.get("event").get("associations").PERFORMER&&t.forEach(this.model.get("event").get("associations").PERFORMER,function(t){var i=e(n.editUserRowTemplate({isSet:!0})),s=r++;i.find(".inputContainer").html((new h({className:"form-control artistInput",startingVal:t.name,cb:n.handleArtistSearchTermUpdate,data:s})).el),i.find(".removeUser").on("click",function(e){e.stopPropagation(),n.model.get("event").get("associations").PERFORMER.splice(s,1),n.render()}),i.on("click",function(t){t.stopPropagation();var r=n.model.get("event").get("associations").PERFORMER[s];n.$el.find(".userData").html((new d({userId:r.id,fbId:n.getFbId(r),onUserSaved:n.render})).el),e("#content-container").scrollTop(0)}),n.$el.find("#artistInputs").append(i.get(0))});var i=e(n.editUserRowTemplate({isSet:!1}));i.find(".inputContainer").html((new h({className:"form-control artistInput",startingVal:"",cb:this.handleArtistSearchTermUpdate,data:r})).el),i.find(".findUser").on("click",function(e){e.stopPropagation(),n.handleArtistSearchTermUpdate(i.find(".artistInput").val(),r)}),this.$el.find("#artistInputs").append(i.get(0))},onSearchResultSelection:function(e){e.get("category")=="VENUE"?(this.model.get("event").get("associations").HOST=[e.toJSON()],this.model.get("event").set("location",e.get("location")),this.model.set({errors:t.without(this.model.get("errors"),"venue")},{silent:!0}),this.$el.find(".venueSearchResults").html("")):this.onArtistSelection(e.toJSON()),this.render()},onArtistSelection:function(e){this.model.get("event").get("associations").PERFORMER||(this.model.get("event").get("associations").PERFORMER=[]),!this.currentArtistArrayIndex||this.currentArtistArrayIndex>=this.model.get("event").get("associations").PERFORMER.length?this.model.get("event").get("associations").PERFORMER.push(e):this.model.get("event").get("associations").PERFORMER[this.currentArtistArrayIndex]=e,this.model.get("event").get("associations").PERFORMER.length===1&&!this.model.get("event").get("name")&&this.model.get("event").set("name",this.model.get("event").get("associations").PERFORMER[0].name),this.model.set({errors:t.without(this.model.get("errors"),"performer")},{silent:!0}),this.$el.find(".artistSearchResults").html("")},handleArtistSearchTermUpdate:function(e,t){var n=new p({onSelection:this.onSearchResultSelection});n.search(e,"PERFORMER");var r=this.$el.find(".artistSearchResults");r.html(this.searchResultsTemplate({type:"Artist"})),r.find(".search-results").html(n.el),this.currentArtistArrayIndex=t,this.lastSearch=e,this.lastSearchType="PERFORMER"},handleVenueSearchTermUpdate:function(e){var t=new p({onSelection:this.onSearchResultSelection});t.search(e,"VENUE");var n=this.$el.find(".venueSearchResults");n.html(this.searchResultsTemplate({type:"Venue"})),n.find(".search-results").html(t.el),this.lastSearch=e,this.lastSearchType="VENUE"},createUser:function(t){t.stopPropagation(),this.$el.find(".userData").html((new d({name:this.lastSearch,category:this.lastSearchType,onUserSaved:this.onSearchResultSelection})).el),e("#content-container").scrollTop(0)},addTicket:function(e){e.stopPropagation(),this.model.get("event").get("tickets")||this.model.get("event").set("tickets",[]),this.model.get("event").get("tickets").push(this.model.get("ticket")),this.model.set("ticket",{}),this.render()},onTicketProviderNameChange:function(e){e.stopPropagation(),this.model.get("ticket").provider=this.$el.find(".ticketProviderName").val()},onTicketUrlChange:function(e){e.stopPropagation(),this.model.get("ticket").url=this.$el.find(".ticketUrl").val()},onTicketPriceChange:function(e){e.stopPropagation(),this.model.get("ticket").lowestPrice=this.$el.find(".ticketPrice").val()},removeTicket:function(e){e.stopPropagation();var t=parseInt(e.currentTarget.attributes.data_idx.value);this.model.get("event").get("tickets").splice(t,1),this.render()},onNameInput:function(e){e.stopPropagation(),this.model.get("event").set({name:this.$el.find(".nameInput").val()},{silent:!0})},onTimeInput:function(e){e.stopPropagation();var n=new Date(this.$el.find(".timeInput").val());this.model.get("event").set("start_time",n.getTime()),this.model.get("event").set("date",new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes())),this.model.set("errors",t.without(this.model.get("errors"),"time")),this.render()},onTagsInput:function(e){e.stopPropagation(),this.model.get("event").set("commaDelimitedTags",this.$el.find(".tagsInput").val())},validateSaveEvent:function(e){e.stopPropagation();var n=this;if(this.model.checkForErrors()){this.render();return}this.model.get("event").get("name")||this.model.get("event").set({name:this.model.get("event").get("associations").PERFORMER[0].name},{silent:!0}),this.model.get("event").get("headliner")||this.model.get("event").set({headliner:this.model.get("event").get("associations").PERFORMER[0].name},{silent:!0});if(this.model.get("event").get("commaDelimitedTags")){var i=[];t.forEach(this.model.get("event").get("commaDelimitedTags").split(","),function(e){i.push(e.trim())}),this.model.get("event").set("tags",i),this.model.get("event").set("commaDelimitedTags",null)}this.model.get("ticket").provider&&this.model.get("ticket").lowestPrice&&(this.model.get("event").get("tickets")||this.model.get("event").set("tickets",[]),this.model.get("event").get("tickets").push(this.model.get("ticket"))),this.model.get("event").urlRoot=EVENTS_PATH,this.model.get("event").get("id")||this.model.get("event").set("createdBy",o.get("id")),this.model.get("event").save(null,{success:function(e){r.logEvent("edit",{id:n.model.get("event").get("id"),name:n.model.get("event").get("name")}),n.onEventSaved(e)},error:this.onEventSaveFailed,parse:!0}),(new a).render(this.$el,"Saving event.")},onEventSaveFailed:function(e,t,n){r.logEvent("error",{msg:"failed to save event "+e+", response: "+JSON.stringify(t)}),this.$el.html('<div class="errorBlock">Something went wrong. The issue has been reported. If this continues to happen, please email yourfriends@shubaloo.com.</div>')}});return y}),define("modules/app/views/content",["jquery","underscore","backbone","js/lib/track","js/lib/utils","js/models/app","js/models/event","js/models/user2","js/collections/baseEventList","js/views/content/eventList","js/views/content/exploreTags","js/views/content/top","modules/edit/models/editEventModel","modules/edit/views/editEvent"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=n.View.extend({el:"#content-container",initialize:function(){this.listenTo(s,"change:showDashboard",this.handleDashboardVisibilityChange),this.listenTo(s,"change:mainContent",this.handleContentChange),e("body, html").on("mouseup",function(){n.trigger("mouseUp")}),e("body, html").on("keydown",function(e){e.which===27&&n.trigger("escapeKeyDown")}),this.handleDashboardVisibilityChange(),s.get("mainContent")&&this.handleContentChange(s,s.get("mainContent"))},handleDashboardVisibilityChange:function(){s.get("showDashboard")?this.$el.removeClass("move-left"):this.$el.addClass("move-left"),this.eventListView&&this.eventListView.layout()},renderUser:function(e){this.$el.html((new c({model:e})).el),this.eventListView=new f({collection:e.getEventsCollection()}),this.$el.append(this.eventListView.el),this.eventListView.addedToDom()},renderEditEventModel:function(e){this.$el.html((new p({model:e,onEventSaved:function(e){s.set("mainContent",new h(null,{event:new o})),s.set("overlayContent",e),i.navigate(e.get("urlPath"),{trigger:!1},e.get("pageTitle"),e.get("pageDesc"))}})).el)},handleContentChange:function(e,t,n){if(!t){r.logEvent("error",{msg:"no model passed to content view"});return}this.setDashboardVisibility(t instanceof h);if(t instanceof u)this.renderUser(t);else if(t instanceof a)this.eventListView=new f({collection:t}),this.$el.html(this.eventListView.el),this.eventListView.addedToDom();else{if(!(t instanceof h)){r.logEvent("error",{msg:"unrecognized data passed to content view: "+JSON.stringify(t)});return}this.renderEditEventModel(t)}},setDashboardVisibility:function(e){if(e){s.set("showDashboard",!1);return}var t=window.matchMedia("screen and (max-width: 710px)");t.matches?s.set("showDashboard",!1):s.set("showDashboard",!0)}});return d}),define("modules/app/views/widgetContent",["js/lib/track","js/views/content/eventList","modules/app/views/content"],function(e,t,n){var r=n.extend({renderUser:function(e){this.eventListView=new t({collection:e.getEventsCollection()}),this.$el.html(this.eventListView.el),this.eventListView.addedToDom()},renderEditEventModel:function(t){e.logEvent("error",{msg:"trying to render edit event model in widget: "+JSON.stringify(t)})},setDashboardVisibility:function(){}});return r}),define("modules/dashboard/views/dashboardItem2",["jquery","underscore","backbone","js/lib/track","js/lib/utils","js/models/app"],function(e,t,n,r,i,s){var o=n.View.extend({events:{"click .dashboard-header":"onClick"},initialize:function(e){this.name=e.name,this.render(),this.listenTo(s,"change:selectedDashboardItem",this.handleSelection),this.handleSelection()},render:function(){this.$el.html("<div class='dashboard-header'>"+this.name+"</div><hr>")},handleSelection:function(){s.get("selectedDashboardItem")===this.name?this.$el.addClass("selected"):this.$el.removeClass("selected");var e=window.matchMedia("screen and (max-width: 710px)");e.matches&&s.set("showDashboard",!1)},onClick:function(e){e.stopPropagation(),s.set("selectedDashboardItem",this.name)}});return o}),define("text!modules/dashboard/templates/citiesDashboard.html",[],function(){return'<div id="dashboard">\n\n    <div id="site-about-container">\n        <ul class="site-about">\n            <li class="footer-item">\n                <a>Discover and Curate Shows - shubaloo.com</a>\n            </li>\n        </ul>\n    </div>\n\n</div>'}),define("modules/dashboard/views/citiesDashboard",["jquery","underscore","backbone","js/lib/utils","js/models/app","modules/dashboard/views/dashboardItem2","text!modules/dashboard/templates/citiesDashboard.html"],function(e,t,n,r,i,s,o){var u=n.View.extend({template:t.template(o),initialize:function(e){this.render(e.cities)},render:function(e){this.$el.html(this.template());var t=this;if(e){var n=e.length;while(--n>=0)t.$el.find("#dashboard").prepend((new s({name:e[n]})).el)}}});return u}),define("text!templates/city.html",[],function(){return'<li class="glyphicon glyphicon-map-marker"></li>\n<li>\n    <input class="city-search-input" type="text" placeholder="enter city" value="<% if (displayCity) { %><%= displayCity %><% } else { %><%= locationInput %><% } %>"/>\n</li>\n<li><span id="direct-search-button" type="submit" class="glyphicon glyphicon-search searchButton" value=""></span></li>'}),define("js/views/navbar/city",["jquery","underscore","backbone","js/lib/track","js/models/city","text!templates/city.html"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"ul",className:"search",template:t.template(s),events:{"keypress .city-search-input":"updateCityOnEnter","click .glyphicon-search":"updateCity","click .glyphicon-map-marker":"focusOnInput"},initialize:function(){this.listenTo(i,"change:data",this.handleCityChange),this.render()},render:function(){this.$el.html(this.template(i.toJSON()))},handleCityChange:function(){this.render()},focusOnInput:function(){this.$el.find(".city-search-input").focus()},updateCityOnEnter:function(e){e.which===ENTER_KEY&&this.updateCity()},updateCity:function(){var e=this.$el.find(".city-search-input").val();i.set("locationInput",e)}});return o}),define("text!templates/searchResult.html",[],function(){return'<img src="<%= thumb %>" />\n\n<div class="info">\n    <span class="name"><%= name %></span>\n\n    <% if (category == \'VENUE\'){ %>\n    <div class="detail">\n                <% if (location.city) { %>\n                 <%= location.city %>\n                <% } %>\n                , <% if (location.region) { %>\n                <%= location.region %>\n                <% } %>\n                <% if (location.countryName) { %>\n                , <%= location.countryName %>\n                <% } %>\n    </div>\n    <% } %>\n\n</div>\n\n\n<% if (category == \'PERFORMER\') { %>\n<div class="category">Artist</div>\n<% } else if (category == \'VENUE\') { %>\n<div class="category">Venue</div>\n<% } %>\n\n<div style="clear:both"></div>'}),define("js/views/navbar/searchResult",["jquery","underscore","backbone","js/lib/utils","js/models/app","text!templates/searchResult.html"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"div",className:"searchResultContainer",template:t.template(s),events:{click:"onClick"},render:function(){return this.$el.html(this.template(this.model.attributes)),this},onClick:function(){this.model.get("category")==="PERFORMER"?i.set("overlayContent",this.model):(i.set("selectedDashboardItem",null),i.set("mainContent",this.model),i.set("noEventsMessage",null)),r.navigate(this.model.get("urlPath"),{trigger:!1},this.model.get("pageTitle"),this.model.get("pageDesc"))}});return o}),define("js/views/navbar/searchResults",["jquery","underscore","backbone","js/lib/utils","js/lib/track","js/collections/searchResults","js/views/navbar/searchResult","js/views/loader","js/views/noResult"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({initialize:function(e){this.listenTo(n,"escapeKeyDown",function(){this.$el.hide()}),this.listenTo(n,"mouseUp",function(){this.$el.hide()}),this.searchResults=new s},search:function(t){var n=this;n.waitingForServer=!0,this.searchResults.fetch({data:e.param({q:t}),reset:!0,success:function(e,r,s){i.logEvent("search",{query:t,result:e.length}),n.waitingForServer=!1,n.render()},error:function(e,t,n){i.logEvent("error",{failedComponent:"search",msg:JSON.stringify(t)})}}),n.render()},render:function(){if(this.waitingForServer)(new u).render(this.$el,"Searching");else if(this.searchResults.length<1)(new a).render(this.$el,"No Results.");else{this.$el.html("");var e=0;this.searchResults.each(function(t){e++<10&&(t.get("pics")?t.set("thumb",r.getPic(t.get("pics"),40)):t.set("thumb",""),this.renderSearchResult(t))},this)}this.$el.show()},renderSearchResult:function(e){var t=new o({model:e});this.$el.append(t.render().el)}});return new f}),define("text!templates/controls/menuBtn.html",[],function(){return'<div class="menu-line"></div>\n<div class="menu-line"></div>\n<div class="menu-line"></div>'}),define("js/views/controls/menuBtn",["jquery","underscore","backbone","js/lib/track","js/models/app","text!templates/controls/menuBtn.html"],function(e,t,n,r,i,s){var o=n.View.extend({tagName:"div",className:"menu",template:t.template(s),events:{click:"onClick"},initialize:function(){this.render()},render:function(){return this.$el.html(this.template()),this},onClick:function(e){e.stopPropagation(),i.get("showDashboard")?i.set("showDashboard",!1):i.set("showDashboard",!0),r.logEvent("click",{control:"menu"})}});return new o}),define("text!templates/mobileSearch.html",[],function(){return'<input id="main-search-mobile" type="text" class="search-input" placeholder="<%= placeholder %>"/>\n<button class="done" id="doneSearch"><%= buttonText %></button>\n<button class="cancel" id="cancelSearch">Cancel</button>'}),define("js/views/mobileSearchView",["jquery","underscore","backbone","js/models/city","js/views/navbar/searchResults","text!templates/mobileSearch.html"],function(e,t,n,r,i,s){var o=n.View.extend({el:"#search-mobile",template:t.template(s),searchTemplateData:{placeholder:"Search for artist or venue",buttonText:"Search"},cityTemplateData:{placeholder:"City",buttonText:"Update City"},events:{"click .cancel":"onCancel","click .done":"onDone","keypress .search-input":"onKepPress"},render:function(e){var t;e?t=this.cityTemplateData:t=this.searchTemplateData,this.cityUpdate=e,this.$el.html(this.template(t)),this.$el.show()},onCancel:function(){this.$el.hide()},onDone:function(){this.search()},onKepPress:function(e){e.which===ENTER_KEY&&this.search()},search:function(){var t=e("#main-search-mobile").val();this.cityUpdate?r.set("locationInput",t):i.search(t),this.$el.hide()}});return new o}),define("text!templates/controls/shareBar.html",[],function(){return'<h3>\n  Let your friends know about\n    <% if (subject === \'user\') { %>\n         upcoming shows you\'re interested in.\n    <% } else { %>\n        <%= subject.name %>\n        <br>\n        @ <%= subject.formattedLocation %>\n    <% } %>\n</h3>\n<span> Share: </span> <input type="text" class="short-url" value="<%= link %>">\n\n<br>\n\n<div class="shareIconsContainer"></div>\n\n<% if (subject === \'user\') { %>\n<hr>\n        <h3>Wordpress</h3>\n        <div>Plugin with sidebar widget <a href="https://wordpress.org/plugins/shubaloo/">here</a></div>\n        <br>\n        Configure user id: <div class="userIdContainer"></div>\n\n        <hr>\n\n        For other integrations, email yourfriends@shubaloo.com\n<% } %>'}),define("js/views/controls/shareBar",["jquery","underscore","backbone","js/views/controls/shareButton","js/models/user","text!templates/controls/shareBar.html","js/lib/shortener"],function(e,t,n,r,i,s,o){var u=n.View.extend({className:"share-bar",template:t.template(s),iconNames:{fb:"facebook",twitter:"twitterbird",stumble:"stumbleupon",google:"googleplus",email:"email",messenger:"messenger"},events:{click:function(e){e.stopPropagation()},"click .short-url":"selectText"},initialize:function(e){this.iconType=e.iconType,this.networks=e.networks,this.layout=e.layout,this.configure(),this.render()},configure:function(){var e="http://shubaloo.com";this.layout==="vertical"||this.layout==="horizontal"?this.$el.addClass(this.layout):this.layout==="overlay"&&this.$el.addClass("pod overlay"),this.model&&this.model!=i?this.longUrl=e+this.model.get("urlPath"):this.model&&this.model===i?this.longUrl=e+"/"+this.model.get("name").replace(/\s/g,"+")+"/"+this.model.id:this.longUrl=e,o(this.model,this.longUrl,null,this)},render:function(){var e=this;this.layout==="overlay"&&(this.model===i?(this.$el.html(this.template({link:this.model.get("shortUrl"),subject:"user"})),this.$el.find(".userIdContainer").html(i.id)):this.$el.html(this.template({link:this.model.get("shortUrl"),subject:this.model.toJSON()}))),this.networks.forEach(function(t){e.$el.find(".shareIconsContainer").append((new r({link:e.link,longUrl:e.longUrl,model:e.model,tagName:"div",className:"symbol "+t,network:t,iconType:e.iconType})).el)})},selectText:function(e){e.stopPropagation(),this.$el.find(".short-url").select()}});return u}),define("js/views/controls/shareToggle",["jquery","underscore","backbone","js/views/controls/shareBar","js/lib/utils","js/models/app","js/models/user"],function(e,t,n,r,i,s,o){var u=n.View.extend({className:"share-toggle",template:t.template("<div class='toggle symbol'> &#xe473; </div>"),events:{"click .toggle":"toggleShare"},initialize:function(e){this.layout=e.layout,this.networks=e.networks,this.iconType=e.iconType,this.$el.addClass(this.layout),this.listenTo(s,"change:selectedDashboardItem",function(){this.layout==="vertical"&&s.get("selectedDashboardItem")==="profile"&&this.$el.find(".share-bar").slideUp()}),this.render()},render:function(){this.$el.html(this.template()),this.$el.append((new r({model:this.model,iconType:this.iconType,layout:this.layout,networks:this.networks})).el),this.$el.find(".share-bar").hide()},toggleShare:function(){this.layout==="vertical"?this.$el.find(".share-bar").slideToggle("fast"):this.$el.find(".share-bar").animate({width:"toggle"})}});return u}),define("js/views/navbar/navbar",["jquery","underscore","backbone","js/lib/utils","js/models/app","js/models/user","js/views/facebooklogin","js/views/navbar/city","js/views/navbar/searchResults","js/views/controls/menuBtn","js/views/mobileSearchView","js/views/controls/shareToggle"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=n.View.extend({el:"#navbar",events:{"click #search-button":"onSearchClick","click .glyphicon-map-marker":"showCityEdit","keypress #search-text":"searchOnEnter","click #userImg":"showMyProfile","click .logo":"navToExplore"},initialize:function(){var e=this;this.render(),this.listenTo(s,"change:name",this.updateUserPreview),this.listenTo(s,"change:thumb",this.updateUserPreview)},render:function(){e("#menuContainer").html(f.el),e("#citySearch").html((new u).el),e("#search-results").html(a.el),this.$el.find("#toggle-container").html((new c({layout:"vertical",iconType:"rounded",networks:["fb","messenger","twitter","google","stumble","email"]})).el),this.$el.find(".fbLoginContainer").html((new o({model:{text:"Log in"}})).el),this.updateUserPreview()},showMyProfile:function(){i.set("selectedDashboardItem","profile")},onSearchClick:function(){this.isSmallerThanIpad()?l.render(!1):this.search()},showCityEdit:function(){this.isSmallerThanIpad()&&l.render(!0)},isSmallerThanIpad:function(){return window.matchMedia("all and (max-width: 767px)").matches},updateUserPreview:function(){var t=!1;s.get("name")?(e("#userName").html(s.get("name").split(" ")[0]),e("#userName").show(),t=!0):e("#userName").hide(),s.get("thumb")?(e("#userImg").html("<img width='32' height='32' src='"+s.get("thumb")+"'/>"),e("#userImg").show(),t=!0):e("#userImg").hide(),t?(e(".fbLoginContainer").hide(),e("#search-results").css("right","40px")):(e(".fbLoginContainer").show(),e("#search-results").css("right","80px"))},searchOnEnter:function(e){e.which===ENTER_KEY&&this.search()},search:function(){a.search(e("#search-text").val())},navToExplore:function(){i.set("selectedDashboardItem","explore"),r.navigate("/",{trigger:!1})}});return new h}),require.config({baseUrl:"../",paths:{jquery:"js/lib/jquery-2.1.0.min",underscore:"js/lib/underscore-min",backbone:"js/lib/backbone-min",react:"js/lib/react",text:"js/lib/text",flurry:"js/lib/flurry",dateformat:"js/lib/date.format",facebook:"js/lib/fb",geoip2:"js/lib/geoip2-2.1.min","google-analytics":"js/lib/google-analytics",touchwipe:"js/lib/touchwipe",typeahead:"js/lib/typeahead.bundle",gapi:"js/lib/gapi",moment:"js/lib/moment.min"},shim:{backbone:{deps:["underscore","jquery"],exports:"Backbone"},flurry:{exports:"FlurryAgent"},dateformat:{exports:"DateFormat"},facebook:{exports:"FB"},geoip2:{exports:"geoip2"},"google-analytics":{exports:"ga"},touchwipe:{deps:["jquery"],exports:"touchwipe"},typeahead:{deps:["jquery"],exports:"typeahead"}},urlArgs:"v=30"}),require(["js/lib/domReady"],function(e){e(function(){require(["js/lib/utils","js/lib/track","js/models/app","js/models/city","js/models/user2","modules/dashboard/views/dashboardContainer","modules/app/views/widgetContent","js/views/video"],function(e,t,n,r,i,s,o,u){var a=location.pathname.slice(8),f=e.parseConf(a);t.logEvent("pageview",{path:"/widget",conf:a}),new o;if(f.user){var l=new i;l.url="/REST/users/"+f.user+"?enrich=true",l.fetch({success:function(){n.set("mainContent",l)},error:function(e,n){t.logEvent("error",{msg:"failed to retrieve user "+f.user+", response: "+n})},parse:!0})}else require(["js/collections/eventList"],function(e){n.set("mainContent",e),f.city&&r.setData("path",f.city)});f.cityList?require(["modules/dashboard/views/citiesDashboard"],function(e){var t=f.cityList.split("+").join(" ").split(",");new s({content:(new e({cities:t})).el}),n.on("change:selectedDashboardItem",function(){r.setData("input",n.get("selectedDashboardItem"))}),n.set("selectedDashboardItem",t[0]),n.set("showDashboard",!0)}):(new s({content:""}),n.set("showDashboard",!1))})})});var debugInfo={init:function(){require(["js/views/navbar/navbar","js/models/tagsList","js/models/user","js/collections/eventList","js/collections/heartList","js/collections/followingList","js/models/city","js/views/video","js/models/app"],function(e,t,n,r,i,s,o,u,a,f){return debugInfo.tagsList=t,debugInfo.navbar=e,debugInfo.user=n,debugInfo.eventList=r,debugInfo.city=o,debugInfo.video=u,debugInfo.heartList=i,debugInfo.followingList=s,debugInfo.appState=f,debugInfo})}},ENTER_KEY=13,SUPER_EVENT_ROOT_PATH="/REST/prototypes/superevents/",USER_PATH="/REST/users/",EVENTS_PATH="/REST/events/",GOOGLE_API_KEY="AIzaSyD2-1elr1md9ibYPGbxartMaxhW6sw7hHY",EVENT_LIST_STATES={unitialized:0,waiting:1,resetting:2,paginating:3,loaded:4,loadFailed:5};PAGES={home:1,event:2,search:3,user:4,following:5,myEvents:6},define("js/widget",function(){});