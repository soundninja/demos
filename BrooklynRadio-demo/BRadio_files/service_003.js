(function(e,t){sumo.define("plugins/css",[],function(){if(typeof window=="undefined")return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,r=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?r=!1:t[4]&&(n=parseInt(t[4])<18);var i={};i.pluginBuilder="./css-builder";var s,o=function(){s=document.createElement("style"),e.appendChild(s)},u=function(e,t){o();var n=s.styleSheet||s.sheet;if(n&&n.addImport)n.addImport(e),s.onload=t;else{s.textContent='@import "'+e+'";';var r=setInterval(function(){try{s.sheet.cssRules,clearInterval(r),t()}catch(e){}},10)}},a=function(t,n){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet";if(r)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var s=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==i.href)return clearInterval(s),n()}},10);i.href=t,e.appendChild(i)};return i.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)},i.load=function(e,t,r,i){(n?u:a)(t.toUrl(e+".css"),r)},i}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,i=r&&location.protocol&&location.protocol.replace(/\:/,""),s=r&&location.hostname,o=r&&(location.port||void 0),u=[];sumo.define("plugins/text",[],function(){var a,f,l;return typeof window!="undefined"&&window.navigator&&window.document?f=function(e,t){var n=a.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(l=require.nodeRequire("fs"),f=function(e,t){t(l.readFileSync(e,"utf8"))}):typeof Packages!="undefined"&&(f=function(e,t){var n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),n=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),i,s,o="";try{i=new java.lang.StringBuffer,(s=n.readLine())&&s.length()&&s.charAt(0)===65279&&(s=s.substring(1));for(i.append(s);(s=n.readLine())!==null;)i.append(r),i.append(s);o=String(i.toString())}finally{n.close()}t(o)}),a={version:"1.0.2",strip:function(e){if(e){var e=e.replace(t,""),r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:f,parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),e=e.substring(n+1,e.length),n=e.indexOf("!");return n!==-1&&(t=e.substring(n+1,e.length),t=t==="strip",e=e.substring(0,n)),{moduleName:r,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=a.xdRegExp.exec(e),s;return i?(e=i[2],i=i[3],i=i.split(":"),s=i[1],i=i[0],(!e||e===t)&&(!i||i===n)&&(!s&&!i||s===r)):!0},finishLoad:function(e,t,n,r,i){n=t?a.strip(n):n,i.isBuild&&(u[e]=n),r(n)},load:function(e,t,n,u){if(u.isBuild&&!u.inlineText)n();else{var f=a.parseName(e),l=f.moduleName+"."+f.ext,c=t.toUrl(l),h=u&&u.text&&u.text.useXhr||a.useXhr;!r||h(c,i,s,o)?a.get(c,function(t){a.finishLoad(e,f.strip,t,n,u)}):t([l],function(e){a.finishLoad(f.moduleName+"."+f.ext,f.strip,e,n,u)})}},write:function(e,t,n){if(t in u){var r=a.jsEscape(u[t]);n.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,n,r,i){var t=a.parseName(t),s=t.moduleName+"."+t.ext,o=n.toUrl(t.moduleName+"."+t.ext)+".js";a.load(s,n,function(){var t=function(e){return r(o,e)};t.asModule=function(e,t){return r.asModule(e,o,t)},a.write(e,s,t,i)},i)}}})}(),sumo.define("punycode",function(){}),sumo.define("IPv6",function(){}),sumo.define("SecondLevelDomains",function(){}),function(n,r){typeof e=="object"?t.exports=r(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):typeof sumo.define=="function"&&sumo.define.amd?sumo.define("URI",["./punycode","./IPv6","./SecondLevelDomains"],r):n.URI=r(n.punycode,n.IPv6,n.SecondLevelDomains,n)}(this,function(e,t,n,r){function s(e,t){return this instanceof s?(e===undefined&&(typeof location!="undefined"?e=location.href+"":e=""),this.href(e),t!==undefined?this.absoluteTo(t):this):new s(e,t)}function a(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function f(e){return e===undefined?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function l(e){return f(e)==="Array"}function c(e,t){var n={},r,i;if(l(t))for(r=0,i=t.length;r<i;r++)n[t[r]]=!0;else n[t]=!0;for(r=0,i=e.length;r<i;r++)n[e[r]]!==undefined&&(e.splice(r,1),i--,r--);return e}function h(e,t){var n,r;if(l(t)){for(n=0,r=t.length;n<r;n++)if(!h(e,t[n]))return!1;return!0}var i=f(t);for(n=0,r=e.length;n<r;n++)if(i==="RegExp"){if(typeof e[n]=="string"&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function p(e,t){if(!l(e)||!l(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function d(e){return escape(e)}function v(e){return encodeURIComponent(e).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}var i=r&&r.URI;s.version="1.12.0";var o=s.prototype,u=Object.prototype.hasOwnProperty;s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,s.idn_expression=/[^a-z0-9\.-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},s.getDomAttribute=function(e){if(!e||!e.nodeName)return undefined;var t=e.nodeName.toLowerCase();return t==="input"&&e.type!=="image"?undefined:s.domAttributes[t]},s.encode=v,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=v,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},s.encodeQuery=function(e,t){var n=s.encode(e+"");return t?n.replace(/%20/g,"+"):n},s.decodeQuery=function(e,t){e+="";try{return s.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}},s.recodePath=function(e){var t=(e+"").split("/");for(var n=0,r=t.length;n<r;n++)t[n]=s.encodePathSegment(s.decode(t[n]));return t.join("/")},s.decodePath=function(e){var t=(e+"").split("/");for(var n=0,r=t.length;n<r;n++)t[n]=s.decodePathSegment(t[n]);return t.join("/")};var m={encode:"encode",decode:"decode"},g,y=function(e,t){return function(n){return s[t](n+"").replace(s.characters[e][t].expression,function(n){return s.characters[e][t].map[n]})}};for(g in m)s[g+"PathSegment"]=y("pathname",m[g]);s.encodeReserved=y("reserved","encode"),s.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),e.substring(0,2)==="//"?(t.protocol=null,e=e.substring(2),e=s.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(s.protocol_expression)?t.protocol=undefined:t.protocol==="file"?e=e.substring(n+3):e.substring(n+1,n+3)==="//"?(e=e.substring(n+3),e=s.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},s.parseHost=function(e,t){var n=e.indexOf("/"),r,i;return n===-1&&(n=e.length),e.charAt(0)==="["?(r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,n)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,n)||null,t.port=null):(i=e.substring(0,n).split(":"),t.hostname=i[0]||null,t.port=i[1]||null),t.hostname&&e.substring(n).charAt(0)!=="/"&&(n++,e="/"+e),e.substring(n)||"/"},s.parseAuthority=function(e,t){return e=s.parseUserinfo(e,t),s.parseHost(e,t)},s.parseUserinfo=function(e,t){var n=e.indexOf("/"),r=n>-1?e.lastIndexOf("@",n):e.indexOf("@"),i;return r>-1&&(n===-1||r<n)?(i=e.substring(0,r).split(":"),t.username=i[0]?s.decode(i[0]):null,i.shift(),t.password=i[0]?s.decode(i.join(":")):null,e=e.substring(r+1)):(t.username=null,t.password=null),e},s.parseQuery=function(e,t){if(!e)return{};e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!e)return{};var n={},r=e.split("&"),i=r.length,o,u,a;for(var f=0;f<i;f++)o=r[f].split("="),u=s.decodeQuery(o.shift(),t),a=o.length?s.decodeQuery(o.join("="),t):null,n[u]?(typeof n[u]=="string"&&(n[u]=[n[u]]),n[u].push(a)):n[u]=a;return n},s.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),!e.urn&&(t||e.hostname)&&(t+="//"),t+=s.buildAuthority(e)||"",typeof e.path=="string"&&(e.path.charAt(0)!=="/"&&typeof e.hostname=="string"&&(t+="/"),t+=e.path),typeof e.query=="string"&&e.query&&(t+="?"+e.query),typeof e.fragment=="string"&&e.fragment&&(t+="#"+e.fragment),t},s.buildHost=function(e){var t="";return e.hostname?(s.ip6_expression.test(e.hostname)?e.port?t+="["+e.hostname+"]:"+e.port:t+=e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},s.buildAuthority=function(e){return s.buildUserinfo(e)+s.buildHost(e)},s.buildUserinfo=function(e){var t="";return e.username&&(t+=s.encode(e.username),e.password&&(t+=":"+s.encode(e.password)),t+="@"),t},s.buildQuery=function(e,t,n){var r="",i,o,a,f;for(o in e)if(u.call(e,o)&&o)if(l(e[o])){i={};for(a=0,f=e[o].length;a<f;a++)e[o][a]!==undefined&&i[e[o][a]+""]===undefined&&(r+="&"+s.buildQueryParameter(o,e[o][a],n),t!==!0&&(i[e[o][a]+""]=!0))}else e[o]!==undefined&&(r+="&"+s.buildQueryParameter(o,e[o],n));return r.substring(1)},s.buildQueryParameter=function(e,t,n){return s.encodeQuery(e,n)+(t!==null?"="+s.encodeQuery(t,n):"")},s.addQuery=function(e,t,n){if(typeof t=="object")for(var r in t)u.call(t,r)&&s.addQuery(e,r,t[r]);else{if(typeof t!="string")throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(e[t]===undefined){e[t]=n;return}typeof e[t]=="string"&&(e[t]=[e[t]]),l(n)||(n=[n]),e[t]=e[t].concat(n)}},s.removeQuery=function(e,t,n){var r,i,o;if(l(t))for(r=0,i=t.length;r<i;r++)e[t[r]]=undefined;else if(typeof t=="object")for(o in t)u.call(t,o)&&s.removeQuery(e,o,t[o]);else{if(typeof t!="string")throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");n!==undefined?e[t]===n?e[t]=undefined:l(e[t])&&(e[t]=c(e[t],n)):e[t]=undefined}},s.hasQuery=function(e,t,n,r){if(typeof t=="object"){for(var i in t)if(u.call(t,i)&&!s.hasQuery(e,i,t[i]))return!1;return!0}if(typeof t!="string")throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(f(n)){case"Undefined":return t in e;case"Boolean":var o=Boolean(l(e[t])?e[t].length:e[t]);return n===o;case"Function":return!!n(e[t],t,e);case"Array":if(!l(e[t]))return!1;var a=r?h:p;return a(e[t],n);case"RegExp":if(!l(e[t]))return Boolean(e[t]&&e[t].match(n));if(!r)return!1;return h(e[t],n);case"Number":n=String(n);case"String":if(!l(e[t]))return e[t]===n;if(!r)return!1;return h(e[t],n);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.commonPath=function(e,t){var n=Math.min(e.length,t.length),r;for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}if(r<1)return e.charAt(0)===t.charAt(0)&&e.charAt(0)==="/"?"/":"";if(e.charAt(r)!=="/"||t.charAt(r)!=="/")r=e.substring(0,r).lastIndexOf("/");return e.substring(0,r+1)},s.withinString=function(e,t,n){n||(n={});var r=n.start||s.findUri.start,i=n.end||s.findUri.end,o=n.trim||s.findUri.trim,u=/[a-z0-9-]=["']?$/i;r.lastIndex=0;for(;;){var a=r.exec(e);if(!a)break;var f=a.index;if(n.ignoreHtml){var l=e.slice(Math.max(f-3,0),f);if(l&&u.test(l))continue}var c=f+e.slice(f).search(i),h=e.slice(f,c).replace(o,"");if(n.ignore&&n.ignore.test(h))continue;c=f+h.length;var p=t(h,f,c,e);e=e.slice(0,f)+p+e.slice(c),r.lastIndex=f+p.length}return r.lastIndex=0,e},s.ensureValidHostname=function(t){if(t.match(s.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(s.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},s.noConflict=function(e){if(e){var n={URI:this.noConflict()};return URITemplate&&typeof URITemplate.noConflict=="function"&&(n.URITemplate=URITemplate.noConflict()),t&&typeof t.noConflict=="function"&&(n.IPv6=t.noConflict()),SecondLevelDomains&&typeof SecondLevelDomains.noConflict=="function"&&(n.SecondLevelDomains=SecondLevelDomains.noConflict()),n}return r.URI===this&&(r.URI=i),this},o.build=function(e){if(e===!0)this._deferred_build=!0;else if(e===undefined||this._deferred_build)this._string=s.build(this._parts),this._deferred_build=!1;return this},o.clone=function(){return new s(this)},o.valueOf=o.toString=function(){return this.build(!1)._string},m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},y=function(e){return function(t,n){return t===undefined?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}};for(g in m)o[g]=y(m[g]);m={query:"?",fragment:"#"},y=function(e,t){return function(n,r){return n===undefined?this._parts[e]||"":(n!==null&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!r),this)}};for(g in m)o[g]=y(g,m[g]);m={search:["?","query"],hash:["#","fragment"]},y=function(e,t){return function(n,r){var i=this[e](n,r);return typeof i=="string"&&i.length?t+i:i}};for(g in m)o[g]=y(m[g][1],m[g][0]);o.pathname=function(e,t){if(e===undefined||e===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return e?s.decodePath(n):n}return this._parts.path=e?s.recodePath(e):"/",this.build(!t),this},o.path=o.pathname,o.href=function(e,t){var n;if(e===undefined)return this.toString();this._string="",this._parts=s._parts();var r=e instanceof s,i=typeof e=="object"&&(e.hostname||e.path||e.pathname);if(e.nodeName){var o=s.getDomAttribute(e);e=e[o]||"",i=!1}!r&&i&&e.pathname!==undefined&&(e=e.toString());if(typeof e=="string")this._parts=s.parse(e,this._parts);else{if(!r&&!i)throw new TypeError("invalid input");var a=r?e._parts:e;for(n in a)u.call(this._parts,n)&&(this._parts[n]=a[n])}return this.build(!t),this},o.is=function(e){var t=!1,r=!1,i=!1,o=!1,u=!1,a=!1,f=!1,l=!this._parts.urn;this._parts.hostname&&(l=!1,r=s.ip4_expression.test(this._parts.hostname),i=s.ip6_expression.test(this._parts.hostname),t=r||i,o=!t,u=o&&n&&n.has(this._parts.hostname),a=o&&s.idn_expression.test(this._parts.hostname),f=o&&s.punycode_expression.test(this._parts.hostname));switch(e.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return o;case"sld":return u;case"ip":return t;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return a;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return f}return null};var b=o.protocol,w=o.port,E=o.hostname;o.protocol=function(e,t){if(e!==undefined&&e){e=e.replace(/:(\/\/)?$/,"");if(!e.match(s.protocol_expression))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]")}return b.call(this,e,t)},o.scheme=o.protocol,o.port=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e!==undefined){e===0&&(e=null);if(e){e+="",e.charAt(0)===":"&&(e=e.substring(1));if(e.match(/[^0-9]/))throw new TypeError("Port '"+e+"' contains characters other than [0-9]")}}return w.call(this,e,t)},o.hostname=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e!==undefined){var n={};s.parseHost(e,n),e=n.hostname}return E.call(this,e,t)},o.host=function(e,t){return this._parts.urn?e===undefined?"":this:e===undefined?this._parts.hostname?s.buildHost(this._parts):"":(s.parseHost(e,this._parts),this.build(!t),this)},o.authority=function(e,t){return this._parts.urn?e===undefined?"":this:e===undefined?this._parts.hostname?s.buildAuthority(this._parts):"":(s.parseAuthority(e,this._parts),this.build(!t),this)},o.userinfo=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined){if(!this._parts.username)return"";var n=s.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return e[e.length-1]!=="@"&&(e+="@"),s.parseUserinfo(e,this._parts),this.build(!t),this},o.resource=function(e,t){var n;return e===undefined?this.path()+this.search()+this.hash():(n=s.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},o.subdomain=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,r),o=new RegExp("^"+a(i));return e&&e.charAt(e.length-1)!=="."&&(e+="."),e&&s.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(o,e),this.build(!t),this},o.domain=function(e,t){if(this._parts.urn)return e===undefined?"":this;typeof e=="boolean"&&(t=e,e=undefined);if(e===undefined){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(t).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!e)throw new TypeError("cannot set domain empty");s.ensureValidHostname(e);if(!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var i=new RegExp(a(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!t),this},o.tld=function(e,t){if(this._parts.urn)return e===undefined?"":this;typeof e=="boolean"&&(t=e,e=undefined);if(e===undefined){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(r+1);return t!==!0&&n&&n.list[i.toLowerCase()]?n.get(this._parts.hostname)||i:i}var s;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");s=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(a(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}return this.build(!t),this},o.directory=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?s.decodePath(r):r}var i=this._parts.path.length-this.filename().length,o=this._parts.path.substring(0,i),u=new RegExp("^"+a(o));return this.is("relative")||(e||(e="/"),e.charAt(0)!=="/"&&(e="/"+e)),e&&e.charAt(e.length-1)!=="/"&&(e+="/"),e=s.recodePath(e),this._parts.path=this._parts.path.replace(u,e),this.build(!t),this},o.filename=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined||e===!0){if(!this._parts.path||this._parts.path==="/")return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return e?s.decodePathSegment(r):r}var i=!1;e.charAt(0)==="/"&&(e=e.substring(1)),e.match(/\.?\//)&&(i=!0);var o=new RegExp(a(this.filename())+"$");return e=s.recodePath(e),this._parts.path=this._parts.path.replace(o,e),i?this.normalizePath(t):this.build(!t),this},o.suffix=function(e,t){if(this._parts.urn)return e===undefined?"":this;if(e===undefined||e===!0){if(!this._parts.path||this._parts.path==="/")return"";var n=this.filename(),r=n.lastIndexOf("."),i,o;return r===-1?"":(i=n.substring(r+1),o=/^[a-z0-9%]+$/i.test(i)?i:"",e?s.decodePathSegment(o):o)}e.charAt(0)==="."&&(e=e.substring(1));var u=this.suffix(),f;if(!u){if(!e)return this;this._parts.path+="."+s.recodePath(e)}else e?f=new RegExp(a(u)+"$"):f=new RegExp(a("."+u)+"$");return f&&(e=s.recodePath(e),this._parts.path=this._parts.path.replace(f,e)),this.build(!t),this},o.segment=function(e,t,n){var r=this._parts.urn?":":"/",i=this.path(),s=i.substring(0,1)==="/",o=i.split(r);e!==undefined&&typeof e!="number"&&(n=t,t=e,e=undefined);if(e!==undefined&&typeof e!="number")throw new Error("Bad segment '"+e+"', must be 0-based integer");s&&o.shift(),e<0&&(e=Math.max(o.length+e,0));if(t===undefined)return e===undefined?o:o[e];if(e===null||o[e]===undefined){if(l(t)){o=[];for(var u=0,a=t.length;u<a;u++){if(!t[u].length&&(!o.length||!o[o.length-1].length))continue;o.length&&!o[o.length-1].length&&o.pop(),o.push(t[u])}}else if(t||typeof t=="string")o[o.length-1]===""?o[o.length-1]=t:o.push(t)}else t||typeof t=="string"&&t.length?o[e]=t:o.splice(e,1);return s&&o.unshift(""),this.path(o.join(r),n)},o.segmentCoded=function(e,t,n){var r,i,o;typeof e!="number"&&(n=t,t=e,e=undefined);if(t===undefined){r=this.segment(e,t,n);if(!l(r))r=r!==undefined?s.decode(r):undefined;else for(i=0,o=r.length;i<o;i++)r[i]=s.decode(r[i]);return r}if(!l(t))t=typeof t=="string"?s.encode(t):t;else for(i=0,o=t.length;i<o;i++)t[i]=s.decode(t[i]);return this.segment(e,t,n)};var S=o.query;return o.query=function(e,t){if(e===!0)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof e=="function"){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=e.call(this,n);return this._parts.query=s.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return e!==undefined&&typeof e!="string"?(this._parts.query=s.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):S.call(this,e,t)},o.setQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof e=="object")for(var i in e)u.call(e,i)&&(r[i]=e[i]);else{if(typeof e!="string")throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");r[e]=t!==undefined?t:null}return this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof e!="string"&&(n=t),this.build(!n),this},o.addQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(r,e,t===undefined?null:t),this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof e!="string"&&(n=t),this.build(!n),this},o.removeQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(r,e,t),this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof e!="string"&&(n=t),this.build(!n),this},o.hasQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(r,e,t,n)},o.setSearch=o.setQuery,o.addSearch=o.addQuery,o.removeSearch=o.removeQuery,o.hasSearch=o.hasQuery,o.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},o.normalizeProtocol=function(e){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},o.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},o.normalizePort=function(e){return typeof this._parts.protocol=="string"&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},o.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||this._parts.path==="/")return this;var t,n=this._parts.path,r="",i,o;n.charAt(0)!=="/"&&(t=!0,n="/"+n),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(r=n.substring(1).match(/^(\.\.\/)+/)||"",r&&(r=r[0]));for(;;){i=n.indexOf("/..");if(i===-1)break;if(i===0){n=n.substring(3);continue}o=n.substring(0,i).lastIndexOf("/"),o===-1&&(o=i),n=n.substring(0,o)+n.substring(i+3)}return t&&this.is("relative")&&(n=r+n.substring(1)),n=s.recodePath(n),this._parts.path=n,this.build(!e),this},o.normalizePathname=o.normalizePath,o.normalizeQuery=function(e){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},o.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},o.normalizeSearch=o.normalizeQuery,o.normalizeHash=o.normalizeFragment,o.iso8859=function(){var e=s.encode,t=s.decode;return s.encode=escape,s.decode=decodeURIComponent,this.normalize(),s.encode=e,s.decode=t,this},o.unicode=function(){var e=s.encode,t=s.decode;return s.encode=v,s.decode=unescape,this.normalize(),s.encode=e,s.decode=t,this},o.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&t._parts.path.charAt(0)!=="/"&&(n+="/"),n+=t.path(!0);if(t._parts.query){var r="";for(var i=0,o=t._parts.query.split("&"),u=o.length;i<u;i++){var a=(o[i]||"").split("=");r+="&"+s.decodeQuery(a[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),a[1]!==undefined&&(r+="="+s.decodeQuery(a[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+=s.decodeQuery(t.hash(),!0),n},o.absoluteTo=function(e){var t=this.clone(),n=["protocol","username","password","hostname","port"],r,i,o;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");e instanceof s||(e=new s(e)),t._parts.protocol||(t._parts.protocol=e._parts.protocol);if(this._parts.hostname)return t;for(i=0;o=n[i];i++)t._parts[o]=e._parts[o];return t._parts.path?t._parts.path.substring(-2)===".."&&(t._parts.path+="/"):(t._parts.path=e._parts.path,t._parts.query||(t._parts.query=e._parts.query)),t.path().charAt(0)!=="/"&&(r=e.directory(),t._parts.path=(r?r+"/":"")+t._parts.path,t.normalizePath()),t.build(),t},o.relativeTo=function(e){var t=this.clone().normalize(),n,r,i,o,u;if(t._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");e=(new s(e)).normalize(),n=t._parts,r=e._parts,o=t.path(),u=e.path();if(o.charAt(0)!=="/")throw new Error("URI is already relative");if(u.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");n.protocol===r.protocol&&(n.protocol=null);if(n.username!==r.username||n.password!==r.password)return t.build();if(n.protocol!==null||n.username!==null||n.password!==null)return t.build();if(n.hostname!==r.hostname||n.port!==r.port)return t.build();n.hostname=null,n.port=null;if(o===u)return n.path="",t.build();i=s.commonPath(t.path(),e.path());if(!i)return t.build();var a=r.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return n.path=a+n.path.substring(i.length),t.build()},o.equals=function(e){var t=this.clone(),n=new s(e),r={},i={},o={},a,f,c;t.normalize(),n.normalize();if(t.toString()===n.toString())return!0;a=t.query(),f=n.query(),t.query(""),n.query("");if(t.toString()!==n.toString())return!1;if(a.length!==f.length)return!1;r=s.parseQuery(a,this._parts.escapeQuerySpace),i=s.parseQuery(f,this._parts.escapeQuerySpace);for(c in r)if(u.call(r,c)){if(!l(r[c])){if(r[c]!==i[c])return!1}else if(!p(r[c],i[c]))return!1;o[c]=!0}for(c in i)if(u.call(i,c)&&!o[c])return!1;return!0},o.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},o.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},s}),sumo.define("color",[],function(){var e={lightOrDark:function(e){var t,n,r,i;return e.toHex&&(e="#"+e.toHex()),e.match(/^rgb/)?(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),t=e[1],r=e[2],n=e[3]):(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")),t=e>>16,r=e>>8&255,n=e&255),i=Math.sqrt(.299*t*t+.587*r*r+.114*n*n),i>127.5?"light":"dark"},whiteOrBlack:function(e){return this.lightOrDark(e)=="light"?"black":"white"},shadeColor:function(e,t){e=e.toString();var n=parseInt(e.slice(1),16),r=Math.round(2.55*t),i=(n>>16)+r,s=(n>>8&255)+r,o=(n&255)+r;return"#"+(16777216+(i<255?i<1?0:i:255)*65536+(s<255?s<1?0:s:255)*256+(o<255?o<1?0:o:255)).toString(16).slice(1)},RGBColor:function(e){this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),255]}}];for(var n=0;n<t.length;n++){var r=t[n].re,i=t[n].process,s=r.exec(e);s&&(channels=i(s),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return e.length==1&&(e="0"+e),t.length==1&&(t="0"+t),n.length==1&&(n="0"+n),"#"+e+t+n}},hexToRGBA:function(e,t){var n=new this.RGBColor(e);return n.a=t||1,n.toRGBA()}};return e}),sumo.define("plugins/text!55c989d5-855d-4538-b67b-3cdb46acd968/templates/sharer_popup.html",[],function(){return'<div class="sumome-image-sharer-popup-form">\n  <div class="sumome-form">\n    <div class="sumome-row" id="sumome-image-sharer">\n      <div class="sumome-image-sharer-preloader">\n        <img src="{{preloader}}" />\n      </div>\n    </div>\n  </div>\n</div>\n'}),function(){var n;n=function(e){var t,n;return t=!1,e(function(){var r;return r=(document.body||document.documentElement).style,t=r.animation!==void 0||r.WebkitAnimation!==void 0||r.MozAnimation!==void 0||r.MsAnimation!==void 0||r.OAnimation!==void 0,e(window).bind("resize.vex",function(e){if(e&&e.type=="resize"&&e.target!=window)return;return n.resize()}),e(window).bind("keyup.vex",function(e){if(e.keyCode===27)return n.closeByEscape()})}),n={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"sumome-vex",content:"sumome-vex-content",overlay:"sumome-vex-overlay",close:"sumome-vex-close",closing:"sumome-vex-closing",open:"sumome-vex-open"},defaultOptions:{content:"",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",closeCSS:{}},open:function(t){return t=e.extend({},n.defaultOptions,t),t.id=n.globalID,n.globalID+=1,t.$vex=e("<div>").addClass(n.baseClassNames.vex).addClass(t.className).css(t.css).data({vex:t}),t.$vexOverlay=e("<div>").addClass(n.baseClassNames.overlay).addClass(t.overlayClassName).css(t.overlayCSS).data({vex:t}),t.overlayClosesOnClick&&t.$vexOverlay.bind("click.vex",function(t){if(t.target!==this)return;return n.close(e(this).data().vex.id)}),t.$vex.append(t.$vexOverlay),t.$vexContent=e("<div>").addClass(n.baseClassNames.content).addClass(t.contentClassName).css(t.contentCSS).append(t.content).data({vex:t}),t.$vexContent.bind("resize.vex",function(e){return n.resize()}),t.$vex.append(t.$vexContent),t.customCloseButton?t.showCloseButton&&(t.$closeButton=t.$vexContent.find("."+t.closeClassName).eq(0).data({vex:t}).bind("click.vex",function(){return n.close(e(this).data().vex.id)})):t.showCloseButton&&(t.$closeButton=e("<div>").addClass(n.baseClassNames.close).addClass(t.closeClassName).css(t.closeCSS).data({vex:t}).bind("click.vex",function(){return n.close(e(this).data().vex.id)}),t.$vexContent.append(t.$closeButton)),e(t.appendLocation).append(t.$vex),n.setupBodyClassName(t.$vex),t.afterOpen&&t.afterOpen(t.$vexContent,t),setTimeout(function(){return t.$vexContent.trigger("vexOpen",t)},0),t.$vexContent},getAllVexes:function(){return e("."+n.baseClassNames.vex+':not(".'+n.baseClassNames.closing+'") .'+n.baseClassNames.content)},getVexByID:function(t){return n.getAllVexes().filter(function(){return e(this).data().vex.id===t})},close:function(e){var t;if(!e){t=n.getAllVexes().last();if(!t.length)return!1;e=t.data().vex.id}return n.closeByID(e)},closeAll:function(){var t;return t=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(t!=null?!t.length:!void 0)?!1:(e.each(t.reverse(),function(e,t){return n.closeByID(t)}),!0)},closeByID:function(r){var i,s,o,u,a;s=n.getVexByID(r);if(!s.length)return;return i=s.data().vex.$vex,a=e.extend({},s.data().vex),o=function(){if(a.beforeClose)return a.beforeClose(s,a)},u=function(){s.trigger("vexClose",a),i.remove();if(a.afterClose)return a.afterClose(s,a)},t?(o(),i.unbind(n.animationEndEvent).bind(n.animationEndEvent,function(){return u()}).addClass(n.baseClassNames.closing)):(o(),u()),!0},resizeByID:function(t){var r,i,s,o,u;i=n.getVexByID(t);if(!i.length)return;return r=i.data().vex.$vex,u=e.extend({},i.data().vex),i.trigger("vexResize",u),!0},resize:function(){var t,r,i;return i=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(i!=null?!i.length:!void 0)?!1:(r=Math.max.apply(Math,i),t=n.getVexByID(r),n.resizeByID(r))},closeByEscape:function(){var t,r,i;return i=n.getAllVexes().map(function(){return e(this).data().vex.id}).toArray(),(i!=null?!i.length:!void 0)?!1:(r=Math.max.apply(Math,i),t=n.getVexByID(r),t.data().vex.escapeButtonCloses!==!0?!1:n.closeByID(r))},setupBodyClassName:function(t){return t.bind("vexOpen.vex",function(){return e("body").addClass(n.baseClassNames.open)}).bind("vexClose.vex",function(){if(!n.getAllVexes().length)return e("body").removeClass(n.baseClassNames.open)})},hideLoading:function(){return e(".vex-loading-spinner").remove()},showLoading:function(){return n.hideLoading(),e("body").append('<div class="vex-loading-spinner '+n.defaultOptions.className+'"></div>')}}},typeof sumo.define=="function"&&sumo.define.amd?sumo.define("vex",["jquery"],n):typeof e=="object"?t.exports=n(require("jquery")):window.vex=n(jQuery)}.call(this),sumo.define("twitter-text",[],function(){function t(e,t){return e.replace(/#\{(\w+)\}/g,function(e,n){return t[n]||""})}function n(t,n){return n=n||"",typeof t!="string"&&(t.global&&n.indexOf("g")<0&&(n+="g"),t.ignoreCase&&n.indexOf("i")<0&&(n+="i"),t.multiline&&n.indexOf("m")<0&&(n+="m"),t=t.source),new RegExp(t.replace(/#\{(\w+)\}/g,function(t,n){var r=e.txt.regexen[n]||"";return typeof r!="string"&&(r=r.source),r}),n)}var e={txt:{regexen:{}}};return e.txt.regexen.validUrlPrecedingChars=n(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,e.txt.regexen.invalidDomainChars=t("#{punct}#{spaces_group}#{invalid_chars_group}",e.txt.regexen),e.txt.regexen.validDomainChars=n(/[^#{invalidDomainChars}]/),e.txt.regexen.validSubdomain=n(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validDomainName=n(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validGTLD=n(RegExp("(?:(?:academy|accountants|active|actor|aero|agency|airforce|archi|army|arpa|asia|associates|attorney|audio|autos|axa|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|blue|bmw|boutique|brussels|build|builders|buzz|bzh|cab|camera|camp|cancerresearch|capetown|capital|cards|care|career|careers|cash|cat|catering|center|ceo|cheap|christmas|church|citic|claims|cleaning|clinic|clothing|club|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|cruises|cuisinella|dance|dating|degree|democrat|dental|dentist|desi|diamonds|digital|direct|directory|discount|dnp|domains|durban|edu|education|email|engineer|engineering|enterprises|equipment|estate|eus|events|exchange|expert|exposed|fail|farm|feedback|finance|financial|fish|fishing|fitness|flights|florist|foo|foundation|frogans|fund|furniture|futbol|gal|gallery|gift|gives|glass|global|globo|gmo|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|hiphop|hiv|holdings|holiday|homes|horse|host|house|immobilien|industries|info|ink|institute|insure|int|international|investments|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|kred|land|lawyer|lease|lgbt|life|lighting|limited|limo|link|loans|london|lotto|luxe|luxury|maison|management|mango|market|marketing|media|meet|menu|miami|mil|mini|mobi|moda|moe|monash|mortgage|moscow|motorcycles|museum|nagoya|name|navy|net|neustar|nhk|ninja|nyc|okinawa|onl|org|organic|ovh|paris|partners|parts|photo|photography|photos|physio|pics|pictures|pink|place|plumbing|post|press|pro|productions|properties|pub|qpon|quebec|recipes|red|rehab|reise|reisen|ren|rentals|repair|report|republican|rest|reviews|rich|rio|rocks|rodeo|ruhr|ryukyu|saarland|schmidt|schule|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|systems|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|town|toys|trade|training|travel|university|uno|vacations|vegas|ventures|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wang|watch|webcam|website|wed|wien|wiki|works|wtc|wtf|xxx|xyz|yachts|yokohama|zone|дети|москва|онлайн|орг|сайт|بازار|شبكة|موقع|संगठन|みんな|世界|中信|中文网|公司|公益|商城|商标|在线|我爱你|政务|机构|游戏|移动|组织机构|网址|网络|集团|삼성)(?=[^0-9a-zA-Z@]|$))")),e.txt.regexen.validCCTLD=n(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|мкд|мон|рф|срб|укр|қаз|الاردن|الجزائر|السعودية|المغرب|امارات|ایران|بھارت|تونس|سودان|سورية|عمان|فلسطين|قطر|مصر|مليسيا|پاکستان|भारत|বাংলা|ভারত|ਭਾਰਤ|ભારત|இந்தியா|இலங்கை|சிங்கப்பூர்|భారత్|ලංකා|ไทย|გე|中国|中國|台湾|台灣|新加坡|香港|한국)(?=[^0-9a-zA-Z@]|$))")),e.txt.regexen.validPunycode=n(/(?:xn--[0-9a-z]+)/),e.txt.regexen.validDomain=n(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),e.txt.regexen.validAsciiDomain=n(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),e.txt.regexen.invalidShortDomain=n(/^#{validDomainName}#{validCCTLD}$/),e.txt.regexen.validPortNumber=n(/[0-9]+/),e.txt.regexen.validGeneralUrlPathChars=n(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),e.txt.regexen.validUrlBalancedParens=n("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),e.txt.regexen.validUrlPathEndingChars=n(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),e.txt.regexen.validUrlPath=n("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),e.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,e.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,e.txt.regexen.extractUrl=n("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),e.txt.extractUrlsWithIndices=function(t,n){n||(n={extractUrlsWithoutProtocol:!0});if(!t||(n.extractUrlsWithoutProtocol?!t.match(/\./):!t.match(/:/)))return[];var r=[];while(e.txt.regexen.extractUrl.exec(t)){var i=RegExp.$2,s=RegExp.$3,o=RegExp.$4,u=RegExp.$5,a=RegExp.$7,f=e.txt.regexen.extractUrl.lastIndex,l=f-s.length;if(!o){if(!n.extractUrlsWithoutProtocol||i.match(e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var c=null,h=0;u.replace(e.txt.regexen.validAsciiDomain,function(t){var n=u.indexOf(t,h);h=n+t.length,c={url:t,indices:[l+n,l+h]},(a||t.match(e.txt.regexen.validSpecialShortDomain)||!t.match(e.txt.regexen.invalidShortDomain))&&r.push(c)});if(c==null)continue;a&&(c.url=s.replace(u,c.url),c.indices[1]=f)}else s.match(e.txt.regexen.validTcoUrl)&&(s=RegExp.lastMatch,f=l+s.length),r.push({url:s,indices:[l,f]})}return r},e}),sumo.define("jquery.timer",["jquery"],function(e){if(e===null)throw"jQuery is not defined";var t=function(t){var n={timerCallback:function(){},startCallback:function(){},pauseCallback:function(){},resumeCallback:function(){},stopCallback:function(){},finishCallback:function(){},interval:1e3,timeout:!1,useSetTimeout:!0};t.interval=parseInt(t.interval,10),t.interval=isNaN(t.interval)?n.interval:t.interval,t.timeout=parseInt(t.timeout,10),t.timeout=isNaN(t.timeout)?n.timeout:t.timeout,this._options=e.extend(n,t),this._timerFunction=this._options.useSetTimeout?"Timeout":"Interval",this._timerID=null,this._startTime=0,this._pausedInterval=-1,this._passedTime=0,this._status="stopped"};t.prototype={_activate:function(){var e=this;this._startTime=(new Date).getTime(),this._timerID=window["set"+this._timerFunction](function(){e._passedTime=(new Date).getTime()-e._startTime,e._options.timeout&&e._passedTime>=e._options.timeout?e._finish():e._options.timerCallback()},this._options.interval)},_finish:function(){window["clear"+this._timerFunction](this._timerID),this._startTime=0,this._pausedInterval=-1,this._passedTime=0,this._timerID=null,this._options.finishCallback(),this._status="finished"},start:function(){if(this._startTime!==0)return;this._activate(),this._options.startCallback(),this._status="running"},pause:function(){if(this._startTime===0||this._timerID===null)return;window["clear"+this._timerFunction](this._timerID),this._passedTime=(new Date).getTime()-this._startTime,this._pausedInterval=this._passedTime%this._options.interval,this._timerID=null,this._options.pauseCallback(),this._status="paused"},resume:function(e){e=typeof e=="undefined"?!1:e;if(this._pausedInterval===-1)return;if(e){var t=this;setTimeout(function(){t._options.timerCallback(),t._options.useSetTimeout||t._activate()},this._options.interval-this._pausedInterval)}else this._activate();this._options.resumeCallback(),this._status="running"},stop:function(){if(this._startTime===0||this._timerID===null)return;this._finish(),this._options.stopCallback(),this._status="stopped"},kill:function(){this._timerID!==null&&(window["clear"+this._timerFunction](this._timerID),this._startTime=0,this._pausedInterval=-1,this._timerID=null,this._status="stopped")},status:function(){return this._status}},e.timer=function(n,r,i,s){if(typeof n=="undefined")return e.timer["#LIST#"];if(typeof n!="string"||!n.match(/^[a-zA-Z][a-zA-Z_0-9]*$/))throw"Invalid timer name (it must start with a letter and cannot contain other characters than letters, numbers and underscore";if(typeof r=="undefined")return e.timer[n];if(r===null){if(e.timer[n]){e.timer[n].kill(),delete e.timer[n];var o=e.timer["#LIST#"].indexOf(n);o>-1&&e.timer["#LIST#"].splice(o,1)}return!0}if(typeof r!="function")throw"Please provide a callback function for setTimer/setInterval function";i=parseInt(i,10);if(isNaN(i)||i<=0)throw"Please provide an interval for timer (in seconds)";return s=s||{},s.timerCallback=r,s.interval=i,e.timer[n]=new t(s),e.timer["#LIST#"].push(n),e.timer[n]},e.timer["#LIST#"]=[]}),sumo.define("jquery.naturalwidth",["jquery"],function(e){var t=["Width","Height"],n;while(n=t.pop())(function(t,n){e.fn[t]=t in new Image?function(){return this[0][t]}:function(){var e=this[0],t,r;return e.tagName.toLowerCase()==="img"&&(t=new Image,t.src=e.src,r=t[n]),r}})("natural"+n,n.toLowerCase())}),sumo.define("jquery.drags",["jquery"],function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move"},t);if(t.handle==="")var n=this;else var n=this.find(t.handle);return n.css("cursor",t.cursor).on("mousedown.drags",function(n){e(this).trigger("dragstart");if(t.handle==="")var r=e(this).addClass("draggable");else var r=e(this).addClass("active-handle").parent().addClass("draggable");var i=r.css("z-index"),s=r.outerHeight(),o=r.outerWidth(),u=r.offset().top+s-n.pageY,a=r.offset().left+o-n.pageX;r.css("z-index",10000001).parents().on("mousemove.drags",function(t){e(".draggable").trigger("dragmove",{top:t.pageY+u-s,left:t.pageX+a-o}),e(".draggable").offset({top:t.pageY+u-s,left:t.pageX+a-o}).on("mouseup",function(){e(this).removeClass("draggable").css("z-index",i)})}),n.preventDefault()}).on("mouseup.drags",function(){if(t.handle==="")var n=e(this).removeClass("draggable");else var n=e(this).removeClass("active-handle").parent().removeClass("draggable");n.parents().unbind("mousemove.drags"),e(this).trigger("dragend")})}}),sumo.define("jquery.resizes",["jquery"],function(e){e.fn.resizes=function(t){t=e.extend({handle:"",cursor:"se-resize",body:"",min_width:200,min_height:100},t);if(t.handle==="")var n=this;else var n=this.find(t.handle),r=this.find(t.body);return r.parent().is(".sumome-auto")||r.height(r.parent().innerHeight()-40),r.children().trigger("resize"),n.css("cursor",t.cursor).on("mousedown",function(n){if(t.handle==="")var i=e(this);else var i=e(this).parent();var s=i.css("z-index"),o=i.outerHeight(),u=i.outerWidth(),a=n.pageY,f=n.pageX,l=r.outerWidth(),c=r.outerHeight();i.css("z-index",10000001).parents().on("mousemove.jqueryResize",function(e){var n=!1;u+e.pageX-f>=t.min_width&&(n=!0,i.width(u+e.pageX-f)),o+e.pageY-a>=t.min_height&&(n=!0,i.height(o+e.pageY-a),r.height(c+e.pageY-a)),n&&r.children().trigger("resize")}),e(document).on("mouseup",function(){i.parents().off(".jqueryResize")}),n.preventDefault()})}}),sumo.define("jquery.ui.position",["jquery"],function(e){function c(e,t,n){return[parseInt(e[0],10)*(f.test(e[0])?t/100:1),parseInt(e[1],10)*(f.test(e[1])?n/100:1)]}function h(t,n){return parseInt(e.css(t,n),10)||0}function p(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var t,n=Math.max,r=Math.abs,i=Math.round,s=/left|center|right/,o=/top|center|bottom/,u=/[\+\-]\d+%?/,a=/^\w+/,f=/%$/,l=e.fn.position;e.position={scrollbarWidth:function(){if(t!==undefined)return t;var n,r,i=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=i.children()[0];return e("body").append(i),n=s.offsetWidth,i.css("overflow","scroll"),r=s.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),t=n-r},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return l.apply(this,arguments);t=e.extend({},t);var f,d,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=p(b),b[0].preventDefault&&(t.at="left top"),d=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=s.test(e[0])?e.concat(["center"]):o.test(e[0])?["center"].concat(e):["center","center"]),e[0]=s.test(e[0])?e[0]:"center",e[1]=o.test(e[1])?e[1]:"center",n=u.exec(e[0]),r=u.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[a.exec(e[0])[0],a.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=d:t.at[0]==="center"&&(g.left+=d/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),f=c(x.at,d,v),g.left+=f[0],g.top+=f[1],this.each(function(){var s,o,u=e(this),a=u.outerWidth(),l=u.outerHeight(),p=h(this,"marginLeft"),y=h(this,"marginTop"),T=a+p+h(this,"marginRight")+E.width,N=l+y+h(this,"marginBottom")+E.height,C=e.extend({},g),k=c(x.my,u.outerWidth(),u.outerHeight());t.my[0]==="right"?C.left-=a:t.my[0]==="center"&&(C.left-=a/2),t.my[1]==="bottom"?C.top-=l:t.my[1]==="center"&&(C.top-=l/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=i(C.left),C.top=i(C.top)),s={marginLeft:p,marginTop:y},e.each(["left","top"],function(n,r){e.ui.position[S[n]]&&e.ui.position[S[n]][r](C,{targetWidth:d,targetHeight:v,elemWidth:a,elemHeight:l,collisionPosition:s,collisionWidth:T,collisionHeight:N,offset:[f[0]+k[0],f[1]+k[1]],my:t.my,at:t.at,within:w,elem:u})}),t.using&&(o=function(e){var i=m.left-C.left,s=i+d-a,o=m.top-C.top,f=o+v-l,c={target:{element:b,left:m.left,top:m.top,width:d,height:v},element:{element:u,left:C.left,top:C.top,width:a,height:l},horizontal:s<0?"left":i>0?"right":"center",vertical:f<0?"top":o>0?"bottom":"middle"};d<a&&r(i+s)<d&&(c.horizontal="center"),v<l&&r(o+f)<v&&(c.vertical="middle"),n(r(i),r(s))>n(r(o),r(f))?c.important="horizontal":c.important="vertical",t.using.call(this,e,c)}),u.offset(e.extend(C,{using:o}))})},e.ui.position={fit:{left:function(e,t){var r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=n(e.left-o,e.left)},top:function(e,t){var r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=n(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,i=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-i;if(p<0||p<r(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||r(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,i=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-i,e.top+c+h+p>a&&(v<0||v<r(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||r(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()}),sumo.define("jquery.nearest",["jquery","jquery.drags","jquery.resizes","jquery.ui.position"],function(e){function n(n,r,i){n||(n="div");var s=e(r.container),o=s.offset()||{left:0,top:0},u=[s.width()||0,s.height()||0],a={x:[o.left,o.left+u[0]],y:[o.top,o.top+u[1]],w:[0,u[0]],h:[0,u[1]]},f,l,c;for(f in a)a.hasOwnProperty(f)&&(c=t.exec(r[f]),c&&(l=a[f],r[f]=(l[1]-l[0])*c[1]/100+l[0]));r.sameX===!1&&r.checkHoriz===!1&&(r.sameX=!r.checkHoriz),r.sameY===!1&&r.checkVert===!1&&(r.sameY=!r.checkVert);var h=s.find(n),p=[],d=!!r.furthest,v=!r.sameX,m=!r.sameY,g=!!r.onlyX,y=!!r.onlyY,b=d?0:Infinity,w=parseFloat(r.x)||0,E=parseFloat(r.y)||0,S=parseFloat(w+r.w)||w,x=parseFloat(E+r.h)||E,T=parseFloat(r.tolerance)||0,N=!!e.fn.each2,C=Math.min,k=Math.max;!r.includeSelf&&i&&(h=h.not(i)),T<0&&(T=0),h[N?"each2":"each"](function(t,n){var r=N?n:e(this),i=r.offset(),s=i.left,o=i.top,u=r.outerWidth(),a=r.outerHeight(),f=s+u,l=o+a,c=k(s,w),h=C(f,S),L=k(o,E),A=C(l,x),O=h>=c,M=A>=L,_,D,P,H;if(v&&m||!v&&!m&&O&&M||v&&M||m&&O||v&&g||m&&y)_=O?0:c-h,D=M?0:L-A,g||y?P=g?_:D:P=O||M?k(_,D):Math.sqrt(_*_+D*D),H=d?P>=b-T:P<=b+T,H&&(b=d?k(b,P):C(b,P),p.push({node:this,dist:P}))});var L=p.length,A=[],O,M,_,D;if(L){d?(O=b-T,M=b):(O=b,M=b+T);for(_=0;_<L;_++)D=p[_],D.dist>=O&&D.dist<=M&&A.push(D.node)}return A}var t=/^([\d.]+)%$/;e.each(["nearest","furthest","touching"],function(t,r){var i={x:0,y:0,w:0,h:0,tolerance:1,container:document,furthest:r=="furthest",includeSelf:!1,sameX:r==="touching",sameY:r==="touching",onlyX:!1,onlyY:!1};e[r]=function(t,r,s){if(!t||t.x===undefined||t.y===undefined)return e([]);var o=e.extend({},i,t,s||{});return e(n(r,o))},e.fn[r]=function(t,r){if(!this.length)return this.pushStack([]);var s;if(t&&e.isPlainObject(t))return s=e.extend({},i,t,r||{}),this.pushStack(n(this,s));var o=this.offset(),u={x:o.left,y:o.top,w:this.outerWidth(),h:this.outerHeight()};return s=e.extend({},i,u,r||{}),this.pushStack(n(t,s,this))}})}),sumo.define("jquery.article",["jquery"],function(e){e.expr[":"].emptytext=e.expr.createPseudo(function(t){return function(t){return e.trim(e(t).text())===""}}),e.fn.findIncludeSelf=function(t,n){return e(this).is(n)?this.find(t):this.find(t).addBack(t)},e.fn.exists=function(){return this.length!==0},e.fn.findLeaves=function(t,n){var r=e(this),i=r.findIncludeSelf(t,"body").filter(n);return i.filter(function(){return!e(this).find(i).exists()})},e.fn.findTrunks=function(t,n){var r=e(this),i=r.findIncludeSelf(t,"body").filter(n);return i.filter(function(){return!e(this).parents().filter(i).exists()})};var t=function(t){var n=t||e("body").find("main, [role=main]").eq(0).get(0)||"body",r=e(),i=':not("[class^=comment],[id^=comment],[class*=footer],.sidebar:not(body) *,aside *,#sidebar *,footer *,[class*=footer]:not(body, [class*=not-footer]) *,#comments *,#livefyre-comments *,[class^=fyre] *,[class^=comment],[id^=comment] *,[class*=related-post]:not(body) *,.archive-page,.aside,.hentry-metro,:emptytext,.tve-leads-lightbox article")',s=[];s.push("article"),s.push(".post"),s.push(".entry-content"),s.push(".post-content"),s.push(".post_box"),s.push(".post-item"),s.push(".blog-post-wrapper"),s.push(".type-post"),s.push("#content"),s.push(".blog_content"),n!="body"?(s.push(".hentry"),s.push(".content")):(s.push("main .hentry"),s.push("[role=main] .hentry"),s.push("main .content"),s.push("[role=main] .content")),s.push("#post-content"),s.push("#blog-content"),s.push(".blog-post");var o=[":has(> p + p + p)"];for(var u=0;u<s.length;u++){r=e(n).findLeaves(s[u],i);if(r.length>0)return r}for(var u=0;u<o.length;u++){r=e(n).findTrunks(o[u],i);if(r.length>0)return r}return r},n=function(t){var n=null,r=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],i={};try{r.forEach(function(r){n=e(t).find(r);if(n.length>0)throw i})}catch(s){if(s===i)return n.eq(0);throw s}return null},r=function(t){var n=null,r=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not(.post-meta-info *, [class^=comment-count], [class^=comments-link], [class^=comments-number], li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],i={};try{r.forEach(function(r){n=e(t).find(r);if(n.length>0)throw i})}catch(s){if(s===i)return n.eq(0).hasClass("fb-comments")&&n.eq(0).prev("h3 + p").length>0?n.eq(0).prev("h3 + p").prev("h3"):n.eq(0);throw s}return null},i=function(e){return n(e)},s=function(t){var n=null,r=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],i={};try{r.forEach(function(r){n=e(t).find(r).filter("[href]");if(n.length>0)throw i})}catch(s){if(s===i)return n.eq(0);throw s}return null};e.articles=function(o){if("__smCache"in window&&"articles"in window.__smCache)return window.__smCache.articles;var u=t(o);return u.each(function(){this._header=n(e(this)),this._footer=r(e(this)),this._title=this._header?i(this._header):null,!this._title&&this._header&&(this._title=this._header),this._title?this._titleText=this._title.text().trim():this._titleText=null;var t=this._header?s(this._header):null;t?this._anchor=t:this._anchor=s(e(this)),this._anchor?this._url=this._anchor.attr("href"):this._url=null,this._url||(this._url=window.location.href)}),u=u.filter(function(){if(this._header){var t=e(this).outerHeight()*.666;if(t&&this._header.outerHeight()>=t)return!1}return!0}),"__smDebug"in window&&window.__smDebug&&u.each(function(){e(this).css("background","rgba(0,0,255,.5)"),this._header&&this._header.css("background","rgba(0,255,0,.5)"),this._title&&this._title.css("background","rgba(255,0,0,.5)"),this._footer&&this._footer.css("background","rgba(255,255,0,.5)")}),"__smCache"in window||(window.__smCache={}),window.__smCache.articles=u,setTimeout(function(){"__smCache"in window&&delete window.__smCache.articles},1e4),u},e.article=function(){return e.articles().eq(0)}}),sumo.define("jquery.displayrules",["jquery","URI","jquery.article"],function(e,t){e.isCurrentUrlAllowed=function(n,r,i,s){function o(e,t,n,r){var i=[];if(e&&e.length)for(var s=0;s<e.length;s++){var o=e[s];if(typeof o=="object"&&o.hasOwnProperty(t)&&o[t]==n){i.push(o);if(r)return i[0]}}return r?null:i}if(n&&n.length){var u=o(n,"filter_type","article",!0),a=[];u&&(a=e.articles()),i||(i=!1);var f=function(e){var t=Object.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},l=function(e){var t=f(e),n=t.length;return function(e){if(e==null)return!n;e=new Object(e);for(var r=0;r<n;r++){var i=t[r],s=i[0];if(i[1]!==e[s]||!(s in e))return!1}return!0}},c=function(e){var e=e.substr(1).split("&");if(e=="")return{};var t={};for(var n=0;n<e.length;++n){var r=e[n].split("=",2);if(r.length==1)t[r[0]]="";else try{t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}catch(i){t[r[0]]=r[1].replace(/\+/g," ")}}return t},h=function(e,t,n){if(e.has_hash&&e.hash!=t)return!1;if(e.has_query_params){var r=c(e.search),i=c(n),s=l(r);if(s(i))return!0;if(!(["containing","beginning"].indexOf(e.filter_type)>=0))return!1;var o=!0,u=Object.keys(r);for(var a=0;a<u.length;a++){var f=u[a],h=r[u[a]];if(h&&h.length)if(f in i){if(i[f].indexOf(h)!=0)return!1}else{if(e.filter_type!="containing")return!1;var p=!1;Object.keys(i).forEach(function(e){e.lastIndexOf(f)>=0&&f==e.substring(e.lastIndexOf(f))&&i[e].indexOf(h)==0&&(p=!0)});if(!p)return!1}else{if(f in i)continue;var d=Object.keys(i),p=!1;for(var v=0;v<d.length;v++){var m=d[v];if(m.indexOf(f)==0){p=!0;break}}if(!p)return!1}}}return!0},p=o(n,"parsedUserAgent",!0,!0),d=window.location.toString();d&&(d=d.toLowerCase());var v=window.location.pathname.toString();v&&(v=v.toLowerCase());var m=window.location.hostname+v;m&&(m=m.toLowerCase()),v[v.length-1]=="/"&&(v=v.substring(0,v.length-1),m=m.substring(0,m.length-1)),m.indexOf("www.")==0&&(m=m.substring(4));var g=window.location.search;g&&(g=g.toLowerCase());var y=window.location.hash;y&&(y=y.toLowerCase(),y[0]!="#"&&(y="#"+y));var b=c(g),w=Math.min(window.screen.availWidth||e(window).width(),e(window).width()),E=document.cookie.split(";"),S={},x=[];for(var T=0;T<E.length;T++){var N=E[T].substring(0,E[T].indexOf("=")).trim(),C=E[T].substring(E[T].indexOf("=")+1).trim();x.push(N),S[N]=C}var k=document.referrer;if(k&&k.length){k=k.toLowerCase();try{var L=t(k);if(L.is("ip")){var A=L.hostname();A&&(A=A.toLowerCase())}else{var A=L.domain();A&&(A=A.toLowerCase())}var O=L.path();O&&(O=O.toLowerCase());var M=L.tld();M&&(M=M.toLowerCase());var _=L.hostname()?L.hostname().toLowerCase()+O:O;O[O.length-1]=="/"&&(O=O.substring(0,O.length-1),_=_.substring(0,_.length-1)),_.indexOf("www.")==0&&(_=_.substring(4));var D=L.search(),P=L.hash()}catch(H){k=!1}}else k=!1;var B=function(t){var n=!1;return e.each(t,function(e,t){var r=!1;t.forEach(function(e){var t=!1;if(!r)if(e.filter_type=="article")a.length==1&&(t=!0);else if(e.filter_type=="smaller"){if(isNaN(parseFloat(e.filter_value))||w<parseFloat(e.filter_value))t=!0}else if(e.filter_type=="bigger"){if(isNaN(parseFloat(e.filter_value))||w>=parseFloat(e.filter_value))t=!0}else if(e.filter_type=="views_lt"){if(isNaN(e.pageviews)||s<e.pageviews)t=!0}else if(e.filter_type=="views_eq"){if(isNaN(e.pageviews)||s==e.pageviews)t=!0}else if(e.filter_type=="views_gt"){if(isNaN(e.pageviews)||s>e.pageviews)t=!0}else if(e.filter_type=="countryis")i==e.filter_value.toLowerCase()&&(t=!0);else if(e.filter_type=="countryisnot"){if(!i||i!=e.filter_value.toLowerCase())t=!0}else if(e.filter_type=="c_exists")x.indexOf(e.filter_value)>=0&&(t=!0);else if(e.filter_type=="c_dne")x.indexOf(e.filter_value)<0&&(t=!0);else if(e.filter_type=="c_equals")x.indexOf(e.filter_value)>=0&&S[e.filter_value]==e.param_value&&(t=!0);else if(e.filter_type=="c_notequals"){if(x.indexOf(e.filter_value)<0||S[e.filter_value]!=e.param_value)t=!0}else if(e.filter_type=="c_contains")x.indexOf(e.filter_value)>=0&&S[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if(e.filter_type=="c_notcontains"){if(x.indexOf(e.filter_value)<0||S[e.filter_value].indexOf(e.param_value)<0)t=!0}else if(e.filter_type=="q_exists")b&&b.hasOwnProperty(e.filter_value.toLowerCase())&&(t=!0);else if(e.filter_type=="q_dne"){if(!b||!b.hasOwnProperty(e.filter_value))t=!0}else if(e.filter_type=="q_equals")b&&b[e.filter_value]&&b[e.filter_value]==e.param_value&&(t=!0);else if(e.filter_type=="q_notequals"){if(!b||!b[e.filter_value]||b[e.filter_value]!=e.param_value)t=!0}else if(e.filter_type=="q_contains")b&&b[e.filter_value]&&b[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if(e.filter_type=="q_notcontains"){if(!b||!b[e.filter_value]||b[e.filter_value].indexOf(e.param_value)<0)t=!0}else if(e.filter_type=="exact"){var n=h(e,y,g);if(n)if(e.full_url)m==e.match_url&&(t=!0);else if(e.match_url==null&&n)t=!0;else if(m==e.match_url||v==e.match_url)t=!0}else if(e.filter_type=="beginning"){var n=h(e,y,g);if(n)if(e.full_url)m.indexOf(e.match_url.toLowerCase())==0&&(t=!0);else if(e.match_url==null&&n)t=!0;else if(m.indexOf(e.match_url.toLowerCase())==0||v.indexOf(e.match_url.toLowerCase())==0)t=!0}else if(e.filter_type=="containing"){var n=h(e,y,g);n&&(e.full_url?m.indexOf(e.match_url.toLowerCase())>=0&&(t=!0):e.match_url==null&&n?t=!0:m.indexOf(e.match_url.toLowerCase())>=0&&(t=!0))}else if(k&&["r_url_exact","r_domain_exact","r_url_beginning","r_domain_beginning","r_url_containing","r_domain_containing"].indexOf(e.filter_type)>=0)if(e.filter_type=="r_url_exact"){var n=h(e,P,D);e.full_url?n&&_==e.match_url.toLowerCase()&&(t=!0):n&&_==e.match_url.toLowerCase()?t=!0:e.match_url==null&&n&&(t=!0)}else if(e.filter_type=="r_domain_exact")e.host?e.host==A&&(t=!0):e.filter_value==A&&(t=!0);else if(e.filter_type=="r_url_beginning"){var n=h(e,P,D);e.full_url?n&&_.indexOf(e.match_url)==0&&(t=!0):n&&_.indexOf(e.match_url)==0?t=!0:e.match_url==null&&n&&(t=!0)}else if(e.filter_type=="r_domain_beginning")e.host&&A.indexOf(e.host)==0?t=!0:A.indexOf(e.filter_value)==0&&(t=!0);else if(e.filter_type=="r_url_containing"){var n=h(e,P,D);e.full_url?n&&_.indexOf(e.match_url)>=0&&(t=!0):n&&_.indexOf(e.match_url)>=0?t=!0:e.match_url==null&&n&&(t=!0)}else e.filter_type=="r_domain_containing"&&(e.host&&A.indexOf(e.host)>=0?t=!0:A.indexOf(e.filter_value)>=0&&(t=!0));else if(e.filter_type=="ua_os"&&p&&p.compareOS){var o=[e.filter_value];e.filter_value=="winmobile"?o=["windows mobile","windows phone"]:e.filter_value=="macos"?o=["mac os"]:e.filter_value=="windesktop"&&(o=["windows"]),o.indexOf(p.compareOS)>=0&&(t=!0)}else if(e.filter_type=="ua_browser"&&p&&p.compareBrowser){var o=[e.filter_value];e.filter_value=="chrome"?o=["chrome","chromium"]:e.filter_value=="ie"?o=["ie","ie mobile"]:e.filter_value=="opera"?o=["opera","opera mini","opera mobile","opera tablet"]:e.filter_value=="safari"&&(o=["safari","mobile safari"]),o.indexOf(p.compareBrowser)>=0&&(t=!0)}else if(e.filter_type=="ua_exact")e.filter_value.toLowerCase()==navigator.userAgent.toLowerCase()&&(t=!0);else if(e.filter_type=="ua_beginning")navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())==0&&(t=!0);else if(e.filter_type=="ua_containing")navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())>=0&&(t=!0);else if(e.filter_type=="hash_exact"){var u=e.filter_value[0]=="#"?e.filter_value:"#"+e.filter_value;u.toLowerCase()==y.toLowerCase()&&(t=!0)}else if(e.filter_type=="hash_beginning"){var u=e.filter_value[0]=="#"?e.filter_value:"#"+e.filter_value;y.toLowerCase().indexOf(u.toLowerCase())==0&&(t=!0)}else if(e.filter_type=="hash_containing"){var u=e.filter_value[0]=="#"?e.filter_value:"#"+e.filter_value;y.toLowerCase().indexOf(u.toLowerCase())>=0&&(t=!0)}else e.filter_type=="all"&&(t=!0);t||(r=!0)});if(!r)return n=!0,!1}),n},j=o(n,"rule_type","include",!1);if(j&&j.length){var F={},I=0;j.forEach(function(e){e.group_id&&e.group_id.length?F.hasOwnProperty(e.group_id)?F[e.group_id].push(e):F[e.group_id]=[e]:(F[I]=[e],I+=1)}),currentUrlIncluded=B(F)}else currentUrlIncluded=!0;if(!currentUrlIncluded)return!1;var q=o(n,"rule_type","exclude",!1),R=!1;if(!q||!q.length)return!0;var U={},I=0;return q.forEach(function(e){e.group_id&&e.group_id.length?U.hasOwnProperty(e.group_id)?U[e.group_id].push(e):U[e.group_id]=[e]:(U[I]=[e],I+=1)}),R=B(U),R?!1:!0}return!0}}),sumo.define("55c989d5-855d-4538-b67b-3cdb46acd968/sharer",["jquery","URI","color","plugins/text!55c989d5-855d-4538-b67b-3cdb46acd968/templates/sharer_popup.html","vex","twitter-text","jquery.timer","jquery.naturalwidth","jquery.nearest","jquery.article","jquery.displayrules"],function(e,t,n,r,i,s,o){e.expr[":"].invisible=e.expr.createPseudo(function(t){return function(t){if(e(t).css("visibility")=="hidden"||e(t).css("opacity")==0)return!0;var n=e(t).parent();return n?n.is(":invisible"):!1}});var u=function(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},a={currentImage:null,buttonEl:null,win:null,currentImageUrl:null,currentImageData:null,useUrlShortener:!0,shortener:"sumoly",short_domain:null,useAltText:!0,twitterUsername:null,color:null,position:null,contentOnly:!1,ignoreLinks:!0,ignoreImgLinks:!1,relShareOnly:!1,ctry:!1,shortUrls:{},scope:function(){if(a.contentOnly){var t=e.articles();return t}return e(document)},load:function(){e.ajax({type:"POST",dataType:"json",xhrFields:{withCredentials:!1},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/image-sharer/load",data:{site_id:a.api.properties.siteId,geoLocation:a.api.properties.geoLocation,pageViews:a.api.properties.views,userAgent:navigator.userAgent},success:function(e){e.success&&(a.useAltText=e.use_alt_text,a.useUrlShortener=e.use_url_shortener,a.shortener=e.shortener,a.shortDomain=e.short_domain,a.contentOnly=e.content_only,a.ignoreLinks=e.ignore_links,a.ignoreImgLinks=e.ignore_img_links,a.relShareOnly=e.rel_share_only,a.twitterUsername=e.twitter_username,a.color=e.color,a.position=e.position,a.display_rules=e.display_rules,a.services=e.services,a.ctry=a.api.properties.geoLocation&&a.api.properties.geoLocation.ctry?a.api.properties.geoLocation.ctry:!1,a.views=a.api.properties.views&&a.api.properties.views?a.api.properties.views:!1,a.reflink="https://sumome.com/?src=sm-is-"+a.api.properties.siteId,a.setup())}})},cleanup:function(){var t=a.scope();t.off(".image-sharer"),e(window).off(".image-sharer")},init:function(){r=r.replace("{{preloader}}",a.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/preloader.gif"),e(window).on("scroll",a.debounce(function(){a.scroll()},1)),a.load(),a.api.on("55c989d5-855d-4538-b67b-3cdb46acd968/service/settings",function(e){a.hideSharer(),a.cleanup(),a.useAltText=e.use_alt_text,a.contentOnly=e.content_only,a.ignoreLinks=e.ignore_links,a.ignoreImgLinks=e.ignore_img_links,a.relShareOnly=e.rel_share_only,a.useUrlShortener=e.use_url_shortener,a.shortener=e.shortener,a.shortDomain=e.short_domain,a.twitterUsername=e.twitter_username,a.color=e.color,a.position!=e.position&&(a.position=e.position,a.positionSharer()),a.display_rules=e.display_rules,a.services=e.services,a.setup()})},setup:function(){a.buttonEl=e('<div class="sumome-image-sharer"></div>');var t=a.services.slice(0);t.forEach(e.proxy(function(t){var r=e('<a href="javascript:void(0);" class="sumome-image-sharer-'+t+'"></a>');if(a.color){var i={backgroundColor:a.color,borderColor:n.shadeColor(a.color,-5)};n.whiteOrBlack(a.color)=="black"&&(i.backgroundImage='url("'+this.api.properties.baseUrl+"images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/"+t+'-black-60.png")'),r.css(i).hover(e.proxy(function(){e(this).css({backgroundColor:n.shadeColor(a.color,5),borderColor:a.color})}),e.proxy(function(){e(this).css(i)}))}a.buttonEl.append(r)},a)),a.buttonEl.css("width",40*a.services.length),a.buttonEl.on("click","a.sumome-image-sharer-twitter",a.openTwitter),a.buttonEl.on("click","a.sumome-image-sharer-facebook",a.openFacebook),a.buttonEl.on("click","a.sumome-image-sharer-pinterest",a.openPinterest),a.buttonEl.on("click","a.sumome-image-sharer-tapiture",a.openTapiture),a.buttonEl.on("click","a.sumome-image-sharer-tumblr",a.openTumblr),a.buttonEl.on("click","a.sumome-image-sharer-yummly",a.openYummly),e("body").append(a.buttonEl);if(e.isCurrentUrlAllowed(a.display_rules,null,a.ctry,a.views)){var r=a.scope();r.on("mouseenter.image-sharer","img",a.debounce(a.mouseenter,250)),r.on("mouseleave.image-sharer","img",a.mouseleave),e(window).on("touchstart.image-sharer",a.debounce(a.touch,200)),e(window).on("resize.image-sharer",a.throttle(a.positionSharer,150))}},debounce:function(e,t){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(r,i)},t),n||e.apply(r,i)}},throttle:function(e,t){var n,r,i,s=null,o=0,u=function(){o=(new Date).getTime(),s=null,i=e.apply(n,r),s||(n=r=null)};return function(){var a=(new Date).getTime();o||(o=a);var f=t-(a-o);return n=this,r=arguments,f<=0||f>t?(clearTimeout(s),s=null,o=a,i=e.apply(n,r),s||(n=r=null)):s||(s=setTimeout(u,f)),i}},openFacebook:function(n){n.preventDefault(),a.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"facebook-click"}),a.useAltText?a.currentImageAlt=a.currentImage.attr("alt")||e(document).find("title").text()||"":a.currentImageAlt=e(document).find("title").text()||"",a.currentImageUrl=(new t(a.currentImage.attr("src"))).absoluteTo(window.location.toString()).toString(),a.currentImageData=a.getImageData(a.currentImage),a.$modal=i.open({content:r,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),a.$modal.on("vexClose",function(){var t=e.timer("closeImageSharer");t&&t.kill()}),a.$modal.on("vexResize",e.proxy(function(t,n){var r=Math.max((e(window).height()-n.$vexContent.outerHeight())/2,0);n.$vex.css({"padding-top":r+"px"})},this)),a.$modal.on("vexOpen",e.proxy(function(e,t){a.$modal.resize(),a.loadFacebookMarkup()},this))},generateShare:function(t){var n=window.location.href;if(a.useUrlShortener){var r=a.shortener+":"+n;r in a.shortUrls?a.generateShareFromUrl(t,a.shortUrls[r]):e.ajax({type:"POST",dataType:"json",url:a.api.properties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:a.api.properties.siteId,href:n},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){e.success&&(a.shortUrls[r]=e.url,n=e.url),a.generateShareFromUrl(t,n)})}else a.generateShareFromUrl(t,n)},generateShareFromUrl:function(e,t){e=(e+" "+t).trim(),a.$modal.find("textarea").val(e),a.$modal.find(".sumome-image-sharer-link").attr("href",a.reflink),a.$modal.find(".sumome-image-sharer-fb-message").text(e)},loadFacebookMarkup:function(t){e.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/image-sharer/facebook/load",data:{site_id:a.api.properties.siteId},statusCode:{401:function(){t||a.loadFacebookMarkup()}},success:function(t){t=t.replace("{{sumome-icon}}",a.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),t=t.replace("{{facebook-icon}}",a.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/facebook-icon-128.png"),e("#sumome-image-sharer").html(t);var n=e("#sumome-image-sharer .sumome-connect");n.length>0?(a.goSmall(),a.$modal.find(".sumome-image-sharer-link").attr("href",a.reflink),n.click(a.authenticateFacebook)):(a.goLarge(),a.$modal.find(".sumome-image-sharer-fb-image").css("background-image","url("+a.currentImageUrl+")"),a.generateShare(a.currentImageAlt),a.$modal.find("select").change(function(){var t=e(this).find("option").filter(":selected"),n=t.text(),r=t.attr("value"),i=t.data("access-token");a.$modal.find(".sumome-image-sharer-fb-user img").attr("src","https://graph.facebook.com/v2.0/"+r+"/picture?access_token="+i),a.$modal.find(".sumome-image-sharer-fb-user a").text(n)}),a.$modal.find("textarea").on("keyup",function(){a.$modal.find(".sumome-image-sharer-fb-message").text(e(this).val())}),a.$modal.find("button").click(a.submitFacebook),a.$modal.find(".sumome-image-sharer-fb-message").focus(),a.$modal.resize())}})},checkFacebookWindowClosed:function(){a.isAuthWindowClosed()?a.loadFacebookMarkup():setTimeout(a.checkFacebookWindowClosed,500)},authenticateFacebook:function(){a.isAuthWindowClosed()?(a.win=window.open(a.api.properties.sumoUrl+"/apps/image-sharer/facebook/login","image-sharer-auth","width=640,height=400"),a.win.focus(),a.checkFacebookWindowClosed()):(a.win.location=a.api.properties.sumoUrl+"/apps/image-sharer/facebook/login",a.win.resizeTo(640,400),a.win.focus(),a.checkFacebookWindowClosed())},submitFacebook:function(){var t=a.$modal.find("textarea").val().trim(),n=a.currentImageUrl,r=a.$modal.find("option").filter(":selected"),i=r.text(),s=r.attr("value"),o=r.data("access-token");a.$modal.find("select, textarea, button").prop("disabled",!0),e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/image-sharer/facebook/post",data:{status:t,image_url:n,image_data:a.currentImageData,targetId:s,targetToken:o},statusCode:{401:function(){a.loadFacebookMarkup()},500:function(){a.close()}},success:function(t){t.success?(a.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"facebook-share"}),a.goSmall(),e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),e("#sumome-image-sharer").find("button").click(function(e){a.close()}),a.$modal.resize(),e.timer("closeImageSharer",a.close,3e3).start()):(a.goSmall(),a.showError(t.error),e("#sumome-image-sharer").find("button").click(function(e){a.close()}),a.$modal.resize())}})},openTumblr:function(n){n.preventDefault(),a.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"tumblr-click"}),a.useAltText?a.currentImageAlt=a.currentImage.attr("alt")||e(document).find("title").text()||"":a.currentImageAlt=e(document).find("title").text()||"",a.currentImageUrl=(new t(a.currentImage.attr("src"))).absoluteTo(window.location.toString()).toString(),a.currentImageData=a.getImageData(a.currentImage),a.$modal=i.open({content:r,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),a.$modal.on("vexClose",function(){var t=e.timer("closeImageSharer");t&&t.stop()}),a.$modal.on("vexResize",e.proxy(function(t,n){var r=Math.max((e(window).height()-n.$vexContent.outerHeight())/2,0);n.$vex.css({"padding-top":r+"px"})},this)),a.$modal.on("vexOpen",e.proxy(function(e,t){a.$modal.resize(),a.loadTumblrMarkup()},this))},loadTumblrMarkup:function(t){e.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/image-sharer/tumblr/load",data:{site_id:a.api.properties.siteId},statusCode:{401:function(){t||a.loadTumblrMarkup()}},success:function(t){t=t.replace("{{sumome-icon}}",a.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),t=t.replace("{{tumblr-icon}}",a.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/tumblr-icon-128.png"),e("#sumome-image-sharer").html(t);var n=e("#sumome-image-sharer .sumome-connect");n.length>0?(a.goSmall(),a.$modal.find(".sumome-image-sharer-link").attr("href",a.reflink),n.click(a.authenticateTumblr)):(a.goLarge(),a.$modal.find(".sumome-image-sharer-tm-image").css("background-image","url("+a.currentImageUrl+")"),a.generateTumblr(a.currentImageAlt),a.$modal.find("textarea").on("keyup",function(){a.$modal.find(".sumome-image-sharer-tm-message").text(e(this).val())}),a.$modal.find("button").click(a.submitTumblr),a.$modal.find(".sumome-image-sharer-tm-message").focus(),a.$modal.resize())}})},generateTumblr:function(t){var n=window.location.href;if(a.useUrlShortener){var r=a.shortener+":"+n;r in a.shortUrls?a.generateShareFromUrl(t,a.shortUrls[r]):e.ajax({type:"POST",dataType:"json",url:a.api.properties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:a.api.properties.siteId,href:n},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){e.success&&(a.shortUrls[r]=e.url,n=e.url),t=(t+" "+n).trim(),a.$modal.find("textarea").val(t),a.$modal.find(".sumome-image-sharer-tm-message").text(t)})}else t=(t+" "+n).trim(),a.$modal.find("textarea").val(t),a.$modal.find(".sumome-image-sharer-link").attr("href",a.reflink),a.$modal.find(".sumome-image-sharer-tm-message").text(t)},checkTumblrWindowClosed:function(){a.isAuthWindowClosed()?a.loadTumblrMarkup():setTimeout(a.checkTumblrWindowClosed,500)},authenticateTumblr:function(){a.isAuthWindowClosed()?(a.win=window.open(a.api.properties.sumoUrl+"/apps/image-sharer/tumblr/login","image-sharer-auth","width=740,height=400"),a.win.focus(),a.checkTumblrWindowClosed()):(a.win.location=a.api.properties.sumoUrl+"/apps/image-sharer/tumblr/login",a.win.resizeTo(740,400),a.win.focus(),a.checkTumblrWindowClosed())},submitTumblr:function(){var t=a.$modal.find("textarea").val().trim(),n=a.currentImageUrl,r=a.$modal.find("select").val();a.$modal.find("textarea, button, select").prop("disabled",!0),e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/image-sharer/tumblr/post",data:{status:t,image_url:n,image_data:a.currentImageData,base_hostname:r},statusCode:{401:function(){a.loadTumblrMarkup()}},success:function(t){t.success?(a.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"tumblr-share"}),a.goSmall(),e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),e("#sumome-image-sharer").find("button").click(function(e){a.close()}),a.$modal.resize(),e.timer("closeImageSharer",a.close,3e3).start()):(a.goSmall(),a.showError(t.error),e("#sumome-image-sharer").find("button").click(function(e){a.close()}),a.$modal.resize())}})},openTwitter:function(n){n.preventDefault(),a.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"twitter-click"}),a.useAltText?a.currentImageAlt=a.currentImage.attr("alt")||e(document).find("title").text()||"":a.currentImageAlt=e(document).find("title").text()||"",a.currentImageUrl=(new t(a.currentImage.attr("src"))).absoluteTo(window.location.toString()).toString(),a.currentImageData=a.getImageData(a.currentImage),a.$modal=i.open({content:r,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),a.$modal.on("vexClose",function(){var t=e.timer("closeImageSharer");t&&t.stop()}),a.$modal.on("vexResize",e.proxy(function(t,n){var r=Math.max((e(window).height()-n.$vexContent.outerHeight())/2,0);n.$vex.css({"padding-top":r+"px"})},this)),a.$modal.on("vexOpen",e.proxy(function(e,t){a.$modal.resize(),a.loadTwitterMarkup()},this))},generateTweet:function(t){var n=window.location.href;if(a.useUrlShortener){var r=a.shortener+":"+n;r in a.shortUrls?a.generateTweetFromUrl(t,a.shortUrls[r]):e.ajax({type:"POST",dataType:"json",url:a.api.properties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:a.api.properties.siteId,href:n},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){e.success&&(a.shortUrls[r]=e.url,n=e.url),a.generateTweetFromUrl(t,n)})}else a.generateTweetFromUrl(t,n)},generateTweetFromUrl:function(e,t){var n=t.substr(0,6)=="https:"?23:22,r=a.twitterUsername,i=117-n;r&&(r.substr(0,1)!="@"&&(r="@"+r),i-=5+r.length),e=e.trim(),e=e.replace(/\r\n|\n|\r/g," "),e.length+1>i&&(e=e.substr(0,i-2)+"…"),e=(e+" "+t+(r?" via "+r:"")).trim(),a.$modal.find("textarea").val(e),a.$modal.find(".sumome-image-sharer-link").attr("href",a.reflink),a.$modal.find(".sumome-image-sharer-tw-message").text(e),a.updateTwitterCount()},updateTwitterCount:function(){var e=a.$modal.find("textarea").val().trim(),t=a.charactersLeft(e);a.$modal.find(".sumome-image-sharer-tw-count").html(t+" chars remaining"),t<0?a.$modal.find(".sumome-image-sharer-tw-count").css({color:"red"}):a.$modal.find(".sumome-image-sharer-tw-count").css({color:""})},loadTwitterMarkup:function(t){e.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/image-sharer/twitter/load",data:{site_id:a.api.properties.siteId},statusCode:{401:function(){t||a.loadTwitterMarkup()}},success:function(t){t=t.replace("{{sumome-icon}}",a.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),t=t.replace("{{twitter-icon}}",a.api.properties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/twitter-icon-128.png"),e("#sumome-image-sharer").html(t);var n=e("#sumome-image-sharer .sumome-connect");n.length>0?(a.goSmall(),a.$modal.find(".sumome-image-sharer-link").attr("href",a.reflink),n.click(a.authenticateTwitter)):(a.goLarge(),a.$modal.find(".sumome-image-sharer-tw-image").css("background-image","url("+a.currentImageUrl+")"),a.generateTweet(a.currentImageAlt),a.$modal.find("textarea").on("keyup",function(){a.$modal.find(".sumome-image-sharer-tw-message").text(e(this).val()),a.updateTwitterCount()}),a.$modal.find("button").click(a.submitTwitter),a.$modal.find(".sumome-image-sharer-tw-message").focus(),a.$modal.resize())}})},checkTwitterWindowClosed:function(){a.isAuthWindowClosed()?a.loadTwitterMarkup():setTimeout(a.checkTwitterWindowClosed,500)},authenticateTwitter:function(){a.isAuthWindowClosed()?(a.win=window.open(a.api.properties.sumoUrl+"/apps/image-sharer/twitter/login","image-sharer-auth","width=740,height=400"),a.win.focus(),a.checkTwitterWindowClosed()):(a.win.location=a.api.properties.sumoUrl+"/apps/image-sharer/twitter/login",a.win.resizeTo(740,400),a.win.focus(),a.checkTwitterWindowClosed())},submitTwitter:function(){var t=a.$modal.find("textarea").val().trim(),n=a.currentImageUrl;a.$modal.find("textarea, button").prop("disabled",!0);var t=a.$modal.find("textarea").val().trim(),r=a.charactersLeft(t);r>=0?e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:a.api.properties.sumoUrl+"/apps/image-sharer/twitter/post",data:{status:t,image_url:n,image_data:a.currentImageData},statusCode:{401:function(){a.loadTwitterMarkup()}},success:function(t){t.success?(a.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"twitter-share"}),a.goSmall(),e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),e("#sumome-image-sharer").find("button").click(function(e){a.close()}),a.$modal.resize(),e.timer("closeImageSharer",a.close,3e3).start()):(a.goSmall(),a.showError(t.error),e("#sumome-image-sharer").find("button").click(function(e){a.close()}),a.$modal.resize())}}):a.$modal.find("textarea, button").prop("disabled",!1)},openPinterest:function(n){n.preventDefault(),a.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"pinterest-click"}),a.useAltText?a.currentImageAlt=a.currentImage.attr("alt")||e(document).find("title").text()||"":a.currentImageAlt=e(document).find("title").text()||"",a.currentImageUrl=(new t(a.currentImage.attr("src"))).absoluteTo(window.location.toString()).toString();var r=window.location.toString();a.closeAuthWindow(),a.win=window.open(a.generatePinterestUrl(r),"image-sharer-pinterest","width=640,height=320")},generatePinterestUrl:function(t){var n={url:t,media:a.currentImageUrl,description:a.currentImageAlt};return"http://pinterest.com/pin/create/button/?"+e.param(n)},openTapiture:function(n){n.preventDefault(),a.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"tapiture-click"}),a.useAltText?a.currentImageAlt=a.currentImage.attr("alt")||e(document).find("title").text()||"":a.currentImageAlt=e(document).find("title").text()||"",a.currentImageUrl=(new t(a.currentImage.attr("src"))).absoluteTo(window.location.toString()).toString();var r=window.location.toString();a.closeAuthWindow(),a.win=window.open(a.generateTapitureUrl(r),"image-sharer-tapiture","width=600,height=500")},generateTapitureUrl:function(t){var n={url:a.currentImageUrl,title:a.currentImageAlt,page_url:t,type:"image"};return"http://tapiture.com/widget/tap?"+e.param(n)},openYummly:function(n){n.preventDefault(),a.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"yummly-click"}),a.useAltText?a.currentImageAlt=a.currentImage.attr("alt")||e(document).find("title").text()||"":a.currentImageAlt=e(document).find("title").text()||"",a.currentImageUrl=(new t(a.currentImage.attr("src"))).absoluteTo(window.location.toString()).toString();var r=window.location.toString();a.closeAuthWindow(),a.win=window.open(a.generateYummlyUrl(r),"image-sharer-yummly","width=600,height=500")},generateYummlyUrl:function(t){var n={url:t,title:a.currentImageAlt,image:a.currentImageUrl};return"http://www.yummly.com/urb/verify?"+e.param(n)},goSmall:function(){a.$modal.closest(".sumome-image-sharer-popup").removeClass("sumome-image-sharer-popup-large").addClass("sumome-image-sharer-popup-small"),this.resize()},goLarge:function(){a.$modal.closest(".sumome-image-sharer-popup").removeClass("sumome-image-sharer-popup-small").addClass("sumome-image-sharer-popup-large"),this.resize()},resize:function(){var e=a.$modal.closest(".sumome-image-sharer-popup"),t="small",n=e.innerWidth();n>=1440?t="xxlarge":n>=1080?t="xlarge":n>=768?t="large":n>=480?t="medium":t="small";var r="sumome-res-"+t;e.removeClass("sumome-res-small sumome-res-medium sumome-res-large sumome-res-xlarge sumome-res-xxlarge").addClass(r)},showError:function(t){e("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Golly Gee Wilikers</h3><h5>'+t+'</h5><hr><button class="sumome-button sumome-alert sumome-radius sumome-expand">Close</button></div>')},close:function(){a.closeAuthWindow(),i.close()},openAuthWindow:function(){a.isAuthWindowClosed()&&(a.win=window.open("about:blank","image-sharer-auth","width=1,height=1"))},isAuthWindowClosed:function(){return!a.win||a.win.closed},closeAuthWindow:function(){a.isAuthWindowClosed()||(a.win.close(),a.win=null)},mouseenter:function(t){var n=Math.min(window.screen.availWidth||e(window).width(),e(window).width());if(e.isCurrentUrlAllowed(a.display_rules,null,a.ctry,a.views)){var r=e.timer("hideImageSharer");r&&r.kill(),a.currentImage=null;var i=e(t.target),s=i.naturalWidth(),o=i.naturalHeight(),n=i.width(),u=i.height();if(s<150||o<150){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(i.parent().is("div[id^=grs_]")){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(i.is(".ob-widget *")){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(i.attr("rel")&&i.attr("rel").toLowerCase().indexOf("noshare")==0){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(!i.attr("rel")||i.attr("rel").toLowerCase().indexOf("share")!=0){var f=i.parent(),l=/[^/\\]+(?:jpg|gif|png)/gi;if(a.ignoreLinks&&f&&f.get(0).tagName.toUpperCase()=="A"&&f.attr("href")&&f.attr("href")!=i.attr("src")&&f.attr("href").match(l)==null){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(a.ignoreImgLinks&&f&&f.get(0).tagName.toUpperCase()=="A"&&f.attr("href")&&f.attr("href")!=i.attr("src")&&f.attr("href").match(l)!=null){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(i.parents("form").length>0){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(i.is(":hidden")||i.is(":invisible")){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(a.relShareOnly){a.buttonEl.stop(!0,!0).fadeOut(500);return}}a.currentImage=e(t.target),a.positionSharer(),a.isOverFixedHeader()||a.buttonEl.stop(!0,!0).fadeIn(500)}},visibleArea:function(t){var n={height:t.offsetHeight,width:t.offsetWidth,isRelative:!1},r={y:t.offsetTop||0,x:t.offsetLeft||0,node:t.offsetParent},i,s,o,u,a;while(!e(t).is("body")&&null!==(t=t.parentNode)){try{i=window.getComputedStyle(t)}catch(f){}i&&i.position=="relative"&&(n.isRelative=!0);if(i&&i.overflow==="hidden")return s=t.offsetHeight-Math.max(e("body").offset().top,r.y),o=t.offsetWidth-Math.max(e("body").offset().left,r.x),t!==r.node&&(s+=t.offsetTop||0,o+=t.offsetLeft||0),s<n.height&&(s<0?n.height=0:n.height=s),o<n.width&&(o<0?n.width=0:n.width=o),n;t===r.node&&(r.y=r.y+(t.offsetTop||0),r.x=r.x+(t.offsetLeft||0),r.node=t.offsetParent)}return n},positionSharer:function(){if(a.currentImage==null||e(".sumome-image-sharer-popup-content").is(":visible"))return;var t=a.currentImage.offset(),n=a.currentImage.offsetParent().offset(),r=a.visibleArea(a.currentImage[0]),i=r.hasHiddenOverflow,s=["absolute"].indexOf(a.currentImage.css("position"))>=0;if(s){if(r.isRelative)var o=["absolute","fixed","relative"];else var o=["absolute","fixed"];var u=a.currentImage.parents().filter(function(){return!e(this).is("body,html")&&o.indexOf(e(this).css("position"))>=0});s=u&&u.length}var f=null,l=null,c=null,h=null;if(s){var p=Math.max(e("body").offset().top+(isNaN(parseFloat(e("body").css("padding-top")))?0:parseFloat(e("body").css("padding-top"))),t.top-(t.top-n.top)),d=Math.max(e("body").offset().left+(isNaN(parseFloat(e("body").css("padding-left")))?0:parseFloat(e("body").css("padding-left"))),t.left-(t.left-n.left)),f=parseFloat(isNaN(parseFloat(a.currentImage.css("padding-top")))?0:parseFloat(a.currentImage.css("padding-top")))+parseFloat(isNaN(parseFloat(a.currentImage.css("border-top")))?0:a.currentImage.css("border-top")),l=parseFloat(isNaN(parseFloat(a.currentImage.css("padding-left")))?0:parseFloat(a.currentImage.css("padding-left")))+parseFloat(isNaN(parseFloat(a.currentImage.css("border-left")))?0:a.currentImage.css("border-left"));t.top-p+f<0?c=0:c=t.top-p+f,t.left-d+l<0?h=0:h=t.left-d+l}else if(a.currentImage.css("position")=="fixed")var p=a.currentImage.position().top,d=a.currentImage.position().left;else var p=Math.max(e("body").offset().top+(isNaN(parseFloat(e("body").css("padding-top")))?0:parseFloat(e("body").css("padding-top"))),t.top),d=Math.max(e("body").offset().left+(isNaN(parseFloat(e("body").css("padding-left")))?0:parseFloat(e("body").css("padding-left"))),t.left);if(f===null)var f=parseFloat(isNaN(a.currentImage.css("padding-top"))?0:a.currentImage.css("padding-top"))+isNaN(parseFloat(a.currentImage.css("border-top")))?0:parseFloat(a.currentImage.css("border-top")),l=parseFloat(isNaN(a.currentImage.css("padding-left"))?0:a.currentImage.css("padding-left"))+isNaN(parseFloat(a.currentImage.css("border-left")))?0:parseFloat(a.currentImage.css("border-left"));var v=parseFloat(isNaN(a.currentImage.css("padding-left"))?0:a.currentImage.css("padding-bottom"))+isNaN(parseFloat(a.currentImage.css("border-bottom")))?0:parseFloat(a.currentImage.css("border-bottom")),m=parseFloat(isNaN(a.currentImage.css("padding-left"))?0:a.currentImage.css("padding-right"))+isNaN(parseFloat(a.currentImage.css("border-right")))?0:parseFloat(a.currentImage.css("border-right")),g=r.height-(c!==null?p-t.top+c:f)-v,y=r.width-(h!==null?d-t.left+h:l)-m,b=c!==null?c:f,w=h!==null?h:l,E={top:p+b+g/2-20,left:d+w+y/2-a.services.length*40/2};a.position=="tl"?E={top:p+b+10,left:d+w+10,position:a.currentImage.css("position")=="fixed"?"fixed":"absolute"}:a.position=="tr"?E={top:p+b+10,left:d+w+(y-a.services.length*40)-10,position:a.currentImage.css("position")=="fixed"?"fixed":"absolute"}:a.position=="bl"?E={top:p+b+(g-40)-10,left:d+w+10,position:a.currentImage.css("position")=="fixed"?"fixed":"absolute"}:a.position=="br"&&(E={top:p+b+(g-40)-10,left:d+w+(y-a.services.length*40)-10,position:a.currentImage.css("position")=="fixed"?"fixed":"absolute"}),a.buttonEl.css(E)},getImageData:function(t){var n=e(t).naturalWidth(),r=e(t).naturalHeight(),i=e(t).attr("src"),s=document.createElement("canvas"),o=1280,u=800;if(i&&i.toLowerCase().indexOf(".gif")>-1)return null;if(s){var a=Math.min(o/n,u/r);a<1&&(n*=a,r*=a),s.width=n,s.height=r;var f=s.getContext("2d");if(f){f.drawImage(t.get(0),0,0,n,r);try{return s.toDataURL()}catch(l){}}}return null},charactersLeft:function(e){var t,n,r,i=e,o=location.protocol==="https:"?"0123456789012345":"012345678901234",u=s.txt.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!0}),a=117;r=u.length;if(r>0)for(var n=0;n<r;n++)t=u[n].url,i=i.replace(t,o);return a-=i.length,a},touch:function(t){var n=Math.min(window.screen.availWidth||e(window).width(),e(window).width());if(e.isCurrentUrlAllowed(a.display_rules,null,a.ctry,a.views)){var r=e.timer("hideImageSharer");r&&r.kill();var i=t.pageX||t.originalEvent.touches[0].pageX,s=t.pageY||t.originalEvent.touches[0].pageY,o=e.nearest({x:i,y:s},"img");a.currentImage=null;if(!o){a.buttonEl.stop(!0,!0).fadeOut(500);return}var u=o.naturalWidth(),f=o.naturalHeight(),n=o.width(),l=o.height();if(u<150||f<150){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(o.attr("rel")&&o.attr("rel").toLowerCase().indexOf("noshare")==0){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(!o.attr("rel")||o.attr("rel").toLowerCase().indexOf("share")!=0){var c=o.parent(),h=/[^/\\]+(?:jpg|gif|png)/gi;if(a.ignoreLinks&&c&&c.get(0).tagName.toUpperCase()=="A"&&c.attr("href")&&c.attr("href")!=o.attr("src")&&c.attr("href").match(h)==null){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(a.ignoreImgLinks&&c&&c.get(0).tagName.toUpperCase()=="A"&&c.attr("href")&&c.attr("href")!=o.attr("src")&&c.attr("href").match(h)!=null){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(o.parents("form").length>0){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(o.is(":hidden")||o.is(":invisible")){a.buttonEl.stop(!0,!0).fadeOut(500);return}if(a.relShareOnly){a.buttonEl.stop(!0,!0).fadeOut(500);return}}a.currentImage=o,a.positionSharer(),a.isOverFixedHeader()||(a.buttonEl.stop(!0,!0).fadeIn(500),e.timer("hideImageSharer",a.hideSharer,5e3).start())}},mouseleave:function(t){if(a.currentImage==null)return;var n=e(t.toElement||t.relatedTarget);if(n.hasClass(".sumome-image-sharer"))return;if(n.closest(".sumome-image-sharer").length>0)return;a.hideSharer()},hideSharer:function(){var t=e.timer("hideImageSharer");t&&t.kill(),a.currentImage=null,a.buttonEl.stop(!0,!0).fadeOut(500)},scroll:function(){a.isOverFixedHeader()&&a.hideSharer()},isOverFixedHeader:function(){var t=a.buttonEl.css("opacity")==="1",n=e("header").css("position")==="fixed";if(t&&n){var r=8,i={x:parseInt(a.buttonEl.css("left").replace("px",""))-e(window).scrollLeft()-r,y:parseInt(a.buttonEl.css("top").replace("px",""))-e(window).scrollTop()-r,width:a.buttonEl.width()+2*r,height:a.buttonEl.height()+2*r},s={x:e("header").position().left,y:e("header").position().top,width:e("header").width(),height:e("header").height()};return u(i,s)?!0:!1}return!1}};return a}),sumo.define("55c989d5-855d-4538-b67b-3cdb46acd968/service",["jquery","55c989d5-855d-4538-b67b-3cdb46acd968/sharer"],function(e,t){return function(e){var n=function(n,r){sumo.require(["plugins/css!../css/sumome-image-sharer.css"]),t.api=e,t.init(),r()},r=function(e){e()};return{init:n,destroy:r}}}),sumo.define("55c989d5-855d-4538-b67b-3cdb46acd968/service",function(){})})(undefined,undefined);