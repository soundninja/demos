webpackJsonp([29],{0:function(k,l,g){g(1529);g(1528)},1528:function(k,l,g){YUI.add("squarespace-social-button",function(b){b.namespace("Squarespace");var e=b.Squarespace.SocialServices,g=function(a){return a},d=b.Squarespace.SocialButton=b.Base.create("socialButton",b.Widget,[],{initializer:function(a){this._servicesRendered={};a.services.forEach(function(a){this._servicesRendered[a]=!1},this);this._open=!1;this._anims={};this._serviceRenderers={};this._serviceRenderers[e.REDDIT]=this._renderReddit;
this._serviceRenderers[e.FACEBOOK]=this._renderFacebook;this._serviceRenderers[e.TWITTER]=this._renderTwitter;this._serviceRenderers[e.GOOGLE]=this._renderGoogle;this._serviceRenderers[e.LINKEDIN]=this._renderLinkedIn;this._serviceRenderers[e.STUMBLE]=this._renderStumble;this._serviceRenderers[e.PINTEREST]=this._renderPinterest;this._serviceRenderers[e.TUMBLR]=this._renderTumblr;this.publish("serviceRendered",{defaultFn:this._defaultServiceRendered,context:this});this.publish("buttonClicked",{defaultFn:this._defaultButtonClicked,
preventable:!0,context:this});this.publish("close",{defaultFn:this.close,preventable:!0,context:this});this.publish("servicesRendered");this._serviceContainer=b.Node.create('<div class="ss-social-button-container"></div>')},_defaultServiceRendered:function(a){this._servicesRendered[a.details[0]]=!0;this._allServicesRendered()&&(this.set("loaded",!0),this.fire("servicesRendered",this))},open:function(){this._open=!0;this._openList()},close:function(){this._open=!1;this._closeList()},_onClick:function(a){this.fire("buttonClicked",
a)},_defaultButtonClicked:function(a){this.get("loaded")?this.isOpen()?this.close():this.open():this.get("loading")||(this.once("servicesRendered",function(){this.set("loading",!1)},this),this.set("loading",!0),this._renderServices(),this.open())},isOpen:function(){return this._open},destructor:function(){this._stopAnimations()},_stopAnimations:function(){b.Object.values(this._anims).forEach(function(a){a.stop()})},_closeList:function(){var a=this.get("contentBox");if(a._node&&a.inDoc()){var c=a.one(".ss-social-button-wrapper"),
f=a.one(".ss-social-list-wrapper"),a=c.get("offsetWidth");c.get("offsetHeight");c=f.get("offsetWidth");Math.abs(a-c);f&&(f._node&&f.inDoc())&&(c=new b.Anim({node:f,duration:0.3,easing:b.Easing.easeOutStrong,to:{height:0,opacity:0}}),this._anims.close=c,c.on("end",function(){f.setStyle("overflow",null);this.fire("listClose")},this),c.run())}},_openList:function(){var a=this.get("contentBox");if(a._node&&a.inDoc()){var c=a.one(".ss-social-button-wrapper"),f=a.one(".ss-social-list-wrapper"),a=a.one(".ss-social-button-list"),
e=c.get("offsetWidth"),c=c.get("offsetHeight"),d=f.get("offsetWidth"),g=Math.abs(e-d),h;this.get("id");f.setStyles({left:(e<=d?-1:1)*g/2,top:c});c=b.DOM.viewportRegion();d=a.get("region");e=d.height+d.top-(c.height+c.top);c=c.left-d.left;d=0<c;0<e&&f.setStyle("top",parseInt(f.getComputedStyle("top"),10)-e-20);d&&f.setStyle("left",parseInt(f.getComputedStyle("left"),10)+c+20);f&&(f._node&&f.inDoc())&&(a=new b.Anim({node:f,duration:0.3,easing:b.Easing.easeOutStrong,to:{height:a.get("offsetHeight"),
opacity:1}}),this._anims.open=a,a.on("end",function(){f.setStyle("overflow","visible");h=b.one(document).on("click",function(a){a.target.ancestor(".ss-social-list-wrapper",!0)||(this.fire("close"),h.detach(),h=null)},this);this.fire("listOpen")},this),a.run())}},_allServicesRendered:function(){return b.Object.values(this._servicesRendered).every(g)},bindUI:function(){var a=this.get("contentBox").one(".ss-social-button-wrapper");this.after("loadingChange",this._onLoadingChange,this);a.on("click",this._onClick,
this)},_onLoadingChange:function(){this.get("boundingBox").ancestor(".squarespace-social-buttons").toggleClass("loading",this.get("loading"))},renderUI:function(){var a=this.get("contentBox");a.append('<div class="ss-social-button-wrapper"><div class="ss-social-button"><span class="ss-social-button-icon"></span>Share</div></div>');a.append('<div class="ss-social-list-wrapper"><div class="ss-social-button-list"></div></div>');a.one(".ss-social-button-list")},_renderServices:function(){var a=this.get("contentBox").one(".ss-social-button-list");
this.get("services").forEach(function(b){this._serviceRenderers[b].call(this,a)},this)},_defaultTimeoutCb:function(a){var c=b.Squarespace.Utils.reverseMap(b.Squarespace.SocialServices),f="(Social Button) Loading render script for service: {name} too longer than "+d.SCRIPT_TIMEOUT/1E3+" seconds. Skipping.";return function(){console.warn(b.substitute(f,{name:c[a]}));this.fire("serviceRendered",a)}},_defaultFailureCb:function(a){var c=b.Squarespace.Utils.reverseMap(b.Squarespace.SocialServices);return function(){console.warn(b.substitute("(Social Button) Service {name} render script failed to load.",
{name:c[a]}));this.fire("serviceRendered",a)}},_renderReddit:function(a){var c=this._serviceContainer.cloneNode(!0),f=this.get("url");this.get("contentBox");c.addClass("reddit");c.append(b.Node.create(d.REDDIT_LINK));c.on("click",function(a){window.open("http://reddit.com/submit?url="+encodeURIComponent(f),"Submit to Reddit");a.stopImmediatePropagation()});a.append(c);this.fire("serviceRendered",e.REDDIT)},_renderTumblr:function(a){var c=this._serviceContainer.cloneNode(!0),f={url:this.get("url"),
name:this.get("title")},f=b.QueryString.stringify(f);c.addClass("tumblr");c.append(b.substitute(d.TUMBLR_TAG_TEMPLATE,{query:f}));a.append(c);b.Get.script(d.TUMBLR_URL,{onSuccess:function(){b.later(400,this,function(){this.fire("serviceRendered",e.TUMBLR)})},onFailure:this._defaultFailureCb(e.TUMBLR),onTimeout:this._defaultTimeoutCb(e.TUMBLR),timeout:d.SCRIPT_TIMEOUT,context:this,win:b.config.win})},_renderFacebook:function(a){var c=this._serviceContainer.cloneNode(!0),f=this.get("url");this.get("contentBox");
c.addClass("facebook");c.append(b.Node.create(b.substitute(d.FACEBOOK_TAG_TEMPLATE,{url:f})));a.append(c);b.Get.script(d.FACEBOOK_URL+"&appId="+Static.SQUARESPACE_CONTEXT.facebookAppId,{onSuccess:function(){window.FB&&b.later(400,this,function(){FB.XFMBL&&FB.XFBML.parse&&FB.XFBML.parse();this.fire("serviceRendered",e.FACEBOOK)})},onFailure:this._defaultFailureCb(e.FACEBOOK),onTimeout:this._defaultTimeoutCb(e.FACEBOOK),timeout:d.SCRIPT_TIMEOUT,context:this})},_renderGoogle:function(a){var c=this._serviceContainer.cloneNode(!0),
f=this.get("url");c.addClass("google");c.append(b.Node.create(b.substitute(d.GOOGLE_TAG_TEMPLATE,{url:f})));a.append(c);b.Get.script(d.GOOGLE_PLUS_URL,{onSuccess:function(){window.gapi&&(gapi.plusone.go(),b.later(400,this,function(){this.fire("serviceRendered",b.Squarespace.SocialServices.GOOGLE);this._googleRendered=!0}))},onFailure:this._defaultFailureCb(e.GOOGLE),onTimeout:this._defaultTimeoutCb(e.GOOGLE),timeout:d.SCRIPT_TIMEOUT,context:this});this.fire("serviceRendered",e.GOOGLE)},_renderTwitter:function(a){var c=
this._serviceContainer.cloneNode(!0),f=this.get("title"),g=this.get("url");c.append(b.Node.create('<a href="https://twitter.com/share" data-text="'+b.Escape.html(f||"")+'" data-url="'+b.Escape.html(g)+'"class="twitter-share-button">tweet</a>'));c.addClass("twitter");a.append(c);b.Get.script(d.TWITTER_URL,{onSuccess:function(){b.later(400,this,function(){this.fire("serviceRendered",e.TWITTER)})},onFailure:this._defaultFailureCb(e.TWITTER),onTimeout:this._defaultTimeoutCb(e.TWITTER),timeout:d.SCRIPT_TIMEOUT,
context:this})},_renderLinkedIn:function(a){var c=this._serviceContainer.cloneNode(!0);this.get("title");var f=this.get("url");c.addClass("linkedin");c.append(b.Node.create(b.substitute(d.LINKEDIN_URL_TEMPLATE,{url:f})));a.append(c);window.IN=void 0;b.Get.script(d.LINKEDIN_URL,{onSuccess:function(){b.later(400,this,function(){this.fire("serviceRendered",e.LINKEDIN)})},onFailure:this._defaultFailureCb(e.LINKEDIN),onTimeout:this._defaultTimeoutCb(e.LINKEDIN),timeout:d.SCRIPT_TIMEOUT,context:this})},
_renderStumble:function(a){var c=this._serviceContainer.cloneNode(!0),f=this.get("url"),g=this.get("id");c.addClass("stumble");c.append(b.Node.create(b.substitute(d.STUMBLE_TAG_TEMPLATE,{url:f,id:g})));a.append(c);b.Get.script(d.STUMBLE_URL,{onSuccess:function(){b.later(400,this,function(){STMBLPN&&(STMBLPN.wasProcessLoaded&&(STMBLPN.wasProcessLoaded=!1),STMBLPN.processWidgets());this.fire("serviceRendered",b.Squarespace.SocialServices.STUMBLE)})},onFailure:this._defaultFailureCb(e.STUMBLE),onTimeout:this._defaultTimeoutCb(e.STUMBLE),
timeout:d.SCRIPT_TIMEOUT,context:this})},_renderPinterest:function(a){var c=this._serviceContainer.cloneNode(!0),f=this.get("assetUrl"),g=this.get("url"),m=Static.SQUARESPACE_CONTEXT.website.authenticUrl+a.ancestor(".squarespace-social-buttons").getAttribute("data-full-url");this.get("id");this.get("recordType");this.get("systemDataId")?(c.addClass("pinterest"),c.append(b.Node.create(b.substitute(d.PINTEREST_TAG_TEMPLATE,{url:encodeURIComponent(f||g),pageUrl:encodeURIComponent(m)}))),a.append(c),
b.Get.script(d.PINTEREST_URL,{onSuccess:function(){b.later(400,this,function(){this.fire("serviceRendered",b.Squarespace.SocialServices.PINTEREST)},this)},onFailure:this._defaultFailureCb(e.PINTEREST),onTimeout:this._defaultTimeoutCb(e.PINTEREST),timeout:d.SCRIPT_TIMEOUT,context:this})):this.fire("serviceRendered",e.PINTEREST)}},{TWITTER_URL:"//platform.twitter.com/widgets.js",TUMBLR_URL:"http://platform.tumblr.com/v1/share.js",FACEBOOK_URL:"//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3",
LINKEDIN_URL:"//platform.linkedin.com/in.js",GOOGLE_PLUS_URL:"//apis.google.com/js/plusone.js",STUMBLE_URL:"http://platform.stumbleupon.com/1/widgets.js",PINTEREST_URL:"//assets.pinterest.com/js/pinit.js",LINKEDIN_URL_TEMPLATE:'<script type="IN/Share" data-url="{url}" data-counter="right">\x3c/script>',GOOGLE_TAG_TEMPLATE:'<g:plusone size="medium" annotation="bubble" href="{url}"></g:plusone>',FACEBOOK_TAG_TEMPLATE:'<div id="fb-root"></div><fb:like href="{url}" send="false" layout="button_count" show_faces="true"></fb:like>',
PINTEREST_TAG_TEMPLATE:'<a href="//pinterest.com/pin/create/button?url={pageUrl}&media={url}" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>',TUMBLR_TAG_TEMPLATE:'<a href="http://tumblr.com/share/link?{query}" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(\'http://platform.tumblr.com/v1/share_1T.png\') top left no-repeat transparent;">Share on Tumblr</a>',
SCRIPT_TIMEOUT:5E3,STUMBLE_TAG_TEMPLATE:'<su:badge layout="1" location="{url}"></su:badge>',REDDIT_LINK:'<a href="#"><img src="http://www.reddit.com/static/spreddit7.gif" alt="submit to reddit" border="0" /></a>',ATTRS:{url:{value:window.location.href},title:{value:document.title||window.location.href},services:{},recordType:{},assetUrl:{value:""},systemDataId:{value:""},loaded:{value:!1},loading:{value:!1}}})},"1.0",{requires:"anim base escape node querystring-stringify squarespace-enum substitute widget".split(" ")})},
1529:function(k,l,g){YUI.add("squarespace-social-buttons",function(b){b.namespace("Squarespace");var e=b.config.win.Static,g=b.Squarespace.SocialButton,d=b.Squarespace.SocialButtons=b.Base.create("socialButtons",b.Base,[],{initializer:function(a){a=this.get("services");this._buttonConfigs={};this._buttons=[];this._eventHandles=[];0<a.length?(this._scanForButtons(),this._initializeButtons(),this._bindEvents(),this._renderButtons()):this._markButtonsAsEmpty()},_markButtonsAsEmpty:function(){b.all(d.SOCIAL_BUTTON_CONTAINER).addClass("empty")},
_scanForButtons:function(){var a=b.all(d.SOCIAL_BUTTON_CONTAINER),c=this.get("services");a.each(function(a){var g=a.getAttribute(d.TITLE),m=e.SQUARESPACE_CONTEXT.website.baseUrl+a.getAttribute(d.FULL_URL),k=parseInt(a.getAttribute(d.RECORD_TYPE),10),h=a.getAttribute(d.ASSET_URL),l=a.getAttribute(d.SYSTEM_DATA_ID),n=b.guid(d.ID_PREFIX);this._buttonConfigs[n]={id:n,title:g,url:m,recordType:k,assetUrl:h,systemDataId:l,services:c,node:a}},this)},_initializeButtons:function(){this._buttons=b.Array.map(b.Object.values(this._buttonConfigs),
function(a){return new g(a)})},_bindEvents:function(){this._eventHandles.push(this.after("cleanup",this._defaultDestroy,this))},_renderButtons:function(){this._buttons.filter(this._excludeOnlyPinterest,this).forEach(function(a){var b=a.get("id");a.render(this._buttonConfigs[b].node)},this)},destructor:function(){this.fire("cleanup")},_unbindEvents:function(){this._eventHandles.forEach(function(a){a.detach()})},_defaultDestroy:function(){this._destroyButtons();this._unbindEvents();this.fire("destroyed")},
_destroyButtons:function(){this._buttons.forEach(function(a){a.destroy()},this)},_excludeOnlyPinterest:function(a){return a.get("recordType")!==b.Squarespace.RecordType.IMAGE&&this._onlyServiceIsPinterest(a)?!1:!0},_onlyServiceIsPinterest:function(a){a=a.get("services");return 1===a.length&&a[0]===b.Squarespace.SocialServices.PINTEREST}},{FULL_URL:"data-full-url",ASSET_URL:"data-asset-url",SYSTEM_DATA_ID:"data-system-data-id",RECORD_TYPE:"data-record-type",ID_PREFIX:"social-",TITLE:"data-title",SOCIAL_BUTTON_CONTAINER:".squarespace-social-buttons",
ATTRS:{services:{valueFn:function(){return b.Array.map(b.Object.keys(e.SQUARESPACE_CONTEXT.website.shareButtonOptions||{}),function(a){return parseInt(a,10)})}}}});b.config.win.Squarespace.onInitialize(b,function(){b.all(".squarespace-social-buttons").isEmpty()||new b.Squarespace.SocialButtons})},"1.0",{requires:["squarespace-social-button","base","base-build","node","array-extras"]})}});
