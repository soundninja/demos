/*
 Kiosked Ltd. 2014 - All rights reserved.
 @license Commercial
 @namespace ITGS
 @name ITGS
 @public
 @type {{}}
 LGPL v3
*/
(function(){(function(){var n=window.ITGS=window.ITGS||{};n.Bootstrap=n.Bootstrap||{}})();var I=null;(function(){ITGS.UnloadManager=ITGS.UnloadManager||function(){var n=this;this._regularDestructors=[];this._priorityShutdownHandlers=[];this._beforeUnloadHandler=function(){n.shutdown(ITGS.UnloadManager.PRIORITY_HIGH)};window.addEventListener("beforeunload",this._beforeUnloadHandler,!1)};ITGS.UnloadManager.prototype.destroy=function(){window.removeEventListener("beforeunload",this._beforeUnloadHandler,
!1)};ITGS.UnloadManager.prototype.registerShutdownHandler=function(n,h){h&&h!==ITGS.UnloadManager.PRIORITY_LOW?this._priorityShutdownHandlers.push(n):this._regularDestructors.push(n)};ITGS.UnloadManager.prototype.shutdown=function(n){n=n===ITGS.UnloadManager.PRIORITY_HIGH?this._priorityShutdownHandlers:this._priorityShutdownHandlers.concat(this._regularDestructors);for(var h=n.length,a=0;a<h;a+=1)try{n[a]()}catch(m){console.warn("(Kiosked) Failed executing destructor: ",n[a])}this._regularDestructors=
[];this._priorityShutdownHandlers=[]};ITGS.UnloadManager.PRIORITY_HIGH=100;ITGS.UnloadManager.PRIORITY_LOW=110})();ITGS.unloadManager=ITGS.unloadManager||new ITGS.UnloadManager;var F=ITGS.tools=ITGS.tools||{};ITGS.tools.debug=ITGS.tools.debug||function(){function n(a,m){if((!F.environment||"production"!==F.environment.getContext())&&window.console&&window.console[a]){try{console[a].apply(console,m)}catch(g){console[a](m.join(" "))}return!0}return!1}function h(a,m){return F.formatting&&F.formatting.zeroPad?
F.formatting.zeroPad(a,m):a}return{error:function(){var a=F.debug.getLogPrefix();if(0<arguments.length){var m=Array.prototype.slice.call(arguments,0);m.unshift(a);return n.call(this,"error",m)}return!1},getLogPrefix:function(){var a=new Date;return"[Kiosked] ("+a.getFullYear()+"-"+h(a.getMonth()+1,2)+"-"+h(a.getDate(),2)+" "+h(a.getHours(),2)+":"+h(a.getMinutes(),2)+":"+h(a.getSeconds(),2)+")"},log:function(){var a=F.debug.getLogPrefix();if(0<arguments.length){var m=Array.prototype.slice.call(arguments,
0);m.unshift(a);return n.call(this,"log",m)}return!1},warn:function(){var a=F.debug.getLogPrefix();if(0<arguments.length){var m=Array.prototype.slice.call(arguments,0);m.unshift(a);return n.call(this,"warn",m)}return!1}}}();ITGS.tools.encoding=ITGS.tools.encoding||function(){return{base64_decode:function(n){var h="",a,m,g,x,e,c=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<n.length;)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n.charAt(c)),c+=1,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n.charAt(c)),
c+=1,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n.charAt(c)),c+=1,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n.charAt(c)),c+=1,a=a<<2|m>>4,m=(m&15)<<4|x>>2,g=(x&3)<<6|e,h+=String.fromCharCode(a),64!==x&&(h+=String.fromCharCode(m)),64!==e&&(h+=String.fromCharCode(g));return h=ITGS.tools.encoding.utf8_decode(h)},base64_encode:function(n){var h="",a,m,g,x,e,c,d=0;for(n=ITGS.tools.encoding.utf8_encode(n);d<n.length;)a=n.charCodeAt(d),
d+=1,m=n.charCodeAt(d),d+=1,g=n.charCodeAt(d),d+=1,x=a>>2,a=(a&3)<<4|m>>4,e=(m&15)<<2|g>>6,c=g&63,isNaN(m)?e=c=64:isNaN(g)&&(c=64),h=h+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(x)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c);return h},formURLStringFromParameters:function(n,h){h=
h||[];if("object"===typeof n){var a="",m=function(d,b,f){0<f.length&&(f+="&");b=n[d];0<=h.indexOf("ENCODE_KEY")&&(d=encodeURIComponent(d));0<=h.indexOf("ENCODE_VALUE")&&(b=encodeURIComponent(b));return f+(d+"="+b)};if(0<=h.indexOf("ALPHABETIZE")){var g=[],x;for(x in n)n.hasOwnProperty(x)&&g.push(x);g.sort();x=g.length;if(0<x)for(var e=0;e<x;e+=1)var c=g[e],a=m(c,n[c],a)}else for(g in n)n.hasOwnProperty(g)&&(a=m(g,n[g],a));return a}return""},utf8_decode:function(n){for(var h="",a=0,m=0,g=0,x=0;a<n.length;)m=
n.charCodeAt(a),128>m?(h+=String.fromCharCode(m),a+=1):191<m&&224>m?(g=n.charCodeAt(a+1),h+=String.fromCharCode((m&31)<<6|g&63),a+=2):(g=n.charCodeAt(a+1),x=n.charCodeAt(a+2),h+=String.fromCharCode((m&15)<<12|(g&63)<<6|x&63),a+=3);return h},utf8_encode:function(n){n=n.replace(/\r\n/g,"\n");for(var h="",a=0;a<n.length;a+=1){var m=n.charCodeAt(a);128>m?h+=String.fromCharCode(m):(127<m&&2048>m?h+=String.fromCharCode(m>>6|192):(h+=String.fromCharCode(m>>12|224),h+=String.fromCharCode(m>>6&63|128)),h+=
String.fromCharCode(m&63|128))}return h}}}();(function(n){function h(d,b){return Object.prototype.hasOwnProperty.call(d,b)?d[b]:n}function a(d){x=!0;d=new d;x=!1;return d}var m=this,g=m.KskdClass,x=!1,e=0<function(){$super()}.toString().indexOf("$super"),c=function(){};c.$noConflict=function(){try{g===n?delete m.KskdClass:m.KskdClass=g}catch(d){m.KskdClass=g}return c};c.$classyVersion="1.4";c.extend=function(d){var b=this.prototype,f=a(this);if(d.__include__)for(var p=0,q=d.__include__.length;p!==
q;p+=1){var k=d.__include__[p],l;for(l in k)h(k,l)!==n&&(f[l]=k[l])}d.__classvars__=d.__classvars__||{};if(f.__classvars__)for(var g in f.__classvars__)d.__classvars__[g]||(p=h(f.__classvars__,g),d.__classvars__[g]=p);for(var t in d)g=h(d,t),"__include__"!==t&&g!==n&&(f[t]="function"!==typeof g||e&&!/\B\$super\b/.test(g.toString())?g:function(f,d){return function(){var a=h(this,"$super");this.$super=b[d];try{return f.apply(this,arguments)}finally{a===n?delete this.$super:this.$super=a}}}(g,t));var u=
function(){if(x)return null;var b=m===this?a(arguments.callee):this;b.construct&&b.construct.apply(b,arguments);b.$class=u;return b},r;for(r in d.__classvars__)t=h(d.__classvars__,r),t!==n&&(u[r]=t);u.prototype=f;u.constructor=u;u.extend=c.extend;u.$withData=c.$withData;return u};c.$withData=function(d){var b=a(this),f;for(f in d){var c=h(d,f);c!==n&&(b[f]=c)}return b};m.KskdClass=c})();ITGS.Bootstrap.LoaderObject=ITGS.Bootstrap.LoaderObject||KskdClass.extend(function(){return{construct:function(){},
destroy:function(){}}}());(function(){ITGS.Bootstrap.tools=ITGS.Bootstrap.tools||{enforceCaller:function(n,h,a){a=a&&0<a.length?a:"Invalid caller - unexpected context";if(!(n instanceof h))throw Error("(Kiosked-Loader) "+a);},isArray:function(n){return"[object Array]"===Object.prototype.toString.call(n)},isWithinEnum:function(n,h){for(var a in h)if(h.hasOwnProperty(a)&&n===h[a])return!0;return!1}}})();ITGS.Bootstrap.tools.encoding=ITGS.Bootstrap.tools.encoding||function(){var n=/\?[-_a-zA-Z0-9=&.+|~"{}^\[\]%;]+/;
return{getOldFormatURLDetails:function(h){var a=!1,m=!1,g="development";h=h.toLowerCase();for(var n=h.split("/"),e=0,c=n.length;e<c;e+=1)"albumid"===n[e]?a=parseInt(n[e+1],10):"co"===n[e]&&(m=parseInt(n[e+1],10));0<=h.indexOf("kiosked.com")?g="production":0<=h.indexOf("intags.com")&&(g="staging");return{pubID:m,siteID:a,env:g}},getQueryParameters:function(h){h=ITGS.Bootstrap.tools.encoding.getQueryString(h);h=h.replace("&amp;","__AMPERSAND_PLACEHOLDER__");h=h.split("&");var a={};if(0<h.length)for(var m=
0;m<h.length;m+=1){var g=h[m].replace("__AMPERSAND_PLACEHOLDER__","&amp;").split("=");2===g.length&&(a[g[0]]=g[1])}return a},getQueryString:function(h){return ITGS.Bootstrap.tools.encoding.matchRegularExpression(h,n).substring(1)},matchRegularExpression:function(h,a){var m=h.match(a);return m?ITGS.Bootstrap.tools.isArray(m)?m[0]:m:""}}}();ITGS.Bootstrap.tools.dom=ITGS.Bootstrap.tools.dom||function(){return{getAllElementsOfType:function(n){return Array.prototype.slice.call(document.getElementsByTagName(n))},
getElementsWithAttributes:function(n,h){return ITGS.Bootstrap.tools.dom.getAllElementsOfType(n).filter(function(a){for(var m in h)if(h.hasOwnProperty(m)){var g=0>=h[m].length;if(g&&!a.hasAttribute(m)||!g&&a.getAttribute(m)!==h[m])return!1}return!0})},getPageUrl:function(){return document.URL+""},getTimestampInSeconds:function(n){n=n||Date.now();return Math.floor(n/1E3)}}}();ITGS.Bootstrap.StorageState=ITGS.Bootstrap.StorageState||{STATE_READY:100,STATE_LOADING:110,STATE_DESTROY:120};ITGS.Bootstrap.StorageType=
ITGS.Bootstrap.StorageType||{TYPE_LOCAL_SITE:200,TYPE_SINGLE_SESSION:210};ITGS.Bootstrap.StorageAdapterAbstract=ITGS.Bootstrap.StorageAdapterAbstract||ITGS.Bootstrap.LoaderObject.extend(function(){return{construct:function(){this.$super();this._state=ITGS.Bootstrap.StorageState.STATE_LOADING;var n;try{n="localStorage"in window&&null!==window.localStorage}catch(h){n=!1}this._hasLocalStorage=n},clearStorage:function(){},getItem:function(n,h){setTimeout(function(){h(n,!1)},1)},getState:function(){return this._state},
isReady:function(){return this.getState()===ITGS.Bootstrap.StorageState.STATE_READY},onReady:function(n){},setItem:function(n,h){},setState:function(n){if(!ITGS.Bootstrap.tools.isWithinEnum(n,ITGS.Bootstrap.StorageState))throw Error("Invalid storage state: "+n);this._state=n},supportsLocalStorage:function(){return!0===this._hasLocalStorage}}}());ITGS.Bootstrap.StorageAdapterLocalSite=ITGS.Bootstrap.StorageAdapterLocalSite||ITGS.Bootstrap.StorageAdapterAbstract.extend(function(){function n(h){ITGS.Bootstrap.tools.enforceCaller(this,
ITGS.Bootstrap.StorageAdapterLocalSite,"Expected caller to be instance of StorageAdapterLocalSite");var a=h.key||"",m=h.value||"";switch(h.command||""){case "clear":window.localStorage.clear();break;case "set":window.localStorage.setItem(a,m);break;case "get":return(h=window.localStorage.getItem(a))?h:!1}return!1}return{construct:function(){this.$super();this.setState(ITGS.Bootstrap.StorageState.STATE_READY)},destroy:function(){this.$super()},clearStorage:function(){var h=this;this.onReady(function(){n.call(h,
{command:"clear"})})},getItem:function(h,a){var m=this;setTimeout(function(){m.onReady(function(){a(h,n.call(m,{command:"get",key:h}))})},1)},onReady:function(h){if(this.isReady())h();else var a=this,m=setInterval(function(){a.isReady()&&(clearInterval(m),h())},80)},setItem:function(h,a){var m=this;this.onReady(function(){n.call(m,{command:"set",key:h,value:a})})}}}());ITGS.Bootstrap.StorageAdapterSingleSession=ITGS.Bootstrap.StorageAdapterSingleSession||ITGS.Bootstrap.StorageAdapterAbstract.extend(function(){function n(){ITGS.Bootstrap.tools.enforceCaller(this,
ITGS.Bootstrap.StorageAdapterSingleSession,"Expected caller to be instance of StorageAdapterSingleSession");var a=this;this._windowPostMessageEventCallback=function(m){var g=m.data;g&&0===g.indexOf("kiosked_localstorage_response:")&&a.storageMessageReceived(m)};window.attachEvent?window.attachEvent("onmessage",this._windowPostMessageEventCallback):window.addEventListener("message",this._windowPostMessageEventCallback,!1)}function h(){ITGS.Bootstrap.tools.enforceCaller(this,ITGS.Bootstrap.StorageAdapterSingleSession,
"Expected caller to be instance of StorageAdapterSingleSession");var a=this,m=function(){var g=a._iframeReadyCallbacks.length;if(0<g)for(var m=0;m<g;m+=1)a._iframeReadyCallbacks[m]()};I?this._iframeCheckInterval||(this._iframeCheckInterval=setInterval(function(){"ready"===I.getAttribute("kiosked_session_frame")&&(clearInterval(a._iframeCheckInterval),a.setState(ITGS.Bootstrap.StorageState.STATE_READY),m())},80)):(I=document.createElement("iframe"),function(g){g.style.visibility="hidden";g.style.display=
"none";g.onload=function(){a.setState(ITGS.Bootstrap.StorageState.STATE_READY);m();a._iframeReadyCallbacks=[];this.setAttribute("kiosked_session_frame","ready")};g.src="http://resources.kiosked.com/scripts/client-session.html";document.body.appendChild(g)}(I))}return{construct:function(){this.$super();this._iframeReadyCallbacks=[];this._windowPostMessageEventCallback=null;this._getRequestCallbacks={};this._iframeCheckInterval=null;n.call(this);h.call(this)},destroy:function(a){this.setState(ITGS.Bootstrap.StorageState.STATE_DESTROY);
this._windowPostMessageEventCallback&&(window.removeEventListener("message",this._windowPostMessageEventCallback),this._windowPostMessageEventCallback=null);this._iframeReadyCallbacks=[];this._getRequestCallbacks={};this._iframeCheckInterval&&clearInterval(this._iframeCheckInterval);a&&I&&(I.parentNode.removeChild(I),I=null);this.$super()},clearStorage:function(){var a=this;this.onReady(function(){a.sendStorageRequest("clear")})},getItem:function(a,m){this._getRequestCallbacks.hasOwnProperty(a)||
(this._getRequestCallbacks[a]=[]);this._getRequestCallbacks[a].push(m);var g=this;this.onReady(function(){g.sendStorageRequest("get",a)})},onReady:function(a){this.isReady()?a():(this._iframeReadyCallbacks.push(a),h.call(this))},sendStorageRequest:function(a,m,g){this.isReady()?(g=g||"",m=m||"",a=a.replace("|",""),m=m.replace("|",""),g=g.replace("|",""),I.contentWindow.postMessage("kiosked_localstorage_request:"+a+"|"+m+"|"+g,"*")):F.debug.error("/StorageAdapterSingleSession/","IFrame not ready for postMessage requests")},
setItem:function(a,m){var g=this;this.onReady(function(){g.sendStorageRequest("set",a,m)})},storageMessageReceived:function(a){var m=a.data;a=!1;try{m=m.replace("kiosked_localstorage_response:",""),a=JSON.parse(m)}catch(g){F.debug.error("/StorageAdapterSingleSession/","Failed parsing JSON",m,g)}if(a)if(F.debug.log("/StorageAdapterSingleSession/","Storage response:",a),a.request&&"get"===a.request){if(m=this._getRequestCallbacks[a.key],delete this._getRequestCallbacks[a.key],m){var h=m.length;if(0<
h)for(var e=0;e<h;e+=1)m[e](a.key,a.value)}}else F.debug.error("/StorageAdapterSingleSession/","Unrecognised response type:",a.request,a)}}}());ITGS.Bootstrap.StorageManager=ITGS.Bootstrap.StorageManager||ITGS.Bootstrap.LoaderObject.extend(function(){return{construct:function(n){this.$super();if(!ITGS.Bootstrap.tools.isWithinEnum(n,ITGS.Bootstrap.StorageType))throw Error("Invalid storage type: "+n);n=n===ITGS.Bootstrap.StorageType.TYPE_SINGLE_SESSION?new ITGS.Bootstrap.StorageAdapterSingleSession:
new ITGS.Bootstrap.StorageAdapterLocalSite;this._adapter=n},destroy:function(){this._adapter.destroy();this._adapter=null;this.$super()},clearStorage:function(){this.getAdapter().clearStorage()},getAdapter:function(){return this._adapter},getItem:function(n,h){this.getAdapter().getItem(n,function(a,m){h(a,m)})},isReady:function(){return this.getAdapter().isReady()},onReady:function(n){this.getAdapter().onReady(n)},setItem:function(n,h){this.getAdapter().setItem(n,h)}}}());ITGS.storage=ITGS.storage||
{};ITGS.storage.localSite=new ITGS.Bootstrap.StorageManager(ITGS.Bootstrap.StorageType.TYPE_LOCAL_SITE);ITGS.Bootstrap.EndpointLoadHandler=ITGS.Bootstrap.EndpointLoadHandler||ITGS.Bootstrap.LoaderObject.extend(function(){return{construct:function(){this.$super();this._loadingCachedScript={};this._loadedCachedScript={}},getBakeKey:function(){return"bake_version"},getCachedBakeVersion:function(n){ITGS.storage.localSite.getItem(this.getBakeKey(),function(h,a){n(a)})},setCachedBakeVersion:function(n){ITGS.storage.localSite.setItem(this.getBakeKey(),
""+n)}}}());ITGS.Bootstrap.loadHandler=new ITGS.Bootstrap.EndpointLoadHandler;ITGS.Bootstrap.Script=ITGS.Bootstrap.Script||ITGS.Bootstrap.LoaderObject.extend(function(){return{construct:function(n,h){this.$super();h=h||{};this._element=n;this._fromCache=h.hasOwnProperty("fromCache")?h.fromCache:!1},destroy:function(){this.$super()},getElement:function(){return this._element},getSource:function(){return this._element.getAttribute("src")},getQueryParameters:function(){var n=this.getSource();return ITGS.Bootstrap.tools.encoding.getQueryParameters(n)},
isFromCache:function(){return this._fromCache}}}());(function(){ITGS.Bootstrap._bakedLibrary=function(){(function(){(function(a){function c(b,f){return Object.prototype.hasOwnProperty.call(b,f)?b[f]:a}function d(b){p=!0;b=new b;p=!1;return b}var b=this,f=b.KskdClass,p=!1,q=0<function(){$super()}.toString().indexOf("$super"),k=function(){};k.$noConflict=function(){try{f===a?delete b.KskdClass:b.KskdClass=f}catch(d){b.KskdClass=f}return k};k.$classyVersion="1.4";k.extend=function(f){var g=this.prototype,
t=d(this);if(f.__include__)for(var u=0,r=f.__include__.length;u!==r;u+=1){var v=f.__include__[u],y;for(y in v)c(v,y)!==a&&(t[y]=v[y])}f.__classvars__=f.__classvars__||{};if(t.__classvars__)for(var w in t.__classvars__)f.__classvars__[w]||(u=c(t.__classvars__,w),f.__classvars__[w]=u);for(var m in f)w=c(f,m),"__include__"!==m&&w!==a&&(t[m]="function"!==typeof w||q&&!/\B\$super\b/.test(w.toString())?w:function(b,f){return function(){var d=c(this,"$super");this.$super=g[f];try{return b.apply(this,arguments)}finally{d===
a?delete this.$super:this.$super=d}}}(w,m));var h=function(){if(p)return null;var f=b===this?d(arguments.callee):this;f.construct&&f.construct.apply(f,arguments);f.$class=h;return f},n;for(n in f.__classvars__)m=c(f.__classvars__,n),m!==a&&(h[n]=m);h.prototype=t;h.constructor=h;h.extend=k.extend;h.$withData=k.$withData;return h};k.$withData=function(b){var f=d(this),p;for(p in b){var q=c(b,p);q!==a&&(f[p]=q)}return f};b.KskdClass=k})();var a=window.ITGS=window.ITGS||{};a.Includes=a.Includes||{};a.Plugins=
a.Plugins||{};a.Facades=a.Facades||{};a.Analyzers=a.Analyzers||{};a.AdProviders=a.AdProviders||{};a.MessageHandlers=a.MessageHandlers||{};a.MessageSources=a.MessageSources||{};a.Sniffing=a.Sniffing||{};a.External=a.External||{};a.overrideFunctions=a.overrideFunctions||{};a.destructors={};a.eventCallbacks=a.eventCallbacks||[];(function(){a.UnloadManager=a.UnloadManager||function(){var e=this;this._regularDestructors=[];this._priorityShutdownHandlers=[];this._beforeUnloadHandler=function(){e.shutdown(a.UnloadManager.PRIORITY_HIGH)};
window.addEventListener("beforeunload",this._beforeUnloadHandler,!1)};a.UnloadManager.prototype.destroy=function(){window.removeEventListener("beforeunload",this._beforeUnloadHandler,!1)};a.UnloadManager.prototype.registerShutdownHandler=function(e,c){c&&c!==a.UnloadManager.PRIORITY_LOW?this._priorityShutdownHandlers.push(e):this._regularDestructors.push(e)};a.UnloadManager.prototype.shutdown=function(e){e=e===a.UnloadManager.PRIORITY_HIGH?this._priorityShutdownHandlers:this._priorityShutdownHandlers.concat(this._regularDestructors);
for(var c=e.length,d=0;d<c;d+=1)try{e[d]()}catch(b){console.warn("(Kiosked) Failed executing destructor: ",e[d])}this._regularDestructors=[];this._priorityShutdownHandlers=[]};a.UnloadManager.PRIORITY_HIGH=100;a.UnloadManager.PRIORITY_LOW=110})();var m=function(){return{domainName:null,designs:{},kskdCls:"body {ID}.kskdCls, body {ID}.kskdCls .kskdDiv, body {ID}.kskdCls .kskdDiv img, body {ID}.kskdCls .kskdDiv div, body {ID}.kskdCls .kskdDiv span, .kskdDiv.kskdFixedBannerContainer,body {ID}.kskdCls:hover, body {ID}.kskdCls *:hover,.kskdDiv.kskdFixedBannerContainer .kskdDiv:hover,body {ID}.kskdCls.kskdDiv .kskdDiv {display: block;float: none;opacity: 1;position: static;overflow: visible;width:auto;left:auto;right:auto;letter-spacing: normal;white-space: normal;top:auto;bottom:auto;height:auto;min-height:0;max-height:none;min-width:0;max-width:none;clear: none;margin: 0px;padding: 0px;border: 0px;font-size: 12px;line-height: 1.2;text-align: left;text-transform: none;color: #6d6c71;font-family: Arial, Helvetica, sans-serif;font-style: normal;vertical-align: baseline;background: transparent;box-sizing: content-box;-moz-box-sizing: content-box;-webkit-box-sizing: content-box;filter: none;} body {ID}.kskdCls.kskdDiv .kskdDiv a *:not(.kskdDiv) {display: none !important;} @media print {   .kskdCls, .kskdCls * {       display: none !important;   }}",
MediaContainer:{position:"absolute",top:"0px",left:"0px",right:"0px",bottom:"0px",display:"inline-block",pointerEvents:"none",overflow:"hidden",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none","-ms-user-select":"none",userSelect:"none"},ImageContainer:{position:"absolute",pointerEvents:"none",overflow:"hidden"},PluginContainer:{position:"absolute",pointerEvents:"all",zIndex:2,WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",
"-ms-user-select":"none",userSelect:"none"},OverlayContainer:{position:"absolute",pointerEvents:"all",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none","-ms-user-select":"none",userSelect:"none"},OverlayTag:{width:"20px",height:"20px"},LB:{bottom:"0px",left:"0px"},LT:{top:"0px",left:"0px"},RT:{top:"0px",right:"0px"},RB:{bottom:"0px",right:"0px"},addCssStyle:function(a,c){for(var d=!1,b=document.head||document.getElementsByTagName("head")[0],f=b.getElementsByTagName("style"),
p=f.length,q=0;q<p;q+=1)f[q].getAttribute("kiosked")===c&&(d=!0);d||(d=document.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("kiosked",c),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(document.createTextNode(a)),b.appendChild(d))},addCssStyleClass:function(a,c,d){this.hasOwnProperty(a)&&(a=this[a].replace(/{ID}/g,"#kskd"+d),this.addCssStyle(a,c,d))},getDesign:function(a){return this.designs[a]},style:function(a,c){for(var d in c)if(c.hasOwnProperty(d)){var b="[object Array]"===
Object.prototype.toString.call(c[d])?c[d]:[c[d]],f;for(f in b)if(a&&"style"in a&&d in a.style)try{a.style[d]=b[f]}catch(p){a.setAttribute("style",b[f])}}},setStyle:function(a,c,d){d?this.style(a,this.designs[d].getDesignStyle(c)):this.style(a,this[c])},getStyle:function(a,c){var d,b=null;d=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,""):a.currentStyle?a.currentStyle:a.style;if(d[c]&&"none"!==d[c])b=d[c];else{var f=c.slice(0,1).toUpperCase()+
c.slice(1);d["Webkit"+f]?b=d["Webkit"+f]:d["Ms"+f]?b=d["Ms"+f]:d["Moz"+f]?b=d["Moz"+f]:d["O"+f]&&(b=d["O"+f])}return b},getDesignStyle:function(a,c){return this.designs[a].getDesignStyle(c)},imageMetaForImage:function(e){e=e.split("/");var c=e[0]+"Metafile",d=e[0]+"2xMetafile",b=e[1],f=e[1].replace(".png","@2x.png");if(1.5<g.getDevicePixelRatio()&&g.isset(a[d])&&g.isset(a[d].images[f]))return{spriteImageUrl:e[0]+"@2x",meta:a[d].images[f]};if(g.isset(a[c])&&g.isset(a[c].images[b]))return{spriteImageUrl:e[0],
meta:a[c].images[b]}},xPos:function(a){return-this.imageMetaForImage(a).meta.positionX},yPos:function(a){return-this.imageMetaForImage(a).meta.positionY},width:function(a){return this.imageMetaForImage(a).meta.width},height:function(a){return this.imageMetaForImage(a).meta.height},parseSpriteOffsetsFromStyleSet:function(a){a=a.backgroundPosition.split(" ");return 0===a.length?null:{x:parseInt(a[0],10),y:parseInt(1<a.length?a[1]:a[0],10)}},parseSpriteOffsetsFromStylesClass:function(a){return this[a]?
this.parseSpriteOffsetsFromStyleSet(this[a]):null},parseSpriteOffsetsFromDesignClass:function(a,c){var d=this.getDesignStyle(a,c);return void 0===d||0===d.length?null:this.parseSpriteOffsetsFromStyleSet(d)}}}();a.componentsMetafile={name:"components",checksum:"5ca2e046857c459de05b9ca02b17a08b",shortsum:"5ca2e",images:{"Get_the_look.png":{name:"Get_the_look",filename:"Get_the_look.png",checksum:"64d1f425d47e40d922486b6dd519eb8a",width:114,height:24,positionX:0,positionY:0},"PopUp_Close_Button.png":{name:"PopUp_Close_Button",
filename:"PopUp_Close_Button.png",checksum:"e4aa3fa1e2d97dddb27c3937f3af77cf",width:25,height:25,positionX:120,positionY:0},"cloud_footer_left.png":{name:"cloud_footer_left",filename:"cloud_footer_left.png",checksum:"85f1ddab9b9dac2c9d1e6133f9ef09dc",width:26,height:26,positionX:151,positionY:0},"cloud_footer_right.png":{name:"cloud_footer_right",filename:"cloud_footer_right.png",checksum:"6f3849d0ad10b279b857eb0fda998552",width:990,height:26,positionX:183,positionY:0},"cloud_header_left.png":{name:"cloud_header_left",
filename:"cloud_header_left.png",checksum:"9c387b57f8cee5e19c2e6a951e482d94",width:26,height:26,positionX:1179,positionY:0},"cloud_header_right.png":{name:"cloud_header_right",filename:"cloud_header_right.png",checksum:"a866fe8929a9d9383103cab686b6c871",width:990,height:26,positionX:1211,positionY:0},"corner_tooltip_private.png":{name:"corner_tooltip_private",filename:"corner_tooltip_private.png",checksum:"386effda6c71e4514af63fcf7441f3a3",width:48,height:16,positionX:2207,positionY:0},"corner_tooltip_shareandearn.png":{name:"corner_tooltip_shareandearn",
filename:"corner_tooltip_shareandearn.png",checksum:"d43cacac36964eccc5cac61a58ce2daa",width:81,height:16,positionX:2261,positionY:0},"cube_close.png":{name:"cube_close",filename:"cube_close.png",checksum:"3be20bf52ace252574c368ec4a6ab303",width:16,height:17,positionX:2348,positionY:0},"cube_info.png":{name:"cube_info",filename:"cube_info.png",checksum:"3d2b3573041a90f17f2a3e78d05949f5",width:21,height:21,positionX:2370,positionY:0},"cube_logo.png":{name:"cube_logo",filename:"cube_logo.png",checksum:"f6c5277efb4d9f853892e3bffb3963e6",
width:69,height:16,positionX:2397,positionY:0},"fb_icon.png":{name:"fb_icon",filename:"fb_icon.png",checksum:"e63d46e151e9c9d34ef28aa93b0c3844",width:25,height:25,positionX:2472,positionY:0},"fb_icon_down.png":{name:"fb_icon_down",filename:"fb_icon_down.png",checksum:"2f152cbf82ba1be69e1f71f32d110d78",width:25,height:25,positionX:2503,positionY:0},"fb_icon_hover.png":{name:"fb_icon_hover",filename:"fb_icon_hover.png",checksum:"c6af332616ad5346e435ca82c067a3f7",width:25,height:25,positionX:2534,positionY:0},
"flash_cloud_background.png":{name:"flash_cloud_background",filename:"flash_cloud_background.png",checksum:"7cc30a23a0c1eea830c1402d427d4a9d",width:318,height:160,positionX:2565,positionY:0},"gplus_icon.png":{name:"gplus_icon",filename:"gplus_icon.png",checksum:"f3dd65c07bb8ce6e780548a366975df9",width:25,height:25,positionX:2889,positionY:0},"gplus_icon_down.png":{name:"gplus_icon_down",filename:"gplus_icon_down.png",checksum:"0c16107ba8add56f759c7b9897dbb3a0",width:25,height:25,positionX:2920,positionY:0},
"gplus_icon_hover.png":{name:"gplus_icon_hover",filename:"gplus_icon_hover.png",checksum:"18433fd9473e18f21810b790a4eba576",width:25,height:25,positionX:2951,positionY:0},"header_footer_v2.png":{name:"header_footer_v2",filename:"header_footer_v2.png",checksum:"90557431c98608a5ffd780c4f847a30c",width:990,height:52,positionX:2982,positionY:0},"icon_close_hover.png":{name:"icon_close_hover",filename:"icon_close_hover.png",checksum:"ad473b423d850f801067c3d0208b8747",width:18,height:18,positionX:3978,
positionY:0},"icon_close_normal.png":{name:"icon_close_normal",filename:"icon_close_normal.png",checksum:"132d9aaf59391cb4b6bb29d4abae52f2",width:18,height:18,positionX:4002,positionY:0},"kiosk_bg_v2.png":{name:"kiosk_bg_v2",filename:"kiosk_bg_v2.png",checksum:"09dc17cb7bc4917a647515b322acfb53",width:326,height:220,positionX:4026,positionY:0},"popup_corners_bottom_left.png":{name:"popup_corners_bottom_left",filename:"popup_corners_bottom_left.png",checksum:"7d8481b24dc605213c737af7d5bcc24e",width:7,
height:7,positionX:4358,positionY:0},"popup_corners_bottom_right.png":{name:"popup_corners_bottom_right",filename:"popup_corners_bottom_right.png",checksum:"c7dec840c0d278897627144689e31d30",width:7,height:7,positionX:4371,positionY:0},"popup_corners_top_left.png":{name:"popup_corners_top_left",filename:"popup_corners_top_left.png",checksum:"3cbaf8ceeece0ed27a94bacd28f74d9d",width:7,height:7,positionX:4384,positionY:0},"popup_footer.png":{name:"popup_footer",filename:"popup_footer.png",checksum:"6b66837eb6819158276d9ac5028814dc",
width:579,height:34,positionX:4397,positionY:0},"twitter_icon.png":{name:"twitter_icon",filename:"twitter_icon.png",checksum:"58dea7dd5fdc866dbe706744a1350ad6",width:25,height:25,positionX:4982,positionY:0},"twitter_icon_down.png":{name:"twitter_icon_down",filename:"twitter_icon_down.png",checksum:"6bcd5d4104333458ce1d398c65fea9f6",width:25,height:25,positionX:5013,positionY:0},"twitter_icon_hover.png":{name:"twitter_icon_hover",filename:"twitter_icon_hover.png",checksum:"1f774d0935f9bc6d08ab6fb2abab4324",
width:25,height:25,positionX:5044,positionY:0},"unplaced_arrow.png":{name:"unplaced_arrow",filename:"unplaced_arrow.png",checksum:"d9d0ea4aa0e0386fba2d1c3d5820ae88",width:18,height:34,positionX:5075,positionY:0},"unplaced_arrow_open.png":{name:"unplaced_arrow_open",filename:"unplaced_arrow_open.png",checksum:"c359785aa386cda64a052c1a289a4a4b",width:18,height:34,positionX:5099,positionY:0},"unplaced_bottom_arrow.png":{name:"unplaced_bottom_arrow",filename:"unplaced_bottom_arrow.png",checksum:"856ebd5cb239ed922d84cdd7f2cf04b2",
width:20,height:10,positionX:5123,positionY:0},"unplaced_bottom_bg.png":{name:"unplaced_bottom_bg",filename:"unplaced_bottom_bg.png",checksum:"386633977570ec50691fb05222aa780a",width:43,height:20,positionX:5149,positionY:0},"unplaced_middle_bg.png":{name:"unplaced_middle_bg",filename:"unplaced_middle_bg.png",checksum:"3333f1f730429a311429e7afa4050016",width:43,height:198,positionX:5198,positionY:0},"unplaced_top_arrow.png":{name:"unplaced_top_arrow",filename:"unplaced_top_arrow.png",checksum:"b99a1eb8cfce1613429f97f46e6104ac",
width:20,height:8,positionX:5247,positionY:0},"unplaced_top_bg.png":{name:"unplaced_top_bg",filename:"unplaced_top_bg.png",checksum:"1b935bd0c1ae2148e4cae9530d1f0ac9",width:43,height:20,positionX:5273,positionY:0},"window-left4.png":{name:"window-left4",filename:"window-left4.png",checksum:"8d693c993ed607081a43b3a3f4fd6362",width:9,height:1E3,positionX:5322,positionY:0},"window-right4.png":{name:"window-right4",filename:"window-right4.png",checksum:"ed93c04637ba3c10ff937ce7e635c95e",width:9,height:1E3,
positionX:5337,positionY:0}}};a.tools=function(){function e(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){4===b.readyState&&(200===b.status?a.load&&a.load(JSON.parse(b.responseText)):a.error&&a.error())};b.open("POST",a.url,!0);b.withCredentials=!0;b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send(a.content?"json="+encodeURIComponent(JSON.stringify(a.content)):null)}function c(a){var b=new XDomainRequest;b.open("POST",a.url,!0);b.onload=function(){a.load&&
a.load(JSON.parse(b.responseText))};b.onerror=function(){a.error&&a.error()};b.onprogress=function(){};b.ontimeout=function(){};b.send(a.content?"json="+encodeURIComponent(JSON.stringify(a.content)):"")}return{forceJSONP:!1,animations:[],easingFunctions:{backInCubic:function(a,b,f,c){c=(a/=c)*a;return b+f*(4*c*a+-3*c)},backInQuartic:function(a,b,f,c){c=(a/=c)*a;return b+f*(2*c*c+2*c*a+-3*c)},inOutQuintic:function(a,b,f,c){c=(a/=c)*a;a*=c;return b+f*(6*a*c+-15*c*c+10*a)},linear:function(a,b,f,c){return b+
a/c*(f-b)},outElastic:function(a,b,f,c){c=(a/=c)*a;var q=c*a;return b+f*(56*q*c+-175*c*c+200*q+-100*c+20*a)},outQuartic:function(a,b,f,c){c=(a/=c)*a;return b+f*(-1*c*c+4*c*a+-6*c+4*a)},outQuintic:function(a,b,f,c){c=(a/=c)*a;var q=c*a;return b+f*(q*c+-5*c*c+10*q+-10*c+5*a)}},addAttributes:function(a,b){for(var f in b)if(b.hasOwnProperty(f))try{a[f]=b[f]}catch(c){}},addClass:function(a,b){this.hasClass(a,b)||(a.className+=" "+b)},addCSSRule:function(a,b,f,c){"insertRule"in a?a.insertRule(b+"{"+f+"}",
c):"addRule"in a&&a.addRule(b,f,c)},addPoints:function(a,b){return{x:a.x+b.x,y:a.y+b.y}},_getValues:function(a,b){var f={},c=window.getComputedStyle(a),q;for(q in b)b.hasOwnProperty(q)&&(f[q]=parseFloat(a.style[q]||c.getPropertyValue(q)),f[q]=f[q]?f[q]:0);return f},_getUnits:function(a){var b={},f;for(f in a)if(a.hasOwnProperty(f)){var c=a[f].toString().match(/[A-Za-z%]+/g);b[f]={value:parseFloat(a[f].toString().match(/-?[0-9\.]+/)),unit:null!==c?c[0]:null}}return b},animate:function(c,b){var f=Date.now(),
p=b.easing||"linear",q=b.duration||1E3,e=this._getValues(c,b.properties),g=this._getUnits(b.properties),s=this,t;return a.Commitment.then(function(){var a=this;(function v(){var y=Date.now()-f,w,m,h;for(h in b.properties)b.properties.hasOwnProperty(h)&&(m=g[h].value-e[h],w=s.easingFunctions[p](y,e[h],m,q),w=(y>q?e[h]+m:w)+g[h].unit,c.style[h]=w);y>q?(b.callback&&b.callback(c),a.resolve(),cancelAnimationFrame(t)):t=requestAnimationFrame(v)})()})},arrayContains:function(a,b){var f=a.length;do if(f-=
1,a[f]===b)return!0;while(0<f);return!1},calculateZIndex:function(a){if(!(a instanceof HTMLElement))throw Error("Expected HTMLElement, received "+typeof a+" instead");return window.getComputedStyle?(a=parseInt(document.defaultView.getComputedStyle(a,null).zIndex,10),isNaN(a)?!1:a):a.currentStyle?(a=parseInt(a.currentStyle.zIndex,10),isNaN(a)?!1:a):!1},calculateZIndexOfChildren:function(a){var b=0;if(!(a instanceof HTMLElement))return!1;var f=a.childNodes.length;if(0<f)for(var c=0,q=!1;c<f;c+=1)a.childNodes[c]instanceof
HTMLElement&&!g.hasClass(a.childNodes[c],"kskdDiv")&&g.isVisible(a.childNodes[c])&&(q=g.calculateZIndex(a.childNodes[c]),!1!==q&&q>=b&&(b=q));return b},corsSupported:function(){return g.XMLHttpRequestSupported()||g.XDomainRequestSupported()},create:function(c,b,f,p){c=document.createElement(c);c.className="kskdDiv";if(b){if(b.className){for(var q=b.className.split(" "),e=b.design?b.design:!1,g=0;g<q.length;g+=1)m.setStyle(c,q[g],e);delete b.className}b.style&&(m.style(c,b.style),delete b.style);b.cssClass&&
(c.className="kskdDiv "+b.cssClass);this.addAttributes(c,b)}f&&(p&&"first"===p?f.insertBefore(c,f.firstChild):p instanceof HTMLElement&&a.tools.dom.isDescendant(f,p)?f.insertBefore(c,p.nextSibling):f.appendChild(c));return c},deepClone:function b(f,a){g.isset(a)||(a=!1);if(null===f||"object"!==typeof f)return f;if(f instanceof Date){var c=new Date;c.setTime(f.getTime());return c}if(f instanceof Array){for(var c=[],e=0,l=f.length;e<l;e+=1)c[e]=b(f[e],a);return c}if(f instanceof HTMLElement)return f;
if(f instanceof Object){c={};for(e in f)if(f.hasOwnProperty(e)||a)c[e]=b(f[e],a);return c}throw Error("Unable to clone object - Type not supported");},distanceBetweenCoordinates:function(b,f,a,c){b-=a;f-=c;return Math.sqrt(b*b+f*f)},distanceBetweenPoints:function(b,f){return g.distanceBetweenCoordinates(b.x,b.y,f.x,f.y)},escapeHTML:function(b){b=(b||"").replace(/&#([^\s]*);/g,function(b,a){return String.fromCharCode(Number(a))});return b.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},
findImageByImageURL:function(b,f){var a,c;f=f||{};var e;e=f.insertNode?f.insertNode.getElementsByTagName("img"):document.getElementsByTagName("img");g.isString(b)&&(b=[b]);for(var l,s=a=0;s<e.length;s+=1)for(var t in b)b.hasOwnProperty(t)&&("string"===typeof b[t]||b[t]instanceof String)&&("string"===typeof e[s].src||e[s].src instanceof String)&&e[s].src.replace(/^https?:/i,"").replace(/\&amp;/ig,"&")===b[t].replace(/^https?:/i,"").replace(/\&amp;/ig,"&")&&!e[s].getAttribute("kiosked")&&e[s].offsetHeight*
e[s].offsetWidth>a&&(l=e[s],a=e[s].offsetWidth,c=e[s].offsetHeight,a*=c);return l?(l.setAttribute("kiosked","true"),l):!1},findMediaByZoneId:function(b){b=g.dom.query("[kioskedHash_"+g.environment.getContext()+'="'+b+'"]');return 0<b.length?(b[0].setAttribute("kiosked","true"),b[0]):!1},findSuitableNodeParent:function(b){for(var f,a,c;b.offsetParent;)if(b=b.offsetParent,f=m.getStyle(b,"position"),a=m.getStyle(b,"display"),c=b.tagName,"static"!==f)if("A"===c)"inline"===a&&(b.style.display="block");
else break;return b},flattenSettings:function(b){if("object"!==typeof b)return b;var f={},a=function(b,c){if("object"===typeof b)for(var e in b)b.hasOwnProperty(e)&&a(b[e],0<c.length?c+"."+e:e);else 0<c.length&&(f[c]=b)};a(b,"");return f},getDevicePixelRatio:function(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1},getElementOffset:function(b,f,a){var c,e,l=0,s=0,t,u,r,v,y,w,h,m,n,B,A,z;f||(z=document.defaultView.getComputedStyle(b,""),t=parseInt(z.borderLeftWidth,10),u=parseInt(z.borderRightWidth,
10),r=parseInt(z.borderTopWidth,10),v=parseInt(z.borderBottomWidth,10),y=parseInt(z.paddingLeft,10),w=parseInt(z.paddingRight,10),h=parseInt(z.paddingTop,10),m=parseInt(z.paddingBottom,10),n=parseInt(z.paddingLeft,10),B=parseInt(z.paddingRight,10),A=parseInt(z.paddingTop,10),z=parseInt(z.paddingBottom,10));a||(c=b.offsetWidth,e=b.offsetHeight);f=b&&b.ownerDocument;a={top:0,left:0};f&&(s=f.documentElement,b.getBoundingClientRect&&(a=b.getBoundingClientRect()),b=g.dom.getWindow(s),l=a.top+b.pageYOffset-
s.clientTop,s=a.left+b.pageXOffset-s.clientLeft);return{top:l,left:s,height:e,width:c,border:{left:t,right:u,top:r,bottom:v},padding:{left:y,right:w,top:h,bottom:m},margin:{left:n,right:B,top:A,bottom:z},screen:a}},getIntersectedSize:function(b,f){var a=g.getElementOffset(b),c=g.getElementOffset(f),e=a.screen,l=c.screen,s={left:e.left,top:e.top,width:e.width,height:e.height},t=a.width*a.height,u=a.left+a.border.left+a.padding.left,r=a.top+a.border.top+a.padding.top,v=c.left+c.border.left,y=c.top+
c.border.top,w=parseInt(e.width,10),h=parseInt(e.height,10),m=parseInt(l.width,10),n=parseInt(l.height,10),w=w-(a.border.left+a.border.right+a.padding.left+a.padding.right),h=h-(a.border.top+a.border.bottom+a.padding.top+a.padding.bottom),m=m-(c.border.left+c.border.right),n=n-(c.border.top+c.border.bottom),a=u,c=r,B=w,A=h;v>u&&(a=v);l.left>e.left&&(s.left=v);y>r&&(c=y);l.top>e.top&&(s.top=l.top);if(v+m<u+w||v>u)B=Math.min(v+m,u+w)-a;if(l.left+l.width<e.left+e.width||l.left>e.left)u=Math.min(l.left+
l.width,e.left+e.width),s.width=u-s.left;if(y+n<r+h||y>r)A=Math.min(y+n,r+h)-c;if(l.top+l.height<e.top+e.height||l.top>e.top)r=Math.min(l.top+l.height,e.top+e.height),s.height=r-s.top;return{areaDiff:t-B*A,left:a,top:c,width:B,height:A,screenPos1:e,screenPos2:l,intersectedScreenPos:s}},getMouseButton:function(b){var f="none";b&&(f=null!==b.which&&"undefined"!==b.which&&b.hasOwnProperty("which")?2>b.which?"left":2===b.which?"middle":"right":2>b.button?"left":4===b.button?"middle":"right");return f},
getMousePosition:function(b){var f=!1,a=!1,c=g.getWindowEvent();b.x&&b.y&&!g.isBrowser.internetExplorer()?(f=b.x,a=b.y):c?(f=c.clientX,a=c.clientY):b.clientX&&b.clientY&&(f=b.clientX,a=b.clientY);return!1!==f&&!1!==a?{x:f,y:a}:!1},getObjectLength:function(b){var f=0;if("object"===typeof b)for(var a in b)b.hasOwnProperty(a)&&(f+=1);return f},getRandomInt:function(b,f){f+=1;return Math.floor(Math.random()*(f-b))+b},getScroll:function(b){var f=b&&b instanceof HTMLElement?b:document.documentElement;b=
window.pageXOffset||f.scrollLeft;var a=window.pageYOffset||f.scrollTop,a=a?a:0,c=f.scrollWidth||window.scrollWidth,c=c?c:0,f=(f=f.scrollHeight||window.scrollHeight)?f:0;return{width:parseInt(b?b:0,10),height:parseInt(a,10),scrollWidth:parseInt(c,10),scrollHeight:parseInt(f,10)}},getSubtractedSize:function(b,f,a){var c,e,l,s;b instanceof HTMLElement?(c=g.getElementOffset(b),b=b.getBoundingClientRect(),e=c.width*c.height,l=c.left,c=c.top,s=parseInt(b.width,10),b=parseInt(b.height,10)):(e=b.width*b.height,
l=b.left,c=b.top,s=b.width,b=b.height);var t=g.getElementOffset(f),u=f.getBoundingClientRect();f=t.left;var r=t.top,v=parseInt(u.width,10),u=parseInt(u.height,10),v=v-(t.border.left+t.border.right),u=u-(t.border.top+t.border.bottom),t=l,y=c,w=s,h=b;"right"===a?f<l+s&&(w=f-l):"left"===a?f+v>l&&(t=f+v,w=s-(f+v-l)):"top"===a?r+u>c&&(y=r+u,h=b-(r+u-c)):"bottom"===a&&r<c+b&&(h=r-c);return{areaDiff:e-w*h,left:t,top:y,width:w,height:h}},getTouchBeginEventName:function(){return window.navigator.msPointerEnabled?
"onmspointerdown":"ontouchstart"},getTouchEndEventName:function(){return window.navigator.msPointerEnabled?"onmspointerup":"ontouchend"},getTouchMoveEventName:function(){return window.navigator.msPointerEnabled?"onmspointermove":"ontouchmove"},getWindowEvent:function(){return window.event?window.event:!1},getWindowLocationPath:function(){var b=g.overrideCall("tools.getWindowLocationPath");return b?b():window.location.protocol+"//"+window.location.hostname+window.location.pathname},getWindowSize:function(){var b=
0,a=0;window.innerWidth?(b=window.innerWidth,a=window.innerHeight):0!==document.documentElement.clientWidth&&(b=document.documentElement.clientWidth,a=document.documentElement.clientHeight);return{width:parseInt(b,10),height:parseInt(a,10)}},getXTouch:function(b){return window.navigator.msPointerEnabled?b.pageX:b.touches[0].pageX},getYTouch:function(b){return window.navigator.msPointerEnabled?b.pageY:b.touches[0].pageY},hasClass:function(b,a){return null!==b.className.match(new RegExp("(\\s|^)"+a+
"(\\s|$)"))},hash:function(b){g.isString(b)||(b+="");var a,c,e=2166136261;a=0;for(c=b.length;a<c;a+=1)e^=b.charCodeAt(a),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return("0000000"+(e>>>0).toString(16)).substr(-8)},hasTouchEvents:function(){return this.isWindowsOS(!0)||this.isWindowsPhone()?!0:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints?!this.isWindowsOS(!1):!1},indexOfPluginWithName:function(b,
a){if(g.array.isArray(b)){var c=b.length;if(0<c)for(var e=0;e<c;e+=1){var k=b[e];if(k&&k.name&&k.name===a)return e}}return!1},isAlpha:function(b){return g.isset(b)&&/^[a-zA-Z]+$/.test(b)},isBrowser:{chrome:function(){return!!window.chrome},internetExplorer:function(){return-1<navigator.userAgent.indexOf(".NET CLR")||-1!==navigator.appVersion.indexOf("MSIE")},internetExplorer9:function(){return g.isBrowser.internetExplorer()&&9===parseInt(document.documentMode,10)},isIEunder11:function(){return-1!==
navigator.appVersion.indexOf("MSIE")}},isDifferentPosition:function(b,a){return b.top!==a.top||b.left!==a.left},isDifferentSize:function(b,a){return b.width!==a.width||b.height!==a.height},isEmpty:function(b){if(null===b||!1===b)return!0;switch(typeof b){case "undefined":return!0;case "boolean":return!1===b;case "number":return 0===b;case "string":return 0===b.length||""===b||"0"===b;case "object":return b instanceof Array?0===b.length:0===Object.getOwnPropertyNames(b).length;default:throw Error("unexpected case: "+
b);}},isLandscapeOrientation:function(){return window.innerWidth>window.innerHeight},isMobileType:function(){var b=/Android/i.test(navigator.userAgent),a=/BlackBerry/i.test(navigator.userAgent),c=/iPhone|iPad|iPod|iPhone Simulator|iPad Simulator/i.test(navigator.userAgent),e=/iPad|iPad Simulator/i.test(navigator.userAgent),k=/iPhone|iPod|iPhone Simulator/i.test(navigator.userAgent),g=/Opera Mini/i.test(navigator.userAgent),s=/IEMobile|Windows Phone/i.test(navigator.userAgent),t;t=navigator.userAgent||
navigator.vendor||window.opera;t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,
4))?!0:!1;return{Android:b,BlackBerry:a,iOS:c,iPad:e,iPhone:k,Opera:g,Windows:s,any:t}}(),isOnScreen:function(b,a){var c=!1,e="object"===typeof a?a:g.deepClone(b.getBoundingClientRect(),!0);if(e.top>-1*e.height&&e.bottom-window.innerHeight<e.height&&e.left>-1*e.width&&e.right-window.innerWidth<e.width){0===e.height&&(e.height=1);0===e.width&&(e.width=1);var c=e.height-(e.height+e.top),k=e.bottom-window.innerHeight,l=e.width-(e.width+e.left),s=e.right-window.innerWidth,c=(e.width-(0<l?l:0)-(0<s?s:
0))*(e.height-(0<c?c:0)-(0<k?k:0))/(e.width*e.height)*100}return c},isset:function(b){return"undefined"!==typeof b&&null!==b},isString:function(b){return"string"===typeof b||b instanceof String},isVisible:function(b){var a=window.getComputedStyle(b);return 0===a.getPropertyValue("opacity")||"none"===a.getPropertyValue("display")||"hidden"===a.getPropertyValue("visibility")||0===parseInt(b.style.opacity,10)||"none"===b.style.display||"hidden"===b.style.visibility?!1:!0},isWindowsOS:function(b){if(navigator&&
navigator.userAgent){var a=navigator.userAgent;if(a.match("Windows"))return!(b&&!a.match("ARM"))}return!1},isWindowsPhone:function(){var b=!1;if(navigator&&navigator.userAgent)for(var a=navigator.userAgent,c=["WPDesktop","Windows Phone"],e=0;e<c.length;e+=1)if(a.match(c[e])){b=!0;break}return b},jsonP:function(b){a.callback=a.callback||[];var f=this.jsonPGetUrl(b);if(2048<f.length)throw Error("jsonP request is too lengthy");a.callback[a.callback.length]=b.load;this.create("script",{src:f,type:"text/javascript"},
document.getElementsByTagName("head")[0])},jsonPGetUrl:function(b){a.callback=a.callback||[];var f=a.callback.length,c="";if(b.content)for(var e in b.content)b.content.hasOwnProperty(e)&&(c+="&"+e+"="+encodeURIComponent(b.content[e]));e="?";-1!==b.url.indexOf("?")&&(e="&");return b.url+e+"callback="+encodeURIComponent("ITGS.callback["+f+"]")+c},leftString:function(b,a){return b.length<=a?b:b.substring(0,a)},mergeDefaults:function f(a,c){for(var e in c)if(c.hasOwnProperty(e))try{a[e]=c[e].constructor===
Object?a[e]instanceof HTMLElement||c[e]instanceof HTMLElement?c[e]:f(a[e],c[e]):c[e]}catch(g){a[e]=c[e]}return a?a:c},mousemove:function(a,c){if(a.onmousemove)var e=a.onmousemove;a.onmousemove=function(a){window.event&&(a=window.event);e&&e(a);c(a)}},mousewheel:function(a,c){function e(a){var f=0;a||(a=window.event);a.wheelDelta?f=a.wheelDelta/120:a.detail&&(f=-a.detail/3);c(a,f)}if(a.addEventListener)a.addEventListener("DOMMouseScroll",e,!1),a.addEventListener("mousewheel",e,!1);else{if(a.onmousewheel)var g=
window.onmousewheel;a.onmousewheel=function(a){g&&g(a);e(a)}}},offset:function(a,c){var e=a,g=0,l=0,s=0,t=0,u=e.offsetWidth,r=e.offsetHeight,v=e,y,w=!1,h,n,C,B,A={top:0,left:0,right:0,bottom:0};c&&(y=c.firstNode?c.firstNode:null,!0===c.innerSize&&(h=parseInt(m.getStyle(e,"borderLeftWidth"),10),C=parseInt(m.getStyle(e,"borderRightWidth"),10),n=parseInt(m.getStyle(e,"borderTopWidth"),10),B=parseInt(m.getStyle(e,"borderBottomWidth"),10),h&&(u-=h,A.left=h),C&&(u-=C,A.right=C),n&&(r-=n,A.top=n),B&&(r-=
B,A.bottom=B)));for(;e&&(h=parseInt(m.getStyle(e,"borderLeftWidth"),10),n=parseInt(m.getStyle(e,"borderTopWidth"),10),h=h?h:0,n=n?n:0,v=e,"fixed"!==m.getStyle(e,"position"));){g+=e.offsetLeft+h;l+=e.offsetTop+n;if(y&&y===e||w)w=!0,s-=e.offsetLeft+h,t-=e.offsetTop+n;e=e.offsetParent}e=a;for(w=!1;e&&e!==v;)e===y&&(w=!0),(h=m.getStyle(e,"transform"))&&0===h.search(/matrix/)&&(n=h.replace(/^matrix\(/,"").replace(/\)$/,"").replace(/ /g,"").split(","),h=parseInt(n[4],10),n=parseInt(n[5],10),g+=h,l+=n,w&&
(s-=h,t-=n)),e=e.parentNode;e=this.getWindowSize().width-g;h=parseInt(m.getStyle(v,"borderLeftWidth"),10);n=parseInt(m.getStyle(v,"borderTopWidth"),10);w=m.getStyle(v,"position");h&&(0>v.offsetLeft?(g+=h,y&&(s-=h)):(g-=h,y&&(s+=h)),"static"!==w&&(g-=h,y&&(s+=h)));n&&(0>v.offsetTop?(l+=n,y&&(t-=n)):(l-=n,y&&(t+=n)),"static"!==w&&(l-=n,y&&(t+=n)));return{firstTop:l,firstLeft:g,top:l+t,left:g+s,right:e,width:u,height:r,firstNode:v,insertNode:y?y:v,border:A}},open:function(a,c){var e;if(-1!==navigator.userAgent.search(/webkit/i)){var k=
document.createEvent("HTMLEvents");k.initEvent("click",!0,!0);g.create("a",{href:a,target:c?c:"_self"}).dispatchEvent(k)}else e=window.open(a,c?c:"_self");return e},outerHeight:function(a){if("undefined"===typeof a)return 0;var c=parseInt(a.offsetHeight,10);a.style.marginTop&&(c+=parseInt(a.style.marginTop,10));a.style.marginBottom&&(c+=parseInt(a.style.marginBottom,10));return c},overrideCall:function(c){return a.overrideFunctions[c]&&"function"===typeof a.overrideFunctions[c]?a.overrideFunctions[c]:
!1},pageProtocol:function(){var a=["http:","https:","file:"];return 0<=a.indexOf(window.location.protocol)?window.location.protocol:a[0]}(),parseBoolean:function(a){return"string"!==typeof a||"true"!==a.toLowerCase()&&"yes"!==a.toLowerCase()?"boolean"===typeof a?a:0<parseInt(a,10):!0},preventChildMouseOut:function(a,c,e){(a=a.toElement||a.relatedTarget)&&a.parentNode===c||a===c||e&&e()},preventDefault:function(a,c){a&&(a.preventDefault&&a.preventDefault(),a.returnValue=!1,c&&(a.cancelBubble=!0,a.cancel=
!0,a.stopPropagation&&a.stopPropagation()))},processPluginsArray:function(c,e){var q,k=g.deepClone(c);if(e.isSet("overridePlugins")){var l,k=[];try{if(l=JSON.parse(e.get("overridePlugins")),g.array.isArray(l))for(q=0;q<l.length;q+=1)k.push(l[q]);else k=[l]}catch(s){for(l=e.get("overridePlugins").split(","),q=0;q<l.length;q+=1){var t=g.trim(l[q]);a.Plugins.hasOwnProperty(t)?k.push({name:t}):(t=0>=t.length?"(empty)":t,g.debug.log("/Tools/","(Override Plugins)","Failed loading plugin with invalid name:",
t))}}}if(e.isSet("removePlugins")){var u;try{if(u=JSON.parse(e.get("removePlugins")),g.array.isArray(u))for(q=0;q<u.length;q+=1)for(l=0;l<k.length;l+=1)k[l].name===g.trim(u[q])&&k.splice(l,1)}catch(r){for(u=e.get("removePlugins").split(","),q=0;q<u.length;q+=1)for(l=0;l<k.length;l+=1)k[l].name===g.trim(u[q])&&k.splice(l,1)}}if(e.isSet("additionalPlugins")){var v;try{if(v=JSON.parse(e.get("additionalPlugins")),g.array.isArray(v))for(q=0;q<v.length;q+=1)k.push(v[q]);else k.push(v)}catch(y){for(v=e.get("additionalPlugins").split(","),
q=0;q<v.length;q+=1)for(q=0;q<v.length;q+=1)k.push({name:g.trim(v[q])})}}return k},removeAttributes:function(a,c){g.array.isArray(c)||(c=[c]);for(var e=0,k=c.length;e<k;e+=1)try{a.removeAttribute(c[e])}catch(l){console.log(l)}},removeClass:function(a,c){this.hasClass(a,c)&&(a.className=a.className.replace(new RegExp("(\\s|^)"+c+"(\\s|$)")," "))},replaceLineBreakWithBr:function(a){return a.replace(/\n/g,"<br />")},replaceTextInArray:function(a,c,e){if("[object Array]"===Object.prototype.toString.call(a)){for(var g in a)a.hasOwnProperty(g)&&
(a[g]=a[g].replace(c,e));return a}return a.replace(c,e)},request:function(a){g.XMLHttpRequestSupported()&&!1===g.forceJSONP?e(a):g.XDomainRequestSupported()&&!1===g.forceJSONP?c(a):g.jsonP(a)},rgba2hex:function(a){a=a.match(/(\d+),[ ]?(\d+),[ ]?(\d+),[ ]?(\d+(\.\d+)?)/i);var c=("0"+parseInt(a[1],10).toString(16)).slice(-2),e=("0"+parseInt(a[2],10).toString(16)).slice(-2),g=("0"+parseInt(a[3],10).toString(16)).slice(-2),l=("0"+parseInt(255*parseFloat(a[4],10)).toString(16)).slice(-2);return["#"+c+
e+g+l,"#"+c+e+g,parseFloat(a[4],10)]},rightString:function(a,c){var e=a.length;return e<=c?a:a.substring(e-c)},routeSettingsOutput:function(a){var c={settings:{},targets:{}};if("[object Array]"===Object.prototype.toString.call(a)){var e=a.length;if(0<e)for(var k=0;k<e;k+=1)a[k].hasOwnProperty("key")&&a[k].hasOwnProperty("value")&&(a[k].hasOwnProperty("target")&&g.isset(a[k].target)?(c.targets.hasOwnProperty(a[k].target)||(c.targets[a[k].target]={}),c.targets[a[k].target][a[k].key]=a[k].value):c.settings[a[k].key]=
a[k].value)}return c},shuffleArray:function(a){for(var c=[];a.length;)c.push(a.splice(Math.random()*a.length,1)[0]);for(;c.length;)a.push(c.pop());return a},stopPropagation:function(a){g.isset(a.stopPropagation)&&a.stopPropagation();a.cancelBubble=!0},trim:function(a){return a?a.replace(/^\s+|\s+$/g,""):""},XDomainRequestSupported:function(){return"undefined"!==typeof window.XDomainRequest},XMLHttpRequestSupported:function(){return window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}}}();
a.Exceptions={};(function(){var e=KskdClass.extend(function(){return{construct:function(a,d,b){this._exceptionName="KioskedException";this._exceptionMessage="An unknown error has occurred";a&&d&&this.setInfo(a,d);this._target=b?b:null},getTarget:function(){return this._target},setInfo:function(a,d){this._exceptionName="Kiosked"+a;this._exceptionMessage=d},toString:function(){return"["+this._exceptionName+"] "+this._exceptionMessage}}}());a.Exceptions.BadOptionException=e.extend(function(){return{construct:function(a,
d,b){this.$super("BadOptionException",a?a:"A parameter passed contained an unexpected value or option",d);this._option=b},getOptionObject:function(){return this._option}}}());a.Exceptions.DuplicateActionException=e.extend(function(){return{construct:function(a,d,b){this.$super("DuplicateActionException",a?a:"An action was executed that resulted in a duplicated path of events",b);this._dupTarget=d},getTarget:function(){return this._dupTarget}}}());a.Exceptions.IllegalInvocationException=e.extend(function(){return{construct:function(a,
d){this.$super("IllegalInvocationException",a?a:"A function was called with an invalid context - 'this' was not an instance of the expected class",d)}}}());a.Exceptions.InvalidPropertiesException=e.extend(function(){return{construct:function(a,d,b){this.$super("InvalidPropertiesException",a?a:"A required property of an object was invalid or missing",d);this._properties=b},getPropertiesObject:function(){return this._properties}}}());a.Exceptions.InvalidStateException=e.extend(function(){return{construct:function(a,
d,b,f){b=b?b:null;this.$super("InvalidStateException","Invalid state: Expected context to have state '"+a+"' but was in '"+d+"' ("+(f||typeof b)+")",b)}}}());a.Exceptions.InvalidTypeException=e.extend(function(){return{construct:function(a,d,b){this.$super("InvalidTypeException","Invalid type received: Expected type '"+a+"' but received '"+d+"'",b?b:null)}}}());a.Exceptions.LoopException=e.extend(function(){return{construct:function(a,d){this.$super("LoopException",a?a:"A loop or recursion failed to exit in time",
d)}}}());a.Exceptions.NotSupportedException=e.extend(function(){return{construct:function(a,d){this.$super("NotSupportedException",a?a:"A requested feature or operation is not supported",d)}}}());a.Exceptions.NullElementException=e.extend(function(){return{construct:function(a,d){this.$super("NullElementException",a?a:"An element was expected, but NULL received",d)}}}());a.Exceptions.UnexpectedException=e.extend(function(){return{construct:function(a,d,b){this._data=b;this.$super("UnexpectedException",
a?a:"An element was expected, but NULL received",d)},getData:function(){return this._data}}}());a.Exceptions.UndefinedException=e.extend(function(){return{construct:function(a,d){this.$super("UndefinedException",a?a:"An element was expected, but it was undefined",d)}}}())})();(function(){function a(b){return function(){return this[b]}}function c(a){return function(){return a}}function d(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=
Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function b(a){return"string"==
typeof a}function f(a,b,c){return a.call.apply(a.bind,arguments)}function p(a,b,c){if(!a)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,f);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function g(a,b,c){g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:p;return g.apply(null,arguments)}function k(a,b){var c=
Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function l(a){function b(){}var c=T;b.prototype=c.prototype;a.u=c.prototype;a.prototype=new b;a.t=function(a,b,f){return c.prototype[b].apply(a,Array.prototype.slice.call(arguments,2))}}function s(a,b,c){this.a=a;this.b=b||1;this.d=c||1}function t(a,b){return a<b?-1:a>b?1:0}function u(a,c){var f;a:{f=a.length;for(var d=b(a)?a.split(""):a,e=0;e<f;e++)if(e in d&&c.call(void 0,
d[e],e,a)){f=e;break a}f=-1}return 0>f?null:b(a)?a.charAt(f):a[f]}function r(a){return O.concat.apply(O,arguments)}function v(a,b,c){return 2>=arguments.length?O.slice.call(a,b):O.slice.call(a,b,c)}function y(a){return-1!=ga.indexOf(a)}function w(){var a=aa.document;return a?a.documentMode:void 0}function h(a){if(!Pa[a]){for(var b=0,c=String(Qa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=Math.max(c.length,f.length),e=0;0==b&&e<d;e++){var p=
c[e]||"",g=f[e]||"",q=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var l=q.exec(p)||["","",""],s=k.exec(g)||["","",""];if(0==l[0].length&&0==s[0].length)break;b=t(0==l[1].length?0:parseInt(l[1],10),0==s[1].length?0:parseInt(s[1],10))||t(0==l[2].length,0==s[2].length)||t(l[2],s[2])}while(0==b)}Pa[a]=0<=b}}function m(a,b,c,f){this.a=a;this.nodeName=c;this.nodeValue=f;this.nodeType=2;this.parentNode=this.ownerElement=b}function n(a,b){var c=Ra&&"href"==b.nodeName?a.getAttribute(b.nodeName,
2):b.nodeValue;return new m(b,a,b.nodeName,c)}function B(a){this.b=a;this.a=0}function A(a){a=a.match(rb);for(var b=0;b<a.length;b++)sb.test(a[b])&&a.splice(b,1);return new B(a)}function z(a,b){return a.b[a.a+(b||0)]}function E(a){return a.b[a.a++]}function ba(a){return a.b.length<=a.a}function x(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==
a}function Sa(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if(P&&!(P&&9<=pa)){if(9==a.nodeType)return-1;if(9==b.nodeType)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=1==a.nodeType,f=1==b.nodeType;if(c&&f)return a.sourceIndex-b.sourceIndex;var d=a.parentNode,e=b.parentNode;return d==e?Ta(a,b):!c&&x(d,b)?-1*F(a,b):!f&&x(e,a)?F(b,a):(c?a.sourceIndex:d.sourceIndex)-(f?b.sourceIndex:e.sourceIndex)}f=9==a.nodeType?a:a.ownerDocument||
a.document;c=f.createRange();c.selectNode(a);c.collapse(!0);f=f.createRange();f.selectNode(b);f.collapse(!0);return c.compareBoundaryPoints(aa.Range.START_TO_END,f)}function F(a,b){var c=a.parentNode;if(c==b)return-1;for(var f=b;f.parentNode!=c;)f=f.parentNode;return Ta(f,a)}function Ta(a,b){for(var c=b;c=c.previousSibling;)if(c==a)return-1;return 1}function W(a){var b=null,c=a.nodeType;1==c&&(b=a.textContent,b=void 0==b||null==b?a.innerText:b,b=void 0==b||null==b?"":b);if("string"!=typeof b)if(Y&&
"title"==a.nodeName.toLowerCase()&&1==c)b=a.text;else if(9==c||1==c){a=9==c?a.documentElement:a.firstChild;for(var c=0,f=[],b="";a;){do 1!=a.nodeType&&(b+=a.nodeValue),Y&&"title"==a.nodeName.toLowerCase()&&(b+=a.text),f[c++]=a;while(a=a.firstChild);for(;c&&!(a=f[--c].nextSibling););}}else b=a.nodeValue;return""+b}function ca(a,b,c){if(null===b)return!0;try{if(!a.getAttribute)return!1}catch(f){return!1}Ra&&"class"==b&&(b="className");return null==c?!!a.getAttribute(b):a.getAttribute(b,2)==c}function ka(a,
c,f,d,e){return(Y?tb:ub).call(null,a,c,b(f)?f:null,b(d)?d:null,e||new D)}function tb(a,b,c,f,d){if(a instanceof fa||8==a.b||c&&null===a.b){var e=b.all;if(!e)return d;a=Ua(a);if("*"!=a&&(e=b.getElementsByTagName(a),!e))return d;if(c){for(var p=[],g=0;b=e[g++];)ca(b,c,f)&&p.push(b);e=p}for(g=0;b=e[g++];)"*"==a&&"!"==b.tagName||H(d,b);return d}Da(a,b,c,f,d);return d}function ub(a,b,c,f,d){b.getElementsByName&&f&&"name"==c&&!P?(b=b.getElementsByName(f),Z(b,function(b){a.a(b)&&H(d,b)})):b.getElementsByClassName&&
f&&"class"==c?(b=b.getElementsByClassName(f),Z(b,function(b){b.className==f&&a.a(b)&&H(d,b)})):a instanceof X?Da(a,b,c,f,d):b.getElementsByTagName&&(b=b.getElementsByTagName(a.d()),Z(b,function(a){ca(a,c,f)&&H(d,a)}));return d}function vb(a,b,c,f,d){var e;if((a instanceof fa||8==a.b||c&&null===a.b)&&(e=b.childNodes)){var p=Ua(a);if("*"!=p&&(e=Va(e,function(a){return a.tagName&&a.tagName.toLowerCase()==p}),!e))return d;c&&(e=Va(e,function(a){return ca(a,c,f)}));Z(e,function(a){"*"==p&&("!"==a.tagName||
"*"==p&&1!=a.nodeType)||H(d,a)});return d}return Wa(a,b,c,f,d)}function Wa(a,b,c,f,d){for(b=b.firstChild;b;b=b.nextSibling)ca(b,c,f)&&a.a(b)&&H(d,b);return d}function Da(a,b,c,f,d){for(b=b.firstChild;b;b=b.nextSibling)ca(b,c,f)&&a.a(b)&&H(d,b),Da(a,b,c,f,d)}function Ua(a){if(a instanceof X){if(8==a.b)return"!";if(null===a.b)return"*"}return a.d()}function D(){this.b=this.a=null;this.i=0}function Xa(a){this.d=a;this.a=this.b=null}function Ea(a,b){if(!a.a)return b;if(!b.a)return a;for(var c=a.a,f=b.a,
d=null,e=null,p=0;c&&f;){var e=c.d,g=f.d;e==g||e instanceof m&&g instanceof m&&e.a==g.a?(e=c,c=c.a,f=f.a):0<Sa(c.d,f.d)?(e=f,f=f.a):(e=c,c=c.a);(e.b=d)?d.a=e:a.a=e;d=e;p++}for(e=c||f;e;)e.b=d,d=d.a=e,p++,e=e.a;a.b=d;a.i=p;return a}function I(a,b){var c=new Xa(b);c.a=a.a;a.b?a.a.b=c:a.a=a.b=c;a.a=c;a.i++}function H(a,b){var c=new Xa(b);c.b=a.b;a.a?a.b.a=c:a.a=a.b=c;a.b=c;a.i++}function qa(a){return(a=a.a)?a.d:null}function ra(a){return(a=qa(a))?W(a):""}function da(a,b){return new wb(a,!!b)}function wb(a,
b){this.d=a;this.b=(this.c=b)?a.b:a.a;this.a=null}function J(a){var b=a.b;if(null==b)return null;var c=a.a=b;a.b=a.c?b.b:b.a;return c.d}function Fa(a){switch(a.nodeType){case 1:return k(Ya,a);case 9:return Fa(a.documentElement);case 11:case 10:case 6:case 12:return Za;default:return a.parentNode?Fa(a.parentNode):Za}}function Za(){return null}function Ya(a,b){if(a.prefix==b)return a.namespaceURI||"http://www.w3.org/1999/xhtml";var c=a.getAttributeNode("xmlns:"+b);return c&&c.specified?c.value||null:
a.parentNode&&9!=a.parentNode.nodeType?Ya(a.parentNode,b):null}function T(a){this.g=a;this.b=this.f=!1;this.d=null}function K(a){return"\n  "+a.toString().split("\n").join("\n  ")}function $a(a,b){a.f=b}function ab(a,b){a.b=b}function M(a,b){var c=a.a(b);return c instanceof D?+ra(c):+c}function L(a,b){var c=a.a(b);return c instanceof D?ra(c):""+c}function ha(a,b){var c=a.a(b);return c instanceof D?!!c.i:!!c}function la(a,b,c){T.call(this,a.g);this.c=a;this.e=b;this.j=c;this.f=b.f||c.f;this.b=b.b||
c.b;this.c==xb&&(c.b||c.f||4==c.g||0==c.g||!b.d?b.b||b.f||4==b.g||0==b.g||!c.d||(this.d={name:c.d.name,l:b}):this.d={name:b.d.name,l:c})}function ia(a,b,c,f,d){b=b.a(f);c=c.a(f);var e;if(b instanceof D&&c instanceof D){d=da(b);for(f=J(d);f;f=J(d))for(b=da(c),e=J(b);e;e=J(b))if(a(W(f),W(e)))return!0;return!1}if(b instanceof D||c instanceof D){b instanceof D?d=b:(d=c,c=b);d=da(d);b=typeof c;for(f=J(d);f;f=J(d)){switch(b){case "number":f=+W(f);break;case "boolean":f=!!W(f);break;case "string":f=W(f);
break;default:throw Error("Illegal primitive type for comparison.");}if(a(f,c))return!0}return!1}return d?"boolean"==typeof b||"boolean"==typeof c?a(!!b,!!c):"number"==typeof b||"number"==typeof c?a(+b,+c):a(b,c):a(+b,+c)}function bb(a,b,c,f){this.a=a;this.p=b;this.g=c;this.k=f}function Q(a,b,c,f){if(Ga.hasOwnProperty(a))throw Error("Binary operator already created: "+a);a=new bb(a,b,c,f);return Ga[a.toString()]=a}function sa(a,b){if(b.a.length&&4!=a.g)throw Error("Primary expression must evaluate to nodeset if filter has predicate(s).");
T.call(this,a.g);this.c=a;this.e=b;this.f=a.f;this.b=a.b}function ta(a,b){if(b.length<a.o)throw Error("Function "+a.h+" expects at least"+a.o+" arguments, "+b.length+" given");if(null!==a.n&&b.length>a.n)throw Error("Function "+a.h+" expects at most "+a.n+" arguments, "+b.length+" given");a.s&&Z(b,function(b,c){if(4!=b.g)throw Error("Argument "+c+" to function "+a.h+" is not of type Nodeset: "+b);});T.call(this,a.g);this.e=a;this.c=b;$a(this,a.f||ua(b,function(a){return a.f}));ab(this,a.r&&!b.length||
a.q&&!!b.length||ua(b,function(a){return a.b}))}function cb(a,b,c,f,d,e,p,g,q){this.h=a;this.g=b;this.f=c;this.r=f;this.q=d;this.k=e;this.o=p;this.n=void 0!==g?g:p;this.s=!!q}function G(a,b,c,f,d,e,p,g){if(Ha.hasOwnProperty(a))throw Error("Function already created: "+a+".");Ha[a]=new cb(a,b,c,f,!1,d,e,p,g)}function X(a,b){this.e=a;this.c=void 0!==b?b:null;this.b=null;switch(a){case "comment":this.b=8;break;case "text":this.b=3;break;case "processing-instruction":this.b=7;break;case "node":break;default:throw Error("Unexpected argument");
}}function Ia(a){return"comment"==a||"text"==a||"processing-instruction"==a||"node"==a}function va(a){T.call(this,3);this.c=a.substring(1,a.length-1)}function fa(a,b){this.h=a.toLowerCase();this.c=b?b.toLowerCase():"http://www.w3.org/1999/xhtml"}function wa(a){T.call(this,1);this.c=a}function xa(a,b){T.call(this,a.g);this.e=a;this.c=b;this.f=a.f;this.b=a.b;if(1==this.c.length){var c=this.c[0];c.m||c.c!=db||(c=c.j,"*"!=c.d()&&(this.d={name:c.d(),l:null}))}}function ma(){T.call(this,4)}function ya(){T.call(this,
4)}function Ja(a){return"/"==a||"//"==a}function za(a,b){this.a=a;this.b=!!b}function Ka(a,b,c){for(c=c||0;c<a.a.length;c++)for(var f=a.a[c],d=da(b),e=b.i,p,g=0;p=J(d);g++){var q=a.b?e-g:g+1;p=f.a(new s(p,q,e));if("number"==typeof p)q=q==p;else if("string"==typeof p||"boolean"==typeof p)q=!!p;else if(p instanceof D)q=0<p.i;else throw Error("Predicate.evaluate returned an unexpected type.");if(!q){q=d;p=q.d;var k=q.a;if(!k)throw Error("Next must be called at least once before remove.");var l=k.b,k=
k.a;l?l.a=k:p.a=k;k?k.b=l:p.b=l;p.i--;q.a=null}}return b}function ea(a,b,c,f){T.call(this,4);this.c=a;this.j=b;this.e=c||new za([]);this.m=!!f;b=this.e;b=0<b.a.length?b.a[0].d:null;a.b&&b&&(a=b.name,a=Y?a.toLowerCase():a,this.d={name:a,l:b.l});a:{a=this.e;for(b=0;b<a.a.length;b++)if(c=a.a[b],c.f||1==c.g||0==c.g){a=!0;break a}a=!1}this.f=a}function eb(a,b,c,f){this.h=a;this.d=b;this.a=c;this.b=f}function R(a,b,c,f){if(La.hasOwnProperty(a))throw Error("Axis already created: "+a);b=new eb(a,b,c,!!f);
return La[a]=b}function Aa(a){T.call(this,1);this.c=a;this.f=a.f;this.b=a.b}function Ba(a){T.call(this,4);this.c=a;$a(this,ua(this.c,function(a){return a.f}));ab(this,ua(this.c,function(a){return a.b}))}function yb(a,b){this.a=a;this.b=b}function Ca(a){for(var b,c=[];;){S(a,"Missing right hand side of binary expression.");b=fb(a);var f=E(a.a);if(!f)break;var d=(f=Ga[f]||null)&&f.p;if(!d){a.a.a--;break}for(;c.length&&d<=c[c.length-1].p;)b=new la(c.pop(),c.pop(),b);c.push(b,f)}for(;c.length;)b=new la(c.pop(),
c.pop(),b);return b}function S(a,b){if(ba(a.a))throw Error(b);}function Ma(a,b){var c=E(a.a);if(c!=b)throw Error("Bad token, expected: "+b+" got: "+c);}function gb(a){a=E(a.a);if(")"!=a)throw Error("Bad token: "+a);}function hb(a){a=E(a.a);if(2>a.length)throw Error("Unclosed literal string");return new va(a)}function ib(a){var b=E(a.a),c=b.indexOf(":");if(-1==c)return new fa(b);var f=b.substring(0,c);a=a.b(f);if(!a)throw Error("Namespace prefix not declared: "+f);b=b.substr(c+1);return new fa(b,a)}
function jb(a){var b,c=[],f;if(Ja(z(a.a))){b=E(a.a);f=z(a.a);if("/"==b&&(ba(a.a)||"."!=f&&".."!=f&&"@"!=f&&"*"!=f&&!/(?![0-9])[\w]/.test(f)))return new ma;f=new ma;S(a,"Missing next location step.");b=Na(a,b);c.push(b)}else{a:{b=z(a.a);f=b.charAt(0);switch(f){case "$":throw Error("Variable reference not allowed in HTML XPath");case "(":E(a.a);b=Ca(a);S(a,'unclosed "("');Ma(a,")");break;case '"':case "'":b=hb(a);break;default:if(isNaN(+b))if(!Ia(b)&&/(?![0-9])[\w]/.test(f)&&"("==z(a.a,1)){b=E(a.a);
b=Ha[b]||null;E(a.a);for(f=[];")"!=z(a.a);){S(a,"Missing function argument list.");f.push(Ca(a));if(","!=z(a.a))break;E(a.a)}S(a,"Unclosed function argument list.");gb(a);b=new ta(b,f)}else{b=null;break a}else b=new wa(+E(a.a))}"["==z(a.a)&&(f=new za(kb(a)),b=new sa(b,f))}if(b)if(Ja(z(a.a)))f=b;else return b;else b=Na(a,"/"),f=new ya,c.push(b)}for(;Ja(z(a.a));)b=E(a.a),S(a,"Missing next location step."),b=Na(a,b),c.push(b);return new xa(f,c)}function Na(a,b){var c,f,d;if("/"!=b&&"//"!=b)throw Error('Step op should be "/" or "//"');
if("."==z(a.a))return f=new ea(zb,new X("node")),E(a.a),f;if(".."==z(a.a))return f=new ea(Ab,new X("node")),E(a.a),f;var e;if("@"==z(a.a))e=db,E(a.a),S(a,"Missing attribute name");else if("::"==z(a.a,1)){if(!/(?![0-9])[\w]/.test(z(a.a).charAt(0)))throw Error("Bad token: "+E(a.a));c=E(a.a);e=La[c]||null;if(!e)throw Error("No axis with name: "+c);E(a.a);S(a,"Missing node name")}else e=lb;c=z(a.a);if(/(?![0-9])[\w]/.test(c.charAt(0)))if("("==z(a.a,1)){if(!Ia(c))throw Error("Invalid node type: "+c);c=
E(a.a);if(!Ia(c))throw Error("Invalid type name: "+c);Ma(a,"(");S(a,"Bad nodetype");d=z(a.a).charAt(0);var p=null;if('"'==d||"'"==d)p=hb(a);S(a,"Bad nodetype");gb(a);c=new X(c,p)}else c=ib(a);else if("*"==c)c=ib(a);else throw Error("Bad token: "+E(a.a));d=new za(kb(a),e.a);return f||new ea(e,c,d,"//"==b)}function kb(a){for(var b=[];"["==z(a.a);){E(a.a);S(a,"Missing predicate expression.");var c=Ca(a);b.push(c);S(a,"Unclosed predicate expression.");Ma(a,"]")}return b}function fb(a){if("-"==z(a.a))return E(a.a),
new Aa(fb(a));var b=jb(a);if("|"!=z(a.a))a=b;else{for(b=[b];"|"==E(a.a);)S(a,"Missing next union location path."),b.push(jb(a));a.a.a--;a=new Ba(b)}return a}function mb(a,b){if(!a.length)throw Error("Empty XPath expression.");var f=A(a);if(ba(f))throw Error("Invalid XPath expression.");b?"function"==d(b)||(b=g(b.lookupNamespaceURI,b)):b=c(null);var e=Ca(new yb(f,b));if(!ba(f))throw Error("Bad token: "+E(f));this.evaluate=function(a,b){var c=e.a(new s(a));return new U(c,b)}}function U(a,b){if(0==b)if(a instanceof
D)b=4;else if("string"==typeof a)b=2;else if("number"==typeof a)b=1;else if("boolean"==typeof a)b=3;else throw Error("Unexpected evaluation result.");if(2!=b&&1!=b&&3!=b&&!(a instanceof D))throw Error("value could not be converted to the specified type");this.resultType=b;var c;switch(b){case 2:this.stringValue=a instanceof D?ra(a):""+a;break;case 1:this.numberValue=a instanceof D?+ra(a):+a;break;case 3:this.booleanValue=a instanceof D?0<a.i:!!a;break;case 4:case 5:case 6:case 7:var f=da(a);c=[];
for(var d=J(f);d;d=J(f))c.push(d instanceof m?d.a:d);this.snapshotLength=a.i;this.invalidIteratorState=!1;break;case 8:case 9:f=qa(a);this.singleNodeValue=f instanceof m?f.a:f;break;default:throw Error("Unknown XPathResult type.");}var e=0;this.iterateNext=function(){if(4!=b&&5!=b)throw Error("iterateNext called with wrong result type");return e>=c.length?null:c[e++]};this.snapshotItem=function(a){if(6!=b&&7!=b)throw Error("snapshotItem called with wrong result type");return a>=c.length||0>a?null:
c[a]}}function Bb(a){this.lookupNamespaceURI=Fa(a)}function nb(a){a=a||aa;var b=a.document;b.evaluate||(a.XPathResult=U,b.evaluate=function(a,b,c,f){return(new mb(a,c)).evaluate(b,f)},b.createExpression=function(a,b){return new mb(a,b)},b.createNSResolver=function(a){return new Bb(a)})}var aa=this;Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return g.apply(null,c)}return g(this,a)};var O=Array.prototype,
Cb=O.indexOf?function(a,b,c){return O.indexOf.call(a,b,c)}:function(a,c,f){f=null==f?0:0>f?Math.max(0,a.length+f):f;if(b(a))return b(c)&&1==c.length?a.indexOf(c,f):-1;for(;f<a.length;f++)if(f in a&&a[f]===c)return f;return-1},Z=O.forEach?function(a,b,c){O.forEach.call(a,b,c)}:function(a,c,f){for(var d=a.length,e=b(a)?a.split(""):a,p=0;p<d;p++)p in e&&c.call(f,e[p],p,a)},Va=O.filter?function(a,b,c){return O.filter.call(a,b,c)}:function(a,c,f){for(var d=a.length,e=[],p=0,g=b(a)?a.split(""):a,q=0;q<
d;q++)if(q in g){var k=g[q];c.call(f,k,q,a)&&(e[p++]=k)}return e},ja=O.reduce?function(a,b,c,f){f&&(b=g(b,f));return O.reduce.call(a,b,c)}:function(a,b,c,f){var d=c;Z(a,function(c,e){d=b.call(f,d,c,e,a)});return d},ua=O.some?function(a,b,c){return O.some.call(a,b,c)}:function(a,c,f){for(var d=a.length,e=b(a)?a.split(""):a,p=0;p<d;p++)if(p in e&&c.call(f,e[p],p,a))return!0;return!1},ga;a:{var ob=aa.navigator;if(ob){var pb=ob.userAgent;if(pb){ga=pb;break a}}ga=""}var Db=y("Opera")||y("OPR"),P=y("Trident")||
y("MSIE"),Oa=y("Gecko")&&-1==ga.toLowerCase().indexOf("webkit")&&!(y("Trident")||y("MSIE")),Eb=-1!=ga.toLowerCase().indexOf("webkit"),Qa=function(){var a="",b;if(Db&&aa.opera)return a=aa.opera.version,"function"==d(a)?a():a;Oa?b=/rv\:([^\);]+)(\)|;)/:P?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Eb&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(ga))?a[1]:"");return P&&(b=w(),b>parseFloat(a))?String(b):a}(),Pa={},qb=aa.document,pa=qb&&P?w()||("CSS1Compat"==qb.compatMode?parseInt(Qa,10):5):void 0,Y=P&&!(P&&9<=pa),Ra=
P&&!(P&&8<=pa),rb=RegExp("\\$?(?:(?![0-9-])[\\w-]+:)?(?![0-9-])[\\w-]+|\\/\\/|\\.\\.|::|\\d+(?:\\.\\d*)?|\\.\\d+|\"[^\"]*\"|'[^']*'|[!<>]=|\\s+|.","g"),sb=/^\s/;!Oa&&!P||P&&P&&9<=pa||Oa&&h("1.9.1");P&&h("9");l(la);la.prototype.a=function(a){return this.c.k(this.e,this.j,a)};la.prototype.toString=function(){var a="Binary Expression: "+this.c,a=a+K(this.e);return a+K(this.j)};bb.prototype.toString=a("a");var Ga={};Q("div",6,1,function(a,b,c){return M(a,c)/M(b,c)});Q("mod",6,1,function(a,b,c){return M(a,
c)%M(b,c)});Q("*",6,1,function(a,b,c){return M(a,c)*M(b,c)});Q("+",5,1,function(a,b,c){return M(a,c)+M(b,c)});Q("-",5,1,function(a,b,c){return M(a,c)-M(b,c)});Q("<",4,2,function(a,b,c){return ia(function(a,b){return a<b},a,b,c)});Q(">",4,2,function(a,b,c){return ia(function(a,b){return a>b},a,b,c)});Q("<=",4,2,function(a,b,c){return ia(function(a,b){return a<=b},a,b,c)});Q(">=",4,2,function(a,b,c){return ia(function(a,b){return a>=b},a,b,c)});var xb=Q("=",3,2,function(a,b,c){return ia(function(a,
b){return a==b},a,b,c,!0)});Q("!=",3,2,function(a,b,c){return ia(function(a,b){return a!=b},a,b,c,!0)});Q("and",2,2,function(a,b,c){return ha(a,c)&&ha(b,c)});Q("or",1,2,function(a,b,c){return ha(a,c)||ha(b,c)});l(sa);sa.prototype.a=function(a){a=this.c.a(a);return Ka(this.e,a)};sa.prototype.toString=function(){return"Filter:"+K(this.c)+K(this.e)};l(ta);ta.prototype.a=function(a){return this.e.k.apply(null,r(a,this.c))};ta.prototype.toString=function(){var a="Function: "+this.e;if(this.c.length)var b=
ja(this.c,function(a,b){return a+K(b)},"Arguments:"),a=a+K(b);return a};cb.prototype.toString=a("h");var Ha={};G("boolean",2,!1,!1,function(a,b){return ha(b,a)},1);G("ceiling",1,!1,!1,function(a,b){return Math.ceil(M(b,a))},1);G("concat",3,!1,!1,function(a,b){var c=v(arguments,1);return ja(c,function(b,c){return b+L(c,a)},"")},2,null);G("contains",2,!1,!1,function(a,b,c){b=L(b,a);a=L(c,a);return-1!=b.indexOf(a)},2);G("count",1,!1,!1,function(a,b){return b.a(a).i},1,1,!0);G("false",2,!1,!1,c(!1),0);
G("floor",1,!1,!1,function(a,b){return Math.floor(M(b,a))},1);G("id",4,!1,!1,function(a,b){function c(a){if(Y){var b=d.all[a];if(b){if(b.nodeType&&a==b.id)return b;if(b.length)return u(b,function(b){return a==b.id})}return null}return d.getElementById(a)}var f=a.a,d=9==f.nodeType?f:f.ownerDocument,f=L(b,a).split(/\s+/),e=[];Z(f,function(a){a=c(a);!a||0<=Cb(e,a)||e.push(a)});e.sort(Sa);var p=new D;Z(e,function(a){H(p,a)});return p},1);G("lang",2,!1,!1,c(!1),1);G("last",1,!0,!1,function(a){if(1!=arguments.length)throw Error("Function last expects ()");
return a.d},0);G("local-name",3,!1,!0,function(a,b){var c=b?qa(b.a(a)):a.a;return c?c.localName||c.nodeName.toLowerCase():""},0,1,!0);G("name",3,!1,!0,function(a,b){var c=b?qa(b.a(a)):a.a;return c?c.nodeName.toLowerCase():""},0,1,!0);G("namespace-uri",3,!0,!1,c(""),0,1,!0);G("normalize-space",3,!1,!0,function(a,b){return(b?L(b,a):W(a.a)).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},0,1);G("not",2,!1,!1,function(a,b){return!ha(b,a)},1);G("number",1,!1,!0,function(a,b){return b?M(b,a):+W(a.a)},
0,1);G("position",1,!0,!1,function(a){return a.b},0);G("round",1,!1,!1,function(a,b){return Math.round(M(b,a))},1);G("starts-with",2,!1,!1,function(a,b,c){b=L(b,a);a=L(c,a);return 0==b.lastIndexOf(a,0)},2);G("string",3,!1,!0,function(a,b){return b?L(b,a):W(a.a)},0,1);G("string-length",1,!1,!0,function(a,b){return(b?L(b,a):W(a.a)).length},0,1);G("substring",3,!1,!1,function(a,b,c,f){c=M(c,a);if(isNaN(c)||Infinity==c||-Infinity==c)return"";f=f?M(f,a):Infinity;if(isNaN(f)||-Infinity===f)return"";c=Math.round(c)-
1;var d=Math.max(c,0);a=L(b,a);if(Infinity==f)return a.substring(d);b=Math.round(f);return a.substring(d,c+b)},2,3);G("substring-after",3,!1,!1,function(a,b,c){b=L(b,a);a=L(c,a);c=b.indexOf(a);return-1==c?"":b.substring(c+a.length)},2);G("substring-before",3,!1,!1,function(a,b,c){b=L(b,a);a=L(c,a);a=b.indexOf(a);return-1==a?"":b.substring(0,a)},2);G("sum",1,!1,!1,function(a,b){for(var c=da(b.a(a)),f=0,d=J(c);d;d=J(c))f+=+W(d);return f},1,1,!0);G("translate",3,!1,!1,function(a,b,c,f){b=L(b,a);c=L(c,
a);var d=L(f,a);a=[];for(f=0;f<c.length;f++){var e=c.charAt(f);e in a||(a[e]=d.charAt(f))}c="";for(f=0;f<b.length;f++)e=b.charAt(f),c+=e in a?a[e]:e;return c},3);G("true",2,!1,!1,c(!0),0);X.prototype.a=function(a){return null===this.b||this.b==a.nodeType};X.prototype.d=a("e");X.prototype.toString=function(){var a="Kind Test: "+this.e;null===this.c||(a+=K(this.c));return a};l(va);va.prototype.a=a("c");va.prototype.toString=function(){return"Literal: "+this.c};fa.prototype.a=function(a){var b=a.nodeType;
return 1!=b&&2!=b?!1:"*"!=this.h&&this.h!=a.nodeName.toLowerCase()?!1:this.c==(a.namespaceURI?a.namespaceURI.toLowerCase():"http://www.w3.org/1999/xhtml")};fa.prototype.d=a("h");fa.prototype.toString=function(){return"Name Test: "+("http://www.w3.org/1999/xhtml"==this.c?"":this.c+":")+this.h};l(wa);wa.prototype.a=a("c");wa.prototype.toString=function(){return"Number: "+this.c};l(xa);l(ma);ma.prototype.a=function(a){var b=new D;a=a.a;9==a.nodeType?H(b,a):H(b,a.ownerDocument);return b};ma.prototype.toString=
c("Root Helper Expression");l(ya);ya.prototype.a=function(a){var b=new D;H(b,a.a);return b};ya.prototype.toString=c("Context Helper Expression");xa.prototype.a=function(a){var b=this.e.a(a);if(!(b instanceof D))throw Error("Filter expression must evaluate to nodeset.");a=this.c;for(var c=0,f=a.length;c<f&&b.i;c++){var d=a[c],e=da(b,d.c.a),p;if(d.f||d.c!=Fb)if(d.f||d.c!=Gb)for(p=J(e),b=d.a(new s(p));null!=(p=J(e));)p=d.a(new s(p)),b=Ea(b,p);else p=J(e),b=d.a(new s(p));else{for(p=J(e);(b=J(e))&&(!p.contains||
p.contains(b))&&b.compareDocumentPosition(p)&8;p=b);b=d.a(new s(p))}}return b};xa.prototype.toString=function(){var a;a="Path Expression:"+K(this.e);if(this.c.length){var b=ja(this.c,function(a,b){return a+K(b)},"Steps:");a+=K(b)}return a};za.prototype.toString=function(){return ja(this.a,function(a,b){return a+K(b)},"Predicates:")};l(ea);ea.prototype.a=function(a){var b=a.a,c=null,c=this.d,f=null,d=null,e=0;c&&(f=c.name,d=c.l?L(c.l,a):null,e=1);if(this.m)if(this.f||this.c!=lb)if(a=da((new ea(Hb,
new X("node"))).a(a)),b=J(a))for(c=this.k(b,f,d,e);null!=(b=J(a));)c=Ea(c,this.k(b,f,d,e));else c=new D;else c=ka(this.j,b,f,d),c=Ka(this.e,c,e);else c=this.k(a.a,f,d,e);return c};ea.prototype.k=function(a,b,c,f){a=this.c.d(this.j,a,b,c);return Ka(this.e,a,f)};ea.prototype.toString=function(){var a;a="Step:"+K("Operator: "+(this.m?"//":"/"));this.c.h&&(a+=K("Axis: "+this.c));a+=K(this.j);if(this.e.a.length){var b=ja(this.e.a,function(a,b){return a+K(b)},"Predicates:");a+=K(b)}return a};eb.prototype.toString=
a("h");var La={};R("ancestor",function(a,b){for(var c=new D,f=b;f=f.parentNode;)a.a(f)&&I(c,f);return c},!0);R("ancestor-or-self",function(a,b){var c=new D,f=b;do a.a(f)&&I(c,f);while(f=f.parentNode);return c},!0);var db=R("attribute",function(a,b){var c=new D,f=a.d();if("style"==f&&b.style&&Y)return H(c,new m(b.style,b,"style",b.style.cssText)),c;var d=b.attributes;if(d)if(a instanceof X&&null===a.b||"*"==f)for(var f=0,e;e=d[f];f++)Y?e.nodeValue&&H(c,n(b,e)):H(c,e);else(e=d.getNamedItem(f))&&(Y?
e.nodeValue&&H(c,n(b,e)):H(c,e));return c},!1),lb=R("child",function(a,c,f,d,e){return(Y?vb:Wa).call(null,a,c,b(f)?f:null,b(d)?d:null,e||new D)},!1,!0);R("descendant",ka,!1,!0);var Hb=R("descendant-or-self",function(a,b,c,f){var d=new D;ca(b,c,f)&&a.a(b)&&H(d,b);return ka(a,b,c,f,d)},!1,!0),Fb=R("following",function(a,b,c,f){var d=new D;do for(var e=b;e=e.nextSibling;)ca(e,c,f)&&a.a(e)&&H(d,e),d=ka(a,e,c,f,d);while(b=b.parentNode);return d},!1,!0);R("following-sibling",function(a,b){for(var c=new D,
f=b;f=f.nextSibling;)a.a(f)&&H(c,f);return c},!1);R("namespace",function(){return new D},!1);var Ab=R("parent",function(a,b){var c=new D;if(9==b.nodeType)return c;if(2==b.nodeType)return H(c,b.ownerElement),c;var f=b.parentNode;a.a(f)&&H(c,f);return c},!1),Gb=R("preceding",function(a,b,c,f){var d=new D,e=[];do e.unshift(b);while(b=b.parentNode);for(var p=1,g=e.length;p<g;p++){var q=[];for(b=e[p];b=b.previousSibling;)q.unshift(b);for(var k=0,l=q.length;k<l;k++)b=q[k],ca(b,c,f)&&a.a(b)&&H(d,b),d=ka(a,
b,c,f,d)}return d},!0,!0);R("preceding-sibling",function(a,b){for(var c=new D,f=b;f=f.previousSibling;)a.a(f)&&I(c,f);return c},!0);var zb=R("self",function(a,b){var c=new D;a.a(b)&&H(c,b);return c},!1);l(Aa);Aa.prototype.a=function(a){return-M(this.c,a)};Aa.prototype.toString=function(){return"Unary Expression: -"+K(this.c)};l(Ba);Ba.prototype.a=function(a){var b=new D;Z(this.c,function(c){c=c.a(a);if(!(c instanceof D))throw Error("Path expression must evaluate to NodeSet.");b=Ea(b,c)});return b};
Ba.prototype.toString=function(){return ja(this.c,function(a,b){return a+K(b)},"Union Expression:")};U.ANY_TYPE=0;U.NUMBER_TYPE=1;U.STRING_TYPE=2;U.BOOLEAN_TYPE=3;U.UNORDERED_NODE_ITERATOR_TYPE=4;U.ORDERED_NODE_ITERATOR_TYPE=5;U.UNORDERED_NODE_SNAPSHOT_TYPE=6;U.ORDERED_NODE_SNAPSHOT_TYPE=7;U.ANY_UNORDERED_NODE_TYPE=8;U.FIRST_ORDERED_NODE_TYPE=9;var na=["wgxpath","install"],$=aa;na[0]in $||!$.execScript||$.execScript("var "+na[0]);for(var oa;na.length&&(oa=na.shift());)na.length||void 0===nb?$[oa]?
$=$[oa]:$=$[oa]={}:$[oa]=nb})();(function(){var e={exports:{}};(function(a){function d(a){return Array.prototype.slice.call(a,0)}function b(a,b){var c=this;return function(){var f=d(arguments),e=this;setTimeout(function(){e[b].apply(c,f)},a)}}function f(){var a=this,b=function(){a._lastResult=d(arguments);t.call(a,u.FULFILLED);null!==a._handlers.done?a._handlers.done.apply(a,a._lastResult):s.call(a)};return{fulfill:b,resolve:b,reject:function(){a._lastResult=d(arguments);null!==a._handlers.fail?e.apply(a,
a._lastResult):(t.call(a,u.REJECTED),s.call(a))}}}function e(){var a=d(arguments);t.call(this,u.REJECTED);if(null!==this._handlers.fail)this._handlers.fail.apply(this,a);else if(null!==this._handlers.nextCommitment)e.apply(this._handlers.nextCommitment,a);else{if(1===a.length&&a[0]instanceof Error)throw a[0];throw Error("Count not chain to failure handler: "+JSON.stringify(a));}}function g(){this.then=function(){throw Error("Commitment is locked: unable to chain. This may be because either done() or fail() has been called.");
}}function k(a){var b=f.call(this);if(a===u.FULFILLED)null!==this._handlers.fulfillment?l.call(this,this._handlers.fulfillment,b,"resolve"):(t.call(this,u.FULFILLED),s.call(this));else if(a===u.REJECTED)null!==this._handlers.rejection?l.call(this,this._handlers.rejection,b,"reject"):null===this._handlers.rejection&&null!==this._handlers.fail?e.apply(this,this._lastResult):(t.call(this,u.REJECTED),s.call(this));else throw Error("Invalid commitment state: unable to run next commitment");}function l(a,
b,c){var f=this;setTimeout(function(){var d,g=!1;try{d=a.apply(b,f._lastResult)}catch(q){g=q}g?e.call(f,g):void 0!==d&&b[c].call(f,d)},1)}function s(a){a=a||this._lastResult;null!==this._handlers.nextCommitment&&(this._handlers.nextCommitment._lastResult=a,k.call(this._handlers.nextCommitment,this._state))}function t(a){if(this._state!==u.PENDING)throw Error("Cannot fulfill/reject: commitment not in pending state");this._state=a}var u={PENDING:100,FULFILLED:200,REJECTED:300},r=function(){this._state=
u.PENDING;this._handlers={fulfillment:null,rejection:null,done:null,fail:null,nextCommitment:null};this._type="then";this._lastResult=[];this._chainIndex=0};r.prototype.all=function(){var a=d(arguments),b=a.length;if(0>=b)throw Error("Must pass at least one function/commitment to all");for(var c=[],f=0;f<b;f+=1){var e=a[f];if(!0!==e instanceof r){var p=new r;p._handlers.fulfillment=e;e=p}c.push(e)}var a=new r,g=c.length,q=this;a._handlers.fulfillment=function(){for(var a=d(arguments),b=a.length,f=
0,e=!1,p=[],l=this,s=0,v=0;v<g;v+=1){var t=0<b?a[s]:[];"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);s+=1;s>=b&&(s=0);c[v]._lastResult=t;k.call(c[v],q._state);var u=function(){f===g&&(!0===e?l.reject():l.resolve.apply(l,p))};c[v].then(function(){f+=1;p.push(d(arguments));u()},function(){f+=1;e=!0;u()})}};a._type="all";return this.then(a)};r.prototype.delay=function(a){var c=new r;c._handlers.fulfillment=b.call(c,a,"resolve");c._handlers.rejection=b.call(c,a,"reject");return this.then(c)};
r.prototype.done=function(a){if(null!==this._handlers.nextCommitment)throw Error("Cannot add done handler: not at the end of the chain");if(null!==this._handlers.done)throw Error("Cannot add done handler: one is already specified");this._handlers.done=a;g.call(this);return this};r.prototype.fail=function(a){if(null!==this._handlers.nextCommitment)throw Error("Cannot add fail handler: not at the end of the chain");if(null!==this._handlers.fail)throw Error("Cannot add fail handler: one is already specified");
this._handlers.fail=a;g.call(this);return this};r.prototype.isPending=function(){return this._state==u.PENDING};r.prototype.then=function(){var a=d(arguments),b=a.length;if(null!==this._handlers.nextCommitment)throw Error("Cannot add commitment: not at the end of the chain");if(null!==this._handlers.done||null!==this._handlers.fail)throw Error("Cannot add commitment: done/fail handlers already set (end of chain)");var c=new r;if(1===b&&a[0]instanceof r)c=a[0];else if(1===b&&"function"===typeof a[0]){if("function"!==
typeof a[0])throw Error("Fulfillment handler must be a function");c._handlers.fulfillment=a[0]}else if(2===b){if("function"!==typeof a[1])throw Error("Both handlers must be functions");c._handlers.fulfillment=a[0];c._handlers.rejection=a[1]}c._chainIndex=this._chainIndex+1;this._handlers.nextCommitment=c;this.isPending()||s.call(this);return this._handlers.nextCommitment};a.JSCommitment={};a.JSCommitment.classes={JSCommitment:r};a.JSCommitment.startWith=function(){var a=d(arguments),b=new r;b._lastResult=
a;k.call(b,u.FULFILLED);return b};a.JSCommitment.then=function(){var a=d(arguments),b=a.length,c=new r;0<b&&(c=c.then.apply(c,a));k.call(c,u.FULFILLED);return c}})("object"===typeof e&&e.exports?e.exports:window);a.External=e.exports})();a.Commitment=a.External.JSCommitment;(function(){a.Status=function(){if(!this instanceof a.Status)return new a.Status;this._selectorsBin=[];this._selectors={};this._statuses={};return this};a.Status.prototype.addSelection=function(a,c){if("[object Array]"!==Object.prototype.toString.call(a))throw new TypeError("Expected array");
var d=a.length;if(0>=d)throw Error("Empty options array");c||(c=a[0]);if(0>a.indexOf(c))throw Error("Default not in options array");for(var b=0;b<d;b+=1)if(this.statusExists(a[b]))throw Error("Cannot register status '"+a[b]+"' - already exists");for(var b=this._selectorsBin.push(a)-1,f=0;f<d;f+=1)if(!0!==this.registerStatus(a[f],b))throw Error("Failed registering status: '"+a[f]+"'");this.set(c)};a.Status.prototype.is=function(a){var c=arguments.length;if(0<c){for(var d=0;d<c;d+=1)if(!this.statusSet(arguments[d]))return!1;
return!0}return!1};a.Status.prototype.isNot=function(a){var c=arguments.length;if(0<c){for(var d=0;d<c;d+=1)if(this.statusSet(arguments[d]))return!1;return!0}return!1};a.Status.prototype.isSelector=function(a){return this.statusExists(a)&&-1<this._selectors[a]};a.Status.prototype.registerStatus=function(a,c){if(null===c||void 0===c)c=-1;return"string"!==typeof a||this._selectors.hasOwnProperty(a)?!1:(this._selectors[a]=c,!0)};a.Status.prototype.set=function(a){var c=arguments.length;if(0<c)for(var d=
0;d<c;d+=1)this.setStatus(arguments[d])};a.Status.prototype.setStatus=function(a){if(this.statusExists(a)){if(this.isSelector(a)){var c=this._selectorsBin[this._selectors[a]].slice(0);c.splice(c.indexOf(a),1);for(var d=c.length,b=0;b<d;b+=1)if(this._statuses.hasOwnProperty(c[b])&&(delete this._statuses[c[b]],this._statuses[c[b]]))throw Error("Failed disabling status: '"+c[b]+"'");}}else this.registerStatus(a);this._statuses[a]=!0};a.Status.prototype.statusExists=function(a){return this._selectors.hasOwnProperty(a)};
a.Status.prototype.statusSet=function(a){return this.statusExists(a)&&this._statuses[a]};a.Status.prototype.unset=function(a){var c=arguments.length;if(0<c){for(var d=!0,b=0;b<c;b+=1)!0!==this.unsetStatus(arguments[b])&&(d=!1);return d}return!1};a.Status.prototype.unsetStatus=function(a){if(this.statusExists(a)){if(this.isSelector(a))throw Error("Cannot unset optioned status: '"+a+"'");delete this._statuses[a];if(this._statuses[a])throw Error("Failed disabling status: '"+a+"'");return!0}return!1}})();
var g=a.tools=a.tools||{};a.tools.compatibility=a.tools.compatibility||function(){window.wgxpath?window.wgxpath.install():console.log("(Kiosked) Unable to install wgxPath!");(function(){for(var a=0,c=["webkit","moz"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=
function(b,c){var d=(new Date).getTime(),g=Math.max(0,16-(d-a)),k=window.setTimeout(function(){b(d+g)},g);a=d+g;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();return{bindFunction:function(a,c){if("function"!==typeof a)throw new TypeError("bindFunction - what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,2),b=function(){},f=function(){return a.apply(this instanceof b&&c?this:c,d.concat(Array.prototype.slice.call(arguments)))};
b.prototype=a.prototype;f.prototype=new b;return f},checkDocumentQuerySelectorAll:function(){if(0>document.querySelectorAll.toString().indexOf("[native code]"))throw new a.Exceptions.NotSupportedException("Non-native document.querySelectorAll method detected, unable to perform any DOM-querying.");},enforcePrototypeMinimumVersion:function(e,c){var d=g.compatibility.getPrototypeVersion();if(d){var b=d.split("."),f=parseInt(b[0],10),b=parseInt(b[1],10);if(f>=e&&b>=c)g.debug.log("/Compatibility/","Prototype detected: "+
d);else throw new a.Exceptions.NotSupportedException("Prototype "+d+" detected. Versions below 1.7 are not supported.");}},getPrototypeVersion:function(){return window.Prototype&&window.Prototype.Version?window.Prototype.Version:!1}}}();a.tools.debug=a.tools.debug||function(){function a(c,b){if((!g.environment||"production"!==g.environment.getContext())&&window.console&&window.console[c]){try{console[c].apply(console,b)}catch(f){console[c](b.join(" "))}return!0}return!1}function c(a,b){return g.formatting&&
g.formatting.zeroPad?g.formatting.zeroPad(a,b):a}return{error:function(){var c=g.debug.getLogPrefix();if(0<arguments.length){var b=Array.prototype.slice.call(arguments,0);b.unshift(c);return a.call(this,"error",b)}return!1},getLogPrefix:function(){var a=new Date;return"[Kiosked] ("+a.getFullYear()+"-"+c(a.getMonth()+1,2)+"-"+c(a.getDate(),2)+" "+c(a.getHours(),2)+":"+c(a.getMinutes(),2)+":"+c(a.getSeconds(),2)+")"},log:function(){var c=g.debug.getLogPrefix();if(0<arguments.length){var b=Array.prototype.slice.call(arguments,
0);b.unshift(c);return a.call(this,"log",b)}return!1},warn:function(){var c=g.debug.getLogPrefix();if(0<arguments.length){var b=Array.prototype.slice.call(arguments,0);b.unshift(c);return a.call(this,"warn",b)}return!1}}}();a.tools.encoding=a.tools.encoding||function(){return{base64_decode:function(e){var c="",d,b,f,p,g,k=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<e.length;)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(k)),k+=1,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(k)),
k+=1,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(k)),k+=1,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(k)),k+=1,d=d<<2|b>>4,b=(b&15)<<4|p>>2,f=(p&3)<<6|g,c+=String.fromCharCode(d),64!==p&&(c+=String.fromCharCode(b)),64!==g&&(c+=String.fromCharCode(f));return c=a.tools.encoding.utf8_decode(c)},base64_encode:function(e){var c="",d,b,f,p,g,k,l=0;for(e=a.tools.encoding.utf8_encode(e);l<e.length;)d=e.charCodeAt(l),l+=
1,b=e.charCodeAt(l),l+=1,f=e.charCodeAt(l),l+=1,p=d>>2,d=(d&3)<<4|b>>4,g=(b&15)<<2|f>>6,k=f&63,isNaN(b)?g=k=64:isNaN(f)&&(k=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k);return c},formURLStringFromParameters:function(a,c){c=c||
[];if("object"===typeof a){var d="",b=function(b,f,d){0<d.length&&(d+="&");f=a[b];0<=c.indexOf("ENCODE_KEY")&&(b=encodeURIComponent(b));0<=c.indexOf("ENCODE_VALUE")&&(f=encodeURIComponent(f));return d+(b+"="+f)};if(0<=c.indexOf("ALPHABETIZE")){var f=[],p;for(p in a)a.hasOwnProperty(p)&&f.push(p);f.sort();p=f.length;if(0<p)for(var g=0;g<p;g+=1)var k=f[g],d=b(k,a[k],d)}else for(f in a)a.hasOwnProperty(f)&&(d=b(f,a[f],d));return d}return""},utf8_decode:function(a){for(var c="",d=0,b=0,f=0,p=0;d<a.length;)b=
a.charCodeAt(d),128>b?(c+=String.fromCharCode(b),d+=1):191<b&&224>b?(f=a.charCodeAt(d+1),c+=String.fromCharCode((b&31)<<6|f&63),d+=2):(f=a.charCodeAt(d+1),p=a.charCodeAt(d+2),c+=String.fromCharCode((b&15)<<12|(f&63)<<6|p&63),d+=3);return c},utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var c="",d=0;d<a.length;d+=1){var b=a.charCodeAt(d);128>b?c+=String.fromCharCode(b):(127<b&&2048>b?c+=String.fromCharCode(b>>6|192):(c+=String.fromCharCode(b>>12|224),c+=String.fromCharCode(b>>6&63|128)),c+=
String.fromCharCode(b&63|128))}return c}}}();a.tools.decorators=a.tools.decorators||function(){return{decorateWithMeta:function(e){if("object"!==typeof e)throw new a.Exceptions.InvalidTypeException("object",typeof e,e);e._metaStore={};e.getMeta=function(a,d){return this._metaStore.hasOwnProperty(a)?this._metaStore[a]:d};e.setMeta=function(a,d){this._metaStore[a]=d}},decorateWithStatus:function(e,c){if("object"!==typeof e)throw new a.Exceptions.InvalidTypeException("object",typeof e,e);if(!c instanceof
a.Status)throw new a.Exceptions.InvalidTypeException("ITGS.Status",typeof c,c);e.is=function(){return c.is.apply(c,arguments)};e.isNot=function(){return c.isNot.apply(c,arguments)};e.has=e.is;e.hasNot=e.isNot;e.set=function(){c.set.apply(c,arguments)};e.unset=function(){return c.unset.apply(c,arguments)};e.addStatus=function(a){return c.registerStatus(a)};e.addStatusSet=function(){c.addSelection.apply(c,arguments)}}}}();a.tools.environment=a.tools.environment||function(){var e=null,c="",d="",b="",
f=0;return{generateEventHash:function(b,c){f+=1;var d=a.tools.hashing.md5(""+b+c),e=a.tools.hashing.md5(""+f+a.tools.getRandomInt(1,999999)+Date.now()+a.tools.environment.getIPAddress());return d+e},generatePageEventHash:function(){0>=b.length&&(b=a.tools.hashing.md5(a.tools.environment.getPageUrl()+a.tools.environment.getIPAddress())+a.tools.hashing.md5(""+a.tools.getRandomInt(1,999999)+Date.now()));return b},getAnalyticsConsumerData:function(){return{distinct_id:"",ip_address:g.environment.getIPAddress(),
run_id:a.tools.environment.generatePageEventHash(),user_agent:g.environment.getUserAgent()}},getAnalyticsPageData:function(b){var c=[],f=[],d=h.length,e=0;if(0<d)for(var t=0;t<d;t+=1){var u=h[t];u.hasPluginOfType(a.Plugins.BannerSlotAbstract)&&(e+=1);c.push(u.getContentOwnerId());f.push(u.getAlbumId())}c=1===c.length?c[0]:0>=c.length?"":c[0];f=1===f.length?f[0]:0>=f.length?"":f[0];if(b){if(!c||0>=c.length)c=b.getContentOwnerId();if(!f||0>=f.length)f=b.getAlbumId()}b=g.environment.getContainerTypesCount();
d=g.environment.getPageUrl();t=a.SnifferUtilities.processPageURL(d);u={};if(0<h.length){var r=h[0].getOptions();r.categories&&(r=g.matching.getMostRelevantCategory(r.categories,"iabtier1"))&&(u=r)}return g.mergeDefaults({"page.uri":t,"page.original_uri":d,"page.publisher_id":c,"page.album_id":f,"page.containers":e,environment:g.environment.getContext(),"library.version":a.Config.VERSION,"page.container_types.total":b.all,"page.container_types.in-content":b.bannerSlot,"page.container_types.in-line":b.externalBannerSlot,
"page.container_types.in-screen":b.floorBannerSlot,"page.category":u,"page.meta.keywords":a.tools.dom.getMetaKeywords()},g.environment.getAnalyticsConsumerData())},getContainerTypesCount:function(){var b,c=h.length;b={all:0,bannerSlot:0,externalBannerSlot:0,floorBannerSlot:0};if(0<c)try{for(var f=0;f<c;f+=1)b.all+=h[f].hasPluginOfType(a.Plugins.BannerSlotAbstract),b.bannerSlot+=h[f].hasPluginOfType(a.Plugins.BannerSlot),b.externalBannerSlot+=h[f].hasPluginOfType(a.Plugins.ExternalBannerSlot),b.floorBannerSlot+=
h[f].hasPluginOfType(a.Plugins.FloorBannerSlot)}catch(d){console.warn("Kiosked: (Analytics) Failed counting container types",d)}return b},getContext:function(){return e},getDomainName:function(){return d},getImageFullURL:function(a){var b=document.createElement("div"),c;try{c=a.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")}catch(f){c=a}b.innerHTML='<a href="'+c+'">x</a>';return b.firstChild.href},getIPAddress:function(){return c},getMediaContainerIndex:function(b){return b instanceof
a.Media?h.indexOf(b):!1},getPageDomain:function(){return 0<window.location.hostname.length?window.location.hostname:window.location.host},getPageUrl:function(){return document.URL+""},getUserAgent:function(){return navigator.userAgent},setContext:function(a){e=a+""},setDomainName:function(a){d=a+""},setIPAddress:function(a){c=a+""}}}();a.tools.dom=a.tools.dom||function(){var e="";return{addEvent:function(a,d,b){return a instanceof HTMLElement?a.attachEvent?a.attachEvent("on"+d,b):a.addEventListener(d,
b,!1):!1},clamp:function(a,d){var b,f,e,g,k,l,s,t,u,r;b=document.createElement("span");(function(a){a.position="absolute";a.whiteSpace="pre";a.visibility="hidden"})(b.style);if(a.ownerDocument&&a.ownerDocument===document){r=a.getAttribute("style");g=l=0;k=1;u=!0;e=a.clientWidth;for(f=(a.textContent||a.innerText).replace(/\n/g," ");null!==a.firstChild;)a.removeChild(a.firstChild);a.appendChild(b);var v=function(a){a.display="block";a.overflow="hidden";a.textOverflow="ellipsis";a.whiteSpace="nowrap";
a.width="100%";a.height="auto";a.margin="auto";a.padding="auto"};f.replace(/ /g,function(y,w){k!==d&&(b.appendChild(document.createTextNode(f.substr(g,w-g))),e<b.clientWidth?(u?(t=f.substr(g,w+1-g),g=w+1):(t=f.substr(g,l-g),g=l),s=document.createElement("span"),s.setAttribute("style",r),s.appendChild(document.createTextNode(t)),v(s.style),a.appendChild(s),u=!0,k+=1):u=!1,l=w+1,b.removeChild(b.firstChild))});a.removeChild(b);s=document.createElement("span");s.setAttribute("style",r);v(s.style);s.appendChild(document.createTextNode(f.substr(g)));
a.appendChild(s)}},destroy:function(a){if(a instanceof HTMLElement){var d=a.parentNode;d&&d.removeChild(a)}},DOMIsReady:function(){return!/in/.test(document.readyState)},getBorderSizing:function(a){var d=document.defaultView.getComputedStyle(a,"");a=parseInt(d.borderLeftWidth,10);var b=parseInt(d.borderRightWidth,10),f=parseInt(d.borderTopWidth,10),e=parseInt(d.borderBottomWidth,10),g=parseInt(d.paddingLeft,10),k=parseInt(d.paddingRight,10),l=parseInt(d.paddingTop,10),s=parseInt(d.paddingBottom,10),
t=parseInt(d.marginLeft,10),u=parseInt(d.marginRight,10),r=parseInt(d.marginTop,10),d=parseInt(d.marginBottom,10);return{border:{left:a,right:b,top:f,bottom:e},margin:{left:t,right:u,top:r,bottom:d},padding:{left:g,right:k,top:l,bottom:s}}},getFirstImage:function(a,d){g.array.isArray(d)&&2===d.length||(d=[0,0]);var b=d[0],f=d[1];if(a instanceof HTMLImageElement&&a.clientWidth>=b&&a.clientHeight>=f)return a;var e=a.getElementsByTagName("img"),q=e.length;if(0<q)for(var k=0;k<q;k+=1){var l=e[k];if(l.clientWidth>=
b&&l.clientHeight>=f)return e[k]}return null},getImageSource:function(a){if(a instanceof HTMLImageElement){if(a.src)return a.src;if(a.srcset)return a.srcset}return""},getMetaKeywords:function(){if(0<e.length)return e;var c=a.tools.dom.query("meta[name=keywords]"),d=a.Config.META_MAX_KEYWORDS;if(0<c.length){for(var c=c[0].getAttribute("content")||"",c=c.split(",",d),d=c.length,b=0;b<d;b+=1)c[b]=a.tools.trim(c[b]);e=c.join(",")}return e},getPlainText:function(a,d){d=d||["script","style"];var b=a.cloneNode(!0);
b.innerHTML=b.innerHTML.replace(/<br>/g,"\n");return g.trim(function p(a){var b="";if(a.tagName&&0<=d.indexOf(a.tagName.toLowerCase()))return b;a.nodeType&&3===a.nodeType&&(b+=a.nodeValue.replace(/\t/g," ").replace(/\n/g," ").replace(/[ ]{2,}/g," "));if(a.childNodes){var c=a.childNodes.length;if(0<c)for(var e=0;e<c;e+=1)b+=p(a.childNodes[e])}return b}(b))},getWindow:function(c){a.windowObj=a.windowObj?a.windowObj:g.dom.isWindow(c)?c:!1;if(!1===a.windowObj)if(c=Object.getPrototypeOf(c)===document.constructor.prototype?
c:c.ownerDocument)a.windowObj=c.defaultView||c.parentWindow;else return!1;return a.windowObj},imageHasLoaded:function(a){if(!(a instanceof HTMLImageElement))throw Error("Expected image type");return!a.complete||"undefined"!==typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},isDescendant:function(a,d){for(var b=d.parentNode;null!==b;){if(b===a)return!0;b=b.parentNode}return!1},isElement:function(a){return"object"===typeof HTMLElement||"function"===typeof HTMLElement?a instanceof HTMLElement:a&&"object"===
typeof a&&null!==a&&1===a.nodeType&&"string"===typeof a.nodeName},isElementInDocument:function(a){for(;a!==document&&a.parentNode;)a=a.parentNode;return a===document},isVideoElement:function(a){var d=!1;window.HTMLVideoElement&&(d=a instanceof window.HTMLVideoElement);d||(d=a.tagName?"video"===a.tagName.toLowerCase():!1);return d},isWindow:function(a){a=Object.prototype.toString.call(a);return"[object global]"===a||"[object Window]"===a||"[object DOMWindow]"===a},mouseIsOutside:function(a,d){for(var b=
a.relatedTarget||a.toElement||a.fromElement;b&&b!==d;)b=b.parentNode;return b!==d},nodeIdentifier:function(a){var d={getElement:function(){return a},isHTMLElement:function(){return a instanceof HTMLElement},isIFrame:function(){return a instanceof HTMLIFrameElement},isImage:function(){return a instanceof HTMLImageElement},isVideo:function(){return g.dom.isVideoElement(a)},isYoutubeContainer:function(){return d.isIFrame()&&(-1<a.src.indexOf("youtube.com")||-1<a.src.indexOf("youtu.be"))?!0:!1},nextElementOfType:function(b){var f;
for(f=a;f=f.nextSibling;)if(f instanceof b)return f;return null},previousElementOfType:function(b){var f;for(f=a;f=f.previousSibling;)if(f instanceof b)return f;return null}};return d},onDOMReady:function(c){var d,b=function(){return a.tools.dom.DOMIsReady()?(clearInterval(d),c(),!0):!1};b()||(d=setInterval(b,100))},xPath:{forEachElement:function(a,d,b){b=b||document;d=d||function(a){};for(a=document.evaluate(a,b,null,XPathResult.ANY_TYPE,null);b=a.iterateNext();)d(b)},getElement:function(a,d){d=
d||document;var b=document.evaluate(a,d,null,XPathResult.ANY_TYPE,null).iterateNext();return b?b:null},getElements:function(a,d){var b=[];d=d||document;for(var f=document.evaluate(a,d,null,XPathResult.ANY_TYPE,null),e;e=f.iterateNext();)b.push(e);return b}}}}();a.tools.matching=a.tools.matching||function(){return{getMostRelevantCategory:function(e,c){var d=!1;if(e&&g.isString(c)){if(e.hasOwnProperty(c)){var b=e[c],f=b.length,p=0;if(0<f)for(var q=0;q<f;q+=1){var k=b[q];k.relevance&&k.relevance>p&&
(d=k,p=k.relevance)}}}else{if(e)throw new a.Exceptions.InvalidTypeException("String",typeof c,this);throw new a.Exceptions.BadOptionException("Expected categories to be set",this,e);}return d}}}();a.tools.communication=a.tools.communication||function(){var e=a.tools.isBrowser.internetExplorer9();return{getAjaxAppliance:function(){var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"];if(e)return new window.XDomainRequest;if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)for(var d=0;d<
a.length;d+=1)try{return new window.ActiveXObject(a[d])}catch(b){}return!1},sendRequest:function(c){c=c||{};var d="POST";if(!c.hasOwnProperty("destination"))throw new a.Exceptions.InvalidPropertiesException("(Kiosked) No 'destination' specified for Ajax request",this,c);if(c.method)if(0<=["POST","GET"].indexOf(c.method.toUpperCase()))d=c.method.toUpperCase();else throw new a.Exceptions.NotSupportedException("Unsupported request method: '"+c.method+"'",c);else g.debug.log("/Communication/","No request method specified, using default:",
d);c.hasOwnProperty("data")&&"GET"!==d||(c.data=null);c.data&&("object"===typeof c.data||g.array.isArray(c.data))&&(c.data=g.encoding.formURLStringFromParameters(c.data,["ENCODE_VALUE"]));var b=c.hasOwnProperty("appliance")?c.appliance:g.communication.getAjaxAppliance();if(!1===b||!g.isset(b))throw new a.Exceptions.NotSupportedException("Failed finding ajax appliance",this);b.onreadystatechange=function(){if(4===b.readyState)if(200===b.status)c.callback&&c.callback(b.responseText);else if(c.errorCallback)c.errorCallback();
else throw Error("(Kiosked) Failed making Ajax request");};e&&(b.onprogress=function(){},b.onload=function(){c.callback&&c.callback(b.responseText)},b.onerror=b.ontimeout=function(){if(c.errorCallback)c.errorCallback();else throw Error("(Kiosked) Failed making Ajax request");});b.open(d,c.destination,!0);b.withCredentials=!0;e||b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");b.send(c.data)}}}();a.tools.scope=a.tools.scope||function(){return{enforceCaller:function(e,c,d){d=d&&
0<d.length?d:"Invalid caller - unexpected context";if(!(e instanceof c))throw new a.Exceptions.IllegalInvocationException(d,this);},hasOwnProperties:function(e,c,d){var b=!1;"string"===typeof c&&(c=[c]);d=d||function(a,b){return a.hasOwnProperty(b)};if("object"===typeof e&&a.tools.array.isArray(c))for(var b=!0,f=0;f<c.length;f+=1)if(!d(e,c[f])){b=!1;break}return b}}}();a.tools.formatting=a.tools.formatting||function(){return{zeroPad:function(a,c){var d=a.toString(),b=d.split("."),f="";1<b.length&&
(f=b[1],d=b[0]);b=c-d.length+1;return Array(+(0<b&&b)).join("0")+d+(0<f.length?"."+f:"")}}}();(function(a){var c={};(function(a,c,d,e,g){function l(a,b){return l.search(a,b)}function s(a,b){if(I[b]){var c="function"==typeof I[b]?I[b](a):a[I[b]];"class"!=b||c||(c=null);return c}return a.getAttribute(b)}function t(a,b){for(var c=0,f=b.length;c<f;++c)if(0>x(a,b[c]))return!1;return!0}function u(a,b,c){c=[c];for(var f=!0,d,e=0,p=a.length;e<p;++e)if(d=b[a[e].name])f=f&&d.apply(b,c.concat(a[e].args));else return"Unknown function "+
a[e].name;return f}function r(a){return function(b,c){return F(b,function(b){return a(b,c)})}}function v(a,b){return function(c,f,d){c=s(c,f);return(b?!0:null!=c)&&a(c,d)}}function y(a){a=a.parentNode.children||[];ba.childrenHasComments&&(a=F(a,function(a){return 1==a.nodeType}));return a}function w(a,b){return function(c){return n[a](c,{value:b})}}var h=a.Jaguar,m,n,B=[].slice,A=[].indexOf,z=[].filter,E={}.hasOwnProperty,ba=function(a){var b={},c=a.createElement("a");c.name="test";(a.firstChild||
a).appendChild(c);b.brokenId=!!a.getElementById("test");c.innerHTML="\x3c!-- Three guys walk into a bar. *DONK* --\x3e";b.childrenHasComments=!(!c.children||!c.children.length);return b}(c.implementation.createDocument?c.implementation.createDocument(null,"html",null):new ActiveXObject("Microsoft.XMLDOM")),x=A?function(a,b){return A.call(a,b)}:function(a,b){for(var c=0,f=a.length;c<f;++c)if(a[c]===b)return c;return-1},F=z?function(a,b){return z.call(Array.prototype.slice.call(a),b)}:function(a,b){for(var c=
0,f=a.length,d=Array(f);c<f;++c)d[c]=func(a[c]);return d},I=l.fixAttributes={"class":"className","for":"htmlFor",html:"innerHTML",style:function(a){return a.style.cssText},text:function(a){return a.textContent||a.innerText||""}};l.features=ba;l.filter=F;l.indexOf=x;l.getAttribute=s;l.cache=[];l.cacheSize=50;l.tokenize=function(a){function b(a){return a&&("/"<a&&":">a||"@"<a&&"[">a||"`"<a&&"{">a||"-"==a||"_"==a)}function c(a,b){return{type:a,value:b}}a=a.split("");for(var f=a[0],d=0,e,p,g,q={"(":1,
")":1,"[":1,"]":1},k={'"':1,"'":1},l=[];f;){if(k[f]){e="";for(p=f;;){f=a[++d];if(f==p)break;else if(!f)return[];e+=f}l.push(c("ident",e))}else if(" "==f)e=a[d-1],p=a[d+1],(b(e)||k[e]||"*"==e||q[e])&&(b(p)||k[p]||"*"==p||q[p]||" "!=a[d+2])&&l.push(c("op",f));else if("*"==f)"="==a[++d]?l.push(c("op","*=")):(l.push(c("ident",f)),--d);else if(q[f])l.push(c("op",f));else{e="";for(p=b(f);f&&" "!=f&&!k[f]&&(p&&b(f)||!p&&!b(f))&&!q[f];)e+=f,"="==f&&(l.push(c("op",e)),e="",g=!0),f=a[++d];--d;e&&l.push(c(g||
p?"ident":"op",e));g=!1}f=a[++d]}return l};l.parse=function(a){if("string"==typeof a&&l.cache[a])return l.cache[a];for(var b=l.tokenize(a),c=[[]],f,d={classes:[],attrs:[],pseudos:[]},e,p=0,q,s=b.length;p<s;++p)if(f=b[p].value,"op"==b[p].type)if(","==f)c[c.length-1].push(d),c.push([]),d={classes:[],attrs:[],pseudos:[]};else if("#"==f)d.id=b[++p]?b[p].value:"";else if("."==f)d.classes.push(b[++p]?b[p].value:"");else if("["==f){f=b[p+2]&&"]"!=b[p+2].value;if(!b[p+2]||f&&(!b[p+4]||"]"!=b[p+4].value))return[];
d.attrs.push({name:f?b[p+2].value:"",args:[b[++p].value,f?b[p+=2].value:g]});++p}else if(":"==f){if(!b[p+1])return[];f=b[p+2]&&"("==b[p+2].value;q=p+1;if(f)for(q+=2,e=1;q<s&&("("==b[q].value&&"op"==b[q].type&&++e,")"!=b[q].value||--e||"op"!=b[q].type);++q);d.pseudos.push({name:b[++p].value,args:f?b.slice(p+2,q):[]});p=q}else d.tag||(d.tag="*"),c[c.length-1].push(d),d={classes:[],attrs:[],pseudos:[],tag:"*",combinator:f};else d.tag=f.toUpperCase();c[c.length-1].push(d);l.cache.push(a);l.cache[a]=c;
l.cache.length>l.cacheSize&&(l.cache[l.cache.shift()]=g);return c};l.search=function(a,b){b=b||c;if(!a||"string"!=typeof a||1!=b.nodeType&&9!=b.nodeType)return[];var d=l.parse(a),e=0,p=d.length,g=0,q=[],k=[],s,t=[],v;if(!p)return[];for(;e<p;++e)q.push(l.evaluateSearch(d[e],b));e=0;for(p=q.length;e<p;++e)for(v=0,d=q[e].length;v<d;)k[g++]=q[e][v++];if(1<p&&(k.sort(function(a,b){return a==b?(s=!0,0):a.compareDocumentPosition?a.compareDocumentPosition(b)&2?1:-1:a.sourceIndex-b.sourceIndex}),s)){e=0;for(p=
k.length;e<p;++e)k[e]!=k[e-1]&&t.push(k[e]);k=t}return k};l.evaluateSearch=function(a,b){function c(a,d){f.length||p||(f=b.getElementsByTagName("*"));f=F(f,function(b){b=u(a,d,b);"string"==typeof b&&(g=b);return b})}var f=[],d,e=a[a.length-1],p,g,q=0,k;if(e.id){if(b.getElementById&&!ba.brokenId)d=b.getElementById(e.id);else for(f=b.getElementsByTagName(e.tag||"*"),k=f.length;q<k;++q)if(f[q].id==e.id){d=f[q];break}f=d?[d]:[];p=!0}if(e.classes.length)if(p&&!t(d.className.split(" "),e.classes))f=[];
else if(!p){if(b.getElementsByClassName)f=b.getElementsByClassName(e.classes.join(" "));else for(d=b.getElementsByTagName(e.tag||"*"),q=0,k=d.length;q<k;++q)t(d[q].className.split(" "),e.classes)&&f.push(d[q]);p=!0}e.tag&&(p?"*"!=e.tag&&(f=F(f,function(a){return a.nodeName.toUpperCase()==e.tag})):f=b.getElementsByTagName(e.tag));e.attrs.length&&c(e.attrs,l.attrs);e.pseudos.length&&f.length&&c(e.pseudos,l.pseudos);e.combinator&&(l.combinators[e.combinator]?f=l.combinators[e.combinator](f,a.slice(0,
-1)):g="Unknown combinator "+e.combinator);if(g)throw Error(g);return f};l.match=function(a,b){if(!a||1!=a.nodeType||"string"!=typeof b)return!1;for(var c=l.parse(b),f=!1,d=0,e=c.length;d<e;++d)f=f||l.evaluateMatch(c[d],a);return f};l.evaluateMatch=function(a,b){if(9==b.nodeType)return!1;var c=a[a.length-1],f=!0;c.id&&(f=b.id==c.id);c.classes.length&&(f=f&&t(b.className.split(" "),c.classes));c.tag&&(f=f&&("*"==c.tag?!0:b.nodeName.toUpperCase()==c.tag));c.attrs.length&&(f=f&&u(c.attrs,l.attrs,b));
c.pseudos.length&&(f=f&&u(c.pseudos,l.pseudos,b));c.combinator&&(f=l.matchCombinators[c.combinator]?f&&l.matchCombinators[c.combinator](b,a.slice(0,a.length-1)):!1);return f};l.matchCombinators={" ":function(a,b){for(;a=a.parentNode;)if(l.evaluateMatch(b,a))return!0;return!1},">":function(a,b){return l.evaluateMatch(b,a.parentNode)},"~":function(a,b){for(;a=a.previousSibling;)if(1==a.nodeType&&l.evaluateMatch(b,a))return!0;return!1},"+":function(a,b){for(;a=a.previousSibling;)if(1==a.nodeType)return l.evaluateMatch(b,
a);return!1}};l.combinators={};for(m in l.matchCombinators)E.call(l.matchCombinators,m)&&(l.combinators[m]=r(l.matchCombinators[m]));l.attrs={"":v(function(a){return null!=a},!0),"=":v(function(a,b){return a===b},!0),"!=":v(function(a,b){return a!==b},!0),"^=":v(function(a,b){return!a.indexOf(b)}),"$=":v(function(a,b){return a.lastIndexOf(b)==a.length-b.length}),"*=":v(function(a,b){return-1<a.indexOf(b)}),"|=":v(function(a,b){return a===b||!a.indexOf(b+"-")}),"~=":v(function(a,b){return-1<x(a.split(" "),
b)})};l.nthCache=[];l.nthCacheSize=100;l.pseudos=n={has:function(a){for(var b="",c=arguments,f=1,d=c.length;f<d;++f)b+=c[f].value;return!!l.search(b,a).length},contains:function(a,b){return-1<s(a,"text").indexOf(b.value)},not:function(a){for(var b="",c=arguments,f=1,d=c.length;f<d;++f)b+=c[f].value;return!l.match(a,b)},root:function(a){return 9==a.parentNode.nodeType},empty:function(a){return!a.firstChild},"first-child":w("nth-child","1"),"last-child":w("nth-child","-1"),"only-child":function(a){var b=
y(a);return 1==b.length&&b[0]==a},"first-of-type":w("nth-of-type","1"),"last-of-type":w("nth-of-type","-1"),"only-of-type":function(a){var b=a.nodeName.toUpperCase(),c=F(y(a),function(a){return a.nodeName.toUpperCase()==b});return 1==c.length&&c[0]==a},"nth-child":function(a){var b=B.call(arguments,1),c,f,s,t;this instanceof Array&&(c=this);b.length||(b=[{value:"n"}]);f=b[0].value;if(1==b.length&&"n"==f)return 1==a.parentNode.nodeType;c||(c=y(a));if(1==b.length&&!e(+f))return c[-1<f?f-1:c.length+
+f]==a;f=b;for(var v=f[0].value,b=v,u=1,w=f.length;u<w;++u)b+=f[u].value;if(l.nthCache[b])s=l.nthCache[b];else{if("odd"==v)t=2,s=1;else if("even"==v)t=2,s=0;else if("n"==v?t=1:"-n"==v?t=-1:e(+v)?v=v.substr((""+(t=d(v,10))).length):t=+v,2<w)s=+f[2].value;else if("n"==v)s=0;else for(u=0,w=v.length;u<w;++u)if(!e(+v.charAt(u))){s=d(v.substr(u),10);break}t=[t,s];l.nthCache.push(b);l.nthCache[b]=t;l.nthCache.length>l.nthCacheSize&&(l.nthCache[l.nthCache.shift()]=g);s=t}t=s[0];s=s[1];c=x(c,a)+1;return t?
0<t&&c<s||0>t&&s<c||9==a.parentNode.nodeType?!1:!((c-s)%t):s==c},"nth-last-child":function(a){return n["nth-child"].apply(B.call(y(a)).reverse(),arguments)},"nth-of-type":function(a){var b=a.nodeName.toUpperCase();return n["nth-child"].apply(F(this instanceof Array?this:y(a),function(a){return a.nodeName.toUpperCase()==b}),arguments)},"nth-last-of-type":function(a){return n["nth-of-type"].apply(B.call(y(a)).reverse(),arguments)}};l.noConflict=function(){a.Jaguar=h;return l};"function"==typeof a.define&&
define.amd?define(function(){return l}):a.Jaguar=l})(c,document,parseInt,isNaN);var d=/,[^ ]/;a.dom.query=function(a,f){d.test(a)&&(a=a.split(",").join(", "));return c.Jaguar(a,f)}})(a.tools);a.tools.array=a.tools.array||function(){return{isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)}}}();a.tools.hashing=a.tools.hashing||function(){var a={};(function(a){function d(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function b(a,b,c,f,e,p){a=d(d(b,
a),d(f,p));return d(a<<e|a>>>32-e,c)}function f(a,c,f,d,e,p,g){return b(c&f|~c&d,a,c,e,p,g)}function e(a,c,f,d,p,g,q){return b(c&d|f&~d,a,c,p,g,q)}function g(a,c,f,d,e,p,q){return b(f^(c|~d),a,c,e,p,q)}function k(a,c){a[c>>5]|=128<<c%32;a[(c+64>>>9<<4)+14]=c;var k,s,l,t,u,r=1732584193,h=-271733879,m=-1732584194,n=271733878;for(k=0;k<a.length;k+=16)s=r,l=h,t=m,u=n,r=f(r,h,m,n,a[k],7,-680876936),n=f(n,r,h,m,a[k+1],12,-389564586),m=f(m,n,r,h,a[k+2],17,606105819),h=f(h,m,n,r,a[k+3],22,-1044525330),r=
f(r,h,m,n,a[k+4],7,-176418897),n=f(n,r,h,m,a[k+5],12,1200080426),m=f(m,n,r,h,a[k+6],17,-1473231341),h=f(h,m,n,r,a[k+7],22,-45705983),r=f(r,h,m,n,a[k+8],7,1770035416),n=f(n,r,h,m,a[k+9],12,-1958414417),m=f(m,n,r,h,a[k+10],17,-42063),h=f(h,m,n,r,a[k+11],22,-1990404162),r=f(r,h,m,n,a[k+12],7,1804603682),n=f(n,r,h,m,a[k+13],12,-40341101),m=f(m,n,r,h,a[k+14],17,-1502002290),h=f(h,m,n,r,a[k+15],22,1236535329),r=e(r,h,m,n,a[k+1],5,-165796510),n=e(n,r,h,m,a[k+6],9,-1069501632),m=e(m,n,r,h,a[k+11],14,643717713),
h=e(h,m,n,r,a[k],20,-373897302),r=e(r,h,m,n,a[k+5],5,-701558691),n=e(n,r,h,m,a[k+10],9,38016083),m=e(m,n,r,h,a[k+15],14,-660478335),h=e(h,m,n,r,a[k+4],20,-405537848),r=e(r,h,m,n,a[k+9],5,568446438),n=e(n,r,h,m,a[k+14],9,-1019803690),m=e(m,n,r,h,a[k+3],14,-187363961),h=e(h,m,n,r,a[k+8],20,1163531501),r=e(r,h,m,n,a[k+13],5,-1444681467),n=e(n,r,h,m,a[k+2],9,-51403784),m=e(m,n,r,h,a[k+7],14,1735328473),h=e(h,m,n,r,a[k+12],20,-1926607734),r=b(h^m^n,r,h,a[k+5],4,-378558),n=b(r^h^m,n,r,a[k+8],11,-2022574463),
m=b(n^r^h,m,n,a[k+11],16,1839030562),h=b(m^n^r,h,m,a[k+14],23,-35309556),r=b(h^m^n,r,h,a[k+1],4,-1530992060),n=b(r^h^m,n,r,a[k+4],11,1272893353),m=b(n^r^h,m,n,a[k+7],16,-155497632),h=b(m^n^r,h,m,a[k+10],23,-1094730640),r=b(h^m^n,r,h,a[k+13],4,681279174),n=b(r^h^m,n,r,a[k],11,-358537222),m=b(n^r^h,m,n,a[k+3],16,-722521979),h=b(m^n^r,h,m,a[k+6],23,76029189),r=b(h^m^n,r,h,a[k+9],4,-640364487),n=b(r^h^m,n,r,a[k+12],11,-421815835),m=b(n^r^h,m,n,a[k+15],16,530742520),h=b(m^n^r,h,m,a[k+2],23,-995338651),
r=g(r,h,m,n,a[k],6,-198630844),n=g(n,r,h,m,a[k+7],10,1126891415),m=g(m,n,r,h,a[k+14],15,-1416354905),h=g(h,m,n,r,a[k+5],21,-57434055),r=g(r,h,m,n,a[k+12],6,1700485571),n=g(n,r,h,m,a[k+3],10,-1894986606),m=g(m,n,r,h,a[k+10],15,-1051523),h=g(h,m,n,r,a[k+1],21,-2054922799),r=g(r,h,m,n,a[k+8],6,1873313359),n=g(n,r,h,m,a[k+15],10,-30611744),m=g(m,n,r,h,a[k+6],15,-1560198380),h=g(h,m,n,r,a[k+13],21,1309151649),r=g(r,h,m,n,a[k+4],6,-145523070),n=g(n,r,h,m,a[k+11],10,-1120210379),m=g(m,n,r,h,a[k+2],15,718787259),
h=g(h,m,n,r,a[k+9],21,-343485551),r=d(r,s),h=d(h,l),m=d(m,t),n=d(n,u);return[r,h,m,n]}function l(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function s(a){var b,c=[];c[(a.length>>2)-1]=void 0;for(b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(a.charCodeAt(b/8)&255)<<b%32;return c}function t(a){return l(k(s(a),8*a.length))}function u(a,b){var c,f=s(a),d=[],e=[];d[15]=e[15]=void 0;16<f.length&&(f=k(f,8*a.length));for(c=0;16>c;c+=1)d[c]=
f[c]^909522486,e[c]=f[c]^1549556828;c=k(d.concat(s(b)),512+8*b.length);return l(k(e.concat(c),640))}function r(a){var b="",c,f;for(f=0;f<a.length;f+=1)c=a.charCodeAt(f),b+="0123456789abcdef".charAt(c>>>4&15)+"0123456789abcdef".charAt(c&15);return b}a.md5=function(a,b,c){b?c?a=u(unescape(encodeURIComponent(b)),unescape(encodeURIComponent(a))):(a=u(unescape(encodeURIComponent(b)),unescape(encodeURIComponent(a))),a=r(a)):a=c?t(unescape(encodeURIComponent(a))):r(t(unescape(encodeURIComponent(a))));return a}})(a);
return{md5:function(c){return a.md5(c)}}}();(function(a){a.bulletLang={filter:function(a,d){return this.runFilter(a,this.parseFilter(d))},parseFilter:function(a){for(var d=/(([a-zA-Z]+)(\(([^\)]+)\))?)/g,b=[],f;null!==(f=d.exec(a));)b.push({name:f[2],args:f[4]?f[4].split(/,/):[]});return b},runFilter:function(a,d){for(var b=a.length,f=[],e=0;e<b;e+=1)for(var g=0;g<d.length;g+=1)if(this.filterMatches(e,b,d[g].name,d[g].args)){f.push(a[e]);break}return f},filterMatches:function(a,d,b,f){a=[a.toString(),
d.toString()].concat(f).map(function(a){return parseInt(a,10)});return this.filters[b].apply(this,a)},filters:{every:function(a,d,b,f){f=f||1;d=a+=1;return d>=f&&0===(a-f+1)%b},first:function(a){return 0===a},last:function(a,d){return a+1===d},nth:function(){for(var a=arguments[0],d=Array.prototype.slice.call(arguments,2),b=0;b<=d.length;b+=1)if(d.hasOwnProperty(b)&&d[b]===a+1)return!0;return!1}}}})(a.tools);(function(){a.Includes.EventsHelper={_listeners:[],addListener:function(a,c,d){var b=this.getMedia();
if(b)return b.addListener(a,c,d);a={listener:a,callback:c,element:d};this._listeners.push(a);return a},dispatch:function(a,c){var d=this.getMedia();d&&d.dispatch(a,c)},removeListener:function(a,c,d){var b=this.getMedia();if(b)b.removeListener(a,c,d);else if(b=this._listeners.length,0<b)for(var f=0;f<b;f+=1)if(this._listeners[f].listener===a&&this._listeners[f].callback===c&&this._listeners[f].element===d){this._listeners.splice(f,1);break}}}})();(function(){a.SettingsDeviceFilter=function(a){this._settingsData=
a};a.SettingsDeviceFilter.prototype.fetchSettingsForDeviceType=function(a){return this.getSettingsData().filter(function(c){return c.hasOwnProperty("targetDeviceFamily")?parseInt(c.targetDeviceFamily,10)===a:!0})};a.SettingsDeviceFilter.prototype.getCurrentDevice=function(){return a.tools.isMobileType.any?a.Config.SETTINGS_DEVICE_TARGET.MOBILE:a.Config.SETTINGS_DEVICE_TARGET.DESKTOP};a.SettingsDeviceFilter.prototype.getMergedSettingsForCurrentDevice=function(){return this.getMergedSettingsForDevice(this.getCurrentDevice())};
a.SettingsDeviceFilter.prototype.getMergedSettingsForDevice=function(e){return this.mergeDeviceTypesInData(this.fetchSettingsForDeviceType(a.Config.SETTINGS_DEVICE_TARGET.ANY),this.fetchSettingsForDeviceType(e))};a.SettingsDeviceFilter.prototype.getSettingsData=function(){return this._settingsData};a.SettingsDeviceFilter.prototype.mergeDeviceTypesInData=function(e,c){var d=[].concat(e).concat(c),b=d.length;return d.filter(function(c){for(var e=0;e<b;e+=1)if(d[e].key===c.key&&d[e].target===c.target){var g=
parseInt(d[e].targetDeviceFamily,10);if(parseInt(c.targetDeviceFamily,10)===a.Config.SETTINGS_DEVICE_TARGET.ANY&&g!==a.Config.SETTINGS_DEVICE_TARGET.ANY)return!1}return!0})}})();a.Timer=a.Timer||KskdClass.extend(function(){function e(c){g.scope.enforceCaller(this,a.Timer,"Expected caller instance to be of ITGS.Timer");var b=this._callbacks.length;if(0<b)for(var f=0;f<b;f+=1)this._callbacks[f].event===c&&this._callbacks[f].callback()}function c(){g.scope.enforceCaller(this,a.Timer,"Expected caller instance to be of ITGS.Timer");
this._running="interval"===this._options.style;!0===this._options.enabled&&e.call(this,"fire")}return{construct:function(a){this._options=g.mergeDefaults({style:"interval",delay:1E3,enabled:!0},a);this._callbacks=[];this._timerId=this._running=!1},addCallback:function(a){this.addTimerCallback("fire",a)},addTimerCallback:function(c,b){if("function"!==typeof b)throw new a.Exceptions.InvalidTypeException("function",typeof b,this);this._callbacks.push({event:c,callback:b})},disable:function(){this.setEnabled(!1)},
enable:function(){this.setEnabled(!0)},isEnabled:function(){return!0===this._options.enabled},isRunning:function(){return!0===this._running&&!1!==this._timerId},setEnabled:function(a){this.setOption("enabled",!0===a)},setOption:function(a,b){this._options[a]=b},start:function(){this.isRunning()&&this.stop();this._timerId="interval"===this._options.style?setInterval(g.compatibility.bindFunction(c,this),this._options.delay):setTimeout(g.compatibility.bindFunction(c,this),this._options.delay);this._running=
!0;e.call(this,"started")},stop:function(){this.isRunning()&&("interval"===this._options.style?clearInterval(this._timerId):clearTimeout(this._timerId),this._running=this._timerId=!1,e.call(this,"stopped"))}}}());a.AdComponentFactory=a.AdComponentFactory||function(){return{createBannerComponent:function(e,c,d){var b=e.getMediaSize();d=d||{};d.component=d.component||{};d.provider=d.provider||{};var f;f=d.provider;var p=c.get("provider","revive").toUpperCase();f="REVIVE"===p?new a.AdProviders.ReviveProvider(g.mergeDefaults({settingsOBC:c,
kioskID:e.getKioskId(),containerSize:e.getMediaSize()},f)):"APPNEXUS"===p?new a.AdProviders.AppNexusProvider(g.mergeDefaults({settingsOBC:c,kioskID:e.getKioskId(),containerSize:e.getMediaSize()},f)):"VASTPREROLL"===p?new a.AdProviders.VastPrerollProvider(g.mergeDefaults({settingsOBC:c,kioskID:e.getKioskId(),containerSize:e.getMediaSize()},f)):null;return new a.BannerComponent(f,g.mergeDefaults({settingsOBC:c,kioskID:e.getKioskId(),containerSize:b},d.component))}}}();a.SnifferUtilities=a.SnifferUtilities||
function(){var e=["style","kioskedhash_development","kioskedhash_staging","kioskedhash_production"];return{createElementHash:function(c,d,b){g.isset(d)||(d=0);var f=g.hash(a.SnifferUtilities.processPageURL(a.tools.environment.getPageUrl()).toLowerCase()),p="",p=c instanceof HTMLImageElement?a.SnifferUtilities.processImageURL(a.tools.dom.getImageSource(c)):a.SnifferUtilities.elementAsString(c,e),p=p+d.toString(),p=g.hash(p.toLowerCase());return b+"_"+f+"_"+p},elementAsString:function(c,d){if(!c instanceof
HTMLElement)throw new a.Exceptions.InvalidTypeException("HTMLElement",typeof c,this);d=d||e;var b=c.tagName.toLowerCase(),f=c.attributes,p=f.length;if(0<p){var g={},k=[],l;for(l=0;l<p;l+=1){var s=f[l].name;0<=d.indexOf(s)||k.push(s)}k.sort();f=k.length;for(l=0;l<f;l+=1)g[k[l]]=c.getAttribute(k[l]);b+=" "+JSON.stringify(g)}return b},elementHashIsValid:function(a){var d=/^[0-9]{1,6}_[A-Za-z0-9]{8}_[A-Za-z0-9]{8}$/;return g.isString(a)&&d.test(a)},getPageType:function(){for(var a=0,d=0,b=0,f=document.getElementsByTagName("img"),
e=0,g=0,b=0;b<f.length;b+=1)250<f[b].offsetHeight&&300<f[b].offsetWidth&&(e+=1);for(b=0;b<f.length;b+=1)100<f[b].offsetHeight&&180<f[b].offsetWidth&&(g+=1);3>e&&(a+=10);20<g&&(d+=20);3<document.getElementsByTagName("h1").length&&(d+=20);3<document.getElementsByTagName("h2").length&&(d+=10);50<document.getElementsByTagName("h3").length&&(d+=30);return d>a?"index":"article"},getSnifferItemSkeleton:function(){return{categories:null,context:null,element:null,hash:"",node:null,plugins:[]}},highlightAnalyzedElement:function(a,
d,b){if(b&&(d=d.toLowerCase(),a instanceof HTMLElement))switch(d){case "target":a.style.border="solid 8px #00FF00";break;case "title":a.style.backgroundColor="#0000FF";a.style.color="#FFF";break;case "content":a.style.backgroundColor="#FF0000"}},processDOMModifications:function(a){a._bodyHTMLCollection=null;var d=a.getSettings();if(d&&!0===d.getBool("ui.media.Banner.showFloorBanner",!1)){var b=5E3,d=function(){var d=!1;try{a._bodyHTMLCollection=document.createElement("div"),document.body.appendChild(a._bodyHTMLCollection),
a._bodyHTMLCollection.innerHTML+='<div style="width: 5px; height: 5px" id="kskdFooter"></div>'}catch(e){d=!0}if(!1===d)clearInterval(f);else if(b-=100,0>=b)throw clearInterval(f),Error("Sniffer DOM modification never succeeded");},f=setInterval(d,100);d()}},processImageURL:function(a){var d=g.overrideCall("SnifferUtilities.processImageURL");return d?d(a):a},processPageURL:function(a){var d=g.overrideCall("SnifferUtilities.processPageURL");return d?d(a):a.replace(/#.*$/,"")}}}();a.Analyzers.AbstractAnalyzer=
a.Analyzers.AbstractAnalyzer||KskdClass.extend(function(){return{construct:function(e){this.zoneAnalysis=this.pageAnalysis=null;this._settings={};this._settings=new a.SettingsOBC({});e&&(!0===e.debugMode&&(this.debugMode=!0),g.isset(e.settings)&&(this._settings=e.settings.getSubset("ui.analyzers"),this._mediaSettings=e.settings))},getSettings:function(){return this._settings},getMediaSettings:function(){return this._mediaSettings},analyzePage:function(){return{}},analyzeZones:function(){return[]},
getPageAnalysis:function(){return{}},isValidResourceURL:function(a){return/https?:\/\/[a-zA-Z0-9._-]+\/([^ ])*/i.test(a)},sendAnalysis:function(a){var c={url:"//"+g.environment.getDomainName()+"/matching-report/report",content:[]};a&&this.pageAnalysis&&c.content.push(this.pageAnalysis);if(this.zoneAnalysis){for(a=0;a<this.zoneAnalysis.length;a+=1)c.content.push(this.zoneAnalysis[a]);g.request(c)}}}}());a.Analyzers.GeneralAnalyzer=a.Analyzers.GeneralAnalyzer||a.Analyzers.AbstractAnalyzer.extend(function(){function e(b){g.scope.enforceCaller(this,
a.Analyzers.GeneralAnalyzer,"Expected caller to be instance of GeneralAnalyzer");if(!b)return null;-1===b.indexOf("http:")&&-1===b.indexOf("https:")&&(b=window.location.protocol+"//"+c(b)+b);if(-1<b.indexOf(".jpg")||-1<b.indexOf(".png")||-1<b.indexOf(".gif"))return null;var f=c.call(this,b);g.scope.enforceCaller(this,a.Analyzers.GeneralAnalyzer,"Expected caller to be instance of GeneralAnalyzer");for(var d=this.getMediaSettings().getSubset("ui").get("hostNames","").split(","),e=0;e<d.length;e+=1)d[e]=
g.trim(d[e]);for(var e=!1,p=0;p<d.length;p+=1)3<d[p].length&&-1!==f.indexOf(d[p])&&(e=!0);return!1===e?null:b}function c(a){var b=document.createElement("a");b.href=a;return b.hostname}function d(a,b){try{if(a instanceof HTMLElement){if(b){a=a.cloneNode(!0);for(var c=g.dom.query(b,a),f=0;f<c.length;f+=1)c[f]instanceof HTMLElement&&g.dom.destroy(c[f])}return g.trim(g.dom.getPlainText(a)).replace(/(\r\n|\n|\r)/gm," ").replace(/\s+/g," ")}}catch(d){g.debug.log("could not process element content",d)}return""}
function b(a){if(!a)return 0;a=a.replace(/(\r\n|\n|\r)/gm," ");a=a.replace(/[ ]{2,}/gi," ");a=a.replace(/(^\s*)|(\s*$)/gi,"");return""===a?0:a.split(" ").length}function f(c,f,d){g.scope.enforceCaller(this,a.Analyzers.GeneralAnalyzer,"Expected caller to be instance of GeneralAnalyzer");var e="",p=0,q;f=g.dom.query(c,f);for(var h=0;h<f.length;h+=1){c=g.trim(g.dom.getPlainText(f[h]));var m=window.getComputedStyle(f[h],null).getPropertyValue("font-size"),m=parseFloat(m);2<b.call(this,c)&&m>p&&(e=c,p=
m,q=f[h])}if(d&&p>d)return a.SnifferUtilities.highlightAnalyzedElement(q,"title",this.debugMode),e;if(d)return"";a.SnifferUtilities.highlightAnalyzedElement(q,"title",this.debugMode);return e}function p(b,c){g.scope.enforceCaller(this,a.Analyzers.GeneralAnalyzer,"Expected caller to be instance of GeneralAnalyzer");var d="",e=g.dom.query("h1",b),p=0<e.length?g.trim(g.dom.getPlainText(e[0])):"",q=document.getElementsByTagName("body")[0];if(0===d.length&&(0<p.length&&(d=p,a.SnifferUtilities.highlightAnalyzedElement(e[0],
"title",this.debugMode)),c&&0===d.length&&(d=f.call(this,"h1",q,55)),c&&0===d.length&&(d=f.call(this,"h2",q,55)),c&&0===d.length&&(d=f.call(this,"h3",q,55)),0===d.length&&(e=g.dom.query("h2",b),d=p=0<e.length?g.trim(g.dom.getPlainText(e[0])):"",a.SnifferUtilities.highlightAnalyzedElement(e[0],"title",this.debugMode)),0===d.length&&(d=g.dom.query("h3",b),d=p=0<d.length?g.trim(g.dom.getPlainText(d[0])):"",a.SnifferUtilities.highlightAnalyzedElement(b,"title",this.debugMode)),0===d.length&&(d=f.call(this,
"h1",b.parentNode),0===d.length&&(d=f.call(this,"h2",b.parentNode)),0===d.length&&(d=f.call(this,"h3",b.parentNode)),0===d.length))){d=f.call(this,"h1",b.parentNode.parentNode);0===d.length&&(d=f.call(this,"h2",b.parentNode.parentNode));0===d.length&&(d=f.call(this,"h3",b.parentNode.parentNode));if(0===d.length&&c)for(p=document.getElementsByTagName("meta"),e=0;e<p.length;e+=1)"og:title"===p[e].getAttribute("property")&&(d=p[e].getAttribute("content"));0===d.length&&(d=f.call(this,"h1",q),0===d.length&&
(d=f.call(this,"h2",q)),0===d.length&&(d=f.call(this,"h3",q)))}return d}function q(c,f){g.scope.enforceCaller(this,a.Analyzers.GeneralAnalyzer,"Expected caller to be instance of GeneralAnalyzer");var d="",e=g.dom.query("figcaption",c);if(e=(e=0<e.length?g.dom.getPlainText(e[0]):!1)?g.trim(e):!1)d=e;else for(var e=g.dom.query("a",c),p=0;p<e.length;p+=1)if(f.link&&e[p].getAttribute("href")===f.link){var q=g.trim(g.dom.getPlainText(e[p]));5<b.call(this,q)&&(d=q)}return d}return{MIN_WORD_COUNT:30,MAX_WORD_COUNT:300,
construct:function(a){this.$super(a)},analyzePage:function(b,c,f){var d="article";!1===this.getMediaSettings().getBool("ui.sniff.disableIndexPageAnalysis",!1)&&(d=a.SnifferUtilities.getPageType(b));g.scope.enforceCaller(this,a.Analyzers.GeneralAnalyzer,"Expected caller to be instance of GeneralAnalyzer");for(var e=b="",p=document.getElementsByTagName("title")[0],p=p?g.dom.getPlainText(p):"",q=document.getElementsByTagName("meta"),h=0;h<q.length;h+=1){var m=q[h].getAttribute("property"),n=q[h].getAttribute("name");
""===p&&"title"===n&&(p=q[h].getAttribute("content"));""===p&&"og:title"===m&&(p=q[h].getAttribute("content"));""===b&&"og:description"===m&&(b=q[h].getAttribute("content"));""===b&&"description"===n&&(b=q[h].getAttribute("content"));"keywords"===n&&(e=q[h].getAttribute("content"))}b={title:p,description:b,keywords:e};this.pageType=d;this.pageAnalysis=b;this.pageAnalysis.url=a.SnifferUtilities.processPageURL(a.tools.environment.getPageUrl());this.pageAnalysis.type="webPage";this.pageAnalysis.albumId=
c;this.pageAnalysis.publisherId=f;this.pageAnalysis.pageType=d;return this.pageAnalysis},analyzeZones:function(c){var f=[],s=a.SnifferUtilities.processPageURL(a.tools.environment.getPageUrl());this.pageType||(this.pageType=a.SnifferUtilities.getPageType(c));for(var t=0;t<c.length;t+=1){a.SnifferUtilities.highlightAnalyzedElement(c[t].img,"target",this.debugMode);var h;a:{var r=c[t];h=this.pageType;var m=s;g.scope.enforceCaller(this,a.Analyzers.GeneralAnalyzer,"Expected caller to be instance of GeneralAnalyzer");
var n=r.img,m={pageUrl:m,id:r.zoneId},w=0;m.type="webImage";m.responseTypes=r.responseTypes;if(n instanceof HTMLImageElement&&n.src&&0<n.src.length){if(m.url=n.src,!this.isValidResourceURL(m.url)){g.debug.warn("/GeneralAnalyzer/","Invalid image URL",n);h=!1;break a}}else m.url=r.zoneId;m.width=n.offsetWidth;m.height=n.offsetHeight;m.alt=n.getAttribute("alt");if("index"===this.pageType){var V=n;g.scope.enforceCaller(this,a.Analyzers.GeneralAnalyzer,"Expected caller to be instance of GeneralAnalyzer");
r=void 0;for(V=V.parentNode;V&&V.parentNode;){if("A"===V.tagName.toUpperCase()&&V.getAttribute("href")){r=V.getAttribute("href");break}V=V.parentNode}if(r=e.call(this,r))m.link=g.environment.getImageFullURL(r)}var x=this.getSettings().getSubset("GeneralAnalyzer"),w=x.get("forceContentElement",!1),r=x.get("excludeContentElement",!1),V=x.get("minWordCount",this.MIN_WORD_COUNT),x=x.get("minWordCount",this.MAX_WORD_COUNT),C=!1,B=n,A="";if(w=w?document.querySelector(w):!1)B=w,A=d(B,r),m.content=A,m.caption=
q.call(this,B,m),m.title=p.call(this,B,h),m.width=n.offsetWidth,m.height=n.offsetHeight,a.SnifferUtilities.highlightAnalyzedElement(B,"content",this.debugMode);else for(;!1===C;){if("BODY"===B.parentNode.tagName.toUpperCase()||"HTML"===B.parentNode.tagName.toUpperCase())C=!0;A=d(B,r);w=b.call(this,A);if(w>V){var C=B.parentNode,z=d(C,r),w=b.call(this,z);w<x?(m.content=z,m.caption=q.call(this,C,m),m.title=p.call(this,C,h)):(m.content=A,m.caption=q.call(this,B,m),m.title=p.call(this,B,h));m.width=n.offsetWidth;
m.height=n.offsetHeight;a.SnifferUtilities.highlightAnalyzedElement(B,"content",this.debugMode);C=!0}B=B.parentNode}h=m}h?f.push(h):g.debug.warn("/GeneralAnalyzer/","Failed analysis for item:",c[t])}return this.zoneAnalysis=f},getPageAnalysis:function(){this.pageAnalysis&&(this.pageAnalysis.url=a.SnifferUtilities.processPageURL(a.tools.environment.getPageUrl()));return this.pageAnalysis}}}());a.styles=a.styles||{BannerCloseImage:{"default":{__stylesheet:"images.BannerCloseImage"},mobile:{__stylesheet:"images.BannerCloseImageMobile"}},
BannerDisclaimerContainer:{"default":{position:"absolute",overflow:"hidden",zIndex:2,height:"18px",right:"0px",minWidth:"18px",marginTop:"-18px",opacity:"0"},mobile:{__include:"default",height:"20px",marginTop:"0px"},hd:{__include:"mobile"}},BannerDisclaimerCloseButtonContainer:{"default":{position:"absolute",right:"0px",top:"0px",width:"18px",height:"18px",cursor:"pointer",zIndex:2},mobile:{__include:"default",width:"20px",height:"20px"},hd:{__include:"mobile"}},BannerDisclaimerCloseButtonIcon:{"default":{__include:"BannerCloseImage.default.normal",
width:"100%",height:"100%",backgroundSize:"100% 100%"},mobile:{__include:["default","BannerCloseImage.mobile.normal"]},hd:{__include:"mobile"}},BannerDisclaimerAdsLogo:{"default":{__include:"BannerAdsLogo.default.normal",position:"relative","float":"left",backgroundSize:"100% 100%",width:"100%",height:"100%"},mobile:{__include:["default","BannerAdsLogo.mobile.normal"]},hd:{__include:["mobile","BannerAdsLogo.hd.normal"]}},BannerDisclaimerAdsLogoExternal:{"default":{__include:["BannerDisclaimerAdsLogo.default.normal",
"BannerAdsLogoGrey.default.normal"]},mobile:{__include:["default","BannerAdsLogoGrey.mobile.normal"]},hd:{__include:["default","BannerAdsLogoGrey.hd.normal"]}},BannerDisclaimerAdsLogoFloor:{"default":{__include:["BannerDisclaimerAdsLogo.default.normal","BannerAdsLogoGrey.default.normal"]},mobile:{__include:["BannerDisclaimerAdsLogo.mobile.normal","BannerAdsLogo.mobile.normal"]},hd:{__include:["BannerDisclaimerAdsLogo.hd.normal","BannerAdsLogoGrey.hd.normal"]}},BannerDisclaimerAdsLogoContainer:{"default":{position:"relative",
height:"18px",width:"86px",marginRight:"18px"},mobile:{__include:"default",height:"20px",width:"85px",marginRight:"20px"},hd:{__include:"mobile"}},BannerAdsLogo:{"default":{__stylesheet:"images.BannerAdsLogoDefault"},mobile:{__stylesheet:"images.BannerAdsLogoMobile"},hd:{__include:"mobile"}},BannerAdsLogoGrey:{"default":{__stylesheet:"images.BannerAdsLogoGreyDefault"},mobile:{__stylesheet:"images.BannerAdsLogoGreyMobile"},hd:{__include:"mobile"}},BannerFooterContainer:{"default":{position:"fixed",
left:"0px",right:"0px",bottom:"-500px",backgroundColor:"rgba(0,0,0,0.1)"},mobile:{__include:"default",backgroundColor:"initial"}},ExpandableBannerContainerBox:{"default":{position:"fixed",overflow:"auto",overflowX:"hidden",overflowY:"scroll",background:"rgba(0, 0, 0, 0.70)",top:0,left:0,right:0,bottom:0,border:0,opacity:0,display:"none",zIndex:"72101021"},mobile:{__include:"default"},hd:{__include:"default"}},ExpandableBannerContentBox:{"default":{position:"absolute",top:"50%",left:"50%",opacity:0,
"webkit-transform-origin":"0% 100%"},mobile:{__include:"default",width:"90%"},hd:{__include:"mobile"}},ExpandableBannerDisclaimerContainer:{"default":{position:"absolute",top:"-20px",right:"0px",overflow:"hidden",zIndex:2,height:"20px",minWidth:"20px",marginTop:"0px"},mobile:{__include:"default",top:"-20px",height:"20px",marginTop:"0px"},hd:{__include:"mobile"}}};a.KioskedObject=a.KioskedObject||KskdClass.extend(function(){return{construct:function(){g.scope.enforceCaller(this,a.KioskedObject,"Expected instance of KioskedObject");
this._status=new a.Status;g.decorators.decorateWithStatus(this,this._status);g.decorators.decorateWithMeta(this)},destroy:function(){},isBuilt:function(){return!0}}}());a.Config=a.Config||{ANALYTICS_EVENT_NAME:"kioskedAnalytics",ANALYTICS_EVENT_NAME_PROPERTY:"name",BANNER_CLASS_NAMES:"BannerSlotAbstract BannerSlot ExternalBannerSlot FloorBannerSlot ExpandableBannerSlot ExpandableBannerLightBoxSlot VastPreroll".split(" "),BANNER_COMPONENT_LOAD_STATUS:{BUILT:500,BUILT_AND_LOADED:501},BANNER_DISCLAIMER:{HEIGHT_DESKTOP:18,
HEIGHT_MOBILE:20},BANNER_SIZE_STANDARDS:{HORIZONTAL:{WIDTH:728,HEIGHT:90},HORIZONTAL_SMALL:{WIDTH:468,HEIGHT:60},VERTICAL:{WIDTH:160,HEIGHT:600},MOBILE:{WIDTH:320,HEIGHT:50},MEDIUM_RECT:{WIDTH:300,HEIGHT:250},VIDEO:{WIDTH:640,HEIGHT:360}},CACHE:{ZONE_RESPONSE:!1},DFP_ELEMENT_PLACEMENT_ID_ATTR:"kskd-dfp-placement",ELEMENT_SEARCH_MODE:{SEARCH:200,SELECT:210},ELEMENT_SELECTION_MODE:{NORMAL:100,CUSTOM:110},FIXED_BANNER_DIV_CLASS:"kskdFixedBannerContainer",LIGHTBOX_DIV_CLASS:"kskdLightBoxContainer",META_MAX_KEYWORDS:10,
SAMPLE_RATE_PAGE_IMP:.1,SAMPLE_RATE_CONTAINER_IMP:.1,SAMPLE_RATE_0_5:.5,SAMPLE_RATE_SEND_ALL:1,SETTINGS_AB_TEST_OVERRIDE_NONE:0,SETTINGS_AB_TEST_OVERRIDE_FAIL:1,SETTINGS_AB_TEST_OVERRIDE_PARTIAL:2,SETTINGS_AB_TEST_OVERRIDE_FULL:3,SETTINGS_DEVICE_TARGET:{ANY:0,DESKTOP:1,MOBILE:2,TABLET:3},SNIFFER_BLOCK_PARAM:"kskd-disable",SNIFFER_ELEMENT_QUEUE_DELAY:500,SNIFFER_INTERVAL:500,SNIFFER_MAX_ELEMENTS_PER_CYCLE:15,SAMPLE_RATE_RANDOM_CURRENT:1,VERSION:"0.30.9"};var h=[];(function(){a.createWithMedia=a.createWithMedia||
function(e){if(!(e instanceof a.Media))throw new a.Exceptions.IllegalInvocationException("Failed storing media - object was not an instance of Media",this);h.push(e);return e};a.destructors.destroyPlacements=a.destructors.destroyPlacements||function(){for(var e=h.length,c=0;c<e;c+=1){var d=h[c];try{d.destroy()}catch(b){a.tools.debug.warn("Failed destroying media item:",d)}}h=[]};a.destructors.destroySniffer=a.destructors.destroySniffer||function(){if(a.sniffer)try{a.sniffer.destroy()}catch(e){g.debug.log("/Destructors/",
"Failed destroying (old) sniffer")}if(a.snifferController)try{a.snifferController.destroy()}catch(c){a.tools.debug.error("/Destructors/","Failed destroying sniffer")}};a.destructors.destroyMedia=a.destructors.destroyMedia||function(e){setTimeout(function(){var c=e&&e._relContainer?e._relContainer:null;try{e.destroy()}catch(d){g.debug.log("/Destructors/","Failed destroying media item")}c&&g.dom.destroy(c);h&&h instanceof Array&&(c=h.indexOf(e),0<=c&&(g.isset(a.sniffer)&&a.sniffer.removeFromImageList(h[c].getZoneID()),
h.splice(c,1)))},50)};a.destructors.destroyNamespace=a.destructors.destroyNamespace||function(e){var c=e||function(){};a.destructors.destroySniffer();a.destructors.destroyPlacements();setTimeout(function(){window.ITGS=null;try{delete window.ITGS}catch(a){}c()},500)};a.loadDiagnostics=function(){var e=a.loadedScript;delete a.loadDiagnostics;a.destructors.destroyNamespace(function(){window.ITGS_load_diagnostics=!0;var a=document.createElement("script");a.setAttribute("src",e);a.setAttribute("type",
"text/javascript");document.getElementsByTagName("head")[0].appendChild(a)})};a.unloadManager=a.unloadManager||new a.UnloadManager})();g.compatibility.enforcePrototypeMinimumVersion(1,7);a.tools.compatibility.checkDocumentQuerySelectorAll();(function(){var e=new a.Status;g.decorators.decorateWithStatus(window.ITGS,e)})();a.DisplayComponent=a.DisplayComponent||a.KioskedObject.extend(function(){return{construct:function(){this.$super();this._container=null;this.addStatus("built");this.build()},build:function(){this.is("built")||
(this._container=g.create("div"),this.set("built"))},destroy:function(){this.unset("built");g.dom.destroy(this._container);this._container=null;this.$super()},getContainer:function(){return this._container}}}());a.BannerDisclaimer=a.BannerDisclaimer||a.DisplayComponent.extend(function(){return{construct:function(a){a=a||{};this._options=g.mergeDefaults({showDisclaimer:!1,disclaimerLink:"http://kiosked.com"},a);this._adsLogoDisclaimerContainer=this._closeButtonContainer=null;this.$super()},build:function(){this.$super();
this.unset("built");this._closeButtonContainer=g.create("div");this._adsLogoDisclaimerContainer=g.create("div");this.set("built")},destroy:function(){g.dom.destroy(this._closeButtonContainer);g.dom.destroy(this._adsLogoDisclaimerContainer);this._adsLogoDisclaimerContainer=this._closeButtonContainer=null;this.$super()},getCloseButtonContainer:function(){return this._closeButtonContainer},getAdsLogoDisclaimerContainer:function(){return this._adsLogoDisclaimerContainer},getOptions:function(){return this._options}}}());
a.BannerDisclaimerDefault=a.BannerDisclaimerDefault||a.BannerDisclaimer.extend(function(){return{construct:function(a){this.$super(a)},build:function(){this.$super();this.unset("built");var e=this.getContainer(),c=this.getCloseButtonContainer(),d=this.getAdsLogoDisclaimerContainer(),b=this.getOptions();a.styling.selectStyle("BannerDisclaimerCloseButtonContainer").applyToElement(c);a.styling.selectStyle("BannerDisclaimerAdsLogoContainer").applyToElement(d);this.buildCloseButton(c);this.buildAdsLogoDisclaimerContainer(d);
e.appendChild(c);b.showDisclaimer&&e.appendChild(d);a.styling.selectStyle("BannerDisclaimerContainer").applyToElement(e);this.set("built")},buildCloseButton:function(e){var c=document.createElement("div");a.styling.selectStyle("BannerDisclaimerCloseButtonIcon").applyToElement(c);e.appendChild(c)},buildAdsLogoDisclaimerContainer:function(e){var c=this.getOptions();this._adsLogo=g.create("a");this._adsLogo.href=c.disclaimerLink;this._adsLogo.target="_blank";a.styling.selectStyle("BannerDisclaimerAdsLogo").applyToElement(this._adsLogo);
e.appendChild(this._adsLogo)},getAdsLogo:function(){return this._adsLogo},destroy:function(){this.$super()},show:function(){g.animate(this.getContainer(),{duration:500,properties:{opacity:1},easing:"inOutQuintic"})}}}());a.BannerComponent=a.BannerComponent||a.KioskedObject.extend(function(){function e(){g.scope.enforceCaller(this,a.BannerComponent,"Context not met: ITGS.BannerComponent");var c=this;a.messaging.addListener("providerURLImmediateFallback",function(d){if(d.provider===c.getProvider()){a.tools.debug.log("/BannerComponent/",
"Falling back to network: ",d.network+"@"+d.zone);a.messaging.dispatch("bannerComponentWillLoadNetwork",{component:c,network:d.network,zone:d.zone});var b=d.url,f=c.getElement();a.tools.dom.nodeIdentifier(f).isIFrame()?f.src=b:null!==c.getProvider().getDFPElement()?(a.tools.dom.destroy(c.getProvider().getDFPElement()),c.getProvider()._DFPElement=null,a.messaging.dispatch("bannerSlotShouldReloadComponent",{component:c})):a.tools.debug.error("/BannerComponent/","Unable to load fallback URL for network '"+
d.network+"', no iframe or element available")}})}return{construct:function(c,d){this.$super();d=d||{};this._options=g.mergeDefaults({name:"BannerComponent",settings:{},settingsOBC:null,kioskID:"",containerSize:{width:0,height:0},placementID:"",viewability:!1},d);this._elementProportions=this._element=null;this._provider=c;this._settings=this._options.settingsOBC||new a.SettingsOBC(this._options.settings);this.addStatus("loadedFrameSource");this.addStatus("ready");this.addStatus("built");!1===this.getSettings().getBool("noScale",
!1)&&this.set("scaleEnabled");e.call(this)},destroy:function(){this.unset("ready");this.unset("built");this._element&&(g.dom.destroy(this._element),this._element=null);this._provider&&this._provider.destroy();this.$super()},getElement:function(){return this._element},getElementProportions:function(){return this._elementProportions},getOptions:function(){return this._options},getProvider:function(){return this._provider},getSettings:function(){return this._settings},load:function(c){if(this.is("built"))return!1;
var d=this,b=this.getOptions();c=c||function(){};return this.getProvider()&&!this.getProvider().initProvider(function(){d._element=d.getProvider().createElement();d.unset("loadedFrameSource");d._element===d.getProvider().getDFPElement()&&a.messaging.dispatch("bannerComponentWillLoadNetwork",{component:d,network:"dfp",zone:d._element.getAttribute(a.Config.DFP_ELEMENT_PLACEMENT_ID_ATTR)});d._element&&d._element instanceof HTMLIFrameElement?(!0!==b.viewability&&(d._element.src=d._element.getAttribute("kskd-src")),
d._element.onload=function(){d.hasNot("loadedFrameSource")&&0<this.src.length&&(d.set("loadedFrameSource"),c(a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT_AND_LOADED))},c(a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT)):(d.set("loadedFrameSource"),c(a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT),c(a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT_AND_LOADED));d.set("built")})?(a.messaging.dispatch("bannerProviderNotInitiated",{placementID:d.getOptions().placementID}),!1):!0},refresh:function(c){var d=this.getElement();
if(d){c=c||function(){};var b=this;this.unset("loadedFrameSource");d instanceof HTMLIFrameElement?(d.onload=function(){b.hasNot("loadedFrameSource")&&(b.set("loadedFrameSource"),c.call(b))},d.src+=""):null!==this.getProvider().getDFPElement()&&(this.getProvider().refreshDFP(),a.messaging.dispatch("bannerComponentWillLoadNetwork",{component:this,network:"dfp",zone:this.getProvider().getDFPElement().getAttribute(a.Config.DFP_ELEMENT_PLACEMENT_ID_ATTR)}),c.call(this))}},reload:function(c,d){a.tools.dom.destroy(this.getElement());
this.unset("built");this.load(function(b){b===a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT_AND_LOADED?c():b===a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT&&"function"===typeof d&&d()})},updateLayout:function(c,d){var b=this.getElement();d=d||{};var f={height:0,width:0,scale:1},e;e=this.getProvider();e.is("mediumRect")||e.is("mediumMobileRect")?(e=c.width,f.width=a.Config.BANNER_SIZE_STANDARDS.MEDIUM_RECT.WIDTH,f.height=a.Config.BANNER_SIZE_STANDARDS.MEDIUM_RECT.HEIGHT,f.scale=e/a.Config.BANNER_SIZE_STANDARDS.MEDIUM_RECT.WIDTH):
e.is("video")?(e=c.width,f.width=a.Config.BANNER_SIZE_STANDARDS.VIDEO.WIDTH,f.height=a.Config.BANNER_SIZE_STANDARDS.VIDEO.HEIGHT,f.scale=e/a.Config.BANNER_SIZE_STANDARDS.VIDEO.WIDTH):e.is("mobile")?(e=c.width,f.width=a.Config.BANNER_SIZE_STANDARDS.MOBILE.WIDTH,f.height=a.Config.BANNER_SIZE_STANDARDS.MOBILE.HEIGHT,f.scale=e/a.Config.BANNER_SIZE_STANDARDS.MOBILE.WIDTH):e.is("vertical")?(e=c.height,f.width=a.Config.BANNER_SIZE_STANDARDS.VERTICAL.WIDTH,f.height=a.Config.BANNER_SIZE_STANDARDS.VERTICAL.HEIGHT,
f.scale=e/a.Config.BANNER_SIZE_STANDARDS.VERTICAL.HEIGHT):e.is("horizontalSmall")?(e=c.width,f.width=a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL_SMALL.WIDTH,f.height=a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL_SMALL.HEIGHT,f.scale=e/a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL_SMALL.WIDTH):(e=c.width,f.width=a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.WIDTH,f.height=a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.HEIGHT,f.scale=e/a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.WIDTH);d.size&&(e=c.width,f.width=d.width,
f.height=d.height,f.scale=e/d.width);d.scale&&(f.scale=d.scale,a.tools.debug.log("/BannerComponent/","Scale override:",f.scale));this.isNot("scaleEnabled")&&(f.scale=1,a.tools.debug.log("/BannerComponent/","Scale disabled:",f.scale));b&&(b.style.setProperty("width",f.width+"px","important"),b.style.setProperty("height",f.height+"px","important"),b.style.WebkitTransform="scale("+f.scale+")",b.style.MozTransform="scale("+f.scale+")",b.style.msTransform="scale("+f.scale+")",b.style.OTransform="scale("+
f.scale+")",b.style.transform="scale("+f.scale+")",b.style.transformOrigin="0% 100%",b.style.msTransformOrigin="0% 100%",b.style.WebkitTransformOrigin="0% 100%",b.style.OTransformOrigin="0% 100%",b.style.visibility="visible",b.style.display="block");this._elementProportions=f}}}());a.FixedFooterContainer=a.FixedFooterContainer||a.KioskedObject.extend(function(){function e(c){g.scope.enforceCaller(this,a.FixedFooterContainer,"Context not met: ITGS.FixedFooterContainer");if(!c instanceof a.Media)throw new a.Exceptions.InvalidTypeException("ITGS.Media",
typeof c,this);var d=this;c.addListener("bannerCloseButtonPressed",function(a){a.banner===d&&d.hide({callback:function(){"function"===typeof d._destructionCallback&&d._destructionCallback()}})});c.addListener("onclick",function(a){c.dispatch("bannerCloseButtonPressed",{banner:d})},this._disclaimer.getCloseButtonContainer())}return{construct:function(c){c=c||{};this._options=g.mergeDefaults({name:"FixedFooterContainer"},c);this.$super();this._bannerSettings=this._options.bannerSettings||new a.SettingsOBC({});
this._mediaSettings=this._options.mediaSettings||new a.SettingsOBC({});this._fixedContainer=null;this._fixedContainerHeight=0;this._componentContainer=null;this._componentContainerSize={width:0,height:0};this._destructionCallback=null;this._bannerComponents=[];this._loadedBannerComponents=0;this._loadedBannerComponentsCallback=null;this._componentWidths={single:800,multiple:600};this.addStatusSet(["desktopContainer","mobileContainer"]);this.addStatusSet(["shown","hidden"],"hidden");this.addStatusSet(["animatingShown",
"animatingHidden","animationIdle"],"animationIdle");g.scope.enforceCaller(this,a.FixedFooterContainer,"Context not met: ITGS.FixedFooterContainer");g.isMobileType.any?this.set("mobileContainer"):this.set("desktopContainer")},destroy:function(){var a=this._bannerComponents.length;if(0<a)for(var d=0;d<a;d+=1)this._bannerComponents[d].destroy();this._bannerComponents=null;this._fixedContainer&&g.dom.destroy(this._fixedContainer)},addComponent:function(c){if(!c instanceof a.BannerComponent)throw new a.Exceptions.InvalidTypeException("ITGS.BannerComponent",
typeof c,this);this._bannerComponents.push(c)},attach:function(c){if(!this.has("attached")){this.set("hidden");this._fixedContainer=a.tools.create("div",{},document.body);a.styling.selectStyle("BannerFooterContainer").applyToElement(this._fixedContainer);this._fixedContainer.className+=" "+a.Config.FIXED_BANNER_DIV_CLASS;this._fixedContainer.style.zIndex=72652617264;this._fixedContainer.style.height="0px";this._fixedContainer.style.visibility="hidden";this._componentContainer=document.createElement("div");
this._componentContainer.style.textAlign="center";this._componentContainer.style.position="relative";var d=this.getBannerSettings(),b=this.getMediaSettings(),d={showDisclaimer:d.getBool("showDisclaimer",!1),disclaimerLink:b.get("overlays.Disclaimer.disclaimerLink","http://kiosked.com")};this._disclaimer=new a.BannerDisclaimerDefault(d);this._disclaimer.getAdsLogoDisclaimerContainer()&&a.styling.selectStyle("BannerDisclaimerAdsLogoFloor").applyToElement(this._disclaimer.getAdsLogo());this._logoDisclaimerContainer=
this._disclaimer.getContainer();this._fixedContainer.appendChild(this._logoDisclaimerContainer);this.is("desktopContainer")?m.style(this._componentContainer,{position:"relative",marginLeft:"auto",marginRight:"auto",marginTop:"0px"}):this.is("mobileContainer")&&(m.style(this._componentContainer,{left:"0px",top:"0px",position:"absolute"}),a.styling.styleElement(this._disclaimer.getContainer(),{top:"-"+a.Config.BANNER_DISCLAIMER.HEIGHT_MOBILE+"px"}));this._fixedContainer.appendChild(this._componentContainer);
e.call(this,c);this.set("attached")}},getBannerComponents:function(){return this._bannerComponents},getBannerSettings:function(){return this._bannerSettings},getComponentContainer:function(){return this._componentContainer},getComponentsLoadedCallback:function(){return this._loadedBannerComponentsCallback},getDisplayHeight:function(){var a=0;this.is("desktopContainer")&&(a=a+0+0);return a+=Math.round(this._componentContainerSize.height)},getMediaSettings:function(){return this._mediaSettings},hide:function(a){a=
a||{};var d=this;if(!(this.is("hidden")&&!0!==a.force||this.isNot("animationIdle"))){this.set("animatingHidden");var b=this.getDisplayHeight(),f=function(){d.set("hidden");d.set("animationIdle");a.hasOwnProperty("callback")&&"function"===typeof a.callback&&a.callback()};a.instant?(this._fixedContainer.style.bottom=0-b+"px",f()):g.animate(this._fixedContainer,{duration:600,properties:{bottom:0-b+"px"},easing:"inOutQuintic",callback:f})}},loadComponents:function(){var c=this,d=function(b){b===a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT_AND_LOADED&&
(c.updateComponentLayouts(),c._loadedBannerComponents+=1,c._loadedBannerComponents>=c._bannerComponents.length&&(b=c.getComponentsLoadedCallback(),"function"===typeof b&&b()))},b=this._bannerComponents.length;if(0<b)for(var f=0;f<b;f+=1){var e=this._bannerComponents[f];if(e.isNot("loadedByFixedFooterContainer")){e.load(d);var g=e.getElement();g.style.position="absolute";g.style.left="0px";this._componentContainer.appendChild(g);e.set("loadedByFixedFooterContainer")}}},providersReady:function(){var a=
this.getBannerComponents(),d=a.length;if(0<d){for(var b=0;b<d;b+=1)if(a[b].getProvider().isNot("ready"))return!1;return!0}return!1},setComponentsLoadedCallback:function(a){this._loadedBannerComponentsCallback=a},setDestructionCallback:function(a){this._destructionCallback=a},show:function(a){a=a||{};var d=this;if(!(this.is("shown")&&!0!==a.force||this.isNot("animationIdle"))){this.set("animatingShown");var b=this.getDisplayHeight();this._fixedContainer.style.bottom=0-b+"px";this._fixedContainer.style.visibility=
"visible";this._fixedContainer.style.height=b+"px";this.is("desktopContainer")&&(this._componentContainer.style.opacity=0);var f=function(){d.set("shown");d.set("animationIdle");a.hasOwnProperty("callback")&&"function"===typeof a.callback&&a.callback()};a.instant?(this._fixedContainer.style.bottom="0px",this._componentContainer.style.opacity=1,this._logoDisclaimerContainer.style.opacity=1,f()):g.animate(this._fixedContainer,{duration:500,properties:{bottom:"0px"},easing:"inOutQuintic",callback:function(){g.animate(d._componentContainer,
{duration:500,properties:{opacity:1},easing:"inOutQuintic",callback:f});g.animate(d._logoDisclaimerContainer,{duration:500,properties:{opacity:1},easing:"inOutQuintic"})}})}},updateComponentLayouts:function(a){a=a||{};var d=this._bannerComponents.length,b=d,f={};this.is("desktopContainer")&&(f.scale=1);a&&a.scaleOverride&&(f.scale=a.scaleOverride);a=window.innerWidth;a+25<(1<d?this._componentWidths.multiple*d+0:this._componentWidths.single)&&(b=Math.min(1,b));if(1<b)for(a=0;a<d;a+=1)this._bannerComponents[a].updateLayout({height:100,
width:this._componentWidths.multiple},f);else if(1===b){if(1<d)for(var e=1;e<d;e+=1)this._bannerComponents[e].getElement().style.visibility="hidden",this._bannerComponents[e].getElement().style.display="none";a=this.is("desktopContainer")?this._componentWidths.single:a;this._bannerComponents[0].updateLayout({height:100,width:a},f)}e=f=0;if(1<b){var g=b=0,k=0;for(a=0;a<d;a+=1){var l=this._bannerComponents[a].getElement(),s=this._bannerComponents[a].getElementProportions(),t=s.scale*s.width,s=s.scale*
s.height,f=f+t;s>e&&(e=s);l.style.left="0px";l=l.offsetLeft;l>g?(g=l,b=a):k=t+0}this._bannerComponents[b].getElement().style.left=k+"px";f+=0}else 1===b&&(f=this._bannerComponents[0],d=f.getElement(),a=f.getElementProportions(),f=a.scale*a.width,e=a.scale*a.height,d.style.left="0px");this._componentContainer.style.width=f+"px";this._componentContainer.style.height=e+"px";this._componentContainerSize={width:f,height:e};d=this.getDisplayHeight();d!==this._fixedContainerHeight&&(this._fixedContainer.style.height=
d+"px",this._fixedContainerHeight=d)}}}());a.SettingsOBC=a.SettingsOBC||a.KioskedObject.extend(function(){function e(a){a=g.trim(a);return 0<a.length?("."===a[0]&&(a=a.substr(1)),"."===a[a.length-1]&&(a=a.substr(0,a.length-1)),a.split(".")):[a]}function c(a){var b={},c,e,g,k;for(k in a)if(a.hasOwnProperty(k)){c=b;e=k.split(".");for(var l=e.pop();e.length;)g=e.shift(),c=c[g]=c[g]||{};c[l]=a[k]}return b}return{construct:function(d){this.$super();this._settingsObj=d=d||{};if("object"!==typeof this._settingsObj)throw new a.Exceptions.InvalidTypeException("object",
typeof this._settingsObj,this);if(this._settingsObj instanceof a.SettingsOBC)throw new a.Exceptions.InvalidTypeException("object","ITGS.SettingsOBC",this);this._settingsObj=c(this._settingsObj)},clone:function(){return new a.SettingsOBC(this.getSettingsObject())},get:function(a,b){if(-1!==a.indexOf(".")){var c=e(a);if(this._settingsObj.hasOwnProperty(c[0])){var p=this.getSubset(c[0]),c=c.splice(1),c=c.join(".");return p.get(c,b)}return b}return this._settingsObj.hasOwnProperty(a)?this._settingsObj[a]:
b},getBool:function(a,b){var c=this.get(a,b),e;"true"===c||"false"===c?e="true"===c:(!0===c||!1===c)&&(e=c);g.isset(e)||(e=g.isset(b)?!!b:!!c);return"undefined"===typeof e?!1:e},getInt:function(a,b){b=g.isset(b)?b:0;var c=parseInt(this.get(a,b),10);return isNaN(c)||void 0===c?b:c},getSettingsObject:function(){return g.deepClone(this._settingsObj)},getSubset:function(c){if(-1!==c.indexOf(".")){var b=e(c);return this._settingsObj.hasOwnProperty(b[0])?(c=this.getSubset(b[0]),b=b.splice(1),b=b.join("."),
c.getSubset(b)):new a.SettingsOBC({})}return this._settingsObj.hasOwnProperty(c)?new a.SettingsOBC(this._settingsObj[c]):new a.SettingsOBC({})},isSet:function(a){if(-1!==a.indexOf(".")){var b=e(a);if(this._settingsObj.hasOwnProperty(b[0]))return a=this.getSubset(b[0]),b=b.splice(1),b=b.join("."),a.isSet(b)}else return this._settingsObj.hasOwnProperty(a);return!1},mergeSettings:function(d,b){if(d instanceof a.SettingsOBC)this.mergeSettings(d.getSettingsObject(),b);else if(b=g.isset(b)?!!b:!0,"object"===
typeof d)this._settingsObj=b?g.mergeDefaults(this._settingsObj,d):g.mergeDefaults(d,this._settingsObj),this._settingsObj=c(this._settingsObj);else throw new a.Exceptions.InvalidTypeException("object",typeof d,this);}}}());a.TargetedSettingsFeeder=a.TargetedSettingsFeeder||a.KioskedObject.extend(function(){return{construct:function(a){this.$super();this.settings=a},getOBCForElement:function(e){g.scope.enforceCaller(e,HTMLElement,"Expected HTMLElement");var c={},d={},b;for(b in this.settings)if(this.settings.hasOwnProperty(b)){var f=
g.dom.query(b);if(f&&0<f.length)for(var p=0;p<f.length;p+=1){var q=f[p];if(e===q||a.tools.dom.isDescendant(q,e)){var c=g.mergeDefaults(c,this.settings[b]),f=g.flattenSettings(this.settings[b]),k;for(k in f)f.hasOwnProperty(k)&&(d[k]={value:f[k],selectorUsed:b});break}}}e=new a.SettingsOBC(c);e.setMeta("targeting_selectors",d);return e}}}());a.URLParser=a.URLParser||a.KioskedObject.extend(function(){var a=/#[-_a-zA-Z0-9.%]+$/,c=/^[-_a-zA-Z0-9:/\.@%+~|]+/,d=/\?[-_a-zA-Z0-9=&.+|~"{}^\[\]%;]+/;return{construct:function(a){this._originalURL=
a},getFragment:function(){var b;(b=this._matchedFragment)||(b=this.matchRegularExpression(this.getOriginalURL(),a).replace("#",""));return this._matchedFragment=b},getOriginalURL:function(){return this._originalURL},getPath:function(){return this._matchedPath=this._matchedPath||this.matchRegularExpression(this._originalURL,c)},getQuery:function(){var a;(a=this._matchedQuery)||(a=this.matchRegularExpression(this.getOriginalURL(),d).substring(1));return this._matchedQuery=a},getQueryParameters:function(){var a=
this.getQuery(),a=a.replace("&amp;","__AMPERSAND_PLACEHOLDER__"),a=a.split("&"),c={};if(0<a.length)for(var d=0;d<a.length;d+=1){var e=a[d].replace("__AMPERSAND_PLACEHOLDER__","&amp;").split("=");2===e.length&&(c[e[0]]=e[1])}return c},matchRegularExpression:function(a,c){var d=a.match(c);return d?g.array.isArray(d)?d[0]:d:""}}}());a.Facades.URLProcessing=a.Facades.URLProcessing||function(){return{getURLPathOnly:function(a){return a.split("?")[0]},getURLWithAlphabetizedParameters:function(e){var c=
new a.URLParser(e);e=c.getPath();var d=c.getQueryParameters(),c=c.getFragment(),d=g.encoding.formURLStringFromParameters(d,["ALPHABETIZE"]);0<d.length&&(e+="?"+d);0<c.length&&(e+="#"+c);return e},getURLWithoutFragment:function(e){var c=new a.URLParser(e);e=c.getPath();c=c.getQuery();0<c.length&&(e+="?"+c);return e}}}();a.Plugins.Plugin=a.Plugins.Plugin||a.KioskedObject.extend(function(){return{__include__:[a.Includes.EventsHelper],construct:function(a){this._options=a;this._maxPerMedia=this._initialized=
!1;this.$super()},getMedia:function(){return this._media},getName:function(){return this._options.hasOwnProperty("name")?this._options.name:""},getOptions:function(){return this._options},getSettings:function(){return this._settings},initialize:function(){this._initialized=!0},isBuilt:function(){return this.$super()&&!0===this._initialized},attachTo:function(e,c){this._media=e;this._settings=new a.SettingsOBC({});var d=this.getOptions();if(d.extensionOf&&g.array.isArray(d.extensionOf)){var b=d.extensionOf.length;
if(0<b)for(var f=0;f<b;f+=1)this._settings.mergeSettings(this.getMedia().getSettings().getSubset("plugins."+d.extensionOf[b]),!0)}this._settings.mergeSettings(this.getMedia().getSettings().getSubset("plugins."+this.getName()),!0);if(0<this._listeners.length){for(d=0;d<this._listeners.length;d+=1)this._media.addListener(this._listeners[d].listener,this._listeners[d].callback,this._listeners[d].element);this._listeners=[]}c||this.initialize&&this.initialize()},destroy:function(){},setMaximumPerMedia:function(a){this._maxPerMedia=
a},getMaximumPerMedia:function(){return this._maxPerMedia}}}());a.Overlay=a.Overlay||a.KioskedObject.extend(function(){return{__include__:[a.Includes.EventsHelper],construct:function(e,c){this._container=null;this._options=c=g.mergeDefaults({insertNode:null,styleClass:"OverlayPlugin",cssClass:"",coordinates:{x:0,y:0,z:0,width:0,height:0},settings:{}},c);this._settings=new a.SettingsOBC(c.settings);this.$super();if(e){this._media=e;this._coordinates=c.coordinates;c.insertNode&&(this._insertNode=c.insertNode);
var d=c.styleClass,b=c.cssClass;g.scope.enforceCaller(this,a.Overlay,"Caller not instance of Overlay");this._container=g.create("div",{className:"OverlayContainer "+d,cssClass:b},this._insertNode);this._coordinates.x&&this.moveTo(this._coordinates.x,this._coordinates.y);this._coordinates.width&&this.setSize(this._coordinates.width,this._coordinates.height)}else console.log("Media needs to be specified for overlay")},moveTo:function(a,c){this._container.style.left=isNaN(a)?a:a+"px";this._container.style.top=
isNaN(c)?c:c+"px";this._coordinates.left=isNaN(a)?this._container.offsetLeft:a;this._coordinates.top=isNaN(c)?this._container.offsetTop:c},moveBy:function(a,c){this.moveTo(this._coordinates.left+a,this._coordinates.top+c)},setSize:function(a,c){a&&(this._container.style.width=isNaN(a)?a:a+"px",this._coordinates.width=isNaN(a)?this._container.offsetWidth:a);c&&(this._container.style.height=isNaN(c)?c:c+"px",this._coordinates.height=isNaN(c)?this._container.offsetHeight:c)},getSettings:function(){return this._settings},
getSize:function(){this._coordinates.width||(this._coordinates.width=this._container.offsetWidth);this._coordinates.height||(this._coordinates.height=this._container.offsetHeight);return{width:this._coordinates.width,height:this._coordinates.height}},getCoordinates:function(){return this._coordinates},getContainer:function(){return this._container},getInsertNode:function(){return this._insertNode},getMedia:function(){return this._media},getOptions:function(){return this._options}}}());a.EventDispatcher=
a.EventDispatcher||a.KioskedObject.extend(function(){function e(b,c){g.scope.enforceCaller(this,a.EventDispatcher,"Caller not instance of EventDispatcher");this._domEventsSet.hasOwnProperty(b)||(this._domEventsSet[b]=[]);this._domEventsSet[b].push(c)}function c(b,c){g.scope.enforceCaller(this,a.EventDispatcher,"Caller not instance of EventDispatcher");return this._domEventsSet.hasOwnProperty(b)?-1!==this._domEventsSet[b].indexOf(c):!1}function d(c){g.scope.enforceCaller(this,a.EventDispatcher,"Caller not instance of EventDispatcher");
var d=this;c=document;d.listen(c,c.webkitCancelFullScreen?"webkitfullscreenchange":c.msExitFullscreen?"MSFullscreenChange":c.mozCancelFullScreen?"mozfullscreenchange":"fullscreenchange",function(a){a.fullscreenTarget=b.call(d);d.dispatch("onfullscreenchange",a)})}function b(){var a;a=document;a=a.ownerDocument?a.ownerDocument:a;if(!(a.exitFullscreen||a.webkitExitFullscreen||a.webkitCancelFullScreen||a.msExitFullscreen||a.mozCancelFullScreen))return null;var b=!!a.fullscreenElement||!!a.msFullscreenElement||
!!a.webkitIsFullScreen||!!a.mozFullScreen;return b?a.fullscreenElement||a.webkitFullscreenElement||a.webkitCurrentFullScreenElement||a.msFullscreenElement||a.mozFullScreenElement||b:b}return{construct:function(){this._domEventsSet={};var b=["webkit","moz","o","ms","khtml"];a.supportsFullScreen=!1;for(var c=0,d=b.length;c<d;c+=1)if(a.brwsrprefix=b[c],"undefined"!==typeof document[a.brwsrprefix+"CancelFullScreen"]){a.supportsFullScreen=!0;break}this._callbacks={};this.$super()},addListener:function(a,
b,g){if(this.destroying&&!0===this.destroying)return console.warn("Tried adding listeners during destruction",a),null;var k=this,l;l=g?g:k.getContainer();var s=!1;"ONFULLSCREENCHANGE"===a.toUpperCase()?d.call(k,b,g):(a in document.documentElement||a in window)&&!c.call(this,a,l)&&("onresize"!==a?(s=function(b){!b.srcElement||"target"in b||(b.target=b.srcElement);k.dispatch(a,{event:b,relatedElement:l})},k.listen(l,a,s)):s=window[a]=function(b){k.dispatch(a,{event:b,relatedElement:l})},e.call(this,
a,l));this._callbacks[a]||(this._callbacks[a]=[]);var t={callback:b,element:l};!1!==s&&(t.eventFunction=s);this._callbacks[a].push(t);return{listener:a,element:g,callback:b}},listen:function(a,b,c){a.attachEvent?a.attachEvent(b,c):a.addEventListener&&("on"===b.substring(0,2)&&(b=b.substring(2)),a.addEventListener(b,c,!1))},dispatch:function(b,c,d){var e;a.tools.isset(d)||(d=this instanceof a.Media?this.getEventHash():a.tools.getRandomInt(1,999999));if(this._callbacks&&this._callbacks.hasOwnProperty(b))for(e=
this._callbacks[b],b=0;b<e.length;b+=1)if(!c||!c.hasOwnProperty("relatedElement")||c.relatedElement===e[b].element){var g=c;c&&c.hasOwnProperty("event")&&(g=c.event);e[b].callback(g,d)}},destroy:function(){this.destroying=!0;for(var a in this._callbacks)if(this._callbacks.hasOwnProperty(a)&&0<this._callbacks[a].length)for(var b=0;b<this._callbacks[a].length&&!this.removeListener(a,this._callbacks[a][b].callback,this._callbacks[a][b].element);b+=1);this._callbacks=null;delete this._callbacks},getContainer:function(){return!1},
removeListener:function(b,d,e){var k=!1;if("string"===typeof b&&"function"===typeof d){var l=!1;if(e&&e instanceof HTMLElement&&c.call(this,b,e))a:{g.scope.enforceCaller(this,a.EventDispatcher,"Caller not instance of EventDispatcher");if(c.call(this,b,e)&&(l=this._domEventsSet[b].indexOf(e),this._domEventsSet[b].splice(l,1),0>=this._domEventsSet[b].length)){delete this._domEventsSet[b];l=!0;break a}l=!1}for(var s in this._callbacks)if(this._callbacks.hasOwnProperty(s)&&s===b){var t=this._callbacks[s],
h=t.length;if(0<h){for(var m=!1,n=0;n<h;n+=1)if(t[n].callback===d){m=!0;l&&t[n].hasOwnProperty("eventFunction")&&this.unlisten(e,b,t[n].eventFunction);this._callbacks[s].splice(n,1);break}if(m){0>=this._callbacks[s].length&&(delete this._callbacks[s],k=!0);break}}}}else throw new a.Exceptions.InvalidTypeException("string/function",typeof b+"/"+typeof d,this);return k},unlisten:function(a,b,c){a.detachEvent?a.detachEvent(b,c):a.removeEventListener&&("on"===b.substring(0,2)&&(b=b.substring(2)),a.removeEventListener(b,
c,!1))},isBuilt:function(){return this.$super()}}}());a.Plugins.OverlayPlugin=a.Plugins.OverlayPlugin||a.Plugins.Plugin.extend(function(){return{construct:function(a){this._container=null;a=g.mergeDefaults({insertNode:null,styleClass:"OverlayPlugin",name:"OverlayPlugin"},a);this.$super(a);a.insertNode&&(this._insertNode=a.insertNode);this._className=a.styleClass},attachTo:function(e){this._insertNode||(this._insertNode=e.getContainer());-1!==this.$super(e,!0)&&(e=this._className,g.scope.enforceCaller(this,
a.Plugins.OverlayPlugin,"Caller not an instance of OverlayPlugin"),this._container=g.create("div",{className:"PluginContainer "+e},this._insertNode),this.initialize&&this.initialize())},destroy:function(){this._container&&g.dom.destroy(this._container);this.$super()},getContainer:function(){return this._container},getContainerSize:function(){return{width:this._container.offsetWidth,height:this._container.offsetHeight}},getInsertNode:function(){return this._insertNode},hide:function(){this._container.style.display=
"none"},show:function(){this._container.style.display="block"}}}());a.Plugins.Analytics=a.Plugins.Analytics||a.Plugins.Plugin.extend(function(){return{construct:function(a){a=g.mergeDefaults({name:"Analytics"},a);this.$super(a)},initialize:function(){this.$super()},prepareAnalyticsURL:function(a){a=g.trim(a);var c=a.toLowerCase();"http://"!==c.substr(0,7)&&"https://"!==c.substr(0,8)&&"//"!==c.substr(0,2)&&(a="//"+a);return a}}}());a.Plugins.KioskedAnalytics=a.Plugins.KioskedAnalytics||a.Plugins.Analytics.extend(function(){function e(){g.scope.enforceCaller(this,
a.Plugins.KioskedAnalytics,"Expected caller to be of type ITGS.Plugins.KioskedAnalytics");var b=this;this.addListener(a.Config.ANALYTICS_EVENT_NAME,function(f,d){var e=c.call(b,f,d);if(e.hasOwnProperty(b.getEventNameProperty())&&"string"===typeof e[b.getEventNameProperty()])b.sendAnalyticsEvent(e[b.getEventNameProperty()],e);else throw new a.Exceptions.BadOptionException("Invalid event specification for KioskedAnalytics",b,e);})}function c(b,c){g.scope.enforceCaller(this,a.Plugins.KioskedAnalytics,
"Expected caller to be of type ITGS.Plugins.KioskedAnalytics");var d=g.deepClone(b);d._event&&(d.event=b._event,delete d._event);d.event_id=c;return d}var d=["pageDataInvalid"];return{construct:function(a){a=a||{};this._eventsBuffer=[];a=g.mergeDefaults({name:"KioskedAnalytics"},a);this.$super(a);this.setMaximumPerMedia(1)},initialize:function(){e.call(this);this.setFlushTimer();var b=this;a.unloadManager.registerShutdownHandler(function(){b.flushSendBuffer();b.destroy()},a.UnloadManager.PRIORITY_HIGH);
this.$super()},destroy:function(){this.flushSendBuffer();this._flushTimer&&clearInterval(this._flushTimer);this.$super()},flushSendBuffer:function(){if(0<this._eventsBuffer.length){for(var a,c={};a=this._eventsBuffer.shift();){c.hasOwnProperty(a.destination)||(c[a.destination]=[]);var d=this.prepareEventItem(a);this.sampleRateCancelsEvent(d["cntr.type"],d._type)?0===c[a.destination].length&&delete c[a.destination]:c[a.destination].push(d)}for(var e in c)c.hasOwnProperty(e)&&g.communication.sendRequest({destination:e,
method:"POST",errorCallback:function(){throw Error("(Kiosked) Failed sending analytics");},data:{json:JSON.stringify(c[e])}});this._eventsBuffer=[]}},getEventNameProperty:function(){return a.Config.ANALYTICS_EVENT_NAME_PROPERTY},getRandomNumber:function(){return a.Config.SAMPLE_RATE_RANDOM_CURRENT},getSampleRate:function(b,c){return"normal"===b?a.Config.SAMPLE_RATE_0_5:"banner"===b?a.Config.SAMPLE_RATE_CONTAINER_IMP:"pageImpression"===c?a.Config.SAMPLE_RATE_PAGE_IMP:a.Config.SAMPLE_RATE_SEND_ALL},
prepareEventItem:function(b){var c={};b=b.properties;c._type=b[this.getEventNameProperty()];for(var d in b)b.hasOwnProperty(d)&&("_"===d[0]&&"_type"!==d?g.debug.log("/KioskedAnalytics/","Bad parameter name '"+d+"'"):c[d]=b[d]);if(!a.tools.isset(c._type)||a.tools.isset(c._type)&&a.tools.isEmpty(c._type))throw new a.Exceptions.InvalidPropertiesException("Analytics packet doesn't contain a '_type' property",this,c);c.sample_rate=this.getSampleRate(c["cntr.type"],c._type);a.tools.debug.log("/KioskedAnalytics/ "+
c._type,c);return c},sampleRateCancelsEvent:function(a,c){var e=this.getSampleRate(a,c);return 0<=d.indexOf(c)?!1:this.getRandomNumber()>=e},sendAnalyticsEvent:function(a,c){if("production"===g.environment.getContext())return this._eventsBuffer.push({event:a,properties:c,destination:"http://events.kiosked.com/u"}),!0;if("staging"===g.environment.getContext())return this._eventsBuffer.push({event:a,properties:c,destination:"http://events.intags.com/u"}),!0;c.sample_rate=this.getSampleRate(c["cntr.type"],
c[this.getEventNameProperty()]);g.debug.log("/KioskedAnalytics/ "+a,c,"(log only)");return!1},setFlushTimer:function(a){g.isset(a)||(a=500);var c=this;this._flushTimer&&clearInterval(this._flushTimer);this._flushTimer=setInterval(function(){c.flushSendBuffer()},a)}}}());a.LightBoxComponent=a.LightBoxComponent||a.KioskedObject.extend(function(){return{construct:function(e){e=e||{};e=g.mergeDefaults({name:"LightBoxComponent"},e);var c=this;this.$super(e);this._mainContainer=g.create("div",{cssClass:a.Config.LIGHTBOX_DIV_CLASS},
document.body);a.styling.selectStyle("ExpandableBannerContainerBox").applyToElement(this.getMainContainer());this._container=document.createElement("div");a.styling.selectStyle("ExpandableBannerContentBox").applyToElement(this.getContainer());this.getMainContainer().addEventListener("click",function(d){d.target&&d.target===c._mainContainer&&a.LightBoxComponent.getSharedInstance().hideContent(c.defaultSiteOverflow)});window.addEventListener("resize",function(){c.is("shown")&&c.centerContent(c.originalWidth,
c.originalHeight)})},centerContent:function(a,c){var d,b,f;d=document.documentElement.clientWidth;a<d?d=1:(d=.9*document.documentElement.clientWidth,d=parseFloat(d/a).toFixed(2),this.contentElement.style.transformOrigin="0 0",this.contentElement.style.msTransformOrigin="0 0",this.contentElement.style.WebkitTransformOrigin="0 0",this.contentElement.style.OTransformOrigin="0 0");b=Math.floor(a*d);f=Math.floor(c*d);this.getContainer().style.width=b+"px";this.getContainer().style.height=f+"px";this.getContainer().style.marginLeft=
-b/2+"px";this.getContainer().style.marginTop=-f/2+"px";this.contentElement.style.transform="scale("+d+")";this.contentElement.style.msTransform="scale("+d+")";this.contentElement.style.WebkitTransform="scale("+d+")";this.contentElement.style.OTransform="scale("+d+")"},destroy:function(){this.getMainContainer().parentNode.removeChild(this.getMainContainer());this.$super()},getMainContainer:function(){return this._mainContainer},getContainer:function(){return this._container},hideContent:function(a){var c=
this;this.is("shown")&&(this.unset("shown"),this.bodyElement.style.overflow=a,g.animate(this.getMainContainer(),{duration:600,properties:{opacity:0},easing:"inOutQuintic",callback:function(){c.getMainContainer().style.display="none";c.getContainer().innerHTML=""}}))},showContent:function(e,c,d,b){var f=this;this.is("shown")||(this.set("shown"),this.originalWidth=d,this.originalHeight=b,this.contentElement=document.createElement("div"),this.contentElement.innerHTML=e,this.centerContent(this.originalWidth,
this.originalHeight),this.getMainContainer().setAttribute("tabindex","1"),this.getMainContainer().appendChild(this.getContainer()),this.getContainer().appendChild(this.contentElement),this.bodyElement=document.getElementsByTagName("body")[0],this.defaultSiteOverflow=this.bodyElement.style.overflow,this.bodyElement.style.overflow="hidden",c&&(a.styling.selectStyle("ExpandableBannerDisclaimerContainer").applyToElement(c.getContainer()),this.getContainer().appendChild(c.getContainer()),a.tools.dom.addEvent(c.getCloseButtonContainer(),
"click",function(){f.hideContent(f.defaultSiteOverflow)})),g.animate(this.getMainContainer(),{duration:500,properties:{opacity:1},easing:"inOutQuintic",callback:function(){f.getMainContainer().style.display="block";g.animate(f.getContainer(),{duration:500,properties:{opacity:1},easing:"inOutQuintic"});c&&c.show()}}))}}}());a.LightBoxComponent.getSharedInstance=function(){a.LightBoxComponent._sharedInstance=a.LightBoxComponent._sharedInstance||new a.LightBoxComponent;return a.LightBoxComponent._sharedInstance};
a.AdProvider=a.AdProvider||a.KioskedObject.extend(function(){function e(d){g.scope.enforceCaller(this,a.AdProvider,"Context not met: ITGS.AdProvider");var b=this.getOptions(),f=a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.WIDTH,e=a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.HEIGHT,q=document.createElement("div");q.id="kiosked-dfp-"+b.kioskID;q.style.width=f+"px";q.style.height=e+"px";q.style.bottom="0px";q.style.position="absolute";var k=document.createElement("style");k.appendChild(document.createTextNode(""));
document.head.appendChild(k);a.tools.addCSSRule(k.sheet,"#"+q.id+" *[id^='google_ads_iframe']","width: "+f+"px !important");k=document.createElement("script");k.setAttribute("type","text/javascript");f=""+("window.ITGS.gptAdSlots = window.ITGS.gptAdSlots || [];googletag.cmd.push(function () {window.ITGS.gptAdSlots["+c+'] = googletag.defineSlot("'+d+'", ['+f+", "+e+'], "kiosked-dfp-'+b.kioskID+'").addService(googletag.pubads());');f+="googletag.pubads().updateCorrelator();googletag.pubads().enableSingleRequest();";
f+="googletag.enableServices();});googletag.cmd.push(function () {googletag.pubads().refresh([gptAdSlots["+c+"]]);});";k.innerHTML=f;q.appendChild(k);q.setAttribute(a.Config.DFP_ELEMENT_PLACEMENT_ID_ATTR,d);setTimeout(function(){googletag.cmd.push(function(){googletag.display("kiosked-dfp-"+b.kioskID)})},1);this._DFPInstanceID=c;c+=1;return q}var c=0;return{construct:function(c){this.$super();c=c||{};this._options=g.mergeDefaults({name:"AdProvider",provider:"none",settings:{},settingsOBC:null,orientation:"horizontal",
allowedZones:[]},c);this._DFPElement=this._zoneID=null;this._DFPInstanceID=-1;this._waterfallIndex=0;this._fallbacks=[];this._sourceURL="";this._settings=this._options.settingsOBC||new a.SettingsOBC(this._options.settings);this.addStatus("available");this.addStatus("ready");this.addStatusSet("horizontal horizontalSmall vertical mobile mediumRect mediumMobileRect video".split(" "),this._options.orientation)},createElement:function(){var c=this.getFallbackAtIndex(this.getWaterfallIndex());if(c){if("dfp"===
c.name.toLowerCase())return this._DFPElement=e.call(this,c.zone);g.scope.enforceCaller(this,a.AdProvider,"Context not met: ITGS.AdProvider");var c=this.getOptions(),b=document.createElement("iframe");b.setAttribute("id","kbanner"+c.kioskID);b.setAttribute("frameborder","0");b.setAttribute("scrolling","no");b.setAttribute("ALLOWTRANSPARENCY","true");b.setAttribute("MARGINHEIGHT","0");b.setAttribute("MARGINWIDTH","0");b.setAttribute("TOPMARGIN","0");b.setAttribute("LEFTMARGIN","0");b.style.position=
"absolute";b.style.left="0px";b.style.bottom="0px";b.style.border="none";b.style.WebkitTransformOrigin="0% 100%";b.style.MozTransformOrigin="0% 100%";b.style.msTransformOrigin="0% 100%";b.style.OTransformOrigin="0% 100%";b.style.transformOrigin="0% 100%";b.style.setProperty("max-width","none","important");b.style.setProperty("min-height","0","important");b.style.setProperty("margin","0 0","important");b.style.setProperty("margin","0 0","important");b.setAttribute("kskd-src",this.getSourceURL());return b}return null},
destroy:function(){this.unset("ready");this.unset("available");this.$super()},getDFPElement:function(){return this._DFPElement},getDFPInstanceID:function(){return this._DFPInstanceID},getFallbackAtIndex:function(a){return this._fallbacks.length>a?this._fallbacks[a]:!1},getMediaSizeSettings:function(){return{minWidth:this._options.minWidth,maxWidth:this._options.maxWidth}},getName:function(){return this._options.name},getOptions:function(){return this._options},getSettings:function(){return this._settings},
getSourceURL:function(){return this._sourceURL},getType:function(){return this.is("horizontal")?"horizontal":this.is("horizontalSmall")?"horizontalSmall":this.is("vertical")?"vertical":this.is("mobile")?"mobile":this.is("mediumRect")?"mediumRect":this.is("mediumMobileRect")?"mediumMobileRect":this.is("video")?"video":""},getWaterfallIndex:function(){return this._waterfallIndex},getZone:function(){var a=this.getZoneID();return a?a:!1},getZoneID:function(){return this._zoneID},incrementWaterfallIndex:function(){this._waterfallIndex+=
1;var a=this.getFallbackAtIndex(this._waterfallIndex);a&&this.setZoneID(a.zone);return this.getWaterfallIndex()},initProvider:function(a){return!0},isMobile:function(){return g.isMobileType.any},load:function(){},findMostSuitableZone:function(c){var b=this.getSettings(),f=this.getOptions(),e=this.isMobile(),g=a.tools.compatibility.bindFunction(function(a,b){0>=this._fallbacks.length&&this._fallbacks.push({name:a,zone:b,meta:""})},this);this.mobileZoneId=this.zoneIDAllowed("mobileZoneId")?b.get("mobileZoneId",
!1):!1;this.mediumMobileRectZoneId=this.zoneIDAllowed("mediumMobileRectZoneId")?b.get("mediumMobileRectZoneId",!1):!1;this.mediumRectZoneId=this.zoneIDAllowed("mediumRectZoneId")?b.get("mediumRectZoneId",!1):!1;this.horizontalZoneId=this.zoneIDAllowed("horizontalZoneId")?b.get("horizontalZoneId",!1):!1;this.horizontalSmallZoneId=this.zoneIDAllowed("horizontalSmallZoneId")?b.get("horizontalSmallZoneId",!1):!1;this.verticalZoneId=this.zoneIDAllowed("verticalZoneId")?b.get("verticalZoneId",!1):!1;this.videoZoneVastUrl=
this.zoneIDAllowed("videoZoneVastUrl")?b.get("videoZoneVastUrl",!1):!1;this.dfpOverride728=this.getSettings().get("dfp728ZoneId",!1);var k=b.getInt("minMediaSize.horizontalSmallWidth",300),l=b.getInt("maxMediaSize.horizontalSmallWidth",489),s=b.getInt("minMediaSize.medRectWidth",350),t=b.getInt("maxMediaSize.medRectWidth",900),h=b.getInt("minMediaSize.medMobileRectWidth",200),m=b.getInt("maxMediaSize.medMobileRectWidth",400),n=b.getInt("minMediaSize.horizontalWidth",490),y=b.getInt("maxMediaSize.horizontalWidth",
900),w=b.getInt("minMediaSize.verticalHeight",330),x=b.getInt("maxMediaSize.verticalHeight",650),N=b.getInt("minMediaSize.mobileWidth",250),C=b.getInt("maxMediaSize.mobileWidth",900),B=b.getInt("minMediaSize.videoWidth",490),b=b.getInt("maxMediaSize.videoWidth",900);if(this.dfpOverride728&&5<this.dfpOverride728.length)return this.setZoneID(this.dfpOverride728,"horizontal"),g("dfp",this.dfpOverride728),!0;if(!0===f.ignoreMediaSize){if(this.mobileZoneId&&e)return this.setZoneID(this.mobileZoneId,"mobile"),
g("appnexus",this.mobileZoneId),!0;if(this.mediumMobileRectZoneId&&e)return this.setZoneID(this.mediumMobileRectZoneId,"mediumMobileRect"),g("appnexus",this.mediumMobileRectZoneId),!0;if(this.mediumRectZoneId)return this.setZoneID(this.mediumRectZoneId,"mediumRect"),g("appnexus",this.mediumRectZoneId),!0;if(this.horizontalZoneId)return this.setZoneID(this.horizontalZoneId,"horizontal"),g("appnexus",this.horizontalZoneId),!0;if(this.horizontalSmallZoneId)return this.setZoneID(this.horizontalSmallZoneId,
"horizontalSmall"),g("appnexus",this.horizontalSmallZoneId),!0;if(this.videoZoneVastUrl)return this.setZoneID(this.videoZoneVastUrl,"video"),g("vast",this.videoZoneVastUrl),!0}else{if(c.width>=N&&c.width<=C&&this.mobileZoneId&&e)return this.setZoneID(this.mobileZoneId,"mobile"),g("appnexus",this.mobileZoneId),this.setMediaSizeSettings({minWidth:N,maxWidth:C}),!0;if(c.width>=h&&c.width<=m&&this.mediumMobileRectZoneId&&e)return this.setZoneID(this.mediumMobileRectZoneId,"mediumMobileRect"),g("appnexus",
this.mediumMobileRectZoneId),this.setMediaSizeSettings({minWidth:h,maxWidth:m}),!0;if(c.width>=s&&c.width<=t&&this.mediumRectZoneId)return this.setZoneID(this.mediumRectZoneId,"mediumRect"),g("appnexus",this.mediumRectZoneId),this.setMediaSizeSettings({minWidth:s,maxWidth:t}),!0;if(c.width>=n&&c.width<=y&&this.horizontalZoneId)return this.setZoneID(this.horizontalZoneId,"horizontal"),g("appnexus",this.horizontalZoneId),this.setMediaSizeSettings({minWidth:n,maxWidth:y}),!0;if(c.width<=l&&c.width>=
k&&this.horizontalSmallZoneId)return this.setZoneID(this.horizontalSmallZoneId,"horizontalSmall"),g("appnexus",this.horizontalSmallZoneId),this.setMediaSizeSettings({minWidth:k,maxWidth:l}),!0;if(c.height<=x&&c.height>=w&&this.verticalZoneId)return this.setZoneID(this.verticalZoneId,"vertical"),g("appnexus",this.verticalZoneId),!0;if(c.width>=B&&c.width<=b&&this.videoZoneVastUrl)return this.setZoneID(this.videoZoneVastUrl,"video"),g("vast",this.videoZoneVastUrl),this.setMediaSizeSettings({minWidth:B,
maxWidth:b}),!0}this.horizontalZoneId||this.horizontalSmallZoneId||this.verticalZoneId||this.mobileZoneId||this.mediumRectZoneId||this.mediumMobileRectZoneId||this.videoZoneVastUrl?a.tools.debug.log("/AdProvider/","No suitable zone found: Media size may be insufficient due to media size restrictions (check your minimums and maximums)",c):a.tools.debug.log("/AdProvider/","No suitable zone found: No zone-ID found",this.horizontalZoneId,this.horizontalSmallZoneId,this.verticalZoneId,this.mobileZoneId,
this.mediumRectZoneId,this.mediumMobileRectZoneId,this.videoZoneVastUrl);return!1},setMediaSizeSettings:function(a){this._options.minWidth=a.minWidth;this._options.maxWidth=a.maxWidth},refreshDFP:function(){if(null!==this.getDFPElement())try{var c=a.gptAdSlots[this.getDFPInstanceID()];googletag.pubads().refresh([c])}catch(b){}},resetWaterfallIndex:function(){this._waterfallIndex=0;this._fallbacks=[]},setZoneID:function(c,b){this._zoneID=c;a.tools.isEmpty(b)||this.set(b)},updateStatus:function(){this.unset("available");
var a=this.getSettings().getInt("mobileZoneId",0),b=this.getSettings().getInt("horizontalZoneId",0),c=this.getSettings().getInt("horizontalSmallZoneId",0),e=this.getSettings().getInt("verticalZoneId",0),q=this.getSettings().getInt("mediumRectZoneId",0),k=this.getSettings().getInt("mediumMobileRectZoneId",0),l=this.getSettings().get("videoZoneVastUrl",null),b=this.getSettings().get("dfp728ZoneId",0)||b;this.zoneSet(b)||this.zoneSet(c)||this.zoneSet(e)||this.zoneSet(a)||this.zoneSet(q)||this.zoneSet(k)||
this.zoneSet(l)?0<this.getOptions().kioskID.length?this.set("available"):g.debug.log("/AdProvider/","No Kiosk ID"):g.debug.log("/AdProvider/","No zone ID set:",this.getZoneID())},zoneIDAllowed:function(a){var b=this.getOptions();return b.allowedZones&&0<b.allowedZones.length?0<=b.allowedZones.indexOf(a):!0},zoneSet:function(c){return a.tools.isString(c)?0<a.tools.trim(c).length:0<c}}}());a.AdProviders.ReviveProvider=a.AdProviders.ReviveProvider||a.AdProvider.extend(function(){return{construct:function(a){a=
a||{};a=g.mergeDefaults({name:"ReviveProvider",provider:"revive",kioskID:"",categories:{},ignoreMediaSize:!1},a);a.kioskID=""+a.kioskID;this.$super(a);this._adServerPath=this.getSettings().get("providers.ReviveProvider.URLPath","//ad.kiosked.com/www/delivery/");this.updateStatus()},initProvider:function(e){this.$super();var c=this.getSettings(),d=this.getOptions();if(!this.findMostSuitableZone(d.containerSize))return!1;var b={refresh:"",what:"",cb:""},f="";if(c.getBool("useOwnInventory",!1)){if(this.getOptions().categories.focus100k)for(c=
0;c<this.getOptions().categories.focus100k.length;c+=1)f+=this.getOptions().categories.focus100k[c].title+"|";if(this.getOptions().categories.iabtier2)for(c=0;c<this.getOptions().categories.iabtier2.length;c+=1)f+=this.getOptions().categories.iabtier2[c].title+"|"}b.refresh="";(c=this.getZoneID())&&g.isset(c)&&(b.what=f+"zone:"+c);b.cb=d.kioskID;if(0>=b.what.length||0>=b.cb.length)throw g.debug.log("Invalid or missing properties for Revive ad provider:",b,"from options:",d),new a.Exceptions.InvalidPropertiesException("Missing required properties for Revive ad provider",
this,b);d=g.encoding.formURLStringFromParameters(b);this._sourceURL=this._adServerPath+"afr.php?"+d;this.set("ready");"function"===typeof e&&e();return!0}}}());a.AdProviders.AppNexusProvider=a.AdProviders.AppNexusProvider||a.AdProvider.extend(function(){function e(){g.scope.enforceCaller(this,a.AdProviders.AppNexusProvider,"Context not met: ITGS.AdProviders.AppNexusProvider");var f=this;a.messaging.addListener("appNexusFallbacksReceived",function(c){b.call(f,c.frame_urls||[])&&(f._fallbacks=f._fallbacks.concat(c.zones),
a.tools.debug.log("/AppNexusProvider/","Received "+c.zones.length+" fallback zones"),f.executeNextFallback())});a.messaging.addListener("appNexusFallbackInitiated",function(d){d.hasOwnProperty("dfpFrame")&&c.call(f,d.dfpFrame)?!1!==f.dfpOverride728&&(f.dfpOverride728=!1,f.horizontalZoneId=f.zoneIDAllowed("horizontalZoneId")?f.getSettings().get("horizontalZoneId",!1):!1,f.horizontalZoneId&&(f.setZoneID(f.horizontalZoneId),a.tools.debug.log("/AppNexusProvider/","Received fallback request from DFP"),
f._fallbacks.push({name:"appnexus",zone:f.horizontalZoneId,meta:""}),f.executeNextFallback())):b.call(f,d.frame_urls||[])&&(a.tools.debug.log("/AppNexusProvider/","Received fallback request"),f.executeNextFallback())})}function c(b){g.scope.enforceCaller(this,a.AdProviders.AppNexusProvider,"Context not met: ITGS.AdProviders.AppNexusProvider");return 0<b.length&&null!==this._DFPElement?(b=document.querySelectorAll('[id="'+b+'"]'),b=0<b.length?b[0]:!1,b instanceof HTMLIFrameElement&&a.tools.dom.isDescendant(this._DFPElement,
b)):!1}function d(){g.scope.enforceCaller(this,a.AdProviders.AppNexusProvider,"Context not met: ITGS.AdProviders.AppNexusProvider");return this.is("mobile")?a.Config.BANNER_SIZE_STANDARDS.MOBILE:this.is("horizontalSmall")?a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL_SMALL:this.is("vertical")?a.Config.BANNER_SIZE_STANDARDS.VERTICAL:a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL}function b(b){g.scope.enforceCaller(this,a.AdProviders.AppNexusProvider,"Context not met: ITGS.AdProviders.AppNexusProvider");var c=
b.length,d=this.getSourceURL(),e;for(e=0;e<c;e+=1)if(d===b[e])return!0;d=this.getOptions();for(e=0;e<c;e+=1){var l=!1;try{var s=new a.URLParser(b[e]),t=decodeURIComponent(s.getQuery()),l=(new RegExp("tt\\?.+?cb="+d.kioskID)).test(t)}catch(h){}if(l)return!0}return!1}return{construct:function(a){a=a||{};a=g.mergeDefaults({name:"AppNexusProvider",provider:"appnexus",kioskID:"",categories:{},ignoreMediaSize:!1},a);a.kioskID=""+a.kioskID;this.$super(a);this._adServerPath="https:"===g.pageProtocol?this.getSettings().get("AppNexusProvider.URLPath",
"https://secure.adnxs.com/"):this.getSettings().get("AppNexusProvider.URLPath","http://ib.adnxs.com/");e.call(this);this.updateStatus()},executeNextFallback:function(){var b=this.incrementWaterfallIndex();if(b>=this._fallbacks.length)return a.messaging.dispatch("providerFallbacksReachedEnd",{kioskID:this.getOptions().kioskID}),!1;var c=this._fallbacks[b],e=new a.AppNexusProviderURLResolver(c,d.call(this),this.getOptions().kioskID),g=e.getNetworkURL();if(!1!==g)return a.messaging.dispatch("providerURLImmediateFallback",
{provider:this,url:g,index:b,network:e.getNetworkName(),zone:e.getNetworkZone()}),this._sourceURL=g;a.tools.debug.log("/AppNexusProvider/","Attempted to process zone: ",c);a.tools.debug.error("/AppNexusProvider/","Something went wrong executing the next fallback","("+b+")");return!1},initProvider:function(b){this.$super();var c=this.getOptions();if(this.hasNot("foundZone")){if(!this.findMostSuitableZone(c.containerSize))return!1;this.set("foundZone")}c=this.getFallbackAtIndex(this.getWaterfallIndex());
if(a.tools.isEmpty(c))throw Error("(Kiosked) Failed finding current fallback");this._sourceURL=(new a.AppNexusProviderURLResolver(c,d.call(this),this.getOptions().kioskID)).getNetworkURL();this.set("ready");"function"===typeof b&&b();return!0}}}());a.AdProviders.VastPrerollProvider=a.AdProviders.VastPrerollProvider||a.AdProvider.extend(function(){function e(b,d){g.scope.enforceCaller(this,a.AdProviders.VastPrerollProvider,"Context not met: ITGS.AdProviders.VastPrerollProvider");b=c(b);a.tools.communication.sendRequest({destination:b,
method:"GET",errorCallback:function(){throw Error("Failed sending load vast request");},callback:function(a){d(a)}})}function c(b){null!==b&&0<b.length&&(b=b.replace("[CACHE_BREAKER]",Math.round(1E8*Math.random())),b=b.replace("[PAGE_URL]",a.tools.environment.getPageUrl()));return b}function d(b,c){g.scope.enforceCaller(this,a.AdProviders.VastPrerollProvider,"Context not met: ITGS.AdProviders.VastPrerollProvider");c=c||function(){};var q=this;if(b)if(q._vastResponseText=b,q._vastResponse=(new DOMParser).parseFromString(q._vastResponseText,
"text/xml"),0<q._vastResponse.getElementsByTagName("VASTAdTagURI").length){var k=q._vastResponse.getElementsByTagName("VASTAdTagURI")[0].textContent;e.call(q,k,function(a){d.call(q,a,c)})}else-1<q._vastResponseText.indexOf('type="application/x-shockwave-flash"')||-1<q._vastResponseText.indexOf('type="video/x-flv"')?this._videoFormat="flash":/type ?= ?"video\/(mp4|ogg|webm)"/i.test(q._vastResponseText)?this._videoFormat="html5":this._videoFormat="unknown",c(q._videoFormat);else g.debug.log("/VastPrerollProvider/ No vast response")}
function b(b){g.scope.enforceCaller(this,a.AdProviders.VastPrerollProvider,"Context not met: ITGS.AdProviders.VastPrerollProvider");var c=this;this.hasPreInitiated(this.getVideoFormat())?b():e.call(this,c.videoZoneVastUrl,function(a){d.call(c,a,function(a){if(("flash"===a||"unknown"===a)&&!window.hasOwnProperty("swfobject")){var d=document.createElement("script");d.setAttribute("src","//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js");document.head.appendChild(d)}"html5"!==a&&"unknown"!==
a||window.hasOwnProperty("google")&&google.ima&&google.ima.AdsLoader||(d=document.createElement("script"),d.setAttribute("src","//imasdk.googleapis.com/js/sdkloader/ima3.js"),document.head.appendChild(d));var e=function(){c.hasPreInitiated(a)?b():setTimeout(e,100)};setTimeout(e,100)})})}return{construct:function(a){a=a||{};a=g.mergeDefaults({name:"VastPrerollProvider",provider:"vastpreroll",kioskID:"",categories:{},ignoreMediaSize:!0},a);a.kioskID=""+a.kioskID;this.$super(a);this.updateStatus();this._videoFormat=
this._vastResponseText=this._vastResponse=null},findMostSuitableZone:function(a){var b=this.getSettings(),c=this.getOptions();if(this.isMobile())return!1;this.videoZoneVastUrl=this.zoneIDAllowed("videoZoneVastUrl")?b.get("videoZoneVastUrl",null):null;var d=b.getInt("minMediaSize.videoWidth",490),b=b.getInt("maxMediaSize.videoWidth",900);if(!0===c.ignoreMediaSize){if(this.videoZoneVastUrl)return this.set("video"),this.setZoneID(this.videoZoneVastUrl),!0}else if(a.width>=d&&a.width<=b&&this.videoZoneVastUrl)return this.set("video"),
this.setZoneID(this.videoZoneVastUrl),!0;this.videoZoneVastUrl?g.debug.log("/VastPrerollProvider/","No suitable zone found: Media size may be insufficient due to media size restrictions (check your minimums and maximums)",a):g.debug.log("/VastPrerollProvider/","No suitable zone found: No zone-ID found",this.videoZoneVastUrl);return!1},createElement:function(){this._element||(this._element=document.createElement("div"));return this._element},getVastResponse:function(){return this._vastResponse},getVastResponseText:function(){return this._vastResponseText},
getVideoFormat:function(){return this._videoFormat},hasPreInitiated:function(a){return"flash"===a?window.hasOwnProperty("swfobject"):"html5"===a?window.hasOwnProperty("google")&&google.ima&&google.ima.AdsLoader:window.hasOwnProperty("swfobject")&&window.hasOwnProperty("google")&&google.ima&&google.ima.AdsLoader},initProvider:function(c){this.$super();var d=this,e=d.getOptions();if(!d.findMostSuitableZone(e.containerSize))return a.tools.debug.warning("/VastPrerollProvider/","Failed init'ing provider: Unable to find suitable zone"),
!1;var k={},l=d.getZoneID();l&&g.isset(l)&&(k.id=l);k.cb=e.kioskID;k.referrer=encodeURIComponent(g.environment.getPageUrl());if(!k.hasOwnProperty("id")||k.id&&0>=k.id.length)throw new a.Exceptions.InvalidPropertiesException("Missing property 'id' for VastPrerollProvider provider (zone ID)",d,k);if(!k.hasOwnProperty("cb")||k.cb&&0>=k.cb.length)throw new a.Exceptions.InvalidPropertiesException("Missing property 'cb' for VastPrerollProvider provider (kiosk ID)",d,k);b.call(this,function(){d.set("ready");
"function"===typeof c&&c()});return!0},updateStatus:function(){this.unset("available");var a=this.getSettings().get("videoZoneVastUrl",null);a&&0<a.length?0<this.getOptions().kioskID.length?this.set("available"):g.debug.log("/VastPrerollProvider/","No Kiosk ID"):g.debug.log("/VastPrerollProvider/","No zone ID set:",this.getZoneID())}}}());a.AppNexusProviderURLResolver=a.AppNexusProviderURLResolver||a.KioskedObject.extend(function(){return{construct:function(e,c,d){this.$super();this._zoneData=e;this._bannerSize=
c||a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL;this._cacheBuster=d||this.generateCacheBuster()},destroy:function(){this.$super()},generateCacheBuster:function(){return Math.floor(899999*Math.random())+1E5},getCacheBuster:function(){return this._cacheBuster},getNetworkMeta:function(){return this.getZoneData().meta},getNetworkName:function(){return this.getZoneData().name},getNetworkURL:function(){switch(this.getNetworkName().toLowerCase()){case "appnexus":g.scope.enforceCaller(this,a.AppNexusProviderURLResolver,
"Context not met: ITGS.AppNexusProviderURLResolver");var e={id:this.getNetworkZone(),size:this._bannerSize.WIDTH+"x"+this._bannerSize.HEIGHT,cb:this.getCacheBuster(),referrer:a.tools.environment.getPageUrl()};return("https:"===a.tools.pageProtocol?"https:":"http:")+"//ib.adnxs.com/tt?"+a.tools.encoding.formURLStringFromParameters(e,["ENCODE_VALUE"]);case "openx":return g.scope.enforceCaller(this,a.AppNexusProviderURLResolver,"Context not met: ITGS.AppNexusProviderURLResolver"),e={auid:this.getNetworkZone(),
cb:this.getCacheBuster()},("https:"===a.tools.pageProtocol?"https:":"http:")+"//us-ads.openx.net/w/1.0/afr?"+a.tools.encoding.formURLStringFromParameters(e,["ENCODE_VALUE"]);case "criteo":g.scope.enforceCaller(this,a.AppNexusProviderURLResolver,"Context not met: ITGS.AppNexusProviderURLResolver");var e="https:"===a.tools.pageProtocol?"https://":"http://",e=e+"cas.criteo.com/delivery/afr.php",c={zoneid:this.getNetworkZone(),cb:this.getCacheBuster(),loc:window.location};return e+"?"+a.tools.encoding.formURLStringFromParameters(c,
["ENCODE_VALUE"]);case "aol":return g.scope.enforceCaller(this,a.AppNexusProviderURLResolver,"Context not met: ITGS.AppNexusProviderURLResolver"),("https:"===a.tools.pageProtocol?"https:":"http:")+"//adserver.adtechus.com/addyn|3.0|9573.1|"+this.getNetworkZone()+"|0|225|ADTECH;loc=100;target=_blank;misc="+this.getCacheBuster()+";rdclick=";case "dfp":return"";default:return!1}},getNetworkZone:function(){return this.getZoneData().zone},getZoneData:function(){return this._zoneData}}}());a.MessageHandlers.MessageHandlerAbstract=
a.MessageHandlers.MessageHandlerAbstract||a.KioskedObject.extend(function(){return{construct:function(a){this.$super();this._options=g.mergeDefaults({name:"MessageHandlerAbstract"},a||{})},canHandleMessage:function(a){return!1},captures:function(){return!1},getOptions:function(){return this._options},handleMessage:function(a){}}}());a.MessageHandlers.AppNexusMessageHandler=a.MessageHandlers.AppNexusMessageHandler||a.MessageHandlers.MessageHandlerAbstract.extend(function(){function e(c){return a.tools.scope.hasOwnProperties(c,
["data","origin","source"],function(a,b){return a[b]&&!0})}return{construct:function(a){this.$super();this._options=g.mergeDefaults({name:"AppNexusMessageHandler",messageSource:null},a||{})},canHandleMessage:function(a){return e(a)&&"string"===typeof a.data?!0===/^kskd_window_message:\{(.*)+$/.test(a.data):!1},handleMessage:function(a){var d=a.data,d=d.replace("kskd_window_message:",""),b=!1;try{b=JSON.parse(d)}catch(f){g.debug.warn("/AppNexusMessageHandler/","Received bad message:",f,a)}!1!==b&&
this.processMessageObject(b)},processMessageObject:function(c){var d=this.getOptions();c.hasOwnProperty("name")?"ping"===c.name?d.messageSource instanceof a.MessageSources.FrameMessageSource&&d.messageSource.sendMessage({name:"ping_response"}):"fallback_list"===c.name?a.messaging.dispatch("appNexusFallbacksReceived",{zones:c.appnexus_fallback_list||[],frame_urls:c.window_chain||[]}):"fallback_initiated"===c.name?(d={frame_urls:c.window_chain||[]},c.dfpFrame&&(d.dfpFrame=c.dfpFrame),a.messaging.dispatch("appNexusFallbackInitiated",
d)):"kiosked_ad_expand"===c.name&&a.messaging.dispatch("kiosked_ad_expand",c):g.debug.error("No name for event:",c)}}}());a.MessageSources.MessageSourceAbstract=a.MessageSources.MessageSourceAbstract||a.KioskedObject.extend(function(){return{construct:function(a){this.$super();this._options=g.mergeDefaults({name:"MessageSourceAbstract"},a||{})},canReceiveMessage:function(){return!1},getOptions:function(){return this._options},sendMessage:function(){return!1}}}());a.MessageSources.FrameMessageSource=
a.MessageSources.FrameMessageSource||a.MessageSources.MessageSourceAbstract.extend(function(){return{construct:function(a){this.$super(g.mergeDefaults({name:"FrameMessageSource",sourceFrame:null},a||{}))},canReceiveMessage:function(){var a=this.getOptions();return null!==a.sourceFrame&&"function"===typeof a.sourceFrame.postMessage},sendMessage:function(a){var c=!1;try{var d=JSON.stringify(a);d&&(this.getOptions().sourceFrame.postMessage(d,"*"),c=!0)}catch(b){g.debug.error("/FrameMessageSource/","Failed sending message",
a,b)}return c}}}());a.Media=a.Media||a.EventDispatcher.extend(function(){function e(){g.scope.enforceCaller(this,a.Media,"Caller not instance of ITGS.Media");var b=this;this.addListener("bannerOnScreen",function(c){c=c||{};var d=c.force&&!0===c.force;c=g.isset(c.count)?c.count:1;b.has("firedContainerImpression")&&!d||!b.hasPluginOfType(a.Plugins.BannerSlotAbstract)||(b.set("firedContainerImpression"),d=b.getAnalyticsContainerData(),d[a.Config.ANALYTICS_EVENT_NAME_PROPERTY]="containerImpression",d.count=
c,b.dispatch(a.Config.ANALYTICS_EVENT_NAME,d))});this.addListener("mediaOnScreen",function(){if(!b.has("firedContainerImpression")&&0<b.hasPlugin("BannerSlot")){b.set("firedContainerImpression");var c=b.getAnalyticsContainerData();c[a.Config.ANALYTICS_EVENT_NAME_PROPERTY]="containerImpression";b.dispatch(a.Config.ANALYTICS_EVENT_NAME,c)}});this.addListener("mediaHovered",function(a){b.set("manualInteraction")});this.addListener("mediaClicked",function(a){});this.addListener("containerTypeChanged",
function(a){b._containerType=a.toLowerCase()})}function c(b){g.scope.enforceCaller(this,a.Media,"Caller not instance of Media");if(this._buildMediaCalled)console.warn("BuildMedia called more than once");else{this._buildMediaCalled=!0;this._mediaId=b.mediaId;this._contentOwnerId=b.contentOwnerId;this._domainName=b.domainName;this._resDomainName=b.resDomainName;this._authToken=b.authToken;this._sliderAllowed=b.sliderAllowed;this._options=g.mergeDefaults(this._options,b);var c=new a.SettingsOBC(this._options.settings);
a.messaging.dispatch("mediaSettingsApplied",{media:this,settings:c});this._settings=c.getSubset("ui.media");this._snifferSettings=c.getSubset("ui.sniff");this.addStatus("executedTargetedSettings");this.firstNode=this._mediaNode;this._insertNode&&(this._mediaNode=g.create("div",{className:"MediaContainer",cssClass:"kskdCls",id:b.containerId?b.containerId:""},this._insertNode,this._mediaPosition),this._size={width:this._mediaNode.offsetWidth,height:this._mediaNode.offsetHeight},this.hasNot("addedPlugins")&&
(this.processTargetedSettings(),this.runPluginLoader()));e.call(this);var d=this;setTimeout(function(){d.set("built")},50)}}function d(){g.scope.enforceCaller(this,a.Media,"Caller not instance of Media");var b=this;a.hasNot("firedPageImpression")&&(a.set("firedPageImpression"),this._pageImpressionTimeout=setTimeout(function(){if(a.hasNot("sentPageImpression")){a.set("sentPageImpression");var c=g.environment.getAnalyticsPageData(b);c[a.Config.ANALYTICS_EVENT_NAME_PROPERTY]="pageImpression";b.dispatch(a.Config.ANALYTICS_EVENT_NAME,
c);a.messaging.dispatch("mediaPageImpression",{media:b})}},this.getSettings().getInt("analytics.pageImpressionDelay",1250)))}return{construct:function(a){this._options=a=g.mergeDefaults({domainName:"widgets.kiosked",resDomainName:"widgets.kiosked",environment:"development",language:"eng",plugins:[],analyticsOn:!0,context:"",settings:{},settingsMeta:{},categories:{},mediaType:"",kioskId:0,mediaZoneID:""},a);this._plugins=[];this.$super();this.addStatus("built");this.addStatus("addedPlugins");this._lastMediaPosition=
{left:-1,top:-1,width:0,height:0};this._size={width:0,height:0};this._screenPos=this._mediaPosition=!1;this._kioskId=a.kioskId;this._categories=a.categories;this._pageImpressionTimeout=null;this._containerType="normal";this._options.hasOwnProperty("delayBuild")&&!0===this._options.delayBuild?this.set("delayedBuild"):c.call(this,this._options)},addPlugin:function(b){if(!(b instanceof a.Plugins.Plugin))throw new a.Exceptions.InvalidTypeException("ITGS.Plugins.Plugin",typeof b,this);var c=this.hasPlugin(b.getName());
if(0<c){var d=b.getMaximumPerMedia();if(!1!==d&&d>=c){g.debug.log("/Media/","Warning: More instances of a plugin were added than are allowed ("+b.getName()+")");return}}this._plugins.push(b);b.attachTo(this)},buildWithData:function(a){this.isBuilt()||c.call(this,a)},destroy:function(){g.scope.enforceCaller(this,a.Media,"Caller not instance of Media");try{this.unset("addedPlugins")}catch(b){console.warn("Failed using status: addedPlugins")}var c=this._plugins.length;if(0<c){for(c-=1;0<=c;c-=1){var d=
this._plugins[c],e=d.getName();try{d.destroy()}catch(k){g.debug.warn("/Media/","Failed removing plugin: "+e)}finally{this._plugins[c]=null,this._plugins.splice(c,1)}}this._plugins=[]}this.$super()},getCategories:function(){return this._categories},getInsertElement:function(){return this._insertNode},getContainer:function(){return this._mediaNode},getContext:function(){return this._options.hasOwnProperty("context")?this._options.context:""},getEventHash:function(){var b=g.environment.getPageUrl(),
b=a.SnifferUtilities.processPageURL(b),c=this.getContentOwnerId();return a.tools.environment.generateEventHash(c,b)},isBuilt:function(){var b;if(b=this.$super()&&this.is("built"))if(g.scope.enforceCaller(this,a.Media,"Caller not instance of Media"),b=!1,0>=this._options.plugins.length||this.has("addedPlugins")){b=!0;var c=this._plugins.length;if(0<c)for(var d=0;d<c;d+=1)if(!0!==this._plugins[d].isBuilt()){b=!1;break}}return b},getAlbumId:function(){return this.getOptions().albumId},getContentOwnerId:function(){return this._contentOwnerId},
getAuthToken:function(){return this._authToken},getContainerType:function(){return this._containerType},getMediaId:function(){return this._mediaId},getKioskId:function(){return this._kioskId},getMediaType:function(){return this.getOptions().mediaType},getPlacementType:function(){return this.hasPluginOfType(a.Plugins.FloorBannerSlot)?"in-screen":this.hasPluginOfType(a.Plugins.VastPreroll)||this.hasPluginOfType(a.Plugins.ExternalBannerSlot)?"in-line":this.hasPluginOfType(a.Plugins.ExpandableBannerSlot)||
this.hasPluginOfType(a.Plugins.BannerSlot)?"in-media":""},getPageImpressionTimeout:function(){return this._pageImpressionTimeout},getAnalyticsContainerData:function(){var b={"cntr.id":"","cntr.type":this._containerType,"cntr.slot":"","cntr.first":!1,"cntr.segment":"","cntr.categories":[],"cntr.subcategories":[],"cntr.keywords":[],"cntr.placement_type":this.getPlacementType(),"cntr.banner.zone_type":"","cntr.banner.zone_id":0,"cntr.banner.provider":""},c=this.getOptions(),d=this.getPlugins(),e=d.length;
if(0<e)for(var k=0;k<e;k+=1)if(d[k]instanceof a.Plugins.BannerSlotAbstract){d=d[k].getBannerAdDetails();b["cntr.banner.zone_type"]=d.type;b["cntr.banner.zone_id"]=d.zone_id;b["cntr.banner.provider"]=d.provider;break}d=g.environment.getMediaContainerIndex(this);b["cntr.first"]=0===d;b["cntr.slot"]=d;d=this.getSettingsSegmentData();d.status===a.Config.SETTINGS_AB_TEST_OVERRIDE_NONE?b["cntr.segment"]="default":d.status===a.Config.SETTINGS_AB_TEST_OVERRIDE_FAIL?b["cntr.segment"]="override":d.status===
a.Config.SETTINGS_AB_TEST_OVERRIDE_FULL&&(b["cntr.segment"]=d.test);c.mediaZoneID&&(b["cntr.id"]=c.mediaZoneID);c.categories&&(c.categories.iabtier1&&g.array.isArray(c.categories.iabtier1)&&(b["cntr.categories"]=c.categories.iabtier1),c.categories.iabtier2&&g.array.isArray(c.categories.iabtier2)&&(b["cntr.subcategories"]=c.categories.iabtier2),c.categories.focus100k&&g.array.isArray(c.categories.focus100k)&&(b["cntr.keywords"]=c.categories.focus100k));return b=g.mergeDefaults(b,g.environment.getAnalyticsPageData())},
getOptions:function(){return this._options},setOptions:function(a){this._options=a},getSettingsSegmentData:function(){var a=-1,c="",d=this.getOptions();d.hasOwnProperty("settingsMeta")&&(a=d.settingsMeta.hasOwnProperty("appliedAbTestStatus")?d.settingsMeta.appliedAbTestStatus:a,c=d.settingsMeta.hasOwnProperty("appliedAbTest")?d.settingsMeta.appliedAbTest:c);return{status:a,test:c}},getScreenPosition:function(){!1===this._screenPos&&this._mediaNode&&(this._screenPos=this._mediaNode.getBoundingClientRect());
return this._screenPos},getMediaPosition:function(){if(!1===this._mediaPosition&&this._mediaNode){var a=g.getElementOffset(this._mediaNode);this._mediaPosition={left:a.left,top:a.top}}return this._mediaPosition},setMediaSize:function(a){a&&a.hasOwnProperty("width")&&a.hasOwnProperty("height")&&(this._size=a)},getMediaSize:function(){return this._size},getContainerSize:function(){return{width:this._mediaNode.offsetWidth,height:this._mediaNode.offsetHeight}},getSettings:function(){return this._settings},
getPlugins:function(){return this._plugins||[]},getZoneID:function(){var a=this.getOptions();return a.mediaZoneID?a.mediaZoneID:!1},hasPlugin:function(a){var c=this.getPlugins(),d=c.length,e=0;if(0<d)for(var g=0;g<d;g+=1)c[g].getName()===a&&(e+=1);return e},hasPluginInOptions:function(a,c){g.isset(c)||(c=this.getOptions());var d=0;if(c.hasOwnProperty("plugins")&&g.array.isArray(c.plugins)){var e=c.plugins.length;if(0<e)for(var k=0;k<e;k+=1)c.plugins[k].name===a&&(d+=1)}return d},hasPluginOfType:function(a){var c=
this.getPlugins(),d=c.length,e=0;if(0<d)for(var g=0;g<d;g+=1)c[g]instanceof a&&(e+=1);return e},processTargetedSettings:function(b){if(this.has("executedTargetedSettings"))return!1;this.set("executedTargetedSettings");b||(b=this._mediaNode);b=(new a.TargetedSettingsFeeder(this._options.targetedSettings)).getOBCForElement(b).get("ui.media",{});this._settings.mergeSettings(b);return!0},removePlugin:function(a){var c=this._plugins.indexOf(a),d=a.getName();if(0<=c)try{a.destroy()}catch(e){console.warn("Failed removing plugin",
a,"("+d+")")}finally{this._plugins[c]=null,this._plugins.splice(c,1)}return!1},removePluginByName:function(a){var c=this._plugins.length;if(0<c)for(c-=1;0<=c;c-=1){var d=this._plugins[c];d.getName()===a&&this.removePlugin(d)}},runPluginLoader:function(){if(this._pluginLoader){if(this.has("addedPlugins"))throw new a.Exceptions.DuplicateActionException("Cannot run plugin loader again",this._pluginLoader,this);this._pluginLoader.destroy()}this._pluginLoader=new a.MediaPluginLoader(this);this._pluginLoader.preprocessOptions();
this._pluginLoader.buildPlugins();this._pluginLoader.processRequiredPlugins();this.hasPluginOfType(a.Plugins.BannerSlotAbstract)&&d.call(this)},getSliderAllowed:function(){return this._sliderAllowed},setContainer:function(a){this._mediaNode=a;if(!this._size||0===this._size.width&&0===this._size.height)this._size={width:this._mediaNode.offsetWidth,height:this._mediaNode.offsetHeight};this.hasNot("addedPlugins")&&this._insertNode&&this.hasNot("delayedBuild")&&(this.processTargetedSettings(),this.runPluginLoader())},
setMediaPosition:function(a){this._mediaPosition=a},setScreenPosition:function(a){"object"===typeof a&&(this._screenPos=a)},setInsertElement:function(a){this._insertNode=a;this.hasNot("addedPlugins")&&this._mediaNode&&this.hasNot("delayedBuild")&&(this.processTargetedSettings(),this.runPluginLoader())}}}());a.MediaElement=a.MediaElement||a.Media.extend(function(){function e(){g.scope.enforceCaller(this,a.MediaElement,"Expected caller to be instance of MediaElement");var b=this,f=null,e=this.getSettings().get("cutSizeFromParents",
"auto");0!==parseInt(e,10)&&(f=c.call(this,e,b._targetElement));var q=this.getSettings().get("cutLeftSideByElement",!1),k=this.getSettings().get("cutRightSideByElement",!1),l=this.getSettings().get("cutTopSideByElement",!1),s=this.getSettings().get("cutBottomSideByElement",!1);q&&(q=g.dom.query(q)[0]);k&&(k=g.dom.query(k)[0]);l&&(l=g.dom.query(l)[0]);s&&(s=g.dom.query(s)[0]);"image"===this.getMediaType()&&(this._targetElement.onload=function(){d.call(b,b._targetElement,f,q,k,l,s)});this.addListener("onmouseover",
function(a){a.target&&a.target===b._targetElement&&b.dispatch("mediaHovered","image")},this._targetElement);this.addListener("onclick",function(a){!0===b._fingerCancelClick?b._fingerCancelClick=!1:b.dispatch("mediaClicked",{selectionType:"click",mediaType:"image"})},this._targetElement);this.addListener("ontouchstart",function(a){b._fingerMovement=0;b._fingerLastPos={x:a.touches[0].pageX,y:a.touches[0].pageY}},this._targetElement);this.addListener("ontouchmove",function(a){if(!1!==b._fingerMovement){var c=
g.distanceBetweenPoints(b._fingerLastPos,{x:a.touches[0].pageX,y:a.touches[0].pageY});b._fingerMovement=g.addPoints(b._fingerMovement,c);b._fingerLastPos={x:a.touches[0].pageX,y:a.touches[0].pageY}}},this._targetElement);this.addListener("ontouchend",function(a){!1!==b._fingerMovement&&(5>=b._fingerMovement?(b._fingerCancelClick=!0,b.dispatch("mediaClicked",{selectionType:"tap",mediaType:"image"})):b._fingerCancelClick=!1);b._fingerMovement=!1;b._fingerLastPos=!1},this._targetElement);this.addListener("onresize",
function(a){d.call(b,b._targetElement,f,q,k,l,s)});var t=0,e=this.getSettings().getInt("adjustInterval",700)+(Math.round(100*Math.random())-50);400>e&&(e=400+Math.round(100*Math.random())-50);var h=1/3*100;b.hasPlugin("MobileCarousel")&&(h=10);var m=function(){g.scope.enforceCaller(this,a.MediaElement,"Expected caller to be instance of MediaElement");if(g.dom.isElementInDocument(this._mediaNode)){this._hidden&&(this._relContainer.style.display="block",this._hidden=!1);d.call(this,this._targetElement,
f,q,k,l,s);if(0===t){var b=g.calculateZIndexOfChildren(this.getInsertElement()),c=this.getSettings().get("zIndex",b).toString(),b="+"===c.charAt(0)?b+parseInt(c,10):"-"===c.charAt(0)?b-Math.abs(parseInt(c,10)):parseInt(c,10);this._currentZindex!==b&&(this._currentZindex=this._relContainer.style.zIndex=b);t=1}else t=0;if(this.hasPlugin("HorizontalStandardCarousel")||this.hasPlugin("VerticalStandardCarousel")||this.hasPlugin("MobileCarousel"))b=this._onScreen,c=g.isOnScreen(this.getContainer(),this.getScreenPosition()),
!1===b&&c>=h?(this._onScreen=c,this.dispatch("mediaOnScreen","image")):0<b&&!1===c&&(this._onScreen=c);this.dispatch("mediaUpdateTick")}else a.destructors.destroyMedia(this)};this._adjustInterval=setInterval(g.compatibility.bindFunction(m,b),e);m.call(b)}function c(a,f){var d=null,e=null,k=0,l=null;if("auto"===a){for(var d=f.parentNode,s=0;10>s&&d&&d!==window.document;s+=1){if("hidden"===document.defaultView.getComputedStyle(d,null).overflow){null===e&&(e=d);var h=g.getIntersectedSize(f,d);h.areaDiff>
k&&(k=h.areaDiff,l=d)}d=d.parentNode}d=null!==l?l:e}else{for(e=0;e<a;e+=1)if(null===d)d=f.parentNode;else if(d.parentNode)d=d.parentNode;else return d;e=document.defaultView.getComputedStyle(d,null).overflow;if("A"===d.tagName.toUpperCase()&&"hidden"!==e)return c(1,d)}return d}function d(b,c,d,e,k,l){g.scope.enforceCaller(this,a.MediaElement,"Expected caller to be instance of MediaElement");var s=!1,h=!1,m=!1,r,n,y,w,x;if(b&&b instanceof HTMLElement){if(!(this._mediaNode&&this._mediaNode instanceof
HTMLElement))throw new a.Exceptions.NullElementException("_mediaNode was null or not set to an element",this);this._lastRelPosition.hasOwnProperty("left")&&this._lastRelPosition.hasOwnProperty("top")&&(m=g.getElementOffset(this._relContainer,!0,!0),m.left!==this._lastRelPosition.left||m.top!==this._lastRelPosition.top)&&(this._lastRelPosition.left=m.left,this._lastRelPosition.top=m.top,s=!0);if(c){var N=g.getIntersectedSize(b,c);c=N.left;r=N.top;y=parseInt(N.width,10);n=parseInt(N.height,10);w=a.tools.isDifferentPosition(N,
this._lastMediaPosition);x=a.tools.isDifferentSize(N,this._lastMediaPosition);if(w||x)this._lastMediaPosition=N,s||(s=w),h||(h=x);N.screenPos1&&this.setScreenPosition(N.screenPos1)}else if(w=g.getElementOffset(b),n=w.screen,this.setScreenPosition(n),c=w.left,r=w.top,c+=w.border.left+w.padding.left,r+=w.border.top+w.padding.top,y=parseFloat(n.width),n=parseFloat(n.height),y-=w.border.left+w.border.right+w.padding.left+w.padding.right,n-=w.border.top+w.border.bottom+w.padding.top+w.padding.bottom,N=
{left:c,top:r,width:y,height:n},w=a.tools.isDifferentPosition(N,this._lastMediaPosition),x=a.tools.isDifferentSize(N,this._lastMediaPosition),w||x)this._lastMediaPosition=N,s||(s=w),h||(h=x);y=0>y?0:y;n=0>n?0:n;if(e||d||k||l){var C;e&&(C=g.getSubtractedSize({left:c,top:r,width:y,height:n},e,"right"));d&&(C=C?g.getSubtractedSize(C,d,"left"):g.getSubtractedSize({left:c,top:r,width:y,height:n},d,"left"));k&&(C=C?g.getSubtractedSize(C,k,"top"):g.getSubtractedSize({left:c,top:r,width:y,height:n},k,"top"));
l&&(C=C?g.getSubtractedSize(C,l,"bottom"):g.getSubtractedSize({left:c,top:r,width:y,height:n},l,"bottom"));C&&(w=a.tools.isDifferentPosition(C,this._lastMediaPositionWithCutters),x=a.tools.isDifferentSize(C,this._lastMediaPositionWithCutters),w||x)&&(this._lastMediaPositionWithCutters=C,y=C.width,n=C.height,r=C.top,c=C.left,s||(s=w),h||(h=x))}(s||h)&&(0<y&&0<n||a.tools.hasClass(b,"kskdInlineZone"))&&(this._relContainer&&m&&(r-=m.top,c-=m.left),this.is("heightLargerThanMedia")&&(b=n,n=this.getMediaSize().height,
r-=n-b),r=Math.ceil(r),b=this.getContainer(),b.style.width=y+"px",b.style.height=n+"px",b.style.top=r+"px",b.style.left=c+"px",this.setMediaSize({width:y,height:n}),this.setMediaPosition({left:c,top:r}),c={left:c,top:r,width:y,height:n},h&&this.dispatch("mediaResized",c),s&&this.dispatch("mediaMoved",c),this.hasNot("triggeredFoundMedia")&&(this.dispatch("imageFound",this),this.set("triggeredFoundMedia")))}}return{construct:function(b){b&&b.nodeId&&""!==b.nodeId&&(b.insertNode=document.getElementById(b.nodeId));
b=g.mergeDefaults({domainName:"widgets.kiosked",resDomainName:"widgets.kiosked",environment:"development",language:"eng",analyticsOn:!0,plugins:[{name:"BannerSlot",options:{}}]},b);var c;b.mediaNode&&b.mediaNode instanceof HTMLElement?c=b.mediaNode:b.mediaZoneID&&0<b.mediaZoneID.length&&(c=g.findMediaByZoneId(b.mediaZoneID));this.$super(b);this._lastRelPosition={left:-1,top:-1};this._lastMediaPositionWithCutters={left:-1,top:-1,width:0,height:0};this._onScreen=!1;this._hidden=!0;this.addStatus("triggeredFoundMedia");
this._fingerCancelClick=this._fingerLastPos=this._fingerMovement=!1;c&&(this._targetElement=c,g.scope.enforceCaller(this,a.MediaElement,"Expected caller to be instance of MediaElement"),b=this._targetElement.parentNode,"a"===b.tagName.toLowerCase()&&(b=b.parentNode),this._currentZindex=c=g.calculateZIndexOfChildren(b),this._relContainer=g.create("div",{cssClass:"kskdCls",id:"kskd"+this._kioskId,style:{position:"relative",display:"none",width:"0px",height:"0px",zIndex:c}},b),a.styling.placeHeaderStylesheetWithNamespace("clearStyles_"+
this._kioskId,this._kioskId),c=g.create("div",{className:"ImageContainer"},this._relContainer),this.setContainer(c),this.setInsertElement(b),e.call(this))},destroy:function(){this._adjustInterval&&clearInterval(this._adjustInterval);this._targetElement&&g.removeAttributes(this._targetElement,"kiosked");this._relContainer&&a.tools.dom.destroy(this._relContainer);this.$super()},getMediaType:function(){0>=this.getOptions().mediaType.length&&this.hasNot("processedMediaType")&&(this.set("processedMediaType"),
this._targetElement&&(this._targetElement instanceof HTMLImageElement?this.getOptions().mediaType="image":g.dom.isVideoElement(this._targetElement)&&(this.getOptions().mediaType="video")));return this.$super()},getTargetElement:function(){return this._targetElement},processTargetedSettings:function(){return this.$super(this._targetElement)}}}());a.QuantcastManager=a.QuantcastManager||a.KioskedObject.extend(function(){return{construct:function(e){this.$super();e=e||{};this._options=a.tools.mergeDefaults({name:"QuantcastManager",
publisherID:"",siteID:""},e);this.addStatus("setupQuantcast")},boot:function(){if(this.hasNot("setupQuantcast")){g.scope.enforceCaller(this,a.QuantcastManager,"Expected caller to be instance of QuantcastManager");var e=this.getOptions();this.set("setupQuantcast");try{this._initiateQuantcastScript(),this._pushEvent(e.publisherID,e.siteID),a.tools.debug.log("/QuantcastManager/","Quantcast booted publisher "+e.publisherID+" and site "+e.siteID)}catch(c){a.tools.debug.error("/QuantcastManager/","Failed setting up Quantcast: "+
c.message)}}},getOptions:function(){return this._options},_initiateQuantcastScript:function(a){a=a||function(a){var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};window._qevents=window._qevents||[];var c=document.createElement("script");c.src=("https:"===document.location.protocol?"https://secure":"http://edge")+".quantserve.com/quant.js";c.async=!0;c.type="text/javascript";a(c);return c},_pushEvent:function(a,c){window._qevents.push({qacct:"p-ynz_3dxL9ZLvx",labels:"publisher."+
a+",site."+c})}}}());a.AbstractSniff=a.AbstractSniff||a.KioskedObject.extend(function(){return{construct:function(e){this.$super();e=e||{};this._params=null;this._imagesDataBuffer=[];this._flushImageIsRunning=!1;this._sniffMediaInterval=500;this._customSniffAttribute="kioskedHash_development";this._imagesDataBufferExpiryCheckerTimerHandle=!1;this._mediaSettings=new a.SettingsOBC({});this._publisherID=e.hasOwnProperty("co")?e.co:-1;this._allElements=[];e&&(this._params=e,e.environment&&(g.environment.setContext(e.environment),
this._customSniffAttribute="kioskedHash_"+g.environment.getContext()),e.settingsData&&(this._routedSettings=g.routeSettingsOutput(e.settingsData.settings||{}),this._mediaSettings.mergeSettings(this._routedSettings.settings)),e.resDomainName&&(this._resDomainName=e.resDomainName));a.messaging.dispatch("mediaSettingsApplied",{media:this,settings:this._mediaSettings});this.eventLoggingHandler=new a.EventLoggingHandler({domainName:e.domainName,pageLoadEventDomain:e.pageLoadEventDomain,auth:e.auth});this._bodyHTMLCollection=
null;this.processDOMModifications();g.scope.enforceCaller(this,a.AbstractSniff,"Expected caller to be instance of ITGS.AbstractSniff")},destroy:function(){this._bodyHTMLCollection&&g.dom.destroy(this._bodyHTMLCollection);this.$super()},getCustomSniffAttribute:function(){return this._customSniffAttribute},getImagesWithoutKiosks:function(){var e=[],c=this._mediaSettings.get("ui.sniff.customElementSelector",""),d=":not([kioskedHash_"+g.environment.getContext()+']):not([class*="'+a.Config.SNIFFER_BLOCK_PARAM+
'"]):not([src*="'+a.Config.SNIFFER_BLOCK_PARAM+'"])',b=a.tools.dom.query("img"+d),c=c.split(","),f=[];c.push("#kskdFooter");c.push(".kskdInlineZone");for(var p=0;p<c.length;p+=1){var q=g.trim(c[p]);0<q.length&&f.push(q+d)}c=f.join(",");d=g.dom.query(c);c=d.length;for(f=0;f<c;f+=1)e.push(d[f]);return{images:b,custom:e}},getSettingsBase:function(){return this._mediaSettings},getSettingsTargeted:function(e){return this._routedSettings&&this._routedSettings.hasOwnProperty("targets")?(new a.TargetedSettingsFeeder(this._routedSettings.targets)).getOBCForElement(e):
new a.SettingsOBC({})},processDOMModifications:function(){this._bodyHTMLCollection=null;if(this._mediaSettings&&!0===this._mediaSettings.getBool("ui.media.Banner.showFloorBanner",!1))var e=5E3,c=this,d=setInterval(function(){var b=!1;try{c._bodyHTMLCollection=document.createElement("div"),document.body.appendChild(c._bodyHTMLCollection),c._bodyHTMLCollection.innerHTML+='<div style="width: 5px; height: 5px" id="kskdFooter"></div>'}catch(f){b=!0}if(!1===b)clearInterval(d);else if(e-=100,0>=e)throw clearInterval(d),
new a.Exceptions.UnexpectedException("DOM modification never succeeded",c);},100)},processPluginsForElement:function(a,c){return g.processPluginsArray(a,c)},_getUniqueNodeIndex:function(a){if(a instanceof HTMLImageElement){var c=[],d=this._allElements.length;if(0<d){for(var b=0;b<d;b+=1)this._imagesAreIdentical(a,this._allElements[b])&&c.push(this._allElements[b]);return c.indexOf(a)}}return 0},_imagesAreIdentical:function(a,c){return a===c?!0:a.src&&c.src&&a.src===c.src?parseInt(a.clientWidth,10)===
parseInt(c.clientWidth,10)&&parseInt(a.clientHeight,10)===parseInt(c.clientHeight,10):!1}}}());a.Sniff=a.Sniff||a.AbstractSniff.extend(function(){function e(c,d,f,e,p){g.scope.enforceCaller(this,a.Sniff,"Expected caller to be instance of Sniff");var k=this,l="",q="";if(g.dom.nodeIdentifier(c).isImage())l="image",q=c.src;else{var h=g.dom.getFirstImage(c,[200,200]);h&&(q=h.src)}0<q.length&&(/^(f|ht)tps?:\/\//i.test(q)||0===q.indexOf("data:image")||(q=g.environment.getImageFullURL(q)));if("image"===
l&&g.isset(this._resDomainName)&&(l=c.src.search(this._resDomainName),0<=l&&8>=l))return;l={};h=[];this._routedSettings&&this._routedSettings.hasOwnProperty("targets")?(l=(new a.TargetedSettingsFeeder(this._routedSettings.targets)).getOBCForElement(c),h=l.getMeta("targeting_selectors",[])):l=new a.SettingsOBC({});var m=new a.SettingsOBC(this._mediaSettings.getSettingsObject());m.mergeSettings(l);var m=m.getSubset("ui.media"),n="unknown",m=this.processPluginsForElement(this._plugins,m);if(0>=m.length)g.debug.warn("/Sniffer/",
"Media item requested with no plugins (will cancel):",c);else{for(var x=0;x<m.length;x+=1)m[x].hasOwnProperty("name")&&0<=a.Config.BANNER_CLASS_NAMES.indexOf(m[x].name)&&(n="BannerSlot");x=["categories"];this.imageList.push({img:c,u:q,w:d,h:f,id:e,type:n,pUrl:a.SnifferUtilities.processPageURL(a.tools.environment.getPageUrl()),plugins:m,targetedSettings:l,targetedSettingsSelectors:h});p||(this._imagesDataBuffer.push({id:e,responseTypes:x}),this._imagesDataBufferExpiryCheckerTimerHandle||(this._imagesDataBufferExpiryCheckerTimerHandle=
setInterval(function(){b.call(k)},500)))}}function c(b,c){g.scope.enforceCaller(this,a.Sniff,"Expected caller to be instance of Sniff");this.co=c.co;var d=a.tools.routeSettingsOutput(c.settingsData&&c.settingsData.settings?c.settingsData.settings:{}).settings||{},f=b.targetedSettings||new a.SettingsOBC({}),e=c.settingsData&&c.settingsData.meta?c.settingsData.meta:{},d=new a.SettingsOBC(d);d.mergeSettings(f);d=d.getSettingsObject();f=this.getCategories(b.categories);e={info:b.info,mediaId:b.id,kioskId:Math.round(1E7*
Math.random()),contentOwnerId:c.co,albumId:c.albumId,domainName:c.domainName,resDomainName:c.resDomainName,resMedia:c.resMedia,langImage:c.langImage,scriptUrl:c.scriptUrl,auth:c.auth,lang:c.lang,environment:c.environment,plugins:b.plugins,settings:d,settingsMeta:e,categories:f};b.img&&b.img instanceof HTMLElement&&(e.mediaNode=b.img,e.mediaZoneID=b.img.getAttribute(this.getCustomSniffAttribute()));a.createWithMedia(new a.MediaElement(e))}function d(b,c,d){g.scope.enforceCaller(this,a.Sniff,"Expected caller to be instance of Sniff");
if(0===b.length)return[];if(!g.isset(c))return b;d=this.getTotalKioskedElements();c=parseInt(c,10);if(d>=c)return[];if(c-d>=b.length)return b;if(0===c||0>=c-d)return[];var f=c-d,e=function(a){return parseInt(a.img.offsetWidth,10)*parseInt(a.img.offsetHeight,10)};d=b.reduce(function(a,b){return a?e(b)>e(a)?b:a:b});c=[d];if(1<f){d=d.zoneId;b=g.shuffleArray(b);for(var p=f-1;0<p;p-=1){do f=b.pop();while(f&&f.zoneId===d);f&&c.push(f)}}return c}function b(){g.scope.enforceCaller(this,a.Sniff,"Expected caller to be instance of Sniff");
if(!this._flushImageIsRunning){this._flushImageIsRunning=!0;if(!this.zoneDataRequestsEnabled()){if(0<this._imagesDataBuffer.length){for(var b=[],c;c=this._imagesDataBuffer.shift();)c.zoneId=c.id,c.categories=[{}],b.push(c);f.call(this,{results:b})}}else if(0!==this._imagesDataBuffer.length)if(b=p.call(this,this._params,this._imagesDataBuffer),c=g.jsonPGetUrl(b),2E4>=c.length)g.request(b),this._imagesDataBuffer.splice(0,this._imagesDataBuffer.length);else for(var d=[],e=0,l=this._imagesDataBuffer.length;0<
l;l-=1)if(d.push(this._imagesDataBuffer.shift()),b=p.call(this,this._params,d),c=g.jsonPGetUrl(b),2E4>c.length){if(l===this._imagesDataBuffer.length){g.request(b);break}e=c.length}else{0===e?g.request(b):(this._imagesDataBuffer.unshift(d.pop()),b=p.call(this,this._params,d),g.request(b),g.jsonPGetUrl(b));break}this._flushImageIsRunning=!1}}function f(b){g.scope.enforceCaller(this,a.Sniff,"Expected caller to be instance of Sniff");var f=[],e=[],p=[],l,k,q=[];if(b.zonesToAnalyze){var h=b.zonesToAnalyze;
for(l=0;l<h.length;l+=1)if(h[l].hasOwnProperty("analyze")&&h[l].analyze){for(k=0;k<this.imageList.length;k+=1)if(this.debugMode&&console.log("Analyze",h[l]),this.imageList[k].id===h[l].zoneId&&-1===q.indexOf(this.imageList[k].img)){h[l].img=this.imageList[k].img;h[l].type=this.imageList[k].type;q.push(this.imageList[k].img);break}f.push(h[l])}}if(b.results&&0<b.results.length)for(l=0;l<b.results.length;l+=1){for(k=0;k<this.imageList.length;k+=1)if(this.imageList[k].id.toString()===b.results[l].zoneId&&
-1===q.indexOf(this.imageList[k].img)){b.results[l].id=b.results[l].zoneId;b.results[l].img=this.imageList[k].img;b.results[l].type=this.imageList[k].type;b.results[l].plugins=this.imageList[k].plugins;b.results[l].targetedSettings=this.imageList[k].targetedSettings;b.results[l].targetedSettingsSelectors=this.imageList[k].targetedSettingsSelectors;q.push(this.imageList[k].img);break}"BannerSlot"===b.results[l].type&&b.results[l].hasOwnProperty("categories")&&0<b.results[l].categories.length?p.push(b.results[l]):
g.debug.error("/Sniffer/","Unknown result type, cannot load: ",b.results[l])}b=[{arr:p,setting:"ui.sniff.maxBanners",type:"banner"}];l=b.length;for(k=0;k<l;k+=1){var q=b[k].arr,m=b[k].setting,n=q.length;if(0<n){for(var h=[],x=0;x<n;x+=1){var A=q[x].targetedSettings||new a.SettingsOBC({}),z=q[x].targetedSettingsSelectors,A=A.getInt(m,0);if(0<A)for(var E in z)if(z.hasOwnProperty(E)&&E===m){var z=z[E].selectorUsed,F=this.getTotalKioskedElementsByTarget(z);F<A?this.setTotalKioskedElementsByTarget(z,F+
1):h.push(x);break}}m=h.length;if(0<m)for(h.sort(function(a,b){return b-a}),n=0;n<m;n+=1)q.splice(h[n],1)}}E=this._mediaSettings.get("ui.sniff.maxBanners",50);p=d.call(this,p,E,"banner");this._totalBanners+=p.length;e=e.concat(p);for(l=0;l<e.length;l+=1)c.call(this,e[l],this._params);e=this._mediaSettings.get("ui.sniff.analyzer","GeneralAnalyzer");0<f.length&&(this.analyzer=this.analyzer||new a.Analyzers[e]({settings:this._mediaSettings}),this.analyzer.getPageAnalysis()||this.analyzer.analyzePage(f,
this._params.albumId,this._params.co),this.analyzer.analyzeZones(f),this.analyzer.sendAnalysis(!0))}function p(b,c){g.scope.enforceCaller(this,a.Sniff,"Expected caller to be instance of Sniff");var d=this,e={},p=this.hasNot("sentFirstZonesRequest")&&this.hasNot("usedCachedZoneData");this.set("sentFirstZonesRequest");p={zones:c,sign:this._params.sign,publisherId:this._params.co,albumId:this._params.albumId,pageUrl:a.SnifferUtilities.processPageURL(a.tools.environment.getPageUrl()),pageType:this.getPageType(c),
firstRequest:p};!1===g.isEmpty(e)&&(p.debugInfo=e);return{url:g.pageProtocol+"//"+b.endPoint,content:p,load:function(a){f.call(d,a)}}}function q(b,c){g.scope.enforceCaller(this,a.Sniff,"Expected caller to be instance of Sniff");var d=b.offsetWidth,p=b.offsetHeight;if((0>=d||0>=p)&&!0!==c)return!1;var l=this.getSettingsTargeted(b),k=l.getMeta("targeting_selectors",[]),q=this.getSettingsBase().clone();q.mergeSettings(l);q=q.getInt("ui.Banner.forceElementWidth",-1);c&&0<=q&&(d=q,b.style.width=d+"px");
0>this._allElements.indexOf(b)&&this._allElements.push(b);var q=this._getUniqueNodeIndex(b),h=a.SnifferUtilities.createElementHash(b,q,this._publisherID),q=!1,m=this.options.cachedZoneResponse,n=!1,x=!1,A=a.Config.CACHE.ZONE_RESPONSE;if(m&&m.hasOwnProperty("results")&&A)for(m=m.results,A=0;A<m.length;A+=1)m[A].zoneId===h&&(n=!0,this.set("usedCachedZoneData"),x=m[A]);!0===c?(this.markElementAsSniffed(b,this._customSniffAttribute,h),e.call(this,b,d,p,h,n,{targetedSettings:l,targetSelectorsUsed:k}),
q=!0):this.isTemporarilyBlockedBySettings(b)||(this.markElementAsSniffed(b,this._customSniffAttribute,h),this.isBlockedBySettings(b)||!this.isLargeEnough(d,p)||this.isBlacklistedBySize(d,p)||(e.call(this,b,d,p,h,n,{targetedSettings:l,targetSelectorsUsed:k}),q=!0));!1!==x&&(d=x,g.scope.enforceCaller(this,a.Sniff,"Expected caller to be instance of Sniff"),p={results:[d]},a.tools.debug.log("/Sniffer/","Cached item requested, loading: ",d.zoneId),f.call(this,p));return q}function k(){g.scope.enforceCaller(this,
a.Sniff,"Expected caller to be instance of Sniff");var b=this;a.messaging.addListener("mediaPageImpression",function(){var c=b.getQuantcastManager();a.tools.isset(c)&&c.boot()})}function l(){g.scope.enforceCaller(this,a.Sniff,"Expected caller to be instance of Sniff");var b,c,d=0;b=this.getImagesWithoutKiosks();var f=b.images,e=f.length,p=b.custom,l=p.length;for(b=0;b<l;b+=1){if(20<=d)return;(c=q.call(this,p[b],!0))&&(d+=1)}for(b=0;b<e;b+=1){if(20<=d)return;(c=q.call(this,f[b],!1))&&(d+=1)}this.paragraphSniff=
this._mediaSettings.get("ui.sniff.paragraphSniff",!1);!1===this.paragraphSniff||this.paragraphSniffer||(this.paragraphSniffer=new a.TextOnlySniff({mediaSettings:this._mediaSettings,query:this.paragraphSniff}),this.paragraphSniffer.start())}return{construct:function(b){this.options=g.mergeDefaults({cachedZoneResponse:[]},b);this.$super(this.options);this.imageList=[];this.paragraphSniff=!1;this._totalBanners=0;this._previousLocation=this._currentLocation=g.getWindowLocationPath();this._totalTargeted=
{banners:{},images:{}};this._plugins=[{name:"BannerSlot",options:{}},{name:"KioskedAnalytics"}];this.options.cachedZoneResponse&&this.options.cachedZoneResponse.hasOwnProperty("results")&&!0===a.Config.CACHE.ZONE_RESPONSE&&(a.tools.debug.log("/Sniffer/","Cached zone data enabled for "+this.options.cachedZoneResponse.results.length+" items"),this.set("usedCachedZoneData"));this._quantcastManager=null;!0===this._mediaSettings.getBool("ui.sniff.quantcastEnabled",!1)&&(this._quantcastManager=new a.QuantcastManager({publisherID:this._params.co,
siteID:this._params.albumId}));k.call(this);a.styling.placeHeaderStylesheet(a.stylesheets.images,"images");this.addStatus("sentFirstZonesRequest");this.addStatus("usedCachedZoneData");this.addStatusSet(["enabled","disabled"],"enabled");this.updateSnifferState();var c=!0;b.delaySniff&&!0===b.delaySniff&&(c=!1);c&&this.startSniffing()},destroy:function(){this._sniffInterval&&clearInterval(this._sniffInterval);this._imagesDataBufferExpiryCheckerTimerHandle&&clearInterval(this._imagesDataBufferExpiryCheckerTimerHandle);
this.paragraphSniffer&&this.paragraphSniffer.destroy();this.clearState();this.$super()},getCategories:function(a){var b,c,d,f={};if(!a)return{};for(var e=0;e<a.length;e+=1){b=a[e].type;c=g.mergeDefaults({},a[e].result);c.items||(c.items=[]);if(c)if(c.state&&"error"===c.state)continue;else if(!c.state||"ok"!==c.state)continue;if(g.isset(c))if("focus100k"===b){b=c.items;c=Math.min(3,b.length);var p=[];for(d=0;d<c;d+=1)p.push(b[d]);f.focus100k=p}else if("iabtier2"===b){b=c.items;c=Math.min(2,b.length);
p=[];for(d=0;d<c;d+=1)p.push(b[d]);f.iabtier2=p}else if("iabtier1"===b){b=c.items;c=Math.min(2,b.length);p=[];for(d=0;d<c;d+=1)p.push(b[d]);f.iabtier1=p}}return f},getImageList:function(){return this.imageList},getPageType:function(b){return!1===this._mediaSettings.getBool("ui.sniff.disableIndexPageAnalysis",!1)?this._pageType=this._pageType||a.SnifferUtilities.getPageType(b):"article"},getTotalKioskedElements:function(){return this._totalBanners},getTotalKioskedElementsByTarget:function(a){return this._totalTargeted.banners.hasOwnProperty(a)?
parseInt(this._totalTargeted.banners[a],10):0},getQuantcastManager:function(){return this._quantcastManager},isBlacklistedBySize:function(a,b){for(var c=[{w:300,h:250},{w:336,h:354}],d=0;d<c.length;d+=1){var f=c[d];if(f.w===a&&f.h===b)return!0}return!1},isBlockedBySettings:function(a){var b=!1,c=this._mediaSettings.get("ui.sniff.disableKiosksInElements",!1);if(c&&(c=g.dom.query(c))&&0<c.length)for(var d=0;d<c.length;d+=1){var f=c[d];if(a===f||g.dom.isDescendant(f,a)){b=!0;break}}return b},isLargeEnough:function(a,
b){return a>=this._mediaSettings.getInt("ui.sniff.minMediaWidth",300)&&b>=this._mediaSettings.getInt("ui.sniff.minMediaHeight",250)},isTemporarilyBlockedBySettings:function(a){var b=this._mediaSettings.get("ui.sniff.delayKiosksInElements",!1);if(b)for(var b=b.split(","),c=0;c<b.length;c+=1)for(var d=g.dom.query(b[c]),f=d.length,e=0;e<f;e+=1)if(d[e]===a)return!0;return!1},markElementAsSniffed:function(a,b,c){a.setAttribute(b,c)},processDOMModifications:function(){this.$super();this._mediaSettings&&
this._routedSettings&&!0===this._mediaSettings.getBool("ui.media.Banner.showFloorBanner",!1)&&(this._routedSettings.targets["#kskdFooter"]={},this._routedSettings.targets["#kskdFooter"]["ui.media.overridePlugins"]="FloorBannerSlot")},unMarkElementsAsSniffed:function(){for(var a=g.dom.query("["+this._customSniffAttribute+"]"),b=a.length,c=0;c<b;c+=1)a[c].removeAttribute(this._customSniffAttribute)},setTotalKioskedElementsByTarget:function(a,b){b=parseInt(b,10);this._totalTargeted.banners[a]=b},clearState:function(b){b=
g.isset(b)?b:!0;this._totalBanners=0;this.imageList=[];this._totalTargeted={banners:{},images:{}};a.destructors.destroyPlacements();b&&this.unMarkElementsAsSniffed();this.updateSnifferState()},removeFromImageList:function(a){for(var b=0;b<this.imageList.length;b+=1)this.imageList[b].id===a&&this.imageList.splice(b,1)},startSniffing:function(){var b=this,c=this._mediaSettings.get("ui.sniff.disableOnPagesWithElement",!1);return this.hasNot("startedSniffing")?(this.set("startedSniffing"),this._sniffInterval=
setInterval(function(){b._currentLocation=g.getWindowLocationPath();b._currentLocation!==b._previousLocation&&(b._previousLocation=b._currentLocation,b.clearState());b.is("enabled")&&(l.call(b),!1!==c&&b.updateSnifferState(function(){try{a.destructors.destroyNamespace()}catch(b){console.error("/Sniffer/","Failed destroying namespace (sniffer state update)")}}))},this._sniffMediaInterval),!0):!1},updateSnifferState:function(a){this.set("enabled");if(this._mediaSettings){var b=this._mediaSettings.get("ui.sniff.disableOnPagesWithElement",
!1);if(b){var c=[];try{c=g.dom.query(b)}catch(d){g.debug.error("/Sniffer/","Setting 'disableOnPagesWithElement' failed with invalid selector",b,d)}if(0<c.length)return g.debug.log("/Sniffer/","Sniffing disabled for page '"+g.environment.getPageUrl()+"' due to 'disableOnPagesWithElement' setting"),this.set("disabled"),"function"===typeof a&&a(),!1}}return!0},zoneDataRequestsEnabled:function(){return this._mediaSettings.getBool("ui.sniff.sendZoneDataRequests",!0)}}}());a.TextOnlySniff=a.TextOnlySniff||
a.KioskedObject.extend(function(){return{construct:function(e){this.$super(e);this._query=null;this._elementCount=0;e.hasOwnProperty("query")&&(this._query=e.query);this._mediaSettings=e.hasOwnProperty("mediaSettings")?e.mediaSettings:new a.SettingsOBC({});this._previousLocation=this._currentLocation=g.getWindowLocationPath();this._totalTargeted={banners:{}};this._createdElements=[]},analyseParagraphsToSniff:function(e){var c=this.getMediaSettings().getInt("ui.sniff.paragraphSniffNthElement",8),d=
1,b=this.getMediaSettings().get("ui.sniff.paragraphSniffSize","300x250");if(0<=e.indexOf(",")){e=e.split(",");for(var f=0;f<e.length;f+=1)e[f]+=" p";e=e.join(",")}else e+=" p";var g=a.tools.dom.query(e),q=g.length;e=[];f=[];if(0<q){for(var k=0;k<q;k+=1)if(d>=c){var l=a.tools.dom.nodeIdentifier(g[k]),h=l.nextElementOfType(HTMLElement),l=l.previousElementOfType(HTMLElement);h instanceof HTMLParagraphElement&&l instanceof HTMLParagraphElement&&(f.push({element:g[k],sibling:h}),d=1)}else d+=1;c=f.length;
if(0<c)for(d=0;d<c;d+=1)g=document.createElement("div"),g.className="kskdInlineZone",g.setAttribute("zonesize",b),g.setAttribute("ind",this._elementCount.toString()),g.style.height="1px",e.push(g),f[d].element.parentNode.insertBefore(g,f[d].sibling),this._elementCount+=1}return e},destroy:function(){if(this._createdElements){var a=this._createdElements.length;if(0<a)for(var c=0;c<a;c+=1)g.dom.destroy(this._createdElements[c])}this.$super()},getMediaSettings:function(){return this._mediaSettings},
start:function(){var e=this;a.tools.dom.onDOMReady(function(){try{e._createdElements=e.analyseParagraphsToSniff(e._query)}catch(c){throw new a.Exceptions.UnexpectedException("Failed analysing paragraphs with query: "+e._query,e,{query:e._query});}})}}}());a.EventLoggingHandler=a.EventLoggingHandler||a.KioskedObject.extend(function(){return{construct:function(a){this._options=a||{};this._buffer=[]},addEvent:function(a){this._buffer.push(a)},logEvents:function(){var a=this._options;0<this._buffer.length&&
g.request({url:"//"+a.domainName+"/a/b/",content:this._buffer});this._buffer=[]}}}());a.Sniffing.SettingsLayoutAdapter=a.Sniffing.SettingsLayoutAdapter||a.KioskedObject.extend(function(){return{construct:function(a){this.$super();this._originalSettings=a},getSettingsInNewLayout:function(){for(var e=[],c=this._originalSettings.length,d={},b=[],f=0;f<c;f+=1){var g=this._originalSettings[f];a.tools.isset(g.target)&&0<g.target.length?(d.hasOwnProperty(g.target)||(d[g.target]=[]),d[g.target].push(g)):
b.push(g)}c=b.length;if(0<c){f={conditionId:null,cssSelector:null,properties:[]};for(g=0;g<c;g+=1)f.properties.push({key:b[g].key,value:b[g].value});e.push(f)}for(var q in d)if(d.hasOwnProperty(q)){b={conditionId:null,cssSelector:q,properties:[]};c=d[q].length;for(f=0;f<c;f+=1)b.properties.push({key:d[q][f].key,value:d[q][f].value});e.push(b)}return e}}}());a.Sniffing.SnifferController=a.Sniffing.SnifferController||a.KioskedObject.extend(function(){function e(){g.scope.enforceCaller(this,a.Sniffing.SnifferController,
"Expected caller to be instance of SnifferController");var b=this.getSettings(),c=b.get("ui.sniff.paragraphSniff",!1);!1===c||this._paragraphSniffer||(this._paragraphSniffer=new a.TextOnlySniff({mediaSettings:b,query:c}),this._paragraphSniffer.start())}function c(b,c){g.scope.enforceCaller(this,a.Sniffing.SnifferController,"Expected caller to be instance of SnifferController");var d=c.getInt("ui.sniff.maxBanners",50),f=this.getActivatedElements().length,e=d-f,f=b.length;if(0>=e){for(d=0;d<f;d+=1)this.setReservedElementByZoneID(b[d].hash,
!0);return[]}var h=function(a){return a.width&&a.height?a.width*a.height:parseInt(a.element.offsetWidth,10)*parseInt(a.element.offsetHeight,10)};b=b.sort(function(a,b){var c=h(a),d=h(b);return c<d?1:d<c?-1:0});b=this.getReservedElements().concat(b);f=b.length;if(f>e)for(d=b.splice(e,f),f-=e,e=0;e<f;e+=1)this.setReservedElementByZoneID(d[e].hash,!0);return b}function d(){g.scope.enforceCaller(this,a.Sniffing.SnifferController,"Expected caller to be instance of SnifferController");var b=this;if(this.isNot("running"))this.set("idle");
else{this.set("sniffing");var f=a.Commitment.startWith([]);this.getRootSearchNode().forEachNode(function(c){f=f.then(function(d){var f=this,e=[].concat(d);d=new a.Sniffing.SnifferConveyor(b,c);d.retrieveItems().then(function(a){e=e.concat(a);f.resolve(e)});d.destroy()})});var k=this.getSettings(),f=f.then(function(a){a=c.call(b,a,k);a.forEach(function(a){b.setReservedElementByZoneID(a.hash,!1);b.setActivatedElementByZoneID(a.hash,!0)});b.getElementQueue().addItems(a);this.resolve()}).then(function(){e.call(b);
this.resolve()}).done(function(){b.unset("sniffing");setTimeout(function(){d.call(b)},a.Config.SNIFFER_INTERVAL)})}}function b(){g.scope.enforceCaller(this,a.Sniffing.SnifferController,"Expected caller to be instance of SnifferController");var b=this;a.messaging.addListener("mediaPageImpression",function(){var c=b.getQuantcastManager();a.tools.isset(c)&&c.boot()});a.messaging.addListener("bannerProviderNotInitiated",function(b){a.snifferController.setActivatedElementByZoneID(b.placementID,!1)});a.messaging.addListener("maxPluginsExceeded",
function(b){a.snifferController.setActivatedElementByZoneID(b.placementID,!1)});a.messaging.addListener("BannerDestroyedForSizeRestriction",function(b){a.snifferController.setActivatedElementByZoneID(b.placementID,!1)})}var f=[{name:"BannerSlot"},{name:"KioskedAnalytics"}];return{construct:function(c){this.$super();c=c||{};this._options=g.mergeDefaults({elementHashAttribute:"kioskedhash_"+a.tools.environment.getContext(),endPoint:"",environment:"development",settingsData:{}},c);c.settingsData&&c.settingsData.settings&&
this.processSettingsModifications(c.settingsData.settings);this._markedElements=[];this._pageType=this._settings=null;this._pageProperties={publisherID:c.hasOwnProperty("publisherId")?parseInt(c.publisherId,10):null,siteID:c.hasOwnProperty("siteId")?parseInt(c.siteId,10):null};this.addStatusSet(["idle","running","stopping"],"idle");this.addStatus("sniffing");g.scope.enforceCaller(this,a.Sniffing.SnifferController,"Expected caller to be instance of SnifferController");if(!a.tools.isset(this._pageProperties.publisherID)||
0>=this._pageProperties.publisherID)throw Error("Invalid/unset publisher ID: "+this._pageProperties.publisherID);if(!a.tools.isset(this._pageProperties.siteID)||0>=this._pageProperties.siteID)throw Error("Invalid/unset site ID: "+this._pageProperties.siteID);g.scope.enforceCaller(this,a.Sniffing.SnifferController,"Expected caller to be instance of SnifferController");c=new a.Sniffing.SearchContextsAdapter(this._options.settingsData);this._rootContext=c.getRootContext();this._settings=c.getBaseSettingsContext().getSettings();
c.destroy();c=this.getOptions();this._rootSearchNode=(new a.Sniffing.SearchNodeFactory(this._rootContext,{hashAttribute:c.elementHashAttribute})).getRootNode();this._elementQueue=new a.Sniffing.ElementQueue(this,{publisherID:this._pageProperties.publisherID,siteID:this._pageProperties.siteID,zoneDataURL:this._options.endPoint,cachedZones:this.getOptions().cachedZoneResponse&&this.getOptions().cachedZoneResponse.hasOwnProperty("results")?this.getOptions().cachedZoneResponse.results:[]});a.SnifferUtilities.processDOMModifications(this);
a.styling.placeHeaderStylesheet(a.stylesheets.images,"images");this._quantcastManager=null;!0===this.getSettings().getBool("ui.sniff.quantcastEnabled",!1)&&(this._quantcastManager=new a.QuantcastManager({publisherID:this.getPageProperties().publisherID,siteID:this.getPageProperties().siteID}));b.call(this)},destroy:function(){var a=this,b=this.$super;this.stop(function(){a._paragraphSniffer&&a._paragraphSniffer.destroy();a.getElementQueue().destroy();a.getRootSearchNode().destroy();a.unMarkAllElements();
b()})},addMarkedItem:function(a){this._markedElements.push(a)},getActivatedElements:function(){for(var a=[],b=this.getMarkedElements(),c=b.length,d=0;d<c;d+=1)b[d].activated&&!0===b[d].activated&&a.push(b[d]);return a},getCategories:function(b){var c,d,f,e={};if(!a.tools.isset(b))return e;for(var h=0;h<b.length;h+=1){c=b[h].type;d=g.mergeDefaults({},b[h].result);d.items||(d.items=[]);if(d)if(d.state&&"error"===d.state)continue;else if(!d.state||"ok"!==d.state)continue;if(g.isset(d))if("focus100k"===
c){c=d.items;d=Math.min(3,c.length);var m=[];for(f=0;f<d;f+=1)m.push(c[f]);e.focus100k=m}else if("iabtier2"===c){c=d.items;d=Math.min(2,c.length);m=[];for(f=0;f<d;f+=1)m.push(c[f]);e.iabtier2=m}else if("iabtier1"===c){c=d.items;d=Math.min(2,c.length);m=[];for(f=0;f<d;f+=1)m.push(c[f]);e.iabtier1=m}}return e},getElementQueue:function(){return this._elementQueue},getItemByZoneID:function(a){for(var b=this.getMarkedElements(),c=b.length,d=0;d<c;d+=1)if(b[d].hash===a)return b[d];return null},getMarkedElements:function(){return this._markedElements},
getOptions:function(){return this._options},getPageProperties:function(){return this._pageProperties},getPageType:function(){return!1===this.getSettings().getBool("ui.sniff.disableIndexPageAnalysis",!1)?this._pageType=this._pageType||a.SnifferUtilities.getPageType():"article"},getQuantcastManager:function(){return this._quantcastManager},getReservedElements:function(){for(var a=[],b=this.getMarkedElements(),c=b.length,d=0;d<c;d+=1)b[d].reserved&&!0===b[d].reserved&&a.push(b[d]);return a},getRootSearchNode:function(){return this._rootSearchNode},
getSettings:function(){return this._settings},getUniqueNodeIndex:function(b){var c=[],d=this.getMarkedElements(),f=d.length;if(0<f){if(b instanceof HTMLImageElement)for(var e=0;e<f;e+=1){var g;g=d[e].element;g=b===g?!0:b.src&&g.src&&b.src===g.src;g&&c.push(d[e].element)}else for(e=a.SnifferUtilities.elementAsString(b),g=0;g<f;g+=1)e===a.SnifferUtilities.elementAsString(d[g].element)&&c.push(d[g].element);return c.push(b)-1}return 0},isLargeEnough:function(a){var b=a.context.getSettings();return a.width>=
b.getInt("ui.sniff.minMediaWidth",300)&&a.height>=b.getInt("ui.sniff.minMediaHeight",250)},isPermittedBySettings:function(b){var c=!0,d=b.element;if((b=b.context.getSettings().get("ui.sniff.disableKiosksInElements",!1))&&(b=a.tools.dom.query(b))&&0<b.length)for(var f=0;f<b.length;f+=1){var e=b[f];if(d===e||a.tools.dom.isDescendant(e,d)){c=!1;break}}return c},loadItemWithData:function(b,c){if(a.tools.isEmpty(c))a.tools.debug.log("/SnifferController/","Unable to load item, no categories data (possibly blacklisted): "+
b);else{for(var d=!1,e=this.getActivatedElements(),h=e.length,m=0;m<h;m+=1)if(e[m].hash===b){d=e[m];break}if(!1!==d){d.categories=this.getCategories(c);d.plugins=this.processPluginsForSettings(f,d.context.getSettings());try{g.scope.enforceCaller(this,a.Sniffing.SnifferController,"Expected caller to be instance of SnifferController");var n={info:{},mediaId:d.hash,kioskId:Math.round(1E7*Math.random()),contentOwnerId:this.getPageProperties().publisherID,albumId:this.getPageProperties().siteID,environment:this.getOptions().environment,
plugins:d.plugins,settings:d.context.getSettings().getSettingsObject(),settingsMeta:{},categories:d.categories};d.element&&d.element instanceof HTMLElement&&(n.mediaNode=d.element,n.mediaZoneID=d.hash);a.createWithMedia(new a.MediaElement(n))}catch(r){a.tools.debug.warn("/SnifferController/","Failed creating placement",r)}}else a.tools.debug.error("/SnifferController/","Unable to find media item for zone:",b)}},markElementAsProcessed:function(b){if(!(b instanceof HTMLElement))throw Error("Invalid element: not a HTMLElement");
var c=this.getUniqueNodeIndex(b),c=a.SnifferUtilities.createElementHash(b,c,this._pageProperties.publisherID);b.setAttribute(this.getOptions().elementHashAttribute,c);return c},processPluginsForSettings:function(b,c){return a.tools.processPluginsArray(a.tools.deepClone(b),c)},processSettingsModifications:function(a){a.push({conditionId:null,cssSelector:"#kskdFooter",properties:[{key:"ui.media.overridePlugins",value:"FloorBannerSlot"},{key:"ui.sniff.selectionMode",value:"select"}]});a.push({conditionId:null,
cssSelector:".kskdInlineZone",properties:[{key:"ui.sniff.selectionMode",value:"select"}]})},setActivatedElementByZoneID:function(a,b){this.getItemByZoneID(a).activated=b},setReservedElementByZoneID:function(a,b){this.getItemByZoneID(a).reserved=b},start:function(){return this.is("idle")?(this.set("running"),d.call(this),!0):!1},stop:function(a){if(this.is("running")){this.set("stopping");var b=this,c=setInterval(function(){b.is("idle")&&(clearInterval(c),a())},80);return!0}a();return!1},unMarkAllElements:function(){for(var b=
this.getOptions().elementHashAttribute,c=a.tools.dom.query("["+b+"]"),d=c.length,f=0;f<d;f+=1)c[f].removeAttribute(b);return d},unsniffItemWithZoneID:function(b){var c=this.getItemByZoneID(b),d=this._markedElements.indexOf(c),f=this.getOptions().elementHashAttribute;if(a.tools.isset(c)&&0<=d)this._markedElements.splice(d,1),c.element.removeAttribute(f);else throw Error("Unable to un-sniff item: doesn't exist ("+b+")");},wasSelectedAsCustom:function(b){return b.selectionMode===a.Config.ELEMENT_SELECTION_MODE.CUSTOM}}}());
a.Sniffing.ElementQueue=a.Sniffing.ElementQueue||a.KioskedObject.extend(function(){function e(b){g.scope.enforceCaller(this,a.Sniffing.ElementQueue,"Expected caller to be instance of ElementQueue");var c=this.getSniffer(),d=c.getSettings(),c=c.getPageProperties(),e=b.length;a.tools.debug.log("/SnifferElementQueue/","Will analyse "+e+" items");var k=d.get("ui.sniff.analyzer","GeneralAnalyzer");0<e&&(this.analyzer=this.analyzer||new a.Analyzers[k]({settings:d}),this.analyzer.getPageAnalysis()||this.analyzer.analyzePage(b,
c.siteID,c.publisherID),this.analyzer.analyzeZones(b),this.analyzer.sendAnalysis(!0))}function c(){g.scope.enforceCaller(this,a.Sniffing.ElementQueue,"Expected caller to be instance of ElementQueue");var b=this;if(this.isNot("started"))return a.tools.debug.warn("/ElementQueue/","Not flushing: queue not started"),!1;var c=this.getQueue(),d=c;20<c.length?(d=c.splice(0,20),this.setQueue(c)):this.setQueue([]);c=d.length;if(0>=c)return!1;for(var e=0;e<c;e+=1)d[e]={id:d[e].hash,responseTypes:["categories"]};
d=this.prepareJSONPayload(d);a.tools.communication.sendRequest({destination:"//"+this.getOptions().zoneDataURL,method:"POST",errorCallback:function(){throw Error("Failed sending zone data request");},data:{json:JSON.stringify(d)},callback:function(c){var d=!1;try{d=JSON.parse(c)}catch(f){throw a.tools.debug.warn("/ElementQueue/","Failed decoding invalid JSON response"),f;}d&&b.processItemsResponse(d)}});this.set("sentFirstZonesRequest");return!0}function d(){g.scope.enforceCaller(this,a.Sniffing.ElementQueue,
"Expected caller to be instance of ElementQueue");var b=this;this._timer=setTimeout(function(){if(!b.isNot("started")){c.call(b);try{d.call(b)}catch(f){a.tools.debug.error("/ElementQueue/","Failed restarting queue timer")}}},a.Config.SNIFFER_ELEMENT_QUEUE_DELAY)}return{construct:function(b,c){this.$super();c=c||{};this._options=g.mergeDefaults({name:"ElementQueue",cachedZones:[],publisherID:null,siteID:null},c);this._sniffer=b;this._queue=[];this.addStatusSet(["started","stopped"],"started");this.addStatus("usedCachedZoneData");
this.addStatus("sentFirstZonesRequest");this.addStatus("zoneCacheEnabled");this.addStatus("zoneDataRequestEnabled");!0===this.getSniffer().getSettings().getBool("ui.sniff.sendZoneDataRequests",!0)&&this.set("zoneDataRequestEnabled");!0===a.Config.CACHE.ZONE_RESPONSE&&this.set("zoneCacheEnabled");this._timer=null;d.call(this)},addItems:function(b){a.tools.array.isArray(b)||(b=[b]);if(this.isNot("zoneDataRequestEnabled")){var c=b;g.scope.enforceCaller(this,a.Sniffing.ElementQueue,"Expected caller to be instance of ElementQueue");
for(var d=[],e=c.length,k=0;k<e;k+=1){var l=c[k];l.zoneId=l.hash;l.categories=[{type:"cache",result:{state:"ok",meta:"Cached item"}}];d.push(l)}this.getOptions().cachedZones=this.getOptions().cachedZones.concat(d)}this._queue=this._queue.concat(b);g.scope.enforceCaller(this,a.Sniffing.ElementQueue,"Expected caller to be instance of ElementQueue");b=this.getOptions().cachedZones;d=this.has("zoneCacheEnabled")||this.hasNot("zoneDataRequestEnabled");c=this.getQueue();if(b&&d){for(var d=c.length,e=[],
k=b.length,h=l=0;h<d;h+=1){for(var m=!1,n=0;n<k;n+=1)b[n].zoneId===c[h].hash&&(m=!0,this.set("usedCachedZoneData"),this.processItemsResponse({results:[b[n]]}),l+=1);m||e.push(c[h])}0<l&&a.tools.debug.log("/SnifferElementQueue/","Loaded "+l+" cached zones");this.setQueue(e)}},destroy:function(){this._timer&&clearTimeout(this._timer);this._options=null;this.set("stopped");this.$super()},flush:function(){c.call(this)},getOptions:function(){return this._options},getQueue:function(){return this._queue},
getSniffer:function(){return this._sniffer},prepareJSONPayload:function(b){var c=this.hasNot("sentFirstZonesRequest")&&this.hasNot("usedCachedZoneData"),d=this.getOptions();return{zones:b,pub:d.publisherID,site:d.siteID,pageUrl:a.SnifferUtilities.processPageURL(a.tools.environment.getPageUrl()),pageType:this.getSniffer().getPageType(),firstRequest:c}},processItemsResponse:function(b){if(b){var c=this.getSniffer();if(b.results){for(var d=b.results,g=d.length,k=a.Commitment.then(),l=0;l<g;l+=1)(function(a){k=
k.then(function(){c.loadItemWithData(a.zoneId,a.categories);this.resolve()})})(d[l]);k.fail(function(b){a.tools.debug.warn("/ElementQueue/","Failed loading some item responses");throw b;})}if(b.zonesToAnalyze){d=b.zonesToAnalyze.length;g=[];for(l=0;l<d;l+=1){var h=b.zonesToAnalyze[l].zoneId,m=c.getItemByZoneID(h);m?(b.zonesToAnalyze[l].img=m.element,g.push(b.zonesToAnalyze[l])):a.tools.debug.warn("/SnifferElementQueue/","Failed finding sniffed data for zone: ",h)}0<g.length&&e.call(this,g)}}},setQueue:function(a){this._queue=
a}}}());a.Sniffing.SearchContext=a.Sniffing.SearchContext||a.KioskedObject.extend(function(){return{construct:function(e){this.$super();e=e||{};this._options=g.mergeDefaults({name:"SearchContext",contextSelector:"body",contextEnabled:!0,parentContextElement:null,settings:[]},e);this._childContexts=[];this.addStatus("processedContextElements");g.scope.enforceCaller(this,a.Sniffing.SearchContext,"Expected caller to be instance of SearchContext");var c=this.getOptions();e=new a.SettingsOBC({});a.tools.isset(c.parentContextElement)&&
(e=c.parentContextElement.getSettings().clone());for(var c=c.settings,d={},b=c.length,f=0;f<b;f+=1)d[c[f].key]=c[f].value;e.mergeSettings(d);this._settings=e},destroy:function(){this.$super()},addChildContext:function(a){this._childContexts.push(a)},getChildContexts:function(){return this._childContexts},getChildContextSelectors:function(){for(var a=[],c=this.getChildContexts(),d=c.length,b=0;b<d;b+=1)a=a.concat(c[b].getContextSelectors());return a},getContextSelectors:function(){for(var e=this.getOptions().contextSelector.split(","),
c=e.length,d=0;d<c;d+=1)e[d]=a.tools.trim(e[d]);return e},getOptions:function(){return this._options},getSettings:function(){return this._settings},toString:function(){for(var a=this.getOptions(),c=this.getSettings(),d=this.getChildContexts(),b=d.length,f=[],g=0;g<b;g+=1)f.push(d[g].toString());return JSON.stringify({contextSelector:a.contextSelector,contextEnabled:a.contextEnabled,settings:c.getSettingsObject(),children:"--children--"}).replace('"--children--"',"["+f.join(",")+"]")}}}());a.Sniffing.SearchContextsAdapter=
a.Sniffing.SearchContextsAdapter||a.KioskedObject.extend(function(){function e(c,d){g.scope.enforceCaller(this,a.Sniffing.SearchContextsAdapter,"Expected caller to be instance of SearchContextsAdapter");c=this.filterDuplicateSettings(c);for(var b=c.length,f=0,p=0;p<b;p+=1){var h=c[p],k=a.tools.isset(h.cssSelector)?h.cssSelector:"",l="";if(0<k.length){for(var l=d.getContextSelectors(),m=l.length,n=[],k=k.split(","),u=k.length,r=0;r<m;r+=1)for(var v=0;v<u;v+=1)n.push(l[r]+" "+k[v]);l=n.join(", ")}l=
new a.Sniffing.SearchContext({contextSelector:a.tools.trim(l),contextEnabled:!0,parentContextElement:d,settings:h.properties||[]});h.hasOwnProperty("childConditions")&&(f+=e.call(this,h.childConditions,l));d.addChildContext(l);f+=1}return f}return{construct:function(c){this.$super();c=c||{};this._rootContext=new a.Sniffing.SearchContext({name:"SearchContextMaster",contextSelector:"",contextEnabled:!0,parentContextElement:null});this._baseSettingsContext=null;this._rawSettings=c;this._rawSettings.settings=
this._rawSettings.settings||[];c=this._rawSettings;var d=this._rawSettings.settings,b=this._rootContext;g.scope.enforceCaller(this,a.Sniffing.SearchContextsAdapter,"Expected caller to be instance of SearchContextsAdapter");for(var f=[],p=d.length-1;0<=p;p-=1)0>=(a.tools.isset(d[p].cssSelector)?d[p].cssSelector:"").length&&(f=f.concat(d[p].properties),d.splice(p,1));this._baseSettingsContext=new a.Sniffing.SearchContext({contextSelector:"",contextEnabled:!0,parentContextElement:b,settings:f});b.getSettings().mergeSettings(this._baseSettingsContext.getSettings(),
!1);c.settings=d;c=e.call(this,this._rawSettings.settings,this._rootContext);a.tools.debug.log("/SearchContextsAdapter/",""+(c+1)+" search contexts created")},destroy:function(){delete this._rawSettings;this.$super()},filterDuplicateSettings:function(a){for(var d=[],b={},f=a.length,e=0;e<f;e+=1){var g=a[e],k=g.cssSelector&&0<g.cssSelector.length?g.cssSelector:"-";g.childConditions=g.childConditions||[];g.properties=g.properties||[];b.hasOwnProperty(k)?(b[k].childConditions=b[k].childConditions.concat(g.childConditions),
b[k].properties=b[k].properties.concat(g.properties)):b[k]=g}for(var l in b)b.hasOwnProperty(l)&&d.push(b[l]);return d},getBaseSettingsContext:function(){return this._baseSettingsContext},getRootContext:function(){return this._rootContext}}}());a.Sniffing.SearchNode=a.Sniffing.SearchNode||a.KioskedObject.extend(function(){return{construct:function(e,c){this.$super();c=c||{};this._options=g.mergeDefaults({name:"SearchNode",hashAttribute:"",root:!1},c);this._context=e;if(!this._context instanceof a.Sniffing.SearchContext)throw new a.Exceptions.InvalidTypeException("ITGS.Sniffing.SearchContext",
typeof this._context,this);this._children=[];this._elementCount=0;var d=this.getContext().getSettings().get("ui.sniff.customElementSelector",!1);this._customSelectors=d?d.split(","):[]},destroy:function(){try{this.getContext().destroy()}catch(a){}this.forEachChild(function(a){a.destroy()});this.$super()},addChild:function(e){if(!(e instanceof a.Sniffing.SearchNode))throw Error("Cannot add child search node: incorrect type or class");this._children.push(e)},applySelectorFilter:function(e){return e+=
':not(*[class*="'+a.Config.SNIFFER_BLOCK_PARAM+'"] '+e+'):not(*[class*="'+a.Config.SNIFFER_BLOCK_PARAM+'"]):not(*[src*="'+a.Config.SNIFFER_BLOCK_PARAM+'"])'},filterItemByBlockedAttributes:function(a){a=a.element;var c=this.getOptions();return a.hasAttribute(c.hashAttribute)?!1:!0},filterTemporarilyBlockedItem:function(e){e=e.element;var c=this.getItemsThatBlockSniffing(),d=c.length;if(0<d)for(var b=0;b<d;b+=1)if(c[b]===e||a.tools.dom.isDescendant(c[b],e))return!1;return!0},forEachChild:function(e){var c=
this.getChildren(),d=c.length;if("function"!==typeof e)throw new a.Exceptions.InvalidTypeException("function",typeof e,this);for(var b=0;b<d;b+=1)e(c[b])},forEachNode:function(a){a(this);this.forEachChild(a)},formQueryString:function(a,c){for(var d="",b=c.length,f=a.length,g=0;g<b;g+=1){for(var h=c[g],d=d+this.applySelectorFilter(h),k=0;k<f;k+=1)d+=":not("+a[k]+" "+h+")";g<b-1&&(d+=", ")}return d},getChildren:function(){return this._children},getContext:function(){return this._context},getCustomSelectors:function(){return this._customSelectors},
getElementCount:function(){return this._elementCount},getItemsThatBlockSniffing:function(){var a=this.getContext().getSettings().get("ui.sniff.delayKiosksInElements",!1);if(!1!==a){for(var a=a.split(","),c=[],d=0;d<a.length;d+=1)for(var b=g.dom.query(a[d]),f=b.length,p=0;p<f;p+=1)c.push(b[p]);return c}return[]},getOptions:function(){return this._options},getSelectionMode:function(){return this.getContext().getSettings().get("ui.sniff.selectionMode","search")},getSelectors:function(){return["img"]},
isRoot:function(){return!0===this.getOptions().root},prepareChain:function(){var e=this.getContext().getContextSelectors(),c=this.getContext().getChildContextSelectors(),d=this.getSelectors(),b=this.getCustomSelectors();return a.Commitment.startWith([],e,c,d,b)},wrapElement:function(e){return{element:e,node:this,context:this.getContext(),searchMode:a.Config.ELEMENT_SEARCH_MODE.SEARCH,selectionMode:a.Config.ELEMENT_SELECTION_MODE.NORMAL}},_incrementElementCount:function(a){return this._elementCount+=
0<=a?a:1}}}());a.Sniffing.SearchNodeFactory=a.Sniffing.SearchNodeFactory||a.KioskedObject.extend(function(){function e(c,d){a.tools.scope.enforceCaller(this,a.Sniffing.SearchNodeFactory,"Expected caller to be instance of SearchNodeFactory");var b=this.getOptions(),b=new a.Sniffing.SearchNode(c,{hashAttribute:b.hashAttribute,root:!1});d.addChild(b);var f=c.getChildContexts(),g=f.length;if(0<g)for(var h=0;h<g;h+=1)e.call(this,f[h],b)}return{construct:function(c,d){this.$super();d=d||{};this._options=
a.tools.mergeDefaults({hashAttribute:""},d);this._rootContext=c;this._rootNode=null;a.tools.scope.enforceCaller(this,a.Sniffing.SearchNodeFactory,"Expected caller to be instance of SearchNodeFactory");var b=this.getOptions();this._rootNode=new a.Sniffing.SearchNode(this._rootContext,{hashAttribute:b.hashAttribute,root:!0});for(var b=this._rootContext.getChildContexts(),f=b.length,g=0;g<f;g+=1)e.call(this,b[g],this._rootNode)},getOptions:function(){return this._options},getRootNode:function(){return this._rootNode}}}());
a.Sniffing.SnifferConveyor=a.Sniffing.SnifferConveyor||a.KioskedObject.extend(function(){return{construct:function(a,c){this.$super();this._snifferController=a;this._searchNode=c},destroy:function(){this._searchNode=this._snifferController=null;this.$super()},getSearchNode:function(){return this._searchNode},getSnifferController:function(){return this._snifferController},retrieveItems:function(){var e=this.getSearchNode(),c=this.getSnifferController(),d=c.getSettings(),b=e.isRoot(),f=e.getSelectionMode(),
g=e.getOptions().hashAttribute;return this.getSearchNode().prepareChain().then(function(c,d,f,g,p){g=e.formQueryString(f,g);f=0<p.length?e.formQueryString(f,p):!1;if(b)this.resolve(c,[],g,f);else{p=d.length;for(var h=[],m=0;m<p;m+=1)h=h.concat(a.tools.dom.query(d[m]));this.resolve(c,h,g,f)}}).then(function(c,d,l,h){c=[].concat(c);var m=[];if(b)c=c.concat(a.tools.dom.query(l));else for(var n=d.length,r=0;r<n;r+=1)if("select"===f)d[r].hasAttribute(g)||(c.push(d[r]),m.push(d[r]));else{var v=a.tools.dom.query(l,
d[r]);c=c.concat(v)}l=[];n=c.length;for(r=0;r<n;r+=1)v=e.wrapElement(c[r]),0<=m.indexOf(c[r])&&(v.searchMode=a.Config.ELEMENT_SEARCH_MODE.SELECT),l.push(v);this.resolve(l,d,h)}).then(function(c,d,f){if(f&&b){d=a.tools.dom.query(f);f=d.length;for(var g=0;g<f;g+=1){var p=e.wrapElement(d[g]);p.selectionMode=a.Config.ELEMENT_SELECTION_MODE.CUSTOM;c.push(p)}}this.resolve(c)}).then(function(b){"select"===f&&b.forEach(function(b){b.selectionMode=a.Config.ELEMENT_SELECTION_MODE.CUSTOM});e._incrementElementCount(b.length);
this.resolve(b)}).then(function(a){this.resolve(a.filter(e.filterTemporarilyBlockedItem,e))}).then(function(a){for(var b=a.length,c=[],d=0;d<b;d+=1){var f=a[d].element,e=f.offsetWidth,f=f.offsetHeight;0<e&&0<f&&(a[d].width=e,a[d].height=f,c.push(a[d]))}this.resolve(c)}).then(function(a){a=a.filter(function(a){return c.wasSelectedAsCustom(a)||c.isLargeEnough(a)});a=a.filter(function(a){return c.wasSelectedAsCustom(a)||c.isPermittedBySettings(a)});this.resolve(a)}).then(function(b){var c=d.get("ui.sniff.bulletLangFilter",
!1);!1!==c&&"select"!==f&&(b=a.tools.bulletLang.filter(b,c));this.resolve(b)}).then(function(a){this.resolve(a.filter(e.filterItemByBlockedAttributes,e))}).then(function(b){var d=b.length;d>a.Config.SNIFFER_MAX_ELEMENTS_PER_CYCLE&&(b=b.slice(0,a.Config.SNIFFER_MAX_ELEMENTS_PER_CYCLE),d=a.Config.SNIFFER_MAX_ELEMENTS_PER_CYCLE);for(var f=0;f<d;f+=1)b[f].hash=c.markElementAsProcessed(b[f].element),c.addMarkedItem(b[f]);this.resolve(b)})}}}());a.StylesController=a.StylesController||a.KioskedObject.extend(function(){return{construct:function(){this.$super();
this._lastDeviceType=null;g.debug.log("/StylesController/","Styling initiated with device type: "+this.getDeviceType());g.scope.enforceCaller(this,a.StylesController,"Caller not instance of ITGS.StylesController");this._lastRendered=this._lastSelectedStyleset=null},applyToElement:function(e){if(!this._lastSelectedStyleset)throw new a.Exceptions.InvalidStateException("stylesheet selected","no stylesheet selected",this);this._lastRendered||(this._lastRendered=this.fulfillItem(this._lastSelectedStyleset));
var c=this.getDeviceType(),d=null;try{d=this._lastRendered[c].normal}catch(b){g.debug.error("/StylesController/","Failed getting normal styles for device:",c,this._lastRendered)}if(!d)throw new a.Exceptions.UnexpectedException("Expected styles for device type: "+c+", but received: "+typeof d,this,d);this.styleElement(e,d);return this},clear:function(){this._lastRendered=this._lastSelectedStyleset=null},destroy:function(){this.clear()},fulfillItem:function(e){var c={"default":{normal:{},hover:{}},
mobile:{normal:{},hover:{}},hd:{normal:{},hover:{}}},d;for(d in e)if(e.hasOwnProperty(d))if(e[d].hasOwnProperty("normal"))for(var b in e[d])e[d].hasOwnProperty(b)&&(c[d][b]=g.deepClone(e[d][b]));else c[d].normal=g.deepClone(e[d]);d=!0;for(b=0;d;){d=!1;for(var f in c)if(c.hasOwnProperty(f))for(var p in c[f])if(c[f].hasOwnProperty(p)&&c[f][p].hasOwnProperty("__include")){var h=g.deepClone(c[f][p].__include),k={},h=g.array.isArray(h)?h:[h];h.reverse();var l=h.length;if(0<l)for(l-=1;0<=l;l-=1){var m=
h[l];0>m.indexOf(".")&&(m+=".normal");var n=m.split("."),u,r,v={};if(3===n.length){u=n[1];r=n[2];try{var x=this.getStylesItem(n[0]),v=this.fulfillItem(x)[u][r]}catch(w){g.debug.log("/StylesController/","Failed processing style lookup (global) for __include:",m)}}else{u=n[0];r=n[1];try{v=c[u][r]}catch(F){g.debug.log("/StylesController/","Failed processing __include: ",e)}}v.hasOwnProperty("__include")?d=!0:(k=g.mergeDefaults(k,g.deepClone(v)),h.splice(l,1))}0>=h.length&&(c[f][p]=g.mergeDefaults(k,
c[f][p]),delete c[f][p].__include)}b+=1;if(10<b)throw new a.Exceptions.LoopException("Failed to fulfill all __include directives for styles",this);}"default"!==this.getDeviceType()&&(0>=g.getObjectLength(c["default"].normal)||(0===g.getObjectLength(c.mobile.normal)&&(c.mobile.normal=g.deepClone(c["default"].normal)),0===g.getObjectLength(c.hd.normal)&&(c.hd.normal=g.deepClone(c["default"].normal))));return c},getDeviceType:function(){if(this._lastDeviceType)return this._lastDeviceType;this._lastDeviceType=
"default";g.isMobileType.any&&(this._lastDeviceType="mobile");return this._lastDeviceType},getStylesItem:function(a){var c=this.getStylesRoot();return c.hasOwnProperty(a)?c[a]:null},getStylesRoot:function(){return a.styles},placeHeaderStylesheet:function(a,c){var d="",b=document.head||document.getElementsByTagName("head")[0];c=c&&0<c.length?c:"";for(var f in a)if(a.hasOwnProperty(f)){var g=a[f],h=g.properties||{};if(g=g.classToHeader){var d=d+(g+" {\n"),k;for(k in h)h.hasOwnProperty(k)&&(d+="\t"+
k+": "+h[k]+";\n");d+="}\n"}}f=document.createElement("style");f.setAttribute("type","text/css");f.setAttribute("kiosked","stylesheet:"+c);f.appendChild(document.createTextNode(d));b.appendChild(f)},placeHeaderStylesheetWithNamespace:function(a,c){for(var d="body {ID}.kskdCls, body {ID}.kskdCls .kskdDiv, body {ID}.kskdCls .kskdDiv img, body {ID}.kskdCls .kskdDiv div, body {ID}.kskdCls .kskdDiv span, .kskdDiv.kskdFixedBannerContainer,body {ID}.kskdCls:hover, body {ID}.kskdCls *:hover,.kskdDiv.kskdFixedBannerContainer .kskdDiv:hover,body {ID}.kskdCls.kskdDiv .kskdDiv {display: block;float: none;opacity: 1;position: static;overflow: visible;width:auto;left:auto;right:auto;letter-spacing: normal;white-space: normal;top:auto;bottom:auto;height:auto;min-height:0;max-height:none;min-width:0;max-width:none;clear: none;margin: 0px;padding: 0px;border: 0px;font-size: 12px;line-height: 1.2;text-align: left;text-transform: none;color: #6d6c71;font-family: Arial, Helvetica, sans-serif;font-style: normal;vertical-align: baseline;background: transparent;box-sizing: content-box;-moz-box-sizing: content-box;-webkit-box-sizing: content-box;filter: none;} body {ID}.kskdCls.kskdDiv .kskdDiv a *:not(.kskdDiv) {display: none !important;} @media print {   .kskdCls, .kskdCls * {       display: none !important;   }}".replace(/\{ID}/g,
"#kskd"+c),b=document.head||document.getElementsByTagName("head")[0],f=b.getElementsByTagName("style"),g=f.length,h=!1,k=0;k<g;k+=1)f[k].getAttribute("kiosked")===a&&(h=!0);return h?!1:(f=document.createElement("style"),f.setAttribute("type","text/css"),f.setAttribute("kiosked",a),f.styleSheet?f.styleSheet.cssText=d:f.appendChild(document.createTextNode(d)),b.appendChild(f),!0)},selectStyle:function(e){if(!g.isString(e)||0>=e.length)throw new a.Exceptions.BadOptionException("Expected styleset to be a string",
this,e);this.clear();this._lastSelectedStyleset=this.getStylesItem(e);return this},styleElement:function(e,c){if(!e instanceof HTMLElement)throw new a.Exceptions.InvalidTypeException("HTMLElement",typeof e,this);for(var d in c)if(c.hasOwnProperty(d)&&"__"!==d.substr(0,2))try{e.style[d]=c[d]}catch(b){g.debug.error("/StylesController/","Failed applying style '"+d+"' to element",e,b)}if(c.hasOwnProperty("__stylesheet")){d=a.tools.array.isArray(c.__stylesheet)?c.__stylesheet:[c.__stylesheet];for(var f=
d.length,h=0;h<f;h+=1){for(var m=d[h].split("."),k=a.stylesheets;0<m.length;)k=k[m.shift()]||{};if(a.tools.isBrowser.internetExplorer9())for(var l in k.properties)k.properties.hasOwnProperty(l)&&(e.style[l]=k.properties[l]);else if(k.hasOwnProperty("classToElement"))try{e.className=e.className+(0<e.className.length?" ":"")+k.classToElement}catch(n){g.debug.error("/StylesController/","Failed applying classname '"+k.classToElement)}}}}}}());a.styling=a.styling||new a.StylesController;a.stylesheets=
a.stylesheets||{};a.stylesheets.images=a.stylesheets.images||{BannerCloseImage:{classToHeader:".kskdDiv.kskdBannerCloseImage",classToElement:"kskdDiv kskdBannerCloseImage",properties:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAAZlBMVEUAAAAAAAAXFxcWFhYZGRkaGhoAAAAAAAALCwsNDQ0ODg7k5OTo6OjV1dXZ2dnj4+Pm5ubAwMDCwsLZ2dna2trQ0NC/v7/Dw8PHx8fNzc3R0dHS0tLq6uru7u7y8vL29vb6+vr9/f2tB0eZAAAAHHRSTlMzNDc4ODlTVVhYWLS6vL29vb/AxsbIy83Nzc3Nu0nGLwAAAFpJREFUeNq9yEcSgCAMAMAECxIpVsBC8f+f9JoHOO5x4Q+jFgBCj6y2ZxJielZWdFXn6kmskI5SDkJguj3nveHT2hRjsi0rcwelwm1YLX5AVH5m1UsEQNnD116VFgP50TblxgAAAABJRU5ErkJggg==) !important",
"background-repeat":"no-repeat !important"}},BannerCloseImageMobile:{classToHeader:".kskdDiv.kskdBannerCloseImageMobile",classToElement:"kskdDiv kskdBannerCloseImageMobile",properties:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABI1BMVEUAAAAAAAAAAAAAAAAAAAAAAACQkJCRkZGOjo6Pj4+QkJCRkZGLi4uRkZGSkpKTk5OUlJSIiIiJiYmKioqMjIyRkZGIiIiBgYGBgYFra2taWlpbW1tbW1tcXFxdXV1gYGBhYWFiYmJjY2NkZGRlZWVmZmbFxcXGxsbFxcWUlJSVlZWQkJCQkJD19fXb29vv7+/T09Pk5OTm5ubo6Ojp6enr6+vz8/P09PT29vb4+Pj5+fn6+vrh4eHi4uLj4+Pk5OTm5ubn5+fh4eHi4uLj4+Pk5OTm5ubn5+fr6+vt7e3v7+/x8fHy8vL09PT29vbm5ub+/v7m5ubn5+fo6Ojq6urs7Ozt7e3v7+/x8fHz8/P19fX39/f4+Pj6+vr8/Pz9/f3+/v5T3cwbAAAAUXRSTlMzPT5HSF1dXV5eXl5fX19fX2BgYGBgYWdof4KCg4ODg4ODg4OEhIaGh52eo6Td3t/j9PT09PT09PT09PT19fX19fX29vb29vb29vb29vb2/v7cj7FhAAABCElEQVR4Ae3K11LCQBTG8V0Ee1GwiEosEbFI72AvSi8psaSE938Kv4moV2e91sn/Yvd8Mz/2r/JLJKd+xnIyQbnjwag++TWW6qPBEQHTruvW5sauhpEmYLTnOE51lqHFKs5elICBeNe27coMYwsVHN14gFHysGNZVnl6rYyvI5MOUm6bplkq4WnLnAniB613r9ae0EHuN99Qc1fs0GbjFTU2fnOrxRev4rzYRQqGYdw+4ylEhC6v6/qNJD3hywtkOKdp2rXEufSIIxem3HpWVdWrGGeMxx5wZlcImFIU5XIbDnLnHiNFwNP+8GIL7lPeDfsnBAyeZ8bOk5mzCUbJ0LeDDAWZ3x/oA8TkMV4KOs9lAAAAAElFTkSuQmCC) !important",
"background-repeat":"no-repeat !important"}},BannerAdsLogoDefault:{classToHeader:".kskdDiv.kskdBannerAdsLogoDefault",classToElement:"kskdDiv kskdBannerAdsLogoDefault",properties:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAASCAQAAABrluEGAAAE/0lEQVRIx+2We0zVZRjHv4mI2sBQRnIAb8QYaiZRU6xlMy+4mYkiYYqoEUs3MXAohHhBszRz6kjQuAQqokAHNUszGSVwTMQ4yB1BbsJBOCAHOPff79sfxyNorppbTbee5593e5+97+e5vM/7gHhWFMAzBQvQQh8ilFMgSQq6qsZPX7bF4Pt7T1lkLYxSPiKtuRJnDHkKYfUhfIz8FAsJBuM/SOw/Sj5gWgnlJJlzdf1hMvvS3N35V0iyowVesDEdJZYrk2B/3UW42ZlWuUHoiPd601azS2gj9Ypb+8aNXjpMf0ToFjQq2dkFzcFCR6IXrHWbRaUs0NgiqASVoNI2FAQLHYLK0NF7TRaEEaYiM4EYXEiyMgSjMNiEZ5hLViyDLSz+BEuBFMVRm2atPr4Ti6ctuVtIkqIIHzjc95utpSuCdA2kNLXoHLljW2MW2ddR/HtfL1kozQ8j22tK5EZj/sWiZDJma0U82dOSeIRUKm6WlZbKZGfSyJbb1bcMBlK6x5w1ANBHCd2NRdV5mAEbwuCi9m5ZRKbHwLNystpb8QaGYlA/LEmtBkGYAknyu4YmcyEgAGPNsMr27m5RjE9HxNUL5PYTZI9SshfRU7dpNEZjZjpZ2xj9g8dXVut/OUVW15Ftt932xCSSsorQ81FpXjsy08hwKXa/f0AQu7owHyPNsMZiRX7OZZ0GfnDUvS52act0d8ivE7IjSW0ZWX8IElg+DBuAcbAs8VTfeAC7CuPMsCTZq/GIwwc16WT8BfJqGbZjNtxab5DLUhrqSFKvSz5UmGKyzriOyMQY81llBT8mkJHpWAHPvnYSoXAxXW9wIXNSP/6MzI7HFINU34zVOankwVR5KpmZsGsf/DEVzw+A1essAjZ6qv0wfMT4S3F6HSmKA2G1uqxqsl7h5NOUSm7JIjtVzlFwrXI0qozG1+JWRPvvzMg1CncVl7PIgtoWFbk3JWsTmVu68ru1CR4bzyeRW05g/pW3RaGzC1sx0XS9PsrsUPlv8NbkK0sQkhlNxiYtXtl4Ua/WqyvOPgJLnkj93JvskAa/Gj2zu55UtA0sg5p6xOUVk9dkJVLyo5RrheS97vpcYzuZmXdFTraWyWWiWKM4nUuuOj3vG51eb8j4llQoi2oq5CW//pxMNjQ3lgo6cte5/sgai1W1+08eOFZWqNMgsOmYoXdeWF0sGXc0PrQmDgFV+SQW4MWHYB+VRGn/A9PculyAcOeFTVUllbGp6p63vnwh8NL53l6yuzPpwqCYWZsr8rRqwVh/Z+7xPafUPTP3wy/pC7V6d4aqS6NV67Sae8qDh9U9Gq2qt65280lsMdeswYWUSREBv7gwMjNx+SKlnFTKydikI5/om0lD3/fZCML4v4AtkVutxXRz68IY+MAbzpgMP/jDF77wxGT4IgwR2ICFmARPLEcYwvEh3oE3lmAKnDAHK+GPtYhEOEIRCF+sQwQ2IhizH3QDC7hiKebDCXaYAV9Mgwd8EYggrMEMvIL3sBprMBt2j4UVxda2o2es1mFO/6eAYXCAPawwDA5wgiMksMZQ2MMVk/AS7DAEw+EIN7hjLGxhBwmsYYmRcIYTJsAdE+GOCXCEC9zhhjED+uxzsIEz7GGJQRgBJ9jBGk5wgxsmwA62GI9JcIVdf6MbDW+sGqAB8MF0SPq/239L+ATWQzEa4wboWDjA5ikdZP7On//n2SeE/QNystgK/m/kRQAAAABJRU5ErkJggg==) !important",
"background-repeat":"no-repeat !important"}},BannerAdsLogoMobile:{classToHeader:".kskdDiv.kskdBannerAdsLogoMobile",classToElement:"kskdDiv kskdBannerAdsLogoMobile",properties:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAAAoCAQAAADEB6naAAANw0lEQVRo3u1aB1hUVxr9maF3G0hHE4qAipogdkVRCYiIYo8ga4nRJLpr2Wgs0TUmJtFNjAY3saNGUUFdwYrdWNaIaKwoggVQkT4DTGHPu+8NzAxD0V3zfUnm3m/gtnfLuX85975HVaSP/9+IoAdBD6oe1D8tqBrBgMRkTGZkSdZa0RKlxqg1oD9E+K1ABaDftsj9oCxF9qRKK1TkFBy5NmvEG2RLpn8MYH8bUEWTzAvmK4qq6gmywvQvHNzIBhIr0oPaMKiiky4VF6oaEV5ciQmk5pBXkR7U+kEFpPLMqkaGkuzhPcnu9w7r6wbVYJJ546RUFfKuNWkHaTX+PdvW1w2quGB+1UuGI2vIE7ZVrAe1DlDXNlcUvCyo5SU+fckJJqC2rIrIkIwQeY5goJYX468xfiK1GhMQNXP8TJAWVfemXsPTOL61sVa/XN6Q/TdFS1U0Rd6QjWYilJhUP6cFqgb34foUq81Cm2yK2BpEdeunGqg5UzUBy3myclPM0uzbfO5B5tzVI+dvWFf4VLPV1hXko0NWRXd9JNtfrIp0JissBCTtQRdJQt5yezuyyY2VJGVMpmaAipua0c1ehWtKT5VfLz796Ps9wSi3YE/gmTTfgpWSE2UXCg9nfbGuCzXFE8aP+0n25CyA0bEAYAZkmBMlScz8iJrv8i1aVbSjICF/lyo+XB7h7tn82cySbYU7kd+ZG5fxyY5u6MWCbWgtUIWUOL9LXvhlf8wb3EaH9IlLQ/LCr7TnZ6mbQKmVlKaog/Ugs8U0GkoDbx/lcufOWU2kwdSbunkPenZfvd2tCxRILTEBzWBUeZqrTV9Brtz0HoQqpVz+wIfzulYpkFC834fsyfywo/Sg1lYeDPXDwiFTT2OVFTXlSkX2Dls3eztem3ZPIkcsyzh/Bl/74cDSi7X16Nr3l+bVYi1nv+yNLTFTSawmqGSQ3YaRxmxqRU04b1ELVGOuPnc59NOSxA2CKnusPviE5TSE3ibvx/uUyr1baCT1o3YAyMmyTaYG+IXPUOOOSWoGU/lDrvbKXupALX8dzENaVbV0xrr3+NScyeS5xEsX1yi6270TtTjYXlmpXbN2yqC3+dSer8mXWuTM5HPyim7DZSW1ezq+4WaCDpZdGjeKHJie1AbVsGQR3yp+IrWGONSSVbLgau/EEeeijRoEVcNWSimGugPEpk83JkynPtQVDgmK+Y1rSarmFOVyGkQe2DXNYCF7xNWeP0i990arIN2fQGFrBSMzZRZ1Kj7Op8uKjh3avu38cVk5n7+dQn4PlnMphWLv/lU/nk/lahSyUWN79+ZbbIqjrtcW8mmF7MuVNFhWyqUzM/Ynp+w7lHQk8UjirnXNIq7tYefA8tSTp46ln5cUC6sr6N4d2sU8gTqoyJvKs/g2WUeoEwijABtnaKA9Foh2TAM3ARFHZum5o7wVO7yrvERdoBa+oBHUHgpgGukARfAgF+5gejVQl2RRJLVBt5rBsoLJ/emjn3+iYFAplZu2oc8emycKmjBv+RQ+9STbazpq3qHgkRPLXvCqPnxsxg4uJSlx+RuNocGdRm/5Z+xU6hnUk3/mh/XJqwS5K5+zAjPow4OadIj+glwIBUN/elLg7R3CaqbQcAp1jrxzjn/qzBbM2ZaTVQ1QRfnRXO3dU5w8jwvHys05A0CidHvpSmVhVZX0bPJwpoFbqRe5PR1feZJta1Fp8oV3IHRm6tJfC9SifAaVNfbHDG7IBjtklhurlOhiADQMrspaC1QrHtTHmXJmFxXyb9fBhPQgzwOj+adi56fv4VORizFWIDTBnbx3CjZw94ZTGwSpklxP3boQHKMbBVCbiE58aeYdobb0vWWw/IHkK2fqfyN949rErw79I/XT5Nl27cnrQbywmjEY24c8PXuUs217noX+HCF7mqAalW3BoSbjnWlcm4urqC3EirO9xrIT1ZrJxvllG/W59aGGxhavHwAvwY5CdYMaQd6QP+62CmRlhpnku7poFUXBvtUBqiocS6VoCqI3qenZoXxJzMJHv3D/C57SOBgaN4yF7fNro1Qyx3gscrJCzaYqKh4ciO5L7mPaao69agvg4p52kNeyqffiybsa1KEAqAXGcMrazyCQQZpbQw7V7aFBqhNXlxZPI3LOceBCxZ0AvLiEwZd9KHLc/IklGVz68k/Ut+gwNjUnYjxF7WB2OHcvvQEcxPWD6lWj1DPM8her++KXBVUmmzoXktaSzP8TwZdEf5pzg53KHuH5dpAIEdvA5gpmfy+eoohv55Q9V+9D+mx8UPhbmmMXF3SPJX+4jKaKYu15PTxHAfe2aaxGRFaPtvBkQrU+NVDFxZ8yzYmmkDMMpvVTWRsTyWZOQmGiQqlH/EQB1OACxot+PbB9SdSotdMXTIBB8IJJMWw0qDDCTZaGPrv+8qBKpVVM9kqe9w+DZba6MEQF6u2zTGYqW48hPxgYzsSLUgTvnrwPkhTQstcPi6+eKKu+MUvb1b2fKi0RTNGTG3ZdsVnNeVALCjIzsu48vPXw1q0L4ydTl4ztGqsxIItSdhAvKQS38dYAVXBSxfe2Lt035yCjalmHwX/s4B9AD/PTYaQ6Q7o9BPUPvvRxDQaldy99Q10aK6mq84MhrKqTUceU1ZXSlwG1qGjQ58nJAgNNt+1ADieiBPVftCeOT51MwtTt2YnJtDiRL5v+mUdY0tTxvegt6mUSsmRRKWOn2df9hacfZvvNu3WVT6cnwVq68eqfeJgmwXYPpjAaAOX1q1b/IfAQNmR8YwT/zJXzaOGBNdUsX5QXXpt8jYmAs2omPcNADUUfTai54Kj6kn/qtLzTvINkW7CN1Rs2bFPF0s/uhQIyC5hgSyzde8ywrF+0KFU9jir1JEWbRT5JFyRtN/ntHcunxy/wj6oU7ODVpBn9yeHfXYuTBOnLEo998SssaXlaXNRACvAd+IIdODKu+Y7jW3y3lcb4jy4RTndJy6gDD+rxEyHTR74bO3RK+NSwzp3ozSym7CUFYdPeH7Q/4ulKFfedtBg00RVrqlm+Eafk2uHnNbDFjkWQd2ku+IkX2fzcUQA1iHwPRn0dRaEJC9PipXlMvDqD/5rUw1ONeaiMJduqlI/Wd/bAKYc7TdtiKh13fl3TsuC5TkolgHoyFVLTOaK/NJ9v/a+PVeR/wjwK2r9E5xV4ZewiCleUV+eLFTKB8if4vSscAzbCPLy1LIavkVeOjqmRmOozWGXKX3n11w6HUuC4OnDkvRpUg1OOHGW6n0qxNBoCNYgii+4z+exKrbM+YZx7NZirS9kBQf2DZDjeSG+CeAXRgDt7OLkGkVNzfrVAxZl+LSO/VoU7mUO4v2ooLJcl9sGSHHZOq2l39bJO8m9Zfo+rPZECNfEg1w2xSu5wWnVh/3wB1OjZsEF+Z1bw5WruqGz2V9iILpeWq6BUhWePXWKcwngLHfc9fH4rcjv9OV+3cU1pXm3w7p+4uLUW1IoD+8QjGWOwqKE/JC6cztV+M5fCQbbawaD5317LlSyOhnC1lt5kh5Q7lY/kxYKj6nd1Jk+xii6XsfuRm/saBFUhP795WFcQ3IOqc8uVNd18yW66e/ZS9QPk6nWg2W61jqnmdxdCVMqmzYZKOMKaOZ77Ennp3z+26ZefBv56wyoCiuVMrRaPyzgnF3iFtPTMscAPYO06ATD3GUPSD0gLVRT//Mm2kzBSx+zd2OKnAdGQNDv063ZvH9Q7v8+khJWycq33aWXLFo6KLsquNlSV+Tlnj4bPgn3tBpdiwy5kVMs3kqdxBAl2MwCraQIdbbaAKfr9n+BGXY5G8sCV5/z4ATNkW7AtPmmzKqrf4t1KwnbUr/7CriorNS4DFRXlOUq5eomkzD5W54WKMdkN6OHYD0N7sYsJS3IN7uscglNOB6P2g8IMgzABV/Z21oU6OIeMnzZz/tAZxiMg9b2wCAdW4wSJ6T0wZvLMEX+1GIWaHrDyTuQeHmwZxCklZ5zwax0eatOfeqO/btQfgEVVx8HQkgA4wT54dhjyw1Abiv7bY0xrdhNWc/Y3gjHwRa8BOIJYcid+uE1b6Fgg+vUAw21JvvETE+dihD6IwZiLH+bfijpsnpw4F+Uh2PAA5Ovz/o0N8TuxP7qu/sRQLnvsuSsOb6bsztMSE4PC4q8dFuUOeKzZfac5luMGq9westcOW+AC623K+IY5nnXBSast6rgaZ2yPOZ5ywNMubKtEAIMDvxXrzxlAewMaVfRCuSNau6EPH+R9UPsmWnGXjoaq21CV+rP5ujKtMhJuak0whjNG4q4ZuVm2Yr16QspboyVMI8a2R49twZRxemMrMqqR/lcE9V6G6TjIh65Lao7Im2Aq5mzpBmp5U3ZlbMEuIPgLYSOkrbGApvhZoV61YG4rTFFiq1bDl1kI1xf8RYcpW7Qp+2+l9oWClTCaeXWpFWMxhupv1YTli9iB3Ly6X358I1Zmwq66jfGsLaI1u1ZRlXI+BjQLG2VdM/P/AdS8XP+PoA51v04xYFFXXleNiEUDHdujXVN3v6/8OqURQTVHXTPXehPwyqBmZgDSEFiWP8SLv9fz3uulQJWUxSdA8fsDUv0r6gY+UGswKJWFL65fidvgPIGxOU/9xxQNv6J2AR0PU6MkumIk6Ekw2vnAPek/+2kEqNaMwPjWE31AfbjL5Jb6D9QaC6qRGvmoK1rpP6V89e9T/zRB/yW1/vN0fdSD+lpA/S8WXoIG7FEXGwAAAABJRU5ErkJggg==) !important",
"background-repeat":"no-repeat !important"}},BannerAdsLogoGreyDefault:{classToHeader:".kskdDiv.kskdBannerAdsLogoGreyDefault",classToElement:"kskdDiv kskdBannerAdsLogoGreyDefault",properties:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAASCAYAAADBnymNAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5NJREFUeNrsmFlIVFEYx++oFREtWqFlGZrtJJUSlr0E+tKbxjQVJD2kGVhYDTkTYctDo61Em9ZDJRGUiSVIhFZCtDK2m0gokaFCy4QShaT2/+B/8XCZe53IHoz7wc8znv38z3e+c2Yc/f39mm1Daw6HQwuzZfg3FiF/vF5vOJItIA/MA7rgfaAJlIKzPp+v15YsRK/1eDwi6jWQNUjdKuC0xQ0tFETQU7NCqJ/Juqf+JxFwWv+qPRzNNBTkKf+fARXgHjgALoMdSp2gwmJyjUjuYpCt+DwNn2vAU3AfHAGp4APYAzaDGPCR4x1iNyfBOjASPAYeMBscB8tAC3AzPxuUgbHKND6x/Dz7+AmawVHMq9pCmwT2LbaG6zdaOqgFGaAuFMHDGFP1eOrmZOTI70X6BcxU6s816Wc+WAhRE5HWgyTwBiwBk0EcOA2kz18MPaPAQVAs43HT3oFbYAVYD2ax/XSwDxwGATAJyAZ2cjydRNZv5vhLwU3MK9tCAyf7rKCARtHTTTZD8pOthNUvqm6I+QN0gOuYzCLkNXCX1PpmNpWLiwc56OOEUjYR5II2sABlLor/DWwDU1ivB1Ry4m6lfRE3ReazHHQx/wW4SOSE9Q6cUF866/ayzErYOvbtVPJFND83vszgvS3M90OnQjNhzayHHhGqiXfFcvdvG8pimT7Agru48k5OXI7tIykDaeAKPW6t0n4l0zs88rq5eKlWcaHG+PccSTuYYRJfEyhgHT02UhG3kGtJASUGwTXmpWCMksGEjcBADhANVqPBWy60AHxXwoWZdfO4i3dWoY/RSlk70zTkj+Oiojlp2cAOhoIkepeIvVtpX8kwsYti6naJogvbgwi3mCfpvYW3avTIFsUjNYrcys+tSptzRNrUYoziwYQdw0tqPJBQUI40CtxQJtZkIewzbEY+F5tMkXX7DMoZKxvR91WkL8EExs394BUvRvGicOW4a8zP5AZfUE5AKje+gJfgiAFNveKFD9lXkYWwerjLoGC62A1cR6QhliZQ6Ch6eaHpFwTDq0C3DUS1UpMJine/Vl4O8bxg6nl05UWQw5fAJt6+kreTt34cRVnFF4CfMTmJ7dvoURvpKQH2FUM05tWw/hy+Cp6AY8FeBUoY8Cg3fYDjOnnUpfxrkJdALkNPgK+coF8QQv2xQI6jy/6CMDS/FfTx2ZJvi/qH4tq/btm/bg0rs4W1hR1e9luAAQCfvBWqzsKVTQAAAABJRU5ErkJggg==) !important",
"background-repeat":"no-repeat !important"}},BannerAdsLogoGreyMobile:{classToHeader:".kskdDiv.kskdBannerAdsLogoGreyMobile",classToElement:"kskdDiv kskdBannerAdsLogoGreyMobile",properties:{"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAAAoCAMAAABZ0JFjAAACfFBMVEUAAAB4eHj///94eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHhSpjOlAAAA03RSTlMAAAABAgMEBQYHCAkKCwwNDhAREhMUFRYXGBkaGxwdHh8gISIjJCUmJykqKywuLzAxMjM0NTY3ODk7PT9AQUJDREVHSElKS01OT1JUVVlaXF1eX2BhYmNmaGlqa2xtbnFydXZ3eHl6e3x9fn+AgoOFhoeIiYqLjI2Oj5CRkpOVlpeZmpydnp+goaKlpqeoqaqrrK+wsbK1tri5uru8vb6/wMHCw8THyMnLzM3Oz9DT1NbX29zd3t/g4eLj5OXm5+jp6uzt7u/w8vT19vf4+fr7/P3+t2ttXgAABM9JREFUeAHt1v1Xk38dx3FfwKaCoE7Fm6zEaUE3mstKK22VlRli5g2ZohFR5o0WWtS8sVlEmUpppUYlFN2s1LKWeGOZMBCBKfD8h7o+n2tjAzbznM73nHEOz5+2nV1nj3Ptfb2va1reJGnatElDnaJOUWUr2X31AYkeXNlZojes/5Pqre1hTF0HPLlJXdjBhNpLc5G68B9k6G5p7lG9HWSs3ZNz1FqytD/XqCXdZKmrOMeoO3G7XbWmDej42Dt3JWd3m1Kt/OGJIjmtuXCoQFtbtsq0tvGXf7nxjVWyrfj6jfYr9SskffDSF2X61OWdess3m92+Osuzt6m5uenk3vIxBDkFgn6lF0x7n0a9gq3DgTTD+emSSv6MrUWpbkKtpI39sPnNwwwvleb/HLeLsyVVDWIaOldQ0A0flbQHWNZOsq/tItH1FWOpfogqPajLRL2P7X1yqMMHZCpoxpZ+fCeEXCnrPwys1oLU4rhVIn+cRB+aC+xwpf0LekhWFyJZ79ox1Dog8BrUxMFyOvNJmXy/wC0+nmqlX5ZLNd96cqLmXB/wPdXDy4NVZ/uIl7lUI41vVi+0HTF9YUYInoVCF/5jjpuTTo0C4demdsqpUKZ3p87WOKqRDu+RS10HRHxmRh/D0LLT8HS2NG9bhSzVSPs2ylCPyC1kfyav6LKZhjRqpQMl5pPJ1xCjNWCpla0Qawlkptq2PicL9Q+O9EWVEtTvAO+QaQuwrx7oadpSLFnqTaD7/bLUqzucPuNNUvOK/g2306hhIj6olqkVp5ihVmKL+bNRvUaQhWpqVJJ6Hf4u28xhOLN8ENPAD5ZYqmm7XKrbt0epeU0wmKL6DKyFiJyqIezzR9xPoj4FIZyVWj/4SupAIEn9LdyW23M4r+BDbI+WJKkPF6VTr6aop2EkRa0DnyrdCytMTFLApdIQ9AX8rxiA8t9lpfaMwP3SBPWS4y6R6e3AYWnGp7//BKdvWWo30D7dUjvbnFrKU9Q2eJyiRokEg+b02f+/VU6pAYhUv4Kq/L3PMlMfVRwFfuNxqZ8Hjsv0Y2B98ScWSwUbH8OvDPWPpT8DTmW6rPI2AT8apQZJFPONoSrYEsOpISP16AbZ3noty7Ly/BpodKlzY0BomSouAn/K/z39Bxer5BZcc5eV7x7wWUMNlZmKDfVRWdkHjsWB945SwySrlsJ2l/stNeBXsC4KE/ZqgaTmkcZC2bZnuQUs/BewyVK1jdH636N+nGJGUetSFYjDgL+XRPEtIUY7Pir1xQjLFKFVqrbgFkON2lXYQGw8ld2GCndWy/RxTJeU6i6cNLf3IWgMAO+SaoZw694g7Y/jdqe4cATMTjMjsv0eyS4eI9HQofxRqoMLyFQHfgMmEk0uq1hrJMMA8OLwfF0G4l+ZpTlfik94XKkZ6V0jp30jz9Z522nzSlr9k36g69RiOa08+wTo++48Kcw/F8jpPA/etKMPt56PLP8bTgN3T63MSxUhKpvPUUmBCEQTt4AoGOkEKgw/xTZw/yW2riKl5Zsp27xCKX9RvmyFFeveVqBkS1eVe2Uq9ci2yPu/HwI1rkAw7WVQSqdmrSbXHq3J1k3PZKH+tVSThNpWqslB7drv0SSgDnf+9HPFUg5S8yZBU9Qp6hR1ivpfHa3Qjg6QagMAAAAASUVORK5CYII=) !important",
"background-repeat":"no-repeat !important"}}};a.GrandCentralStation=a.GrandCentralStation||a.EventDispatcher.extend(function(){function e(){g.scope.enforceCaller(this,a.GrandCentralStation,"Caller not instance of ITGS.GrandCentralStation");var c=this;this.addListener("mediaSettingsApplied",function(a){c._adMaximums=g.mergeDefaults(c._adMaximums,a.settings.getSubset("ui.sniff.maxProviderAds").getSettingsObject());c._maxPlugins=g.mergeDefaults(c._maxPlugins,a.settings.getSubset("ui.media.maxPlugins").getSettingsObject())});
this.addListener("BannerDestroyedForSizeRestriction",function(a){c._numPlugins.hasOwnProperty(a.type)&&0<c._numPlugins[a.type]&&(c._numPlugins[a.type]-=1)});this._windowMessageListener=function(a){c.processMessage(a)};window.addEventListener("message",this._windowMessageListener,!1);this.addListener("bannerSlotProviderChanged",function(d){var b=d.from,f=d.to;g.debug.log("Banner provider changed from '"+b+"' to '"+f+"'");c._adCounts.hasOwnProperty(f)||(c._adCounts[f]=0);c._adCounts[f]+=1;g.isString(b)&&
(c._adCounts[b]-=1);var b=c.getMaximumAdsForProvider(f),e=!0;0<=b&&c._adCounts[f]>b&&(g.debug.log("/GrandCentral/","Preventing provider: "+f),e=!1,a.messaging.dispatch("bannerProviderLimitBreached",{bannerSlot:d.bannerSlot,provider:f}));e&&g.debug.log("/GrandCentral/","Allowing provider: "+f)});this.addListener("bannerSlotDestroyed",function(a){a.adProvider&&0<a.adProvider.length&&c._adCounts.hasOwnProperty(a.adProvider)&&(c._adCounts[a.adProvider]-=1,0>c._adCounts[a.adProvider]&&(c._adCounts[a.adProvider]=
0))});this.addListener("shouldDestroy",function(c){a.sniffer&&a.sniffer.clearState(!1!==c.unmark)})}return{construct:function(c){c=c||{};this._options=g.mergeDefaults({name:"GrandCentralStation"},c);this.$super();this._adCounts={};this._adMaximums={};this._numPlugins={};this._maxPlugins={};this._messageHandlers=["AppNexusMessageHandler"];a.tools.debug.log("/GrandCentralStation/","Kiosked library init - "+a.Config.VERSION);g.scope.enforceCaller(this,a.GrandCentralStation,"Caller not instance of ITGS.GrandCentralStation");
e.call(this)},destroy:function(){if("function"===typeof this._windowMessageListener)try{window.removeEventListener("message",this._windowMessageListener,!1)}catch(a){}this.$super()},libraryInit:function(){a.Config.SAMPLE_RATE_RANDOM_CURRENT=Math.random();var c=g.overrideCall("GrandCentralStation.libraryInit");c&&c()},getMaximumAdsForProvider:function(a){return this._adMaximums.hasOwnProperty(a)?this._adMaximums[a]:-1},getMaximumNumPluginsPerType:function(a){return this._maxPlugins.hasOwnProperty(a)?
parseInt(this._maxPlugins[a]):-1},isPluginLimitReached:function(a){var d=this.getMaximumNumPluginsPerType(a);if(0>d)return!1;if(0===d)return!0;if(this._numPlugins.hasOwnProperty(a))return this._numPlugins[a]<d?(this._numPlugins[a]+=1,!1):!0;this._numPlugins[a]=1;return!1},processMessage:function(c){for(var d=this._messageHandlers.length,b=0;b<d;b+=1){var f=a.MessageHandlers[this._messageHandlers[b]];if(f){if(f=new f,f.canHandleMessage(c)&&(f.handleMessage(c),f.captures()))break}else a.tools.debug.warn("/GrandCentralStation/",
"Failed finding class for message handler: "+this._messageHandlers[b])}}}}());a.messaging=a.messaging||new a.GrandCentralStation;a.MediaPluginLoader=a.MediaPluginLoader||a.KioskedObject.extend(function(){return{construct:function(a){this.$super();this._mediaInstance=a},destroy:function(){this._mediaInstance=null},bootPlugin:function(e){var c={},d=null,b=this;e.hasOwnProperty("options")&&(c=e.options);e.hasOwnProperty("styleClass")&&0<e.styleClass.length&&(c.styleClass=e.styleClass);c.name=e.name;
a.Plugins.hasOwnProperty(e.name)?a.messaging.isPluginLimitReached(e.name)?(g.debug.log("/MediaPluginLoader/","MaxPlugins exceeded",e.name),a.messaging.dispatch("maxPluginsExceeded",{placementID:this.getMedia().getMediaId()}),setTimeout(function(){a.destructors.destroyMedia(b.getMedia())},1)):d=new a.Plugins[e.name](c):g.debug.log("/MediaPluginLoader/","Unable to find plugin to boot it:",e.name);return d},buildPlugins:function(){var e=this._mediaInstance.getOptions();if(0<e.plugins.length){for(var c=
0;c<e.plugins.length;c+=1){var d=this.bootPlugin(e.plugins[c]);a.tools.isset(d)&&this._mediaInstance.addPlugin(d)}this._mediaInstance.set("addedPlugins")}this._mediaInstance.hasNot("dispatchedAddedPluginsEvent")&&(this._mediaInstance.dispatch("mediaAddedPlugins"),this._mediaInstance.set("dispatchedAddedPluginsEvent"))},getMedia:function(){return this._mediaInstance},preprocessOptions:function(){var a=this._mediaInstance.getOptions();this._mediaInstance._options.plugins=g.processPluginsArray(a.plugins,
this._mediaInstance.getSettings())},processRequiredPlugins:function(){this._mediaInstance.getOptions();this._mediaInstance.getSettings();if(!this._mediaInstance.hasPluginInOptions("KioskedAnalytics")){var a=this.bootPlugin({name:"KioskedAnalytics",options:{}});this._mediaInstance.addPlugin(a)}}}}());a.Plugins.BannerSlotAbstract=a.Plugins.BannerSlotAbstract||a.Plugins.OverlayPlugin.extend(function(){function e(){g.scope.enforceCaller(this,a.Plugins.BannerSlotAbstract,"Context not met: ITGS.Plugins.BannerSlotAbstract");
var c=this,b=this.getBannerSettings().getBool("waterfallAnalyticsEnabled",!1);this.addListener("sendBannerImpression",function(){c.providerReady()&&(c._bannerImpressionCount+=1,c.dispatch("bannerOnScreen",{force:1<c._bannerImpressionCount,count:c._bannerImpressionCount}))});this.addListener("sendWaterfallEnd",function(){if(!0===b){var f=c.getMedia(),f=a.tools.mergeDefaults({"waterfall.publisherID":f.getContentOwnerId(),"waterfall.siteID":f.getAlbumId(),"waterfall.step":c._waterfallTrickleCount},a.tools.environment.getAnalyticsConsumerData());
f[a.Config.ANALYTICS_EVENT_NAME_PROPERTY]="waterfallEnd";c.dispatch(a.Config.ANALYTICS_EVENT_NAME,f);c._waterfallTrickleCount+=1}});this.addListener("sendWaterfallTrickle",function(f){if(!0===b){var e="",g="";f&&(e=""+f.network.toLowerCase(),g=""+f.placementID.toLowerCase());if(0>=e.length)throw Error("Waterfall trickle: Network was not specified");if(0>=g.length)throw Error("Waterfall trickle: Placement ID was not specified");f=c.getMedia();e=a.tools.mergeDefaults({"waterfall.network":e,"waterfall.placementID":g,
"waterfall.publisherID":f.getContentOwnerId(),"waterfall.siteID":f.getAlbumId(),"waterfall.step":c._waterfallTrickleCount},a.tools.environment.getAnalyticsConsumerData());e[a.Config.ANALYTICS_EVENT_NAME_PROPERTY]="waterfallTrickle";c.dispatch(a.Config.ANALYTICS_EVENT_NAME,e);c._waterfallTrickleCount+=1}});this.addListener("mediaResized",function(a){c.isBuilt()&&c.updateLayout(a)});this.addListener("mediaUpdateTick",function(){c.detectScreenVisibility()});a.messaging.addListener("bannerComponentWillLoadNetwork",
function(a){a&&a.component&&a.component===c.getBannerComponent()&&c.dispatch("sendWaterfallTrickle",{network:a.network,placementID:a.zone})});a.messaging.addListener("providerFallbacksReachedEnd",function(b){b&&b.kioskID&&parseInt(b.kioskID,10)===c.getMedia().getKioskId()&&(a.tools.debug.log("/BannerSlotAbstract/","Received fallback chain end-cap, destroying item..."),c.dispatch("sendWaterfallEnd"),a.destructors.destroyMedia(c.getMedia()))});a.messaging.addListener("bannerProviderNotInitiated",function(b){b&&
b.placementID&&b.placementID===c.getMedia().getMediaId()&&(a.tools.debug.log("/BannerSlotAbstract/","Banner not created since suitable zone not found"),a.destructors.destroyMedia(c.getMedia()))});a.messaging.addListener("bannerSlotShouldReloadComponent",function(a){a&&a.component===c.getBannerComponent()&&c.refresh()})}function c(){g.scope.enforceCaller(this,a.Plugins.BannerSlotAbstract,"Context not met: ITGS.Plugins.BannerSlotAbstract");var c=!1;this._currentScreenStateOnscreen&&this.is("onScreen")||
!this._currentScreenStateOnscreen&&this.is("offScreen")?this._timeInCurrentScreenState+=1:(this._currentScreenStateOnscreen=this.is("onScreen"),this._timeInCurrentScreenState=1,this.is("offScreen")?this.unset("hiddenOnscreenBanner"):this.is("onScreen")&&(c=!0));var b=this.getBannerSettings(),f=this,e=b.getInt("bannerReloading.onScreen.hide",0),h=b.get("bannerReloading.onScreen.reappearanceMode","none");this._currentScreenStateOnscreen&&this.is("hiddenByReloadingBehaviour")&&c?"none"===h&&(this.unset("hiddenByReloadingBehaviour"),
this.unset("hiddenByOnscreenReloadingSetting"),this._timeInCurrentScreenState=0,this.show({callback:function(){f._timeInCurrentScreenState=0}})):0<e&&this._currentScreenStateOnscreen&&(e=Math.max(e,10),this._timeInCurrentScreenState>=e&&this.hasNot("hiddenOnscreenBanner")&&(this.set("hiddenOnscreenBanner"),this._timeInCurrentScreenState=0,"refresh"!==h||this.canRefreshForMode("onScreen")?this.hide({callback:function(){"destroy"===h?f.getMedia().removePlugin(f):"refresh"===h?(f._timeInCurrentScreenState=
0,f.refresh(function(){f.unset("hiddenOnscreenBanner");f.unset("dispatchedBannerOnScreenEvent");f.addBannerRefreshCount("onScreen");f.show()},null,!0)):(f.set("hiddenByReloadingBehaviour"),f.set("hiddenByOnscreenReloadingSetting"))}}):g.debug.log("/BannerSlotAbstract/","Max refreshes reached for on-screen: "+this.getBannerRefreshCounts().onScreen)))}return{construct:function(a){a=a||{};a=g.mergeDefaults({name:"BannerSlotAbstract"},a);this.$super(a);this._visibilityDetectionFrame=this._bannerComponent=
this._bannerSettings=null;this._timeInCurrentScreenState=0;this._currentScreenStateOnscreen=!1;this._waterfallTrickleCount=this._bannerImpressionCount=0;this._bannerRefreshCounts={onScreen:0,offScreen:0};this.addStatus("built");this.addStatus("beenOnscreen");this.addStatus("beenOffscreen");this.addStatus("completelyOffscreen");this.addStatusSet(["hidden","shown"],"hidden");this.addStatusSet(["animatingShowing","animatingHiding","animationIdle"],"animationIdle");this.addStatusSet(["onScreen","offScreen",
"unsureScreenVisibility"],"unsureScreenVisibility");this.addStatusSet(["presentingAnimated","presentingOpen"],"presentingAnimated");this.setMaximumPerMedia(1)},initialize:function(){this.$super();this._bannerSettings=this.getMedia().getSettings().getSubset("Banner");e.call(this);this.dispatch("containerTypeChanged","banner");"opened"===this.getBannerSettings().get("presentation","animate").toLowerCase()&&this.set("presentingOpen");this._screenStateInterval=setInterval(g.compatibility.bindFunction(c,
this),1E3)},addBannerRefreshCount:function(c){if(!this._bannerRefreshCounts.hasOwnProperty(c))throw new a.Exceptions.BadOptionException("Invalid property '"+c+'\', expected "offScreen" or "onScreen"',this,c);this._bannerRefreshCounts[c]+=1},bannerReloadingStatusChanged:function(a){var b=this,c=this.getBannerSettings().get("bannerReloading.offScreen.reappearanceMode","refresh");if(a&&this.has("beenOnscreen")&&this.is("presentingAnimated")){if("refresh"!==c||this.canRefreshForMode("offScreen"))this.hide({instant:!0}),
"destroy"===c?b.getMedia().removePlugin(b):this.set("hiddenByReloadingBehaviour")}else!a&&this.is("presentingAnimated")&&this.is("hiddenByReloadingBehaviour")&&this.isNot("hiddenByOnscreenReloadingSetting")&&("refresh"===c?(b.unset("hiddenByReloadingBehaviour"),b.refresh(function(){b.unset("dispatchedBannerOnScreenEvent");b.addBannerRefreshCount("offScreen");b.show()},null,!0)):"show"===c?(this.unset("hiddenByReloadingBehaviour"),this.show()):this.is("completelyOffscreen")&&g.debug.log("/BannerSlotAbstract/",
"Not showing a banner due to its reappearance mode being set to '"+c+"'.",this))},build:function(){this.has("built")||(this._bannerComponent=a.AdComponentFactory.createBannerComponent(this.getMedia(),this.getBannerSettings(),{component:{settingsOBC:this.getBannerSettings(),kioskID:this.getMedia().getKioskId(),containerSize:this.getMedia().getMediaSize(),placementID:this.getMedia().getMediaId(),viewability:this.hasViewabilityEnabled()}}),this.buildVisibilityDetectionFrame(),this.set("built"))},buildVisibilityDetectionFrame:function(){this.has("builtVisibilityDetectionFrame")||
this.set("builtVisibilityDetectionFrame")},canRefreshForMode:function(c){if(!this.getBannerRefreshCounts().hasOwnProperty(c))throw new a.Exceptions.BadOptionException("Invalid property '"+c+'\', expected "offScreen" or "onScreen"',this,c);var b=this.getBannerRefreshCounts()[c],f="onScreen"===c?5:0;c=this.getBannerSettings().getInt("bannerReloading."+c+".maxRefreshCount",f);return 0>=c?!0:b<c},detectScreenVisibility:function(){if(this._visibilityDetectionFrame&&this.has("builtVisibilityDetectionFrame")){var a=
g.isOnScreen(this._visibilityDetectionFrame),b=!1!==a&&50<=a,c=!1,e=this.getBannerSettings();b?(this.isNot("onScreen")&&(c=!0),this.set("onScreen"),this.set("beenOnscreen")):(this.isNot("offScreen")&&(c=!0),this.set("offScreen"),this.set("beenOffscreen"));!0===e.getBool("bannerReloading.offScreen.hide",!1)&&(!1===a?(this.bannerReloadingStatusChanged(!0),this.set("completelyOffscreen")):b&&(this.bannerReloadingStatusChanged(!1),this.unset("completelyOffscreen")));c&&this.screenVisibilityChanged();
return a}return!1},destroy:function(){this._screenStateInterval&&clearInterval(this._screenStateInterval);this.$super()},getBannerAdDetails:function(){return{type:"",zone_id:0,count:0,provider:""}},getBannerComponent:function(){return this._bannerComponent},getBannerRefreshCounts:function(){return this._bannerRefreshCounts},getBannerSettings:function(){return this._bannerSettings},hasViewabilityEnabled:function(){return this.getBannerSettings().getBool("viewabilityEnabled",!1)},hide:function(){return this.isNot("hidden")&&
this.isBuilt()},isBuilt:function(){return this.is("built")&&this.$super()},isVisibleWithinThreshold:function(a){return this._visibilityDetectionFrame&&this.has("builtVisibilityDetectionFrame")&&(a=g.isset(a)?a:g.isOnScreen(this._visibilityDetectionFrame),!1!==a&&50<=a)?!0:!1},providerReady:function(){return!1},refresh:function(c,b,f){c=c||function(){};b=b||function(){};f=a.tools.isset(f)?f:!1;var e=this.getBannerComponent().getProvider().getWaterfallIndex();!0===f&&(this._waterfallTrickleCount=0,
function(a){a.getProvider().resetWaterfallIndex();a.getProvider().findMostSuitableZone(a.getOptions().containerSize)}(this.getBannerComponent()));if(0===e)this.getBannerComponent().refresh(c);else if(0<e)this.getBannerComponent().reload(c,b);else throw Error("(Kiosked) Unable to refresh banner, invalid waterfall index");},screenVisibilityChanged:function(){},show:function(){return this.isNot("shown")&&this.isNot("hiddenByReloadingBehaviour")&&this.isBuilt()},updateLayout:function(a){}}}());a.Plugins.BannerSlot=
a.Plugins.BannerSlot||a.Plugins.BannerSlotAbstract.extend(function(){function e(){g.scope.enforceCaller(this,a.Plugins.BannerSlot,"Context not met: ITGS.Plugins.BannerSlot");var b=this;this.addListener("bannerCloseButtonPressed",function(a){a.banner===b&&b.hide({callback:function(){b.destroy()},force:!0,instant:!0})});this.addListener("onclick",function(c){a.tools.preventDefault(c,!0);b.dispatch("bannerCloseButtonPressed",{banner:b})},this._disclaimer.getCloseButtonContainer())}function c(){g.scope.enforceCaller(this,
a.Plugins.BannerSlot,"Context not met: ITGS.Plugins.BannerSlot");if(!this.has("executedBannerOnScreen")){this.set("executedBannerOnScreen");this.hasViewabilityEnabled()&&d.call(this);var b=this;this._showInterval=setInterval(function(){if(b.is("built")&&b.isNot("shown")&&b.has("updatedLayout")&&b.getBannerComponent().has("loadedFrameSource")){clearInterval(b._showInterval);var a=b.getSettings().getInt("mediaOnScreenTimeout",0);setTimeout(function(){b.show({callback:function(){b._disclaimer.show()}})},
a)}},50)}}function d(){g.scope.enforceCaller(this,a.Plugins.BannerSlot,"Context not met: ITGS.Plugins.BannerSlot");var b=this.getBannerComponent().getElement();b instanceof HTMLIFrameElement&&0>=b.src.length&&(b.src=b.getAttribute("kskd-src"))}return{construct:function(a){a=a||{};a=g.mergeDefaults({name:"BannerSlot",extensionOf:["BannerSlotAbstract"]},a);this._currentAnimationCommitment=this._showInterval=null;this.$super(a);this.addStatus("readyToOpen");this.addStatusSet(["desktopContainer","mobileContainer"])},
initialize:function(){this.$super();var b=this;g.scope.enforceCaller(this,a.Plugins.BannerSlot,"Context not met: ITGS.Plugins.BannerSlot");g.isMobileType.any?this.set("mobileContainer"):this.set("desktopContainer");this.addListener("imageFound",function(){b.build();var c=b.getBannerComponent();c.load(function(d){b.getContainer().appendChild(c.getElement());var e=b.isBuilt();e&&d===a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT?(b.updateLayout(),b.set("hidden"),b.is("presentingOpen")&&b.show({instant:!0,
callback:function(){b._disclaimer.show()}})):e||a.tools.debug.log("/BannerSlot/","Banner didn't finish loading",this)})})},destroy:function(){try{this.getBannerComponent().destroy()}catch(a){}this._showInterval&&clearInterval(this._showInterval);this.$super()},build:function(){if(!this.isBuilt()){this.$super();this.unset("built");var b=this.getContainer(),c=this.getBannerSettings(),d=this.getMedia().getSettings(),c={showDisclaimer:c.getBool("showDisclaimer",!1),disclaimerLink:d.get("overlays.Disclaimer.disclaimerLink",
"http://kiosked.com")};this._disclaimer=new a.BannerDisclaimerDefault(c);b.appendChild(this._disclaimer.getContainer());this.unset("builtVisibilityDetectionFrame");e.call(this);this.set("built")}},buildVisibilityDetectionFrame:function(){this.getBannerComponent().getElementProportions()&&!this.has("builtVisibilityDetectionFrame")&&(this._visibilityDetectionFrame=document.createElement("div"),this.getBannerComponent().getProvider().is("vertical")?m.style(this._visibilityDetectionFrame,{position:"absolute",
right:"0px",top:"0px",bottom:"0px"}):m.style(this._visibilityDetectionFrame,{position:"absolute",bottom:"0px",left:"0px",right:"0px"}),this.getMedia().getContainer().appendChild(this._visibilityDetectionFrame),this.set("builtVisibilityDetectionFrame"),this.updateLayout())},detectScreenVisibility:function(){var a=this,c=this.$super();this.isVisibleWithinThreshold(c)&&this.hasNot("dispatchedBannerOnScreenEvent")&&setTimeout(function(){a.isVisibleWithinThreshold()&&a.hasNot("dispatchedBannerOnScreenEvent")&&
(a.set("dispatchedBannerOnScreenEvent"),a.dispatch("sendBannerImpression"))},1E3)},getBannerAdDetails:function(){var a=this.$super(),c=this.getBannerComponent();if(c&&(c=c.getProvider())){a.type=c.getType();var d=c.getZone();a.zone_id=d?d:0;a.count=1;a.provider=c.getOptions().provider}return a},hide:function(a){a=a||{};if(this.$super()||!0===a.force){var c=this.getBannerComponent().getProvider();if(this.providerReady()){var d=c.isNot("vertical")?"bottom":"right",c=-this[c.isNot("vertical")?"height":
"width"],e=this;if((this.is("shown")||a.force)&&this.is("animationIdle")){this.set("animatingHiding");var h=function(){e._currentAnimationCommitment=null;e.set("hidden");e.set("animationIdle");a.callback&&"function"===typeof a.callback&&a.callback()},l=this.getBannerSettings().getInt("animationSpeedOut",600);0>=l&&(a.instant=!0);if(a.instant)this.getContainer().style[d]=c+"px",h();else{var m={};m[d]=c+"px";this._currentAnimationCommitment=g.animate(this.getContainer(),{duration:l,properties:m,easing:"inOutQuintic",
callback:h})}}}}},providerReady:function(){return this.getBannerComponent().getProvider().is("ready")},refresh:function(a,c,d){var e=this,g=this.getBannerComponent();c=c||function(){};this.$super(a,function(){e.getContainer().appendChild(g.getElement());e.updateLayout();c()},d)},screenVisibilityChanged:function(){this.$super();this.is("onScreen")&&c.call(this)},show:function(a){if(this.$super()){var c=this.getBannerComponent().getProvider();if(this.providerReady()){var d=this,c=c.isNot("vertical")?
"bottom":"right";a=a||{};var e=function(){d._currentAnimationCommitment=null;d.set("shown");d.set("animationIdle");a.hasOwnProperty("callback")&&"function"===typeof a.callback&&a.callback()},h=d.getBannerSettings().getInt("animationSpeedIn",600);0>=h&&(a.instant=!0);if(this.isNot("shown")&&this.is("animationIdle")||a.force)if(d.set("animatingShowing"),a.instant)this.getContainer().style[c]="0px",e();else{var l={};l[c]="0px";this._currentAnimationCommitment=g.animate(this.getContainer(),{duration:h,
properties:l,easing:"inOutQuintic",callback:e})}}}},updateLayout:function(){this.$super();if(this.isBuilt()){var b=this;if(this.isNot("animationIdle"))null!==this._currentAnimationCommitment&&(this._currentAnimationCommitment=this._currentAnimationCommitment.then(function(){b.updateLayout();this.resolve()}));else{this.set("updatedLayout");var c=this.getBannerComponent().getProvider(),d=this.getContainer();this._mediaSize=this.getMedia().getMediaSize();c.is("vertical")?(m.setStyle(this.getContainer(),
"BannerSlotVertical"),this.height=this._mediaSize.height,this.width=Math.round(a.Config.BANNER_SIZE_STANDARDS.VERTICAL.WIDTH/a.Config.BANNER_SIZE_STANDARDS.VERTICAL.HEIGHT*this.height),d.style.top="0px",d.style.bottom="0px",d.style.width=this.width+"px",d.style.right=(this.is("hidden")?-1*this.width:0)+"px",this._visibilityDetectionFrame&&(this._visibilityDetectionFrame.style.width=this.width+"px"),m.style(this._disclaimer.getContainer(),{right:this.width+"px",width:this._mediaSize.width-this.width+
"px"})):(c.is("mobile")?(this.width=this._mediaSize.width,this.height=Math.round(a.Config.BANNER_SIZE_STANDARDS.MOBILE.HEIGHT/a.Config.BANNER_SIZE_STANDARDS.MOBILE.WIDTH*this.width)):c.is("horizontalSmall")?(this.width=this._mediaSize.width,this.height=Math.round(a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL_SMALL.HEIGHT/a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL_SMALL.WIDTH*this.width)):c.is("mediumRect")||c.is("mediumMobileRect")?(this.width=this._mediaSize.width,this.height=Math.round(a.Config.BANNER_SIZE_STANDARDS.MEDIUM_RECT.HEIGHT/
a.Config.BANNER_SIZE_STANDARDS.MEDIUM_RECT.WIDTH*this.width)):(this.width=this._mediaSize.width,this.height=Math.round(a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.HEIGHT/a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.WIDTH*this.width)),d.style.left="0px",d.style.right="0px",d.style.height=this.height+"px",d.style.bottom=(this.is("hidden")?-1*this.height:0)+"px",this._visibilityDetectionFrame&&(this._visibilityDetectionFrame.style.height=this.height+"px"),m.style(this._disclaimer.getContainer(),{bottom:this.height+
"px"}));this.getContainer().style.height=this.height+"px";this.getBannerComponent().updateLayout(this._mediaSize);this.buildVisibilityDetectionFrame()}}else g.debug.log("/BannerSlot/","BannerSlot was not built when updateLayout was called",this)}}}());a.Plugins.ExpandableBannerSlot=a.Plugins.ExpandableBannerSlot||a.Plugins.BannerSlot.extend(function(){function e(){g.scope.enforceCaller(this,a.Plugins.ExpandableBannerSlot,"Context not met: ITGS.Plugins.ExpandableBannerSlot");var c=this;this.addListener("mediaResized",
function(){c.isBuilt()&&c.minimise()})}return{construct:function(a){a=a||{};a=g.mergeDefaults({name:"ExpandableBannerSlot",extensionOf:["BannerSlot"]},a);this._mediaSize=this._defaultMediaSize=null;this._mediaDefaultPosition={top:0,height:0};this.$super(a);this.addStatus("readyToOpen")},initialize:function(){this.$super();var c=this;e.call(this);a.messaging.addListener("kiosked_ad_expand",function(a){var b=c.getBannerComponent().getOptions();if(parseInt(a.id,10)===b.kioskID)if(a.size=!0,c.is("shown"))c.expand(a);
else var f=setInterval(function(){c.is("shown")&&(c.expand(a),window.clearTimeout(f))},500)})},build:function(){this.isBuilt()||(this.$super(),this.unset("built"),this._mediaSize=this.getMedia().getMediaSize(),this.set("built"))},expand:function(c){if(!0===c.lightbox){var d=this.getBannerSettings(),b=this.getMedia().getSettings(),d={showDisclaimer:d.getBool("showDisclaimer",!1),disclaimerLink:b.get("overlays.Disclaimer.disclaimerLink","http://kiosked.com")},d=new a.BannerDisclaimerDefault(d);a.LightBoxComponent.getSharedInstance().showContent(c.content,
d,c.width,c.height)}else if(!this.is("expanded")){this.set("expanded");this.getBannerComponent().updateLayout(this.getMedia().getMediaSize(),c);var d=this.getContainer(),b=this.getMedia().getContainer(),f="default"!==a.styling.getDeviceType()?a.Config.BANNER_DISCLAIMER.HEIGHT_MOBILE:a.Config.BANNER_DISCLAIMER.HEIGHT_DESKTOP;if(c.height>this._mediaSize.height){this.set("bannerBiggerThanContainer");this.getMedia().set("heightLargerThanMedia");this._defaultMediaSize=this.getMedia().getMediaSize();this._mediaDefaultPosition=
{top:b.style.top,height:b.style.height};var e=c.height-this._mediaSize.height;this.getMedia().setMediaSize({height:c.height,width:this.width});b.style.top=parseInt(b.style.top,10)-parseInt(e+f,10)+"px";b.style.height=c.height+f+"px"}d.style.overflow="hidden";this.updateContainerSize(c);this.getBannerComponent().updateLayout(this._mediaSize,c);g.animate(d,{duration:600,properties:{height:this.height+f+"px"},easing:"inOutQuintic"})}},hide:function(a){this.is("expanded")?this.minimise():this.$super(a)},
minimise:function(){var c=this;if(this.is("shown")&&this.is("expanded")){this.unset("expanded");var d=this.getContainer();d.style.overflow="hidden";g.animate(d,{duration:600,properties:{height:a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.HEIGHT+"px"},easing:"inOutQuintic",callback:function(){c.getMedia().unset("heightLargerThanMedia");d.style.overflow="visible";if(c.is("bannerBiggerThanContainer")){c.unset("bannerBiggerThanContainer");c.getMedia().setMediaSize(c._defaultMediaSize);var a=c.getMedia().getContainer();
a.style.top=c._mediaDefaultPosition.top;a.style.height=c._mediaDefaultPosition.height}c.updateContainerSize();c.getBannerComponent().updateLayout(c._mediaSize);var a={kiosked:{action:"minimizead",id:c.getMedia().getKioskId()}},f=c.getBannerComponent().getElement();c.sendMessage(f,a)}})}},screenVisibilityChanged:function(){this.$super();this.isNot("onScreen")&&this.is("expanded")&&this.minimise()},sendMessage:function(a,d){g.isset(a.contentWindow)?a.contentWindow.postMessage(JSON.stringify(d),"*"):
g.debug.log("/ExpandableBannerSlot/","Tried to send message to the iframe content window, but there is no one to receive it")},updateLayout:function(){this.$super();this.isBuilt()||g.debug.log("/ExpandableBannerSlot/","BannerSlot was not built when updateLayout was called",this)},updateContainerSize:function(c){this._mediaSize=this.getMedia().getMediaSize();this.width=this._mediaSize.width;g.isset(c)?this.height=Math.round(c.height/c.width*this.width):this.height=Math.round(a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.HEIGHT/
a.Config.BANNER_SIZE_STANDARDS.HORIZONTAL.WIDTH*this.width);this._visibilityDetectionFrame&&(this._visibilityDetectionFrame.style.height=this.height+"px");m.style(this._disclaimer.getContainer(),{bottom:this.height+"px"})}}}());a.Plugins.ExternalBannerSlot=a.Plugins.ExternalBannerSlot||a.Plugins.BannerSlotAbstract.extend(function(){function e(){g.scope.enforceCaller(this,a.Plugins.ExternalBannerSlot,"Context not met: ITGS.Plugins.ExternalBannerSlot");var b=this;this.addListener("bannerCloseButtonPressed",
function(a){a.banner===b&&b.hide({callback:function(){b.destroy()}})});this._disclaimer&&this.addListener("onclick",function(a){g.preventDefault(a,!0);b.dispatch("bannerCloseButtonPressed",{banner:b})},this._disclaimer.getCloseButtonContainer())}function c(){g.scope.enforceCaller(this,a.Plugins.ExternalBannerSlot,"Context not met: ITGS.Plugins.ExternalBannerSlot");var b=this;this.has("executedBannerOnScreen")||(this.set("executedBannerOnScreen"),this.hasViewabilityEnabled()&&d.call(this),this._showInterval=
setInterval(function(){if(b.is("built")&&b.isNot("shown")&&b.has("updatedLayout")&&b.getBannerComponent().has("loadedFrameSource")){clearInterval(b._showInterval);var a=b.getSettings().getInt("mediaOnScreenTimeout",0);setTimeout(function(){b.show({callback:function(){b._disclaimer.show();b.updateLayout()}})},a)}},50))}function d(){g.scope.enforceCaller(this,a.Plugins.ExternalBannerSlot,"Context not met: ITGS.Plugins.ExternalBannerSlot");var b=this.getBannerComponent().getElement();b instanceof HTMLIFrameElement&&
0>=b.src.length&&(b.src=b.getAttribute("kskd-src"))}return{construct:function(a){a=a||{};a=g.mergeDefaults({name:"ExternalBannerSlot",extensionOf:["BannerSlotAbstract"]},a);this._showInterval=this._currentAnimationCommitment=this._animationContainer=this._disclaimer=this._frameContainer=this._adContainer=null;this.$super(a);this.addStatus("readyToOpen");this.addStatus("updatedLayout")},initialize:function(){this.$super();var b=this;this._mediaSettings=this.getMedia().getSettings();this.addListener("imageFound",
function(c){b.build(c,function(c){c===a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT&&(e.call(b),b.is("presentingOpen")&&b.show({instant:!0,callback:function(){b._disclaimer.show()}}))})})},destroy:function(){try{this.getBannerComponent().destroy()}catch(a){}this._disclaimer&&this._disclaimer.destroy();this._animationContainer&&g.dom.destroy(this._animationContainer);this._showInterval&&clearInterval(this._showInterval);this.$super()},detectScreenVisibility:function(){var a=this,c=this.$super();this.isVisibleWithinThreshold(c)&&
this.hasNot("dispatchedBannerOnScreenEvent")&&setTimeout(function(){a.checkAndSendContainerImpression()},1E3)},build:function(b,c){if(!this.isBuilt()){this.$super();this.unset("built");var d=this,e=this.getSettings(),h=this.getBannerSettings(),l=this.getBannerComponent();c=c||function(){};d.set("built");l.load(function(n){if(n===a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT){var t=e.get("placementPosition","after").toLowerCase(),u=b.getTargetElement();u||(u=b.getContainer());u=d.getLocationNodeForPlacement(u);
d._adContainer=u.parentNode;d._animationContainer=g.create("div");d._frameContainer=g.create("div");m.style(d._frameContainer,{position:"relative",overflow:"hidden",height:"0px",zoom:"1"});var r=d.getMediaSettings().getInt("Banner.forceElementWidth",-1);0<r&&(d.getFrameContainer().style.width=r+"px");d._animationContainer.appendChild(d.getFrameContainer());m.style(d._animationContainer,{position:"relative",overflow:"hidden"});"before"===t?d._adContainer.insertBefore(d._animationContainer,u):d._adContainer.insertBefore(d._animationContainer,
u.nextSibling);l.getElement()&&d._frameContainer.appendChild(l.getElement());t=d.getMedia().getSettings();t={showDisclaimer:h.getBool("showDisclaimer",!1),disclaimerLink:t.get("overlays.Disclaimer.disclaimerLink","http://kiosked.com")};d._disclaimer=new a.BannerDisclaimerDefault(t);d._disclaimer.getAdsLogoDisclaimerContainer()&&a.styling.selectStyle("BannerDisclaimerAdsLogoExternal").applyToElement(d._disclaimer.getAdsLogo());d._disclaimer.getContainer().style.bottom="0px";d.getFrameContainer().appendChild(d._disclaimer.getContainer());
d.checkRestrictionByMediaSize();d.updateLayout();d.buildVisibilityDetectionFrame()}else n===a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT_AND_LOADED&&d.set("hidden");c(n)})}},buildVisibilityDetectionFrame:function(){this.unset("builtVisibilityDetectionFrame");this._visibilityDetectionFrame=this._animationContainer;this.set("builtVisibilityDetectionFrame")},checkAndSendContainerImpression:function(){this.isVisibleWithinThreshold()&&this.hasNot("dispatchedBannerOnScreenEvent")&&(this.set("dispatchedBannerOnScreenEvent"),
this.dispatch("sendBannerImpression"))},checkRestrictionByMediaSize:function(){var b=this;this.isRestrictedByMediaSize()&&(g.debug.log("/ExternalBannerSlot/","Slot size is restricted by media size",this.getFrameContainer().offsetWidth,this.getBannerComponent().getProvider().getMediaSizeSettings().minWidth,this.getBannerComponent().getProvider().getMediaSizeSettings().maxWidth),a.messaging.dispatch("BannerDestroyedForSizeRestriction",{type:this._options.name,placementID:this.getMedia().getMediaId()}),
a.has("firedPageImpression")&&!a.has("sentPageImpression")&&(clearTimeout(b.getMedia().getPageImpressionTimeout()),a.unset("firedPageImpression")),setTimeout(function(){a.destructors.destroyMedia(b.getMedia())},1))},getBannerAdDetails:function(){var a=this.$super(),c=this.getBannerComponent();if(c&&(c=c.getProvider())){a.type=c.getType();var d=c.getZone();a.zone_id=d?d:0;a.count=1;a.provider=c.getOptions().provider}return a},getContainer:function(){return this._animationContainer},getFrameContainer:function(){return this._frameContainer},
getLocationNodeForPlacement:function(a){var c=this.getSettings(),d="kioskedhash_"+g.environment.getContext(),e=a.getAttribute(d)||"",c=c.get("placementPath",0<e.length?"*[@"+d+"='"+e+"']":"*[@"+d+"]");return g.dom.xPath.getElement(c,a.parentNode)||a},getMediaSettings:function(){return this._mediaSettings},hide:function(a){if(this.$super()){var c=this;a=a||{};a.callback=a.callback||function(){};var d=this.getBannerSettings().getInt("animationSpeedOut",600);0>=d&&(a.instant=!0);a.instant?(this.getFrameContainer().style.height=
"0px",c.set("hidden"),a.callback()):this._currentAnimationCommitment=g.animate(this.getFrameContainer(),{duration:d,properties:{height:"0px"},easing:"inOutQuintic",callback:function(){c.set("hidden");c._currentAnimationCommitment=null;a.callback()}})}},isRestrictedByMediaSize:function(){var a=this.getFrameContainer().offsetWidth,c=this.getBannerComponent().getProvider().getMediaSizeSettings().minWidth,d=this.getBannerComponent().getProvider().getMediaSizeSettings().maxWidth;return a<c||a>d},providerReady:function(){return this.getBannerComponent().getProvider().is("ready")},
refresh:function(a,c,d){var e=this,g=this.getBannerComponent();c=c||function(){};this.$super(a,function(){e._frameContainer.appendChild(g.getElement());e.updateLayout();c()},d)},screenVisibilityChanged:function(){this.$super();this.is("onScreen")&&c.call(this)},show:function(a){if(this.$super()){var c=this;a=a||{};a.callback=a.callback||function(){};var d=this.getBannerSettings().getInt("animationSpeedIn",600);0>=d&&(a.instant=!0);var e=this.getBannerComponent(),h=e.getElementProportions(),h=Math.round(h.height*
h.scale);this._disclaimer&&(this._disclaimer.getContainer().style.bottom=h+"px",h+=this._disclaimer.getContainer().offsetHeight,e.getElement().style.bottom="0px");m.style(c._frameContainer,{margin:"10px auto"});a.instant?(this.getFrameContainer().style.height=h+"px",c.set("shown"),a.callback()):this._currentAnimationCommitment=g.animate(this.getFrameContainer(),{duration:d,properties:{height:h+"px"},easing:"inOutQuintic",callback:function(){c.set("shown");c._currentAnimationCommitment=null;a.callback()}})}},
updateLayout:function(){this.$super();if(this.isBuilt()){var b=this;if(this.isNot("animationIdle"))null!==this._currentAnimationCommitment&&(this._currentAnimationCommitment=this._currentAnimationCommitment.then(function(){b.updateLayout();this.resolve()}));else if(this.set("updatedLayout"),this.getFrameContainer()){var c=this.getFrameContainer(),d=a.tools.dom.getBorderSizing(c),c=a.tools.isBrowser.internetExplorer()?c.offsetWidth:c.clientWidth,c=c-(d.padding.left+d.padding.right);this.getBannerComponent().updateLayout({width:c,
height:100});!0===this.getBannerComponent().getSettings().getBool("noScale",!1)&&(d=this.getBannerComponent().getElementProportions().width,this.getFrameContainer().style.maxWidth=d+"px");this.is("shown")&&(d=Math.round(this.getBannerComponent().getElementProportions().scale*this.getBannerComponent().getElementProportions().height),this._disclaimer&&(this._disclaimer.getContainer().style.bottom=d+"px",d+=this._disclaimer.getContainer().offsetHeight,this.getFrameContainer().style.height=d+"px"))}}else g.debug.warn("/ExternalBannerSlot/",
"ExternalBannerSlot was not built when updateLayout was called",this)}}}());a.Plugins.VastPreroll=a.Plugins.VastPreroll||a.Plugins.ExternalBannerSlot.extend(function(){function e(b){g.scope.enforceCaller(this,a.Plugins.VastPreroll,"Context not met: ITGS.Plugins.VastPreroll");403===parseInt(b.getError().getErrorCode(),10)||1012===parseInt(b.getError().getErrorCode(),10)||parseInt(b.getError().getErrorCode(),10)===parseInt(google.ima.AdError.ErrorCode.VAST_LINEAR_ASSET_MISMATCH,10)?(this.adLoaded.val=
!1,b=this.getBannerComponent().getProvider().getVastResponseText(),h.call(this,b)):this.adError.val=!0}function c(b){g.scope.enforceCaller(this,a.Plugins.VastPreroll,"Context not met: ITGS.Plugins.VastPreroll");this.adLoaded.val=!0;!0===this.playOnLoad.val&&this._adsManager.start()}function d(b){g.scope.enforceCaller(this,a.Plugins.VastPreroll,"Context not met: ITGS.Plugins.VastPreroll");var c=this;this.adStarted.val=!0;this.show({callback:function(){c._disclaimer.show()}})}function b(b){g.scope.enforceCaller(this,
a.Plugins.VastPreroll,"Context not met: ITGS.Plugins.VastPreroll");this._tempVideoItem=document.createElement("video");var c=new google.ima.AdDisplayContainer(this._videoContentDiv,this._tempVideoItem);c.initialize();this._adsLoader=new google.ima.AdsLoader(c);this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,g.compatibility.bindFunction(f,this),!1);this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,g.compatibility.bindFunction(e,this),!1);
c=new google.ima.AdsRequest;c.adsResponse=b;c.linearAdSlotWidth=640;c.linearAdSlotHeight=360;c.nonLinearAdSlotWidth=640;c.nonLinearAdSlotHeight=150;this._adsLoader.requestAds(c)}function f(b){g.scope.enforceCaller(this,a.Plugins.VastPreroll,"Context not met: ITGS.Plugins.VastPreroll");var f=this;this._adsManager=b.getAdsManager(this._tempVideoItem);this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,g.compatibility.bindFunction(e,this));this._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,
g.compatibility.bindFunction(c,this));this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,g.compatibility.bindFunction(d,this));this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,g.compatibility.bindFunction(this.hide,this));this._videoContentDiv.onmouseover=function(){try{f._adsManager.setVolume(.8)}catch(a){}};this._videoContentDiv.onmouseout=function(){try{f._adsManager.setVolume(0)}catch(a){}};var h=this.getBannerComponent().getElementProportions();b=h.height;h=h.width;
this.getBannerComponent().getElement().style.position="absolute";try{this._adsManager.init(h,b,google.ima.ViewMode.NORMAL),this._adsManager.setVolume(0)}catch(k){a.tools.debug.error(k)}}function h(b){g.scope.enforceCaller(this,a.Plugins.VastPreroll,"Context not met: ITGS.Plugins.VastPreroll");var c=this,d=document.createElement("div");this._videoContentDiv.appendChild(d);var e=this.getBannerComponent().getElementProportions(),d=Math.round(e.height*e.scale),e=Math.round(e.width*e.scale);c.adLoaded.val=
!1;this._flashObj={id:"z"+c.zoneId,loaded:c.adLoaded,started:c.adStarted,error:c.adError,playOnLoad:c.playOnLoad,completedCallback:g.compatibility.bindFunction(c.hide,c),startedCallback:g.compatibility.bindFunction(c.show,c,{callback:function(){c._disclaimer.show()}}),errorCallback:g.compatibility.bindFunction(c.destroy,c),startFunc:g.compatibility.bindFunction(c.startAd,c)};k.push(this._flashObj);b={vastText:encodeURIComponent(b),adID:"z"+this.zoneId};var f={};f.id="KioskedADPlayer_z"+this.zoneId;
f.name="KioskedADPlayer";f.align="middle";if(this._disclaimer){var m="default"!==a.styling.getDeviceType()?a.Config.BANNER_DISCLAIMER.HEIGHT_MOBILE:a.Config.BANNER_DISCLAIMER.HEIGHT_DESKTOP;f.style="margin-top: "+m+"px"}swfobject.embedSWF("//apps-res.kiosked.com/vast/swf/KioskedADPlayer.swf","z"+this.zoneId,e,d,"1.0","",b,{quality:"high",bgcolor:"#ffffff",allowscriptaccess:"always",allowfullscreen:"true"},f,g.compatibility.bindFunction(function(a){a.ref&&(c._flashObj.ref=a.ref,a.ref.onmouseover=function(){try{a.ref.setVolume(.8)}catch(b){}},
a.ref.onmouseout=function(){try{a.ref.setVolume(0)}catch(b){}})},this))}function m(){g.scope.enforceCaller(this,a.Plugins.VastPreroll,"Context not met: ITGS.Plugins.VastPreroll");var b=this;this.isVisibleWithinThreshold()&&this.hasNot("dispatchedBannerOnScreenEvent")&&setTimeout(function(){b.isVisibleWithinThreshold()&&b.hasNot("dispatchedBannerOnScreenEvent")&&(b.set("dispatchedBannerOnScreenEvent"),b.dispatch("sendBannerImpression"))},1E3)}var k=[];return{construct:function(a){a=a||{};a=g.mergeDefaults({name:"VastPreroll",
extensionOf:["ExternalBannerSlot"]},a);this.adLoaded={val:!1};this.adStarted={val:!1};this.playOnLoad={val:!1};this.adError={val:!1};this.$super(a)},build:function(c,d){var e=this;d=d||function(){};this.$super(c,function(c){var f=e.getBannerComponent();f.unset("scaleEnabled");if(c===a.Config.BANNER_COMPONENT_LOAD_STATUS.BUILT){f.getElement()&&(f.getElement().id="z"+e.getMedia().getMediaId());var l=f.getProvider().getVastResponseText();l&&0<l.length&&(f=f.getProvider().getVideoFormat(),e._videoContentDiv=
g.dom.query("#z"+e.zoneId,e._frameContainer)[0],"flash"===f||"unknown"===f?h.call(e,l):b.call(e,l))}d(c)})},destroy:function(){this.$super()},checkAndSendContainerImpression:function(){},hide:function(a){var b=this;this._onScreen=!1;a=a||{};a.callback=function(){b.destroy()};this.$super(a)},initialize:function(){this.$super();this.zoneId=this.getMedia().getZoneID()},kskdAdsStarted:function(b){a.tools.debug.log("/VastPreroll/","Ad started",b);for(var c=0;c<k.length;c+=1)k[c].id===b&&(k[c].started.val=
!0,k[c].startedCallback())},kskdAdsError:function(b){a.tools.debug.warn("/VastPreroll/","Ad encountered an error",b);for(var c=0;c<k.length;c+=1)k[c].id===b&&(k[c].error.val=!0,k[c].errorCallback())},kskdAdsComplete:function(b){a.tools.debug.log("/VastPreroll/","Ad completed",b);for(var c=0;c<k.length;c+=1)k[c].id===b&&k[c].completedCallback()},kskdAdsLoaded:function(b){a.tools.debug.log("/VastPreroll/","Ad loaded",b);for(var c=0;c<k.length;c+=1)k[c].id===b&&(a.tools.debug.log("/VastPreroll/","Ad loaded2",
b,k[c].playOnLoad.val),k[c].loaded.val=!0,!0===k[c].playOnLoad.val&&k[c].startFunc())},show:function(a){this._showOptions=a;!0===this.adStarted.val&&!1===this.adError.val?(this.$super(a),m.call(this)):!0===this.adLoaded.val&&!1===this.adError.val?(this.playOnLoad.val=!0,this.startAd()):!1===this.adError.val&&(this.playOnLoad.val=!0)},startAd:function(){for(var a=!1,b=0;b<k.length;b+=1)k[b].id==="z"+this.zoneId&&!0===k[b].loaded.val&&(a=!0,k[b].ref.startAd());!1===a&&this._adsManager.start()}}}());
a.Plugins.FloorBannerSlot=a.Plugins.FloorBannerSlot||a.Plugins.BannerSlotAbstract.extend(function(){function e(){g.scope.enforceCaller(this,a.Plugins.FloorBannerSlot,"Context not met: ITGS.Plugins.FloorBannerSlot");var c=this;this._resizeCallback=function(){c.updateLayout()};window.addEventListener("resize",this._resizeCallback,!1)}return{construct:function(a){a=a||{};a=g.mergeDefaults({name:"FloorBannerSlot",extensionOf:["BannerSlotAbstract"]},a);this.$super(a);this._fixedContainer=null},initialize:function(){this.$super();
var c=this;0<g.dom.query("."+a.Config.FIXED_BANNER_DIV_CLASS).length?g.debug.log("/FloorBannerSlot/","A fixed banner already exists, skipping initialisation.",this):this.addListener("imageFound",function(a){c.build();e.call(c)})},destroy:function(){this._resizeCallback&&window.removeEventListener("resize",this._resizeCallback,!1);this._fixedContainer&&(this._fixedContainer.destroy(),this._fixedContainer=null);this.$super()},build:function(){if(!this.isBuilt()){var c=this;this._fixedContainer=new a.FixedFooterContainer({bannerSettings:this.getBannerSettings(),
mediaSettings:this.getMedia().getSettings()});this._fixedContainer.attach(this.getMedia());this._fixedContainer.setDestructionCallback(g.compatibility.bindFunction(this.destroy,this));this._fixedContainer.setComponentsLoadedCallback(function(){c.show({instant:c.is("presentingOpen"),callback:function(){c.hasNot("dispatchedBannerOnScreenEvent")&&(c.set("dispatchedBannerOnScreenEvent"),c.dispatch("sendBannerImpression"))}})});var d=this.getBannerSettings(),b=this.getSettings(),e=b.getSubset("zoneOverrides");
d.mergeSettings(e);d=this._fixedContainer.is("desktopContainer")?2:1;b=b.getInt("maxBanners",1);d>b&&(d=b);for(b=0;b<d;b+=1)e=a.AdComponentFactory.createBannerComponent(this.getMedia(),this.getBannerSettings(),{component:{settingsOBC:this.getBannerSettings(),kioskID:this.getMedia().getKioskId(),containerSize:this.getMedia().getMediaSize(),placementID:this.getMedia().getMediaId()},provider:{ignoreMediaSize:!0,allowedZones:["horizontalZoneId","mobileZoneId"]}}),this._fixedContainer.addComponent(e);
this.set("built");this._fixedContainer.loadComponents()}},buildVisibilityDetectionFrame:function(){},getBannerAdDetails:function(){var a=this.$super();if(this._fixedContainer){var d=this._fixedContainer.getBannerComponents();a.count=d.length;if(0<a.count&&(d=d[0].getProvider())){a.type=d.getType();var b=d.getZone();a.zone_id=b?b:0;a.provider=d.getOptions().provider}}return a},getFixedContainer:function(){return this._fixedContainer},hide:function(a){this.$super()&&this._fixedContainer&&this._fixedContainer.hide(a)},
providerReady:function(){return this.getFixedContainer().providersReady()},show:function(a){this.$super()&&this._fixedContainer&&this._fixedContainer.show(a)},updateLayout:function(){this.$super();var c=this.getSettings(),d={},b=this._fixedContainer.is("desktopContainer");!0===c.getBool("noScale",b)&&(b&&a.tools.debug.log("/FloorBannerSlot/","Scaling default set for desktop: 1.0"),d.scaleOverride=1);this._fixedContainer&&this._fixedContainer.updateComponentLayouts(d)}}}());a.mediaJsLoading="done"})()};
ITGS.Bootstrap._bakedVersion=775;var n=null,h=ITGS.Bootstrap._completedBakeProcess=!1;ITGS.Bootstrap.setBakeCompletedCallback=function(a){ITGS.Bootstrap._completedBakeProcess?a(h):n=a};ITGS.Bootstrap.processBake=function(){ITGS.Bootstrap.loadHandler.getCachedBakeVersion(function(a){0!==ITGS.Bootstrap._bakedVersion&&!1!==a&&parseInt(a,10)===ITGS.Bootstrap._bakedVersion?(setTimeout(ITGS.Bootstrap._bakedLibrary,1),h=!0,console.log("(Kiosked) Baked script is good, loading from baked script: ",a,ITGS.Bootstrap._bakedVersion,
"(stored, baked)")):(h=!1,console.log("(Kiosked) Baked script is out of date, load from remote: ",a,ITGS.Bootstrap._bakedVersion,"(stored, baked)"));ITGS.Bootstrap._completedBakeProcess=!0;"function"===typeof n&&n(h)});delete ITGS.Bootstrap.processBake}})();ITGS.Bootstrap.ScriptLocator=ITGS.Bootstrap.ScriptLocator||ITGS.Bootstrap.LoaderObject.extend(function(){function n(a,g,h){ITGS.Bootstrap.tools.enforceCaller(this,ITGS.Bootstrap.ScriptLocator,"Expected caller to be instance of ScriptLocator");
if(!this._scriptCache.hasOwnProperty(a))throw Error("/ScriptLocator/ Unrecognised cache class: "+a);this._scriptCache[a][g]=h}function h(a,g){ITGS.Bootstrap.tools.enforceCaller(this,ITGS.Bootstrap.ScriptLocator,"Expected caller to be instance of ScriptLocator");return this._scriptCache.hasOwnProperty(a)&&this._scriptCache[a][g]?this._scriptCache[a][g]:!1}function a(){ITGS.Bootstrap.tools.enforceCaller(this,ITGS.Bootstrap.ScriptLocator,"Expected caller to be instance of ScriptLocator");this._scriptCache=
{withAttributes:{},withURLRegex:{}}}return{construct:function(){this.$super();a.call(this);this._orderPreference="first"},destroy:function(){this.clearCache();this.$super()},clearCache:function(){a.call(this)},getOrderPreference:function(){return this._orderPreference},locateScriptWithAttributes:function(a){a=a||{};var g="attrs-",x;for(x in a)a.hasOwnProperty(x)&&(g+=""+x+":"+a[x]+";");x=h.call(this,"withAttributes",g);if(!1!==x)return new ITGS.Bootstrap.Script(x,{fromCache:!0});a=ITGS.Bootstrap.tools.dom.getElementsWithAttributes("script",
a);x=a.length;return 0<x?(a="first"===this.getOrderPreference()?a[0]:a[x-1],n.call(this,"withAttributes",g,a),new ITGS.Bootstrap.Script(a)):!1},locateScriptWithURLMatch:function(a){var g=h.call(this,"withURLRegex",a.toString());if(!1!==g)return new ITGS.Bootstrap.Script(g,{fromCache:!0});var g=ITGS.Bootstrap.tools.dom.getElementsWithAttributes("script",{src:""}),x=g.length,e=!1;if(0<x)if("first"===this.getOrderPreference())for(var c=0;c<x;c+=1){if(a.test(g[c].getAttribute("src"))){e=g[c];break}}else for(x-=
1;0<=x;x-=1)if(a.test(g[x].getAttribute("src"))){e=g[x];break}return e?(n.call(this,"withURLRegex",a.toString(),e),new ITGS.Bootstrap.Script(e)):!1},setPrefersFirst:function(a){this._orderPreference=!0===a?"first":"last"}}}());(function(){ITGS.tools.debug.log("/Manifest/","Kiosked loader initialising");var n=new ITGS.Bootstrap.ScriptLocator;n.setPrefersFirst(!1);var h=n.locateScriptWithURLMatch(/\/\/(.*?)kiosked(.*?)loader(.*?)site=[0-9]{1,}/i),a=!1;!1===h&&(h=n.locateScriptWithURLMatch(/(intags\.com|kiosked\.com)(\/sniffer\/get-script\/|\/widget\/sniff\/sign\/)(.*?)albumid\/[0-9]{1,}/i),
a=!0);if(!h instanceof ITGS.Bootstrap.Script||!1===h)ITGS.tools.debug.error("/Manifest/","Unable to locate loader script - aborting run");else if(ITGS.loadedScript=h.getSource(),a?(a=ITGS.Bootstrap.tools.encoding.getOldFormatURLDetails(h.getSource()),n=a.pubID,h=a.siteID,a=a.env):(a=h.getQueryParameters(),n=a.hasOwnProperty("pub")?a.pub:!1,h=a.hasOwnProperty("site")?a.site:!1,a=a.hasOwnProperty("env")?a.env.toLowerCase():"production"),!1===n)ITGS.tools.debug.error("/Manifest/","No publisher ID provided");
else if(!1===h)ITGS.tools.debug.error("/Manifest/","No album ID provided");else{var m={};m.ref=ITGS.Bootstrap.tools.dom.getPageUrl();var g="widgets.kiosked.com";"staging"===a?g="widgets-staging.intags.com":"development"===a&&(g="widgets.kiosked");n="//"+g+"/ssp/placement-identifier/?site="+h+"&pub="+n+("&"+ITGS.tools.encoding.formURLStringFromParameters(m,["ENCODE_VALUE"]));h=document.createElement("script");h.type="text/javascript";h.src=n;document.head.appendChild(h);F.debug.log("/Manifest/","Loader completed run, with version: 0.30.9")}})()})();
