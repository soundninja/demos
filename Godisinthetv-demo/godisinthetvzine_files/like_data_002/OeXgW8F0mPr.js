/*!CK:2730464922!*//*1449512459,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["fCAPq"]); }

__d("MercuryGenericConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MAX_THREAD_NAME_LENGTH:250};},null);
__d("PrivacyConst",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BaseValue:{FRIEND_LIST:129,FRIENDS_PLUS_GAMER_FRIENDS:128,FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,CUSTOM:111,EVERYONE:80,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SELF:10,NOBODY:0},CustomPrivacyTokens:{FRIENDS:247124075410460,FRIENDS_OF_FRIENDS:498125493540100},FriendsValue:{EVERYONE:80,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SOME_FRIENDS:30,SELF:10,NO_FRIENDS:0},PostParam:{EVERYONE:300645083384735,NETWORKS_FRIENDS:123780391104836,FRIENDS_OF_FRIENDS:275425949243301,FRIENDS:291667064279714,FRIENDS_MINUS_ACQUAINTANCES:284920934947802,ONLY_ME:286958161406148,FB_ONLY:411331705596297,EVENT_PUBLIC:1493271774218406,EVENT_OPEN_INVITE:854618297899786,EVENT_GUESTS_AND_FRIENDS:1439959856260766,EVENT_INVITE_ONLY:599950423437029},PrivacyField:{CURRENT_COMPOSER:8787670733,DEFAULT_COMPOSER:875106179167765,TIMELINE_TAGGED_CONTENT_VISIBILITY:8787530733,WALL_POSTS:8787370733,TAG_EXPANDED_CONTENT:8787795733,SEARCH_BY_PHONE:8787815733,SEARCH_BY_EMAIL:8787820733,CAN_FRIEND:8787540733,DEPRECATED_APP_DEFAULT:8787700733,SEARCH_BY_NAME:8787755733,SEARCH_BY_CONTACT_INFO:8787760733,SCREENNAME:8787335733,CURRENT_ADDRESS:8787355733,FRIENDS:8787365733,WEBSITE:8787375733,STATUS_UPDATES:8787395733,BIRTHDAY:8787510733,BIRTHYEAR:8787805733,CAN_COMMENT:8787535733,CAN_MESSAGE:8787545733,RELATIONSHIPS:8787550733,PROFILE_PICTURE_ALBUM:8787565733,DASHBOARD_ACTIVITY:8787575733,FAMILY:8787585733,INTERESTED_IN_LOOKING_FOR:8787590733,PLACES:8787620733,NAME_DAY:8787810733,LANGUAGES:8787625733,QUOTATIONS:8787630733,ABOUT_ME:8787635733,POLITICAL:8787640733,RELIGIOUS:8787645733,CURRENT_CITY:8787650733,HOMETOWN:8787655733,PROFILE_LIKES_AND_INTERESTS:8787660733,BLURB:8787665733,OTHER_LIKES_AND_INTERESTS:8787680733,SUBSCRIBERS:8787690733,SUBSCRIBED_TO:8787695733,PERSONAL_CONTACT_DEFAULT:8787765733,PAGE_CONTACT_DEFAULT:8787770733,AUTO_GENERATED_FB_EMAIL:8787775733,SKILLS:8787780733,CUSTOM_GENDERS:237760973066217,LOCATION_DO_NOT_WRITE_DIRECTLY:8787785733,SOCIAL_ADS:7719929599,PLATFORM_ADS:126540474531,BASS_ADS:183468681673909,ACTIVITIES:144331422306930,INTERESTS:113693108715766,MUSIC:172372399483077,BOOKS:100725463352700,GAMES:199298603444535,MOVIES:201146206594049,TV_SHOWS:129665560441221,SPORTS_PLAYED:129991670408857,FAVORITE_TEAMS:225288534151802,FAVORITE_ATHLETES:203380763033334,PEOPLE_I_ADMIRE:210380795648667,FAVORITE_FOODS:585935528106425,FAVORITE_RESTAURANTS:172588449584647,FAVORITE_WEBSITES:180412195459106,CLOTHING_BRANDS:397391233714082,LAST_POST_PRIVACY:314763985364212,SECOND_TO_LAST_POST_PRIVACY:321179124722698,PREVIOUS_SECONDARY_COMPOSER:864562253561430,RECENT_COMPOSER:358304524327898,NOW_COMPOSER:421290164697736,BACKSTAGE_PRIVACY:809506612451171},TagExpansion:{NONE:0,TAGGEES:1,FRIENDS_OF_TAGGEES:2},EventExpansion:{NONE:0,EVENT_INVITEES:1,EVENT_GROUP:2},ExpansionType:{NONE:0,TAGS_ONLY:1,EVENT_INVITEES_ONLY:2,EVENT_GROUP_ONLY:3,TAGS_AND_EVENT_INVITEES:4,TAGS_AND_EVENT_GROUP:5}};},null);
__d("TagExpansionButtonConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FRIENDS_OF_TAGGED:"friends_of_tagged",TAGGED_ONLY:"tagged_only"};},null);
__d("InstanceProxy",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){"use strict";this.$InstanceProxy1=i;}h.prototype.getInstance=function(){"use strict";return this.$InstanceProxy1;};h.prototype.setInstance=function(i){"use strict";this.$InstanceProxy1=i;};f.exports=h;},null);
__d('DesktopHscrollUnitEventConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={HSCROLL_ITEM_INSERTED_EVENT:'DesktopHScrollUnit/itemInserted',HSCROLL_ITEM_SHOWN_EVENT:'DesktopHScrollUnit/itemShown',HSCROLL_ITEM_HIDE_EVENT:'DesktopHScrollUnit/HideIndividualItem',HSCROLL_ITEM_SCROLL_BEFORE_XOUT_EVENT:'DesktopHScrollUnit/scrollItemBeforeXout',HSCROLL_ITEM_UNHIDE_EVENT:'DesktopHScrollUnit/unhideIndividualItem',HSCROLL_LAST_ITEM_NFX_ACTION_TAKEN:'logLastAdXout',HSCROLL_PAGER_ITEM_HIDE_EVENT:'onXoutIndividualItem'};},null);
__d('BrowseClientEventLogger',['Banzai'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='browse_client_event_session',j='21.',k={logData:function(event,l,m,n){if(!event||!l)return;n=n||{};n.event=event;n.client_time=Math.floor(Date.now());n.session_id=l;n.vertical=m;this.allData=this.allData||{};this.processedSessions=this.processedSessions||[];if(this.processedSessions.indexOf(l)!==-1)return;if(!this.allData.sessionid)this.allData.sessionid=[];this.allData.sessionid.push(n);if(event==='window_unloaded'||event==='window_transition_to_LHC'||event==='window_transition_to_home_click'||event==='window_transition_to_fb_page'){this._postBatch(this.allData.sessionid);this.processedSessions.push(l);}},logClick:function(l){l.event='click';this.maybeLogVisiblityEvent(l,true);},maybeLogClientViewEvent:function(l){l.event='client_view';this.maybeLogVisiblityEvent(l);},maybeLogVisiblityEvent:function(l,m){if(!l||!l.xt||l.xt.indexOf(j)!==0)return;var n=JSON.parse(l.xt.substring(3));if(m)n.click_type=l.click_type;var event=l.event;if(event==='vpvd'){if(!l.ft)return;n.vpvd_time=l.ft.vpvd_time_delta;}this.logData(event,n.session_id,n.vertical,n);},_postBatch:function(l){h.post(i,l,{delay:0,retry:true});}};f.exports=k;},null);
__d('NotificationCounter',['Arbiter','ChatConfig','DocumentTitle','JSLogger','UserActivity'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={messages:0,notifications:0,requests:0},n={init:function(o){h.subscribe('update_title',this._handleUpdate.bind(this));h.subscribe('jewel/count-updated',this._handleCountUpdate.bind(this));},getCount:function(){var o=0;for(var p in m){var q=Number(m[p]);if(typeof m[p]=='string'&&isNaN(q))return m[p];if(isNaN(q)||q<0){k.create('jewels').error('bad_count',{jewel:p,count:m[p]});continue;}o+=q;}return o;},updateTitle:function(){var o=this.getCount(),p=j.get();p=o?'('+o+') '+p:p;j.set(p,true);},_handleCountUpdate:function(o,p){m[p.jewel]=p.count;this.updateTitle();},_handleUpdate:function(o,p){this.updateTitle();}};f.exports=n;},null);
__d('NotificationSeenState',['NotificationConstants','NotificationUpdates','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={},l=1,m=2,n=0,o=l,p=l|m,q=h.PayloadSourceType.INITIAL_LOAD,r={UNSEEN_AND_UNREAD:n,SEEN_BUT_UNREAD:o,SEEN_AND_READ:p};function s(v){var w=[],x=[];Object.keys(v).forEach(function(y){var z=v[y],aa=k[y];k[y]=z;if(aa===undefined){w.push(y);x.push(y);return;}var ba=aa^z;if(ba&l)w.push(y);if(ba&m)x.push(y);});w.length&&i.didUpdateSeenState(w);x.length&&i.didUpdateReadState(x);}i.subscribe('update-notifications',function(v,w){var x=w.nodes;if(!x||!x.length)return;var y=w.payloadsource,z=h.PayloadSourceType,aa=y==z.ENDPOINT,ba={};w.nodes.forEach(function(ca){var da=ca.alert_id;if(!aa||k[da]===undefined)ba[da]=r[ca.seen_state];});s(ba);});i.subscribe('update-seen',function(v,w){if(!w.seenState)return;var x=[],y={};Object.keys(w.seenState).forEach(function(aa){if(!w.seenState[aa]){x.push(aa);return;}var ba=k[aa];if(ba!==undefined)y[aa]=ba|l;});var z=babelHelpers._extends({},j(x,n),y);s(z);});i.subscribe('update-read',function(v,w){if(!w.readState)return;var x=[],y={};Object.keys(w.readState).forEach(function(aa){if(w.readState[aa]){x.push(aa);return;}var ba=k[aa];if(ba!==undefined){y[aa]=ba&~m;}else if(w.payloadsource==q)y[aa]=o;});var z=babelHelpers._extends({},j(x,p),y);s(z);});function t(v){var w=k[v];return w;}var u={isRead:function(v){return t(v)===p;},isSeen:function(v){return t(v)!==n;},getUnseenCount:function(){return u.getUnseenIDs().length;},getUnseenIDs:function(){return Object.keys(k).filter(function(v){return k[v]===n;});},getUnreadCount:function(){return u.getUnreadIDs().length;},getUnreadIDs:function(){return Object.keys(k).filter(function(v){return k[v]!==p;});}};f.exports=u;},null);
__d("XNotificationsSyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/sync\/",{lastSync:{type:"Int",required:true}});},null);
__d('NotificationSync',['Arbiter','AsyncRequest','ChannelConstants','JSLogger','NotificationConstants','NotificationUpdates','XNotificationsSyncController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=k.create('notifications'),p='channel_reload',q=0;function r(w){var x=m.getserverTime()?m.getserverTime():q,y=n.getURIBuilder().setInt('lastSync',x).getURI();w.setHandler(s).setOption('suppressErrorAlerts',true).setErrorHandler(t).setMethod('GET').setReadOnly(true).setURI(y).setAllowCrossPageTransition(true);}function s(w){var x=w.getPayload();if(x.syncPayload)m.handleUpdate(l.PayloadSourceType.SYNC,x.syncPayload);}function t(w){}function u(){var w=new i();w.setIsBackgroundRequest(true);r(w);w.send();o.bump(p);}var v={setup:function(w){q=w;h.subscribe(j.ON_INVALID_HISTORY,u);}};f.exports=v;},null);
__d('NotificationJewelController',['Arbiter','Event','NotificationConstants','NotificationCounter','NotificationSeenState','NotificationSync','NotificationUpdates','createObjectFrom','curry'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=0;function r(t){h.inform('jewel/count-updated',{jewel:t,count:l.getUnseenIDs().length},h.BEHAVIOR_STATE);}function s(t,u,v,w){'use strict';var x=null;if(u.list&&u.unseenNotifs&&u.startTime){x=u.list;v=u.unseenNotifs;w=u.startTime;}else x=u;k.init();var y=i.listen(t.getRoot(),'mouseover',function(){y.remove();y=null;x.open();});if(t.isOpen()){x.open();}else var z=t.subscribe('opened',function(){z.unsubscribe();z=null;x.open();});var aa=x.pause.bind(x);t.subscribe('opened',function(){setTimeout(aa,0);r(t.name);});t.subscribe('closed',function(){x.unpause();r(t.name);});n.subscribe('seen-state-updated',p(r,t.name));n.handleUpdate(j.PayloadSourceType.INITIAL_LOAD,{seenState:o(v,q)});m.setup(w);r(t.name);}f.exports=s;},null);
__d('NotificationJewelHeaderController',['DOM','Event','NotificationSeenState','NotificationUserActions','NotificationUpdates'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n,o){'use strict';i.listen(n,'click',function(){var p=j.getUnreadIDs();if(p.length)k.markNotificationsAsRead(p);});l.subscribe('read-state-updated',function(){if(o)h.setContent(o,j.getUnreadCount());});}f.exports=m;},null);
__d('NotificationJewelListController',['Bootloader','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=null,l=null;function m(n,o){'use strict';this.$NotificationJewelListController1=n;this.$NotificationJewelListController2=o;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4=false;}m.prototype.open=function(){'use strict';this.$NotificationJewelListController3=true;this.$NotificationJewelListController5();};m.prototype.pause=function(){'use strict';this.$NotificationJewelListController4=true;this.$NotificationJewelListController5();};m.prototype.unpause=function(){'use strict';this.$NotificationJewelListController4=false;this.$NotificationJewelListController5();};m.prototype.$NotificationJewelListController5=function(){'use strict';if(!k||!l){h.loadModules(["NotificationList.react","NotificationJewelList.react"],(function(n,o){k=n;l=o;this.$NotificationJewelListController6();}).bind(this));}else this.$NotificationJewelListController6();};m.prototype.$NotificationJewelListController6=function(){'use strict';j.render(i.createElement(k,{hasEverBeenOpened:this.$NotificationJewelListController3,paused:this.$NotificationJewelListController4,tracking:this.$NotificationJewelListController2.tracking,negativeTracking:this.$NotificationJewelListController2.negativeTracking,shortenTimestamp:this.$NotificationJewelListController2.shortenTimestamp,businessID:this.$NotificationJewelListController2.businessID,maxHeight:this.$NotificationJewelListController2.maxHeight,useChevron:this.$NotificationJewelListController2.useChevron,chevronType:this.$NotificationJewelListController2.chevronType,numPerPage:5,listRenderer:l,upsell:this.$NotificationJewelListController2.upsell||null,gameRecs:this.$NotificationJewelListController2.gameRecs||null,endpoint:this.$NotificationJewelListController2.endpoint}),this.$NotificationJewelListController1);};f.exports=m;},null);
__d('NotificationHiddenState',['NotificationUpdates','NotificationConstants','isEmpty'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={};h.subscribe('update-notifications',function(m,n){var o=n.nodes,p=n.payloadsource;if(p===i.PayloadSourceType.LIVE_SEND&&o&&o.length){var q={};o.forEach(function(r){var s=r.alert_id;if(k[s])q[s]=false;});if(!j(q)){k=Object.assign(k,q);h.didUpdateHiddenState(Object.keys(q));}}});h.subscribe('update-hidden',function(m,n){if(n.hiddenState){k=Object.assign(k,n.hiddenState);h.didUpdateHiddenState(Object.keys(n.hiddenState));}});var l={isHidden:function(m){if(k[m])return k[m];return false;}};f.exports=l;},null);
__d('NotificationPhotoThumbnail',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){if(!j.media||!j.style_list||!j.style_list.length)return null;switch(j.style_list[0]){case 'new_album':case 'album':case 'application':case 'photo':case 'video':case 'video_autoplay':case 'video_inline':return j.media.image;default:return null;}}var i={getThumbnail:function(j,k,l){var m;if(j&&j.length){j.some(function(q){m=h(q);if(m)return true;return false;});if(m)return m;}if(l){var n=l.relevant_comments;if(n&&n.length){var o=n[0].attachments;if(o&&o.length){m=h(o[0]);if(m)return m;}}}if(k){var p=k.attachments;if(p&&p.length)return h(p[0]);}return null;}};f.exports=i;},null);
__d('VideoPermalinkURI',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={isValid:function(i){return h.parse(i)!==null;},parse:function(i){if(this.isValidLegacy(i)){var j=i.getQueryData();if(j.v)return {video_id:j.v,set_token:j.set};return null;}var k=i.getPath();if(k[k.length-1]==='/')k=k.substring(0,k.length-1);var l=k.split('/');if(l.length>=3&&l[2]==='videos')if(l.length===4&&/^\d+$/.exec(l[3])!==null){return {video_id:l[3],set_token:null};}else if(l.length===5&&/^\d+$/.exec(l[4])!==null)return {video_id:l[4],set_token:l[3]};return null;},isValidLegacy:function(i){var j=i.getPath();if(j[j.length-1]==='/')j=j.substring(0,j.length-1);if(j==='/photo.php'||j==='/force_photo/photo.php'||j==='/photo'||j==='/force_photo/photo/index.php'||j==='/photo/index.php'||j==='/force_photo/photo'||j==='/video.php'||j==='/video/video.php')return true;return false;}};f.exports=h;},null);
__d('NotificationURI',['BusinessURI.brands','URI','isFacebookURI','VideoPermalinkURI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={localize:function(m){m=h(m);if(!j(m))return m.toString();var n=m.getSubdomain();return m.getUnqualifiedURI().getQualifiedURI().setSubdomain(n).toString();},snowliftable:function(m){if(!m)return false;m=new i(m);var n=m.getQueryData();return j(m)&&(k.isValid(m)||'fbid' in n);},isVaultSetURI:function(m){return this._areEquals(m,'/ajax/vault/sharer_preview.php');},isAlbumDraftRecoveryDialogURI:function(m){return this._areEquals(m,'/ajax/photos/upload/overlay/');},_areEquals:function(m,n){if(!m)return false;m=new i(m);return j(m)&&m.getPath()===n;},_startsWith:function(m,n){if(!m)return false;m=new i(m);return j(m)&&m.getPath().startsWith(n);}};f.exports=l;},null);
__d('loadImage',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=new Image();k.onload=function(){j(k.width,k.height,k);};k.src=i;}f.exports=h;},null);
__d('PhotoResizeMath',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getScaledPhotoDimensions:function(i,j,k,l,m){var n=i/j,o=k/l;if(k&&l&&m==='stretch')return {width:k,height:l};if(!k&&l||m==='contain'!==n>=o)return {width:l*n,height:l};if(k)return {width:k,height:k/n};return {width:i,height:j};}};f.exports=h;},null);
__d('PixelzFocus',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={search:function(i,j){var k=0,l=i.length-1;while(k<=l){var m=k+Math.floor((l-k)/2),n=i[m];if(n>j){l=m-1;}else if(n<j){k=m+1;}else return m;}return Math.min(k,l);},forceSpecificPoint:function(i,j,k){var l=1e-09,m=h.search(i,j-k-l)+1,n=h.search(i,j+k);return i.slice(m,n+1);},findBiggestSets:function(i,j){var k=[],l=-1;for(var m=0;m<i.length;++m){var n=i[m],o=m,p=h.search(i,n+j),q=p-o;if(q>l)k=[];if(q>=l){l=q;k.push({low:o,high:p});}}return k;},getBestSet:function(i,j,k){var l=-1,m=null;for(var n=0;n<j.length;++n){var o=j[n],p=i[o.low],q=i[o.high],r=p+(q-p)/2,s=Math.min(p-(r-k),r+k-q);if(s>l){l=s;m=o;}}return m;},getFocusFromSet:function(i,j){var k=i[j.low],l=i[j.high];return k+(l-k)/2;},clampFocus:function(i,j){var k=j/2,l=1-j/2;if(i<k)return k;if(i>l)return l;return i;},convertFromCenterToCSS:function(i,j){if(Math.abs(1-j)<1e-05)return 0;return (i-j/2)/(1-j);},convertFromCSSToCenter:function(i,j){return i*(1-j)+j/2;},getVisible:function(i,j){if(i<j)return i/j;return j/i;},getHidden:function(i,j){return 1-h.getVisible(i,j);},focusHorizontally:function(i,j){return i<j;},convertVectorFromCenterToCSS:function(i,j,k){var l=h.focusHorizontally(j,k),m;if(l){m=i.x/100;}else m=i.x/100;var n=h.convertFromCenterToCSS(m,h.getVisible(j,k));if(l){return {x:n,y:0};}else return {x:0,y:n};},getCropRect:function(i,j,k){var l=h.focusHorizontally(j,k),m=h.getVisible(j,k);if(l){var n=(1-m)*i.x;return {left:n,top:0,width:m,height:1};}else{var o=(1-m)*i.y;return {left:0,top:o,width:1,height:m};}}};f.exports=h;},null);
__d('Pixelz.react',['arrayContains','cx','loadImage','joinClasses','React','PhotoResizeMath','PixelzFocus'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=l.PropTypes,p=l.createClass({displayName:'Pixelz',propTypes:{width:o.number,height:o.number,resizeMode:o.oneOf(['contain','cover','stretch']),alt:o.string,letterbox:o.bool,borderRadius:o.number,insetBorderColor:o.string,animated:o.bool,upscale:o.bool,cropRect:function(q,r,s){var t=q[r],u='Invalid prop `'+r+'` supplied to `'+s+'`, expected a rectangle with values normalized '+'between 0 and 1.';if(t.left<0||t.top<0||t.width<0||t.height<0||t.left+t.width>1||t.top+t.height>1)return new Error(u);},focus:function(q,r,s){var t=q[r],u='Invalid prop `'+r+'` supplied to `'+s+'`, expected either a {x, y, type} vector where type '+'is `css` or `center` or an array of {x, y} vectors. All the vectors '+'have with values normalized between 0 and 1.';if(Array.isArray(t)){for(var v=0;v<t.length;++v)if(!(t[v].x>=0&&t[v].x<=1)||!(t[v].y>=0&&t[v].y<=1))return new Error(u);}else{if(!t.type)t.type='css';if(!(t.x>=0&&t.x<=1)||!(t.y>=0&&t.y<=1)||!h(['center','css'],t.type))return new Error(u);}}},getDefaultProps:function(){return {resizeMode:'cover',alt:'',letterbox:true,upscale:true,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:'css'}};},getInitialState:function(){return {srcDimensions:{}};},getSrcDimensions:function(){var q=this.props.src,r=this.state.srcDimensions[q];if(r)return r;j(q,(function(s,t){var u={};u[q]={width:s,height:t};this.isMounted()&&this.setState({srcDimensions:u});}).bind(this));return null;},getCropSrcDimensions:function(){var q=this.getSrcDimensions();return {width:q.width*this.props.cropRect.width,height:q.height*this.props.cropRect.height};},getUpscaleCropDimensions:function(){var q=this.getCropSrcDimensions();return m.getScaledPhotoDimensions(q.width,q.height,this.props.width,this.props.height,this.props.resizeMode);},getCropDimensions:function(){var q=this.getUpscaleCropDimensions(),r=this.getCropSrcDimensions();if(!this.props.upscale)return {width:Math.min(q.width,r.width),height:Math.min(q.height,r.height)};return q;},getCropAspectRatio:function(){var q=this.getCropDimensions();return q.width/q.height;},getContainerDimensions:function(){if(this.props.letterbox&&this.props.width&&this.props.height)return {width:this.props.width,height:this.props.height};return this.getCropDimensions();},getContainerAspectRatio:function(){var q=this.getContainerDimensions();return q.width/q.height;},getContainerPosition:function(){return {left:0,top:0};},getFocus:function(){var q=this.props.focus;if(!Array.isArray(q)&&q.type==='css')return {x:q.x,y:q.y};var r=this.getContainerAspectRatio(),s=this.getCropAspectRatio(),t=n.getVisible(r,s),u=n.focusHorizontally(r,s),v;if(!Array.isArray(q)){v=n.convertFromCenterToCSS(u?q.x:q.y,t);}else{var w=q.map(function(z){return u?z.x:z.y;});w.sort();var x=n.findBiggestSets(w,t),y=n.getBestSet(w,x,t);v=n.getFocusFromSet(w,y);}return {x:u?v:.5,y:u?.5:v};},getCropPosition:function(){var q=this.getCropDimensions(),r=this.getContainerDimensions(),s=this.getFocus();return {left:s.x*(r.width-q.width),top:s.y*(r.height-q.height)};},getScaleDimensions:function(){var q=this.getCropDimensions();return {width:q.width/this.props.cropRect.width,height:q.height/this.props.cropRect.height};},getScalePosition:function(){var q=this.getScaleDimensions();return {left:-q.width*this.props.cropRect.left,top:-q.height*this.props.cropRect.top};},getClipCropRectangle:function(){var q=this.getContainerDimensions(),r=this.getCropDimensions(),s=this.getContainerPosition(),t=this.getCropPosition(),u=Math.max(s.left,t.left),v=Math.max(s.top,t.top),w=Math.min(s.top+q.height,t.top+r.height),x=Math.min(s.left+q.width,t.left+r.width);return {left:u,top:v,width:x-u,height:w-v};},getClipCropPosition:function(){var q=this.getClipCropRectangle();return {left:q.left,top:q.top};},getClipCropDimensions:function(){var q=this.getClipCropRectangle();return {width:q.width,height:q.height};},getClipScalePosition:function(){var q=this.getScalePosition(),r=this.getClipCropPosition(),s=this.getCropPosition();return {left:q.left+(s.left-r.left),top:q.top+(s.top-r.top)};},getClipScaleDimensions:function(){return this.getScaleDimensions();},areDimensionsEqual:function(q,r){return q.width===r.width&&q.height===r.height;},shouldAddAllNodesAndStyles:function(){return this.props.animated;},hasCrop:function(){if(this.shouldAddAllNodesAndStyles())return true;var q=this.getContainerDimensions(),r=this.getClipCropDimensions(),s=this.getClipScaleDimensions();if(this.areDimensionsEqual(q,r)||this.areDimensionsEqual(r,s))return false;return true;},hasContainer:function(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return true;var q=this.getContainerDimensions(),r=this.getClipScaleDimensions();if(this.areDimensionsEqual(q,r))return false;return true;},hasInsetBorder:function(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor;},applyPositionStyle:function(q,r){if(this.shouldAddAllNodesAndStyles()||r.left)q.left=Math.round(r.left);if(this.shouldAddAllNodesAndStyles()||r.top)q.top=Math.round(r.top);},applyDimensionsStyle:function(q,r){q.width=Math.round(r.width);q.height=Math.round(r.height);},applyBorderRadiusStyle:function(q){if(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)q.borderRadius=this.props.borderRadius||0;},getScaleStyle:function(){var q={},r=this.getClipCropDimensions(),s=this.getClipScaleDimensions();if(this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(r,s)){this.applyPositionStyle(q,this.getClipScalePosition());}else this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipScaleDimensions());this.applyBorderRadiusStyle(q);return q;},getCropStyle:function(){var q={};this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipCropDimensions());this.applyBorderRadiusStyle(q);return q;},getInsetBorderStyle:function(){var q={borderColor:this.props.insetBorderColor||'transparent'};this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipCropDimensions());this.applyBorderRadiusStyle(q);return q;},getContainerStyle:function(){var q={};this.applyDimensionsStyle(q,this.getContainerDimensions());this.applyBorderRadiusStyle(q);return q;},getScale:function(){var q=this.getScaleStyle(),r=q.width,s=q.height;q=babelHelpers._extends({},q);delete q.width;delete q.height;return (l.createElement('img',babelHelpers._extends({},this.props,{alt:this.props.alt,className:k(this.props.className,"_56wb"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),src:this.props.src,style:babelHelpers._extends({},this.props.style||{},q),width:r,height:s})));},getCrop:function(){var q=this.getScale();if(!this.hasCrop())return q;return (l.createElement('div',{className:"_56ma"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getCropStyle()},q));},getInsetBorder:function(){if(!this.hasInsetBorder())return null;return (l.createElement('div',{className:"_56lv"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getInsetBorderStyle()}));},getContainer:function(){var q=this.getCrop();if(!this.hasContainer())return q;var r=this.getInsetBorder();return (l.createElement('div',{className:"_56jj"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getContainerStyle()},q,r));},render:function(){var q=this.getSrcDimensions();if(!q)return l.createElement('span',null);return this.getContainer();}});f.exports=p;},null);
__d('List.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'List',propTypes:{border:k.oneOf(['none','light','medium','dark']),spacing:k.oneOf(['none','small','medium','large']),direction:k.oneOf(['vertical','horizontal']),valign:k.oneOf(['baseline','top','middle','bottom']),edgepadding:k.bool},getDefaultProps:function(){return {border:'medium',spacing:'medium',direction:'vertical',valign:'top'};},render:function(){var m=this.props.border,n=this.props.direction,o=this.props.spacing,p=n==='horizontal'&&this.props.valign,q,r,s;q=(n==='vertical'?"_4kg":'')+(n==='horizontal'?' '+"_4ki":'')+(p==='top'?' '+"_509-":'')+(p==='middle'?' '+"_509_":'')+(p==='bottom'?' '+"_50a0":'');if(o!=='none'||m!=='none')r=(m==='none'?"_6-i":'')+(m==='light'?' '+"_4ks":'')+(m==='medium'?' '+"_4kt":'')+(m==='dark'?' '+"_4ku":'');if(o!=='none')s=(!this.props.edgepadding?"_6-h":'')+(o==='small'?' '+"_704":'')+(o==='medium'?' '+"_6-j":'')+(o==='large'?' '+"_703":'');var t=j("uiList",q,r,s);return (h.createElement('ul',babelHelpers._extends({},this.props,{className:j(this.props.className,t)}),this.props.children));}});f.exports=l;},null);
__d('Facepile.react',['joinClasses','Link.react','Pixelz.react','React','List.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o={small:24,medium:32,large:50},p=k.createClass({displayName:'Facepile',propTypes:{className:n.string,onFaceClick:n.func,onComponentDidMount:n.func,profiles:n.arrayOf(n.shape({URL:n.string,name:n.string.isRequired,uniqueID:n.number.isRequired,profilePicURI:n.string.isRequired})).isRequired,size:n.oneOf(['small','medium','large']).isRequired},_onFaceClick:function(q,r){if(this.props.onFaceClick)this.props.onFaceClick(q,r);},componentDidMount:function(){if(this.props.onComponentDidMount)this.props.onComponentDidMount();},renderFace:function(q,r){var s=o[this.props.size];return (k.createElement('li',{className:"_43q7",key:q.uniqueID,onClick:this._onFaceClick.bind(this,q,r)},k.createElement(i,{href:q.URL,'aria-label':q.name,'data-hover':'tooltip',className:"_2rt_",'data-tooltip-alignh':'left'},k.createElement(j,{src:q.profilePicURI,width:s,height:s,className:'img'}))));},render:function(){var q=h(this.props.className,"_43qm"+(this.props.size=='small'?' '+"_43q9":'')+(this.props.size=='medium'?' '+"_43qc":'')+(this.props.size=='large'?' '+"_43qf":''));return (k.createElement('div',{className:q},k.createElement(l,{className:'uiFacepile/list',direction:'horizontal',spacing:'none',border:'none'},this.props.profiles.map(this.renderFace))));}});f.exports=p;},null);
__d("XBrowserPushDisabledController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/client\/push\/disabled\/",{});},null);
__d("XBrowserPushXOutController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/client\/push\/xout\/",{});},null);
__d('XUIAmbientNUXTheme',['cx'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={wrapperClassName:"_2x6q",arrowDimensions:{offset:14,length:18}};f.exports=i;},null);
__d('XUIAmbientNUXBody.react',['React','XUICloseButton.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'XUIAmbientNUXBody',propTypes:{onCloseButtonClick:l.func},render:function(){var n=k("_21es",this.props.className);return (h.createElement('div',{className:n},h.createElement(i,{shade:'light',className:"_36gl",onClick:this.props.onCloseButtonClick}),h.createElement('div',{className:"_36gn"},this.props.children)));}});f.exports=m;},null);
__d('XUIAmbientNUX.react',['HasLayerContextMixin','React','ReactLayer','ReactAbstractContextualDialog','XUIAmbientNUXTheme','XUIAmbientNUXBody.react'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=300,p=380,q=j.createClass(k.createSpec({displayName:'XUIAmbientNUX',theme:l})),r=i.createClass({displayName:'XUIAmbientNUX',mixins:[h],propTypes:{alignment:n.oneOf(['left','center','right']),behaviors:n.object,context:n.object,contextRef:n.func,customwidth:n.number,hasActionableContext:n.bool,offsetX:n.number,offsetY:n.number,onCloseButtonClick:n.func,position:n.oneOf(['above','below','left','right']),shown:n.bool,width:n.oneOf(['wide','normal','auto','custom'])},_getWidth:function(){switch(this.props.width){case 'wide':return p;case 'custom':return this.props.customwidth;case 'auto':return null;default:return o;}},render:function(){return (i.createElement(q,{alignment:this.props.alignment,autoFocus:false,behaviors:this.props.behaviors,context:this.getContextNode(),focusContextOnHide:false,hasActionableContext:this.props.hasActionableContext,offsetX:this.props.offsetX,offsetY:this.props.offsetY,position:this.props.position,shown:this.props.shown,width:this._getWidth(this.props)},i.createElement(m,{onCloseButtonClick:this.props.onCloseButtonClick},this.props.children)));}});f.exports=r;},null);
__d('NotificationPermissionNotice.react',['Event','Keys','React','ReactLayeredComponentMixin','XUIAmbientNUX.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=[],p=j.PropTypes,q=j.createClass({displayName:'NotificationPermissionNotice',mixins:[k],propTypes:{onHide:p.func.isRequired,shortText:p.bool},componentDidMount:function(){o.push(h.listen(window,'mousedown',this.props.onHide));o.push(h.listen(window,'keydown',(function(event){if(event.keyCode===i.ESC)this.props.onHide();}).bind(this)));},componentWillUnmount:function(){while(o.length>0){var r=o.pop();r.remove();}},renderLayers:function(){var r=this.props.shortText?n._("Click the lock to give Chrome permission to send you desktop notifications."):n._("If you change your mind, click the lock to give Chrome permission to send you desktop notifications.");return {nux:j.createElement(l,{contextRef:(function(){return this.refs.noticeAnchor;}).bind(this),shown:true,position:'below',onCloseButtonClick:this.props.onHide},r)};},render:function(){return (j.createElement('span',{ref:'noticeAnchor',className:"_1_i1"}));}});f.exports=q;},null);
__d('Spotlight',['Arbiter','ArbiterMixin','DOM','JSXDOM','Layer','LayerAutoFocus','LayerTabIsolation','ModalLayer','Vector','classWithMixins','csx','cx','joinClasses','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v,w;v=babelHelpers.inherits(x,q(l,u(i)));w=v&&v.prototype;function x(z,aa){'use strict';w.constructor.call(this,z,aa);this.stageMinSize=new p(0,0);this.stagePadding=new p(0,0);}x.prototype._buildWrapper=function(z,aa){'use strict';var ba=t("_n8 _3qx",z.rootClassName);return (k.div({className:ba},k.div({className:"_n9"},aa)));};x.prototype._getDefaultBehaviors=function(){'use strict';return w._getDefaultBehaviors.call(this).concat([y,m,n,o]);};x.prototype.getContentRoot=function(){'use strict';if(!this._content)this._content=j.find(this.getRoot(),"div._n3");return this._content;};x.prototype.configure=function(z){'use strict';if(z.stageMinSize)this.stageMinSize=z.stageMinSize;if(z.stagePadding)this.stagePadding=z.stagePadding;};x.prototype.onContentLoaded=function(){'use strict';this.inform('content-load');};x.prototype.updatePermalink=function(z){'use strict';this.inform('permalinkchange',z);};Object.assign(x.prototype,{stageMinSize:null,stagePadding:null});function y(z){'use strict';this._layer=z;}y.prototype.enable=function(){'use strict';this._subscription=this._layer.subscribe(['show','hide'],function(z,aa){if(z==='show'){h.inform('layer_shown',{type:'Spotlight'});}else h.inform('layer_hidden',{type:'Spotlight'});});};y.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};Object.assign(y.prototype,{_subscription:null});f.exports=x;},null);
__d('Spotlight.react',['LayerHideOnBlur','LayerHideOnEscape','ReactLayer','Spotlight'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=j.createClass({getDefaultEnabledBehaviors:function(){return {hideOnBlur:h,hideOnEscape:i};},createLayer:function(m){var n=this.enumerateBehaviors(this.props.behaviors),o={addedBehaviors:n,rootClassName:this.props.rootClassName},p=new k(o,m);p.conditionShow(this.props.shown);if(this.props.onBeforeHide)p.subscribe('beforehide',this.props.onBeforeHide);if(this.props.onHide)p.subscribe('hide',this.props.onHide);return p;},receiveProps:function(m){this.layer.conditionShow(m.shown);}});f.exports=l;},null);
__d('NotificationPermissionRequest.react',['AsyncRequest','Facepile.react','Spotlight.react','ShortProfiles','React','ReactLayeredComponentMixin','UserAgent','XBrowserPushOptinFriendsController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=n.isPlatform('Mac OS X'),s=l.PropTypes,t=l.createClass({displayName:'NotificationPermissionRequest',mixins:[m],propTypes:{onHide:s.func.isRequired,useFaces:s.bool.isRequired,useAllow:s.bool.isRequired},getInitialState:function(){return {friendsList:[]};},componentWillMount:function(){if(!this.props.useFaces)return;new h().setURI(o.getURIBuilder().getURI()).setHandler((function(u){var v=u.payload.list,w=[];for(var x=0;w.length<(r?7:6)&&x<v.length;x++){var y=v[x].slice(0,-2),z=k.getNowUnsafe(y);if(z&&z.type==='friend')w.push(z);}w=w.map(function(aa){return {uniqueID:parseInt(aa.id,10),name:aa.name,profilePicURI:aa.thumbSrc};});this.setState({friendsList:w});}).bind(this)).send();},renderLayers:function(){var u=null;if(this.props.useAllow){var v=l.createElement('span',{className:"_23ah"},q._("Allow")),w=this.props.useFaces?q._("Don't miss updates from friends - click {allow} to see your notifications on your desktop.",[q.param('allow',v)]):q._("Click {allow} to see your notifications on your desktop.",[q.param('allow',v)]);u=l.createElement('div',{className:"_23ak"+(r?' '+"_3qwt":'')+(' '+"_50f5")},l.createElement('div',null,w));}return {spotlight:l.createElement(j,{shown:true,onHide:this.props.onHide},l.createElement('div',{className:"_n3"},l.createElement('div',{className:"_1s6q"+(r?' '+"_3qw_":'')},l.createElement(i,{profiles:this.state.friendsList,size:'medium',className:"_23aj"}),u)))};},render:function(){return l.createElement('span',null);}});f.exports=t;},null);
__d('NotificationBrowserUpsellLearnMore.react',['UserAgent','Spotlight.react','React','ReactLayeredComponentMixin','XUIButton.react','XUICard.react','XUICloseButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=j.PropTypes,r=h.isPlatform('Mac OS X'),s=j.createClass({displayName:'NotificationBrowserUpsellLearnMore',mixins:[k],propTypes:{onHide:q.func,onTurnOn:q.func},_hide:function(){this.setState({hidden:true});},renderLayers:function(){var t=(r?"_3vmn":'')+(!r?' '+"_3vmo":'');return {spotlight:j.createElement(i,{shown:true,onHide:this.props.onHide},j.createElement('div',{className:"_n3"},j.createElement(m,{className:"_3vmp"},j.createElement('div',{className:t},j.createElement(n,{className:"_3vmq",onClick:this.props.onHide})),j.createElement('div',{className:"_2kqr _50f6"},p._("Turn on Desktop Notifications")),j.createElement('div',{className:"_3vmw _50f5"},p._("When you get a new notification, you'll see it in the corner of your screen. You can manage these in Settings.")),j.createElement(l,{label:p._("Turn On"),use:'confirm',size:'xxlarge',onClick:this.props.onTurnOn,className:"_3vmx"}))))};},render:function(){return j.createElement('span',null);}});f.exports=s;},null);
__d('Visibility',['TimeSlice','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;if(typeof document.hidden!=='undefined'){j='hidden';k='visibilitychange';}else if(typeof document.mozHidden!=='undefined'){j='mozHidden';k='mozvisibilitychange';}else if(typeof document.msHidden!=='undefined'){j='msHidden';k='msvisibilitychange';}else if(typeof document.webkitHidden!=='undefined'){j='webkitHidden';k='webkitvisibilitychange';}function l(){return j?document[j]:false;}var m={HIDDEN:'hidden',VISIBLE:'visible',isHidden:l};i(m,{visible:true,hidden:true});if(document.addEventListener&&k)document.addEventListener(k,h.guard(function n(){m.emit(l()?m.HIDDEN:m.VISIBLE);},'visibility change'));f.exports=m;},null);
__d("XPushRegisterServiceWorkerController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/push\/register\/service_worker\/",{});},null);
__d('NotificationBrowserUpsell.react',['Arbiter','AsyncRequest','BanzaiLogger','BrowserPushSessionChange.react','React','NotificationPermissionNotice.react','NotificationPermissionRequest.react','NotificationBrowserUpsellLearnMore.react','PushRegistration','XBrowserPushDisabledController','XBrowserPushXOutController','XPushRegisterServiceWorkerController','XUIButton.react','XUICloseButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=true,y=l.PropTypes,z=l.createClass({displayName:'NotificationBrowserUpsell',propTypes:{path:y.string.isRequired,appID:y.number.isRequired,useAllow:y.bool.isRequired,useFaces:y.bool.isRequired,useBeast:y.bool,isPage:y.bool,isInstalled:y.bool.isRequired,wasXOuted:y.bool.isRequired,doNotUseCurtain:y.bool,registerAnyway:y.bool},getInitialState:function(){return {doingUpsell:false,learningMore:false,hidden:true,showPermissionNotice:false,sessionChange:false};},componentDidMount:function(){var aa=p.get(this.props.path,this.props.appID);aa.isPushRegistered(this.props.isInstalled,s,q,i,!!this.props.registerAnyway,this._sessionChange).then((function(ba){this.setState({hidden:ba||this.props.wasXOuted});if(!ba&&!this.props.wasXOuted)x=false;}).bind(this))['catch'](function(){});h.subscribe('BrowserPushInstall/installed',(function(){this.setState({hidden:true});}).bind(this));},_mouseOver:function(){if(!x){x=true;this._logEvent('upsell_impression');}},_xout:function(){var aa=r.getURIBuilder().getURI();new i().setURI(aa).setMethod('post').send();h.inform('BrowserPushInstall/installed');this._logEvent('xout');},_doUpsell:function(){this._logEvent('turn_on');this.setState({doingUpsell:p.pushPermissionIsPending(),learningMore:false});var aa=p.get(this.props.path,this.props.appID);aa.registerPush(s,i,this._sessionChange).then((function(){h.inform('BrowserPushInstall/installed');this._logEvent('install');}).bind(this))['catch']((function(ba){if(window.Notification&&window.Notification.permission==='denied'){this.setState({showPermissionNotice:true});this._logEvent('deny');}else this._logEvent('install_ignore');h.inform('BrowserPushInstall/installed');}).bind(this));},_logEvent:function(event){var aa={event:event,appid:this.props.appID,surface:'upsell'};j.log('BrowserPushLoggerConfig',aa);},_hideNotice:function(){this.setState({showPermissionNotice:false});},_hideUpsell:function(){this.setState({doingUpsell:false});},_stopLearningMore:function(){this.setState({learningMore:false});},_learnMore:function(){this.setState({learningMore:true});},_sessionChange:function(){this.setState({sessionChange:true});},_hideSessionChange:function(){this.setState({sessionChange:false});},render:function(){var aa=null;if(this.state.sessionChange){var ba=p.get(this.props.path,this.props.appID);return l.createElement(k,{onHide:this._hideSessionChange,push:ba});}if(this.state.showPermissionNotice===true)return l.createElement(m,{onHide:this._hideNotice});if(this.state.hidden===true)return null;var ca=null;if(this.state.doingUpsell&&!this.props.doNotUseCurtain)ca=l.createElement(n,{onHide:this._hideUpsell,useFaces:this.props.useFaces,useAllow:this.props.useAllow});var da=null;if(this.state.learningMore)da=l.createElement(o,{onHide:this._stopLearningMore,onTurnOn:this._doUpsell});var ea=(this.props.isPage?"_2-hg":'')+(!this.props.isPage?' '+"_2-hh":'');return (l.createElement('div',{className:ea,onMouseOver:this._mouseOver},aa,ca,da,l.createElement('span',{className:"_2-hi"},l.createElement('div',{className:(this.props.useBeast?"_4026":'')+(!this.props.useBeast?' '+"_2-hj":'')})),l.createElement('span',{className:"_2-hk"},l.createElement('span',{className:"_2-hl"},w._("New!")),' ',w._("Get desktop notifications from Facebook.")),l.createElement('span',{className:"_2-hm"},l.createElement(t,{label:w._("Turn On"),use:'special',onClick:this._doUpsell})),l.createElement(u,{className:"_2-hn",onClick:this._xout})));}});f.exports=z;},null);
__d('NotificationListPropTypes',['React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h.PropTypes,j={negativeTracking:i.object,tracking:i.string,useChevron:i.bool,chevronType:i.string,notifs:i.object,afterScroll:i.func,onChevronShow:i.func,onChevronHide:i.func,canFetchMore:i.bool,hiddenState:i.object,readState:i.object,showingChevron:i.bool,paused:i.bool,maxHeight:i.number,shouldScroll:i.bool,upsell:i.object,gameRecs:i.object};f.exports=j;},null);
__d('FlexibleBlock.react',['LeftRight.react','React','cx','invariant','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=l({left:true,right:true});function n(p){!(p.flex&&p.flex in o.FLEX)?k(0):undefined;!(p.children&&p.children.length===2)?k(0):undefined;}var o=i.createClass({displayName:'FlexibleBlock',render:function(){n(this.props);var p,q=this.props.children[0],r=this.props.children[1],s=this.props.flex==m.left,t;if(s){t=q;p=h.DIRECTION.right;}else{t=r;p=h.DIRECTION.left;}var u=i.createElement('div',{className:"_42ef"},t);return (i.createElement(h,babelHelpers._extends({},this.props,{direction:p}),s?u:this.props.children[0],s?this.props.children[1]:u));}});o.FLEX=m;f.exports=o;},null);
__d('ReadToggle.react',['React','cx','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'ReadToggle',propTypes:{isRead:l.bool.isRequired,onClick:l.func,readLabel:l.node,unreadLabel:l.node},getDefaultProps:function(){return {onClick:j};},render:function(){if(this.props.isRead){return (h.createElement('div',{'aria-label':this.props.readLabel,className:this._getClasses(),'data-hover':'tooltip','data-tooltip-alignh':'center',onClick:this.props.onClick}));}else return (h.createElement('div',{'aria-label':this.props.unreadLabel,className:this._getClasses(),'data-hover':'tooltip','data-tooltip-alignh':'center',onClick:this.props.onClick,role:'button',tabIndex:'0'}));},_getClasses:function(){return k(this.props.className,(!this.props.isRead?"_5c9q":'')+(this.props.isRead?' '+"_5c9_":''));}});f.exports=m;},null);
__d('VaultBoxURI',['URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={PHOTOS_SYNCED:'photos_synced',isVaultBoxURI:function(j){var k=new RegExp("\/"+i.PHOTOS_SYNCED+"\/?$");return j.getPath().match(k)&&j.getQueryData().hasOwnProperty('view_image');},isVaultArchiveURI:function(j){var k=new RegExp("\/"+i.PHOTOS_SYNCED+"\/?$");return j.getPath().match(k);},getSyncedTabURI:function(){return new h('/me/'+i.PHOTOS_SYNCED).getQualifiedURI();}};f.exports=i;},null);
__d('NotificationListItem.react',['AsyncResponse','BizSiteIdentifier.brands','BanzaiLogger','CloseButton.react','Event','FlexibleBlock.react','ImageBlock.react','Keys','List.react','NotificationPhotoThumbnail','NotificationTokens','NotificationURI','NotificationUserActions','React','TextWithEntities.react','ReadToggle.react','Timestamp.react','VaultBoxURI','XUIButton.react','PopoverMenu.react','ReactXUIMenu','cx','invariant','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){if(c.__markCompiled)c.__markCompiled();var fa=ba.Item;function ga(ja,ka){return u.createElement('span',{className:'fwb'},ja);}function ha(ja){return !!(ja&&ja.id&&!ja.is_facebook_app);}var ia=u.createClass({displayName:'NotificationListItem',getInitialState:function(){return {showingOptions:false,negativeFeedbackConfirmation:null,canReportAsSpam:false,spamReportConfirmation:null,sendingFeedback:false,mayUndoHide:false,notifOptionConfirmation:null,isBizSite:i.isBizSite()};},_onKeyDownItem:function(ja){if(l.getKeyCode(ja.nativeEvent)==o.RETURN)this._markItemRead();},_markItemReadIfUnreadFromReadButton:function(){if(!this.props.isRead)t.setNextIsFromReadButton(true);this._markItemReadIfUnread();},_markItemReadIfUnread:function(){!this.props.isRead&&this._markItemRead();},_markItemRead:function(){t.markNotificationsAsRead([this.props.alert_id]);},_onFeedbackError:function(ja){h.defaultErrorHandler(ja);this.setState({sendingFeedback:false});},_onHideSuccess:function(ja){var ka=ja.getPayload();!ka.confirmation?da(0):undefined;this.setState({negativeFeedbackConfirmation:ka.confirmation,canReportAsSpam:ka.canReportAsSpam,sendingFeedback:false,showingOptions:true});},_onHideAppSuccess:function(ja){var ka=ja.getPayload(),la=ka.confirmation,ma=ka.canReportAsSpam;!la?da(0):undefined;this.setState({negativeFeedbackConfirmation:la,canReportAsSpam:ma,mayUndoHide:true,sendingFeedback:false,showingOptions:true});},_onSpamReportSuccess:function(ja){var ka=ja.getPayload().spamReportConfirmation;this.setState({negativeFeedbackConfirmation:null,spamReportConfirmation:ka,sendingFeedback:false});},_onHide:function(){t.markNotificationAsHidden(this.props.alert_id,this._onHideSuccess,this._onFeedbackError);this.setState({sendingFeedback:true,mayUndoHide:true});},_onShowSuccess:function(){this.setState({notifOptionConfirmation:null,negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false});},_onShow:function(){var ja=this.props.negative?this.props.negative.subscription_level:null;t.markNotificationAsVisible(this.props.alert_id,ja,this._onShowSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_onReportSpam:function(){t.markNotificationAsSpam(this.props.alert_id,this._onSpamReportSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsHidden:function(){t.markAppAsHidden(this.props.alert_id,this.props.application.id,this._onHideAppSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsVisible:function(){t.markAppAsVisible(this.props.alert_id,this.props.application.id,(function(){this.setState({negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false,mayUndoHide:false});}).bind(this),this._onFeedbackError);this.setState({sendingFeedback:true});},_renderAttachedImage:function(ja){if(ja)return (u.createElement('img',{src:ja.uri,className:"_42td",'aria-hidden':true}));return u.createElement('span',null);},_getModifiedTrackingString:function(ja){return JSON.stringify(babelHelpers._extends({},JSON.parse(this.props.tracking),ja));},_onClickCloseButton:function(){if(this.props.useChevron){this.showCloseOptionOnMenuClose=true;}else this.setState({showingOptions:true});},_onCancelNegativeFeedback:function(){this.setState({showingOptions:false});},_getChevron:function(){if(!this.props.menu_options.length)return null;var ja="_1_0c"+(' '+"_55m9")+(this.props.chevronType==='persistent'?' '+"_51v8":''),ka=u.createElement(ba,null,this.props.menu_options?this.props.menu_options.map((function(ma){return (u.createElement(fa,{onclick:(function(){this._onClickNotifOption(ma.server_action);}).bind(this),key:ma.client_action+ma.server_action},u.createElement('div',{className:"_18qh"},ma.text)));}).bind(this)):null),la=u.createElement('a',null,u.createElement(aa,{alignh:'right',menu:ka,className:ja,onShow:this._onChevronShow,onHide:this._onChevronHide},u.createElement('div',{className:"_1_0d"})));return la;},shouldComponentUpdate:function(ja,ka){return (this.props.visible!==ja.visible||this.props.isRead!==ja.isRead||this.props.timestamp!==ja.timestamp||this.props.paused!==ja.paused||this.state.showingOptions!==ka.showingOptions||this.state.sendingFeedback!==ka.sendingFeedback||this.state.canReportAsSpam!==ka.canReportAsSpam||this.state.spamReportConfirmation!==ka.spamReportConfirmation);},componentWillReceiveProps:function(ja){if(this.props.paused&&!ja.paused&&!this.props.visible&&this.state.mayUndoHide)this.setState({mayUndoHide:false});},_onChevronHide:function(){this.props.onChevronHide();this._logChevronEvent('close');if(this.showCloseOptionOnMenuClose){this.showCloseOptionOnMenuClose=false;this._turnOff();}},_turnOff:function(){var ja=ha(this.props.application)?this._markAppAsHidden:this._onHide;ja();},_onChevronShow:function(){this.props.onChevronShow();this._logChevronEvent('open');},_logChevronEvent:function(ja){var ka={event:ja,notif_type:this.props.notif_type,notif_id:parseInt(r.untokenizeIDs([this.props.alert_id])[0],10)};j.log('NotifJewelMenuLoggerConfig',ka);},_onNotifOptionSuccess:function(ja){this.setState({showingOptions:true,sendingFeedback:false,notifOptionConfirmation:ja});},_onClickNotifOption:function(ja){this.setState({sendingFeedback:true,mayUndoHide:true});t.sendNotifOption(this.props.alert_id,this._onNotifOptionSuccess,this._onFeedbackError,ja);},_undoNotifOption:function(ja){this.setState({sendingFeedback:true});t.undoNotifOption(this.props.alert_id,this._onShowSuccess,this._onFeedbackError,ja);},render:function(){if(!this.props.visible&&!this.state.mayUndoHide)return u.createElement('li',{className:"_4_62"});var ja=this.props.negative,ka=this.props.negativeTracking,la="_33c"+(!this.props.isRead?' '+"_4af":'')+(this.state.showingOptions?' '+"_4ag":'')+(this.state.sendingFeedback?' '+"_4m8s":'');if(this.state.negativeFeedbackConfirmation){var ma=this.state.negativeFeedbackConfirmation,na=null,oa=null;if(this.state.canReportAsSpam)if(!this.props.useChevron){na=u.createElement('span',null,u.createElement('span',{className:'mhs'},'·'),u.createElement('a',{href:'#',onClick:this._onReportSpam},ea._("Report app for spam")));}else oa=u.createElement(p,{border:'none',spacing:'small',className:"_1v4c"},u.createElement('li',null,u.createElement('a',{href:'#',onClick:this._onReportSpam,className:'mls'},ea._("Report app for spam"))));var pa=ha(this.props.application)?this._markAppAsVisible:this._onShow,qa=!this.props.useChevron?u.createElement('a',{href:'#',onClick:pa,className:'mls'},ea._("Undo")):null;return (u.createElement('li',{className:la,'data-gt':this.props.tracking},u.createElement('div',{className:"_4ai"},u.createElement(v,{interpolator:ga,ranges:ma.ranges,aggregatedranges:ma.aggregated_ranges,text:ma.text}),qa,na),oa));}var ra=this.state.spamReportConfirmation;if(ra)return (u.createElement('li',{className:la,'data-gt':this.props.tracking},u.createElement('div',{className:"_4ai"},u.createElement(v,{interpolator:ga,ranges:ra.ranges,aggregatedranges:ra.aggregated_ranges,text:ra.text}))));if(this.state.notifOptionConfirmation){ma=this.state.notifOptionConfirmation;return (u.createElement('li',{className:la,'data-gt':this.props.tracking},u.createElement('div',{className:"_4ai"},u.createElement(v,{interpolator:ga,ranges:ma.ranges,aggregatedranges:ma.aggregated_ranges,text:ma.text&&ma.text.text?ma.text.text:''}),u.createElement('a',{href:'#',onClick:(function(){this._undoNotifOption(ma.undo_action);}).bind(this),className:'mls'},ea._("Undo"))),u.createElement(p,{border:'none',spacing:'small',className:"_1v4c"},ma.follow_up_options.map?ma.follow_up_options.map((function(pb){return (u.createElement('li',{key:pb.client_action+pb.server_action},u.createElement('a',{onClick:(function(){this._onClickNotifOption(pb.server_action);}).bind(this),href:'#',className:'mls'},pb.text)));}).bind(this)):null)));}if(this.state.showingOptions&&!this.props.useChevron){var sa=ha(this.props.application)?this._markAppAsHidden:this._onHide;return (u.createElement('li',{className:la,'data-gt':this.props.tracking},u.createElement('div',{className:"_4ai"},u.createElement('div',null,u.createElement(v,{interpolator:ga,ranges:ja.confirm_question.ranges,aggregatedranges:ja.confirm_question.aggregated_ranges,text:ja.confirm_question.text})),u.createElement('div',{className:'mts'},u.createElement(z,{'data-gt':this._getModifiedTrackingString(ka.confirm),href:{url:'#'},label:ja.turn_off,use:'confirm',onClick:sa,disabled:this.state.sendingFeedback}),u.createElement(z,{'data-gt':this._getModifiedTrackingString(ka.cancel),href:{url:'#'},label:ea._("Keep On"),onClick:this._onCancelNegativeFeedback,disabled:this.state.sendingFeedback})))));}var ta=null;if(this.props.title)ta=u.createElement(v,{interpolator:ga,ranges:this.props.title.ranges,aggregatedranges:this.props.title.aggregated_ranges,text:this.props.title.text,renderEmoji:true,renderEmoticons:true});var ua=null,va=null;if(ja){var wa=this._onClickCloseButton,xa;xa=this._getModifiedTrackingString(ka.click);var ya="_4ah"+(' '+"_55m9");ua=u.createElement(k,{className:ya,'data-gt':xa,size:'medium',tooltip:ja.button_tooltip,onClick:wa,ref:'closeButton'});}var za=s.localize(this.props.url),ab=null;if(!this.props.noPhotoPreviews)ab=q.getThumbnail(this.props.attachments,this.props.attached_story,this.props.feedback_context);var bb=ab&&s.snowliftable(za),cb=s.isVaultSetURI(za),db=s.isAlbumDraftRecoveryDialogURI(za),eb=(this.props.useChevron?"_55ma":'')+(' '+"_55m9"),fb=u.createElement(w,{className:eb,isRead:!!this.props.isRead,onClick:this._markItemReadIfUnreadFromReadButton,readLabel:ea._("Read"),unreadLabel:ea._("Mark as Read")}),gb=null;if(this.props.useChevron){ua=null;gb=this._getChevron();}var hb=bb||cb||db?za:this.props.ajaxify_url,ib=null,jb=null,kb=cb?y.getSyncedTabURI().toString():za;if(bb){ib='theater';}else if(db){ib='async-post';}else if(cb||hb)ib='dialog';var lb=null,mb=this.props.actors[0];if(mb)lb={backgroundImage:'url('+mb.profile_picture.uri+')'};var nb=false;this.props.attachments.forEach(function(pb){if(nb)return;nb=pb.style_list.indexOf('notification_target')>=0||pb.style_list.indexOf('question')>=0;if(nb)return;});var ob=u.createElement('div',null,fb,ua,gb);return (u.createElement('li',{className:la,'data-gt':this.props.tracking,onMouseLeave:va},u.createElement('div',{className:'anchorContainer'},u.createElement('a',{href:kb,ajaxify:hb,className:"_33e"+(this.props.useChevron?' '+"_1_0e":''),rel:ib,onClick:jb,onMouseDown:this._markItemRead,onKeyDown:this._onKeyDownItem},u.createElement(n,null,u.createElement('span',{style:lb,className:(!this.props.isNotifsPage?"_33h":'')+(this.props.isNotifsPage?' '+"_12u1":'')}),u.createElement(m,{flex:m.FLEX.left},u.createElement('div',{className:"_4l_v"},ta,u.createElement(n,{className:"_33f"+(this.state.isBizSite?' '+"_2g48":'')},u.createElement('img',{className:"_10cu",src:this.props.icon.uri}),u.createElement('span',null,u.createElement(x,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose,className:"_33g"})))),this._renderAttachedImage(ab)))),ob)));}});f.exports=ia;},null);
__d('NotificationJewelList.react',['Animation','DOMContainer.react','Event','LoadingIndicator.react','NotificationListPropTypes','NotificationListItem.react','React','ReactDOM','ScrollableArea.react','Vector','cx','debounce','fbt','getObjectValues','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=160,x=530,y=40,z=64,aa=430,ba=n.createClass({displayName:'NotificationJewelList',propTypes:l,_isLoadingIndicatorVisible:function(){var ca=this.refs.loading;if(!ca)return false;var da=o.findDOMNode(this.refs.scrollable),ea=q.getElementDimensions(da).y;if(ea===0)return false;var fa=q.getElementPosition(da).y+ea,ga=q.getElementPosition(o.findDOMNode(ca)).y;ga-=y;return ga<fa;},_calculateHeight:function(){var ca=q.getViewportDimensions().y,da=Math.min(this.props.maxHeight||x,ca-w);if(this.props.upsell)return Math.max(da-z,0);return da;},_keepOnLoading:function(){if(this.isMounted())this.props.afterScroll(this._isLoadingIndicatorVisible());},_renderItems:function(){return u(this.props.notifs).map((function(ca){var da=ca.alert_id;return (n.createElement(m,babelHelpers._extends({key:da,visible:!this.props.hiddenState[da],isRead:this.props.readState[da],negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,useChevron:this.props.useChevron,chevronType:this.props.chevronType,onChevronShow:this.props.onChevronShow,onChevronHide:this.props.onChevronHide,paused:this.props.paused,parent:this},ca)));}).bind(this));},componentDidMount:function(){var ca=o.findDOMNode(this.refs.scrollable);j.listen(window,'resize',s((function(){if(!v(this.props.notifs))new h(ca).to('height',this._calculateHeight()+'px').duration(100).go();}).bind(this)));},componentDidUpdate:function(ca){if(this.props.paused&&!ca.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this._keepOnLoading,0);},render:function(){var ca=this.props.notifs,da=null,ea=null,fa=aa,ga=null;if(!v(ca)){da=n.createElement('ul',{'data-gt':this.props.tracking},this._renderItems());ea=this._calculateHeight();}else if(!this.props.canFetchMore)da=n.createElement('div',{className:"_572e"},t._("No new notifications"));if(this.props.canFetchMore)ga=n.createElement(k,{color:'white',size:'small',ref:'loading',className:"_33i"});var ha=null;if(this.props.upsell){var ia=this.props.upsell.module;ha=n.createElement(ia,this.props.upsell.props);}var ja=null;if(this.props.gameRecs)ja=n.createElement(i,null,this.props.gameRecs);var ka="_50-t"+(this.props.showingChevron?' '+"_2iy1":'');return (n.createElement('div',{className:ka},n.createElement(p,{ref:'scrollable',width:fa,height:ea,fade:true,persistent:true,onScroll:s(this._keepOnLoading)},da,ga),ja,ha));}});f.exports=ba;},null);
__d('NotificationList.react',['NotificationConstants','NotificationHiddenState','NotificationSeenState','NotificationStore','NotificationUpdates','NotificationUserActions','React','getObjectValues','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=n.PropTypes,r=h.PayloadSourceType.LIVE_SEND,s=n.createClass({displayName:'NotificationList',propTypes:{businessID:q.string,hasEverBeenOpened:q.bool,maxHeight:q.number,negativeTracking:q.object,paused:q.bool,tracking:q.string,useChevron:q.bool,chevronType:q.string,numPerPage:q.number.isRequired,listRenderer:q.func.isRequired,upsell:q.object,gameRecs:q.object,endpoint:q.string},getInitialState:function(){this._currentlyFetching=false;this._pendingNotifs={};this._shouldScroll=false;return {canFetchMore:true,notifs:{},hiddenState:{},readState:{},showingChevron:false};},componentWillMount:function(){k.registerEndpoint(this.props.endpoint);k.setBusinessID(this.props.businessID);this._subscriptions=[l.subscribe('notifications-updated',(function(t,u){if(u.source==r&&!p(u.updates)){this._shouldScroll=true;if(this.props.paused!==false)this._pendingNotifs=babelHelpers._extends({},this._pendingNotifs,u.updates);return;}this._fetchAndUpdate(k.getCount(this.props.endpoint));}).bind(this)),l.subscribe(['hidden-state-updated','read-state-updated'],(function(t,u){if(t=='hidden-state-updated'){if(u.source!==r||!this.props.paused){var v={};Object.keys(u.updates).forEach(function(x){v[x]=i.isHidden(x);});this.setState({hiddenState:babelHelpers._extends({},this.state.hiddenState,v)});}}else{var w={};Object.keys(u.updates).forEach(function(x){w[x]=j.isRead(x);});this.setState({readState:babelHelpers._extends({},this.state.readState,w)});}}).bind(this))];},componentWillUnmount:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_getNotifsWithCurrentOrder:function(t){var u=Object.keys(this.state.notifs),v=Object.keys(t).filter((function(x){return !this.state.notifs[x];}).bind(this));u=u.concat(v);var w={};u.forEach((function(x){if(this._pendingNotifs[x]){if(this.state.notifs[x])w[x]=this.state.notifs[x];}else w[x]=t[x];}).bind(this));return w;},_fetchAndUpdate:function(t){this._currentlyFetching=true;k.getNotifications(t,(function(u){var v=p(this._pendingNotifs)?u:this._getNotifsWithCurrentOrder(u),w={},x={};o(v).forEach(function(y){var z=y.alert_id;if(!this.state||!this.state.readState[z])w[z]=j.isRead(z);if(!this.state||!this.state.hiddenState[z])x[z]=i.isHidden(z);});this._currentlyFetching=false;this.setState({notifs:v,canFetchMore:k.canFetchMore(this.props.endpoint)||k.getCount(this.props.endpoint)!==Object.keys(v).length,readState:babelHelpers._extends({},this.state.readState,w),hiddenState:babelHelpers._extends({},this.state.hiddenState,x)});}).bind(this),this.props.endpoint);},_fetchAndUpdateAll:function(){var t={};Object.keys(this._pendingNotifs).forEach((function(u){var v=i.isHidden(u);if(v!=this.state.hiddenState[u])t[u]=i.isHidden(u);}).bind(this));if(!p(t))this.setState({hiddenState:babelHelpers._extends({},this.state.hiddenState,t)});this._pendingNotifs={};this._fetchAndUpdate(k.getCount(this.props.endpoint));},_fetchNextSet:function(){if(!this._currentlyFetching){var t=Object.keys(this.state.notifs).length;this._fetchAndUpdate(t+this.props.numPerPage);}},_onScrollAndUpdate:function(t){if(this._currentlyFetching||!this.state.canFetchMore)return;if(t)this._fetchNextSet();},_onChevronShow:function(){this.setState({showingChevron:true});},_onChevronHide:function(){this.setState({showingChevron:false});},_updateNotifInContainer:function(t){if(t.length>this.props.numPerPage){this._fetchAndUpdate(t.length);}else this._fetchNextSet();return;},componentDidUpdate:function(t){var u=j.getUnseenIDs();if(!p(this._pendingNotifs))u=u.filter((function(v){return !this._pendingNotifs[v];}).bind(this));if(u.length&&this.props.paused)m.markNotificationsAsSeen(u);if(!t.hasEverBeenOpened&&this.props.hasEverBeenOpened)this._updateNotifInContainer(u);if(t.paused&&!this.props.paused){this._shouldScroll=false;setTimeout(this._fetchAndUpdateAll,0);return;}},render:function(){var t=this.props.listRenderer;return (n.createElement(t,{hasEverBeenOpened:this.props.hasEverBeenOpened,paused:this.props.paused,tracking:this.props.tracking,negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,businessID:this.props.businessID,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,chevronType:this.props.chevronType,notifs:this.state.notifs,afterScroll:this._onScrollAndUpdate,onChevronShow:this._onChevronShow,onChevronHide:this._onChevronHide,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,showingChevron:this.state.showingChevron,shouldScroll:this._shouldScroll,upsell:this.props.upsell||null,gameRecs:this.props.gameRecs||null,isRHC:this.props.isRHC}));}});f.exports=s;},null);
__d('legacy:ScrollAwareDOM',['ScrollAwareDOM'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.ScrollAwareDOM=c('ScrollAwareDOM');},3);
__d('LinkshimAsyncLink',['$','AsyncSignal','DOM','UserAgent_DEPRECATED','LinkshimHandlerConfig'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={swap:function(n,o){var p=k.ie()<=8;if(p){var q=j.create('wbr',{},null);j.appendContent(n,q);}n.href=o;if(p)j.remove(q);},referrer_log:function(n,o,p){var q=h('meta_referrer');q.content='origin';m.swap(n,o);setTimeout(function(){q.content=l.default_meta_referrer_policy;new i(p,{}).send();},100);}};f.exports=m;},null);
__d('legacy:dom-asynclinkshim',['LinkshimAsyncLink'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.LinkshimAsyncLink=c('LinkshimAsyncLink');},3);
__d("coalesce",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){for(var i=0;i<arguments.length;++i)if(arguments[i]!=null)return arguments[i];return null;}f.exports=h;},null);
__d('getScrollPosition',['getDocumentScrollElement','getUnboundedScrollPosition'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k){var l=h();if(k===window)k=l;var m=i(k),n=k===l?document.documentElement:k,o=k.scrollWidth-n.clientWidth,p=k.scrollHeight-n.clientHeight;m.x=Math.max(0,Math.min(m.x,o));m.y=Math.max(0,Math.min(m.y,p));return m;}f.exports=j;},null);
__d('escapeJSQuotes',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){if(typeof i=='undefined'||i==null||!i.valueOf())return '';return i.toString().replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/"/g,'\\x22').replace(/'/g,'\\\'').replace(/</g,'\\x3c').replace(/>/g,'\\x3e').replace(/&/g,'\\x26');}f.exports=h;},null);
__d('whitelistObjectKeys',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k={},l=Array.isArray(j)?j:Object.keys(j);for(var m=0;m<l.length;m++)if(typeof i[l[m]]!=='undefined')k[l[m]]=i[l[m]];return k;}f.exports=h;},null);
__d('getHashtagRegexString',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){var i='\xc0-\xd6'+'\xd8-\xf6'+'\xf8-\xff'+'\u0100-\u024f'+'\u0253-\u0254'+'\u0256-\u0257'+'\u0259'+'\u025b'+'\u0263'+'\u0268'+'\u026f'+'\u0272'+'\u0289'+'\u028b'+'\u02bb'+'\u0300-\u036f'+'\u1e00-\u1eff',j='\u0400-\u04ff'+'\u0500-\u0527'+'\u2de0-\u2dff'+'\ua640-\ua69f'+'\u0591-\u05bf'+'\u05c1-\u05c2'+'\u05c4-\u05c5'+'\u05c7'+'\u05d0-\u05ea'+'\u05f0-\u05f4'+'\ufb12-\ufb28'+'\ufb2a-\ufb36'+'\ufb38-\ufb3c'+'\ufb3e'+'\ufb40-\ufb41'+'\ufb43-\ufb44'+'\ufb46-\ufb4f'+'\u0610-\u061a'+'\u0620-\u065f'+'\u066e-\u06d3'+'\u06d5-\u06dc'+'\u06de-\u06e8'+'\u06ea-\u06ef'+'\u06fa-\u06fc'+'\u06ff'+'\u0750-\u077f'+'\u08a0'+'\u08a2-\u08ac'+'\u08e4-\u08fe'+'\ufb50-\ufbb1'+'\ufbd3-\ufd3d'+'\ufd50-\ufd8f'+'\ufd92-\ufdc7'+'\ufdf0-\ufdfb'+'\ufe70-\ufe74'+'\ufe76-\ufefc'+'\u200c-\u200c'+'\u0e01-\u0e3a'+'\u0e40-\u0e4e'+'\u1100-\u11ff'+'\u3130-\u3185'+'\uA960-\uA97F'+'\uAC00-\uD7AF'+'\uD7B0-\uD7FF'+'\uFFA1-\uFFDC',k=String.fromCharCode,l='\u30A1-\u30FA\u30FC-\u30FE'+'\uFF66-\uFF9F'+'\uFF10-\uFF19\uFF21-\uFF3A'+'\uFF41-\uFF5A'+'\u3041-\u3096\u3099-\u309E'+'\u3400-\u4DBF'+'\u4E00-\u9FFF'+k(173824)+'-'+k(177983)+k(177984)+'-'+k(178207)+k(194560)+'-'+k(195103)+'\u3003\u3005\u303B',m=i+j+l,n='\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6'+'\u00F8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u037A\u0386'+'\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481'+'\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587'+'\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0640-\u064A\u066E-\u066F'+'\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710'+'\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07B1\u0904-\u0939\u093D\u0950'+'\u0958-\u0961\u097D\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0'+'\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1'+'\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33'+'\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D'+'\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD'+'\u0AD0\u0AE0-\u0AE1\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30'+'\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83'+'\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F'+'\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10'+'\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C85-\u0C8C'+'\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE'+'\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39'+'\u0D60-\u0D61\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6'+'\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88'+'\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7'+'\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6'+'\u0EDC-\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u1000-\u1021'+'\u1023-\u1027\u1029-\u102A\u1050-\u1055\u10A0-\u10C5\u10D0-\u10FA\u10FC'+'\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D'+'\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0'+'\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310'+'\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C'+'\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711'+'\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7'+'\u17DC\u1820-\u1877\u1880-\u18A8\u1900-\u191C\u1950-\u196D\u1970-\u1974'+'\u1980-\u19A9\u19C1-\u19C7\u1A00-\u1A16\u1D00-\u1DBF\u1E00-\u1E9B'+'\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D'+'\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC'+'\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC'+'\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107'+'\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D'+'\u212F-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2C00-\u2C2E'+'\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96'+'\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6'+'\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3006\u3031-\u3035'+'\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF'+'\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5'+'\u4E00-\u9FBB\uA000-\uA48C\uA800-\uA801\uA803-\uA805\uA807-\uA80A'+'\uA80C-\uA822\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9'+'\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C'+'\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F'+'\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A'+'\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7'+'\uFFDA-\uFFDC',o='\u0300-\u036F\u0483-\u0486\u0591-\u05B9\u05BB-\u05BD\u05BF'+'\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u0615\u064B-\u065E\u0670'+'\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A'+'\u07A6-\u07B0\u0901-\u0903\u093C\u093E-\u094D\u0951-\u0954\u0962-\u0963'+'\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7-\u09C8\u09CB-\u09CD\u09D7'+'\u09E2-\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D'+'\u0A70-\u0A71\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD'+'\u0AE2-\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B43\u0B47-\u0B48\u0B4B-\u0B4D'+'\u0B56-\u0B57\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7'+'\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56'+'\u0C82-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5-\u0CD6'+'\u0D02-\u0D03\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D82-\u0D83'+'\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2-\u0DF3\u0E31\u0E34-\u0E3A'+'\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19'+'\u0F35\u0F37\u0F39\u0F3E-\u0F3F\u0F71-\u0F84\u0F86-\u0F87\u0F90-\u0F97'+'\u0F99-\u0FBC\u0FC6\u102C-\u1032\u1036-\u1039\u1056-\u1059\u135F'+'\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B6-\u17D3\u17DD'+'\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8-\u19C9'+'\u1A17-\u1A1B\u1DC0-\u1DC3\u20D0-\u20DC\u20E1\u20E5-\u20EB\u302A-\u302F'+'\u3099-\u309A\uA802\uA806\uA80B\uA823-\uA827\uFB1E\uFE00-\uFE0F'+'\uFE20-\uFE23',p='\u0030-\u0039\u0660-\u0669\u06F0-\u06F9\u0966-\u096F\u09E6-\u09EF'+'\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F'+'\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29'+'\u1040-\u1049\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9'+'\uFF10-\uFF19',q=n+o+m,r=p+'_',s=q+r,t='['+q+']',u='['+s+']',v='^|$|[^&/'+s+']',w='[#\\uFF03]',x='('+v+')('+w+')('+u+'*'+t+u+'*)';return x;}f.exports=h;},null);
__d('getHashtagRegex',['getHashtagRegexString'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){return new RegExp(h(),'ig');}f.exports=i;},null);
__d('HashtagParser',['URLMatcher','getHashtagRegex'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=100,k=30,l=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function m(ea){var fa=z(ea),ga=0,ha=0;return o(ea).map(function(ia){while(ga<fa.length){var ja=fa[ga],ka=ja.offset-ha;if(ka<ia.offset){ha+=ja.token.length-ja.name.length;ga++;}else break;}return {marker:ia.marker,tag:ia.hashtag,rawOffset:ia.offset+ha,offset:ia.offset};});}function n(ea){return p(ea,u(ea));}function o(ea){var fa=ba(ea);return p(fa,q(ea,fa));}function p(ea,fa){return s(ea).slice(0,k).filter(function(ga){var ha=w(ga.offset,ga.hashtag.length,fa);return !ha&&ga.hashtag.length<=j;});}function q(ea,fa){return v(t(ea),u(fa));}var r=i();function s(ea){var fa=[];ea.replace(r,function(ga,ha,ia,ja,ka){fa.push({marker:ia,hashtag:ja,offset:ka+ha.length});});return fa;}function t(ea){return ca(ea).map(function(fa){return [fa.offset,fa.name.length];});}function u(ea){var fa=[],ga,ha=0;while(ga=h.permissiveMatch(ea)){var ia=ea.indexOf(ga);fa.push([ha+ia,ga.length]);ea=ea.substring(ia+ga.length);ha+=ia+ga.length;}return fa;}function v(ea,fa){var ga=[],ha=0,ia=0,ja=0;while(ha<ea.length&&ia<fa.length)if(ea[ha][0]>fa[ia][0]){ga[ja++]=fa[ia++];}else ga[ja++]=ea[ha++];return ga.concat(ea.slice(ha),fa.slice(ia));}function w(ea,fa,ga){if(!ga)return false;var ha=y(ga,ea);return x(ea,fa,ga,ha)||x(ea,fa,ga,ha+1);}function x(ea,fa,ga,ha){if(!ga[ha])return false;var ia=ga[ha][0],ja=ga[ha][1];return !(ea+fa-1<ia||ea>ia+ja-1);}function y(ea,fa){var ga=0,ha=ea.length-1;while(ga<=ha){var ia=Math.floor((ga+ha)/2),ja=ea[ia][0];if(ja==fa){return ia;}else if(ja<fa){ga=ia+1;}else ha=ia-1;}return ha;}function z(ea){var fa=[];ea.replace(l,function(ga,ha,ia,ja,ka){fa.push({token:ga,id:ha,type:ia,name:ja,offset:ka});});return fa;}function aa(ea){return ea?ea.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function ba(ea){return ea.replace(l,function(fa,ga,ha,ia,ja){return aa(ia);});}function ca(ea){var fa=0,ga=0;return z(ea).map(function(ha){var ia=ea.indexOf(ha.token,ga);ga=ia+1;ia-=fa;var ja=aa(ha.name);fa+=ha.token.length-ja.length;if(ia>=0)return {id:ha.id,name:ja,type:ha.type,offset:ia};});}var da={};da.parse=m;da.parseWithoutMentions=n;f.exports=da;},null);
__d('FullViewLogger',['Banzai','ScriptPath','SubscriptionsHandler','URI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();l.logFromViewableImpressionTracker=function(m){'use strict';var n=new l();n.subscribeToTrackerEvents(m);};l.prototype.subscribeToTrackerEvents=function(m){'use strict';this.subscriptionsHandler=new j();this.subscriptionsHandler.addSubscriptions(m.addListener('full_view',this.onFullView,this));};l.prototype.onFullView=function(m){'use strict';if(this.$FullViewLogger1())this.$FullViewLogger2(m);var n={token:m.token,fullViewType:m.fullViewType,scriptPath:i.getTopViewEndpoint()};h.post('xtrackable:full_view',n);if(this.$FullViewLogger1())this.$FullViewLogger3(n);};l.prototype.$FullViewLogger1=function(){'use strict';return 0;};l.prototype.$FullViewLogger2=function(m){'use strict';};l.prototype.$FullViewLogger3=function(m){'use strict';};function l(){'use strict';}f.exports=l;},null);
__d('ViewableImpressionHeatmapLogger',['Banzai'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();i.logFromViewableImpressionTracker=function(j,k){'use strict';var l=new i(k);l.subscribeToTrackerEvents(j);};function i(j){'use strict';this.loggingDurationMS=j;this.trackingEntries={};}i.prototype.subscribeToTrackerEvents=function(j){'use strict';this.visibleSubscription=j.addListener('visible',this.onElementVisible,this);this.hiddenSubscription=j.addListener('hidden',this.onElementHidden,this);};i.prototype.onElementVisible=function(j){'use strict';var k=this.getCurrentTimestamp(),l=this.trackingEntries[j.id];if(!l){l=this.createTrackingEntry(j);this.beginTracking(j.id,l);k=l.startedTrackingTS;}l.viewportProgressEvents.push({timestamp:k,percentInViewport:j.percentInViewport.toFixed(2)});};i.prototype.onElementHidden=function(j){'use strict';var k=this.getCurrentTimestamp(),l=this.trackingEntries[j.id];if(!l)return;l.viewportProgressEvents.push({timestamp:k,percentInViewport:0});};i.prototype.onTrackingCompleted=function(j){'use strict';var k=this.trackingEntries[j];k.viewportProgressEvents.push({timestamp:this.getCurrentTimestamp(),percentInViewport:k.tracker.getPercentInViewport().toFixed(2)});if(this.$ViewableImpressionHeatmapLogger1())this.$ViewableImpressionHeatmapLogger2(j,k);this.logToServer(k);delete this.trackingEntries[j];};i.prototype.logToServer=function(j){'use strict';var k=j;delete k.tracker;h.post('xtrackable:heatmap',k);};i.prototype.beginTracking=function(j,k){'use strict';this.trackingEntries[j]=k;setTimeout((function(){return this.onTrackingCompleted(j);}).bind(this),this.loggingDurationMS);};i.prototype.createTrackingEntry=function(j){'use strict';return {tracker:j.tracker,token:j.token,startedTrackingTS:this.getCurrentTimestamp(),viewportProgressEvents:[]};};i.prototype.getCurrentTimestamp=function(){'use strict';return (Date.now()/1000).toFixed(2);};i.prototype.$ViewableImpressionHeatmapLogger1=function(){'use strict';return 0;};i.prototype.$ViewableImpressionHeatmapLogger2=function(j,k){'use strict';var l='Completed tracking for id '+j+' token='+k.token+' startedTrackingTS='+k.startedTrackingTS+'\n';k.viewportProgressEvents.forEach(function(m){l+='% in view: '+m.percentInViewport+' timestamp='+m.timestamp+'\n';});};f.exports=i;},null);
__d('ViewableImpressionUtils',['CSS','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={isHorizontallyOffscreen:function(k,l,m){var n=Math.max(l.x,0),o=Math.min(l.x+l.width,m.width);return o-n<l.width||h.hasClass(k,"desktop_hscroll_offscreen");}};f.exports=j;},null);
__d('ViewableImpressionTracker',['Banzai','BrowseClientEventLogger','DOM','FullViewType','NonBlockingIFrame','Style','URI','ViewableImpressionUtils','WebSpeedExperiments','getElementPosition','getViewportDimensions','mixInEventEmitter'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();function t(u,v,w){'use strict';this.id=u;this.element=v;this.config=w;this.iframe=null;this.viewableTimeout=null;this.clearSubsequentTimeout=null;this.waitForSubsequent=false;this.waitForLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.iframeLogged=false;this.banzaiLogged=false;this.topLeftInViewport=false;this.bottomRightInViewport=false;}t.prototype.getID=function(){'use strict';return this.id;};t.prototype.getPercentInViewport=function(){'use strict';var u=r(),v=q(this.element);return this.$ViewableImpressionTracker1(u,v);};t.prototype.$ViewableImpressionTracker1=function(u,v){'use strict';if(v.x<u.width&&v.x+v.width>0&&v.y<u.height&&v.y+v.height>0&&m.get(this.element,'visibility')!=='hidden'&&m.get(this.element,'opacity')!=='0'){var w=Math.max(v.x,0),x=Math.min(v.x+v.width,u.width),y=Math.max(v.y,0),z=Math.min(v.y+v.height,u.height);if(v.height*v.width===0)return 100;if(this.config.require_horizontally_onscreen&&o.isHorizontallyOffscreen(this.element,v,u))return 0;var aa=100*(x-w)*(z-y)/(v.height*v.width);return aa;}return 0;};t.prototype.$ViewableImpressionTracker2=function(u,v){'use strict';if(m.get(this.element,'visibility')==='hidden'||m.get(this.element,'opacity')==='0')return false;var w=v.x,x=v.y,y=v.x+v.width,z=v.y+v.height;this.topLeftInViewport=this.topLeftInViewport||w>=0&&w<=u.width&&x>=0&&x<=u.height;this.bottomRightInViewport=this.bottomRightInViewport||y>=0&&y<=u.width&&z>=0&&z<=u.height;return this.topLeftInViewport&&this.bottomRightInViewport;};t.prototype.$ViewableImpressionTracker3=function(u,v){'use strict';if(this.hasEmittedFullViewEvent)return;if(this.$ViewableImpressionTracker2(u,v)){this.emit('full_view',{tracker:this,id:this.getID(),token:this.getToken(),fullViewType:k.ENTIRE_UNIT});this.hasEmittedFullViewEvent=true;}};t.prototype.onVisible=function(){'use strict';this.isVisible=true;var u=r(),v=q(this.element),w=this.$ViewableImpressionTracker1(u,v),x=w>this.config.pixel_in_percentage;this.emit('visible',{tracker:this,id:this.getID(),token:this.getToken(),percentInViewport:w});this.$ViewableImpressionTracker3(u,v);if(!x){this.$ViewableImpressionTracker4();return;}if(this.isLogged()){this.$ViewableImpressionTracker5();}else this.$ViewableImpressionTracker6();if(!this.waitForLogged&&!this.isLogged()){this.waitForLogged=true;this.viewableTimeout=setTimeout((function(){this.waitForLogged=false;var y=this.getPercentInViewport(),z=y>this.config.pixel_in_percentage;if(!z){this.$ViewableImpressionTracker7();return;}this.logImpression(1,{});this.$ViewableImpressionTracker5();}).bind(this),this.config.duration_in_ms);}};t.prototype.onHidden=function(){'use strict';this.emit('hidden',{id:this.getID(),token:this.getToken()});if(this.config.log_initial_nonviewable&&!this.isLogged()&&!this.isNonViewableLogged){this.logNonViewableImpression();}else if(!this.config.log_initial_nonviewable&&!this.isLogged()&&this.isVisible)this.logNonViewableImpression();this.isVisible=false;if(this.waitForLogged){this.waitForLogged=false;clearTimeout(this.viewableTimeout);}if(this.isLogged()&&!this.waitForSubsequent&&this.config.subsequent_gap_in_ms>=0){this.waitForSubsequent=true;this.clearSubsequentTimeout=setTimeout((function(){this.waitForSubsequent=false;this.reset();if(this.isVisible)this.onVisible();}).bind(this),this.config.subsequent_gap_in_ms);}this.$ViewableImpressionTracker7();};t.prototype.onRemoved=function(){'use strict';this.isVisible=false;};t.prototype.getToken=function(){'use strict';return this.element.getAttribute('data-xt');};t.prototype.logImpression=function(u,v){'use strict';if(this.isLogged())return;var w=this.getToken(),x=Math.floor(Date.now()/1000),y={xt:w,isv:u,cts:x};if(h.isEnabled('xtrackable_clientview_batch')&&this.config.should_batch){this.logWithBanzai(y);}else this.logWithIFrame(Object.assign(y,v));};t.prototype.logNonViewableImpression=function(){'use strict';if(this.config.nonviewableEnabled){var u=this.getToken();h.post('xtrackable:nonviewable',{xt:u});}this.isNonViewableLogged=true;};t.prototype.isLogged=function(){'use strict';return this.iframeLogged||this.banzaiLogged;};t.prototype.reset=function(){'use strict';if(this.iframeLogged){this.iframeLogged=false;j.remove(this.iframe);this.iframe=null;}if(this.banzaiLogged)this.banzaiLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.waitForLogged=false;this.waitForSubsequent=false;};t.prototype.logWithBanzai=function(u){'use strict';this.banzaiLogged=true;i.maybeLogClientViewEvent(u);h.post('xtrackable:clientview_batch',u);};t.prototype.logWithIFrame=function(u){'use strict';this.iframeLogged=true;if(p.non_blocking_tracker){l.loadIFrame(new n(this.config.impressionURL).addQueryData(u).toString());}else{this.iframe=j.create('iframe',{src:new n(this.config.impressionURL).addQueryData(u),width:0,height:0,frameborder:0,scrolling:'no',className:'fbEmuTracking'});this.iframe.setAttribute('aria-hidden','true');j.appendContent(this.element,this.iframe);}};t.prototype.$ViewableImpressionTracker8=function(){'use strict';return 0;};t.prototype.$ViewableImpressionTracker4=function(){'use strict';if(this.$ViewableImpressionTracker8()){m.set(this.element,'background-color','#abab9a');m.set(this.element,'outline','3px solid #abab9a');}};t.prototype.$ViewableImpressionTracker6=function(){'use strict';if(this.$ViewableImpressionTracker8()){m.set(this.element,'background-color','#e4f70a');m.set(this.element,'outline','3px solid #e4f70a');}};t.prototype.$ViewableImpressionTracker7=function(){'use strict';if(this.$ViewableImpressionTracker8()){m.set(this.element,'background-color',null);m.set(this.element,'outline',null);}};t.prototype.$ViewableImpressionTracker5=function(){'use strict';if(this.$ViewableImpressionTracker8()){m.set(this.element,'background-color','#047515');m.set(this.element,'outline','3px solid #047515');}};s(t,{visible:true,hidden:true,full_view:true});f.exports=t;},null);
__d('VisibilityTrackingHelper',['Arbiter','DesktopHscrollUnitEventConstants','getViewportDimensions','Event'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={getEventListeners:function(m){return [k.listen(document,'DOMContentLoaded',m),k.listen(window,'scroll',m),k.listen(window,'resize',m),h.subscribe(i.HSCROLL_ITEM_SHOWN_EVENT,m)];},getViewportInfo:function(){return j();}};f.exports=l;},null);
__d('VisibilityTracking',['Banzai','BrowseClientEventLogger','ErrorUtils','ScriptPath','SubscriptionsHandler','Visibility','VisibilityTrackingHelper','collectDataAttributes','getElementPosition','pageID','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='visibility_tracking',t='[data-vistracking]',u=500,v=50,w=50,x=50,y=50,z={VISIBLE:'visible',HIDDEN:'hidden'},aa={DEFAULT:'default',REMOVED:'removed'},ba={name:z.VISIBLE,cause:aa.DEFAULT},ca={name:z.HIDDEN,cause:aa.DEFAULT},da={name:z.HIDDEN,cause:aa.REMOVED},ea=0;function fa(ga){'use strict';ga=ga||{};if(!ga.bypass_banzai_check&&!h.isEnabled(s))return;this.visibleElementInfo={};this.getDataFromConfig(ga);m.addListener(m.VISIBLE,j.guard(this.fireEvent,'VisibilityTracking:visible',this));if(!this.skipVisibilityHiddenEvents)m.addListener(m.HIDDEN,j.guard(this.clearAllVisibleElements,'VisibilityTracking:hidden',this));k.subscribe(j.guard(this.updateVisibleElements,'VisibilityTracking:scriptPath',this));h.subscribe(h.SHUTDOWN,j.guard(this.onUnload,'VisibilityTracking:banzaiShutdown',this));this.fireEventCallback=r.acrossTransitions(j.guard(this.fireEvent,'VisibilityTracking:fireEventCallback',this),this.timeout,this);this.listeners=new l();n.getEventListeners(this.fireEventCallback).forEach(function(ha){this.listeners.addSubscriptions(ha);},this);if(this.extraInit)j.applyWithGuard(this.extraInit.bind(this));}fa.prototype.getDataFromConfig=function(ga){'use strict';this.config=ga;this.root=ga.root||document.documentElement;this.selector=ga.selector||t;this.timeout=typeof ga.timeout!=='undefined'?ga.timeout:u;this.minOffsetVisibleFromBottom=typeof ga.minOffsetVisibleFromBottom!=='undefined'?ga.minOffsetVisibleFromBottom:v;this.minOffsetVisibleFromTop=typeof ga.minOffsetVisibleFromTop!=='undefined'?ga.minOffsetVisibleFromTop:w;this.minOffsetVisibleFromLeft=typeof ga.minOffsetVisibleFromLeft!=='undefined'?ga.minOffsetVisibleFromLeft:x;this.minOffsetVisibleFromRight=typeof ga.minOffsetVisibleFromRight!=='undefined'?ga.minOffsetVisibleFromRight:y;this.handleAllHiddenEvents=typeof ga.handleAllHiddenEvents!=='undefined'?ga.handleAllHiddenEvents:false;this.handleAllVisibleEvents=typeof ga.handleAllVisibleEvents!=='undefined'?ga.handleAllVisibleEvents:false;this.skipVisibilityHiddenEvents=typeof ga.skipVisibilityHiddenEvents!=='undefined'?ga.skipVisibilityHiddenEvents:false;this.cacheTrackedElements=typeof ga.cacheTrackedElements!=='undefined'?ga.cacheTrackedElements:false;};fa.prototype.getAllTrackedElements=function(){'use strict';if(!this.allTrackedElements){this.allTrackedElements={};if(this.root.querySelectorAll){var ga=this.root.querySelectorAll(this.selector);for(var ha=0;ha<ga.length;ha++){var ia=this.getElementID(ga[ha]);this.allTrackedElements[ia]=ga[ha];}}}return this.allTrackedElements;};fa.prototype.refreshAllTrackedElements=function(){'use strict';delete this.allTrackedElements;return this.getAllTrackedElements();};fa.prototype.getDataToLog=function(ga){'use strict';var ha=Object.assign(o(ga,['gt']).gt,{client_time:Date.now()/1000,time_spent_id:q,script_path:k.getScriptPath()});return ha;};fa.prototype.getElementID=function(ga){'use strict';var ha=ga.$VisibilityTracking1;if(ha)return ha;ga.$VisibilityTracking1=++ea;return ea;};fa.prototype.sendDataToLog=function(ga){'use strict';i.maybeLogVisiblityEvent(ga);h.post(s,ga);};fa.prototype.fireEvent=function(){'use strict';var ga=this.cacheTrackedElements?this.allTrackedElements:this.refreshAllTrackedElements();for(var ha in ga){var ia=ga[ha],ja=n.getViewportInfo(),ka=this.isVisible(ia,ja);if(!ka&&(ha in this.visibleElementInfo||this.handleAllHiddenEvents)){this.handleEvent(ia,ca);}else if(ka&&(!(ha in this.visibleElementInfo)||this.handleAllVisibleEvents))this.handleEvent(ia,ba);}this.clearUntrackedVisibleElements();};fa.prototype.isVisible=function(ga,ha){'use strict';var ia=p(ga);return (ia.x||ia.y||ia.width||ia.height)&&ia.y+ia.height>=this.minOffsetVisibleFromTop&&ia.y<=ha.height-this.minOffsetVisibleFromBottom&&ia.x+ia.width>=this.minOffsetVisibleFromLeft&&ia.x<=ha.width-this.minOffsetVisibleFromRight;};fa.prototype.handleEvent=function(ga,event){'use strict';var ha=this.getElementID(ga),ia=this.getDataToLog(ga),ja;if(event.name===z.VISIBLE){var ka=Math.floor(Date.now()/1000);ja=q.concat(":",ka.toString(),":",this.getElementID(ga).toString());this.visibleElementInfo[ha]={visibility_id:ja,elem:ga};}else if(event.name===z.HIDDEN)if(ha in this.visibleElementInfo){ja=this.visibleElementInfo[ha].visibility_id;delete this.visibleElementInfo[ha];}this.sendDataToLog(Object.assign(ia,{event:event.name,visibility_id:ja}));};fa.prototype.clearUntrackedVisibleElements=function(){'use strict';var ga=this.getAllTrackedElements();for(var ha in this.visibleElementInfo)if(!(ha in ga)){var ia=this.visibleElementInfo[ha];if(ia.elem)this.handleEvent(ia.elem,da);}};fa.prototype.clearAllVisibleElements=function(){'use strict';var ga=this.getAllTrackedElements();for(var ha in ga)if(ha in this.visibleElementInfo)this.handleEvent(ga[ha],ca);this.clearUntrackedVisibleElements();};fa.prototype.updateVisibleElements=function(){'use strict';this.clearAllVisibleElements();this.fireEvent();};fa.prototype.refreshAndFireEvent=function(){'use strict';this.refreshAllTrackedElements();this.fireEventCallback();};fa.prototype.onUnload=function(){'use strict';this.clearAllVisibleElements();if(this.listeners){this.listeners.release();this.listeners=null;}if(this.extraCleanup)j.applyWithGuard(this.extraCleanup.bind(this));};fa.init=function(ga){'use strict';new fa(ga);};fa.EVENT=z;fa.CAUSE=aa;f.exports=fa;},null);
__d('ViewableImpressionEventHandler',['FullViewLogger','ViewableImpressionHeatmapLogger','ViewableImpressionTracker','VisibilityTracking'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m,n=1;l=babelHelpers.inherits(o,k);m=l&&l.prototype;o.prototype.extraInit=function(){'use strict';this.impressionTrackers={};};o.prototype.getDataFromConfig=function(p){'use strict';m.getDataFromConfig.call(this,p);this.doHeatmapLogging=p.doHeatmapLogging;this.heatmapLoggingDurationMS=p.heatmapLoggingDurationMS;p.impressionURL=p.impressionURL!==undefined?p.impressionURL:'/xti.php';p.nonviewableEnabled=p.nonviewableEnabled!==undefined?p.nonviewableEnabled:false;};o.prototype.getImpressionTracking=function(p){'use strict';var q=this.getElementID(p),r=babelHelpers._extends({},this.getConfigFromElement(p),this.config),s=this.impressionTrackers[q];if(!s){s=new j(q,p,r);this.impressionTrackers[q]=s;if(this.doHeatmapLogging)i.logFromViewableImpressionTracker(s,this.heatmapLoggingDurationMS);if(r.should_log_full_views)h.logFromViewableImpressionTracker(s);}return s;};o.prototype.handleEvent=function(p,event){'use strict';var q=this.getImpressionTracking(p);if(!q)return;if(event.name===k.EVENT.VISIBLE){q.onVisible();if(!this.visibleElementInfo[q.getID()])this.visibleElementInfo[q.getID()]={elem:p};}else if(event.name===k.EVENT.HIDDEN)if(event.cause===k.CAUSE.DEFAULT){q.onHidden();delete this.visibleElementInfo[q.getID()];}else if(event.cause===k.CAUSE.REMOVED){q.onRemoved();delete this.visibleElementInfo[q.getID()];delete this.impressionTrackers[q.getID()];}};o.prototype.getConfigFromElement=function(p){'use strict';return JSON.parse(p.getAttribute('data-xt-vimp'));};o.prototype.getElementID=function(p){'use strict';if(!p.getAttribute('id'))p.setAttribute('id','xt_uniq_'+n++);return p.getAttribute('id');};function o(){'use strict';l.apply(this,arguments);}f.exports=o;},null);
__d('EntstreamInjectWarning',['CSS','DOM'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k={init:function(l){j=l;},showWarning:function(l){if(j){h.show(j);i.setContent(j,l);}}};f.exports=k;},null);
__d('EntstreamStoryDeduper',['DOM','csx','CSS'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n){var o={};for(var p=0;p<m.length;p++){var q=m[p],r=q.getAttribute('data-dedupekey');if(o[r]){if(n){j.hide(q);}else h.remove(q);}else o[r]=1;}}var l={dedupe:function(m,n){n=n||"._5jmm";var o=h.scry(m,n);o=o.filter(function(p){return p.getAttribute('data-dedupekey');});k(o,false);},dedupeHide:function(m,n){n=n||"._5jmm";var o=h.scry(m,n),p=o.filter(function(q){return q.getAttribute('data-dedupekey')&&j.shown(q);});k(p,true);}};f.exports=l;},null);
__d('AttachmentRelatedShareConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={ARTICLE_CLICK:'article_click',VIDEO_CLICK:'video_click',FBVIDEO_CLICK:'fbvideo_click',GAME_CLICK:'game_click',EVENT_DELAY:1000,HIDE_DELAY:100,PHOTO_CLICK:'photo_click',EVENT_JOIN:'event_join'};f.exports=h;},null);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_photo_pivots_chaining\/events\/",{});},null);
__d('EntstreamAttachmentRelatedShare',['Arbiter','AsyncRequest','AttachmentRelatedShareConstants','csx','cx','CSS','DOM','Event','ge','tidyEvent','XPubcontentInlinePhotoPivotsEventsController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=2,t=3,u={loadRelatedAttachment:function(v,w,x){var y=null;if(typeof v==="string"){y=p(v);}else y=v;if(!y)return;var z=o.listen(y,'click',function(){z.remove();h.inform(j.ARTICLE_CLICK,{attachment:y,global_share_id:w,is_right_click:false,share_id:x});}),aa=o.listen(y,'mousedown',function(event){if(event.which===t||event.button===s){aa.remove();h.inform(j.ARTICLE_CLICK,{attachment:y,global_share_id:w,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(v,w){var x=p(v);if(!x)return;var y=o.listen(x,'click',function(){y.remove();h.inform(j.PHOTO_CLICK,{attachment:x,storyid:w});});},loadRelatedGameAttachment:function(v,w){var x=null;if(typeof v==="string"){x=p(v);}else x=v;if(!x)return;q(o.listen(x,'click',function(){h.inform(j.GAME_CLICK,{attachment:x,global_share_id:w});}));q(o.listen(x,'mousedown',function(event){if(event.which===t||event.button===s)h.inform(j.GAME_CLICK,{attachment:x,global_share_id:w});}));},loadRelatedLSCVideoAttachment:function(v,w){var x=null;if(typeof v==='string'){x=p(v);}else x=v;if(!x)return;var y="^div._4-u2",z=n.scry(x,y),aa=o.listen(x,'click',function(){aa.remove();h.inform(j.VIDEO_CLICK,{attachment:x,global_share_id:w});});},loadRelatedLSCInlineVideoAttachment:function(v,w){var x=null;if(typeof v==='string'){x=p(v);}else x=v;if(!x)return;o.listen(x,'click',function(){var y="^div._4-u2",z="_1d8v",aa=n.scry(x,y),ba=aa.length===1?aa[0]:null,ca=ba.parentNode,da=ca.previousSibling;while(!da){ca=ca.parentNode;da=ca.previousSibling;}if(!m.hasClass(da,z)){var ea=n.create('div',{className:z}),fa=n.insertBefore(ba.parentNode,ea),ga=fa.length>=1?fa[0]:null;}else ga=da;var ha=n.getID(ga);new i().setURI('/ajax/flash/expand_inline.php').setData({share_id:w,target_div:ha,max_width:470,max_height:264,replace_target_div:true}).setMethod('GET').setReadOnly(true).setRelativeTo(x.parentNode).send();});},loadRelatedEventsPivotAttachment:function(v,w){var x=null;if(typeof v==="string"){x=p(v);}else x=v;if(!x)return;q(o.listen(x,'click',function(){h.inform(j.EVENT_JOIN,{attachment:x,event_id:w});}));},closeButton:function(v,w){o.listen(v,'click',function(){n.remove(w);});},closeButtonPhotoPivots:function(v,w,x,y){o.listen(v,'click',function(){var z=r.getURIBuilder(),aa={story_id:x,search_query_type:y,event:'hide'};new i().setMethod('POST').setURI(z.getURI()).setData(aa).send();n.remove(w);});},seeAllLinkPhotoPivots:function(v,w,x){o.listen(v,'click',function(){var y=r.getURIBuilder(),z={story_id:w,search_query_type:x,event:'see_all'};new i().setMethod('POST').setURI(y.getURI()).setData(z).send();});},removeOldSuggestions:function(v){var w=p(v);if(!w)return;var x=n.scry(w.parentNode,"._5d73");for(var y=1;y<x.length;y++)n.remove(x[y]);setTimeout(function(){m.show(x[0]);},1000);},showHiddenSuggestions:function(v){var w=o.listen(v,'click',function(){w.remove();var x="^._1ui8",y=n.scry(v,x);if(!y)return;m.hide(y[0]);var z=y[0].previousSibling;while(z){m.show(z);z=z.previousSibling;}});}};f.exports=u;},null);
__d('AccessibilityLogger',['AsyncSignal','Cookie'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={COOKIE:'a11y',DECAY_MS:6*60*60*1000,DEFAULT:{sr:0,'sr-ts':Date.now(),jk:0,'jk-ts':Date.now(),kb:0,'kb-ts':Date.now(),hcm:0,'hcm-ts':Date.now()},getCookie:function(){var k=j.DEFAULT,l=i.get(j.COOKIE);if(l){l=JSON.parse(l);for(var m in k)if(m in l)k[m]=l[m];}return k;},logKey:function(k,l){var m=j.getCookie();m[k]++;var n=Date.now();if(n-m[k+'-ts']>j.DECAY_MS){new h('/ajax/accessibilitylogging',{eventName:l,times_pressed:m[k]}).send();m[k+'-ts']=n;m[k]=0;}i.set(j.COOKIE,JSON.stringify(m));},logHCM:function(){j.logKey('hcm','hcm_users');},logSRKey:function(){j.logKey('sr','sr_users');},logJKKey:function(){j.logKey('jk','jk_users');},logFocusIn:function(){j.logKey('kb','kb_users');}};f.exports=j;},null);
__d('KeyboardShortcuts',['KeyEventController','Layer','ModalLayer'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n,o){'use strict';this.key=m;this.handler=n;this.filter=o;this.register();}k.prototype.register=function(){'use strict';this.token=h.registerKey(this.key,this.handler,this.filter);};k.prototype.remove=function(){'use strict';this.token.remove();};var l={_tokens:[[]],register:function(m,n,o){o=o||{};var p=o.allowDefault?n:function(event,t){n.apply(this,arguments);event.prevent();},q=o.baseFilters||[h.defaultFilter],r=function(event,t){for(var u=0,v=q.length;u<v;u++)if(!q[u](event,t))return false;return !o.filter||o.filter(event,t);},s=new k(m,p,r);this._tokens[this._tokens.length-1].push(s);return s;},init:function(){i.subscribe('show',(function(m,n){if(n.hasBehavior(j))this.pushLayer();}).bind(this));i.subscribe('hide',(function(m,n){if(n.hasBehavior(j))this.popLayer();}).bind(this));},pushLayer:function(){var m=this._tokens[this._tokens.length-1];m&&m.forEach(function(n){n.remove();});this._tokens.push([]);},popLayer:function(){var m=this._tokens.length-1;if(m<0)return;var n=this._tokens[m];n.forEach(function(p){p.remove();});this._tokens.pop();var o=this._tokens[m-1];o&&o.forEach(function(p){p.register();});}};l.init();f.exports=l;},null);
__d('LikeConfirmer',['AsyncDialog','AsyncRequest'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=false,k=false,l={likeContent:function(){},like:function(m,n){this.likeContent=m;if(k)return;if(j){this.likeContent();}else{var o=new i().setURI('/like/confirm_like.php').setRelativeTo(n);h.send(o,(function(p){k=true;p.subscribe('hide',this.onCloseLikeConfirmDialog.bind(this));p.setCausalElement(n);}).bind(this));}return false;},isShowingConfirmation:function(){return k;},onCloseLikeConfirmDialog:function(){k=false;},likeSkipConfirmation:function(m){j=m;this.likeContent();}};f.exports=l;},null);
__d('FeedBaseKeyboardController',['AccessibilityLogger','Arbiter','AsyncDialog','AsyncRequest','Banzai','BanzaiODS','BanzaiNectar','CSS','DOM','DOMScroll','Event','Focus','KeyboardShortcuts','LikeConfirmer','NavigationMessage','Parent','ReactComposerEvents','ReactComposerIDGenerator','Run','Scroll','SubscriptionsHandler','UITinyViewportAction','Vector','ViewportBounds','csx','emptyFunction','ge','getActiveElement','isAsyncScrollQuery','isElementNode','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){if(c.__markCompiled)c.__markCompiled();var ma=0;function na(){var pa=ha('pagelet_bluebar');ma=!ca.isTiny()&&pa?pa.offsetTop+pa.offsetHeight:0;}function oa(pa){'use strict';this.root=pa;this.init();}oa.prototype.getStories=function(){'use strict';};oa.prototype.getParentStory=function(pa){'use strict';};oa.prototype.isStory=function(pa){'use strict';};oa.prototype.isHoldoutStory=function(pa){'use strict';};oa.prototype.getHeadline=function(pa){'use strict';};oa.prototype.getPreviousStory=function(pa){'use strict';};oa.prototype.getNextStory=function(pa){'use strict';};oa.prototype.setSelected=function(pa,qa){'use strict';};oa.prototype.clickLike=function(){'use strict';};oa.prototype.clickComment=function(){'use strict';};oa.prototype.clickShare=function(){'use strict';};oa.prototype.clickSeeMore=function(){'use strict';};oa.prototype.clickLeft=function(){'use strict';};oa.prototype.clickRight=function(){'use strict';};oa.prototype.openAttachment=function(){'use strict';};oa.prototype.focusComposer=function(){'use strict';var pa=ha('pagelet_composer');if(!pa)pa=ha('pagelet_group_composer');if(pa){var qa=p.scry(pa,'textarea')[0];if(qa){s.set(qa);q.scrollToTop(true);}else{var ra=p.scry(pa,"div._36bx")[0],sa=ra&&ra.id;if(y.isComposerID(sa)){i.inform(x.ACTIVATE_ATTACHMENT+ra.id);q.scrollToTop(true);}}}};oa.prototype.getScrollOffset=function(){'use strict';return 10;};oa.prototype.getAnimationLength=function(pa){'use strict';return Math.min(Math.abs(da.getElementPosition(pa).y-ea.getTop()-aa.getTop(document.body)),400);};oa.prototype.findTop=function(){'use strict';var pa=this.getStories();for(var qa=0;qa<pa.length;qa++)if(da.getElementPosition(pa[qa]).y>da.getScrollPosition().y)return pa[qa];};oa.prototype.onLeave=function(){'use strict';this.subscriptions&&this.subscriptions.release();};oa.prototype.getHelpDialogRequest=function(){'use strict';if(!this.dialogRequest){this.dialogRequest=new k('/ajax/keyboard_shortcuts');this.dialogRequest.setReadOnly(true);}else if(this.dialogRequest.transport)return null;return this.dialogRequest;};oa.prototype.init=function(){'use strict';z.onLeave(this.onLeave.bind(this));this.subscriptions=new ba();this.subscriptions.addSubscriptions(i.subscribe(v.NAVIGATION_BEGIN,this.onLeave.bind(this)),t.register('j',this.vert.bind(this,1)),t.register('k',this.vert.bind(this,-1)),t.register('l',(function(){var pa=this.getParentStory(ia());u.like((function(){this.setSelected(pa,false);this.clickLike();}).bind(this),ia());}).bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('c',this.clickComment.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('o',this.openAttachment.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('p',this.focusComposer.bind(this)),t.register('s',this.clickShare.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('SLASH',(function(){var pa=this.getHelpDialogRequest();if(pa){pa.setRelativeTo(ia());j.send(pa);}}).bind(this),{filter:function(event,pa){return event.getModifiers().shift;}}),t.register('RETURN',this.clickSeeMore.bind(this),{filter:this.hasExpandableStoryInFocus.bind(this)}),t.register('LEFT',this.clickLeft.bind(this),{filter:this.hasActiveStory.bind(this)}),t.register('RIGHT',this.clickRight.bind(this),{filter:this.hasActiveStory.bind(this)}),r.listen(this.root,'focusin',(function(event){var pa=event.getTarget();if(!this.isStory(pa)){var qa=p.isNodeOfType(pa,['object','embed','iframe']),ra=this.getParentStory(pa),sa=this.selected;if(ra&&!qa&&sa){this.setSelected(ra,true);this.selected=ra;}}}).bind(this)));};oa.prototype.hasActiveStory=function(event,pa){'use strict';var qa=ia();return !(qa&&o.shown(qa))||!!this.getParentStory(qa);};oa.prototype.hasExpandableStoryInFocus=function(event,pa){'use strict';var qa=ia();return !!(qa.getElementsByClassName('text_exposed_root').length&&!qa.getElementsByClassName('text_exposed_root text_exposed').length);};oa.prototype.clickElement=function(pa,qa){'use strict';if(!pa)return;var ra;for(var sa=1,ta=arguments.length;sa<ta;sa++){ra=p.scry(pa,arguments[sa])[0];if(ra&&o.shown(ra)){ra.click();return;}}};oa.prototype.click=function(pa){'use strict';this.clickElement(this.selected,pa);};oa.prototype.$FeedBaseKeyboardController1=function(){'use strict';if(!this.$FeedBaseKeyboardController2){this.subscriptions.addSubscriptions(r.listen(document,'scroll',(function(){if(this.selected&&!this.scrolling)this.setSelected(null,false);}).bind(this)));this.$FeedBaseKeyboardController2=true;}};oa.prototype.$FeedBaseKeyboardController3=function(){'use strict';if(!this.$FeedBaseKeyboardController4){na();this.subscriptions.addSubscriptions(r.listen(window,'resize',la(na)));this.$FeedBaseKeyboardController4=true;}};oa.prototype.vert=function(pa){'use strict';this.$FeedBaseKeyboardController1();var qa,ra;if(this.selected){if(l.isEnabled('kbshortcuts_feed')){ra=pa>0?'kbshortcuts.scroll_down':'kbshortcuts.scroll_up';m.bumpEntityKey('kbshortcuts_feed',ra);n.log('feed_scroll',ra,{});}h.logJKKey();if(this.selected.id=='pagelet_composer'){qa=pa>0?this.getStories()[0]:null;if(this.isHoldoutStory(qa))qa=this.getPreviousStory(qa);}else if(pa===0){qa=this.selected;}else qa=pa>0?this.getNextStory(this.selected):this.getPreviousStory(this.selected)||ha('pagelet_composer');if(!qa){return;}else if(!ka(qa)){o.removeClass(this.selected,'selectedStorySimple');this.selected=qa;return this.vert(pa);}}if(!qa||w.byClass(qa,'hidden_elem')||!p.contains(document,qa)){qa=this.findTop();if(qa&&pa<0)qa=this.getPreviousStory(qa);if(this.isHoldoutStory(qa))qa=this.getPreviousStory(qa);}if(!qa)return;this.anim&&this.anim.stop();var sa=Date.now()-(this.lastScroll||0)>30,ta=ga;if(pa!==0)ta=this.setFocused.bind(this,qa);if(ja()){sa=false;ta();ta=ga;}this.scrolling=true;this.scrollingTimer&&clearTimeout(this.scrollingTimer);this.$FeedBaseKeyboardController3();this.anim=q.scrollTo(qa,sa?this.getAnimationLength(qa):0,false,da.getViewportDimensions().y-ma-this.getScrollOffset(),0,(function(){this.scrollingTimer=setTimeout((function(){this.scrolling=false;}).bind(this),300);var ua=da.getScrollPosition();ta();if(ua.distanceTo(da.getScrollPosition())!==0)q.scrollTo(ua,0);}).bind(this));this.setSelected(qa,true);this.lastScroll=Date.now();};oa.prototype.setTabindexOnStory=function(pa,qa){'use strict';if(this.isStory(pa))pa.tabIndex=qa;};oa.prototype.setFocused=function(pa){'use strict';if(this.isStory(pa))s.setWithoutOutline(pa);};f.exports=oa;},null);
__d('FeedLiveUpdateBar',['ArbiterMixin','Animation','BanzaiScuba','CurrentUser','DOM','DOMScroll','Ease','Event','Vector','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=300,s=false;function t(v){this.element=v;this.init();}function u(v){new j('feed_newstoriescard').addNormal('user_id',k.getID()).addNormal('event',v).addInteger('time',Math.round(Date.now()/1000)).addInteger('bar_at_top',1).post();}Object.assign(t.prototype,h,{init:function(){if(!this.element)return;var v=l.find(this.element,"._2f6b");o.listen(v,'click',this._handleClick.bind(this));},_handleClick:function(event){if(s)u('click');this.hide();var v=new p(p.getScrollPosition().x,0,'document');m.scrollTo(v,r,false,false,0,(function(){m.scrollTo(v,0);this.inform('click');}).bind(this));event.kill();},setAtTop:function(){s=true;},hide:function(){s=false;new i(this.element).from('top',42).to('top',-50).ease(n.sineOut()).duration(250).hide().go();},show:function(){if(!this.element)return;new i(this.element).from('top',-50).to('top',42).ease(n.makePowerOut(3)).duration(400).show().go();if(s)u('render');}});f.exports=t;},null);
__d('FeedTrackingAsync',['Arbiter','collectDataAttributes'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(){h.subscribe('AsyncRequest/send',function(k,l){var m=l.request,n=m.getRelativeTo();if(n){var o=m.getData(),p=i(n,['ft']);if(Object.keys(p.ft).length)Object.assign(o,p);}});}f.exports={init:j};},null);
__d('FacebarResultStoreUtils',['FacebarGlobalOptions','FacebarJSConstants'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={getQueryFeatures:function(k){var l={};if(h.enableBootstrapRanking){if(k.raw_text)l.FEATURE_QUERY_LENGTH=k.raw_text.length;if(k.tokens){l.FEATURE_QUERY_TOKENS=k.tokens.length;l.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var m=0;m<k.tokens.length;m++)l.FEATURE_QUERY_TOKEN_LENGTH_SUM+=k.tokens[m].length;}}return l;},addFeatures:function(k,l,m,n,o,p){if(!k.features)return;k.features={FEATURE_QUERY_LENGTH:n.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:n.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:n.FEATURE_QUERY_TOKEN_LENGTH_SUM};k.features.FEATURE_IS_EXACT_NAME_MATCH=o;k.features.FEATURE_IS_STOP_WORD_MATCH=p;if(l&&l.length>0){var q=l.split(' ').length,r=0;for(var s=0;s<k.termMatches.length;++s)if(l.search(k.termMatches[s])>=0)r++;k.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=r/q;}if(m.tokens&&m.tokens.length>0){var t=l.search(m.tokens[0]);k.features.FEATURE_FIRST_TERM_MATCH_POSITION=t;k.features.FEATURE_FIRST_TERM_MATCH_TOKEN=l.substring(0,t+m.tokens[0].length).split(' ').length;k.termMatches.some(function(u){if(u.search(m.tokens[0])===0){k.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=m.tokens[0].length/u.length;return true;}return false;});k.features.FEATURE_IN_ORDER_MATCH=1;if(m.tokens.length>1){t=l.search(m.tokens[1]);k.features.FEATURE_SECOND_TERM_MATCH_POSITION=t;k.features.FEATURE_SECOND_TERM_MATCH_TOKEN=l.substring(0,t+m.tokens[1].length).split(' ').length;k.termMatches.some(function(u){if(u.search(m.tokens[1])===0){k.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=m.tokens[0].length/u.length;return true;}return false;});if(k.features.FEATURE_SECOND_TERM_MATCH_TOKEN<k.features.FEATURE_FIRST_TERM_MATCH_POSITION)k.features.FEATURE_IN_ORDER_MATCH=0;}}return k;},processEntityResult:function(k,l,m,n,o,p,q,r,s){var t={semantic:l.toString(),structure:[{type:k===i.keywordType?k:'ent:'+k,text:m,uid:l}],type:k,cost:n,cache_id_length:0,features:[]};t.tuid=JSON.stringify({semantic:t.semantic,structure:t.structure});if(h.enableBootstrapRanking){t.termMatches=q[l.toString()];t=this.addFeatures(t,m.toLowerCase(),o,p,r,s);}return t;},getRawTextFromStructured:function(k){var l=k.map(function(m){return m.getText();});return l.join('');},getTextFromResult:function(k){var l=k.structure,m='';l.forEach(function(n){m+=n.text;});return m;}};f.exports=j;},null);
__d('HashtagSearchResultUtils',['FacebarResultStoreUtils','HashtagParser','HashtagSearchResultConfig','URI','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={getHashtagFromQuery:function(n){var o=i.parse(n);if(o&&o.length===1&&o[0].offset===0)return o[0].tag;return false;},makeTypeaheadResult:function(n){var o=l._("Hashtag");return {category:o,path:new k('/hashtag/'+n).toString(),photo:j.image_url,rankType:null,replace_results:j.boost_result?true:false,scaled_score:1,score:0,text:'#'+n,type:'hashtag_exact',uid:'hashtag:'+n};},makeFacebarEntry:function(n){var o=l._("Hashtag");return {category:o,path:new k('/hashtag/'+n).toString(),photo:j.image_url,replace_results:j.boost_result?true:false,text:'#'+n,type:'hashtag_exact',uid:'hashtag:'+n};},makeFacebarResult:function(n){var o=h.processEntityResult('hashtag_exact','hashtag:'+n,'#'+n,j.hashtag_cost);o.parse={display:[{type:'ent:hashtag_exact',uid:'hashtag:'+n}],remTokens:[],suffix:''};o.tags={hashtag:'hashtag'};return o;}};f.exports=m;},null);
__d('ContextualHelpSearchController',['Event','AsyncRequest','DOM','CSS','Focus','Input'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=400;function o(){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;}Object.assign(o.prototype,{init:function(p,q,r,s,t,u){this.loader=p;this.search_box=q;this.topics_area=r;this.results_area=s;this.clear_button=t;this.typing_listener=h.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=h.listen(this.clear_button,'click',this.clearResults.bind(this));if(u==null||u.focusSearchBox==null||u.focusSearchBox)l.set(this.search_box);},source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';m.reset(this.search_box);l.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}k.addClass(this.clear_button,'hidden_elem');},update:function(){var p=m.getValue(this.search_box);if(p===this._lastQuery)return;this._lastQuery=p;if(p===''){this.clearResults();return;}this.show(this.loader);var q={query:p,width:this._width||n,source:this.source};this.async_request=new i('/help/ajax/search/').setData(q).setHandler((function(r){this._update(r);}).bind(this));this.async_request.send();},_update:function(p){this.async_request=null;var q=p.getPayload().results;j.setContent(this.results_area,q);this.show(this.results_area);if(m.getValue(this.search_box)===''){this.clearResults();}else k.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(p){var q=[this.loader,this.topics_area,this.results_area];for(var r=0;r<q.length;r++)k.addClass(q[r],'hidden_elem');k.removeClass(p,'hidden_elem');}});f.exports=o;},null);
__d('BookmarkFeedSorter',['Run'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j={init:function(k){i=k;h.onLeave(function(){i=null;});},setChecked:function(k){if(i)i.setValue(k);}};f.exports=j;},null);
__d('RequestsJewel',['Animation','AccessibilityLogger','Arbiter','AsyncRequest','AsyncSignal','ChannelConstants','CSS','DOM','Event','LinkController','Parent','ScrollableArea','Vector','$','debounce','ge','shield','fbt','JewelQPLogging','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba=null;aa('FriendBrowserCheckboxController',function(ga){return ba=ga;});var ca=530,da=30,ea=160;Object.assign(fa,{instance:null,getInstance:function(){return fa.instance;},replaceJewelTitle:function(ga,ha){o.setContent(u(ga),ha);},updateFromDOM:function(){if(fa.instance)fa.instance.fromDom();},setInitialHeight:function(){if(fa.instance)fa.instance.setHeight();},maybeLoadJewel:function(){if(fa.instance)fa.instance.maybeLoadJewel();}});function fa(ga,ha,ia){'use strict';var ja=ha;if(typeof ha!=='string'){ja=ha.inbox_folder;ia=ha.do_new_mark_read;}fa.instance=this;this.countNew=0;this.jewel=ga;this.jewelFlyoutCase=ga.getRoot();this.jewelFlyout=w('fbRequestsFlyout');this.newCountSpan=w('newRequestCount');this.folder=ja;this.doNewMarkRead=ia;this.openTimestamp=0;this.$RequestsJewel1={};this.$RequestsJewel2=0;this.shouldClearPredictionAssocOnClick=false;var ka=w('requestsMarkReadButton');if(ka)p.listen(ka,'click',x(this.$RequestsJewel3,this));this.jewel.subscribe('marked-seen',x(this.$RequestsJewel4,this));this.jewel.subscribe('closed',x(this.$RequestsJewel5,this));this.jewel.subscribe('updated',this.$RequestsJewel6.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel7.bind(this));q.registerHandler(this.$RequestsJewel8.bind(this));j.subscribe(m.getArbiterType('jewel_requests_add'),this.$RequestsJewel9.bind(this));j.subscribe(m.getArbiterType('jewel_friending_notifs'),this.$RequestsJewel10.bind(this));j.subscribe(m.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewel11.bind(this));j.subscribe(m.getArbiterType('friend_requests_seen'),this.$RequestsJewel12.bind(this));p.listen(this.jewelFlyout,'submit',(function(ma){var na=r.byClass(ma.getTarget(),'objectListItem');if(na){n.removeClass(na,'jewelItemNew');n.addClass(na,'jewelItemResponded');}}).bind(this));var la=o.find(w('fbRequestsJewel'),'a[rel="toggle"]');p.listen(la,'focus',(function(ma){i.logFocusIn();}).bind(this));this.setupScroll();p.listen(window,'resize',v((function(){this.$RequestsJewel13();}).bind(this)));}fa.prototype.setupScroll=function(){'use strict';var ga=o.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(ga){this.$RequestsJewel14=ga;this.$RequestsJewel15=0;this.$RequestsJewel16=p.listen(ga,'scroll',this.$RequestsJewel17.bind(this),p.Priority.$RequestsJewel18);}};fa.prototype.fromDom=function(){'use strict';o.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach((function(ga){var ha=ga.getAttribute('id');if(ha){var ia=w(ha+'_status'),ja=this.$RequestsJewel19(ha);if(ja.requester)this.$RequestsJewel1[ja.requester]=ha;++this.$RequestsJewel2;}}).bind(this));this.$RequestsJewel20();};fa.prototype.$RequestsJewel21=function(ga){'use strict';var ha=ga.match(/^(\d+)_(\d+)/);return ha?{requester:ha[1],type:ha[2]}:undefined;};fa.prototype.$RequestsJewel19=function(ga){'use strict';var ha=ga?this.$RequestsJewel21(ga):undefined,ia;if(ha&&ha.requester){ia=parseInt(ha.requester,10);if(isNaN(ia))ia=undefined;}var ja;if(ha&&ha.type){ja=parseInt(ha.type,10);if(isNaN(ja))ja=undefined;}return {requester:ia,type:ja};};fa.prototype.$RequestsJewel22=function(){'use strict';if(this.countNew>0)this.countNew-=1;};fa.prototype.$RequestsJewel8=function(ga,event){'use strict';var ha=r.byClass(ga,'jewelItemNew');if(ha&&r.byClass(ha,'fbRequestList')&&r.byClass(ha,'beeperEnabled')){var ia=this.$RequestsJewel21(ha.id);ia&&this.$RequestsJewel4(ia.requester,ia.type);this.$RequestsJewel22();j.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});n.removeClass(ha,'jewelItemNew');}return true;};fa.prototype.$RequestsJewel23=function(){'use strict';return o.scry(this.jewelFlyout,'.uiScrollableArea')[0];};fa.prototype.$RequestsJewel17=function(){'use strict';var ga=o.scry(this.$RequestsJewel14,'.uiMorePager');if(!ga)return;var ha=ga.pop();if(ha){var ia=t.getElementPosition(ha,'viewport').y;if(ia>0)n.addClass(r.byClass(this.$RequestsJewel14,'uiScrollableArea'),'contentAfter');var ja=o.find(ha,'a');if(!ja)return;var ka=t.getElementPosition(ja,'viewport').y;if(ka==this.$RequestsJewel15)return;var la=t.getElementPosition(this.$RequestsJewel14,'viewport').y+t.getElementDimensions(this.$RequestsJewel14).y;if(ka-300<la&&ka>0){this.$RequestsJewel15=ka;var ma=ja.getAttribute('ajaxify');if(ma){new k(ma).setRelativeTo(ja).setStatusElement(r.byClass(ja,'stat_elem')).send();}else ba&&ba.getInstance('jewel').showMore();}}};fa.prototype.$RequestsJewel10=function(ga,ha){'use strict';if(!ha||this.jewel.isOpen())return;if(ha.obj.notif_type!=='friend_confirmed')return;if(w('fbRequestsJewelLoading')){new k().setURI('/ajax/requests/loader/').send();return;}var ia={};ia.reloadcontent=true;new k().setURI('/ajax/requests/loader/').setData(ia).send();};fa.prototype.$RequestsJewel9=function(ga,ha){'use strict';if(!ha)return;var ia=ha.obj.from,ja=ha.obj.suggester,ka=this.$RequestsJewel19(this.$RequestsJewel1[ia]).type,la=ka===19&&!ja;if(!la&&(ka||this.jewel.isOpen()))return;if(w('fbRequestsJewelLoading')){new k().setURI('/ajax/requests/loader/').send();}else{var ma={};ma.reloadcontent=true;new k().setURI('/ajax/requests/loader/').setData(ma).send();}};fa.prototype.$RequestsJewel11=function(ga,ha){'use strict';if(!ha||this.jewel.isOpen()||w('fbRequestsJewelLoading')!==null)return;var ia=this.$RequestsJewel1[ha.obj.from],ja=ia&&w(ia);if(ja){if(n.hasClass(ja,'jewelItemNew')){this.$RequestsJewel22();j.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!n.hasClass(ja,'jewelItemResponded')){o.remove(ja);delete this.$RequestsJewel1[ha.obj.from];--this.$RequestsJewel2;this.$RequestsJewel20();}}};fa.prototype.$RequestsJewel3=function(){'use strict';this.jewel.markSeen();this.$RequestsJewel24();};fa.prototype.$RequestsJewel4=function(ga,ha){'use strict';var ia=o.scry(this.jewelFlyout,'li');new l('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ia[0].id}).send();var ja=typeof ga!='undefined'&&typeof ha!='undefined'?{requester:ga,type:ha}:{};this.doNewMarkRead&&new l('/ajax/requests/mark_read/',ja).send();};fa.prototype.$RequestsJewel12=function(ga,ha){'use strict';j.inform('jewel/count-updated',{jewel:'requests',count:0});};fa.prototype.$RequestsJewel24=function(ga,ha){'use strict';o.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ia){n.removeClass(ia,'jewelItemNew');});};fa.prototype.$RequestsJewel6=function(ga,ha){'use strict';this.countNew=ha.count;n.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);n.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ia=this.countNew==1?y._("{num} NEW REQUEST",[y.param('num',this.countNew)]):y._({"*":"{num} NEW REQUESTS"},[y.param('num',this.countNew,[0])]);o.setContent(this.newCountSpan,ia);}};fa.prototype.$RequestsJewel20=function(){'use strict';o.scry(this.jewelFlyout,'li.empty').forEach((function(ga){n.conditionShow(ga,this.$RequestsJewel2<=0);}).bind(this));};fa.prototype.$RequestsJewel7=function(){'use strict';j.inform('requestsJewel/opened');var ga=w('fbRequestsJewelLoading'),ha=this.$RequestsJewel23();if(!ga&&!ha){this.unhandledRequest=true;}else if(ga){var ia=Date.now();if(this.openTimestamp+5000<ia){this.openTimestamp=ia;new k().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ja=Object.keys(this.$RequestsJewel1);if(ja.length>0)new k().setURI('/friends/requests/log_impressions').setData({ids:ja.join(','),ref:'jewel'}).send();}ha&&s.poke(ha);z.onJewelOpened();};fa.prototype.$RequestsJewel5=function(){'use strict';j.inform('requestsJewel/closed');this.$RequestsJewel24();};fa.prototype.$RequestsJewel25=function(){'use strict';return Math.min(Math.max(t.getViewportDimensions().y-ea,da),ca);};fa.prototype.$RequestsJewel13=function(){'use strict';if(this.$RequestsJewel23())new h(this.$RequestsJewel23()).to('height',this.$RequestsJewel25()+'px').duration(100).go();};fa.prototype.setHeight=function(){'use strict';this.$RequestsJewel23().style.height=this.$RequestsJewel25()+'px';};fa.prototype.maybeLoadJewel=function(){'use strict';if(this.unhandledRequest){this.unhandledRequest=false;this.$RequestsJewel7();}};f.exports=fa;},null);
__d('reportData',['Banzai','SessionName'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={retry:true};function k(l,m){m=m||{};var n={ft:m.ft||{},gt:m.gt||{}},o='-',p=[],q='r',r=[Date.now(),0,o,l,o,o,q,b.URI?b.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,n,0,0,0,0].concat(p),s=[i.getName(),Date.now(),'act'];h.post('eagle_eye_event',Array.prototype.concat(s,r),j);}f.exports=k;},null);
__d('JewelX',['Event','Arbiter','ArbiterMixin','CSS','DOM','HTML','Keys','Promise','TabIsolation','Toggler','Run','csx','emptyFunction','reportData'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=function(w,x){w&&x&&this.init(w,x);};Object.assign(v,{_instancesByName:{}});Object.assign(v.prototype,j,{init:function(w,x){this.name=x.name;this.root=w;this.badge=x.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.bootload_module=x.bootload_module;this.bootload_args=x.bootload_args;this.bootloading=null;this.togglerInstance=q.getInstance(w).setSticky(false);r.onAfterLoad((function(){return this._setupBootload();}).bind(this));if(x.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this._onPrePageTransition.bind(this));v._instancesByName[this.name]=this;var y=this.getFlyout(),z=new p(y);q.createInstance(y).setSticky(false);q.listen('show',this.root,(function(aa){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();i.inform('layer_shown',{type:'Jewel'});z.enable();this.setupEvents();return this._setupBootload().then((function(){this.inform('opened');}).bind(this));}).bind(this));q.listen('hide',this.root,(function(aa,ba){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');i.inform('layer_hidden',{type:'Jewel'});z.disable();this.removeEvents();}).bind(this));i.subscribe('jewel/count-updated',(function(aa,ba){ba.jewel==this.name&&this.update(ba);}).bind(this));i.subscribe('jewel/focus',(function(aa,ba){if(this.isOpen())q.hide(this.root);}).bind(this));},getRoot:function(){return this.root;},getFlyout:function(){if(typeof this._flyout==='undefined')this._flyout=l.find(this.root,".__tw");return this._flyout;},hasNew:function(){return k.hasClass(this.root,'hasNew');},isOpen:function(){return k.hasClass(this.root,'openToggler');},reset:function(){k.removeClass(this.root,'hasNew');},setContent:function(w){var x=l.find(this.root,'ul.jewelItemList');l.setContent(x,m(w));},update:function(w){this.countNew=w.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var x=isNaN(this.countNew)||this.countNew>0;k.conditionClass(this.root,'hasNew',x);this.inform('updated',w);},setupEvents:function(){this.escHandler=h.listen(document.documentElement,'keydown',(function(w){if(w.keyCode===n.ESC&&this.isOpen())q.hide(this.root);}).bind(this));},removeEvents:function(){if(this.escHandler){this.escHandler.remove();this.escHandler=null;}},markSeen:function(){i.inform('jewel/count-updated',{jewel:this.name,count:0},i.BEHAVIOR_STATE);this.inform('marked-seen');},_onPrePageTransition:function(w,x){if(!this._isSnowliftURI(x.from)&&!this._isSnowliftURI(x.to))this.togglerInstance&&this.togglerInstance.hide();},_isSnowliftURI:function(w){return w&&w.getQueryData().hasOwnProperty('theater');},_logFirstClick:function(){this._logFirstClick=t;u('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});},_setupBootload:function(){if(!this.bootload_module)return o.resolve();if(!this.bootloading)this.bootloading=new o((function(w,x){this.bootload_module.load().then((function(y){new y(this,this.bootload_args);w();}).bind(this))['catch'](x);}).bind(this));return this.bootloading;}});f.exports=v;},null);
__d('ModalMask',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null,j=0,k={show:function(){j++;if(!i){i=h.create('div',{id:'modalMaskOverlay'});h.appendContent(document.body,i);}},hide:function(){if(j){j--;if(!j&&i){h.remove(i);i=null;}}},getNode:function(){return i;}};f.exports=k;},null);
__d('LitestandChromeHomeCount',['Arbiter','AsyncRequest','DOM','Event','LitestandMessages','NavigationMessage','Parent','Style','UserAgent','WildWildWestJSGating','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t={},u,v,w=0;function x(){v&&clearTimeout(v);if(u)return;var da=q.badge_update_time;v=setTimeout(y,da);}function y(){if(u)return;new i().setURI('/ajax/litestand/newsfeed_count').setHandler(function(da){if(u)return;z(da.getPayload());x();}).setAllowCrossPageTransition(true).send();}function z(da){ba(u?0:da);if(q.show_badge_bk){h.inform(m.NAVIGATION_COUNT_UPDATE,{key:'nf',count:u?0:da-w});w=da;}}function aa(da){t.max=da.max;t.countNode=j.find(document,"div._uaw ._5ahz");t.wrapNode=t.countNode.parentNode;t.homeNode=n.byClass(t.wrapNode,"_1ayn");}function ba(da){o.set(t.wrapNode,'max-width',da===0?'0':null);var ea=da>t.max?t.max+'+':da;j.setContent(t.countNode,ea);}var ca={init:function(da){t=da;if(!da.countNode)aa(da);k.listen(t.homeNode,'click',function(event){var ea=event.getModifiers(),fa=ea.shift,ga=ea.meta,ha=ea.control;if(fa||p.isPlatform('Mac OS X')&&ga||p.isPlatform('Windows')&&ha)ba(0);});h.subscribe(l.NEWSFEED_LOAD,function(){u=true;z(0);});h.subscribe(l.LEAVE_HOME,function(){u=false;x();});x();}};f.exports=ca;},null);
__d('runAfterScrollingStops',['Arbiter','Event','Run','debounceAcrossTransitions','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(x,y,z){if(y&&p[y])return;if(!o){h.subscribe('page_transition',w);o=true;}if(!n){x();return;}y&&(p[y]=1);q.push(x);if(!z){if(s){j.onLeave(w);s=false;}r.push(q.length-1);}}var n,o,p={},q=[],r=[],s=true,t=500,u=k(function(){n=false;var x=q;q=[];r=[];p={};for(var y=0,z=x.length;y<z;++y)x[y]();},t);function v(){n=true;u();}function w(){var x=r;r=[];s=true;for(var y=0,z=x.length;y<z;++y)q[x[y]]=l;}i.listen(window,'scroll',v);f.exports=m;},null);
__d('LitestandOffscreenController',['Arbiter','CSS','DOMQuery','Event','NavigationMessage','Run','Scroll','Style','SubscriptionsHandler','Vector','cx','csx','getOrCreateDOMID','queryThenMutateDOM','runAfterScrollingStops','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=1,y=9,z=10,aa={},ba=false,ca,da,ea,fa,ga=[];function ha(){ca&&ca.release();ca=null;ba=false;}function ia(){aa={};ga=[];}function ja(){if(i.hasClass(document.body,"_5vb_"))return z;return y;}function ka(){fa=fa||q.getViewportDimensions().y;da=q.getScrollPosition().y;ea=da+fa;if(x){da-=fa*x;ea+=fa*x;}for(var sa in aa){var ta=aa[sa];ta.position=q.getElementPosition(ta.element).y;if(!ta.hidden)ta.height=ta.element.offsetHeight;}}function la(){var sa=[];for(var ta in aa){var ua=aa[ta],va=ua.position,wa=va+ua.height<da,xa=va>ea;if(!ua.hidden&&(wa||xa)){ma(ua);}else if(!wa&&!xa){ua.pendingHide=false;if(ua.hidden){if(ua.dirty&&va<da){sa.push(ta);i.addClass(na(ua),"_49nu");}else o.apply(ua.element,{height:'',marginBottom:''});i.show(na(ua));ua.dirty=false;ua.hidden=false;}}}if(!sa.length)return;var ya=0;u(function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];ya+=bb.height-na(bb).offsetHeight+o.getFloat(bb.element,'marginBottom');}},function(){for(var za=0,ab=sa.length;za<ab;za++){var bb=aa[sa[za]];i.removeClass(na(bb),"_49nu");o.apply(bb.element,{height:'',marginBottom:''});}ya&&n.setTop(document.body,n.getTop(document.body)-ya);});}function ma(sa){if(!sa.pendingHide){ga.push(sa);sa.pendingHide=true;}}function na(sa){if(sa.wrapperElement)return sa.wrapperElement;var ta=sa.element;if(ta.firstElementChild)return sa.wrapperElement=ta.firstElementChild;for(var ua=0;ua<ta.childNodes.length;ua++)if(ta.childNodes[ua].tagName)return sa.wrapperElement=ta.childNodes[ua];}function oa(){var sa=ja()+'px';for(var ta=0;ta<ga.length;ta++){var ua=ga[ta];if(j.scry(ua.element,"._52fb").length)ua.pendingHide=false;if(ua&&ua.element&&ua.pendingHide&&!ua.hidden){o.apply(ua.element,{height:ua.height+'px',marginBottom:sa});i.hide(na(ua));ua.hidden=true;ua.pendingHide=false;}}ga=[];}function pa(){v(oa,'LitestandOffscreenController/hide');u(ka,la,'LitestandOffscreenController');}function qa(){m.onLeave(ha);ca=new p();ca.addSubscriptions(h.subscribe(l.NAVIGATION_BEGIN,ia),k.listen(window,'scroll',w(pa)),k.listen(window,'resize',w(function(){fa=null;pa();})));ba=true;}var ra={attachSubstream:function(sa){ba||qa();aa[t(sa)]={element:sa};}};f.exports=ra;},null);
__d('LitestandNewStoryController',['Animation','Arbiter','AsyncRequest','CSS','Event','LitestandMessages','LitestandStream','LitestandStreamConfig','NavigationMessage','Run','Style','SubscriptionsHandler','UITinyViewportAction','ge','getScrollPosition','memoize','$','queryThenMutateDOM','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa=1,ba,ca,da=500,ea=600,fa,ga;function ha(){ga&&clearTimeout(ga);ga=null;}function ia(){ga=setTimeout(function(){ga=null;ja();},da);}function ja(){var cb;y(function(){cb=n.canInsertNewerStories();},function(){if(cb){za();}else ia();},'LitestandNewStoryController/tryShowingStories');}var ka=0,la=true,ma;function na(){if(!ma){ma=new s();ma.addSubscriptions(i.subscribe(p.NAVIGATION_BEGIN,wa),l.listen(window,'resize',oa),l.listen(window,'scroll',ta));q.onLeave(wa);}}function oa(){if(!qa())wa();}var pa=w(function(){var cb=u('blueBarNAXAnchor');return cb&&k.hasClass(cb,'fixed_elem');});function qa(){return pa()&&!t.isTiny();}function ra(cb,db){var eb=u(cb);if(eb)eb.style.marginTop=db?db+'px':'';}function sa(cb){if(!qa()){cb=0;}else cb=Math.max(cb,0);ka=cb;ra('leftCol',cb);ra('rightCol',cb);}function ta(){var cb=v(window).y;if(cb<=0){wa();return;}if(cb<ka){la=false;sa(cb);}if(ca&&cb>ca+50&&ba){ba.hide();ca=null;}ca=cb;}function ua(cb){if(!la)va(cb);}function va(cb){cb.animation.stop();r.set(cb.stories,'opacity',1);}function wa(){if(ma){ma&&ma.release();la=false;sa(0);ma=null;if(ba){ba.hide();ca=null;}}}function xa(cb,db){var eb=new h(cb).from('opacity',0).to('opacity',1).duration(ea),fb={animation:eb,stories:cb},gb=ea;if(db){la=true;var hb=ua.bind(null,fb);for(var ib=0;ib<aa;ib++){eb.checkpoint(1,hb).from('opacity',1).to('opacity',0).duration(ea).checkpoint().from('opacity',0).to('opacity',1).duration(ea);gb+=2*ea;}}eb.go();setTimeout(va.bind(null,fb),gb+200);}function ya(cb){ha();if(!fa)return;if(cb)var db=v(window),eb=fa.nextSibling,fb=eb.offsetTop,gb=function(){sa(db.y+eb.offsetTop-fb);window.scrollTo(db.x,ka);};r.apply(fa,{height:'',left:'',overflow:'',position:'',width:''});if(cb){gb();var hb=fa;z(function(){na();gb();xa(hb,!o.fade_in);if(ba){ba.setAtTop();ba.show();}});}else xa(fa,false);i.inform(m.STORIES_INSERTED);i.inform(m.NEWER_STORIES_INSERTED);setTimeout(function(){i.inform('reflow');},0);new j().setURI('/ajax/litestand/update_filter_viewtime').setData({section_id:n.getSectionID()}).send();fa=null;}function za(){ya(qa());}function ab(){ya(false);}var bb={waitForDisplay:function(cb){if(!fa)fa=x(cb);if(n.canInsertNewerStories()){za();}else ia();},showStoriesNow:function(cb){fa=cb;ab();},setNewStoryPill:function(cb){ba=cb;}};f.exports=bb;},null);
__d('OnVisible',['Arbiter','DOM','Event','Parent','Run','Vector','ViewportBounds','coalesce','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=[],r,s=0,t=[],u,v,w,x,y;function z(){q.forEach(function(fa){fa.remove();});if(v){v.remove();u.remove();r.unsubscribe();v=u=r=null;}s=0;q.length=0;}function aa(){if(!q.length){z();return;}t.length=0;w=m.getScrollPosition().y;x=m.getViewportDimensions().y;y=n.getTop();for(var fa=0;fa<q.length;++fa){var ga=q[fa];if(isNaN(ga.elementHeight))t.push(fa);ga.elementHeight=m.getElementDimensions(ga.element).y;ga.elementPos=m.getElementPosition(ga.element);ga.hidden=k.byClass(ga.element,'hidden_elem');if(ga.scrollArea){ga.scrollAreaHeight=m.getElementDimensions(ga.scrollArea).y;ga.scrollAreaY=m.getElementPosition(ga.scrollArea).y;}}s=fa;}function ba(){for(var fa=Math.min(q.length,s)-1;fa>=0;--fa){var ga=q[fa];if(!ga.elementPos||ga.removed){q.splice(fa,1);continue;}if(ga.hidden)continue;var ha=w+x+ga.buffer,ia=false;if(ha>ga.elementPos.y){var ja=w+y-ga.buffer,ka=w+y+x+ga.buffer,la=ga.elementPos.y+ga.elementHeight,ma=!ga.strict||ja<ga.elementPos.y&&ka>la;ia=ma;if(ia&&ga.scrollArea){var na=ga.scrollAreaY+ga.scrollAreaHeight+ga.buffer;ia=ga.elementPos.y>ga.scrollAreaY-ga.buffer&&ga.elementPos.y<na;}}if(ga.inverse?!ia:ia){ga.remove();ga.handler(t.indexOf(fa)!==-1);}}}function ca(){da();if(q.length)return;v=j.listen(window,'scroll',da);u=j.listen(window,'resize',da);r=h.subscribe('dom-scroll',da);}function da(){p(aa,ba,'OnVisible/positionCheck');}function ea(fa,ga,ha,ia,ja,ka){'use strict';this.element=fa;this.handler=ga;this.strict=ha;this.buffer=o(ia,300);this.inverse=o(ja,false);this.scrollArea=ka||null;if(this.scrollArea)this.scrollAreaListener=this.$OnVisible1();if(q.length===0)l.onLeave(z);ca();q.push(this);}ea.prototype.remove=function(){'use strict';if(this.removed)return;this.removed=true;if(this.scrollAreaListener)this.scrollAreaListener.remove();};ea.prototype.reset=function(){'use strict';this.elementHeight=null;this.removed=false;if(this.scrollArea)this.scrollAreaListener=this.$OnVisible1();q.indexOf(this)===-1&&q.push(this);ca();};ea.prototype.setBuffer=function(fa){'use strict';this.buffer=fa;da();};ea.prototype.checkBuffer=function(){'use strict';da();};ea.prototype.getElement=function(){'use strict';return this.element;};ea.prototype.$OnVisible1=function(){'use strict';return j.listen(i.find(this.scrollArea,'.uiScrollableAreaWrap'),'scroll',this.checkBuffer);};Object.assign(ea,{checkBuffer:da});f.exports=ea;},null);
__d('LitestandStreamLoader',['Arbiter','Bootloader','CSS','DOM','EntstreamStoryDeduper','Event','JSXDOM','LitestandMessages','LitestandOffscreenController','LitestandStoryInsertionStatus','LitestandStream','LitestandStreamConfig','NavigationMessage','OnVisible','ReloadPage','Run','URI','UserActivity','$','ge','getElementPosition','getUnboundedScrollPosition','getViewportDimensions','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){if(c.__markCompiled)c.__markCompiled();var fa=0,ga=false,ha={},ia,ja,ka,la,ma,na,oa=0,pa,qa,ra=[],sa=60000,ta=30,ua=200,va=0,wa,xa;function ya(){w.onLeave(za);fa=0;ra=[h.subscribe(t.NAVIGATION_BEGIN,za),h.subscribe(o.NEWER_STORIES_INSERTED,function(){xa=null;})];ra.push(h.subscribe('layer_shown',function(pb,qb){if(qb&&qb.type==='DialogX')fa++;}),h.subscribe('layer_hidden',function(pb,qb){if(qb&&qb.type==='DialogX')fa--;}));q.registerBlocker(function(){return fa>0;});ga=true;}function za(){h.inform(o.LEAVE_HOME);ha={};qa=null;oa=0;ra.forEach(h.unsubscribe);ra=[];ia&&ia.remove();ma&&clearTimeout(ma);ma=null;la=null;xa=null;pa&&pa.remove();pa=null;ga=false;va=0;}function ab(pb){ma&&clearTimeout(ma);ma=setTimeout(function(){ma=null;gb();},pb);}function bb(){if(qa&&la&&qa.pollIntervalMS&&qa.pollIntervalMS>1000){y.setIdleTime(qa.newStoryIdleTime);ab(qa.pollIntervalMS);}}function cb(){ia=new u(k.find(ja,'a'),nb.bind(null),false,qa.bufferPixels);}function db(){var pb=ca(window).y;return pb>qa.firstPagerScrollBuffer;}function eb(){if(db()){cb();pa&&pa.remove();pa=null;}}function fb(pb){var qb=k.find(ja,'a');m.listen(qb,'click',function(event){nb();pa&&pa.remove();pa=null;event.preventDefault();});var rb=ba(ja),sb=da();if(pb&&rb.y<sb.height){nb();}else if(pb&&!db()){pa=m.listen(window,'scroll',ea(eb));}else cb();}function gb(){if(!la)return;if(!y.isActive(qa.newStoryIdleTime)){y.subscribeOnce(gb);return;}if(y.hasBeenInactive()){y.resetActiveStatus();var pb=qa.pollIntervalMS,qb=Date.now()-y.getLastInActiveEnds();if(qb<pb){ab(pb-qb);return;}}if(!r.canInsertNewerStories()){ab(qa.pollIntervalMS);return;}hb(false);}function hb(pb){if(!la)return;ma&&clearTimeout(ma);if(!xa){var qb=r.getStreamRoot();xa=n.div({style:{height:0,width:qb.offsetWidth+'px',left:'-10000px',opacity:0,overflow:'hidden',position:'absolute'}});k.prependContent(qb,xa);h.inform(o.NEW_STORIES_CONTAINER_CREATED,xa);}var rb=n.div(null);k.prependContent(xa,rb);i.loadModules(["UIPagelet"],function(sb){sb.loadFromEndpoint('LitestandNewerStoriesPagelet',rb,Object.assign(la,{cursor:wa,containerID:k.getID(xa),fblogo:pb}),{crossPage:true});});}function ib(){var pb=k.getID(ja);j.addClass(ja,'async_saving');var qb=lb(),rb=qb.cursor,sb=qb.storiesCount;if(ha[rb])throw new Error('This cursor has been used before, stories will be '+'repeated. Cursor: '+rb);ha[rb]=rb;var tb={cursor:rb,pager_config:ka,pager_id:pb,scroll_count:++oa,feed_stream_id:r.getFeedStreamID(),client_stories_count:sb};i.loadModules(["UIPagelet"],function(ub){ub.loadFromEndpoint(qa.pagerController,k.getID(na),tb,{append:true,automatic:true,usePipe:true,crossPage:qa.crossPage,errorHandler:jb,transportErrorHandler:jb});});}function jb(pb){var qb=lb();delete ha[qb.cursor];j.removeClass(ja,'async_saving');}function kb(){var pb=mb();if(pb.length){return pb[0].getAttribute('data-cursor');}else return ja&&ja.getAttribute('data-cursor');}function lb(){var pb=mb(),qb={};if(pb.length){qb.cursor=pb[pb.length-1].getAttribute('data-cursor');qb.storiesCount=pb.length;}else{qb.cursor=ja&&ja.getAttribute('data-cursor');qb.storiesCount=0;}return qb;}function mb(){var pb=k.scry(na,r.getStoriesSelector());return pb.filter(function(qb){return qb.getAttribute('data-cursor');});}function nb(){ib();ia&&ia.remove();ia=null;}var ob={register:function(pb,qb,rb,sb){ga||ya();qa=babelHelpers._extends({bufferPixels:1000,firstPagerScrollBuffer:100,pagerController:'LitestandMoreStoriesPagelet',pollIntervalMS:null,newStoryIdleTime:60000},qb);ka=rb;na=z(pb);wa=kb();ja=sb;fb(true);bb();},removeOldPager:function(pb,qb){if(pb)k.remove(z(pb));j.show(z(qb));},removeLoadingIndicator:function(pb,qb){var rb=aa(pb);if(rb)k.remove(rb);j.show(qb);},moreStoriesInserted:function(pb){h.inform(o.STORIES_INSERTED,{substream_id:pb});var qb=z(pb);if(s.hide_offscreen_substreams)p.attachSubstream(qb);},attachNewPager:function(pb){l.dedupeHide(r.getStreamRoot(),r.getStoriesSelector());ja=pb;ja&&fb(false);},setPollerData:function(pb){if(pb){la=pb;bb();}},headLoadCompleted:function(pb){wa=pb.newCursor;bb();var qb=pb.stories;if(qb&&qb.length>0){for(var rb=qb.length-1;rb>=0;rb--)qb[rb].setAttribute('data-insertion-position',--va);var sb=r.getStoriesSelector();l.dedupe(r.getStreamRoot(),sb);var tb=k.scry(xa,sb);h.inform('Stream/totalHeadLoadedStories',{count:-va,hiddenCount:tb.length,fblogo:pb.fblogo});}},forceNewFetch:function(){hb(true);}};f.exports=ob;},null);
__d('ViewableImpressionTracking',['Arbiter','DesktopHscrollUnitEventConstants','ErrorUtils','LitestandMessages','Run','ViewableImpressionEventHandler','ViewableImpressionConfig'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o={init:function(){if(m.instance===undefined){m.instance=new m(n);m.instance.listeners.addSubscriptions(h.subscribe([k.STORIES_INSERTED,'AdsRefreshHandler/AdsLoaded','MPPInsights/ChartView','PhotoSnowliftAds/displayUnits','WebMessengerAdsControl/adjustAds',i.HSCROLL_ITEM_INSERTED_EVENT,'WebVideoChannelAds/AdsLoaded'],j.guard(function(){m.instance.refreshAndFireEvent();},'ViewableImpressionTracking')));}l.onLoad(function(){m.instance.refreshAndFireEvent();});}};f.exports=o;},null);
__d('MercuryJewelModuleLoader',['JSResource'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h('MercuryJewel');},null);
__d("RenderManager",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){"use strict";this._isDirty=false;this._obj=i;}h.prototype.dirty=function(){"use strict";if(!this._isDirty){this._isDirty=true;setTimeout(this._doPaint.bind(this),0);}};h.prototype._doPaint=function(){"use strict";this._isDirty=false;this._obj.paint();};f.exports=h;},null);
__d('CounterDisplay',['Arbiter','CSS','DOM','RenderManager','Run','$','removeFromArray'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();function o(p,q,r,s,t,u){Object.assign(this,{_name:p,_valueNode:m(q),_wrapperNode:m(r)||null,_statusClass:t,_rm:new k(this),_arbiterSubscription:null,_count:0});var v=this._valueNode.firstChild;if(v){var w=parseInt(v.nodeValue,10);if(!isNaN(w))this._count=w;}this._statusNode=s?m(s):null;this._subscribeAll();o.instances.push(this);if(!u)l.onLeave(this._destroy.bind(this),true);}Object.assign(o,{EVENT_TYPE_ADJUST:'CounterDisplay/adjust',EVENT_TYPE_UPDATE:'CounterDisplay/update',instances:[],adjustCount:function(p,q){h.inform(o.EVENT_TYPE_ADJUST+'/'+p,q);},setCount:function(p,q){h.inform(o.EVENT_TYPE_UPDATE+'/'+p,q);}});Object.assign(o.prototype,{_destroy:function(){delete this._valueNode;delete this._wrapperNode;if(this._arbiterSubscription){this._arbiterSubscription.unsubscribe();delete this._arbiterSubscription;}n(o.instances,this);},adjustCount:function(p){this._count=Math.max(0,this._count+p);this._rm.dirty();return this;},setCount:function(p){this._count=Math.max(0,p);this._rm.dirty();return this;},paint:function(){j.setContent(this._valueNode,this._count);this._toggleNodes();},_toggleNodes:function(){if(this._wrapperNode)i.conditionClass(this._wrapperNode,'hidden_elem',this._count<=0);if(this._statusClass&&this._statusNode)i.conditionClass(this._statusNode,this._statusClass,this._count>0);},_subscribeAll:function(){var p=[o.EVENT_TYPE_ADJUST+'/'+this._name,o.EVENT_TYPE_UPDATE+'/'+this._name];this._arbiterSubscription=h.subscribe(p,this._onInform.bind(this),h.SUBSCRIBE_NEW);},_onInform:function(p,q){q=parseInt(q);if(isNaN(q))return;if(p.indexOf(o.EVENT_TYPE_ADJUST)!=-1){this.adjustCount(q);}else if(p.indexOf(o.EVENT_TYPE_UPDATE)!=-1){this.setCount(q);}else return;return;}});f.exports=o;},null);
__d('MessagingEvents',['Arbiter','ChannelConstants','arrayContains','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={},m=new h();function n(o){if(!k(l))return;for(var p in o)m.inform('count/'+p,o[p]);}m.subscribe('mark-as-read',function(o,p){(p.tids||p.chat_ids||[]).forEach(function(q){q=''+q;if(!(q in l)){l[q]=true;var r=function(){m.unsubscribe(s);clearTimeout(t);delete l[q];},s=m.subscribe('read',function(u,v){if(j(v.tids||[],q)||j(v.chat_ids||[],q))r();}),t=setTimeout(r,60000);}});});h.subscribe(i.getArbiterType('messaging'),function(o,p){var q=babelHelpers._extends({},p.obj),event=q.event||'';delete q.type;delete q.event;m.inform(event,q);if('unread_counts' in q){var r=q.unread_counts;n({unread:r.inbox,other_unseen:r.other});}});h.subscribe(i.getArbiterType('inbox'),function(o,p){var q=babelHelpers._extends({},p.obj);delete q.type;n(q);});b.MessagingEvents=f.exports=m;},3);
__d('TitanLeftNav',['CounterDisplay','MessagingEvents'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={initialize:function(){i.subscribe('count/other_unseen',function(k,l){h.setCount('other_unseen',l);});}};f.exports=j;},null);
__d('AccessibilityShortcut',['AccessibilityLogger','Event','Focus','ge','onEnclosingPageletDestroy','warning'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={init:function(o,p){var q=i.listen(o,'click',function(r){r.preventDefault();var s=k(p);if(s){j.set(s);h.logSRKey();}else m(s,'Failed to set focus on element with ID: %s',p);});l(o,function(){return q.remove();});}};f.exports=n;},null);
__d('AsyncRequestNectarLogging',['AsyncRequest','Nectar'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();Object.assign(h.prototype,{setNectarModuleData:function(j){if(this.method=='POST')i.addModuleData(this.data,j);},setNectarImpressionId:function(){if(this.method=='POST')i.addImpressionID(this.data);}});},null);
__d('HistoryManager',['Cookie','Env','Event','URI','UserAgent_DEPRECATED','isFacebookURI','emptyFunction','goOrReplace','isInIframe','setIntervalAcrossTransitions','SessionName'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();c('SessionName');var r={history:null,current:0,fragment:null,isInitialized:function(){return !!r._initialized;},init:function(){if(!i.ALLOW_TRANSITION_IN_IFRAME&&p())return;if(r._initialized)return r;var s=new k(window.location.href),t=s.getFragment()||'';if(t.charAt(0)==='!'){t=t.substr(1);s.setFragment(t);}Object.assign(r,{_initialized:true,fragment:t,orig_fragment:t,history:[s],callbacks:[],lastChanged:Date.now(),canonical:new k('#'),user:0,enabled:true,debug:n});if(window.history&&history.pushState){this.lastURI=document.URL;window.history.replaceState(this.lastURI,null);j.listen(window,'popstate',(function(u){var v=u&&u.state&&typeof u.state==='string';if(v&&r.lastURI!=u.state){r.lastURI=u.state;r.lastChanged=Date.now();r.notify(new k(u.state).getUnqualifiedURI().toString());}}).bind(r));if(l.webkit()<534||l.chrome()<=13){q(r.checkURI,42);r._updateRefererURI(this.lastURI);}return r;}r._updateRefererURI(k.getRequestURI(false));if(l.webkit()<500||l.firefox()<2){r.enabled=false;return r;}if('onhashchange' in window){j.listen(window,'hashchange',function(){setTimeout(r.checkURI.bind(r),0);});}else q(r.checkURI,42);return r;},registerURIHandler:function(s){r.callbacks.push(s);return r;},setCanonicalLocation:function(s){r.canonical=new k(s);return r;},notify:function(s){if(s==r.orig_fragment)s=r.canonical.getFragment();for(var t=0;t<r.callbacks.length;t++)try{if(r.callbacks[t](s))return true;}catch(u){}return false;},checkURI:function(){if(Date.now()-r.lastChanged<400)return;if(window.history&&history.pushState){var s=new k(document.URL).removeQueryData('ref').toString(),t=new k(r.lastURI).removeQueryData('ref').toString();if(s!=t){r.lastChanged=Date.now();r.lastURI=s;if(l.webkit()<534)r._updateRefererURI(s);r.notify(new k(s).getUnqualifiedURI().toString());}return;}if(l.webkit()&&window.history.length==200){if(!r.warned)r.warned=true;return;}var u=new k(window.location.href).getFragment();if(u.charAt(0)=='!')u=u.substr(1);u=u.replace(/%23/g,'#');if(u!=r.fragment.replace(/%23/g,'#')){r.debug([u,' vs ',r.fragment,'whl: ',window.history.length,'QHL: ',r.history.length].join(' '));for(var v=r.history.length-1;v>=0;--v)if(r.history[v].getFragment().replace(/%23/g,'#')==u)break;++r.user;if(v>=0){r.go(v-r.current);}else r.go('#'+u);--r.user;}},_updateRefererURI:function(s){s=s.toString();if(s.charAt(0)!='/'&&s.indexOf('//')==-1)return;var t=new k(window.location);if(m(t)){var u=t.getPath()+window.location.search;}else var u='';var v=new k(s).getQualifiedURI().setFragment(u).toString(),w=2048;if(v.length>w)v=v.substring(0,w)+'...';h.set('x-referer',v);},go:function(s,t,u){if(window.history&&history.pushState){t||typeof s=='number';var v=new k(s).removeQueryData('ref').toString();r.lastChanged=Date.now();this.lastURI=v;if(u){window.history.replaceState(s,null,v);}else window.history.pushState(s,null,v);if(l.webkit()<534)r._updateRefererURI(s);return false;}r.debug('go: '+s);if(t===undefined)t=true;if(!r.enabled)if(!t)return false;if(typeof s=='number'){if(!s)return false;var w=s+r.current,x=Math.max(0,Math.min(r.history.length-1,w));r.current=x;w=r.history[x].getFragment()||r.orig_fragment;w=new k(w).removeQueryData('ref').getUnqualifiedURI().toString();r.fragment=w;r.lastChanged=Date.now();if(!r.user)o(window.location,window.location.href.split('#')[0]+'#!'+w,u);if(t)r.notify(w);r._updateRefererURI(w);return false;}s=new k(s);if(s.getDomain()==new k(window.location.href).getDomain())s=new k('#'+s.getUnqualifiedURI());var y=r.history[r.current].getFragment(),z=s.getFragment();if(z==y||y==r.orig_fragment&&z==r.canonical.getFragment()){if(t)r.notify(z);r._updateRefererURI(z);return false;}if(u)r.current--;var aa=r.history.length-r.current-1;r.history.splice(r.current+1,aa);r.history.push(new k(s));return r.go(1,t,u);},getCurrentFragment:function(){var s=k.getRequestURI(false).getFragment();return s==r.orig_fragment?r.canonical.getFragment():s;}};f.exports=r;},null);
__d('PageTransitions',['Arbiter','Bootloader','DOMQuery','DOMScroll','Env','Event','HistoryManager','JSLogger','LayerHideOnEscape','ModalLayer','PageHooks','PageTransitionsConfig','PageTransitionsRegistrar','React','ScriptPath','URI','Vector','areEqual','clickRefAction','escapeJSQuotes','ge','goOrReplace','invariant','isInIframe','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){if(c.__markCompiled)c.__markCompiled();var ga={};function ha(la,ma){ga[la.getUnqualifiedURI()]=ma;}function ia(la){return ga[la.getUnqualifiedURI()];}function ja(la){delete ga[la.getUnqualifiedURI()];}var ka={_scroll_locked:false,_transitions_disabled:false,isInitialized:function(){return !!ka._initialized;},_init:function(){if(!l.ALLOW_TRANSITION_IN_IFRAME&&ea())return;if(ka._initialized)return ka;var la=t.getMostRecentURI();ka._current_uri=la;ka._most_recent_uri=la;ka._next_uri=la;ka._initialized=true;var ma,na=w.getRequestURI(false);if(na.getFragment().startsWith('/')){ma=na.getFragment();}else ma=la;n.init().setCanonicalLocation('#'+ma).registerURIHandler(ka._historyManagerHandler);m.listen(window,'scroll',function(){if(!ka._scroll_locked)ha(ka._current_uri,x.getScrollPosition());});return ka;},registerHandler:t.registerHandler,removeHandler:t.removeHandler,getCurrentURI:function(la){this._init();if(!ka._current_uri&&!la)return new w(ka._most_recent_uri);return new w(ka._current_uri);},getMostRecentURI:function(){this._init();return new w(ka._most_recent_uri);},go:function(la,ma){this._init();var na=new w(la).removeQueryData('quickling').getQualifiedURI();o.create('pagetransition').debug('go',{uri:na.toString()});ja(na);!ma&&z('uri',{href:na.toString()},null,'INDIRECT');ka._loadPage(na,function(oa){if(oa){q.unfixed(function(){n.go(na.toString(),false,ma);});}else ca(window.location,na,ma);});},_historyManagerHandler:function(la){if(la.charAt(0)!='/')return false;z('h',{href:la});if(!v.getClickPointInfo())v.setClickPointInfo({click:'back'});ka._loadPage(new w(la),function(ma){if(!ma)ca(window.location,la,true);});return true;},_loadPage:function(la,ma){if(new w(la).getFragment()&&y(new w(la).setFragment(null).getQualifiedURI(),new w(ka._current_uri).setFragment(null).getQualifiedURI())){h.inform("pre_page_fragment_transition",{from:new w(ka._current_uri).getFragment(),to:new w(la).getFragment()});if(ka.restoreScrollPosition(la)){ka._current_uri=ka._most_recent_uri=la;h.inform("page_fragment_transition",{fragment:new w(la).getFragment()});return;}}var na;if(ka._current_uri)na=ia(ka._current_uri);var oa=function(){if(na&&ka._current_uri)ha(ka._current_uri,na);ka._current_uri=null;ka._next_uri=la;if(na)k.scrollTo(na,false);ka._scroll_locked=true;var ra=ka._handleTransition(la);ma&&ma(ra);},pa=ka._next_uri;ka._next_uri=la;var qa=r.runHooks('onbeforeleavehooks');ka._next_uri=pa;if(qa){ka._warnBeforeLeaving(qa,oa);}else oa();},_handleTransition:function(la){window.onbeforeleavehooks=undefined;if(ka._transitions_disabled||!la.isSameOrigin())return false;var ma=s.reloadOnBootloadError&&this._hasBootloadErrors();if(ma)return false;var na,oa=b.AsyncRequest;if(oa)na=oa.getLastID();h.inform("pre_page_transition",{from:ka.getMostRecentURI(),to:la});var pa=t._getTransitionHandlers();for(var qa=pa.length-1;qa>=0;--qa){var ra=pa[qa];if(!ra)continue;for(var sa=ra.length-1;sa>=0;--sa)if(ra[sa](la)===true){var ta={sender:this,uri:la,id:na};try{h.inform("page_transition",ta);}catch(ua){}return true;}else ra.splice(sa,1);}return false;},disableTransitions:function(){ka._transitions_disabled=true;},_hasBootloadErrors:function(){return i.getErrorUrls().length>0;},unifyURI:function(){this._init();ka._current_uri=ka._most_recent_uri=ka._next_uri;},transitionComplete:function(la){this._init();ka._scroll_locked=false;ka._executeCompletionCallbacks();ka.unifyURI();if(!la)ka.restoreScrollPosition(ka._current_uri);try{if(document.activeElement&&document.activeElement.nodeName==='A')document.activeElement.blur();}catch(ma){}},_executeCompletionCallbacks:function(){var la=t._getCompletionCallbacks();if(la.length>0){t._resetCompletionCallbacks();la.forEach(function(ma){return ma();});}},registerCompletionCallback:t.registerCompletionCallback,rewriteCurrentURI:function(la,ma){this._init();var na=t._getTransitionHandlers(),oa=na.length||1,pa=false;t.registerHandler(function(){if(la==ka.getMostRecentURI().getUnqualifiedURI().toString()){ka.transitionComplete();return true;}pa=true;},oa);ka.go(ma,true);!(na.length===oa+1&&na[oa].length===(pa?0:1))?da(0):undefined;na.length=oa;},_warnBeforeLeaving:function(la,ma){i.loadModules(["DialogX","XUIDialogTitle.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react"],function(na,oa,pa,qa,ra,sa){var ta=new na({width:450,addedBehaviors:[p]},u.createElement('div',null,u.createElement(oa,{showCloseButton:false},fa._("Leave Page?")),u.createElement(pa,null,u.createElement(sa,{shade:'medium',size:'medium'},la)),u.createElement(ra,null,u.createElement(qa,{action:'cancel',label:fa._("Stay on This Page")}),u.createElement(qa,{action:'confirm',use:'confirm',label:fa._("Leave This Page")}))));ta.subscribe('confirm',function(){ta.hide();ma();});ta.show();});},restoreScrollPosition:function(la){var ma=ia(la);if(ma){k.scrollTo(ma,false);return true;}function na(qa){if(!qa)return null;var ra="a[name='"+aa(qa)+"']";return j.scry(document.body,ra)[0]||ba(qa);}var oa=na(new w(la).getFragment());if(oa){var pa=x.getElementPosition(oa);pa.x=0;k.scrollTo(pa);return true;}return false;}};f.exports=ka;b.PageTransitions=ka;},null);
__d('PopoverAsyncMenu',['Bootloader','Event','PopoverMenu','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m,n={},o=0;l=babelHelpers.inherits(p,j);m=l&&l.prototype;function p(q,r,s,t,u,v){'use strict';m.constructor.call(this,q,r,null,u);this._endpoint=t;this._endpointData=v||{};this._loadingMenu=s;this._instanceId=o++;n[this._instanceId]=this;this._mouseoverListener=i.listen(r,'mouseover',this.fetchMenu.bind(this));}p.prototype._onLayerInit=function(){'use strict';if(!this._menu&&this._loadingMenu)this.setMenu(this._loadingMenu);this._popover.getLayer().subscribe('key',this._handleKeyEvent.bind(this));k((function(){return this.fetchMenu();}).bind(this));};p.prototype.fetchMenu=function(){'use strict';if(this._fetched)return;h.loadModules(["AsyncRequest"],(function(q){new q().setURI(this._endpoint).setData(Object.assign({pmid:this._instanceId},this._endpointData)).send();}).bind(this));this._fetched=true;if(this._mouseoverListener){this._mouseoverListener.remove();this._mouseoverListener=null;}};p.setMenu=function(q,r){'use strict';n[q].setMenu(r);};p.getInstance=function(q){'use strict';return n[q];};f.exports=p;},null);
__d('ViewportTrackingHelper',['Event','DOMDimensions','Vector'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getScrollListener:function(l){return h.listen(window,'scroll',l);},looseIsVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=j.getScrollPosition().y,o=i.getViewportDimensions().height,p=o+m-n;return l.y<p;},isVisible:function(l,m){if(!l.x&&!l.y&&!l.width&&!l.height)return false;var n=i.getViewportDimensions().height,o=Math.max(l.y,0),p=Math.min(l.y+l.height,n),q=Math.min(l.height,m);return p-o>=q;},isDescendantOf:function(l,m){if(l===m)return l;while(l&&l.parentNode){if(l.parentNode===m)return l;l=l.parentNode;}return false;}};f.exports=k;},null);
__d('ViewportTracking',['Arbiter','AsyncSignal','Banzai','BanzaiScuba','CSS','cx','CurrentUser','DOM','DOMDimensions','Event','LitestandMessages','NavigationMessage','Run','SubscriptionsHandler','UserActivity','Vector','ViewportTrackingHelper','clickRefAction','collectDataAttributes','debounce','getElementPosition','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da=97,ea=51,fa='vpv',ga='/feed/feed_tracking/vpv_waterfall_logging',ha=3,ia=2,ja=1,ka=0,la=1,ma=2,na=3,oa=4;function pa(){'use strict';}pa.prototype.init=function(qa){'use strict';this.useBanzai=true;this.viewportHeightRatio=qa.viewport_height_ratio?qa.viewport_height_ratio:.25;this.vpvDebug=!!qa.vpv_debug;this.vpvdDebug=!!qa.vpvd_debug;this.vpvdAnalysis=!!qa.vpvd_analysis;this.useWaterfallLogging=!!qa.waterfall_logging;this.loggedStoryIDs={};this.readStoryIDs={};this.annotatedStoryIDs={};this.minSizeToBeVisible=200;this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=90000;this.active_state_duration=1000;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.invalidateAllStoriesCache();this.cachedViewportHeight=p.getViewportDimensions().height;this.isTimetrackingEnabled=0;this.activeStories={};this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;this.getDataFromConfig(qa);if(this.isTimetrackingEnabled){this.lastMouseX=-1;this.lastMouseY=-1;this.lastStreamY=-1;this.latestStreamYChangedTimeStamp=-1;this.userFocus=ma;this.latestUserFocus=ma;this.latestUserActivity='init';this.focusedStory=null;this.latestFocusedStory=null;this.latestActiveStory=null;this.totalVPVDuration={};}this.isLoose=!!qa.is_loose;this.maxScrollPosition=0;if(qa.tracking_duration_config){this.scrollThrottlingInterval=qa.tracking_duration_config.scroll_throttling_interval;this.mouseThrottlingInterval=qa.tracking_duration_config.mouse_throttling_interval;this.keyboardThrottlingInterval=qa.tracking_duration_config.keyboard_throttling_interval;this.userActivityPollingInterval=qa.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=qa.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=qa.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=qa.tracking_duration_config.min_time_to_report_immediately;this.active_state_duration=qa.tracking_duration_config.active_state_duration;this.height_diff_to_change_state=qa.tracking_duration_config.story_height_diff_to_change_state;this.focused_state_duration=qa.tracking_duration_config.focused_state_duration;this.discardVPVDIntervalThreshold=qa.tracking_duration_config.discard_vpvd_interval_threshold;}var ra,sa=aa(this.fireTimer,this.getTimeout(),this);if(this.isLoose){this.minSizeToBeVisible=0;ra=ca((function(){this.maxScrollPosition=Math.max(this.maxScrollPosition,w.getScrollPosition().y);sa();}).bind(this));}else ra=sa;this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;if(this.annotatedVPVLogging)this.initialStories.forEach(this.logAnnotatedVPV,this);if(this.useWaterfallLogging)this.getStoriesInView().forEach(function(wa){this.waterfallLogStep(wa,'100_all_stories_in_view_ignore_height',true);},this);this.vpvHeartBeatInterval=qa.vpv_heartbeat_interval;this.passVPVHeartbeatGK=qa.use_vpv_heartbeat;if(this.passVPVHeartbeatGK){this.intervalCount=1;this.fireTimerCount=1;this.storiesInView=this.initialStories?this.initialStories:this.getStoriesInView();this.vpvHeartBeatIntervalSignal=setInterval((function(){this._sendSignal('interval');}).bind(this),this.vpvHeartBeatInterval);}this.subscriptions=new u();this.subscriptions.addSubscriptions(this._getScrollListener(ra),q.listen(window,'resize',(function(){this.invalidateVisibleStoriesCache();this.cachedViewportHeight=p.getViewportDimensions().height;ra();}).bind(this)),q.listen(window,'focus',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'window_focus');}).bind(this)),q.listen(window,'blur',(function(){if(this.isTimetrackingEnabled)this.updateTimeTrackingData(true,'window_blur');}).bind(this)),h.subscribe(s.NAVIGATION_BEGIN,this.cleanup.bind(this)),h.subscribe('Stream/totalHeadLoadedStories',(function(wa,xa){this._headLoadStoryCount=xa.count;}).bind(this)),h.subscribe(r.STORIES_INSERTED,(function(){if(!this.initialStoriesLogged){var wa=this.getStoriesInView();wa.forEach(this.logAnnotatedVPV,this);}else ra();if(this.isTimetrackingEnabled)this.updateTimeTrackingData(false,'stories_inserted');}).bind(this)));if(this.isTimetrackingEnabled){this.updateTimeTrackingData(false,'init');var ta=ca((function(event){this.invalidateVisibleStoriesCache();this.handleScroll(event);}).bind(this),this.scrollThrottlingInterval),ua=ca((function(event){this.handleKeyboard(event);}).bind(this),this.keyboardThrottlingInterval),va=ca((function(event){this.handleMouse(event);}).bind(this),this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(q.listen(window,'scroll',ta),q.listen(document.documentElement,'DOMMouseScroll',ta),q.listen(document.documentElement,'mousewheel',ta));this.subscriptions.addSubscriptions(q.listen(document.documentElement,'keydown',ua));this.subscriptions.addSubscriptions(q.listen(document.documentElement,'mouseover',va),q.listen(document.documentElement,'mousemove',va));this.subscriptions.addSubscriptions(h.subscribe('Event/stop',(function(wa,xa){this.handleMouse(xa.event);}).bind(this)));this.subscriptions.addSubscriptions(q.listen(document.documentElement,'click',(function(event){this.handleMouse(event);}).bind(this)),h.subscribe('PhotoSnowlift.OPEN',(function(){this.userFocus=na;this.handleLayers();}).bind(this)),h.subscribe('PhotoSnowlift.CLOSE',(function(){this.userFocus=la;this.focusedStory=null;this.updateTimeTrackingData(false,'snowlift_close');}).bind(this)));this._userActivityPoller();}t.onLeave(this.cleanup.bind(this));t.onUnload(this.cleanup.bind(this));};pa.prototype._getScrollListener=function(qa){'use strict';return q.listen(window,'scroll',qa);};pa.prototype.cleanup=function(){'use strict';if(this.subscriptions){this.subscriptions.release();this.subscriptions=null;}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true,'cleanup');}if(this.passVPVHeartbeatGK)clearInterval(this.vpvHeartBeatIntervalSignal);if(this.annotatedVPVLogging){var qa=this.getStoriesInView();qa.forEach(this.logAnnotatedVPV,this);}this.initialStories=[];this._headLoadStoryCount=0;};pa.prototype.fireTimer=function(){'use strict';if(this.useWaterfallLogging){var qa=this.getStoriesInViewIgnoreHeight();qa.forEach(function(ra){this.waterfallLogStep(ra,'100_all_stories_in_view_ignore_height');},this);}if(!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true;}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.passVPVHeartbeatGK)this._sendSignal('fireTimer');};pa.prototype.heartBeatIsEnabled=function(){'use strict';return false;};pa.prototype.getSessionID=function(){'use strict';return null;};pa.prototype._sendSignal=function(qa){'use strict';if(!this.heartBeatIsEnabled())return;var ra=-1;if(qa=='interval'){ra=this.intervalCount++;}else if(qa=='fireTimer')ra=this.fireTimerCount++;var sa=-1,ta=-1,ua=-1;if(this.storiesInView.length>0){sa=this.getStoryID(this.storiesInView[0]);ta=this.getQueryID(this.storiesInView[0]);ua=this.getFBFeedLocations(this.storiesInView[0]);}var va=new k('vpv_heartbeat_js');va.addInteger('qid',ta);va.addInteger('uid',n.getID());va.addInteger('firststoryid',sa);va.addInteger('time',Math.round(Date.now()/1000));va.addNormal('type',qa);va.addInteger('count',ra);va.addInteger('fbfeed_location',ua);va.post();};pa.prototype._userActivityPoller=function(){'use strict';if(!this.userInactiveLock&&!v.isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.userFocus=ma;this.updateTimeTrackingData(false,'user_activity_inactive');v.subscribeOnce((function(){this.userFocus=la;this.updateTimeTrackingData(false,'user_activity_active');this.userInactiveLock=false;}).bind(this));}this.userActivityPollerTimeoutID=setTimeout(this._userActivityPoller.bind(this),this.userActivityPollingInterval);};pa.prototype.getQueryID=function(qa){'use strict';return -1;};pa.prototype.getFBFeedLocations=function(qa){'use strict';return -1;};pa.prototype.getFBFeedInsertionPosition=function(qa){'use strict';return -1;};pa.prototype.createVPVDTimer=function(qa){'use strict';var ra=document.createElement("Label");ra.setAttribute("for",qa);ra.setAttribute("class",'vpvd_debug_timer');return ra;};pa.prototype.updateVPVDTimer=function(qa){'use strict';var ra=this.activeStories[qa].story,sa=o.scry(ra,'.vpvd_debug_timer');if(!sa.length){sa=[this.createVPVDTimer(ra),this.createVPVDTimer(ra)];var ta=o.scry(ra,'.UFIRow');if(ta.length&&ta[ta.length-1].clientWidth>0){ta[ta.length-1].appendChild(sa[0]);}else ra.appendChild(sa[0]);ra.insertBefore(sa[1],ra.firstChild);}var ua=this.totalVPVDuration[qa],va=Math.floor(ua/1000)+'.'+Math.floor(ua%1000/100);o.setContent(sa[0],va);o.setContent(sa[1],va);};pa.prototype.updateVPVDTimers=function(){'use strict';for(var qa in this.activeStories)if(this.activeStories.hasOwnProperty(qa))this.updateVPVDTimer(qa);};pa.prototype.logVpvdAnalysis=function(qa,ra,sa,ta,ua,va){'use strict';var wa=new k('vpv_duration');wa.addDenorm('qid',this.getQueryID(this.activeStories[qa].story));wa.addDenorm('uid',n.getID());wa.addDenorm('vsid',qa);wa.addInteger('time',Math.round(Date.now()/1000));wa.addInteger('duration',ta);wa.addInteger('total_duration',ua);wa.addNormal('story_state',this.activeStories[qa].state);wa.addNormal('is_active_state',sa);wa.addNormal('num_visible_stories',this.numVisibleStories);wa.addInteger('story_height',this.activeStories[qa].story_height);wa.addInteger('story_visible_height',this.activeStories[qa].height);wa.addInteger('state_visible_height',va);wa.addInteger('total_visible_height',this.totalVisibleHeight);wa.addInteger('total_height',this.totalHeight);wa.addNormal('user_focus',this.latestUserFocus);wa.addNormal('next_user_focus',this.userFocus);wa.addInteger('vpvd',ra);wa.addInteger('accumulated_vpvd',this.activeStories[qa].vpvd);wa.addNormal('user_activity',this.latestUserActivity);wa.addNormal('next_user_activity',this.userActivity);wa.addInteger('story_position_y',this.activeStories[qa].y);wa.addInteger('feed_insertion_position',this.getFBFeedInsertionPosition(this.activeStories[qa].story));wa.addNormal('visible_position',this.activeStories[qa].visible_position);wa.addNormal('is_focused_story',this.activeStories[qa].is_focused);wa.post();};pa.prototype.shouldDiscardStory=function(qa){'use strict';return this.activeStories[qa].height!=this.activeStories[qa].story_height&&this.activeStories[qa].height<this.totalHeight/2;};pa.prototype.calculateTotalHeight=function(){'use strict';this.totalHeight=0;for(var qa in this.activeStories)if(this.activeStories.hasOwnProperty(qa))this.totalHeight+=this.activeStories[qa].height;};pa.prototype.updateVPVDurations=function(qa){'use strict';if(this.latestUserFocus===ma||qa-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;var ra={1:0,2:0,3:0},sa=qa-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta))if(!(this.latestUserFocus===la&&sa&&this.shouldDiscardStory(ta))){ra[this.activeStories[ta].state]+=this.activeStories[ta].height;this.totalVisibleHeight+=this.activeStories[ta].height;}var ua=0,va=qa-this.latestTimeTrackingTimestamp;if(this.latestUserFocus===la){va=ra[ha]>0?this.focused_state_duration:this.active_state_duration;va=Math.min(va,qa-this.latestTimeTrackingTimestamp);ua=qa-this.latestTimeTrackingTimestamp-va;}var wa=0,xa=ha;for(var ya=ha;ya>=ja;ya--)if(ra[ya]>0){wa=ra[ya];xa=ya;break;}var za=ra[ha]+ra[ia]+ra[ja],ab=0;for(ta in this.activeStories)if(this.activeStories.hasOwnProperty(ta)){if(this.latestUserFocus===la&&sa&&this.shouldDiscardStory(ta))continue;if(wa>0&&this.activeStories[ta].state>=xa){ab=va*(this.activeStories[ta].height/wa);if(this.vpvdAnalysis&&va>0)this.logVpvdAnalysis(ta,ab,true,va,va+ua,wa);this.activeStories[ta].vpvd+=ab;this.totalVPVDuration[ta]+=ab;}if(za>0){ab=ua*(this.activeStories[ta].height/za);if(this.vpvdAnalysis&&ua>0)this.logVpvdAnalysis(ta,ab,false,ua,va+ua,za);this.activeStories[ta].vpvd+=ab;this.totalVPVDuration[ta]+=ab;}}};pa.prototype.updateActiveStory=function(qa,ra,sa,ta){'use strict';this.activeStories[qa].state=ra;this.activeStories[qa].ts=sa;this.activeStories[qa].height_snapshot=ta[qa].height;this.activeStories[qa].is_focused=this.focusedStory===ta[qa].story;this.activeStories[qa].story_height=ta[qa].story_height;if(this.vpvdAnalysis){this.activeStories[qa].visible_position=ta[qa].visible_position;this.activeStories[qa].y=ta[qa].y;}};pa.prototype.updateActiveStories=function(qa,ra){'use strict';for(var sa in qa)if(qa.hasOwnProperty(sa))if(sa in this.activeStories){this.activeStories[sa].height=qa[sa].height;var ta=qa[sa].height-this.activeStories[sa].height_snapshot;if(this.focusedStory===qa[sa].story){this.updateActiveStory(sa,ha,ra,qa);}else if(ta<=-this.height_diff_to_change_state){this.updateActiveStory(sa,this.shouldDiscardStory(sa)?ka:ja,ra,qa);}else if(ta>=this.height_diff_to_change_state||this.activeStories[sa].is_focused||this.activeStories[sa].height===this.activeStories[sa].story_height)this.updateActiveStory(sa,ia,ra,qa);}else{this.activeStories[sa]={evp_ts:ra,story:qa[sa].story,height:qa[sa].height,vpvd:0};if(!this.totalVPVDuration[sa])this.totalVPVDuration[sa]=0;this.updateActiveStory(sa,ia,ra,qa);}};pa.prototype.recordVPVDurations=function(qa,ra){'use strict';for(var sa in this.activeStories)if(this.activeStories.hasOwnProperty(sa))if(ra||!(sa in qa)){if(this.activeStories[sa].vpvd>this.focused_state_duration||this.activeStories[sa].vpvd===this.totalVPVDuration[sa])this.recordTimeStoryWasInView(this.activeStories[sa]);delete this.activeStories[sa];}};pa.prototype.updateTimeTrackingData=function(qa,ra){'use strict';this.userActivity=ra;if(!this.activeStories)this.activeStories={};var sa=Date.now();if(!this.latestTimeTrackingTimestamp)this.latestTimeTrackingTimestamp=sa;var ta=this.getVisibleStoriesFromCache();this.calculateTotalHeight();this.updateVPVDurations(sa);this.updateActiveStories(ta,sa);if(this.vpvdDebug)this.updateVPVDTimers();this.recordVPVDurations(ta,qa);if(qa){this.latestTimeTrackingTimestamp=0;}else this.latestTimeTrackingTimestamp=sa;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;if(this.focusedStory)this.latestActiveStory=this.focusedStory;this.latestFocusedStory=this.focusedStory;this.focusedStory=null;};pa.prototype.needsToUpdateTimeTrackingData=function(){'use strict';return !(this.latestUserFocus===this.userFocus&&(this.userFocus===ma||this.userFocus===la&&!this.latestFocusedStory&&!this.focusedStory));};pa.prototype.getfocusedStory=function(qa){'use strict';var ra=this.getVisibleStoriesFromCache();for(var sa in ra)if(ra.hasOwnProperty(sa))if(x.isDescendantOf(qa,ra[sa].story))return ra[sa].story;return null;};pa.prototype.handleLayers=function(){'use strict';if(this.userFocus===na||this.userFocus===oa){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(false,'media_layer');return true;}return false;};pa.prototype.didInteractWithStream=function(qa){'use strict';return x.isDescendantOf(qa,this.getStream())||x.isDescendantOf(this.getStream(),qa);};pa.prototype.handleScroll=function(event){'use strict';if(this.handleLayers())return;var qa=Date.now(),ra=ba(this.getStream()).y;if(ra!=this.lastStreamY||qa-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(event.target)){this.latestStreamYChangedTimeStamp=qa;this.userFocus=la;}else this.userFocus=ma;this.lastStreamY=ra;if(this.userFocus===la||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'scroll');};pa.prototype.handleKeyboard=function(event){'use strict';if(this.handleLayers())return;if(this.didInteractWithStream(event.target)){this.userFocus=la;this.focusedStory=this.getfocusedStory(event.target);}else if(l.hasClass(event.target,'shareInput')){this.userFocus=la;this.focusedStory=this.latestActiveStory;}else this.userFocus=ma;if(this.userFocus===la||this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,'keyboard');};pa.prototype.handleMouse=function(event){'use strict';if(this.handleLayers())return;if(event.type!='click'&&event.clientX===this.lastMouseX&&event.clientY===this.lastMouseY)return;if(event.type==='click')this.invalidateVisibleStoriesCache();if(this.didInteractWithStream(event.target)){this.userFocus=la;this.focusedStory=this.getfocusedStory(event.target);}else this.userFocus=ma;this.lastMouseX=event.clientX;this.lastMouseY=event.clientY;if(this.needsToUpdateTimeTrackingData())this.updateTimeTrackingData(false,event.type);};pa.prototype.getStoriesInView=function(){'use strict';var qa=this.getAllStories(),ra=[],sa=false;for(var ta=0;ta<qa.length;ta++){var ua=qa[ta],va=this.getStoryID(ua);if(this.hasBeenVisible(va))continue;if(this.isVisible(ua)){if(ua.getAttribute('data-insertion-position')===null)ua.setAttribute('data-insertion-position',ta-this._headLoadStoryCount);ra.push(ua);sa=true;}else if(sa)break;}return ra;};pa.prototype.getStoriesInViewIgnoreHeight=function(){'use strict';var qa=this.getAllStories(),ra=false,sa=[];for(var ta=0;ta<qa.length;ta++){var ua=qa[ta];if(this.isVisible(ua,false,0)){sa.push(ua);ra=true;}else if(ra)break;}return sa;};pa.prototype.getAllStoriesFromCache=function(){'use strict';if(this.cachedAllStories===null)this.cachedAllStories=this.getAllStories();return this.cachedAllStories;};pa.prototype.invalidateAllStoriesCache=function(){'use strict';this.cachedAllStories=null;this.invalidateVisibleStoriesCache();};pa.prototype.getVisibleStoriesFromCache=function(){'use strict';if(this.cachedVisibleStories===null)this.cachedVisibleStories=this.getAllStoriesInView();return this.cachedVisibleStories;};pa.prototype.invalidateVisibleStoriesCache=function(){'use strict';this.cachedVisibleStories=null;};pa.prototype.getAllStoriesInView=function(){'use strict';var qa=this.getAllStoriesFromCache(),ra={},sa=false,ta=0,ua=qa.length,va=1,wa=qa.length;if(this._indexOfLastVisibleStoryOnPreviousPass>ua/2){ta=ua-1;ua=-1;va=-va;}for(var xa=ta;xa!=ua;xa+=va){var ya=qa[xa],za=this.getHeightIfVisible(ya,false,Math.min(this.minSizeToBeVisible,this.minFractionToBeVisibleForTimetracking*p.getElementDimensions(ya).height));if(za>0||ya===this.focusedStory){if(ya.getAttribute('data-insertion-position')===null)ya.setAttribute('data-insertion-position',xa-this._headLoadStoryCount);var ab=this.getStoryID(ya);ra[ab]={story:ya,height:za,story_height:p.getElementDimensions(ya).height};sa=true;if(this.vpvdAnalysis){ra[ab].y=ba(ya).y;ra[ab].visible_position=xa;wa=Math.min(wa,xa);}}else if(sa){this._indexOfLastVisibleStoryOnPreviousPass=xa-va;break;}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(ab in ra)if(ra.hasOwnProperty(ab)){ra[ab].visible_position-=wa;this.numVisibleStories++;}}return ra;};pa.prototype.getTimetrackingDataToLog=function(qa){'use strict';var ra={evt:da,vpvd_start_timestamp:qa.evp_ts,vpvd_time_delta:Math.round(qa.vpvd),story_height:p.getElementDimensions(qa.story).height,viewport_height:this.cachedViewportHeight};return {ft:ra};};pa.prototype.recordTimeStoryWasInView=function(qa){'use strict';if(this.isTimetrackingEnabled&&qa.vpvd>0){var ra=this.getTimetrackingDataToLog(qa),sa=z(qa.story,['ft']);Object.assign(ra.ft,sa.ft);var ta=!!sa.ft.ei&&ra.ft.vpvd_time_delta>this.minTimeToReportImmediately;delete ra.ei;this.sendDataToLog(qa.story,ra,ta);}};pa.prototype.hasBeenVisible=function(qa){'use strict';return qa in this.readStoryIDs;};pa.prototype.isVisible=function(qa,ra,sa){'use strict';return this.getHeightIfVisible(qa,ra,sa)>0;};pa.prototype.getHeightIfVisible=function(qa,ra,sa){'use strict';if(ra===undefined)ra=this.isLoose;if(sa===undefined)sa=this.minSizeToBeVisible;var ta=w.getScrollPosition().y,ua=p.getViewportDimensions().height,va=ba(qa),wa=p.getElementDimensions(qa),xa=ua+this.maxScrollPosition-ta;if(!va.x&&!va.y&&!wa.x&&!wa.y)return false;if(ra&&va.y<xa)return true;var ya=Math.max(va.y,0),za=Math.min(va.y+wa.height,ua),ab=Math.min(wa.height,sa);return za-ya>=ab?za-ya:0;};pa.prototype.getHeightInViewport=function(qa){'use strict';var ra=p.getViewportDimensions().height,sa=ba(qa),ta=p.getElementDimensions(qa);if(!sa.x&&!sa.y&&!ta.x&&!ta.y)return false;var ua=Math.max(sa.y,0),va=Math.min(sa.y+ta.height,ra);return va-ua;};pa.prototype.sendDataToLog=function(qa,ra,sa){'use strict';if(this.useBanzai){var ta={};if(sa)ta.delay=3000;var ua=this.getSessionID();if(ua)ra.ft.session_id=ua;if(this.useWaterfallLogging&&ra.ft.evt==ea){ra.ft.should_waterfall_logging=1;ra.ft['interface']='www';var va=!this.initialStoriesLogged;this.waterfallLogStep(qa,'200_sent_to_banzai',va);}j.post('feed_tracking',ra,ta);}else y(fa,qa,null,'FORCE',ra);};pa.prototype.waterfallLogStep=function(qa,ra,sa){'use strict';var ta=this.getStoryID(qa);if(this.loggedStoryIDs[ra]&&this.loggedStoryIDs[ra][ta])return;var ua=this.getWaterfallData(qa,ra,sa);if(!ua.qid)return;new i(ga,ua).send();if(!this.loggedStoryIDs[ra])this.loggedStoryIDs[ra]={};this.loggedStoryIDs[ra][ta]=true;};pa.prototype.getWaterfallData=function(qa,ra,sa){'use strict';var ta=this._getDataToLogImpl(qa),ua=z(qa,['ft']);Object.assign(ta.ft,ua.ft);var va=ta.ft;va.height_in_viewport=this.getHeightInViewport(qa);va.step=ra;va.is_initial_story=sa?1:0;va['interface']='www';return va;};pa.prototype.addSeenClassToStory=function(qa){'use strict';l.addClass(qa,"_50nb");l.removeClass(qa,"_50mx");l.removeClass(qa,"_2z-5");};pa.prototype.markStoryRead=function(qa){'use strict';var ra=this.getStoryID(qa);if(!ra||this.hasBeenVisible(ra))return;this.readStoryIDs[ra]=true;this.annotatedStoryIDs[ra]=true;var sa=this._getDataToLogImpl(qa),ta=z(qa,['ft']);Object.assign(sa.ft,ta.ft);delete sa.ei;this.sendDataToLog(qa,sa,false);l.addClass(qa,"_x72");if(this.vpvDebug)l.addClass(qa,"_5m7s");this.addSeenClassToStory(qa);};pa.prototype.logAnnotatedVPV=function(qa){'use strict';var ra=this.getStoryID(qa);if(!ra||ra in this.annotatedStoryIDs)return;this.annotatedStoryIDs[ra]=true;var sa=this._getDataToLogImpl(qa),ta=z(qa,['ft']);Object.assign(sa.ft,ta.ft);delete sa.ei;sa.ft.vpv_ft_only=1;this.sendDataToLog(qa,sa,false);};pa.prototype._getDataToLogImpl=function(qa){'use strict';var ra=this.getDataToLog(qa);if(!ra.ft)ra.ft={};return ra;};f.exports=pa;},null);
__d('collectSubtreeData',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k,l,m,n){if(j.offsetWidth===0&&j.offsetHeight===0)return n;var o={};if(j.getAttribute)for(s=0;s<k.length;s++){u=k[s];var p=j.getAttribute(l[u]);if(p){o[u]={};var q=JSON.parse(p);for(var r in m)if(q[r]!==undefined){o[u][r]=true;if(n[u]===undefined)n[u]={};if(n[u][r]===undefined)n[u][r]=[];if(m[r].length>0)n[u][r].push(m[r]);n[u][r].push('('+q[r]);}}}for(var s=0;s<j.childNodes.length;s++){var t=j.childNodes[s];h(t,k,l,m,n);}for(var u in o)for(var v in o[u]){var w=n[u][v][n[u][v].length-1];if(w.length>0&&w.charAt(0)=='('){n[u][v][n[u][v].length-1]=w.substr(1);}else n[u][v].push(')');}return n;}function i(j,k){var l={};for(var m=0;m<k.length;++m)l[k[m]]='data-'+k[m];var n={tn:"","tn-debug":","},o={};h(j,k,l,n,o);for(var p in o)for(var q in o[p])o[p][q]=o[p][q].join('');return o;}f.exports=i;},null);
__d("isEmail",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/^[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+(:?\.[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i;function i(j){return h.test(j);}f.exports=i;},null);
__d('recordTNTreeData',['collectSubtreeData'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){var l={},m=h(j,['ft']);for(var n in m.ft){l[n+'_tree']=m.ft[n];if(n==='tn-debug')j.setAttribute('tn-debug_subtree',m.ft[n]);}l.evt_value=j.offsetHeight;if(k)l.offset=Math.max(0,j.offsetTop-k.offsetTop);return l;}f.exports=i;},null);
__d('PagesVoiceBar',['$','Arbiter','AsyncRequest','BlueBar','ChannelConstants','DOM','URI','ViewportBounds'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p='PagesVoiceBar/initialized',q='PagesVoiceBar/switchVoice',r='page_transition',s='pages_voice_bar_sync',t=null,u=null,v=false,w=false,x=o.addTop(0);function y(ea,fa){new j('/ajax/pages/switch_voice.php').setData(fa).setHandler(function(ga){ca();}).send();}function z(){t=null;}function aa(ea,fa){if(fa.obj.profile_id&&fa.obj.profile_id===t)ca();}function ba(ea){i.subscribe(p,ea);}function ca(){n.getNextURI().go();}var da={initVoiceBar:function(){if(w)return;u=h('pagesVoiceBarContent');i.subscribe(q,y);i.subscribe(r,z);i.subscribe(l.getArbiterType(s),aa);w=true;v=m.contains(k.getBar(),u);i.inform(p,null,i.BEHAVIOR_STATE);},update:function(ea,fa){ba(function(){t=fa;m.setContent(u,ea);var ga=u.offsetHeight;if(!v&&x.getSize()!==ga){x.remove();x=o.addTop(o.getTop()+ga);}});}};f.exports=da;},null);
__d("XPrivacyCheckupSpawnDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/checkup\/dialog\/show\/",{source:{type:"Enum",enumType:1}});},null);
__d("XPrivacyRemindersDismissController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/reminders\/dismiss\/",{type:{type:"String",required:true},log_plite:{type:"Bool",defaultValue:false}});},null);
__d('PrivacyLiteFlyout',['Animation','Arbiter','ArbiterMixin','AsyncDialog','AsyncRequest','Banzai','CSS','DOM','Ease','Event','PrivacyConst','Style','SubscriptionsHandler','Toggler','XPrivacyCheckupSpawnDialogController','XPrivacyRemindersDismissController','csx','cx','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa='PrivacyLiteFlyout/expandingSection',ba={},ca={};function da(ja,ka,la){var ma=ka?0:ja.offsetHeight;s.set(ja,'height',ma+'px');s.set(ja,'overflow','hidden');n.show(ja);var na=ka?ja.scrollHeight:0,oa=o.getID(ja);ba[oa]&&ba[oa].stop();ba[oa]=new h(ja).to('height',na).ondone(function(){ba[oa]=null;s.set(ja,'height','');s.set(ja,'overflow','');na||n.hide(ja);la();}).duration(Math.abs(na-ma)*1.5).ease(p.sineOut).go();}function ea(ja){var event='other_section';switch(ja){case 'who_can_see':case 'who_can_contact':case 'how_to_stop':event=ja;break;}return event;}var fa=null,ga=false,ha=false,ia=babelHelpers._extends({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(ja){if(!ga&&z('fbPrivacyLiteFlyoutLoading')){ga=true;new l('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:ja}).send();}},_addListener:function(ja,event,ka){return q.listen(ja,'click',function(){m.post('privacy_lite',{event:event,exit_point:ka});});},addLoggingElem:function(ja,event,ka){var la=this._loggingElements.length,ma={elem:ja,event:event,exit:ka};this._loggingElements[la]=ma;},registerSettingsAndBasicsLinkLogging:function(ja,event,ka,la){var ma=o.scry(ja,"._5cw0")[0],na=o.scry(ja,"._3djx")[0];if(ma){this._settingsLinkListener&&this._settingsLinkListener.release();this._settingsLinkListener=this._addListener(ma,event,ka);}if(na){this._privacyBasicsLinkListener&&this._privacyBasicsLinkListener.release();this._privacyBasicsLinkListener=this._addListener(na,event,la);}},_subscribeListeners:function(){this._loggingElements&&this._loggingElements.forEach(function(ja){this._subscriptions&&this._subscriptions.addSubscriptions(this._addListener(ja.elem,ja.event,ja.exit));},this);},renderBody:function(ja,ka){var la=z('fbPrivacyLiteFlyoutLoading');if(la){o.replace(la,ja);ia.registerCallback(function(){ia.inform('load',null,i.BEHAVIOR_STATE);},ka);}},hideCleanup:function(ja){i.inform(aa);var ka=o.scry(ja,"._2va0").forEach(function(la){n.removeClass(la,"_2va0");});},registerFlyoutToggler:function(ja,ka,la){this._loggingElements=[];fa=ka;var ma=u.createInstance(ja);ma.setSticky(false);u.listen(['show','hide'],ka,(function(na){ia.inform(na);ha=na==='show';if(!ha){ia.hideCleanup(ja);ma.hide();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;i.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else{i.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});if(la){la.start(this);la=null;}i.subscribeOnce(aa,(function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=new t();this._subscribeListeners();}).bind(this));m.post('privacy_lite',{event:'show_flyout',exit_point:null});}}).bind(this));},isFlyoutVisible:function(){return fa&&u.getActive()===fa;},exists:function(){return !!o.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(ja){ja?u.show(fa):u.hide(fa);},showSection:function(ja){var ka=ca[ja];if(!ka)return;if(!ka.sublist_container){ia.inform('expanded',ja,i.BEHAVIOR_STATE);return;}var la=ka.chevron,ma=ka.sublist_container;i.inform(aa,la);if(ia.inform('expand',ja)!==false){n.removeClass(la,"_9or");n.addClass(la,"_9os");da(ma,true,function(){ia.inform('expanded',ja);});}},hideSection:function(ja,ka,la){var ma=ca[ja],na=ma.chevron,oa=ma.sublist_container;if(la===na)return;if(ia.inform('collapse',ja)!==false){n.addClass(na,"_9or");n.removeClass(na,"_9os");da(oa,false,function(){ia.inform('collapsed',ja);});}},toggleSection:function(ja){var ka=ca[ja].chevron;u.getInstance(ka).hide();if(n.hasClass(ka,"_9or")){ia.showSection(ja);m.post('privacy_lite',{event:ea(ja)+'_expand',exit_point:null});new l('/ajax/privacy/privacy_lite/log_section_expand').setData({section:ja}).send();}else{ia.hideSection(ja);m.post('privacy_lite',{event:ea(ja)+'_collapse',exit_point:null});}},registerSection:function(ja,ka){ca[ja]=ka;if(ka.sublist_container){i.subscribe(aa,ia.hideSection.bind(null,ja));q.listen(ka.section_block,'click',ia.toggleSection.bind(null,ja));}ia.inform(ja);},registerInlineHelpOnAudienceChangeNewSelector:function(ja,ka,la,ma){ja=ja.getInstance();ja.subscribe('changed',(function(na){this._registerInlineHelpOnAudienceChange(ka,la,ma,ja.getSelectedBaseValue());}).bind(this));},registerSelectorLogging:function(ja,ka,la,ma){ja=ja.getInstance();ja.subscribe('open',function(){m.post('privacy_lite',{event:ka,exit_point:null});});ja.subscribe('close',function(){m.post('privacy_lite',{event:la,exit_point:null});});ja.subscribe('changed',function(){m.post('privacy_lite',{event:ma,exit_point:null});});},_registerInlineHelpOnAudienceChange:function(ja,ka,la,ma){var na=o.find(ja,"._9o_"),oa=o.find(ja,"._2v9_");if(la){var pa=o.find(ja,"._5n9w"),qa=ma==r.BaseValue.EVERYONE;n.conditionShow(pa,qa);n.conditionShow(na,!qa);if(pa&&qa){var ra=w.getURIBuilder().setString('type','delta_everyone').setBool('log_plite',true).getURI();new l(ra).send();}}else n.show(na);n.hide(oa);if(ka)new l('/ajax/privacy/privacy_lite/kill_intro').send();},registerInlineHelpXOutOnClick:function(ja,ka,la){q.listen(ja,'click',function(){n.addClass(ka,"_9p0");});},registerBlockUnhideOnFocus:function(ja,ka){q.listen(ja,'focus',(function(la){n.show(la);m.post('privacy_lite',{event:'block_user_input_click',exit_point:null});}).bind(this,ka));},registerMessageFilterSettingOnClick:function(ja,ka){var la=o.find(ja,"._fv0");q.listen(ja,'click',function(){if(la.checked){new l('/ajax/mercury/change_filtering_type.php').setData({filtering_type:ka,source:'privacy_lite'}).send();}else{var event='basic_filtering';if(ka==='strict')event='strict_filtering';m.post('privacy_lite',{event:event,exit_point:null});}});},registerPrivacyCheckupListener:function(ja){q.listen(ja,'click',(function(){this.setFlyoutVisible(false);k.send(new l(v.getURIBuilder().setEnum('source','plite').getURI()));m.post('privacy_lite',{event:'exit_flyout',exit_point:'privacy_checkup'});}).bind(this));},displayPrivacyCheckup:function(ja){ja.show();}},j);f.exports=ia;},null);
__d('PrivacyLiteFlyoutHelp',['Event','Arbiter','AsyncRequest','Banzai','ContextualHelpSearchController','CSS','DOM','Parent','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;function t(u,v,w,x,y){this._width=315;s=n.find(v,'input');var z=n.create('div');this.init(u,s,z,w,x,{focusSearchBox:false});r=o.byClass(v,"_8-a");h.listen(y,'click',(function(){this._hideSearch(this);k.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}).bind(this));i.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var aa=n.scry(r,"._d1r")[0];aa&&h.listen(aa,'click',(function(){m.addClass(r,"_aw6");s.focus();k.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new j('/ajax/privacy/privacy_lite/help_suggestions').setHandler((function(ba){var ca=ba.getPayload().searchSuggestions,da=n.find(r,"._4_8m");n.setContent(da,ca);m.addClass(r,"_4_8l");}).bind(this)).send();}).bind(this));}Object.assign(t.prototype,new l(),l.prototype,{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();m.removeClass(r,"_aw6");},show:function(u){if(u===this.topics_area){m.removeClass(r,"_aw7");return;}else if(u===this.loader){m.addClass(r,"_aw7");m.hide(this.results_area);}else m.hide(this.loader);m.show(u);}});f.exports=t;},null);
__d('ViewasChromeBar',['Event','Arbiter','AsyncRequest','CSS','DOM','Focus','ModalMask','PageTransitionsRegistrar','Parent','cx','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='ViewasChromeBar/initialized',t=null,u=false;function v(y){i.subscribe(s,y);}function w(y){k.addClass(y,"_7g7");var z=l.find(y,"._7g0");m.set(l.find(z,'.textInput'));}var x={initChromeBar:function(y){if(u)return;t=y;u=true;i.inform(s,null,i.BEHAVIOR_STATE);},update:function(y,z){v(function(){l.setContent(t,y);if(z)new j('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(y){h.listen(y,'click',w.bind(null,p.byClass(y,"_7f-")));},registerFlyoutModalMask:function(){n.show();o.registerHandler(n.hide,10);}};f.exports=x;},null);
__d('PrivacySelectorOptionNew',['CSS','DOM','DOMQuery','JSXDOM','MenuSelectableItem','PrivacyConst','csx','cx','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s,t=m.EventExpansion;r=babelHelpers.inherits(u,l);s=r&&r.prototype;function u(v){'use strict';s.constructor.call(this,v);this.updateAfterTagExpansion(!!v.hasTags,v.eventExpansionType||t.NONE);}u.prototype._getData=function(){'use strict';return this._data;};u.prototype.getTooltip=function(){'use strict';return this._getData().tooltip;};u.prototype.getPostParam=function(){'use strict';return this._getData().postParam.toString();};u.prototype.getTriggerIcon=function(){'use strict';return this._getData().triggerIcon;};u.prototype.getTriggerLabel=function(){'use strict';return this._getData().triggerLabel;};u.prototype.isPublic=function(){'use strict';return this.getPostParam()===m.PostParam.EVERYONE;};u.prototype.isFriends=function(){'use strict';return this.getPostParam()===m.PostParam.FRIENDS;};u.prototype.isOnlyMe=function(){'use strict';return this.getPostParam()===m.PostParam.ONLY_ME;};u.prototype.isBasicOption=function(){'use strict';return true;};u.prototype.isCustomOption=function(){'use strict';return false;};u.prototype.getTagExpansionBehavior=function(){'use strict';return this._getData().tagExpansionBehavior;};u.prototype.getBaseValue=function(){'use strict';return this._getData().baseValue;};u.prototype.getIndex=function(){'use strict';return this._getData().value;};u.prototype.getLoggingEventName=function(){'use strict';switch(this.getPostParam()){case m.PostParam.FRIENDS:return 'click_friends';case m.PostParam.EVERYONE:return 'click_everyone';case m.PostParam.ONLY_ME:return 'click_only_me';case m.PostParam.FRIENDS_MINUS_ACQUAINTANCES:return 'click_friends_except_acquaintances';case m.PostParam.FB_ONLY:return 'click_fb_only';default:return 'click_other';}};u.prototype.updateAfterTagExpansion=function(v,w){'use strict';var x=w!=t.NONE,y=this._getData().triggerLabel;if((v||x)&&this._getData().showPlusOnTagExpansion)y=p._("{privacyLabel} (+)",[p.param('privacyLabel',this._getData().triggerLabel)]);this._setLabel(y);var z=this._getExpansionType(v,w),aa=this._getData().optionSubtitles||{};this._setSubtitle(aa[z]);};u.prototype.isBelowFold=function(){'use strict';var v=h.hasClass(this.getRoot(),"_3ey_");return v;};u.prototype._setLabel=function(v){'use strict';if(!v)return;var w=j.find(this.getRoot(),"._54nh");w&&i.setContent(w,v);this._getData().label=v;};u.prototype._setSubtitle=function(v){'use strict';if(!v)return;var w=j.find(this.getRoot(),"._48u1");w&&i.setContent(w,v);};u.prototype._getExpansionType=function(v,w){'use strict';switch(w){case t.NONE:return v?m.ExpansionType.TAGS_ONLY:m.ExpansionType.NONE;case t.EVENT_INVITEES:return v?m.ExpansionType.TAGS_AND_EVENT_INVITEES:m.ExpansionType.EVENT_INVITEES_ONLY;case t.EVENT_GROUP:return v?m.ExpansionType.TAGS_AND_EVENT_GROUP:m.ExpansionType.EVENT_GROUP_ONLY;default:q(0);}};u.prototype.render=function(){'use strict';var v=s.render.call(this);if(!this._getData().isPrimaryOption)return v;var w=j.find(v,"._54nc");w&&h.addClass(w,"_48t_");var x=i.find(v,"._54nh");x&&h.addClass(x,"_48u0");var y=k.div({className:"_48u1"},this._getData().optionSubtitle);i.appendContent(w,y);return v;};f.exports=u;},null);
__d("XPrivacySelectorLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/log\/",{event:{type:"Enum",required:true,enumType:1},render_location:{type:"Int",required:true},content_type:{type:"String",required:true}});},null);
__d("XPrivacyCustomDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/custom_dialog\/",{id:{type:"String",required:true},option_id:{type:"String",required:true},autosave:{type:"Bool",defaultValue:false},explain_tags:{type:"Bool",defaultValue:false},limit_community:{type:"Bool",defaultValue:false},limit_facebook:{type:"Bool",defaultValue:false},limit_fof:{type:"Bool",defaultValue:false},limit_tagexpand:{type:"Bool",defaultValue:false},is_new_privacy_selector:{type:"Bool",defaultValue:false},render_location:{type:"Int"},content_type:{type:"String"},post_param:{type:"String"},privacy_data:{type:"String"},source:{type:"String"},tags:{type:"IntVector"},tag_expansion_button:{type:"String"},__asyncDialog:{type:"Int"}});},null);
__d('PrivacySelectorCustomOption',['AsyncDialog','AsyncRequest','DataStore','PrivacySelectorOptionNew','XPrivacySelectorLoggingController','XPrivacyCustomDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,k);o=n&&n.prototype;function p(q){'use strict';o.constructor.call(this,q);}p.prototype.isBasicOption=function(){'use strict';return false;};p.prototype.isCustomOption=function(){'use strict';return true;};p.prototype.getSelector=function(){'use strict';return this._selector;};p.prototype.setPostParam=function(q){'use strict';this._data.postParam=q;};p.prototype.getLoggingEventName=function(){'use strict';return 'click_custom';};p.prototype.openDialog=function(q){'use strict';if(typeof this._selector==='undefined')this._selector=q;j.set(this._data.id,'PrivacySelectorCustomOption',this);var r=m.getURIBuilder().setString('option_id',this._data.id).setString('id',this._data.privacyfbid.toString()).setString('post_param',q.getPostParam()).setString('content_type',q.getContentType()).setInt('render_location',q.getRenderLocation()).setIntVector('tags',q.getTags()).setBool('autosave',this._data.autosave).setBool('limit_community',this._data.limitcommunity).setBool('limit_facebook',this._data.limitfacebook).setBool('limit_fof',this._data.limitfof).setBool('limit_tagexpand',this._data.limittagexpand).setBool('is_new_privacy_selector',true).setString('tag_expansion_button',q.getTagExpansionButton()).getURI(),s=new i(r);s.setRelativeTo(q.getTriggerButtonElement());h.send(s,function(t){var u=function(v){var w=l.getURIBuilder().setEnum('event',v).setInt('render_location',document.getElementsByName('render_location')[0].value).setString('content_type',document.getElementsByName('content_type')[0].value).getURI();new i().setURI(w).send();};t.subscribe('hide',function(){q.inform('custom/hide');q.inform('selectorFinished');});t.subscribe('success',function(){q.inform('custom/success');u('custom_save');});t.subscribe('cancel',function(){q.inform('custom/cancel');u('custom_cancel');});});};p.customPrivacySave=function(q,r){'use strict';var s=j.get(q,'PrivacySelectorCustomOption');s.getSelector().selectOption(r);j.remove(q,'PrivacySelectorCustomOption');};f.exports=p;},null);
__d('PrivacySelectableMenu',['Arbiter','AsyncRequest','CSS','Ease','PrivacySelectorCustomOption','PrivacySelectorOptionNew','SelectableMenu','SelectableMenuUtils','XPrivacySelectorLoggingController','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;r=babelHelpers.inherits(t,n);s=r&&r.prototype;function t(u,v){'use strict';s.constructor.call(this,u,v);}t.prototype.getItemForIndex=function(u){'use strict';for(var v=0;v<this._items.length;v++){var w=this._items[v];if(w instanceof m&&w.getIndex()==u)return w;}return null;};t.prototype.selectDefaultOption=function(){'use strict';this._items.some(function(u){if(u instanceof m&&this._isDefaultOption(u)){this.setValue(u.getIndex());return true;}return false;},this);};t.prototype.selectOption=function(u){'use strict';var v=null,w=this._items.some(function(x){if(x instanceof m&&!x.isCustomOption()&&x.getPostParam()==u){this.setValue(x.getIndex());return true;}if(x instanceof l){v=x;return false;}if(this._isMoreOption(x)){this.expandMenu();return false;}},this);if(!w&&v){v.setPostParam(u);this.setValue(v.getIndex());}};t.prototype._isDefaultOption=function(u){'use strict';return j.hasClass(u.getRoot(),"_plx");};t.prototype._isMoreOption=function(u){'use strict';return j.hasClass(u.getRoot(),"_po2");};t.prototype._handleItemClick=function(u,v){'use strict';if(!o.doesItemSupportSelect(u))return s._handleItemClick.call(this,u,v);if(this._isMoreOption(u)){this._logMoreClick();this.expandMenu();return;}this._logOptionClick(u);var w=this.inform('itemclick',{item:u,event:v});if(w)return;if(!o.isSelected(u)&&!u.isCustomOption()&&u.select()!==false){this._items.forEach(function(x){if(o.isSelected(x)&&x!==u)x.deselect();});this.inform('change',this.getSelection());}h.inform('composerprivacy/aborteducation');this.done();return u.handleClick();};t.prototype._logMoreClick=function(){'use strict';var u=p.getURIBuilder().setEnum('event','more_options').setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new i().setURI(u).send();};t.prototype._logOptionClick=function(u){'use strict';var v=p.getURIBuilder().setEnum('event',u.getLoggingEventName()).setInt('render_location',this._config.renderlocation).setString('content_type',this._config.contenttype).getURI();new i().setURI(v).send();};t.prototype.expandMenu=function(){'use strict';j.removeClass(this.getRoot(),"_po3");j.addClass(this.getRoot(),"_po4");this.inform('expandMenu');};t.prototype.collapseMenu=function(){'use strict';j.removeClass(this.getRoot(),"_po4");j.addClass(this.getRoot(),"_po3");};t.prototype.updateOptionsAfterTagExpansion=function(u,v){'use strict';this.forEachItem(function(w){if(w instanceof m)w.updateAfterTagExpansion(u,v);});};t.prototype.onPopoverOpen=function(u){'use strict';if(this._config.learnMore)this._config.learnMore.collapse();if(u&&u.isBelowFold()){this.expandMenu();}else this.collapseMenu();if(u&&this._items.indexOf(u)>=15)setTimeout((function(){this._scrollableArea.scrollToBottom(true,{duration:1000,ease:k.sineOut});}).bind(this),250);};f.exports=t;},null);
__d('MenuStaticItem',['DOM','MenuItemBase','React','ReactDOM','cx','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,i);o=n&&n.prototype;function p(q){'use strict';o.constructor.call(this);this._data=q;}p.prototype._renderItemContent=function(){'use strict';var q=h.create('span',{className:"_54nc _54ah"});if(this._data.children){k.render(j.createElement('span',{className:"_54nh"},this._data.children),q);}else h.setContent(q,h.create('span',{className:"_54nh"},this._data.markup));return q;};Object.assign(p.prototype,{handleClick:m});f.exports=p;},null);
__d('PopoverButton',['DOM','DOMQuery','csx','isTextNode'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={setLabel:function(m,n){var o=i.find(m,"._55pe"),p=o.childNodes;for(var q=0;q<p.length;q++)if(k(p[q])){h.replace(p[q],n);return;}h.appendContent(o,n);}};f.exports=l;},null);
__d('PopoverLoadingMenu',['BehaviorsMixin','DOM','PopoverMenuInterface','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=babelHelpers.inherits(o,j);n=m&&m.prototype;function o(p){'use strict';n.constructor.call(this);this._config=p||{};this._theme=p.theme||{};}o.prototype.getRoot=function(){'use strict';if(!this._root){this._root=i.create('div',{className:l("_54nq",this._config.className,this._theme.className)},i.create('div',{className:"_54ng"},i.create('div',{className:"_54nf _54af"},i.create('span',{className:"_54ag"}))));if(this._config.behaviors)this.enableBehaviors(this._config.behaviors);}return this._root;};Object.assign(o.prototype,h,{_root:null});f.exports=o;},null);
__d('PrivacySelectorNewDispatcher',['Dispatcher'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='selector',j=Object.assign(new h(),{handleUpdateFromSelector:function(k){this.dispatch(babelHelpers._extends({payloadSource:i},k));}});f.exports=j;},null);
__d('PrivacySelectorDataStore',['ArbiterMixin','PrivacySelectorNewDispatcher','KeyedCallbackManager'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=new j(),l=babelHelpers._extends({},h,{get:function(m,n){k.executeOrEnqueue(m,n);},hasValueChanged:function(m){return !!k.getResource(m);}});i.register(function(m){if(m.selector_type){var n={};n[m.selector_type]={post_param:m.post_param,unique_id:m.unique_id,reload:m.reload,is_error:m.is_error};k.addResourcesAndExecute(n);l.inform('change');}});f.exports=l;},null);
__d("XPrivacySelectorEventNUXController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/nux\/event_checkin\/",{context_node_id:{type:"String",required:true},event_expansion_type:{type:"Enum",enumType:0},event_id:{type:"String"}});},null);
__d("XPrivacySelectorUpdateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/selector\/update\/",{privacy_fbid:{type:"String",required:true},post_param:{type:"String",required:true},event_expansion_type:{type:"Enum",enumType:0},tags:{type:"IntVector"},render_location:{type:"Int",required:true},is_saved_on_select:{type:"Bool",defaultValue:false},should_return_tooltip:{type:"Bool",defaultValue:false},replace_on_select:{type:"Bool",defaultValue:false},prefix_tooltip_with_app_privacy:{type:"Bool",defaultValue:false},ent_id:{type:"String",required:true},tag_expansion_button:{type:"String"},reload_selector:{type:"Bool",defaultValue:false}});},null);
__d('PrivacySelectorBase',['ArbiterMixin','AsyncRequest','Animation','Button','CSS','CurrentUser','Focus','Input','MenuStaticItem','MenuSelectableItem','PopoverButton','PopoverLoadingMenu','PrivacyConst','DataStore','PrivacySelectorNewDispatcher','PrivacySelectorDataStore','PrivacySelectableMenu','Run','SubscriptionsHandler','TagExpansionButtonConfig','TooltipData','XPrivacySelectorEventNUXController','XPrivacySelectorLoggingController','XPrivacySelectorUpdateController','XUIError','bind','cx','fbt','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){if(c.__markCompiled)c.__markCompiled();var ka,la,ma=t.EventExpansion,na=3;ka=babelHelpers.inherits(oa,ja(h));la=ka&&ka.prototype;function oa(pa,qa,ra,sa,ta,ua){'use strict';la.constructor.call(this);u.set(pa,'selector',this);this._root=pa;this._button=qa;this._config=ua;this._menu=ra;this._popoverMenu=ta;this._input=sa;this._isSavedOnSelect=ua.is_saved_on_select;this._privacyFBID=ua.privacy_fbid;this._contentType=ua.content_type;this._renderLocation=ua.render_location;this._supportsTagExpansion=ua.supports_tag_expansion;this._prefixTooltipApps=ua.should_prefix_tooltip_apps;this._shouldDisplayLabel=ua.should_display_label;this._tags=ua.tagged_uids;this._hasTags=this._tags.length>0;this._eventExpansionType=ua.event_expansion_type;this._entID=ua.ent_id;this._popover=this._popoverMenu.getPopover();this._receivingUpdate=false;this._initTagExpansionButtonState();this._selectorSyncKey=ua.selector_sync_key;this._previousParam=null;this._confirmOnSave=false;this._confirmOnSaveDialogs={};this._listeners=new z();if(ua.use_async_menu){this._listeners.addSubscriptions(this._popoverMenu.subscribe('setMenu',(function(){this._menu=this._popoverMenu.getMenu();if(!(this._menu instanceof x))return;this._onMenuLoad();this._onPopoverOpen();this.inform('asyncMenuLoaded');}).bind(this)));}else this._onMenuLoad();if(this._selectorSyncKey)this._initSelectorSync();y.onLeave(this._cleanup.bind(this));}oa.prototype._cleanup=function(){'use strict';this._listeners&&this._listeners.release();this._listeners=null;};oa.prototype._initSelectorSync=function(){'use strict';this._listeners.addSubscriptions(w.subscribe('change',(function(){w.get(this._selectorSyncKey,(function(pa){if(pa.unique_id!==this._menu._config.id){this._receivingUpdate=true;if(pa.post_param)this.selectOption(pa.post_param);pa.reload&&this.reloadSelector();pa.is_error&&this._displayErrorWithoutFocus();if(!pa.post_param)this._receivingUpdate=false;}}).bind(this));}).bind(this)));if(!this._syncsToDefault())this._listeners.addSubscriptions(this._menu.subscribe('change',(function(){if(!this._shouldDisplaySuccessAndFailure())this._broadcastUpdate();}).bind(this)));};oa.prototype._broadcastUpdate=function(){'use strict';this._broadcastUpdateImpl(false);};oa.prototype._broadcastError=function(){'use strict';this._broadcastUpdateImpl(true);};oa.prototype._broadcastUpdateImpl=function(pa){'use strict';if(!this._receivingUpdate){var qa={selector_type:this._selectorSyncKey,unique_id:this._menu._config.id};if(pa){qa.is_error=pa;}else{var ra=this._getSelectedOption();qa.post_param=ra.getPostParam().toString();}v.handleUpdateFromSelector(qa);}};oa.prototype.shouldReplaceOnPost=function(){'use strict';return this._config.replace_on_post||this.isComposerWithDefault();};oa.prototype.isComposerWithDefault=function(){'use strict';return this._syncsToDefault()&&!this._config.replace_on_select;};oa.prototype._isSelectorForChangingComposerDefault=function(){'use strict';return this._syncsToDefault&&this._config.replace_on_select;};oa.prototype._syncsToDefault=function(){'use strict';return this._config.selector_sync_key==t.PrivacyField.DEFAULT_COMPOSER.toString();};oa.prototype.getIsPublicSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isPublic();};oa.prototype.getIsFriendsSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isFriends();};oa.prototype.getIsOnlyMeSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isOnlyMe();};oa.prototype.getSelectedBaseValue=function(){'use strict';return this._selectedOption&&this._selectedOption.getBaseValue();};oa.prototype.getSelectedPostParam=function(){'use strict';return this._selectedOption&&this._selectedOption.getPostParam().toString();};oa.prototype.getIsCustomOptionSelected=function(){'use strict';return this._selectedOption&&this._selectedOption.isCustomOption();};oa.prototype.setValue=function(pa){'use strict';this._menu.setValue(pa);};oa.prototype.openSelectorExpanded=function(pa){'use strict';this.openSelector((function(){this._menu.expandMenu();pa&&pa();}).bind(this));};oa.prototype.openSelector=function(pa){'use strict';if(this._menu instanceof s){this.subscribeOnce('asyncMenuLoaded',(function(){pa&&pa();}).bind(this));this._popover.showLayer();}else{this._popover.showLayer();pa&&pa();}};oa.prototype.closeSelector=function(){'use strict';this._popover.hideLayer();};oa.prototype.getPopover=function(){'use strict';return this._popover;};oa.prototype.getTriggerButtonElement=function(){'use strict';return this._button;};oa.prototype.getRoot=function(){'use strict';return this._root;};oa.prototype.getMenuElement=function(){'use strict';return this._menu.getRoot();};oa.prototype.selectDefaultOption=function(){'use strict';this._menu.selectDefaultOption();this._updateMenu();};oa.prototype.selectOption=function(pa){'use strict';if(!pa)return;if(this._menu instanceof s){this.subscribeOnce('asyncMenuLoaded',this._selectOptionImpl.bind(this,pa));this._fetchAsyncMenu();}else this._selectOptionImpl(pa);};oa.prototype._selectOptionImpl=function(pa){'use strict';this._menu.selectOption(pa);this._updateMenu();};oa.prototype._updateMenu=function(){'use strict';this._selectedOption=this._getSelectedOption();this.updateDataForItemIndex(this._selectedOption.getIndex(),this._selectedOption.getPostParam().toString());};oa.prototype.setTagExpansionButton=function(pa){'use strict';this._tagExpansionButton=pa;if(this._hasAudienceExpansion()){this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion(),this._getEventExpansionType());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();}};oa.prototype.getTagExpansionButton=function(){'use strict';return this._tagExpansionButton;};oa.prototype._initTagExpansionButtonState=function(){'use strict';this._tagExpansionButton=aa.FRIENDS_OF_TAGGED;var pa=this._getSelectedOption();if(!pa)return;var qa=JSON.parse(pa.getPostParam());if(qa.settings&&qa.settings.no_tag_expansion===true){this._tagExpansionButton=aa.TAGGED_ONLY;}else this._tagExpansionButton=aa.FRIENDS_OF_TAGGED;};oa.prototype._fetchAsyncMenu=function(){'use strict';if(this._config.use_async_menu)this._popoverMenu.fetchMenu();};oa.prototype._getSelectedOption=function(){'use strict';if(!(this._menu instanceof x))return;var pa;this._menu.forEachItem((function(qa){if(qa instanceof q&&qa.isSelected())pa=qa;}).bind(this));return pa;};oa.prototype._onItemClick=function(pa,qa){'use strict';var ra=qa.item;if(ra instanceof p)return;if(ra.isBasicOption()){this.updateDataForItemIndex(ra.getIndex(),ra.getPostParam().toString());}else if(ra.isCustomOption()){this._closeForCustom=true;ra.openDialog(this);}this.inform('click',{customSelected:ra.isCustomOption()});};oa.prototype.getContentType=function(){'use strict';return this._contentType;};oa.prototype.getRenderLocation=function(){'use strict';return this._renderLocation;};oa.prototype.getPostParam=function(){'use strict';return this._postParam;};oa.prototype.getTags=function(){'use strict';return this._tags;};oa.prototype.registerConfirmOnSaveDialog=function(pa,qa,ra){'use strict';this._confirmOnSave=true;if(!(pa in this._confirmOnSaveDialogs))this._confirmOnSaveDialogs[pa]={};ra.subscribe('hide',(function(){if(this._previousParam!==this._postParam)this.selectOption(this._previousParam);}).bind(this));ra.subscribe('button',(function(){this._savePrivacy();ra.hide();}).bind(this));this._confirmOnSaveDialogs[pa][qa]=ra;};oa.prototype.updateDataForItemIndex=function(pa,qa,ra){'use strict';if(ra){this._tagExpansionButton=ra;this.inform('CustomTagExpansion',this._tagExpansionButton);}var sa=this._menu.getItemForIndex(pa);if(sa.isCustomOption())sa.setPostParam(qa);this._selectedOption=sa;this._previousParam=this._postParam;this._postParam=qa;o.setValue(this._input,qa);this._updateTriggerButtonLabel();if(this._shouldUpdateTooltips()){this._updateTooltipAfterChange();}else{if(this._isSavedOnSelect)if(this._confirmOnSave&&this._previousParam in this._confirmOnSaveDialogs&&this._postParam in this._confirmOnSaveDialogs[this._previousParam]){this._confirmOnSaveDialogs[this._previousParam][this._postParam].show();}else this._savePrivacy();this._setTooltipValue(this._selectedOption.getTooltip());}this.inform('changed',{post_param:this._postParam,base_value:this.getSelectedBaseValue()});};oa.prototype._shouldUpdateTooltips=function(){'use strict';return this._prefixTooltipApps||this._supportsTagExpansion||this.getIsCustomOptionSelected();};oa.prototype._savePrivacy=function(){'use strict';this._previousParam=this._postParam;this._sendUpdateRequest();};oa.prototype.reloadSelector=function(){'use strict';this._cleanup();var pa=ea.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setInt('render_location',this._renderLocation).setBool('reload_selector',true).setString('ent_id',String(this._entID)).getURI();new i().setRelativeTo(this._root).setHandler(this.inform.bind(this,'reloaded')).setURI(pa).send();};oa.prototype._sendUpdateRequest=function(){'use strict';var pa=this._isSavedOnSelect&&!this._receivingUpdate,qa=this._shouldUpdateTooltips();if(!pa&&!qa){this._receivingUpdate=false;return;}if(this._shouldDisplaySuccessAndFailure()){k.setIcon(this._button,this._config.spinner);l.show(this._config.spinner);l.hide(this._config.checkmark);}var ra=ea.getURIBuilder().setString('privacy_fbid',String(this._privacyFBID)).setString('post_param',this._postParam).setIntVector('tags',this._tags).setEnum('event_expansion_type',this._eventExpansionType).setInt('render_location',this._renderLocation).setBool('is_saved_on_select',pa).setBool('should_return_tooltip',qa).setBool('prefix_tooltip_with_app_privacy',this._prefixTooltipApps).setBool('replace_on_select',this._config.replace_on_select).setString('ent_id',String(this._entID)).setString('tag_expansion_button',this._tagExpansionButton).getURI(),sa=new i().setRelativeTo(this._root).setHandler(ga(this,function(ta){if(this._shouldDisplaySuccessAndFailure()&&!this._receivingUpdate){l.hide(this._config.spinner);this._updateTriggerButtonLabel();if(this._config.checkmark){this._updateTriggerButtonLabel();var ua=k.getIcon(this._button);l.hide(ua);new j(this._config.checkmark).show().from('opacity',0).to('opacity',1).duration(400).checkpoint().duration(200).checkpoint().from('opacity',1).to('opacity',0).duration(400).hide().ondone(function(){new j(ua).show().from('opacity',0).to('opacity',1).duration(300).go();}).go();}this._broadcastUpdate();}if(this._config.replace_on_select)this._cleanup();if(this._isSelectorForChangingComposerDefault())this._broadcastUpdate();var va=ta&&ta.payload&&ta.payload.tooltip;va&&this._setTooltipValue(ta.payload.tooltip);this.inform('selector_updated');})).setFinallyHandler(ga(this,function(ta){this._receivingUpdate=false;})).setURI(ra);if(this._shouldDisplaySuccessAndFailure())sa.setErrorHandler(ga(this,function(ta){if(this._receivingUpdate){this._displayErrorWithoutFocus();return;}this._menu.selectOption(this._previousParam);this._postParam=this._previousParam;this._displayError();this._broadcastError();}));sa.send();};oa.prototype._displayError=function(){'use strict';this._displayErrorImpl(true);};oa.prototype._displayErrorWithoutFocus=function(){'use strict';this._displayErrorImpl(false);};oa.prototype._displayErrorImpl=function(pa){'use strict';if(this._shouldDisplaySuccessAndFailure()){r.setLabel(this._button,ia._("Select Audience"));k.setIcon(this._button,this._config.error_icon);l.show(this._config.error_icon);ba.remove(this._button);pa&&n.setWithoutOutline(this._button);fa.set({target:this._button,message:ia._("Your selection might not have been saved. We recommend trying again later.")});}};oa.prototype.informEventExpansionChanged=function(pa){'use strict';if(this._eventExpansionType===pa)return;this._eventExpansionType=pa;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion(),this._getEventExpansionType());this._updateTriggerButtonLabel();this._updateTooltipAfterChange();this._maybeShowEventExpansionNUX();};oa.prototype.informTagsChanged=function(pa){'use strict';var qa=this._getTags(pa);this.informTagsChangedWithIDs(qa);};oa.prototype.informTagsChangedWithIDs=function(pa){'use strict';var qa=!pa.length;if(this._hasTags===qa){this._hasTags=!!pa.length;this._menu.updateOptionsAfterTagExpansion(this._showTagExpansion(),this._getEventExpansionType());this._updateTriggerButtonLabel();}if(this._tags.length!==pa.length){this._tags=pa;this._updateTooltipAfterChange();}};oa.prototype._getEventExpansionType=function(){'use strict';return this._eventExpansionType;};oa.prototype._showTagExpansion=function(){'use strict';return this._hasTags&&this._tagExpansionButton.valueOf()===aa.FRIENDS_OF_TAGGED.valueOf();};oa.prototype._getTags=function(pa){'use strict';var qa=[],ra=m.getID();if(pa.withTags)for(var sa=0;sa<pa.withTags.length;sa++){var ta=pa.withTags[sa].info;if(ta.uid!=ra)qa.push(ta.uid);}if(pa.mention)for(var ua in pa.mention)if(pa.mention[ua].type=='user'&&pa.mention[ua].uid!=ra)qa.push(pa.mention[ua].uid);return qa;};oa.prototype._updateTriggerButtonLabel=function(){'use strict';var pa=this._selectedOption.getTriggerIcon();if(this._config.trigger_no_icon)l.hide(pa);k.setIcon(this._button,pa.cloneNode());if(!this._shouldDisplayLabel)return;r.setLabel(this._button,this._selectedOption.getLabel());if(this._config.trigger_style===na){l.conditionClass(this.getTriggerButtonElement(),"_mw-",this.getIsOnlyMeSelected());l.conditionClass(this.getTriggerButtonElement(),"_mw_",this.getIsPublicSelected());}};oa.prototype._updateTooltipAfterChange=function(){'use strict';var pa=ia._("Loading...");this._setTooltipValue(pa);this._sendUpdateRequest();};oa.prototype._setTooltipValue=function(pa){'use strict';pa&&ba.set(this._button,pa);};oa.prototype._onPopoverClose=function(){'use strict';if(!this._getSelectedOption())return;if(this._closeForCustom){this._closeForCustom=false;}else this.inform('selectorFinished');this.inform('close');};oa.prototype._onPopoverOpen=function(){'use strict';if(!(this._menu instanceof x))return;this._menu.onPopoverOpen(this._getSelectedOption());var pa=da.getURIBuilder().setEnum('event','opened').setInt('render_location',this._renderLocation).setString('content_type',this._contentType).getURI();new i().setURI(pa).send();this.inform('open');};oa.prototype._onMenuLoad=function(){'use strict';this._listeners.addSubscriptions(this._menu.subscribe('itemclick',this._onItemClick.bind(this)),this._popover.subscribe('hide',this._onPopoverClose.bind(this)),this._popover.subscribe('show',this._onPopoverOpen.bind(this)));this._listeners.addSubscriptions(this._menu.subscribe('expandMenu',(function(){if(this._popover&&this._popover.getLayer())this._popover.getLayer().updatePosition();}).bind(this)));this._selectedOption=this._getSelectedOption();if(this._selectedOption){this._postParam=this._selectedOption.getPostParam().toString();this._previousParam=this._postParam;this._hasAudienceExpansion()&&this._updateTriggerButtonLabel();}};oa.prototype._hasAudienceExpansion=function(){'use strict';return this._hasTags||this._getEventExpansionType()!=ma.NONE;};oa.prototype._shouldDisplaySuccessAndFailure=function(){'use strict';return this._config.spinner&&this._config.checkmark&&this._config.error_icon;};oa.prototype._maybeShowEventExpansionNUX=function(){'use strict';if(this._getEventExpansionType()==ma.NONE)return;var pa=ca.getURIBuilder().setString('context_node_id',this._button.id).setEnum('event_expansion_type',this._getEventExpansionType()).getURI();new i(pa).send();};f.exports=oa;},null);
__d("StoryTopicMap",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={registerTopics:function(j,k){h[j]=k;},getTopicsForFTID:function(j){return h[j]||[];}};f.exports=i;},null);
__d('SearchFunnelTypeaheadLogger',['Arbiter','Banzai','DOM','Event','PageEvents','PageTransitions','SubscriptionsHandler','URI','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q='search_funnel',r='search_end_to_end',s={focus:'entrant',render:'results_displayed',keydown:'interaction',select:'search'},t,u={init:function(v,w){if(!v||!w)return;this._isColdStart=true;this._sampleRates=w;this._core=v.getCore();this._data=v.getData();this._view=v.getView();this._handler=new n();this.log=this.log.bind(this);this.onKeydown=this.onKeydown.bind(this);this.onSelect=this.onSelect.bind(this);this.onTypeaheadImpression=this.onTypeaheadImpression.bind(this);this._transitionInProgress=true;this.onTypeaheadImpression();},onTypeaheadImpression:function(v){this._initTime=this._getInitTime();this.e2eMarkers=[];if(this._transitionInProgress&&j.scry(document.body,"._4d3w").length===0)this.log('impression',{funnel_path:o.getNextURI().path});this.reset();this._handler.addSubscriptions(this._core.subscribeOnce('focus',this.log),this._view.subscribeOnce('render',this.log),this._view.subscribeOnce('select',this.onSelect));k.listen(this._core.getElement(),'keydown',this.onKeydown);m.registerHandler((function(){this._transitionInProgress=true;}).bind(this));m.registerCompletionCallback(this.onTypeaheadImpression);},onKeydown:function(event){if(!this._sawKeydown){this._sawKeydown=true;this.log('keydown',event);}},onSelect:function(event,v){v.funnel_data={selected_position:v.selected.globalIndex,selected_type:v.selected.type};if(v.selected.isNullState){v.funnel_data.interaction_type='null_state';}else if(v.selected.isSingleState){v.funnel_data.interaction_type='single_state';}else v.funnel_data.interaction_type='typed';this._endToEndPath=o.getMostRecentURI().path;t=null;h.subscribe('BigPipe/init',(function(event,w){if(!w.arbiter)return;var x={arbiter:w.arbiter,event:l.AJAXPIPE_ONLOAD,markers:this.e2eMarkers,init_time:this._initTime,from_path:this._endToEndPath};setTimeout((function(){this.setupE2EPerfLogging(x);}).bind(this),0);}).bind(this));this.log(event,v);},reset:function(){this._handler.release();this._handler.engage();this._sawKeydown=false;this._transitionInProgress=false;},log:function(v,w){if(s[v])v=s[v];this.e2eMarkers.push({event:v,time:String(Date.now()-this._initTime)});if(!this._sampleRates[v])return;w=w||{};w.funnel_data=w.funnel_data||{};w.funnel_data.sample_rate=this._sampleRates[v];w.funnel_data.current_event_time=Date.now();if(this._prevTime&&this._prevEvt){w.funnel_data.previous_event_time=this._prevTime;w.funnel_data.previous_event=this._prevEvt;}this._prevTime=w.funnel_data.current_event_time;this._prevEvt=v;i.post(q,{funnel_data:w.funnel_data,path:w.funnel_path||m.getMostRecentURI().path,stage:v},i.VITAL);},setupE2EPerfLogging:function(v){return v.arbiter.subscribeOnce(v.event,(function(w){if(t)return;t=true;v.markers.push({event:'end',time:String(Date.now()-v.init_time)});i.post(r,{from_path:this._endToEndPath,to_path:o.getNextURI().path,markers:v.markers,cold_start:this._isColdStart},i.VITAL);this._isColdStart=false;}).bind(this));},_getInitTime:function(){if(window.ExitTime)return window.ExitTime;var v=window.performance||window.msPerformance;if(!v||!v.timing)return;return v.timing.navigationStart;}};f.exports=u;},null);
__d('SearchSingleState',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k,l,m,n){return {classNames:'grammar',groupIndex:0,indexInGroup:k,path:l,text:m,type:'grammar',uid:n};}var j={getSuggestions:function(k,l,m){if(m==='ent:user'){return this.getSuggestionsForUser(k,l);}else if(m==='ent:page'){return this.getSuggestionsForPage(k,l);}else if(m==='ent:app'){return this.getSuggestionsForApp(k,l);}else if(m==='ent:group')return this.getSuggestionsForGroup(k,l);},getSuggestionsForUser:function(k,l){return [i(0,'/search/'+k+'/photos-of',h._("photos of {full name}",[h.param('full name',l)]),'photos_of_user'),i(1,'/search/'+k+'/friends',h._("friends of {full name}",[h.param('full name',l)]),'friends_of_user'),i(2,'/search/'+k+'/pages-liked',h._("favorite pages of {full name}",[h.param('full name',l)]),'pages_liked_user'),i(3,'/search/str/'+l+'/users-named',h._("find all people named \"{full name}\"",[h.param('full name',l)]),'people_named_text')];},getSuggestionsForPage:function(k,l){return [i(0,'/search/'+k+'/photos-of',h._("photos of {name of page}",[h.param('name of page',l)]),'photos_of_page'),i(1,'/search/'+k+'/likers',h._("people who like {name of page}",[h.param('name of page',l)]),'page_likers'),i(2,'/search/str/'+l+'/pages-named',h._("find all pages named \"{name of page}\"",[h.param('name of page',l)]),'pages_named_text')];},getSuggestionsForGroup:function(k,l){return [i(0,'/search/'+k+'/members',h._("{name of group} members",[h.param('name of group',l)]),'members_of_group'),i(1,'/search/'+k+'/photos-in',h._("photos in {name of groups}",[h.param('name of groups',l)]),'photos_in_group'),i(2,'/search/'+k+'/creators',h._("{name of group} creators",[h.param('name of group',l)]),'creators_of_group'),i(3,'/search/'+k+'/admins',h._("{name of group} administrators",[h.param('name of group',l)]),'admins_of_group')];},getSuggestionsForApp:function(k,l){return [i(0,'/search/'+k+'/apps-similar-to',h._("apps similar to {name of app}",[h.param('name of app',l)]),'similar_apps'),i(1,'/search/'+k+'/app-users',h._("people who use {name of app}",[h.param('name of app',l)]),'app_users'),i(2,'/search/str/'+l+'/pages-named',h._("find all apps named \"{name of page}\"",[h.param('name of page',l)]),'apps_named_text')];}};f.exports=j;},null);
__d('SearchDataSource',['Event','Arbiter','AsyncResponse','DataSource','HashtagSearchResultUtils','createArrayFromMixed','PageTransitionsRegistrar','SearchSingleState','UnicodeCJK','FacebarJSConstants','debounce','errorCode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t,u,v=100,w='/typeahead/search/facebar/nullstate/';t=babelHelpers.inherits(x,k);u=t&&t.prototype;function x(y){'use strict';u.constructor.call(this,y);this._token=y.token||'';this._lazyonload=y.lazyonload===false?false:true;this._extraTypes=y.extraTypes;this._buckets=y.buckets;this._noMultiFetch=y.noMultiFetch||false;this._nullStateConfig=y.nullStateConfig||{};var z=y.maxResults||8;this._numResults={min:3,max:z};this.recordingRoute='non_banzai';this._enabledHashtag=y.enabledHashtag||false;this.logBackendQueriesWindow=y.logBackendQueriesWindow||25;this._genTime=y.genTime;this._bootstrapError=false;this._hasKeywordBootstrap=y.hasKeywordBootstrap||false;this._addJoinedTermsMatching=y.addJoinedTermsMatching||false;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:true,prefix_kana_drop_trailing_latin:y.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:y.cjkUiCacheHiraganaToKatakana,search_i18n_prefix_arabic_normalization:y.arabicNormalization});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:y.cjkDropLatinInCjTokens});}x.prototype.init=function(){'use strict';u.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=true;this._updateMaxResults();var y=r(this._updateMaxResults,v,this,true);h.listen(window,'resize',y);if(this._nullStateConfig.prefetchNullState)this.fetchNullState('');if(this._nullStateConfig.singleState)i.subscribe('page_transition',this.handlePageTransition.bind(this));if(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)i.subscribe('search/updateNullState',this.updateNullState.bind(this));if(this._nullStateConfig.recent)i.subscribe('search/refreshRecentSearchesNullstate',this.refreshRecentSearches.bind(this));};x.prototype.refreshRecentSearches=function(){'use strict';this.nullStateData=null;};x.prototype.handlePageTransition=function(){'use strict';this.nullStateParams={};};x.prototype.updateNullState=function(event,y){'use strict';this.nullStateParams=y;this.fetchNullState();};x.prototype.markResultsAsNullState=function(y){'use strict';if(y)for(var z=y,aa=Array.isArray(z),ba=0,z=aa?z:z[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ca;if(aa){if(ba>=z.length)break;ca=z[ba++];}else{ba=z.next();if(ba.done)break;ca=ba.value;}var da=ca;da.isNullState=true;}};x.prototype.markResultsAsSingleState=function(y){'use strict';if(y)for(var z=y,aa=Array.isArray(z),ba=0,z=aa?z:z[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ca;if(aa){if(ba>=z.length)break;ca=z[ba++];}else{ba=z.next();if(ba.done)break;ca=ba.value;}var da=ca;da.isSingleState=true;}};x.prototype.fetchNullState=function(y){'use strict';this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var z=null;if(this.nullStateParams&&this.nullStateParams.uid){this.nullStateParams.query=y||'';z=this._fetchDataForSingleState();this.markResultsAsNullState(z);}else{z=this._fetchDataForNullState();this.markResultsAsSingleState(z);}if(z)this.inform('respond',{value:this.nullStateParams?this.nullStateParams.query:'',results:z,isAsync:false,nullState:true});};x.prototype._fetchDataForSingleState=function(){'use strict';if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==='ent:app'||this.nullStateParams.type==='ent:group'||this.nullStateParams.type==='ent:page'){this.fetch(w,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:true});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return;}var y=o.getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!y)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:y,profileID:this.nullStateParams.uid};return y;};x.prototype._shouldRefreshNullState=function(){'use strict';if(!this._nullStateConfig.recent)return false;var y=window.location.href;if(!y)return false;if(y.contains('allactivity')&&y.contains('log_filter=search'))return true;return false;};x.prototype._fetchDataForNullState=function(){'use strict';if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);setTimeout((function(){this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});}).bind(this),0);return;}if(!this.fetchingNullState){this.fetchingNullState=true;this.fetch(w,{value:""},{nullState:true,value:''});}return null;};x.prototype.dirty=function(){'use strict';u.dirty.call(this);this._bootstrapError=false;this._fetchOnUseRequests=[];};x.prototype.asyncErrorHandler=function(y,z){'use strict';if(z.nullState)this.fetchingNullState=false;if(z.bootstrap)this._bootstrapError=true;this.inform('fetchError',{response:y,fetch_context:z});if(window.Dialog&&window.Dialog.getCurrent()==null&&y.getError()==1400003)j.verboseErrorHandler(y);};x.prototype.fetch=function(y,z,aa){'use strict';aa=aa||{};aa.fetch_start=Date.now();var ba=n.getMostRecentURI().path;z=babelHelpers._extends({},z,{path:ba});u.fetch.call(this,y,z,aa);};x.prototype.fetchHandler=function(y,z){'use strict';if(z.nullState){this.fetchingNullState=false;this.nullStateData=y.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform('respond',{value:'',results:this.nullStateData,isAsync:true,nullState:true});return;}if(z.singleState){this.nullStateDataWithProfile.data=y.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform('respond',{results:this.nullStateDataWithProfile.data,isAsync:true,value:this.nullStateParams?this.nullStateParams.query:'',nullState:true});return;}var aa=y.getPayload(),ba=babelHelpers._extends({fetch_end:Date.now()},z),ca=ba.value?i.BEHAVIOR_EVENT:i.BEHAVIOR_PERSISTENT;this.inform('beginFetchHandler',{response:y});if(z.bootstrap)this._bootstrapError=false;if(z.type=='lean'){this._leanPayload=aa;this._processLean();}else{if(aa.coeff2_ts)ba.coeff2_ts=aa.coeff2_ts;u.fetchHandler.call(this,y,z);if(z.bootstrap&&!y.getRequest().getData().no_cache)ba.browserCacheHit=aa.timestamp<this._genTime;if(z.bootstrap&&!aa.no_data&&this._bootstrapRequestsPending>0){z.bootstrap=false;--this._bootstrapRequestsPending;!this._bootstrapRequestsPending&&this._bootstrapPostProcess();}if(aa.no_data||aa.stale||aa.token!==this._token){var da=babelHelpers._extends({},y.getRequest().getData());if(da.lazy){delete da.lazy;da.token=this._token;this._fetchOnUse(da,z);}}}this.inform('endpointStats',{info:ba,response:y},ca);if(z&&!!z.value)this.inform('completeFetch',{response:y,stats:ba});};x.prototype.respond=function(y,z,aa){'use strict';this.inform('respondValidUids',z);this.inform('reorderResults',z);var ba=this.buildData(z,y);ba.forEach(function(ca,da){ca.origIndex=da;ca.fromCache=!aa;});this.inform('respond',{value:y,results:ba,isAsync:!!aa});return ba;};x.prototype.buildData=function(y,z){'use strict';if(!y||y.length===0)return [];var aa=y.map(this.getEntry,this);aa.length=Math.min(aa.length,this._maxResults);return aa;};x.prototype.fetchLean=function(){'use strict';this._fetchLean();};x.prototype._isQueryTooShort=function(y){'use strict';return y.length<this._minQueryLength&&!this._performShortQuery&&!p.hasIdeoOrSyll(y);};x.prototype.shouldFetchMoreResults=function(y){'use strict';return y.length<this._maxResults;};x.prototype._bootstrapRenderCostsToIndex=function(y,z){'use strict';y.index=1;for(var aa in z)if(y.index>z[aa])y.index=z[aa];};x.prototype._bootstrapPostProcess=function(){'use strict';var y=0;for(var z in this._data)if(this._data.hasOwnProperty(z)){y++;if(this._data[z].hasOwnProperty('grammar_costs'))this._bootstrapRenderCostsToIndex(this._data[z],this._data[z].grammar_costs);}this.inform('bootstrapped',{time:Date.now(),size:y},i.BEHAVIOR_PERSISTENT);this._processLean();};x.prototype._processLean=function(){'use strict';if(this._leanPayload){var y,z=this._leanPayload.entries;for(var aa in z){y=this.getEntry(aa);if(y)if(typeof z[aa]==='object'){this._bootstrapRenderCostsToIndex(y,z[aa]);}else y.index=z[aa];}this.setExclusions(this._leanPayload.blocked);this._leanPayload=null;}};x.prototype._updateMaxResults=function(){'use strict';var y=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+(y-370)/56))));};x.prototype._bootstrapFetch=function(y,z){'use strict';var aa=babelHelpers._extends({},z,this.bootstrapData);if(this._criticalOnly&&this._lazyonload)aa.lazy=1;this.fetch(this.bootstrapEndpoint,aa,{bootstrap:true,type:y});++this._bootstrapRequestsPending;};x.prototype._fetchOnUse=function(y,z){'use strict';for(var aa in this.bootstrapData)!y.hasOwnProperty(aa)&&(y[aa]=this.bootstrapData[aa]);if(this._criticalOnly){this._fetchOnUseRequests.push({args:y,ctx:z});}else this.fetch(this.bootstrapEndpoint,y,z);};x.prototype._fetchLean=function(){'use strict';var y={no_cache:1};y.options=m(y.options);y.options.push('lean');this._fetchOnUse(y,{type:'lean'});};x.prototype.bootstrap=function(y){'use strict';if(!y){this._criticalOnly=false;this._flushFetchOnUseRequests();}if(this._bootstrapped)return;var z={filter:['event'],no_cache:1};this._fetchOnUse(z,{type:'event'});var aa=['app','page','group','friendlist'];aa=aa.concat(this._extraTypes||[]);var ba=[];if(this._hasKeywordBootstrap)ba.push(q.keywordType);if(this._noMultiFetch){aa.push('user');aa=aa.concat(ba);this._bootstrapFetch('user',{filter:aa});}else{this._bootstrapFetch('other',{filter:aa});if(this._buckets){for(var ca=0;ca<this._buckets.length;++ca){var da={filter:['user'],buckets:this._buckets[ca]};this._bootstrapFetch('user',da);}}else this._bootstrapFetch('user',{filter:['user']});if(ba.length>0)this._bootstrapFetch('keyword',{filter:ba});}this._fetchLean();this._bootstrapped=true;};x.prototype.getBootstrapError=function(){'use strict';return this._bootstrapError;};x.prototype._flushFetchOnUseRequests=function(){'use strict';var y=this._fetchOnUseRequests.length;for(var z=0;z<y;++z){var aa=this._fetchOnUseRequests[z];this.fetch(this.bootstrapEndpoint,aa.args,aa.ctx);}if(y>0)this.inform('extra_bootstrap',{time:Date.now()},i.BEHAVIOR_PERSISTENT);this._fetchOnUseRequests=[];};x.prototype.onLoad=function(y,z){'use strict';this.inform('onload',{time:Date.now()},i.BEHAVIOR_PERSISTENT);if(y)setTimeout(this.bootstrap.bind(this,z),0);};x.prototype.mergeUids=function(y,z,aa,ba){'use strict';var ca=this.getDynamicHashtagResult(ba);if(ba&&ca&&z.indexOf(ca)<=0)z.unshift(ca);var da=aa[0]?this.getEntry(aa[0]):null,ea=z[0]?this.getEntry(z[0]):null,fa=da&&da.replace_results?da:null;fa=!fa&&ea&&ea.replace_results?ea:fa;var ga=u.mergeUids.call(this,y,z,aa,ba);if(fa){this.inform('backend_topreplace',{});return this.deduplicateByKey([fa.uid].concat(ga));}return ga;};x.prototype.getTextToIndexFromFields=function(y,z){'use strict';var aa=[],ba=y.tokenVersion==="v2";for(var ca=0;ca<z.length;++ca){if(ba&&(z[ca]==="text"||z[ca]==="alias"))continue;var da=y[z[ca]];if(da){da=da.join?da.join(' '):da;aa.push(da);if(z[ca]=='text'&&this._addJoinedTermsMatching){da=da.toLowerCase();da=da.replace(/ /g,'');aa.push(da);}}}return aa.join(' ');};x.prototype.getDynamicHashtagResult=function(y){'use strict';if(!y||!this._enabledHashtag)return;var z=l.getHashtagFromQuery(y);if(!z)return;var aa='hashtag:'+z,ba=this.getEntry(aa);if(!ba)this.processEntries([l.makeTypeaheadResult(z)],y);return aa;};f.exports=x;},null);
__d('legacy:SearchDataSource',['SearchDataSource'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.SearchDataSource=c('SearchDataSource');},3);
__d('SearchTypeaheadCore',['Arbiter','DOM','Event','Input','Keys','Parent','ScriptPath','TypeaheadCore'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;p=babelHelpers.inherits(r,o);q=p&&p.prototype;function r(s){'use strict';q.constructor.call(this,s);}r.prototype.init=function(s,t,u){'use strict';q.init.call(this,s,t,u);var v=m.byTag(u,'form'),w=this.reset.bind(this);h.subscribe('pre_page_transition',function(event,y){var z=/^\/search/,aa=z.test(y.from.path),ba=z.test(y.to.path);if(aa&&!ba)setTimeout(w,0);});if(v){var x=i.find(v,'input.search_sid_input');j.listen(v,'submit',(function(){if(this.data&&this.data.queryData)x.value=this.data.queryData.sid;setTimeout(w,0);}).bind(this),j.Priority.URGENT);}};r.prototype.select=function(){'use strict';this.reset();this.element.focus();setTimeout((function(){this.element.blur();}).bind(this),0);n.setClickPointInfo({click:'Search'});};r.prototype.handleTab=function(event){'use strict';var s=this.view.getQuerySuggestion(this.value);if(s){k.setValue(this.element,s);this.checkValue();event.kill();}else q.handleTab.call(this,event);};r.prototype.getSearchType=function(){'use strict';return 'regular';};r.prototype.focus=function(){'use strict';q.focus.call(this);if(this.getValue().length===0||this.element.getAttribute('singlestate')==='true')this.data.fetchNullState(this.getValue());};r.prototype.keyup=function(event){'use strict';if(this.getValue().length===0&&j.getKeyCode(event)===l.ESC)return;if(this.getValue().length===0)this.data.fetchNullState(this.getValue());this.element.setAttribute('singlestate',false);};f.exports=r;},null);
__d('legacy:SearchTypeaheadCore',['SearchTypeaheadCore'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.SearchTypeaheadCore=c('SearchTypeaheadCore');},3);
__d('SearchPeopleFriendsOf',['TokenizeUtil','URI','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';this.friendsOfUri=l;this.placementStrategy=m.placement_strategy;this.placementParams=m.placement_params;this.triggerStrategy=m.trigger_strategy;this.triggerParams=m.trigger_params;}k.prototype.injectInto=function(l,m){'use strict';if(!l||l.length===0||!this.$SearchPeopleFriendsOf1(l,m))return;if(l[0].type!=="user")return;var n=this.createFindAllFriendsOf(l[0].text,l[0].uid);this.$SearchPeopleFriendsOf2(n,l);};k.prototype.$SearchPeopleFriendsOf2=function(l,m){'use strict';var n=this.$SearchPeopleFriendsOf3(m);if(n==='last'){var o=m.filter(function(p){return p.type==='user';}).length;n=o;}m.splice(n,0,l);};k.prototype.$SearchPeopleFriendsOf1=function(l,m){'use strict';var n=this.$SearchPeopleFriendsOf4(this.triggerStrategy);return n(l,this.triggerParams,m);};k.prototype.$SearchPeopleFriendsOf3=function(l){'use strict';var m=this.$SearchPeopleFriendsOf4(this.placementStrategy);return m(l,this.placementParams);};k.prototype.$SearchPeopleFriendsOf4=function(l){'use strict';return this["$SearchPeopleFriendsOf_"+l];};k.prototype.$SearchPeopleFriendsOf5=function(l,m,n){'use strict';return false;};k.prototype.$SearchPeopleFriendsOf6=function(l,m,n){'use strict';return true;};k.prototype.$SearchPeopleFriendsOf7=function(l,m,n){'use strict';var o=parseInt(m,10),p=0;for(var q=0;q<l.length;q++){var r=l[q];if(r.type==='user'&&r.index_rank==-1)p++;if(p>o)return false;}return true;};k.prototype.$SearchPeopleFriendsOf8=function(l,m,n){'use strict';var o=parseInt(m,10),p=h.tokenize(n);p=p.map(function(x){return x.toLowerCase();});var q=0;for(var r=0;r<l.length;r++){var s=l[r];if(s.type!=='user'||s.index_rank!=-1)continue;var t=h.tokenize(s.text);t=t.map(function(x){return x.toLowerCase();});if(t.length<p.length)continue;var u=true;for(var v=0;v<p.length-1;v++)if(p[v]!==t[v]){u=false;break;}var w=p.length-1;if(u&&t[w].startsWith(p[w])){q++;if(q>=o)return false;}}return true;};k.prototype.$SearchPeopleFriendsOf9=function(l,m){'use strict';return "last";};k.prototype.$SearchPeopleFriendsOf10=function(l,m){'use strict';return 1;};k.prototype.createFindAllFriendsOf=function(l,m){'use strict';var n=j._("{name}'s Friends",[j.param('name',l)]),o=new i(this.friendsOfUri).addQueryData({q:"",init:'psm',fofid:m}).toString();return {uid:'people_search',type:'user',text:n,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',logType:'grammar',path:o};};f.exports=k;},null);
__d('SearchPeopleSeeMore',['TokenizeUtil','URI','fbt','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n){'use strict';var o=n.placement,p=n.strategy,q=n.min_users,r=n.query_to_show;this.seeMoreUri=m;this.placement=o;this.strategy=p;this.min_users=q;this.query_to_show=r;}l.prototype.injectInto=function(m,n){'use strict';if(!m||m.length===0)return;var o=this.$SearchPeopleSeeMore1(m,n);if(!o)return;var p=this.createFindAllPeopleResult(o);this.$SearchPeopleSeeMore2(p,m);};l.prototype.$SearchPeopleSeeMore1=function(m,n){'use strict';if(this.strategy==='disabled')return null;if(m[0].type!=='user')return null;var o=m.filter(function(s){return s.type==='user';});if(o.length<this.min_users){return null;}else if(o.length>this.min_users)o=o.slice(0,this.min_users);var p,q=o[0];switch(this.strategy){case 'all_identical':var r=o.every((function(s){return this.$SearchPeopleSeeMore3(q.text,s.text);}).bind(this));p=r?q.text:null;break;case 'top_results_prefix':p=o.reduce((function(s,t){return this.$SearchPeopleSeeMore4(s,t.text);}).bind(this),q.text);break;default:k(0);}if(!p)return null;return this.query_to_show==='common'?p:n;};l.prototype.$SearchPeopleSeeMore2=function(m,n){'use strict';if(this.placement==='last'){var o=n.filter(function(q){return q.type==='user';}).length;n.splice(o,0,m);}else{var p=parseInt(this.placement,10);n.splice(p,0,m);}};l.prototype.createFindAllPeopleResult=function(m){'use strict';var n=j._("Find all people named \"{query}\"",[j.param('query',m.toLowerCase())]),o=new i(this.seeMoreUri).addQueryData({q:m,init:'psm'}).toString();return {uid:'people_search',type:'user',text:n,classNames:'seeAllUser',photo:'/images/search_typeahead/people_see_more.png',path:o};};l.prototype.$SearchPeopleSeeMore3=function(m,n){'use strict';if(m===n)return true;var o=h.tokenize(m),p=h.tokenize(n);if(o.length!==p.length)return false;return o.every(function(q,r){return q===p[r];});};l.prototype.$SearchPeopleSeeMore4=function(m,n){'use strict';if(!m||!n)return;if(m===n)return m;var o=h.tokenize(m),p=h.tokenize(n),q=[];for(var r=0;r<o.length&&r<p.length;r++)if(o[r]===p[r]){q.push(o[r]);}else break;if(q.length===0)return null;return q.join(' ');};f.exports=l;},null);
__d('SearchTypeaheadView',['Arbiter','ContextualLayerUpdateOnScroll','ContextualTypeaheadView','DOM','SearchPeopleFriendsOf','SearchPeopleFriendsOfOptions','SearchPeopleSeeMore','SearchPeopleSeeMoreOptions','URI','cx','fbt','goURI','isEmail'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;u=babelHelpers.inherits(w,j);v=u&&u.prototype;function w(y,z){'use strict';v.constructor.call(this,y,z);this._peopleSeeMore=new n(this.getSeeMoreEndpoint('',true),o);this._peopleFriendsOf=new l(this.getSeeMoreEndpoint('',true),m);}w.prototype.initializeLayer=function(){'use strict';v.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(i);};w.prototype.ignoreClick=function(event){'use strict';event.prevent();};w.prototype.render=function(y,z,aa){'use strict';if(!z)return;if(this._bucketize)z=x(z);if(this.showPeopleSeeMore&&y)this._peopleSeeMore.injectInto(z,y);if(this.showPeopleFriendsOf&&y)this._peopleFriendsOf.injectInto(z,y);var ba={results:z,value:y};this.inform('finalResultsReordering',ba);return v.render.call(this,y,ba.results,aa);};w.prototype.disableBucketization=function(){'use strict';this._bucketize=false;};w.prototype.buildBuckets=function(y,z){'use strict';var aa=z.length,ba=0,ca;for(ca=0;ca<aa;++ca)if(z[ca].type=='user')ba++;this._redirectToUsersResultsPage=this.showFilterResults&&ba===aa;this.setWebSuggLoggingParams(y,z);if(!y&&this.showFindPeople)z.unshift(this.buildFindPeople());if(this._bucketize)z=v.buildBuckets.call(this,y,z);if(y&&this._shouldShowSeeMore){z.push(this.buildSeeMore(y,aa));if(t(y)&&ba<1)z.push(this.buildInvite(y));}return z;};w.prototype.buildFindPeople=function(){'use strict';var y=r._("Find people");return {classNames:'seeAllUser seeAllUserNullState',logType:'grammar',path:this.getSeeMoreEndpoint(null,true),photo:'/images/search_typeahead/people_see_more.png',text:y,type:'no_header'};};w.prototype.buildSeeMore=function(y,z){'use strict';var aa=this.getSeeMoreText(y,z),ba=this.getSeeMoreSubtext(z),ca,da,ea,fa='',ga='',ha='';if(this.showseemorev2){da='seeMoreV2';ea='calltoactionV2';ha=k.create('span',{className:'simpleSearchSeeMoreRowRedesignIcon'});}else{da='seeMore';ea='calltoaction';fa=k.create('span',{className:'arrow'});ga=k.create('span',{className:'subtext'},[ba]);}ca=k.create('li',{className:ea},[ha,k.create('a',{href:this.getSeeMoreEndpoint(y),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:da},aa),fa,ga])])]);ca.setAttribute('aria-label',aa);return {uid:'search',node:ca,search:true};};w.prototype.getSeeMoreText=function(y,z){'use strict';if(this.showKeywordResultsPage)return r._("Search for {query}",[r.param('query',y)]);if(z<=0)return r._("See results for {query}",[r.param('query',y)]);if(this._redirectToUsersResultsPage)return r._("Filter results for {query}",[r.param('query',y)]);if(this.showseemorev2){var aa=k.create('b',{},y);return r._("Find more results for {query}",[r.param('query',aa)]);}else return r._(["See more results for {query}","44e6d113d67af68d7209174cf9420c3d"],[r.param('query',y)]);};w.prototype.getSeeMoreSubtext=function(y){'use strict';if(y===0)return r._("No results to display");if(y===1)return r._("Displaying top result");return r._({"*":"Displaying top {number} results"},[r.param('number',y,[0])]);};w.prototype.buildInvite=function(y){'use strict';var z=r._("Invite {query} to Facebook",[r.param('query',y)]),aa=k.create('li',{className:'calltoaction'},[k.create('a',{href:this.getInviteEndpoint(y),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:'invite'},[z])])])]);aa.setAttribute('aria-label',z);return {uid:'invite',node:aa,search:true};};w.prototype.searchPageQueryData=function(y){'use strict';return babelHelpers._extends({q:y},this.queryData||{});};w.prototype.searchPageTypeData=function(y){'use strict';return this._redirectToUsersResultsPage||y?{type:"users"}:{};};w.prototype.select=function(y){'use strict';var z=this.index,aa=this.results[z];if(!aa||aa.type=='header')return;var ba=this.items[z],ca=k.scry(ba,'a')[0];v.select.call(this,y);if(ca&&ca.href)if(ca.target=='_blank'){window.open(ca.href);}else s(ca.href);};w.prototype.setSid=function(y){'use strict';this.queryData.tas=y;};w.prototype.getSeeMoreEndpoint=function(y,z){'use strict';return new p(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(y)).addQueryData(this.searchPageTypeData(z)).toString();};w.prototype.getInviteEndpoint=function(y){'use strict';return new p('/invite.php').addQueryData({email_list:y});};w.prototype.show=function(){'use strict';if(!this.isVisible()){h.inform('layer_shown',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||k.scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0])CSS.addClass(this.searchBtns[0],"btnSelected");v.show.call(this);}};w.prototype.hide=function(){'use strict';if(this.isVisible()){h.inform('layer_hidden',{type:'SearchTypeahead'});this.searchBtns=this.searchBtns||k.scry(this.typeahead,'button.reDesignedBtn');if(this.searchBtns[0]&&CSS.hasClass(this.searchBtns[0],"btnSelected"))CSS.removeClass(this.searchBtns[0],"btnSelected");v.hide.call(this);}};w.prototype.getQuerySuggestion=function(y){'use strict';var z=this.results[this.index],aa=z&&z.type!='header'?z.text.toLowerCase():'';return aa==y.toLowerCase()?'':aa;};w.prototype.setWebSuggLoggingParams=function(y,z){'use strict';var aa=0,ba=0;for(var ca=0;ca<z.length;ca++)if(z[ca].type==='websuggestion'){if(ba===0)ba=ca+1;var da='FR'+(ca-aa)+'AS'+aa,ea=ca+1;z[ca].path+='&wssk='+da+'&wssp='+ea+'&wspq='+encodeURIComponent(y);z[ca].path+='&wssrc='+z[ca].websuggestion_source;aa++;}var fa='&wssc='+z.length+'-'+y.length+'&wsbp='+aa+'-'+ba;for(ca=0;ca<z.length;ca++)if(z[ca].type==='websuggestion')z[ca].path+=fa;};function x(y){var z,aa,ba,ca,da=[],ea={};aa=y.length;for(z=0;z<aa;z++){ba=y[z];ca=ba.render_type||ba.type;if(!ea.hasOwnProperty(ca)){ea[ca]=da.length;da.push([]);}da[ea[ca]].push(ba);}var fa=[];aa=da.length;for(z=0;z<aa;++z){ba=da[z][0];ca=ba.render_type||ba.type;fa=fa.concat(da[z]);}return fa;}Object.assign(w.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});f.exports=w;},null);
__d('legacy:SearchTypeaheadView',['SearchTypeaheadView'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.SearchTypeaheadView=c('SearchTypeaheadView');},3);
__d('QueryHistory',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={set:function(j,k){h[this._key(j)]=k;},get:function(j){return h[this._key(j)];},_key:function(j){return 'uri-'+j.getQualifiedURI().toString();}};f.exports=i;},null);
__d('SearchTypeaheadRecorder',['AsyncRequest','Banzai','BanzaiNectar','BanzaiScuba','CurrentUser','Event','FacebarGlobalOptions','Keys','TokenizeUtil','Vector','clickRefAction','mapObject','ge','throttle','whitelistObjectKeys'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w={WAITING:'WAITING',SUCCESS:'SUCCESS',NO_RESULTS:'NO_RESULTS',ERROR:'ERROR'};function x(z){'use strict';this.init(z);this.initEvents(z);}x.prototype.init=function(z){'use strict';this.core=z.getCore();this.data=z.getData();this.view=z.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};this.allFromSingleState=false;this.allFromNullState=false;var aa=t('search_first_focus');this.initStartTime=aa&&aa.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset();};x.prototype._reset=function(){'use strict';this.stats={};this.avgStats={};this.appendStats={};this._backspacing=false;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=false;this._inflightRequests={};var z=Math.random().toString();this.data.setQueryData({sid:z});this.view.setSid(z);this.recordStat('sid',z);this.recordStat('keypressed',0);};x.prototype.initEvents=function(){'use strict';this.core.subscribe('focus',(function(event){if(!this.stats.session_start_time){this.recordStat('session_start_time',Date.now());var z=new Date(),aa=z.getTimezoneOffset(),ba=Date.now()-aa*60*1000;this.recordStat('session_start_time_user_timezone',ba);}}).bind(this));this.core.subscribe('blur',(function(event){var z=Date.now();for(var aa in this._inflightRequests){var ba=this._inflightRequests[aa],ca=z-ba;this.recordAvgStat('search_endpoint_ms_from_js',ca);}this.recordStat('session_end_time',z);this.submit();}).bind(this));this.view.subscribe('select',(function(z,aa){this.recordSelectInfo(aa);}).bind(this));this.view.subscribe('render',(function(z,aa){this.recordRender(aa);}).bind(this));this.data.subscribe('logPerformanceTiming',(function(z,aa){this.performanceTimings[aa.field]=aa.value;}).bind(this));this.data.subscribe('activity',(function(z,aa){this.recordStat('pending_request',aa.activity);}).bind(this));this.data.subscribe('respondValidUids',(function(z,aa){this.validUids=aa.slice(0);}).bind(this));this.data.subscribe('beforeQuery',(function(z,aa){if(!aa.value){this.query='';this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return;}if(!this.stats.first_query_time)this.recordStat('first_query_time',Date.now());this.query=aa.value;if(!this.queryStartTime)this.queryStartTime=[];this.queryStartTime[this.query]=Date.now();this.recordCountStat('num_queries');}).bind(this));this.data.subscribe('queryEndpoint',(function(z,aa){this.recordCountStat('num_search_ajax_requests');this.recordAvgStat('endpoint_query_length',aa.value.length);this._inflightRequests[aa.value]=Date.now();}).bind(this));this.data.subscribe('onload',(function(z,aa){this._onloadTime=aa.time;}).bind(this));this.data.subscribe('bootstrapped',(function(z,aa){this.bootstrapStats.endTime=aa.time;this.bootstrapStats.bootstrapped=1;}).bind(this));this.core.subscribe('recordFunction',(function(z,aa){this._extraRecorder.push(aa);}).bind(this));this.data.subscribe('endpointStats',(function(z,aa){var ba=aa.info,ca=ba.fetch_end-ba.fetch_start;if(ba.value){this.recordAvgStat('search_endpoint_ms_from_js',ca);}else this.bootstrapStats[ba.type]=ca;if(ba.coeff2_ts)this.bootstrapStats.coeff2_ts=ba.coeff2_ts;if(typeof ba.browserCacheHit!='undefined')this.recordCountStat(ba.browserCacheHit?'bootstrap_cachehits':'bootstrap_cachemisses');if(this._inflightRequests[ba.value])delete this._inflightRequests[ba.value];}).bind(this));this.data.subscribe('fetchComplete',(function(z,aa){var ba=aa.entries,ca=aa.value;if(ca&&this.backendQueriesStatus[ca]){this._addDurationForBackendQuery(this.backendQueriesStatus[ca]);this.backendQueriesStatus[ca].status=ba&&ba.length>0?w.SUCCESS:w.NO_RESULTS;}}).bind(this));this.data.subscribe('fetchError',(function(z,aa){var ba=aa.fetch_context,ca=ba.value;if(ba.bootstrap||!ca)return;if(this.backendQueriesStatus[ca]){this.backendQueriesStatus[ca].status=w.ERROR;this._addDurationForBackendQuery(this.backendQueriesStatus[ca]);}}).bind(this));this.data.subscribe('query',(function(z,aa){this.recordAvgStat('num_results_from_cache',aa.results.length);}).bind(this));this.data.subscribe('backend_topreplace',(function(z,aa){if(false===this._topreplace){this.recordStat("backend_topreplace",1);this._topreplace=true;}}).bind(this));this.data.subscribe('completeFetch',(function(z,aa){if(this.core.scubaInfo){var ba=aa.response,ca={recv:aa.stats.fetch_end-aa.stats.fetch_start,render:Date.now()-aa.stats.fetch_start,payload_size:JSON.stringify(ba).length};if(!ba.payload.entities)ba.payload.entities=this.buildResults();this.logToScuba(ba,ca,this.core.scubaInfo,this.query,this.type);}}).bind(this));this.data.subscribe('completeCacheFetch',u((function(z,aa){if(this.core.scubaInfo)this.logToScuba({},{},this.core.scubaInfo,this.query,this.type);}).bind(this),500));m.listen(this.element,'keydown',(function(event){this.recordStat('keypressed',1);this.recordCountStat('count_keys_pressed');if(m.getKeyCode(event)==o.BACKSPACE){if(!this._backspacing&&this.query){this._backspacing=true;this.recordAppendStat('before_backspace_queries',this.query);}}else this._backspacing=false;}).bind(this));this.data.subscribe('beforeFetch',(function(z,aa){var ba=aa.request.data.value;if(!ba)return;this.backendQueries.push(ba);this.backendQueriesStatus[ba]={status:w.WAITING,start_time:Date.now()};}).bind(this));};x.prototype.recordStat=function(z,aa){'use strict';this.stats[z]=aa;};x.prototype.recordCountStat=function(z){'use strict';var aa=this.stats[z];this.stats[z]=aa?aa+1:1;};x.prototype.recordAvgStat=function(z,aa){'use strict';if(this.avgStats[z]){this.avgStats[z][0]+=aa;++this.avgStats[z][1];}else this.avgStats[z]=[aa,1];};x.prototype.recordAppendStat=function(z,aa){'use strict';if(!this.appendStats.hasOwnProperty(z))this.appendStats[z]=[];this.appendStats[z].push(aa);};x.prototype.recordRender=function(z){'use strict';this.results=z.filter(function(ja){return ja.uid!='search'&&ja.type!='disabled_result'&&ja.type!='header';}).map(function(ja){return babelHelpers._extends({},ja);});var aa=null;if(this.queryStartTime)aa=this.queryStartTime[this.query];var ba=this.results.every(function(ja){return ja.fromCache;}),ca=this.results.every(function(ja){return ja.isFromGSEF||ja.fromCache;}),da=this.results.every(function(ja){return ja.isNullState;}),ea=this.results.every(function(ja){return ja.isSingleState;}),fa=this.results.every(function(ja){return ja.exactMatchKeyword;});this.allFromSingleState=ea;this.allFromNullState=da;if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&da){this.recordStat('time_render_null_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);this.data.lastNullOrSingleStateFetchStartTime=null;}else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&ea){this.recordStat('time_render_single_state',Date.now()-this.data.lastNullOrSingleStateFetchStartTime);}else if(aa){var ga=Date.now()-aa;if(fa){this.recordAppendStat('times_render_gs_echo',ga);}else this.recordAppendStat(ba?'times_render_local':'times_render_remote',ga);if(!ba&&ca)this.recordAppendStat('time_render_gs_early_fetch',ga);}this.data.lastNullOrSingleStateFetchStartTime=null;var ha=q.getViewportDimensions();this.recordStat('window_size_width',ha.x);this.recordStat('window_size_height',ha.y);if(this.results.length>0&&!this.stats.first_result_time)this.recordStat('first_result_time',Date.now());var ia='typed';if(this.allFromNullState){ia='nullstate';}else if(this.allFromSingleState)ia='singlestate';this.recordStat('last_state',ia);};x.prototype.recordSelectInfo=function(z){'use strict';var aa=z.selected,ba=z.index;if(aa.groupIndex!==undefined)ba=z.index-aa.groupIndex-1;var ca={href:aa.path},da=aa.dataGT?{gt:JSON.parse(aa.dataGT)}:{};r('click',ca,null,null,da);if(aa.uid=='search'||aa.uid=='people_search'){this.recordStat('selected_search',1);}else if(aa.uid=='invite'){this.recordStat('selected_invite',1);}else{var ea=aa.log_type||aa.rankType||aa.render_type||aa.type,fa=ea=='friend'?'user':ea;this.recordStat('selected_'+fa,1);this.recordStat('selected_position',ba);this.recordStat('selected_type',ea);this.recordStat('selected_name_length',aa.text.length);this.recordStat('selected_id',aa.uid);this.recordStat('selected_degree',aa.bootstrapped?1:2);this.recordStat('selected_recent_search',aa.recent_search);var ga=p.parse(this.data.getTextToIndex(aa)).tokens,ha=y(ga,this.query);if(ha)this.recordStat('matched_terms',ha);}var ia={};this._extraRecorder.forEach((function(ja){ja(z,this.results,ia);}).bind(this));this.recordStat('extra_select_info',JSON.stringify(ia));this.recordStat('selected_with_mouse',z.clicked?1:0);};x.prototype._addDurationForBackendQuery=function(z){'use strict';if(z.start_time){z.duration=Date.now()-z.start_time;delete z.start_time;}};x.prototype._dataToSubmit=function(){'use strict';this.recordStat('candidate_results',this.buildResults());this.recordStat('query',this.query);this.recordStat('init_time',this.initTime);if(this.initStartTime){this.recordStat('init_start_time',this.initStartTime);this.recordStat('onload_time',this._onloadTime);this.initStartTime=0;}this.recordStat('bootstrapped',this.bootstrapStats.bootstrapped);if(this.bootstrapStats.endTime){this.recordStat('bootstrapped_time',this.bootstrapStats.endTime);this.recordStat('user_bootstrap_ms',this.bootstrapStats.user);this.recordStat('other_bootstrap_ms',this.bootstrapStats.other);this.bootstrapStats.endTime=0;}var z=this.data.getBootstrapError();if(z)this.recordStat('bootstrap_error',1);this.recordStat('coeff2_ts',this.bootstrapStats.coeff2_ts);this.recordStat('max_results',this.data._maxResults);if(this.backendQueries.length>0){if(this.backendQueries.length>this.data.logBackendQueriesWindow)this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow);this.recordStat('backend_queries',this.backendQueries);var aa=v(this.backendQueriesStatus,this.backendQueries);s(aa,this._addDurationForBackendQuery,this);this.recordStat('backend_queries_status',aa);}if(n.taSessionLoggingSample){var ba=[];this.results.forEach(function(ga){ba.push([ga.text||'',ga.category||'',ga.subtext||'']);});this.recordStat('raw_suggestions_text',ba);}var ca=this.stats;for(var da in this.avgStats){var ea=this.avgStats[da];ca[da]=ea[0]/ea[1];}for(var fa in this.appendStats)ca[fa]=JSON.stringify(this.appendStats[fa]);return ca;};x.prototype.buildResults=function(){'use strict';var z=(this.results||[]).map((function(aa,ba){var ca=p.parse(this.data.getTextToIndex(aa)).tokens,da=aa.rankType||aa.render_type||aa.type,ea=aa.bootstrapped?1:0,fa=aa.s_token||'',ga=typeof aa.index=='undefined'?100:aa.index,ha=y(ca,this.query)||this.query,ia=aa.index_rank,ja=aa.match_type,ka=aa.l_type,la=aa.vertical_type,ma=aa.prefix_match,na=aa.prefix_length,oa=aa.text,pa=aa.category,qa=aa.subtext,ra=aa.fromCache,sa=aa.isNullState,ta=aa.isSingleState;if(typeof aa.groupIndex=='number')return [aa.groupIndex,aa.indexInGroup,aa.uid,da,ea,fa,ha,ia,ja,ma,na,aa.origIndex,ka,la,oa,pa,qa,ga,ra,sa,ta];return [0,ba,aa.uid,da,ea,fa,ha,ia,ja,ma,na,aa.origIndex,ka,la,oa,pa,qa,ga,ra,sa,ta];}).bind(this));return JSON.stringify(z);};x.prototype.submit=function(){'use strict';var z=this._dataToSubmit();switch(this.data.recordingRoute){case 'banzai_vital':i.post(this._banzaiRoute,z,{delay:0,retry:true});break;default:this.submitThroughAsyncRequest(z);}this._reset();};x.prototype.addLatencyToSample=function(z,aa,ba,ca){'use strict';z.addInteger(ca+'query_start',ba.queryStart);z.addInteger(ca+'query_end',ba.queryEnd);z.addInteger(ca+'keypress_query_end',ba.keyPressToQueryEnd);z.addInteger(ca+'render',ba.render);z.addInteger(ca+'keypress_render',ba.keyPressToRender);aa[ca+'query_start']=ba.queryStart;aa[ca+'query_end']=ba.queryEnd;aa[ca+'keypress_query_end']=ba.keyPressToQueryEnd;aa[ca+'render']=ba.render;aa[ca+'keypress_render']=ba.keyPressToRender;};x.prototype.logToScuba=function(z,aa,ba,ca,da){'use strict';var ea={},fa=new k('search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{facebarGKs:true}});fa.addInteger('sample_rate',ba.sample_rate);ea.sample_rate=ba.sample_rate;fa.addNormal('site',ba.site);ea.site=ba.site;fa.addDenorm('query',ca);ea.query=ca;var ga=z.payload||{};if(ga.entities){fa.addInteger('num_entities',ga.entities.length);ea.num_entities=ga.entities.length;}Object.keys(this.performanceTimings).forEach((function(ia){fa.addInteger(ia,this.performanceTimings[ia]);ea[ia]=this.performanceTimings[ia];}).bind(this),this);if(ga.results||ga.entries){var ha=(ga.results||ga.entries).length;fa.addInteger('num_results',ha);ea.num_results=ha;}if(ga.gzipped_payload_size!==undefined){fa.addInteger('gzipped_payload_size',ga.gzipped_payload_size);ea.gzipped_payload_size=ga.gzipped_payload_size;}if(aa.recv&&aa.render>aa.recv){fa.addInteger('time_render',aa.render-aa.recv);ea.time_render=aa.render-aa.recv;fa.addInteger('time_js_async',aa.recv);ea.time_js_async=aa.recv;}if(aa.payload_size){fa.addInteger('payload_size',aa.payload_size);ea.payload_size=aa.payload_size;}if(this.stats.time_render_null_state&&(!ca||ca.length===0)){fa.addInteger('time_render_null_state',this.stats.time_render_null_state);ea.time_render_null_state=this.stats.time_render_null_state;}fa.addInteger('query_id',z.queryId);ea.query_id=z.queryId;fa.addDenorm('user_id',l.getID());ea.user_id=l.getID();fa.addDenorm('session_id',this.stats.sid);ea.session_id=this.stats.sid;fa.addNormal('typeahead_type',da);ea.typeahead_type=da;if(aa.remoteQueryLatencies){this.addLatencyToSample(fa,ea,aa.remoteQueryLatencies,'remote_');fa.addInteger('remote_keypress_query_dispatch',aa.remoteQueryLatencies.keyPressToQueryDispatch);ea.remote_keypress_query_dispatch=aa.remoteQueryLatencies.keyPressToQueryDispatch;fa.addInteger('remote_keypress_query_start',aa.remoteQueryLatencies.keyPressToQueryStart);ea.remote_keypress_query_start=aa.remoteQueryLatencies.keyPressToQueryStart;fa.addNormal('inflight_requests',aa.remoteQueryLatencies.inflightRequests);fa.addInteger('inflight_requests',aa.remoteQueryLatencies.inflightRequests);ea.inflight_requests=aa.remoteQueryLatencies.inflightRequests;fa.addNormal('waiting_queries',aa.remoteQueryLatencies.waitingQueries);fa.addInteger('waiting_queries',aa.remoteQueryLatencies.waitingQueries);ea.waiting_queries=aa.remoteQueryLatencies.waitingQueries;}if(aa.cacheQueryLatencies)this.addLatencyToSample(fa,ea,aa.cacheQueryLatencies,'cache_');fa.post();j.log('search_facebar_js','typeahead',ea);};x.prototype.submitThroughAsyncRequest=function(z){'use strict';if(Object.keys(z).length>0)new h().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('handleErrorAfterUnload',true).setErrorHandler((function(aa){z.retry=true;new h().setURI(this._endPoint).setMethod('POST').setData({stats:z}).setOption('asynchronous_DEPRECATED',false).send();}).bind(this)).send();};var y=function(z,aa){if(!z||!aa)return;var ba=p.parse(aa);if(ba.flatValue[ba.flatValue.length-1]===' ')return ba.flatValue;var ca=ba.tokens[ba.tokens.length-1],da={};z.forEach(function(ia){da[ia]=(da[ia]||0)+1;});var ea={},fa=ba.tokens.slice(0,ba.tokens.length-1);fa.forEach(function(ia){ea[ia]=(ea[ia]||0)+1;});for(var ga=0;ga<z.length;++ga){var ha=z[ga];if(ha.indexOf(ca)===0&&da[ha]-(ea[ha]||0)>0){fa.push(ha);return fa.join(' ');}}return undefined;};Object.assign(x.prototype,{_endPoint:'/ajax/typeahead/record_metrics.php',_banzaiRoute:'search'});f.exports=x;},null);
__d('TypeaheadSearchRecorderBasic',['SearchTypeaheadRecorder','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this._typeahead=k;}j.prototype.enable=function(){'use strict';new h(this._typeahead);};Object.assign(j.prototype,{disable:i});f.exports=j;},null);
__d('legacy:SearchRecorderBasicTypeaheadBehavior',['TypeaheadSearchRecorderBasic'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.searchRecorderBasic=function(i){i.enableBehavior(h);};},3);
__d('TypeaheadShowLoadingIndicator',['CSS'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype.enable=function(){'use strict';this._subscription=this._typeahead.subscribe('loading',(function(j,k){h.conditionClass(this._typeahead.getElement(),'typeaheadLoading',k.loading);h.conditionClass(this._typeahead.getView().getElement(),'typeaheadViewLoading',k.loading);}).bind(this));};i.prototype.disable=function(){'use strict';this._typeahead.unsubscribe(this._subscription);this._subscription=null;};Object.assign(i.prototype,{_subscription:null});f.exports=i;},null);
__d('legacy:ShowLoadingIndicatorTypeaheadBehavior',['TypeaheadShowLoadingIndicator'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.showLoadingIndicator=function(i){i.enableBehavior(h);};},3);
__d('SearchTypeaheadRenderer',['BadgeHelper','DOM','Locale','TokenizeUtil','TypeaheadFacepile','URI','UnicodeBidi','WWWBase','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=' \u00B7 ',r=false;function s(t,u){var v=[],w=t.photos||t.photo;if(w){if(w instanceof Array){w=l.render(w);}else w=i.create('img',{alt:'',src:w});v.push(w);}var x;if(t.text){var y=t.alias,z=this.value,aa=t.text,ba=n.isDirectionRTL(aa.toString()),ca=j.isRTL(),da=ba&&!ca?'rtl':!ba&&ca?'ltr':'';x=[aa];if(y&&k.isQueryMatch(z,y)&&!k.isQueryMatch(z,aa))x.push(i.create('span',{className:'alias'},[' \xB7 '+y]));if(t.is_verified){x.push(h.renderBadge('xsmall','verified'));}else if(t.is_work_user)x.push(h.renderBadge('xsmall','work'));if(t.badge){x.push(i.create('span',{className:''},' \xB7 '));var ea=[t.badge];x.push(i.create('span',{className:'unSeenPosts'},ea));}v.push(i.create('span',{className:'text',dir:da},x));}if(t.category){var fa=[t.category];if(t.is_external)fa.push(i.create('span',{className:'arrow'}));var ga=t.message?'preCategory':'category';v.push(i.create('span',{className:ga},fa));}if(t.message)v.push(i.create('span',{className:'category'},[t.message]));var ha=t.subtextOverride||t.subtext;if(ha){var ia=[ha];if(t.saved_context){var ja=i.create('span',{className:'saved'},[t.saved_context]);ia.unshift(ja,q);}v.push(i.create('span',{className:'subtext'},ia));}var ka=t.classNames||t.type||'',la=t.is_external?'_blank':'',ma=!t.song&&t.path||'';if(ma){if(!/^https?\:\/\//.test(ma))ma=o.uri+ma.substr(1);ma+=(ma.indexOf('?')>0?'&':'?')+'ref=ts&fref=ts';}var na=i.create('a',{href:ma,rel:'ignore',target:la},v),oa=null;if(t.type==='header'){var pa=null,qa=null;if(t.uid==='recent'){qa=new m('/profile.php');qa.setQueryData({sk:'allactivity',log_filter:'search'});pa=p._("EDIT");}else if(t.uid==='pymk'){qa=new m('/find-friends/browser/');pa=p._("SEE ALL");}if(qa){oa=i.create('a',{href:qa,className:'typeaheadHeaderRightLink'},pa);na.setAttribute('class','typeaheadHeaderLeftLink');ka+=' typeaheadHeader';}}var ra=i.create('li',{className:ka},[na,oa]);if(t.text){ra.setAttribute('title',t.text);ra.setAttribute('aria-label',t.text);}if(this.showupadatedsuggestions&&!r){s.className+=' updatedSuggestionRows';r=true;}return ra;}s.className='search';f.exports=s;},null);
__d('legacy:SearchTypeaheadRenderer',['SearchTypeaheadRenderer'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.search=c('SearchTypeaheadRenderer');},3);
void 0;
__d('SimpleSearchNavigation',['Arbiter','DOMQuery','Input','QueryHistory','URI'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=null,n=null,o={registerInput:function(p,q){n=i.scry(p,'input')[0];if(m)this._updateTitle(m,q);h.subscribe('page_transition',(function(r,s){this._updateTitle(k.get(s.uri));}).bind(this));},_updateTitle:function(p,q){if(n){j.setValue(n,p||'');n.setAttribute('singlestate',p&&q);n.blur();}},setPageTitle:function(p,q){k.set(l.getNextURI(),p);if(n){this._updateTitle(p,q);}else m=p;var r={};h.inform('search/updateNullState',r,h.BEHAVIOR_STATE);},setPageQuery:function(p){h.inform('search/updateNullState',p,h.BEHAVIOR_STATE);}};f.exports=o;},null);
__d("XSearchFacebarSurveyController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/facebar_survey\/",{id:{type:"String",required:true},query:{type:"String"},session_id:{type:"String",required:true},on_session_start:{type:"Exists",defaultValue:false},result_selected:{type:"Exists",defaultValue:false}});},null);
__d('AbandonedSessionSurvey',['AsyncRequest','SubscriptionsHandler','XSearchFacebarSurveyController','getOrCreateDOMID'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){'use strict';this.core=m.getCore();this.data=m.getData();this.view=m.getView();this.subscriptionsHandler=new i();}l.prototype.enable=function(){'use strict';this.subscriptionsHandler.addSubscriptions(this.core.subscribe('focus',(function(){this.searchBoxFocused=true;this.resultSelected=false;}).bind(this)),this.data.subscribe('beforeQuery',(function(m,n){this.query=n.value||'';}).bind(this)),this.view.subscribe('select',(function(){this.resultSelected=true;}).bind(this)),this.core.subscribe('blur',(function(){if(this.searchBoxFocused){this.openSurvey();this.resultSelected=false;this.searchBoxFocused=false;}}).bind(this)));};l.prototype.disable=function(){'use strict';this.subscriptionsHandler.release();this.request&&this.request.abort();};l.prototype.openSurvey=function(){'use strict';if(this.openedSurvey)return;this.openedSurvey=true;var m=j.getURIBuilder().setString('id',k(this.core.element)).setString('query',this.query||'').setString('session_id',this.data.queryData.sid).setExists('result_selected',this.resultSelected);this.request=new h().setMethod('post').setAllowCrossPageTransition(true).setURI(m.getURI());this.request.send();};f.exports=l;},null);
__d('TypeaheadSearchFilter',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype.enable=function(){'use strict';var j=this._typeahead,k=j.getView().seeMoreEndpoint;this._subscriptions=[h.subscribe('search/typeahead/updateFilter',function(l,m){if(m.filter_type=='web')j.getView().queryData.form='FBKBFR';j.getView().queryData.type=m.filter_type;}),h.subscribe('search/typeahead/updateSeeMoreEndpoint',function(l,m){j.getView().seeMoreEndpoint=m;}),h.subscribe('page_transition',function(l,m){if(j.getView().queryData.form)delete j.getView().queryData.form;delete j.getView().queryData.type;j.getView().seeMoreEndpoint=k;},h.SUBSCRIBE_NEW)];};i.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(j){j.unsubscribe();});this._subscriptions=null;};Object.assign(i.prototype,{_subscription:null});f.exports=i;},null);
__d('legacy:SearchFilterTypeaheadBehavior',['TypeaheadSearchFilter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.initFilters=function(i){i.enableBehavior(h);};},3);
__d('TypeaheadDetectQueryLocale',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;this._data=i.getData();this._queryCache={'':this._data.queryCache,ja_JP:{},zh_TW:{}};}h.prototype.enable=function(){'use strict';this._previousLocale='';this._reset=this._typeahead.subscribe('reset',this._swapQueryCache.bind(this,''));this._beforeQuery=this._data.subscribe('beforeQuery',(function(i,j){var k=j.value;if(k===''){this._swapQueryCache('');return;}var l=null,m=k.charCodeAt(k.length-1);if(12352<=m&&m<=12543){l='ja_JP';}else if(12544<=m&&m<=12735)l='zh_TW';this._swapQueryCache(l);}).bind(this));};h.prototype.disable=function(){'use strict';this._swapQueryCache('');this._data.unsubscribe(this._beforeQuery);this._typeahead.ubsubscribe(this._reset);};h.prototype._swapQueryCache=function(i){'use strict';if(i===null||i===this._previousLocale)return;this._data.queryCache=this._queryCache[i];this._data.setQueryData({query_locale:i});this._previousLocale=i;};f.exports=h;},null);
__d('TypeaheadExcludeBootstrapFromQueryCache',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._data=i.getData();}h.prototype.enable=function(){'use strict';this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',(function(){this._buildingQueryCache=true;}).bind(this));this._mergeUids=this._data.subscribe('mergeUids',(function(i,j){if(this._buildingQueryCache)j.local_uids.splice(0,j.local_uids.length);}).bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',(function(){this._buildingQueryCache=false;}).bind(this));};h.prototype.disable=function(){'use strict';this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};f.exports=h;},null);
__d('TypeaheadRecentSearchUpdater',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this.view=j.getView();}i.prototype.enable=function(){'use strict';this.updaterSubscription=this.view.subscribe('select',function(){h.inform('search/refreshRecentSearchesNullstate',{},h.BEHAVIOR_STATE);});};i.prototype.disable=function(){'use strict';this.view.unsubscribe(this.updaterSubscription);};f.exports=i;},null);
__d('FeedAdsGapRuleViolationDetection',['Banzai','CSS','csx','cx','DOM','ge','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='ei',p='qid',q='gap rule violation',r='non violating ads gap',s='first position violation',t='feed load',u='first position invalidation',v='spacing invalidation',w=[],x=[],y=[],z={},aa={},ba={registerFeedStories:function(ca,da){if(ca.containerID=='substream_0'){w=[];x=[];}var ea=m(ca.containerID);if(!ea)return;z=babelHelpers._extends({},ca.demoAdChecks,z);var fa=l.scry(ea,"div._5jmm").map(this._convertStoryNodeToObject).filter(function(ha){return ha!==null;});if(ca.isLoggingEnabled&&fa.length!==0)this._logFeedLoad();if(ca.isNewerStories){w=fa.concat(w);}else w=w.concat(fa);for(var ga in ca.minGaps)if(ca.minGaps.hasOwnProperty(ga))aa[ga]=ca.minGaps[ga];if(n(z)){if(ca.isLoggingEnabled||ca.isFirstPosInvalidationEnabled)this._checkFirstPosViolation(ca,ea);if(ca.isLoggingEnabled||ca.isGapRuleInvalidationEnabled)this._checkGapRuleViolation(ca);}},_convertStoryNodeToObject:function(ca){if(i.hasClass(ca,"_170y"))return null;var da=ca.getAttribute('data-dedupekey');if(z[da])return null;var ea=l.scry(ca,"div._hye"),fa=l.scry(ca,"li._170x"),ga=[];if(ea.length!==0){ga=ea.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(fa.length!==0){ga=fa.map(function(ja){return ja.getAttribute('data-ft');}).filter(function(ja){return ja!==null;});}else if(ca.getAttribute('data-ft'))ga=[ca.getAttribute('data-ft')];if(!ga.length)return null;var ha=JSON.parse(ga[0]),ia={dataFTArray:ga,dedupKey:da,isSponsored:!!ha[o],height:ca.offsetHeight,qid:parseInt(ha[p],10),nodeID:ca.id};return ia;},_checkFirstPosViolation:function(ca,da){while(w.length>0&&w[0].isSponsored){var ea={ftArray:w[0].dataFTArray,qid:w[0].qid,nodeid:w[0].nodeID,firstStoryType:ca.firstStoryType},fa=l.scry(da,'.uiBoxRed')[0];if(fa){var ga=fa.textContent||fa.innerText;if(ga)ea.error_msg=ga;}if(ca.isLoggingEnabled&&!(w[0].dedupKey in y)){this._logFirstPosViolation(ea);y[w[0].dedupKey]=ea;}if(ca.isFirstPosInvalidationEnabled){this._invalidateFirstPosAd(ea);w.splice(0,1);}else break;}},_getMinGap:function(ca,da,ea){var fa=Math.min(ca?ca:Number.MAX_VALUE,da?da:Number.MAX_VALUE);return fa!==Number.MAX_VALUE?fa:ea;},_getStoryDedupKeysJSONString:function(ca,da){var ea=[];for(var fa=ca;fa<=da;fa++)ea.push(w[fa].dedupKey);return JSON.stringify(ea);},_getIdxOfStoryToSwap:function(ca,da){if(da>=w.length-ca)return -1;for(var ea=ca+1;ea<w.length&&da>0;ea++){if(!w[ea].isSponsored){da--;}else return -1;if(da===0)return ea;}return -1;},_checkGapRuleViolation:function(ca){var da=null,ea=null,fa=0;for(var ga=0;ga<w.length;ga++){var ha=w[ga];fa+=ha.height;if(ha.isSponsored){fa-=ha.height;var ia=false,ja=false;if(da!==null){var ka=ga-da,la=null,ma=this._getMinGap(aa[ea.dedupKey],aa[ha.dedupKey],ca.defaultMinGap);if(ka<ma){la=q;}else la=r;var na={ftArray_A:ea.dataFTArray,ftArray_B:ha.dataFTArray,dist:ka,pdist:fa,pos:ga+1,qid_A:ea.qid,qid_B:ha.qid,event_type:la,nodeid:ha.nodeID,dedupKeys:this._getStoryDedupKeysJSONString(da,ga)};if(ca.isLoggingEnabled)if(!(ha.dedupKey in x)||x[ha.dedupKey].event_type!==la){this._logAdsGapEvent(na);x[ha.dedupKey]=na;}if(ca.isGapRuleInvalidationEnabled&&la==q){var oa=-1;if(ca.isSwapOnGapRuleViolationEnabled)oa=this._getIdxOfStoryToSwap(ga,ma-ka);if(oa>0){this._shiftAdBelowOrganicStory(ha.nodeID,w[oa].nodeID);var pa=w[ga];w.splice(ga,1);w.splice(oa,0,pa);if(ca.isLoggingEnabled){var qa={ft:w[oa].dataFTArray[0],dist:oa-ga,qid:w[oa].qid,event_type:'ad_swap'};h.post('feed_ads_gap_rule_violation',qa);}ja=true;ha=w[ga];fa+=ha.height;}else if(ca.isGapRuleInvalidationEnabled){this._invalidateGapRuleViolatedAd(na);ia=true;w.splice(ga--,1);}}}if(!ia&&!ja){da=ga;ea=ha;fa=0;}}}},_logFirstPosViolation:function(ca){var da={ft:ca.ftArray[0],event_type:s,intValues:{qid:ca.qid},first_story_type:ca.firstStoryType};if(ca.error_msg)da.error_msg=ca.error_msg;h.post('feed_ads_gap_rule_violation',da);},_logAdsGapEvent:function(ca){var da={ft_A:ca.ftArray_A[0],ft_B:ca.ftArray_B[0],event_type:ca.event_type,intValues:{dist:ca.dist,pdist:ca.pdist,pos:ca.pos,qid_A:ca.qid_A,qid_B:ca.qid_B},dedup_keys:ca.dedupKeys};h.post('feed_ads_gap_rule_violation',da);},_logFeedLoad:function(){var ca={event_type:t};h.post('feed_ads_gap_rule_violation',ca);},_invalidateFirstPosAd:function(ca){i.hide(m(ca.nodeid));var da={ft_array:ca.ftArray,event_type:u};h.post('feed_ads_gap_rule_violation',da);},_invalidateGapRuleViolatedAd:function(ca){var da=m(ca.nodeid);da&&i.hide(da);var ea={ft_array_A:ca.ftArray_A,ft_array_B:ca.ftArray_B,event_type:v};h.post('feed_ads_gap_rule_violation',ea);},_shiftAdBelowOrganicStory:function(ca,da){var ea=m(ca),fa=m(da);ea&&fa&&l.insertAfter(fa,ea);}};f.exports=ba;},null);
__d('FeedErrorDetection',['Banzai','DOM','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=0,m={},n=false,o=false;function p(event,r,s,t){var u={event:event,shouldLogDetail:r,site:'www'};if(r){u.intValues=s;u.normalValues=t;}h.post('feed_error_detection',u,{delay:0});}var q={registerFeedStories:function(r,s){if(r=='substream_0'){l=0;m={};n=false;o=false;}var t=i.scry(k(r),"._5jmm"),u=t.length;if(!u&&!n){if(!o){o=true;return;}if(!l){p('empty_feed_js',s,{},{});}else p('end_of_feed_js',s,s?{stories_count:l}:{},{});n=true;return;}o=false;for(var v=0;v<u;v++){var w=t[v],x=w.getAttribute('data-dedupekey'),y=w.getAttribute('data-ft');if(!x||!y)continue;if(x in m){var z={};if(s)z={dedupKey:x,ft_A:y,ft_B:m[x]};p('duplicate_stories',s,{},{dup_field:z});}else{m[x]=y;l++;}}}};f.exports=q;},null);
__d('StoryPositionTracking',['DOM','LitestandStream','csx','ge'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=0;function m(p,q){var r=JSON.parse(p.getAttribute('data-ft'));if(r){r.insertion_position=q;p.setAttribute('data-ft',JSON.stringify(r));}}function n(p){return h.scry(p,"._5jmm");}var o={registerNewStories:function(p){if(p=='substream_0')l=0;var q=n(k(p)),r=q.length;for(var s=0;s<r;s++)m(q[s],l++);},updateAllStories:function(){var p=n(i.getStreamRoot()),q=p.length;l=0;for(var r=0;r<q;r++)m(p[r],l++);}};f.exports=o;},null);
__d('StreamViewportTracking',['DOM','DOMDimensions','ViewportTracking','ge','recordTNTreeData'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n,o=51;m=babelHelpers.inherits(p,j);n=m&&m.prototype;p.prototype.init=function(q,r){'use strict';if(r)this.$StreamViewportTracking1=r;n.init.call(this,q);this.initSubscriptions();};p.prototype.initSubscriptions=function(){'use strict';};p.prototype.getDataFromConfig=function(q){'use strict';this.isTimetrackingEnabled=1;this.timeout=q.record_delay;};p.prototype.getTimeout=function(){'use strict';return this.timeout;};p.prototype.getStorySelector=function(){'use strict';return '.uiStreamStory';};p.prototype.getAllStories=function(){'use strict';var q=h.scry(this.getStream(),this.getStorySelector());return q.filter(function(r){return r.getAttribute('data-ft');});};p.prototype.getStoryID=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.mf_story_key;};p.prototype.getQueryID=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.qid;};p.prototype.getFBFeedLocations=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.fbfeed_location;};p.prototype.getFBFeedInsertionPosition=function(q){'use strict';var r=JSON.parse(q.getAttribute('data-ft'));return r.insertion_position;};p.prototype.getDataToLog=function(q){'use strict';var r={},s=this.getStream();r=l(q,s);var t=q.getAttribute('data-insertion-position');if(t!==null)r.inspos=t;r.evt=o;r.vpv_time=Math.round(Date.now()/1000);var u=h.scry(q,".fbStoryAttachmentImage")[0];if(u){var v=i.getElementDimensions(u);r.story_image_height=v.height;r.story_image_width=v.width;}return {ft:r};};p.prototype.getStream=function(){'use strict';if(this.$StreamViewportTracking1)return this.$StreamViewportTracking1;return k('home_stream');};p.prototype.heartBeatIsEnabled=function(){'use strict';return true;};p.init=function(q,r){'use strict';p.instance=new p();p.instance.init(q,r);};p.getInstance=function(){'use strict';return p.instance;};function p(){'use strict';m.apply(this,arguments);}f.exports=p;},null);
__d('FbFeedAttachmentRelatedShare',['Arbiter','AttachmentRelatedShareConstants','DOMQuery','Event','tidyEvent','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={loadRelatedAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.ARTICLE_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedGameAttachment:function(o,p){l(k.listen(o,'click',function(){h.inform(i.GAME_CLICK,{attachment:o,global_share_id:p});}));},loadRelatedAttachmentForStream:function(o){var p=function(event,q){var r=event.getTarget();if(r.getAttribute('target')!=='_blank')return;var s="^div._5pbx",t="^div._5pc9",u=j.scry(r,s)[0]||j.scry(r,t)[0];if(!u)return;h.inform(i.ARTICLE_CLICK,{attachment:u,global_share_id:0,link_url:r.getAttribute('href'),is_right_click:q});};l(k.listen(o,'click',function(event){p(event,false);}));l(k.listen(o,'mousedown',function(event){if(event.which==3||event.button==2)p(event,true);}));}};f.exports=n;},null);
__d('FbFeedCommentUFIScroller',['Arbiter','DOMScroll','UFIUIEvents','containsNode','ge'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();h.subscribe(j.CommentFocus,function(m,n){var o=n.element,p=l('content');if(p&&k(p,o))i.ensureVisible(o,null,60,250);});f.exports={};},null);
__d('FbFeedHighlight',['JSXDOM','CSS','DOM','DOMScroll','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=1000,n=1000,o=null;function p(){return (h.div({className:"_1usz"},h.div({className:"_1us-"}),h.div({className:"_1us_"}),h.div({className:"_1ut0"}),h.div({className:"_1ut1"})));}var q={highlightAndScrollTo:function(r){q.highlight(r);q.scrollTo(r);},highlightSingle:function(r){var s=p();j.appendContent(r,s);setTimeout(function(){if(o)j.remove(o);o=s;i.addClass(r,"_1ut2");},0);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(function(){j.remove(s);if(s==o)o=null;},m+n);},m+n);},highlight:function(r){var s=q.highlightPermanent(r);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(j.remove.bind(null,s),m+m);},m+n);},highlightPermanent:function(r){var s=p();j.appendContent(r,s);setTimeout(i.addClass.bind(null,r,"_1ut2"),0);return s;},scrollTo:function(r){setTimeout(k.scrollTo.bind(null,r),0);}};f.exports=q;},null);
__d('FbFeedKeyboardController',['CSS','DOM','DOMQuery','FeedBaseKeyboardController','Focus','JSXDOM','Parent','FbFeedHighlight','csx','cx','ge','getActiveElement','isElementNode'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u,v;function w(z){if(z.previousElementSibling)return z.previousElementSibling;z=z.previousSibling;while(z&&!t(z))z=z.previousSibling;return z||null;}function x(z){if(z.nextElementSibling)return z.nextElementSibling;z=z.nextSibling;while(z&&!t(z))z=z.nextSibling;return z||null;}u=babelHelpers.inherits(y,k);v=u&&u.prototype;y.prototype.getStories=function(z){'use strict';return j.scry(z||this.root,"._5jmm");};y.prototype.isHoldoutStory=function(z){'use strict';return !!z&&h.hasClass(z,'holdoutAdStory');};y.prototype.isRelevantStory=function(z){'use strict';return t(z)&&!this.isHoldoutStory(z);};y.prototype.isStory=function(z){'use strict';return h.hasClass(z,"_5jmm");};y.prototype.clickLike=function(){'use strict';var z=this.$FbFeedKeyboardController1();this.clickElement(z,'.UFILikeLink');if(z!==this.selected)return null;var aa=this.getParentStory(s());if(aa){var ba=j.scry(aa,'.UFILikeLink');for(var ca=0;ca<ba.length;ca++)if(!h.hasClass(ba[ca],'accessible_elem'))l.setWithoutOutline(ba[ca]);}};y.prototype.clickComment=function(){'use strict';this.clickElement(this.$FbFeedKeyboardController1(),'.comment_link');};y.prototype.clickShare=function(){'use strict';this.click('.share_action_link');};y.prototype.clickSeeMore=function(){'use strict';this.click('.see_more_link');};y.prototype.clickLeft=function(){'use strict';this.click("._1mri");};y.prototype.clickRight=function(){'use strict';this.click("._2fu-");};y.prototype.openAttachment=function(){'use strict';this.click("._5dec","a._52c6","._4-eo",'.uiVideoThumb');};y.prototype.getHeadline=function(z){'use strict';return j.scry(z,"h5._5pbw")[0];};y.prototype.$FbFeedKeyboardController2=function(z){'use strict';var aa=n.byClass(z,"_5pcb"),ba=r('pagelet_soft_permalink_posts');return !!(aa||ba&&i.contains(ba,z));};y.prototype.getPreviousSibling=function(z){'use strict';var aa=w(z);if(aa&&this.getParentStory(aa))return aa;aa=null;if(this.$FbFeedKeyboardController2(z)){var ba=this.getStories(this.root),ca=ba.indexOf(z);while(ca>-1){if(ca===0){aa=r('pagelet_composer');aa=aa&&n.byClass(aa,"_5jmm");}else if(ca>0){aa=ba[ca-1];if(aa.offsetHeight>0)break;}ca--;}}return aa||this.selected;};y.prototype.getPreviousStory=function(z){'use strict';var aa=this.getPreviousSibling(z);while(aa&&!this.isStory(aa))aa=this.getPreviousSibling(aa);return aa;};y.prototype.getParentStory=function(z){'use strict';return n.byClass(z,"_5jmm");};y.prototype.getNextSibling=function(z){'use strict';var aa=x(z);if(aa&&this.getParentStory(aa))return aa;aa=null;if(this.$FbFeedKeyboardController2(z)){var ba=this.getStories(this.root),ca=ba.indexOf(z);if(ca>-1){aa=ba[++ca];while(aa&&aa.offsetHeight===0)aa=ba[++ca];}}else if(r('pagelet_composer',z))aa=j.scry(document,"div._5pcb ._5jmm")[0];return aa||this.selected;};y.prototype.getNextStory=function(z){'use strict';var aa=this.getNextSibling(z);while(aa&&!this.isStory(aa))aa=this.getNextSibling(aa);return aa;};y.prototype.setSelected=function(z,aa){'use strict';if(z){var ba="_5qdu",ca=j.scry(z,"._5qdu");if(!ca.length&&aa)i.prependContent(z,m.div({className:ba}));}if(aa){this.selected&&this.setTabindexOnStory(this.selected,'-1');this.selected&&h.removeClass(this.selected,"_5qdv");this.selected=z;z&&this.setTabindexOnStory(z,'0');z&&h.addClass(z,"_5qdv");o.highlightSingle(z);}};y.prototype.$FbFeedKeyboardController1=function(){'use strict';var z=i.scry(this.selected,"._1qch");if(z.length>0)return i.scry(this.selected,"._3el7")[0];return this.selected;};y.init=function(z){'use strict';new y(z);};function y(){'use strict';u.apply(this,arguments);}f.exports=y;},null);
__d('FbFeedViewportTracking',['Arbiter','LitestandMessages','LitestandStream','StreamViewportTracking','csx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=babelHelpers.inherits(o,k);n=m&&m.prototype;o.prototype.initSubscriptions=function(){'use strict';this.subscriptions.addSubscriptions(h.subscribe([i.STORIES_INSERTED],this.invalidateAllStoriesCache.bind(this)),h.subscribe(i.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));};o.prototype.getStorySelector=function(){'use strict';return "._5jmm";};o.prototype.getStream=function(){'use strict';return j.getStreamRoot();};o.prototype.getSessionID=function(){'use strict';return j.getFeedStreamID();};o.init=function(p){'use strict';o.instance=new o();o.instance.init(p);};o.getInstance=function(){'use strict';return o.instance;};function o(){'use strict';m.apply(this,arguments);}f.exports=o;},null);
__d('TypeaheadRegulateMemorializedUsers',['TokenizeUtil'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this._typeahead=j;}i.prototype._filter=function(j,k){'use strict';if(j.type!=='user'||!j.memorialized)return true;var l=h.parse(j.text).tokens;if(l.length===1&&h.isExactMatch(k,j.text))return true;var m=this._typeahead.getData().getTextToIndex(j),n=h.parse(k).tokens;return n.length>1&&h.isQueryMatch(k,m);};i.prototype.enable=function(){'use strict';this._filterRegistry=this._typeahead.getData().addFilter(this._filter.bind(this));};i.prototype.disable=function(){'use strict';this._filterRegistry.remove();this._filterRegistry=null;};Object.assign(i.prototype,{_filterRegistry:null});f.exports=i;},null);
__d('legacy:RegulateMemorializedUsersTypeaheadBehavior',['TypeaheadRegulateMemorializedUsers'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.regulateMemorializedUsers=function(i){i.enableBehavior(h);};},3);
__d('XUIBadge',['CSS','DOM','cx','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(n){return parseInt(n,10)===n;}function m(n){'use strict';this.target=n.target;this.count=n.count;this.maxcount=n.maxcount;}m.prototype.getCount=function(){'use strict';return this.count;};m.prototype.setCount=function(n){'use strict';!l(n)?k(0):undefined;!(n>=0)?k(0):undefined;this.count=n;h.conditionClass(this.target,'hidden_elem',this.count===0);if(n>this.maxcount){i.setContent(this.target,this.maxcount+'+');h.addClass(this.target,"_5ugi");}else{i.setContent(this.target,n);h.removeClass(this.target,"_5ugi");}};m.prototype.setLegacyContent=function(n){'use strict';if(typeof n==='string'){h.conditionClass(this.target,'hidden_elem',n==0);i.setContent(this.target,n);h.removeClass(this.target,"_5ugi");}else this.setCount(n);};m.prototype.increment=function(){'use strict';this.setCount(this.getCount()+1);};f.exports=m;},null);
__d("XEventRelatedEventsPivotController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String",required:true}});},null);
__d("XFeedAdsChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});},null);
__d("XPubcontentFeedChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true}});},null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});},null);
__d("XPubcontentRelatedShareChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false}});},null);
__d("XPubcontentRelatedVideoChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});},null);
__d("XPubcontentTopicChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/topic_chaining\/",{pivotal_topic_ids:{type:"IntVector",defaultValue:[]}});},null);
__d("XRelatedGamesChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});},null);
__d("XSearchRelatedPostsPivotController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/async\/related_posts_pivot\/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}});},null);
__d("XTopicConversationFeedPivotChainingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/discussions\/creation_unit\/",{});},null);