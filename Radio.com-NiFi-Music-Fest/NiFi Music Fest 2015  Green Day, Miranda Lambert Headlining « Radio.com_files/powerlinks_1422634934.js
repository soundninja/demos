/* This source code is Copyright (c) Vibrant Media 2001-2015 and forms part of the patented Vibrant Media product "IntelliTXT" (sm). */
if(!$iTXT){var $iTXT={};}
if(!$iTXT.tmpl){$iTXT.tmpl={};}
if(!$iTXT.tmpl.js){$iTXT.tmpl.js={};}
$iTXT.tmpl.loader["$iTXT.tmpl.js.Powerlinks"]=true;$iTXT.tmpl.js.Powerlinks_Load=function(){var margin=3;var plinks={init:function(_options,$super){this.options=_options;$super(_options);},afterTokenize:function(){var al=$iTXT.data.AdLogger.getInstance();this.backfillProperties=this.advert.params.get("backfillproperties",false);this.options.height=this.defaultHeight=parseInt(this.backfillProperties.height,10)+margin*2;this.options.width=this.defaultWidth=parseInt(this.backfillProperties.width,10)+margin*2;this.iframe=document.createElement("iframe");this.iframe.id="itxt_pl_frame"+Math.random().toString(32).substring(2);this.iframe.style.border=0;this.iframe.style.margin=margin+"px";this.iframe.style.padding=0;this.iframe.scroll=0;this.iframe.border=0;this.iframe.height=parseInt(this.backfillProperties.height,10);this.iframe.width=parseInt(this.backfillProperties.width,10);this.iframe.style.height=parseInt(this.backfillProperties.height,10)+"px";this.iframe.style.width=parseInt(this.backfillProperties.width,10)+"px";var creative_click_url=al.getClickURL(this.advert,{so:1},null,true);var keyword_click_url=al.getClickURL(this.advert,{redir:""});creative_click_url+="&redir=";this.advert.params.set("CLICKTAG",keyword_click_url,999);this.backfillProperties.media=this.backfillProperties.media.replace("{CLICK-URL}",encodeURIComponent(creative_click_url));},onShow:function($super){$super();document.getElementById(this.templateID).innerHTML="";document.getElementById(this.templateID).appendChild(this.iframe);this.iframe.contentWindow.contents="<html><head><style>body {border: 0; margin: 0; padding: 0}img{border:0}</style></head><body>"+this.backfillProperties.media+"</body></html>";this.iframe.src='javascript:window["contents"]';if(this.backfillProperties.impressionUrl){$iTXT.core.Util.dropImage(this.backfillProperties.impressionUrl);}}};$iTXT.tmpl.js.Powerlinks=$iTXT.core.Class.create($iTXT.tmpl.TemplateBase,plinks);};