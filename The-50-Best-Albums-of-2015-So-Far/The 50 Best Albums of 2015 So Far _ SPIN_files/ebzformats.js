var ebz;!function(a){!function(b){!function(a){a[a.IMG=0]="IMG",a[a.IFRAME=1]="IFRAME",a[a.SWF=2]="SWF",a[a.VIDEO=3]="VIDEO"}(b.DomTag||(b.DomTag={}));b.DomTag;!function(a){a[a.HORIZONTAL=0]="HORIZONTAL",a[a.VERTICAL=1]="VERTICAL",a[a.BOTH=2]="BOTH"}(b.Align||(b.Align={}));b.Align;!function(a){a[a.ABSOLUTE=0]="ABSOLUTE",a[a.FIXED=1]="FIXED"}(b.StylePosition||(b.StylePosition={}));b.StylePosition;!function(a){a[a.PORTRAIT=0]="PORTRAIT",a[a.LANDSCAPE=1]="LANDSCAPE"}(b.Orientation||(b.Orientation={}));var c=(b.Orientation,function(){function c(){}return c.getWindow=function(){return window},c.getWindowSize=function(){return"number"==typeof b.Dom.getWindow().innerWidth?[b.Dom.getWindow().innerWidth,b.Dom.getWindow().innerHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:[1e3,600]},c.getWindowScroll=function(){if("number"==typeof b.Dom.getWindow().pageXOffset)return[b.Dom.getWindow().pageXOffset,b.Dom.getWindow().pageYOffset];var a=[0,0],c=[0,0];return document.body&&"number"==typeof document.body.scrollTop&&(a=[document.body.scrollLeft,document.body.scrollTop]),document.documentElement&&"number"==typeof document.documentElement.scrollTop&&(c=[document.documentElement.scrollLeft,document.documentElement.scrollTop]),c[0]>a[0]||c[1]>a[1]?c:a},c.getDocumentSize=function(){return[Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth),Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)]},c.getLanguage=function(){var a=window.navigator;return(a.language||a.browserLanguage||a.systemLanguage||a.userLanguage||"en_US").substr(0,2)},c.isAboveWaterline=function(a,b){"undefined"==typeof b&&(b=0);var d=c.getOffset(a),e=c.getWindowSize();return d[1]+b<e[1]},c.tagFromSrc=function(a){var b,c=a.substr(a.lastIndexOf(".")+1).toLowerCase();switch(c){case"jpg":case"jpeg":case"gif":case"png":b=0;break;case"html":case"htm":case"php":b=1;break;case"swf":b=2;break;case"mp4":case"ogg":case"ogv":case"webm":b=3;break;default:b=/youtube|dailymotion/i.test(a)?3:1}return b},c.applyStyle=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c],"opacity"===c&&(a.style.filter="alpha(opacity="+Math.round(100*b[c])+")"))},c.applyVendorProperties=function(b,c,d){b.style[c]=d,c=a.helper.Util.capitalize(c),b.style["Moz"+c]=d,b.style["webkit"+c]=d,b.style["O"+c]=d,b.style["ms"+c]=d},c.readyIEtop=function(){try{var a=document.documentElement;a.doScroll("left");for(var b;b=c.readyQueue.shift();)b()}catch(d){setTimeout(c.readyIEtop,50)}},c.onDomReady=function(a){!document||"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState?b.Dom.getWindow().addEventListener?b.Dom.getWindow().addEventListener("DOMContentLoaded",a,!1):b.Dom.getWindow().attachEvent&&window===b.Dom.getWindow().top?1===c.readyQueue.push(a)&&c.readyIEtop():b.Dom.getWindow().attachEvent&&b.Dom.getWindow().attachEvent("onload",a):"interactive"===document.readyState&&document.attachEvent?document.attachEvent("onreadystatechange",function(){("complete"===document.readyState||"loaded"===document.readyState)&&a()}):a()},c.attach=function(a){var b=document.getElementsByTagName("script")[0];if(b&&b.parentNode)b.parentNode.insertBefore(a,b);else{var c=document.getElementsByTagName("head")[0],d=document.getElementsByTagName("body")[0];(c||d).appendChild(a)}},c.getOffset=function(a){var c=a.getBoundingClientRect(),d=b.Dom.getWindow().pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,e=b.Dom.getWindow().pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;return[c.left-d-document.documentElement.clientLeft,c.top+e-document.documentElement.clientTop]},c.addEvent=function(a,d,e,f){"undefined"==typeof f&&(f=!1);var g,h=e;if("load"===a){if("complete"===d.readyState||"loaded"===d.readyState)return void setTimeout(function(){return e(null)},1);if("undefined"!=typeof d.readyState)return void(d.onreadystatechange=function(a){("complete"===d.readyState||"loaded"===d.readyState||"interactive"===d.readyState)&&(d.onreadystatechange=null,e(null))})}return f&&(g=e,e=function(b){c.removeEvent(a,d,e),h(b)}),"undefined"!=typeof d.addEventListener?void d.addEventListener(a,e,!0):void(c.HTML_EVENTS.indexOf(a)>-1?d.attachEvent("on"+a,function(a){"undefined"==typeof a&&(a=b.Dom.getWindow().event),"undefined"!=typeof a&&(a.target=a.srcElement),e(a)}):(d[a]||(d[a]=[]),d[a].push({handler:e,call:function(){var b=document.createEventObject();b.target=d,b.type=a,e(b)}})))},c.removeEvent=function(a,b,d){if("undefined"!=typeof b.removeEventListener)b.removeEventListener(a,d,!0);else if(c.HTML_EVENTS.indexOf(a)>-1)b.detachEvent("on"+a,d);else for(var e=0;e<b[a].length;++e)b[a][e].handler===d&&b[a].splice(e,1)},c.dispatchEvent=function(a,d){if("function"==typeof b.Dom.getWindow().event){var e=new Event;e.type=a,d.dispatchEvent(e)}else if(/MSIE [2-8]{1}/.test(navigator.userAgent))if(c.HTML_EVENTS.indexOf(a)>-1){var f=document.createEventObject();f.type=a,d.fireEvent("on"+f.type,f)}else{if(d[a])for(var g=0;g<d[a].length;++g)d[a][g].call();d!==document&&c.dispatchEvent(a,d.parentNode)}else{var h=document.createEvent("HTMLEvents");h.initEvent(a,!0,!0),d.dispatchEvent(h)}},c.centerMe=function(a,b,c){"undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=2);var d="px",e="px",f=a.offsetWidth,g=a.offsetHeight,h="%|px|em|pt";if(null===f||0===f){var i=a.style.width;i.match(h)&&(d=i.match(h)[0],f=parseFloat(i.replace(d,"")))}if(null===g||0===g){var j=a.style.height;j.match(h)&&(e=j.match(h)[0],g=parseFloat(j.replace(e,"")))}switch((2===c||0===c)&&(a.style.left="50%",a.style.marginLeft="-"+(f/2+d)),(2===c||1===c)&&(a.style.top="50%",a.style.marginTop="-"+(g/2+e)),b){case 0:a.style.position="absolute";break;case 1:a.style.position="fixed"}},c.createIframe=function(a){var c=document.createElement("iframe"),d=a?a.width+"px":"100%",e=a?a.height+"px":"100%";return b.Dom.applyStyle(c,{background:"transparent",border:"0 !important",width:d,height:e}),c.style.cssText+="; height: "+e+" !important;width: "+d+" !important;min-height: 0 !important;margin: 0 !important;",c.setAttribute("allowTransparency","true"),c.border="0",c.frameBorder="0",c.scrolling="no",c.setAttribute("allowfullscreen","true"),c.setAttribute("webkitallowfullscreen","true"),c.setAttribute("mozallowfullscreen","true"),c},c.convertToDeviceSize=function(d){var e,f=[b.Dom.getWindow().screen.availWidth,b.Dom.getWindow().screen.availHeight],g=c.getWindowSize(),h={width:null,height:null,convertInPercent:d.convertInPercent};return!a.helper.Context.isViewport()&&a.helper.Context.isAndroidNative()&&a.helper.Context.getAndroidVersion()<=430&&window.devicePixelRatio&&0===c.getOrientation()&&(f[0]=f[0]/window.devicePixelRatio,f[1]=f[1]/window.devicePixelRatio),d.width&&(e=0===c.getOrientation()?0:1,h.width=d.width*g[e]/f[e],d.convertInPercent&&(h.width=100*h.width/g[e])),d.height&&(e=0===c.getOrientation()?1:0,h.height=d.height*(g[e]+c.getStatusBarSize())/f[e],d.convertInPercent&&(h.height=100*h.height/g[e])),h},c.getOrientation=function(){return"undefined"!=typeof b.Dom.getWindow().matchMedia?b.Dom.getWindow().matchMedia("(orientation:landscape)").matches?1:0:"undefined"!=typeof b.Dom.getWindow().orientation?0===b.Dom.getWindow().orientation||180===b.Dom.getWindow().orientation?0:1:void 0},c.addCssClass=function(a,b){for(var d=0;d<b.length;++d)c.hasCssClass(a,b[d])||(a.className+=""===a.className?b[d]:" "+b[d])},c.removeCssClass=function(a,b){for(var d=0;d<b.length;++d)if(c.hasCssClass(a,b[d])){for(var e=a.className.split(" "),f="",g=0;g<e.length;++g)f+=e[g]===b[d]?"":" "+e[g];a.className=f}},c.hasCssClass=function(a,b){return a.className.split(" ").indexOf(b)>-1},c.forceOrientation=function(b,d){"undefined"==typeof d&&(d=0),a.helper.Context.isMobile()&&c.addEvent("orientationchange",window,function(a){var d=c.getWindowSize();0===c.getOrientation()?c.applyStyle(b,{"-webkit-transform-origin":"","-webkit-transform":"",width:"",height:""}):1===c.getOrientation()&&c.applyStyle(b,{"-webkit-transform-origin":d[0]/2+"px "+d[0]/2+"px","-webkit-transform":"rotate(90deg)",width:d[1]+"px",height:d[0]+"px"})})},c.openExternalPage=function(b){""!==b&&(a.helper.Context.isMraid()?window.mraid.open(b):a.helper.Context.isSdk()?EbzSDK.openBrowser({url:b}):window.open(b))},c.useCustomClose=function(){a.helper.Context.isSdk()?(EbzSDK.activityIndicator({show:"false"}),EbzSDK.webView({viewId:"mainView",closeButtonPos:0})):a.helper.Context.isMraid()&&window.mraid.useCustomClose(!0)},c.enableMessageOnLandscape=function(b){if(0===document.getElementsByClassName(a.helper.CommonCss.MESSAGE_BOX_DISPLAY_ON_LANDSCAPE).length){var d=document.createElement("div");d.innerHTML=b,c.addCssClass(d,[a.helper.CommonCss.MESSAGE_BOX_DISPLAY_ON_LANDSCAPE]),c.addEvent("orientationchange",window,function(a){1===c.getOrientation()?(c.applyStyle(d,{display:"block"}),setTimeout(function(){return c.applyStyle(d,{opacity:1})},200),setTimeout(function(){return c.applyStyle(d,{opacity:0})},2e3)):c.applyStyle(d,{display:"none",opacity:0})}),c.addEvent("transitionEnd",window,function(a){"0"===d.style.opacity&&c.applyStyle(d,{display:"none"})}),1!==c.getOrientation()?c.applyStyle(d,{display:"none",opacity:0}):setTimeout(function(){return c.applyStyle(d,{opacity:0})},3e3),document.body.appendChild(d)}},c.disableMessageOnLandscape=function(){0!==document.getElementsByClassName(a.helper.CommonCss.MESSAGE_BOX_DISPLAY_ON_LANDSCAPE).length&&document.body.removeChild(document.getElementsByClassName(a.helper.CommonCss.MESSAGE_BOX_DISPLAY_ON_LANDSCAPE)[0])},c.getStatusBarSize=function(){var d=[b.Dom.getWindow().screen.availWidth,b.Dom.getWindow().screen.availHeight],e=c.getWindowSize(),f=0;return 1===c.getOrientation()&&a.helper.Context.isMobile(2)?(d[1]+=20,f=e[0]*d[0]/d[1]-e[1],f>180&&(f*=2.5)):(d[1]-=a.helper.Context.isAndroid()?25:0,f=e[0]*d[1]/d[0]-e[1],1===c.getOrientation()&&a.helper.Context.isAndroid()&&f>50&&(f=0)),f},c.getRuleFromSelector=function(a){if(document.styleSheets)for(var b in document.styleSheets)if(document.styleSheets.hasOwnProperty(b)){var c=document.styleSheets[b];for(var d in c.cssRules)if(c.cssRules.hasOwnProperty(d)){var e=c.cssRules[d];if(e.selectorText===a)return e}}return null},c.HTML_EVENTS=["load","unload","resize","scroll","blur","change","focus","reset","select","submit","abort","keydown","keypress","keyup","click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup"],c.readyQueue=[],c}());b.Dom=c}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(){}return b.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},b.camelCase=function(a){for(var c=a.split("_"),d="",e=0;e<c.length;e++)d+=b.capitalize(c[e]);return d},b.clone=function(a){if(null===a||"object"!=typeof a)return a;var b=Object.prototype.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},b.merge=function(b,c){if(!b)return c;if(!c)return b;var d=a.helper.Util.clone(c);for(var e in b)!b.hasOwnProperty(e)||null===b[e]&&"undefined"!=typeof d[e]||(d[e]=b[e]);return d},b.format=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a=a.replace("{"+c+"}",b[c]));return a},b.addTimestamp=function(c){var d=Math.round((new Date).getTime()/1e3).toString(),e=a.PREFIX+Math.floor(1e4*Math.random()),f=c.replace(/(\[|%5B)timestamp(\]|%5D)/gi,d).replace(/(\[|%5B)random(\]|%5D)/gi,e).replace(/(\[|%5B)no-random(\]|%5D)/gi,"");return f===c&&(f+=b.getSeparator(f)+"r="+e),f},b.addProtocol=function(a){return 0===a.indexOf("//")?("https:"===window.location.protocol?"https:":"http:")+a:a},b.getSeparator=function(a){return a&&a.indexOf("?")>=0?"&":"?"},b.hashString=function(a){var b,c,d,e=0;if(0===a.length)return e.toString();for(b=0,d=a.length;d>b;b++)c=a.charCodeAt(b),e=(e<<5)-e+c,e|=0;return e.toString()},b.isYoutubeUrl=function(a){return/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/.test(a)},b.getParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.search);return d?decodeURIComponent(d[1].replace(/\+/g," ")):""},b.recurentCall=function(a,b,c){"undefined"==typeof b&&(b=200),"undefined"==typeof c&&(c=50);var d,e=b/c,f=0;d=function(){e--,0>=e?clearTimeout(f):(a(),f=setTimeout(d,c))},f=setTimeout(d,c)},b}();b.Util=c}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){var b=function(){function a(){this.callbacks={}}return a.prototype.on=function(a,b){return"undefined"==typeof this.callbacks[a]&&(this.callbacks[a]=[]),this.callbacks[a].push(b),this},a.prototype.once=function(a,b){var c=this;"undefined"==typeof this.callbacks[a]&&(this.callbacks[a]=[]);var d=function(e){c.off(a,d),b.apply(c,arguments)};return d.fn=b,this.on(a,d),this},a.prototype.off=function(a,b){if(0===arguments.length)this.callbacks={};else if(1===arguments.length)delete this.callbacks[a];else for(var c=this.callbacks[a],d=0,e=c.length;e>d;d++)if(c[d]===b||c[d].fn===b){c.splice(d,1);break}return this},a.prototype.emit=function(a,b){var c=this.callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;d++)c[d].call(this,b)}return this},a}();a.Emitter=b}(ebz||(ebz={}));var ebz;!function(ebz){!function(hub){function setupCallbacks(a,b){if(Array.isArray(b))for(var c=0,d=b.length;d>c;c++){var e,f=b[c];1===f.type?e=pixel(f.data):2===f.type&&(e=js(window.top!==window.self?'window.parent.postMessage("js:'+f.data+'", "*")':f.data)),a.on(f.event,e)}}function adloox(a,b){return function(c){if("http:"===window.location.protocol){window.adloox_alerte_id=a+"_"+b;var d=document.createElement("script");d.src="http://j.adlooxtracking.com/ads/js/tfa_ebuzz_creaebz.js",ebz.helper.Dom.attach(d)}}}function pixel(a,b){return function(c){var d=ebz.helper.Util.addTimestamp(a);d=ebz.helper.Util.format(d,b),c&&(d=ebz.helper.Util.format(d,c));var e=new Image;e.src=d}}function js(code){return function(data){try{eval(code)}catch(e){}}}hub.setupCallbacks=setupCallbacks,hub.adloox=adloox,hub.pixel=pixel,hub.js=js}(ebz.hub||(ebz.hub={}));var hub=ebz.hub}(ebz||(ebz={})),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(!this)throw new TypeError;var c=this.length,d=b||0;if(0===c||d>=c)return-1;0>d&&(d=c-Math.abs(d));for(var e=d;c>e;e++)if(this[e]===a)return e;return-1}),document.getElementsByClassName||(document.getElementsByClassName=function(a){return document.querySelectorAll("."+a)}),window.getComputedStyle||(window.getComputedStyle=function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"===b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle[b]?a.currentStyle[b]:null},this}),Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var ebz;!function(a){!function(a){!function(a){a[a.CRUNCH=1]="CRUNCH",a[a.EBZ=2]="EBZ"}(a.AdServer||(a.AdServer={}));a.AdServer;!function(a){a[a.JAVASCRIPT=2]="JAVASCRIPT",a[a.PIXEL=1]="PIXEL"}(a.CallbackMode||(a.CallbackMode={}));a.CallbackMode;!function(a){a[a.ADVERTISER=2]="ADVERTISER",a[a.EBUZZING=1]="EBUZZING",a[a.EBZ_PUBLISHER=5]="EBZ_PUBLISHER",a[a.EBZ_ADVERTISER=4]="EBZ_ADVERTISER",a[a.PUBLISHER=3]="PUBLISHER"}(a.CallbackSource||(a.CallbackSource={}));a.CallbackSource;!function(a){a[a.SWF=2]="SWF",a[a.FACEBOOK=1]="FACEBOOK",a[a.NORMAL=0]="NORMAL"}(a.Embed||(a.Embed={}));a.Embed;!function(a){a[a.COUNTDOWN=3]="COUNTDOWN",a[a.INLINE=4]="INLINE",a[a.MOUSEOVER=2]="MOUSEOVER",a[a.CLICK=1]="CLICK",a[a.FASTCOUNTDOWN=5]="FASTCOUNTDOWN"}(a.ExpandStartMode||(a.ExpandStartMode={}));a.ExpandStartMode;!function(a){a[a.DAILYMOTION=3]="DAILYMOTION",a[a.VPAID=5]="VPAID",a[a.EBUZZING=1]="EBUZZING",a[a.YOUTUBE=2]="YOUTUBE",a[a.FLV=6]="FLV",a[a.YOUTUBE_NAKED=7]="YOUTUBE_NAKED",a[a.VAST=4]="VAST"}(a.MediaProvider||(a.MediaProvider={}));a.MediaProvider;!function(a){a[a.OVER_NO_MUTE_BUTTON=4]="OVER_NO_MUTE_BUTTON",a[a.START_NO_MUTE_BUTTON=2]="START_NO_MUTE_BUTTON",a[a.START_MUTE_BUTTON=1]="START_MUTE_BUTTON",a[a.OVER_ON_LEAVE_OFF=5]="OVER_ON_LEAVE_OFF",a[a.OVER_MUTE_BUTTON=3]="OVER_MUTE_BUTTON"}(a.NativeSoundOption||(a.NativeSoundOption={}));a.NativeSoundOption;!function(a){a[a.VIDEOSOUND_OFF=1]="VIDEOSOUND_OFF",a[a.VIDEO_ON_SOUNDS_ON=2]="VIDEO_ON_SOUNDS_ON",a[a.VIDEO_ON_SOUNDS_OFF=3]="VIDEO_ON_SOUNDS_OFF"}(a.NativeVideoPauseOption||(a.NativeVideoPauseOption={}));a.NativeVideoPauseOption;!function(a){a[a.SCREEN=2]="SCREEN",a[a.POPUP=1]="POPUP",a[a.CUSTOM=3]="CUSTOM"}(a.ShareType||(a.ShareType={}));a.ShareType;!function(a){a[a.COUNTDOWN=4]="COUNTDOWN",a[a.MOUSEOVER=2]="MOUSEOVER",a[a.CLICK=1]="CLICK",a[a.AUTOPLAY=3]="AUTOPLAY"}(a.StartMode||(a.StartMode={}));a.StartMode}(a.thrift||(a.thrift={}));a.thrift}(ebz||(ebz={}));var ebz;!function(a){a.page=a.page||{},a.playlists=a.playlists||[],a.isIframed,a.lastEventName,a.adCallId="adCallId",a.config={deployedHash:"defaultDeployHash",urls:{ebzformats:"http://assets.ebz.io/ebzFormats",buzzplayer:"http://assets.ebz.io/ebzFormats/buzzplayer",playerAssets:"http://assets.ebz.io/ebzFormats",share:"http://bzzvid.ebuzzing.com",ping:"",tracking:"http://stat.ebuzzing.com",player:"http://assets.ebz.io/ebzFormats/buzzplayer",api:"http://api.ebuzzing.com/partners/1.0",root:"http://social.ebuzzing.com"},playerSizes:{1:{width:300,height:250,type:1,id:1},2:{width:300,height:275,type:1,id:2},3:{width:300,height:225,type:1,id:3},4:{width:336,height:280,type:1,id:4},5:{width:400,height:353,type:1,id:5},6:{width:420,height:257,type:1,id:6},7:{width:425,height:375,type:1,id:7},8:{width:640,height:360,type:1,id:8},11:{width:185,height:185,type:2,id:11},14:{width:300,height:183,type:1,id:14},15:{width:560,height:315,type:1,id:15}},routes:{feed:"/feed_channel{pid}.js?target={target}&targetInBoard={targetInBoard}&type={scriptType}",seed:"/seed_campaign{cid}_channel{pid}.js?target={target}&targetInBoard={targetInBoard}",buzz:"/seed_buzz{id}.js?target={target}",campaign:"/seed_campaign{cid}.js?target={target}"}}}(ebz||(ebz={}));var ebz;!function(a){!function(a){var b=function(){function a(){}return a.stringify=function(b){if(JSON&&JSON.encode&&!JSON.stringify)return JSON.encode(b);if(JSON&&JSON.stringify&&JSON.parse){var c,d=a.jsonIsBroken();return c=d?JSON.stringify(b,function(a,b){return"string"==typeof b&&0===b.indexOf("[")&&d?new Function("return "+b)():b}):JSON.stringify(b)}return"Error, JSON not present on this page"},a.parse=function(b){if(JSON&&JSON.decode&&!JSON.parse)return JSON.decode(b);if(JSON&&JSON.stringify&&JSON.parse){var c=a.jsonIsBroken();return c?JSON.parse(b,function(a,b){if(!b)return null;var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g;return b.replace&&c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+b)():b}):JSON.parse(b)}return"Error, JSON not present on this page"},a.jsonIsBroken=function(){return"string"==typeof JSON.parse(JSON.stringify([]))},a}();a.Json=b}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(a){var b=function(){function a(){}return a.fire=function(a,b,c,d){},a.APP_UNKNOWN_FORMAT="A1",a.PLAYLIST_TARGET_NOT_FOUND="P1",a.PLAYLIST_SCRIPT_TAG_NOT_FOUND="P3",a.PLAYLIST_WRONG_USER_DATA="P2",a.RME_SWFOBJECT_EMBED="R1",a.RME_ASSET_NOT_FOUND="R2",a.BP_JS_TRACKING="B1",a.BP_TRIGGER_EVENT="B2",a.BP_CORRUPTED_EVENT_DATA="B3",a.BP_POSTED_EXCEPTION="B4",a.BP_RECEIVED_ERROR="B5",a.BP_SWFOBJECT_EMBED="B6",a.BP_VAST_FILE_NOT_ACCESSIBLE="B7",a.TRACKER_JS_TRACKING="T1",a.TRACKER_IMPRESSION="T2",a.IFRAME_BUZZPLAYER_INIT="I1",a.NATIVE_UNKNOWN_TAG="N1",a.sequenceId=1,a}();a.ErrorTracker=b}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function a(){}return a.prototype.log=function(){},a.prototype.info=function(){},a.prototype.warn=function(){},a.prototype.error=function(){},a}(),d={};b.START_TIME=b.START_TIME||Date.now();var e=function(){function e(a){this.category=a,d[a]?d[a]++:d[a]=0,this.categoryInstanceNum=d[a],window.console&&"undefined"!=typeof window.console.log?this.console=window.console:this.console=new c}return e.prototype.debug=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._log(this.console.log,1,a)},e.prototype.info=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._log(this.console.info,2,a)},e.prototype.warn=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._log(this.console.warn,3,a)},e.prototype.error=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];this._log(this.console.error,4,a)},e.prototype._log=function(c,d,e){if(0!==e.length&&0===window.name.indexOf(a.PREFIX)){var f=parseInt(window.name[3],10);if(!(f>d)){if(window.name.length>4){var g=window.name.substr(4);if(g!==this.category.toLowerCase())return}var h=Date.now()-b.START_TIME;e.unshift((h/1e3).toFixed(3)+"s ["+a.PREFIX+"."+this.category+"#"+this.categoryInstanceNum+"]");try{c.apply(this.console,e)}catch(i){Function.prototype.apply.apply(c,[this.console,e])}}}},e}();b.ConsoleLogger=e}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(a){!function(a){a.ADVERTISER_BILLABLE="advertiserBillable",a.ADVERTISER_ENGAGEMENT="advertiserEngagement",a.CLICK="redirect",a.CLICK_BACKGROUND="clicBackground",a.CLICK_VIDEO="clicVideo",a.CLOSE_AD="closeAd",a.COLLAPSE="collapse",a.CONVERSION="conversion",a.EMPTY_VAST="emptyVast",a.ENGAGEMENT_DURATION="engagementDuration",a.EXPAND_OPENING="expandOpening",a.EXPAND_TEASER_IMPRESSION="expandTeaserimpression",a.IMPRESSION="impression",a.NATIVE_OPENING="nativeOpening",a.PLAYER_START="playerStart",a.PRE_IMPRESSION="pre-impression",a.PUBLISHER_BILLABLE="publisherBillable",a.PUBLISHER_ENGAGEMENT="publisherEngagement",a.SHARE="share",a.SHARE_FACEBOOK="shareFacebook",a.SHARE_FACEBOOKPAGE="shareFacebookpage",a.SHARE_GPLUS="shareGplus",a.SHARE_LINKEDIN="shareLinkedin",a.SHARE_PINTEREST="sharePinterest",a.SHARE_RENREN="shareRenren",a.SHARE_TUENTI="shareTuenti",a.SHARE_TWITTER="shareTwitter",a.SHARE_VKONTAKTE="shareVkontakte",a.SHARE_WEIBO="shareWeibo",a.SHARE_XING="shareXing",a.SKIP="skip",a.UNMUTE="unmute",a.VAST_ERROR="vastError",a.VAST_LOADED="vastLoaded",a.VIDEO_25="video25",a.VIDEO_50="video50",a.VIDEO_75="video75",a.VIDEO_90="video90",a.VIDEO_ENDED="ended",a.VIDEO_ERROR="videoError",a.VIDEO_PAUSE="pause",a.VIDEO_START="start",a.VIEWABILITY="viewability",a.VIEWABILITY_PAUSE_ON_FOCUS_OFF="viewabilityPauseOnFocusOff",a.VIEWABILITY_PLAY_ON_FOCUS_ON="viewabilityPlayOnFocusOn",a.VIEWABILITY_UNMEASURABLE="viewabilityUnmeasurable"}(a.events||(a.events={}));a.events}(a.thrift||(a.thrift={}));a.thrift}(ebz||(ebz={}));var ebz;!function(a){!function(b){b.nextPlaylistId=b.nextPlaylistId||0,b.advertiserViewTrackingTimeout=null,b.publisherViewTrackingTimeout=null;var c=function(){function c(c,d,e,f){this.config=c,this.campaigns=d,this.userData=f,this.logger=new a.helper.ConsoleLogger("Playlist"),this.videoIndex=0,this.id=b.nextPlaylistId++,this.findTarget(e),a.playlists[this.id]=this,this.parentContainer=this.container;for(var g in window._ebz)window._ebz.hasOwnProperty(g)&&window._ebz[g]&&"playlist"===window._ebz[g].name&&(window._ebz[g].id===this.id||"undefined"==typeof window._ebz[g].id)&&window._ebz[g].callback(!!d.length)}return c.prototype.next=function(){if(this.videoIndex>=this.campaigns.length)this.logger.warn("No more campaigns"),0===this.videoIndex&&(this.format=new a.format.Fallback(this.container,this.userData),a.placement.publisherCallback(0));else{var b=this.campaigns[this.videoIndex++];this.loadVideo(b)}this.logger.info("player #"+this.id+":",this.format)},c.prototype.findTarget=function(b){if(b){var c=document.getElementById(b);if(!c)return this.logger.error("Specified target '"+b+"' not found"),void a.helper.ErrorTracker.fire(a.helper.ErrorTracker.PLAYLIST_TARGET_NOT_FOUND,b);if(!this.userData){var d="EbuzzingScriptParams_"+b.replace(/-/g,"_");if(window[d])this.userData=window[d];else if(window.EbuzzingScriptParams)this.userData=window.EbuzzingScriptParams;else try{this.userData=this.findUserTagScript(c.parentNode)[1],this.userData||(this.userData={})}catch(e){this.userData={}}this.userData.width||this.userData.size||(this.userData.width=c.offsetWidth),this.userData.height||this.userData.size||(this.userData.height=c.offsetHeight)}var f=c.style.display;"IFRAME"!==c.nodeName||f&&"none"!==f?"none"===f&&(f=""):f="inline-block",this.container=document.createElement("div"),a.helper.Dom.applyStyle(this.container,{position:c.style.position,top:c.style.top,left:c.style.left,display:f}),c.id&&(this.container.id=c.id),c.parentNode.replaceChild(this.container,c)}else{try{var g=this.findUserTagScript(document)}catch(e){return void a.helper.ErrorTracker.fire(a.helper.ErrorTracker.PLAYLIST_SCRIPT_TAG_NOT_FOUND)}var h=g[0];if(this.userData||(this.userData=g[1]?g[1]:{}),this.container=document.createElement("div"),this.container.id=a.PREFIX+this.id,document.body)h.parentNode.replaceChild(this.container,h);else{var i=Date.now()+Math.random();document.write('<div id="ebz_"'+i+'"></div>'),a.helper.Dom.onDomReady(function(){document.getElementById("ebz_"+i).appendChild(this.container)}),h.parentNode.removeChild(h)}}this.userData.origin&&(a.page.referer=this.userData.origin)},c.prototype.findUserTagScript=function(b){var c,d,e=b.getElementsByTagName("script"),f=e.length;if(0===e.length)throw new Error("cannot find a script tag");do c=e[--f],d=c.src;while(!c||!new RegExp(".ebu?z","i").test(c.src));var g=c.innerHTML.replace(/(^|\n|\s|\r)+\/\/.*/g,"").replace(/^\s+|\s+$/g,""),h=null;if(g)try{h=a.helper.Json.parse(g)}catch(i){this.logger.error("Cannot read user data for this player tag (incorrect object string): "+i,g),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.PLAYLIST_WRONG_USER_DATA,g)}return[c,h]},c.prototype.loadVideo=function(c){this.config&&this.config.urls&&(c.urls=a.helper.Util.merge(c.urls,this.config.urls)),c.page=a.page,c.displaySettings.language=this.userData.lang||a.helper.Dom.getLanguage(),c.displaySettings.debug=0===window.name.indexOf("ebz"),this.userData.hideFooter&&(c.displaySettings.hideFooter=!0),this.userData.hideHeader&&(c.displaySettings.hideHeader=!0),this.userData.isNative&&(c.displaySettings.isNative=!0),this.userData.unclickable&&(c.displaySettings.unclickable=!0),this.userData.noPause&&(c.displaySettings.noPause=!0);var d,e,f=Math.round(Date.now()/1e3).toString();if(c.tracking||(c.tracking=[]),this.userData.context){if(c.displaySettings.expand=null,c.displaySettings.miniExpand=null,this.userData.ebuzzingViewTrackingUrl)for(var g in c.tracking.callbacks)c.tracking.callbacks[g].data&&c.tracking.callbacks[g].data.indexOf("visionnagePub")>-1&&(c.tracking.callbacks[g].data.indexOf("uniteFactu=0")>-1||c.tracking.callbacks[g].data.indexOf("uniteFactu=1")>-1)&&(c.tracking.callbacks[g].data=this.userData.ebuzzingViewTrackingUrl);var h=document.getElementsByTagName("a");for(d=0,e=h.length;e>d;d++)h[d].href=h[d].href.replace(/(\[|%5B)timestamp(\]|%5D)/gi,f)}if(this.userData.tracking){var i,j,k=["click","view","pause","share","start"];for(d=0,e=k.length;e>d;d++)if(i=this.userData.tracking[k[d]]){j="string"==typeof i?[i]:i;for(var l,m=0,n=j.length;n>m;m++){var o={view:a.thrift.events.PUBLISHER_BILLABLE,click:a.thrift.events.CLICK,start:a.thrift.events.VIDEO_START,pause:a.thrift.events.VIDEO_PAUSE,share:a.thrift.events.SHARE},p=o[k[d]];l=0===j[m].indexOf("http")?{data:j[m].replace(/^https?:/i,""),type:1,event:p,once:!0}:{data:j[m],type:2,event:p,once:!0},c.tracking.callbacks.push(l)}}}if(c.displaySettings.isMobile=a.helper.Context.isMobile(),this.userData.noControls&&(c.displaySettings.noControls=!0),this.userData.startMode&&(c.displaySettings.startMode=this.userData.startMode),this.userData.skippable&&(c.displaySettings.showSkipButton=!0,c.displaySettings.autoSkip=!0),this.userData.isPreroll&&(c.displaySettings.showSkipButton=!0,c.displaySettings.autoSkip=!0,c.displaySettings.hideFooter=!0,c.displaySettings.miniExpand=null),c.displaySettings.isNative&&(c.displaySettings.expand=null,c.displaySettings.miniExpand=null,c.displaySettings.hideFooter=!0,c.dimension&&c.dimension.width&&c.dimension.height)){c.displaySettings.dimension||(c.displaySettings.dimension={width:this.userData.width,height:this.userData.height});var q=c.displaySettings.dimension.width*c.dimension.height/c.dimension.width;c.displaySettings.dimension.height=Math.round(q)}var r,s=!1,t=a.helper.Dom.getWindowSize();if(c.displaySettings.expand&&!c.displaySettings.expand.customContent&&(r=c.displaySettings.expand.dimension.width+"x"+c.displaySettings.expand.dimension.height,t[0]<.7*c.displaySettings.expand.dimension.width?s=!0:t[1]<.7*c.displaySettings.expand.dimension.height&&(s=!0)),c.displaySettings.miniExpand&&(r=a.format.ElasticoBuzzplayer.SIZE.width+"x"+a.format.ElasticoBuzzplayer.SIZE.height,(t[0]<a.format.ElasticoBuzzplayer.SIZE.width||t[1]<a.format.ElasticoBuzzplayer.SIZE.height)&&(s=!0)),s){var u=t[0]+"x"+t[1];this.logger.warn("Expand has not enough room to show up: needs "+r+", got "+u+" (campaign "+c.campaign.id+", buzz "+c.buzzID+")"),c.displaySettings.expand=null,c.displaySettings.miniExpand=null,c.displaySettings.startMode=1,a.isIframed&&(this.container.parentNode.removeChild(this.container),a.helper.Dom.applyStyle(this.container,{position:"absolute",top:0,left:0,width:t[0]+"px",height:(t[1]<t[0]?t[1]:t[0])+"px"}),document.body.style.overflow="hidden",document.body.appendChild(this.container))}if(c.displaySettings.expand){this.userData.tracking&&(c.displaySettings.expand.url+="&publisherTracking="+encodeURIComponent(a.helper.Json.stringify(this.userData.tracking))),this.userData.lang&&(c.displaySettings.expand.url+="&lang="+this.userData.lang),a.page.referer&&(c.displaySettings.expand.url+="&origin="+encodeURIComponent(a.page.referer)),0===window.name.indexOf("ebz")&&(c.displaySettings.expand.url+="&debug=1"),"flash"===this.userData.version&&(c.displaySettings.expand.url+="&version=flash"),this.userData.nocache&&(c.displaySettings.expand.url+="&nocache=1");var v=function(){var d=this;c.displaySettings.expand.customContent&&!c.displaySettings.expand.lead&&(b.advertiserViewTrackingTimeout=setTimeout(function(){d.emit(a.thrift.events.ADVERTISER_BILLABLE,{sizeId:c.displaySettings.dimension.id,position:c.tracking.advertiserDelay,replay:0,referer:encodeURIComponent(c.page.url)})},1e3*c.tracking.advertiserDelay),b.publisherViewTrackingTimeout=setTimeout(function(){d.emit(a.thrift.events.PUBLISHER_BILLABLE,{sizeId:c.displaySettings.dimension.id,position:c.tracking.publisherDelay,replay:0,referer:encodeURIComponent(c.page.url)})},1e3*c.tracking.publisherDelay),this.emit(a.thrift.events.PLAYER_START))};c.displaySettings.miniExpand?this.format=new a.format.ElasticoRichMedia(c,this.id,this.container,this.userData,v):4===c.displaySettings.expand.startMode?this.format=new a.format.RichMediaInline(c,this.id,this.container,this.userData,v):this.format=new a.format.RichMediaExpand(c,this.id,this.container,this.userData,v);
}else if(c.displaySettings.miniExpand)this.format=new a.format.ElasticoBuzzplayer(c,this.id,this.container,this.userData),this.format.player.on("nextVideo",this.next.bind(this));else if(c.displaySettings.isNative){var w=!1;if("ebzNative"===this.container.id){var x=document.getElementById(a.PREFIX+"Native_above");x&&(c.displaySettings.nativeAboveWaterline?x.parentNode.replaceChild(this.container.parentNode,x):x.parentNode.removeChild(x))}3===c.displaySettings.startMode&&(c.displaySettings.startMode=1,w=!0),this.format=new a.format.NativeBuzzplayer(c,this.id,this.container,this.userData,w)}else this.format=new a.format.Buzzplayer(c,this.id,this.container,this.userData),this.format.player.on("nextVideo",this.next.bind(this));this.handleCampaignEvent(this.container,c)},c.prototype.handleCampaignEvent=function(b,c){var d=this,e=function(e){var f={cid:e,target:String(b.id)},g="EbuzzingScriptParams_"+f.target.replace(/-/g,"_");window[g]={width:c.displaySettings.dimension.width,height:c.displaySettings.dimension.height,size:c.displaySettings.dimension.id},window.EbuzzingScriptParams=window[g];var h;c.publisherChannel?(h=d.config.routes.seed,f.pid=c.publisherChannel.id):h=d.config.routes.campaign;var i=document.createElement("script");i.async=!0,i.defer=!0,i.src=c.urls.player+a.helper.Util.format(h,f),a.helper.Dom.attach(i)};this.format&&this.format.player&&this.format.player.on("campaign",e)},c}();b.Playlist=c}(a.placement||(a.placement={}));a.placement}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c;!function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.USER=1]="USER",a[a.AUTO=2]="AUTO",a[a.SELECTOR=3]="SELECTOR"}(c||(c={}));var d=function(){function b(b,c,d,e,f,g){this.config=b,this.channelId=c,this.campaignId=d,this.nativeSelectors=e,this.nativeInBoardSelectors=f,this.inReadText=g,this.bestSpot={score:0,node:null},this.logger=new a.helper.ConsoleLogger("Native"),this.raisedHtml5Error=!1,!c&&a.helper.Dom.getWindow().EbuzzingChannelId&&(this.channelId=a.helper.Dom.getWindow().EbuzzingChannelId)}return b.prototype.init=function(){return a.helper.Dom.getWindow().EbuzzingNative?void this.logger.error("Native already launched"):this.channelId?(a.helper.Dom.onDomReady(function(){this.searchNativePlacement()}.bind(this)),void(a.helper.Dom.getWindow().EbuzzingNative=!0)):void this.logger.error("No channel ID provided")},b.prototype.searchNativePlacement=function(){var a=null,b=null;this.nativeSelectors&&(a=this.insertTag(this.nativeSelectors,"Native")),this.nativeInBoardSelectors&&(b=this.insertTag(this.nativeInBoardSelectors,"NativeInBoard")),(a||b)&&this.addFormatScript(a,b)},b.prototype.throwHtml5Error=function(b){if(this.raisedHtml5Error===!1){this.logger.error("Your browser could not read this tag, probably because it is an HTML5 tag and the polyfill has not been executed before the tag was read");var c={name:b.nodeName,id:b.id,"class":b.className};a.helper.ErrorTracker.fire(a.helper.ErrorTracker.NATIVE_UNKNOWN_TAG,c),this.raisedHtml5Error=!0}},b.prototype.findBestSpot=function(c){try{c instanceof HTMLUnknownElement&&!this.raisedHtml5Error&&this.throwHtml5Error(c)}catch(d){this.throwHtml5Error(c)}var e,f,g={length:0,currentScore:0,childrenScore:0,minWidthReach:!1},h=c.innerText||c.textContent||c.nodeValue;if(h&&(3===c.nodeType||b.textNodes[c.nodeName.toUpperCase()]))g.length=h.replace(/\s+/g," ").length;else if(c===a.helper.Dom.getWindow().document.body||1===c.nodeType&&b.nodeScores[c.nodeName.toUpperCase()]){var i=0,j=0;for(e=0,f=c.childNodes.length;f>e;e++){var k=this.findBestSpot(c.childNodes[e]);i+=k.length,j+=k.currentScore,(k.minWidthReach||c.offsetWidth>=b.MINIMUM_WIDTH)&&(g.minWidthReach=!0)}g.currentScore=i,g.childrenScore=j}if(g.childrenScore&&g.minWidthReach&&g.childrenScore>b.MINIMUM_CHARS){var l,m=b.nodeScores[c.nodeName.toUpperCase()]||0,n=c.className.split(" "),o=1;for(e=0,f=n.length;f>e;e++)l=n[e].replace(/^\s+|\s+$/g,""),o+=b.classBonuses[l]||0;var p=g.childrenScore*m*o;p>this.bestSpot.score&&(this.bestSpot={score:p,node:c},this.logger.info("found a better node scoring "+this.bestSpot.score,this.bestSpot.node))}return g},b.prototype.addFormatContainer=function(c,d,e){var f=a.helper.Dom.getWindow().document.createElement(c.nodeType);if(a.helper.Dom.applyStyle(f,{overflow:"hidden",height:0,margin:"auto",display:"block",width:/MSIE/.test(navigator.userAgent)?"100%":"auto"}),this.inReadText){var g=a.helper.Dom.getWindow().document.createElement("div");a.helper.Dom.applyStyle(g,{textAlign:"center",fontSize:"10px",color:"#888888",paddingTop:"10px",paddingBottom:"5px"}),g.style.textAlign="center",g.innerHTML=this.inReadText,f.appendChild(g)}var h=a.helper.Dom.getWindow().document.createElement("div");if(h.id=a.PREFIX+d,f.appendChild(h),c.beforeElement?c.beforeElement.parentNode.insertBefore(f,c.beforeElement):c.containerElement.appendChild(f),c.containerElement&&"TBODY"===c.containerElement.tagName&&(c.containerElement.style.display="block"),e&&e.maxWidth){var i=e.maxWidth;f.style.maxWidth=i+"px"}return f.className=b.CENTER_NODE_CLASSNAME,f},b.prototype.addFormatScript=function(c,d){var e="0";c&&(a.helper.Dom.getWindow()["EbuzzingScriptParams_"+c.children[this.inReadText?1:0].id.replace(/-/g,"_")]={isNative:!0,width:c.offsetWidth,height:Math.round(c.offsetWidth/b.ASPECT_RATIO)},a.helper.Dom.isAboveWaterline(c)?(this.logger.debug("Can only display 'above the waterline' campaigns",c),e="1"):this.logger.debug("Tag is bellow the waterline",c)),d&&(a.helper.Dom.getWindow()["EbuzzingScriptParams_"+d.children[this.inReadText?1:0].id.replace(/-/g,"_")]={isNative:!0,width:d.offsetWidth,height:Math.round(d.offsetWidth/b.ASPECT_RATIO)});var f,g={pid:this.channelId,cid:this.campaignId,target:c?c.children[this.inReadText?1:0].id:"",targetInBoard:d?d.children[this.inReadText?1:0].id:"",scriptType:"native",publisherTracking:this.config.publisherTracking?decodeURI(this.config.publisherTracking):"",impressionTracking:this.config.impressionTracking?decodeURI(this.config.impressionTracking):"",onlyAboveWaterlineCampaigns:e},h=a.helper.Dom.getWindow().document.createElement("script");f=this.campaignId?this.config.routes.seed:this.config.routes.feed,window.beead_getLocalStorage&&(f+="&localstorage="+window.beead_getLocalStorage()),h.src=this.config.urls.player+a.helper.Util.format(f,g),this.logger.debug("Embed Buzzplayer:",c?c.id:"",d?d.id:"",h.src),a.helper.Dom.attach(h)},b.prototype.insertTag=function(c,d,e){"undefined"==typeof e&&(e=0);var f=null,g=this.getSpotPosition(c,d);if(g&&g.containerElement){if(2===g.type){this.logger.debug("Using automatic positionning:",g.containerElement,"Inserting before:",g.beforeElement);var h=g.containerElement.children||g.containerElement.childNodes,i=h[0],j=a.helper.Dom.getWindow().document.createElement("div");j.id=a.PREFIX+"Native_above",i.parentNode.insertBefore(j,i)}f=this.addFormatContainer(g,d,c)}else e<b.RETRY_ATTEMPTS?setTimeout(function(){this.logger.warn("Native, retry insertTag",e),this.insertTag(c,d,++e)}.bind(this),1e3):(this.logger.warn("No add, no more attempts"),a.placement.publisherCallback(0));return f},b.prototype.getSpotPosition=function(c,d){this.logger.warn("getSpotPosition()");var e={containerElement:null,beforeElement:null,type:0,nodeType:"center"},f=this.findUserTarget(d);if(f)this.logger.info("User mode",f),e.type=1,e.containerElement=f;else if(c&&!c.allowHomePage&&a.helper.Context.isHomepage())this.logger.warn("Not on homepage"),a.placement.publisherCallback(0);else{if(c&&c.selectors){var g,h;for(g=0,h=c.selectors.length;h>g;g++){var i=c.selectors[g];if(f=this.findSelectorTarget(i)){switch(e.type=3,f.tagName.match(/(TD|TR)/gi)&&(e.nodeType="tr","TD"===f.tagName&&(f=f.parentNode)),i.position){case"before":e.containerElement=f.parentNode,e.beforeElement=f;break;case"after":e.containerElement=f.parentNode,e.beforeElement=f.nextSibling;break;case"append":e.containerElement=f;break;case"prepend":e.containerElement=f,e.beforeElement=f.firstChild;break;default:this.logger.error("Position '"+i.position+"' unknown => unable to insert Native around this element:",f)}break}}this.logger.info("Selector mode",c,f)}if(!f)if(c&&c.selectorsFallback===!1)this.logger.warn("No selector match, and EbuzzingNativeSelectorsFallback is false => no action taken"),a.placement.publisherCallback(0);else if(c&&c.selectorsFallback)if(this.findBestSpot(a.helper.Dom.getWindow().document.body),f=this.bestSpot.node,this.logger.info("Automatic mode",f),this.bestSpot.score>=b.MINIMUM_SCORE)this.logger.info("OK: score="+this.bestSpot.score,f),e.beforeElement=this.findNodeJustUnderWaterline(f),e.beforeElement&&(e.containerElement=e.beforeElement.parentNode,e.type=2);else{var j="maximum score found is "+this.bestSpot.score+", minimum required is "+b.MINIMUM_SCORE;this.logger.warn("no good container found ("+j+")",f)}}return e},b.prototype.findUserTarget=function(b){var c=a.helper.Dom.getWindow().document.getElementsByClassName("ebz"+b);return 0===c.length?null:c[0]},b.prototype.findSelectorTarget=function(b){var c=null,d=a.helper.Dom.getWindow().document.querySelectorAll(b.parentQuery);return d.length&&(c=b.parentIndex?b.parentIndex>=d.length?d[d.length-1]:d[b.parentIndex-1]:d[0],b.childQuery&&(d=c.querySelectorAll(b.childQuery),c=d.length?b.childIndex?b.childIndex>=d.length?d[d.length-1]:d[b.childIndex-1]:d[0]:null)),this.logger.debug("Selector "+b+" matches:",c),c},b.prototype.findNodeJustUnderWaterline=function(b){var c,d,e,f=b.children||b.childNodes,g=a.helper.Dom.getWindowSize()[1]+a.helper.Dom.getWindowScroll()[1],h=0;e=f[0];do c=f[h++],d=a.helper.Dom.getOffset(c)[1];while(f[h]&&(g>d||3===c.nodeType));if(g>d&&(c.children||c.childNodes)&&(c.children||c.childNodes).length>0){b=c,f=b.children||b.childNodes;do c=f[h],d=a.helper.Dom.getOffset(c)[1];while(f[h++]&&(g>d||3===c.nodeType))}return c},b.MINIMUM_SCORE=5e3,b.MINIMUM_CHARS=500,b.MINIMUM_WIDTH=200,b.ASPECT_RATIO=16/9,b.RETRY_ATTEMPTS=6,b.CENTER_NODE_CLASSNAME="ebz_native_center",b.nodeScores={DIV:10,P:4,ARTICLE:20,SECTION:5,SPAN:2,FORM:4,STRONG:2,EM:3,B:1,I:1,U:1,MAIN:2},b.textNodes={SPAN:!0,STRONG:!0,EM:!0,B:!0,I:!0,U:!0},b.classBonuses={article:4,"ob-text":6,"ob-section-html":4,contenuArticle:6},b}();b.Native=d}(a.placement||(a.placement={}));a.placement}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.ANDROID=0]="ANDROID",a[a.WEBOS=1]="WEBOS",a[a.IPHONE=2]="IPHONE",a[a.IPAD=3]="IPAD",a[a.IPOD=4]="IPOD",a[a.BLACKBERRY=5]="BLACKBERRY",a[a.WINDOWS_PHONE=6]="WINDOWS_PHONE",a[a.ALL=7]="ALL"}(b.MobileName||(b.MobileName={}));var c=(b.MobileName,function(){function b(){}return b.isMobile=function(a){"undefined"==typeof a&&(a=7);var b=/Android|webOS|iPhone|iPad|iPod|Blackberry|Windows Phone/i;switch(a){case 0:b=/Android/i;break;case 1:b=/webOS/i;break;case 2:b=/iPhone/i;break;case 3:b=/iPad/i;break;case 4:b=/iPod/i;break;case 5:b=/Blackberry/i;break;case 6:b=/Windows Phone/i}return b.test(navigator.userAgent)},b.isViewport=function(){var c=document.getElementsByTagName("head")[0],d=b.isMobile(3)&&1===a.helper.Dom.getOrientation(),e=d?window.screen.availHeight+20:window.screen.availWidth;for(var f in c.children)if("viewport"===c.children[f].name&&window.innerWidth<=e)return!0;return!1},b.isAndroidNative=function(){return navigator.userAgent.indexOf("Mozilla/5.0")>-1&&navigator.userAgent.indexOf("Android ")>-1&&navigator.userAgent.indexOf("AppleWebKit")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1)},b.isAndroid=function(){return/Android/i.test(navigator.userAgent)},b.isSdk=function(){return"undefined"!=typeof EbzSDK},b.isMraid=function(){return"undefined"!=typeof window.mraid},b.isOldIE=function(a){return"undefined"==typeof a&&(a=9),new RegExp("MSIE [2-"+a+"]{1}").test(navigator.userAgent)},b.isIE10=function(){return/MSIE 1/.test(navigator.userAgent)},b.isHomepage=function(){var b,c;try{var d=document.getElementsByTagName("head")[0].innerHTML.indexOf("/wp-content/")>-1;if(d){var e=a.helper.Util.getParameterByName("p");c=""!==e&&!isNaN(Number(e))}}catch(f){c=!1}return b=c?!1:""===location.pathname.replace(/^\/|\/$/g,"")},b.getAndroidVersion=function(){for(var a=window.navigator.userAgent.match(/Android\s.+\d;/gi)||[""],b=a[0].replace(/(Android\s|\.|;)/gi,"");b.length<3;)b+="0";return parseInt(b,10)},b}());b.Context=c}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(a){var b=function(){function a(){}return a.getMediaProvider=function(a){return-1!==a.indexOf("youtube.com/watch?v=")?2:-1!==a.indexOf("dailymotion.com/video/")?3:"mp4"===a.slice(-3)?1:4},a.getVideoUrlByMediaProvider=function(a){switch(a.mediaProvider){case 2:return a.youtubeVideo.url;case 3:return a.dailymotionVideo.url;case 1:return""!==a.ebuzzingVideo.mp4?a.ebuzzingVideo.mp4:a.ebuzzingVideo.ogv;case 4:return a.vastVideo.url}},a}();a.MediaProvider=b}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b,c,d,e){"undefined"==typeof d&&(d=!1),"undefined"==typeof e&&(e=!1),this.config=b,this.channelId=c,this.preroll=d,this.postroll=e,this.videoNodes={Youtube:[],Jwplayer:[]},this.replacedNodes={Youtube:{},Jwplayer:{}},this.youtubeLoading=!1,this.jwplayerLoading=!1,this.trackingPixels={INSTANCIATED_API:7576859,VIDEO_START:7576861,PLAYER_END:7576862},this.logger=new a.helper.ConsoleLogger("Roll"),!c&&window.EbuzzingChannelId&&(this.channelId=window.EbuzzingChannelId),d||e||(window.EbuzzingPostroll||window.EbuzzingPreroll?(this.preroll=window.EbuzzingPreroll,this.postroll=window.EbuzzingPostroll):this.postroll=!0),window.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady.bind(this),window.onJwplayerReady=this.onJwplayerReady.bind(this)}return b.prototype.init=function(){if(!this.channelId)return void this.logger.error("No channel ID provided");a.helper.Dom.onDomReady(this.replacePlayers.bind(this)),a.helper.Dom.addEvent("load",window,this.replacePlayers.bind(this));setInterval(this.replacePlayers.bind(this),500)},b.prototype.fireTracking=function(b){var c=new Image;c.src=a.helper.Util.addProtocol("//ww17.smartadserver.com/call/pubimppixel/"+b+"/"+Math.round(Date.now()/1e3)+"?")},b.prototype.embedBuzzPlayer=function(b,c){window["EbuzzingScriptParams_"+b.id.replace(/-/g,"_")]={noreplace:!0,isPreroll:"preroll"===c};var d={pid:this.channelId,target:b.id,scriptType:c};a.helper.Context.isOldIE()&&(b.style.display="none");var e=document.createElement("script");e.src=this.config.urls.player+a.helper.Util.format(this.config.routes.feed,d),a.helper.Dom.attach(e)},b.prototype.onYoutubeStateChange=function(b){var c=b.target.getIframe();b.data===window.YT.PlayerState.ENDED&&(this.fireTracking(this.trackingPixels.PLAYER_END),this.postroll&&this.embedBuzzPlayer(c,"postroll")),b.data===window.YT.PlayerState.PLAYING&&(!b.target||b.target.getCurrentTime()<.5)&&(this.fireTracking(this.trackingPixels.VIDEO_START),this.preroll&&(this.replacedNodes.Youtube[a.placement.nextPlaylistId]=this.replacedNodes.Youtube[c.id],this.embedBuzzPlayer(c,"preroll")))},b.prototype.reEmbedYT=function(a){this.preroll=!1,a.api=new window.YT.Player(a.ref.id,{videoId:a.id,width:a.width,height:a.height,playerVars:{autoplay:1},events:{onStateChange:this.onYoutubeStateChange.bind(this)}})},b.prototype.addNode=function(a,b,c){if("hooked"!==b.getAttribute("data-ebz-roll")&&!/EbzRoll/.test(b.id)){if("Jwplayer"===a)b.setAttribute("data-ebz-roll","hooked");else{var d=document.createElement("div");d.setAttribute("width",String(b.offsetWidth)),d.setAttribute("height",String(b.offsetHeight)),b.parentNode.replaceChild(d,b),b=d,b.id=a+"EbzRoll"+this.videoNodes[a].length}this.videoNodes[a].push({ref:b,id:c,width:parseInt(b.getAttribute("width"),10)||b.offsetWidth,height:parseInt(b.getAttribute("height"),10)||b.offsetHeight}),this.logger.info("Added a "+a+" video ("+c+") to videoNodes for pre/post roll",b)}},b.prototype.replacePlayers=function(){var b,c,d,e,f,g=document.getElementsByTagName("iframe");for(b=0,c=g.length;c>b;b++)if(g[b]&&g[b].src)switch(d=g[b].src,f=g[b].id||"",!0){case!!(e=d.match(/youtube\.com\/embed\/([A-Za-z0-9_\-]+)/i))&&-1===f.indexOf("beeMb_VideoPlayerCREA"):this.addNode("Youtube",g[b],e[1])}var h,i=document.getElementsByTagName("object");for(b=0,c=i.length;c>b;b++)if(i[b]){if(h=i[b].getAttribute("data"),!h){var j=i[b].getElementsByTagName("embed");j.length&&(h=j[0].getAttribute("src"))}switch(!0){case!(!h||!(e=h.match(/youtube\.com\/v\/([A-Za-z0-9_\-]+)/i))):this.addNode("Youtube",i[b],e[1]);break;case!(!h||-1===h.indexOf("jwplayer")):this.addNode("Jwplayer",i[b])}}var k;this.videoNodes.Youtube.length&&(window.YT&&window.YT.Player?this.onYouTubeIframeAPIReady():this.youtubeLoading||(this.youtubeLoading=!0,k=document.createElement("script"),k.src=a.helper.Util.addProtocol("//www.youtube.com/iframe_api"),a.helper.Dom.attach(k))),this.videoNodes.Jwplayer.length&&(window.jwplayer?this.onJwplayerReady():this.jwplayerLoading||(this.jwplayerLoading=!0,k=document.createElement("script"),k.src=a.helper.Util.addProtocol("//cdn1.static.videobash.com/js/jwplayer.js"),a.helper.Dom.attach(k)))},b.prototype.onSkip=function(a,b,c){this.reEmbedYT(this.replacedNodes.Youtube[c])},b.prototype.onYouTubeIframeAPIReady=function(){for(var a;a=this.videoNodes.Youtube.shift();)a.api=new window.YT.Player(a.ref.id,{videoId:a.id,width:a.width,height:a.height,events:{onStateChange:this.onYoutubeStateChange.bind(this)}}),this.preroll&&(this.replacedNodes.Youtube[a.ref.id]=a,window.Ebuzzing.addEventListener("skipRequest",this.onSkip.bind(this))),this.fireTracking(this.trackingPixels.INSTANCIATED_API),this.logger.info("instanciated a YT.Player from videoNodes",a,this.preroll)},b.prototype.onPlay=function(){this.fireTracking(7576861)},b.prototype.onComplete=function(a){this.fireTracking(7576862),this.embedBuzzPlayer(a,"postroll")},b.prototype.onVideoReady=function(){window.stopRelatedVideo&&window.stopRelatedVideo()},b.prototype.onJwplayerReady=function(){if(this.postroll){window.Ebuzzing.addEventListener("videoReady",this.onVideoReady);for(var a;a=this.videoNodes.Jwplayer.shift();)a.api=window.jwplayer(a.ref.id),a.api.onPlay(this.onPlay.bind(this)),a.api.onComplete(this.onComplete.bind(this,a.ref)),this.fireTracking(7576859),this.logger.info("hooked on a JWPlayer from videoNodes",a)}},b}();b.Roll=c}(a.placement||(a.placement={}));a.placement}(ebz||(ebz={}));var ebz;!function(a){!function(b){b.distributionCallbacks=[],window._comscore=window._comscore||[];var c=function(){function c(b,c){this.config=b,this.currentCallbackId=0,this.logger=new a.helper.ConsoleLogger("Distribution"),this.apis={hasDeal:[],getDeal:[],getBuzzInfo:["buzz_id"],showDeal:[]},this.logger.info("Initialized API"),this.legacy="undefined"!=typeof c?c:!1,window.ebuzzing=window.ebuzzing||{},window.ebuzzing.init=this.init.bind(this),window.ebuzzing.getHasDeal=this.load.bind(this,"hasDeal"),window.ebuzzing.getDeal=this.load.bind(this,"getDeal"),window.ebuzzing.showFeedChannel=this.showFeed.bind(this),window.ebuzzing.showSeedBuzz=this.showSeed.bind(this);for(var d in this.apis)this.apis.hasOwnProperty(d)&&(this[d]=this.load.bind(this,d),window.ebuzzing[d]=this.load.bind(this,d));window.ebzDistributionInitCallback&&window.ebzDistributionInitCallback()}return c.prototype.init=function(a,b){arguments.length>1?this.token=b:this.token=a},c.prototype.load=function(c,d,e){if(!this.token)return void this.logger.error("You must initialize the API with your token");if(!e)return void this.logger.error("You must provide a callback function");var f=this.apis[c];if(!f)return void this.logger.error("Unexisting API: "+c);var g=this.currentCallbackId++;b.distributionCallbacks[g]=function(a,b){b.error?this.logger.error(b.error.message||b.error):a.bind(this)(b)}.bind(this,e);var h=["legacy="+(this.legacy?"1":"0"),"token="+this.token,"format=json","callback=ebz.placement.distributionCallbacks["+g+"]","ts="+Date.now()];d=d||{};for(var i in d)!d.hasOwnProperty(i)||-1===f.indexOf(i)&&0!==f.length||h.push(i+"="+encodeURIComponent(d[i]));var j=document.createElement("script");j.src=this.config.urls.api+"/"+c+"?"+h.join("&"),a.helper.Dom.attach(j)},c.prototype.comscore=function(){window._comscore.push({c1:"8",c2:"9881420",c3:"1000000000000000000"});var b=document.createElement("script");b.async=!0,b.src=("https:"===window.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",a.helper.Dom.attach(b)},c.prototype.embed=function(c,d,e,f,g,h){var i,j,k,l;if(l=a.helper.Util.clone(h),l.tracking)for(i in l.tracking)if(l.tracking.hasOwnProperty(i)){"object"!=typeof l.tracking[i]&&(l.tracking[i]=[l.tracking[i]]);for(j in l.tracking[i])l.tracking[i].hasOwnProperty(j)&&"function"==typeof l.tracking[i][j]&&(k=this.currentCallbackId++,b.distributionCallbacks[k]=l.tracking[i][j],l.tracking[i][j]="ebz.placement.distributionCallbacks["+k+"]()")}if(l.events)for(i in l.events)l.events.hasOwnProperty(i)&&"function"==typeof l.events[i]&&window.Ebuzzing.addEventListener(i,l.events[i],window.Ebuzzing.instances.length);var m=[];if(l.playerUrlParams){for(i in l.playerUrlParams)l.playerUrlParams.hasOwnProperty(i)&&m.push(i+"="+encodeURIComponent(decodeURIComponent(l.playerUrlParams[i])));delete l.playerUrlParams}window.EbuzzingScriptParams=l;var n=this.config.routes[c]+"&relayparams=1&game=1&force=1";m.length>0&&(n+="&"+m.join("&"));var o={target:g,pid:d,cid:e,id:f},p=document.createElement("script");p.src=this.config.urls.player+a.helper.Util.format(n,o).replace(/[&\?][^&^\?]+={[^\}]*\}/g,""),a.helper.Dom.attach(p)},c.prototype.showSeed=function(a,b,c){var d=/^(\d+)_(\d+)$/.exec(a);d?this.embed("seed",parseInt(d[1],10),parseInt(d[2],10),null,b,c):this.embed("buzz",null,null,parseInt(a,10),b,c)},c.prototype.showFeed=function(a,b,c){var d=parseInt(a,10);this.legacy&&4e5>d&&(d+=4e5),this.embed("feed",d,null,null,b,c)},c}();b.Distribution=c}(a.placement||(a.placement={}));a.placement}(ebz||(ebz={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},ebz;!function(a){!function(b){var c=function(b){function c(c,d,e){var f=this;b.call(this),this.data=c,this.container=d,this.version=e,this.logger=new a.helper.ConsoleLogger("VideoPlayer"),this.addListener(a.thrift.buzzplayerEvents.BUZZPLAYER_EVENT,function(b){f.emit(a.thrift.buzzplayerEvents.BUZZPLAYER_EVENT,b),f.emit(b.eventName,b.eventData)}),this.addListener("touchIntercepted",function(a){return f.emit("touchIntercepted",a)}),this.addListener("touchCreated",function(a){return f.emit("touchCreated",a)}),this.setupConfig(),this.initContainer(),c.urls.alternate&&0===c.urls.alternate.length&&(c.urls.alternate=null),4===c.mediaProvider?this.loadVast():this.loadBuzzplayer()}return __extends(c,b),c.prototype.setupConfig=function(){},c.getVideoCampaign=function(b,d,e){"undefined"==typeof d&&(d=3),"undefined"==typeof e&&(e=!1);var f=a.helper.Util.merge({displaySettings:{startMode:d,showSkipButton:e,dimension:{type:2}},id:c.INC_ID++},a.config);switch(f.mediaProvider=a.helper.MediaProvider.getMediaProvider(b),f.mediaProvider){case 2:f.youtubeVideo={id:b.split("/watch?v=")[1],activateAnnotations:!1,url:b,optimize:!1};break;case 3:f.dailymotionVideo={id:b.split("video/")[1],url:b,activateAnnotations:!1};break;case 1:f.ebuzzingVideo={mp4:b,ogv:null};break;case 4:f.vastVideo={url:b,activateAnnotations:!0}}return f},c.prototype.addListener=function(a,b){window.Ebuzzing.addEventListener(a,b,this.data.id)},c.prototype.triggerEvent=function(b,c){try{"undefined"!=typeof c&&-1===b.indexOf(":")&&(b+=":"+c),this.flash?this.playerContainer.triggerEvent(b):(b="api:"+b,"undefined"!=typeof this.iframe.contentWindow&&null!=this.iframe.contentWindow&&this.iframe.contentWindow.postMessage(b,"*"))}catch(d){this.logger.error("triggerEvent('"+b+"') error: "+d),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.BP_TRIGGER_EVENT,null,this.data,d)}},c.prototype.executeJavascriptInFrame=function(a){this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage("javascript:"+a,"*")},c.prototype.initContainer=function(){this.playerContainer=document.createElement("div"),this.playerContainer.id=a.PREFIX+"Player"+this.data.id,this.container.appendChild(this.playerContainer),a.helper.Dom.applyStyle(this.playerContainer,{width:"100%",height:"100%"})},c.prototype.loadVast=function(){var b=this,c=function(){new EbzVastPlugin(0===window.name.indexOf("ebz")).load(b.data,function(c){b.data=c,b.emit(a.thrift.events.VAST_LOADED),b.loadBuzzplayer()},function(c){b.logger.error("VAST file not accessible even through Ebz proxy",c),b.emit(a.thrift.events.VAST_ERROR),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.BP_VAST_FILE_NOT_ACCESSIBLE,b.data.vastVideo.url,b.data,c),b.onError(c)})};a.helper.FileLoader.get(typeof EbzVastPlugin,this.data.urls.buzzplayer+"/vast.js?h="+this.data.deployedHash).end(c)},c.prototype.loadBuzzplayer=function(){var b=this,c=-1!==[5,6,3].indexOf(this.data.mediaProvider);5===this.data.mediaProvider&&this.data.vpaidVideo.isJavascript&&(c=!1);var d=!1,e=document.createElement("video");try{d=!!e.canPlayType}catch(f){d=!1}var g=1!==this.data.mediaProvider||this.data.ebuzzingVideo.mp4&&d&&e.canPlayType("video/mp4").replace(/^no/,"")||this.data.ebuzzingVideo.ogv&&d&&e.canPlayType("video/ogg").replace(/^no/,"");navigator.userAgent.match(/firefox/i)&&1===this.data.mediaProvider&&!this.data.ebuzzingVideo.ogv&&this.data.ebuzzingVideo.mp4&&(g=!1),this.flash=c||!g||a.helper.Context.isOldIE(),this.flash||(this.flash=a.helper.Context.isIE10()?"html"!==this.version:"flash"===this.version);var h=a.helper.Json.parse(a.helper.Json.stringify(this.data));if(h.tracking&&(h.tracking.callbacks=[]),this.flash){var i=a.helper.Util.camelCase(a.thrift.MediaProvider[this.data.mediaProvider].toLowerCase()),j=function(){ebz_swfobject.embedSWF((b.data.urls.alternate?b.data.urls.alternate+"/buzzplayer":b.data.urls.buzzplayer)+"/"+i+"BuzzPlayer.swf?"+b.data.deployedHash,b.playerContainer.id,"100%","100%","10.2.0",null,{config:encodeURIComponent(a.helper.Json.stringify(h))},{allowFullScreen:!0,allowScriptAccess:"always",scale:"noscale",wmode:"transparent",bgcolor:"#000000"},{name:b.playerContainer.id},function(c){if(c.success)b.playerContainer=c.ref;else{var d=ebz_swfobject.getFlashPlayerVersion(),e=d.major+"."+d.minor+"."+d.release;b.logger.error("Could not embed a Buzzplayer using swfobject. Client has Flash Player "+e),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.BP_SWFOBJECT_EMBED,e,b.data),b.onError(c)}})};a.helper.FileLoader.get(typeof ebz_swfobject,a.config.urls.ebzformats+"/assets/js/swfobject.min.js?h="+this.data.deployedHash).end(j)}else{this.iframe=a.helper.Dom.createIframe(),this.iframe.id=a.PREFIX+"Iframe"+this.data.id;var k=a.helper.Json.stringify(h);a.helper.Dom.addEvent("load",this.iframe,function(){b.iframe.contentWindow.postMessage(k,"*")});var l=1,m=setInterval(function(){l++,10===l&&clearInterval(m);var c=document.getElementById(a.PREFIX+"Iframe"+b.data.id);c&&c.contentWindow&&(c.contentWindow.postMessage(k,"*"),b.iframe=c)},1e3);this.iframe.src=(this.data.urls.alternate?this.data.urls.alternate:this.data.urls.ebzformats)+"/assets/html/iframe.html?h="+this.data.deployedHash,this.playerContainer.appendChild(this.iframe)}var n=this.data.displaySettings;if(n.endscreenCountdown){var o;o=document.createElement("img"),o.src=this.data.urls.ebzformats+"/assets/img/countdown/"+(n.dimension.id||7)+".gif?h="+a.config.deployedHash,a.helper.Dom.applyStyle(o,{width:"100%",height:"100%"}),this.on(a.thrift.buzzplayerEvents.PLAYER_END,function(){b.playerContainer.parentNode.replaceChild(o,b.playerContainer),setTimeout(function(){window.location.href=b.data.displaySettings.clientUrl},1515)})}var p=!1;this.on("playerFocus",function(){p=!0}),a.helper.Dom.addEvent("mousemove",document,function(c){var d=c.target,e=new RegExp("^"+a.PREFIX+"(Player|Iframe)"+b.data.id+"$");p&&!e.test(d.id)&&(b.triggerEvent("playerBlur"),p=!1)})},c.prototype.onError=function(a){},c.INC_ID=0,c}(a.Emitter);b.VideoPlayer=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(a){var b=function(){function a(){}return a.init=function(b,c,d,e){var f=window.location.protocol,g="https:"===f?"z":"js",h=document.createElement("script"),i=[],j={adData:{ids:c,duration:d,url:e},dispatchEvent:function(a){this.sendEvent?(null!==i&&(i.push(a),a=i,i=null),this.sendEvent(a)):i.push(a)}},k="_moatApi"+Math.floor(1e8*Math.random());return window[k]=j,h.type="text/javascript",b&&b.insertBefore(h,b.childNodes[0]),h.src=f+"//"+g+".moatads.com/"+a.CODE_PARTNER_MOAT+"/moatvideo.js#"+k,j},a.eventMoat=function(a,b){var c={type:a,adVolume:b};return c},a.CODE_PARTNER_MOAT="teads245638586802",a}();a.MoatViewability=b}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(a){!function(a){a.ADVERTISER_BILLABLE="advertiserBillable",a.API_ERROR="apiError",a.API_READY="apiReady",a.API_RECEIVED="apiReceived",a.API_SENT="apiSent",a.BUZZPLAYER_EVENT="buzzplayerEvent",a.CAMPAIGN="campaign",a.CLICK="click",a.CLOSE="close",a.ERROR="error",a.FACEBOOK_SCREEN="facebookScreen",a.FULLSCREEN_ENTER="fullscreenEnter",a.FULLSCREEN_EXIT="fullscreenExit",a.FULLSCREEN_REQUEST="fullscreenRequest",a.MINI_EXPAND_ENTER="miniExpandEnter",a.MINI_EXPAND_EXIT="miniExpandExit",a.MOUSE_DOWN="mousedown",a.MOUSE_MOVE="mousemove",a.MOUSE_OUT="mouseout",a.MOUSE_OVER="mouseover",a.MOUSE_UP="mouseup",a.MUTE="mute",a.NEXT_VIDEO="nextVideo",a.ON_BUFFER="onBuffer",a.ON_PROGRESS="onProgress",a.PAUSE_REQUEST="pauseRequest",a.PLAYER_BLUR="playerBlur",a.PLAYER_END="playerEnd",a.PLAYER_FOCUS="playerFocus",a.PLAYER_IDLE="playerIdle",a.PLAYER_START="playerStart",a.PLAY_REQUEST="playRequest",a.PUBLISHER_BILLABLE="publisherBillable",a.QUARTILE_25="video25",a.QUARTILE_50="video50",a.QUARTILE_75="video75",a.QUARTILE_90="video90",a.REDIRECT="redirect",a.REPLAY_REQUEST="replayRequest",a.RESIZE="resize",a.RESIZE_REQUEST="resizeRequest",a.SEEK_BACKWARD="seekBackward",a.SEEK_FORWARD="seekForward",a.SEEK_REQUEST="seekRequest",a.SEEK_START="seekStart",a.SEEK_STOP="seekEnd",a.SHARE="share",a.SHARE_FACEBOOK="shareFacebook",a.SHARE_FACEBOOKPAGE="shareFacebookpage",a.SHARE_GPLUS="shareGplus",a.SHARE_LINKEDIN="shareLinkedin",a.SHARE_PINTEREST="sharePinterest",a.SHARE_RENREN="shareRenren",a.SHARE_TUENTI="shareTuenti",a.SHARE_TWITTER="shareTwitter",a.SHARE_VKONTAKTE="shareVkontakte",a.SHARE_WEIBO="shareWeibo",a.SHARE_XING="shareXing",a.SKIP_REQUEST="skipRequest",a.SUBMIT="submit",a.TOUCH_CANCEL="touchcancel",a.TOUCH_END="touchend",a.TOUCH_LEAVE="touchleave",a.TOUCH_MOVE="touchmove",a.TOUCH_START="touchstart",a.TRACK_CLICK="trackClick",a.UNMUTE="unmute",a.VIDEO_BUFFER_PROGRESS="progress",a.VIDEO_DURATION_CHANGE="durationchange",a.VIDEO_ENDED="ended",a.VIDEO_ERROR="videoError",a.VIDEO_LOADED="videoloaded",a.VIDEO_LOADED_DATA="loadeddata",a.VIDEO_LOADED_METADATA="loadedmetadata",a.VIDEO_LOAD_START="loadstart",a.VIDEO_PAUSE="pause",a.VIDEO_PLAY="play",a.VIDEO_PLAYING="playing",a.VIDEO_READY="videoReady",a.VIDEO_RESUME="videoResume",a.VIDEO_STALLED="stalled",a.VIDEO_START="start",a.VIDEO_STATE_CHANGE="videoStateChange",a.VIDEO_TIME_UPDATE="timeupdate",a.VIEWABILITY="viewability",a.VIEWABILITY_FOCUS="viewabilityFocus",a.VIEWABILITY_REQUEST="viewabilityRequest",a.VIEWABILITY_RESPONSE="viewabilityResponse",a.VIEWABILITY_UNFOCUS="viewabilityUnfocus",a.VIEWABILITY_UNMEASURABLE="viewabilityUnmeasurable",a.VIEWABILITY_WINDOW_BLUR="viewabilityWindowBlur",a.VIEWABILITY_WINDOW_FOCUS="viewabilityWindowFocus",a.VOLUME_CHANGE="volumeChange",a.VOLUME_REQUEST="volumeRequest",a.YOUTUBE_PLAYER_STATE_CHANGE="youtubePlayerStateChange"}(a.buzzplayerEvents||(a.buzzplayerEvents={}));a.buzzplayerEvents}(a.thrift||(a.thrift={}));a.thrift}(ebz||(ebz={}));var ebz;!function(a){!function(a){!function(a){a.ADCLICKTHRU="AdClickThru",a.ADDURATIONCHANGE="AdDurationChange",a.ADERROR="AdError",a.ADEXPANDEDCHANGE="AdExpandedChange",a.ADIMPRESSION="AdImpression",a.ADINTERACTION="AdInteraction",a.ADLINEARCHANGE="AdLinearChange",a.ADLOADED="AdLoaded",a.ADLOG="AdLog",a.ADPAUSED="AdPaused",
a.ADPLAYING="AdPlaying",a.ADREMAININGTIMECHANGE="AdRemainingTimeChange",a.ADSIZECHANGE="AdSizeChange",a.ADSKIPPABLESTATECHANGE="AdSkippableStateChange",a.ADSKIPPED="AdSkipped",a.ADSTARTED="AdStarted",a.ADSTOPPED="AdStopped",a.ADUSERACCEPTINVITATION="AdUserAcceptInvitation",a.ADUSERCLOSE="AdUserClose",a.ADUSERMINIMIZE="AdUserMinimize",a.ADVIDEOCOMPLETE="AdVideoComplete",a.ADVIDEOFIRSTQUARTILE="AdVideoFirstQuartile",a.ADVIDEOMIDPOINT="AdVideoMidpoint",a.ADVIDEOSTART="AdVideoStart",a.ADVIDEOTHIRDQUARTILE="AdVideoThirdQuartile",a.ADVOLUMECHANGE="AdVolumeChange"}(a.VPAIDEvents||(a.VPAIDEvents={}));a.VPAIDEvents}(a.thrift||(a.thrift={}));a.thrift}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(){}return b.addOnDocumentVisible=function(c){a.helper.Dom.addEvent("focus",window,b.checkDocument(c,!0,!0));var d=b.getVisibilityEvent();null!=d&&a.helper.Dom.addEvent(d,document,b.checkDocument(c,!0,!0))},b.addOnDocumentHidden=function(c){a.helper.Dom.addEvent("blur",window,b.checkDocument(c,!0,!1));var d=b.getVisibilityEvent();null!=d&&a.helper.Dom.addEvent(d,document,b.checkDocument(c,!0,!1))},b.addOnWindowFocus=function(b){a.helper.Dom.addEvent("focus",window,function(a){a.target==window&&b()})},b.addOnWindowBlur=function(b){a.helper.Dom.addEvent("blur",window,function(a){a.target==window&&b()})},b.checkDocument=function(a,c,d,e){"undefined"==typeof d&&(d=!1),"undefined"==typeof e&&(e=!1);var f=function(){var d=e||b.isDocumentVisible();c==d&&a()};return d?function(){setTimeout(f,300)}:f},b.getHiddenKey=function(){for(var a in b.visibilityEvents)if(a in document)return a},b.getVisibilityEvent=function(){var a=b.getHiddenKey();return null!=a?b.visibilityEvents[a]:void 0},b.isDocumentVisible=function(){var a=!0,c=b.getHiddenKey();return null!=c?a=!document[c]:document.hasFocus&&(a=document.hasFocus()),b.inIFrame()===!1&&a===!0&&document.hasFocus&&(a=document.hasFocus()),a},b.inIFrame=function(){return window.top!==window.self},b.targetVisibleOnScreen=function(b,c,d,e){"undefined"==typeof d&&(d=null),"undefined"==typeof e&&(e=null);var f,g=a.helper.Dom.getOffset(b),h=([b.offsetWidth,b.offsetHeight],a.helper.Dom.getWindowScroll()),i=a.helper.Dom.getWindowSize(),j=a.helper.Dom.getDocumentSize(),k=g[1]>=j[1]-Math.round(c.height);g[0]-=h[0],g[1]-=h[1],f=k?[g[0]+Math.round(c.width/2),g[1]-30]:[g[0]+Math.round(c.width/2),g[1]+Math.round(c.height/2)],f[0]<0||f[1]<0||f[0]>i[0]||f[1]>i[1]?e&&e():d&&d()},b.visibilityEvents={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},b}();b.DomViewability=c}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(){b.call(this),this.windowFocus=!0,this.playerWindowFocus=!1,this.documentVisible=!0,this.playerFocus=!0,this.viewable=!1,this.windowFocus=a.helper.DomViewability.isDocumentVisible(),this.documentVisible=a.helper.DomViewability.isDocumentVisible(),a.helper.DomViewability.addOnDocumentVisible(this.onDocumentVisible.bind(this)),a.helper.DomViewability.addOnDocumentHidden(this.onDocumentHidden.bind(this)),a.helper.DomViewability.addOnWindowFocus(this.onWindowFocus.bind(this)),a.helper.DomViewability.addOnWindowBlur(this.onWindowBlur.bind(this)),this.onUpdate()}return __extends(c,b),c.prototype.listen=function(b){b.on(a.thrift.buzzplayerEvents.VIEWABILITY_FOCUS,this.onPlayerFocus.bind(this)),b.on(a.thrift.buzzplayerEvents.VIEWABILITY_UNFOCUS,this.onPlayerUnfocus.bind(this)),b.on(a.thrift.buzzplayerEvents.VIEWABILITY_WINDOW_FOCUS,this.onPlayerWindowFocus.bind(this)),b.on(a.thrift.buzzplayerEvents.VIEWABILITY_WINDOW_BLUR,this.onPlayerWindowBlur.bind(this))},c.prototype.onPlayerFocus=function(){this.playerFocus||(this.playerFocus=!0,this.emit(c.EVENT_PLAYER_FOCUS)),this.onUpdate()},c.prototype.onPlayerUnfocus=function(){this.playerFocus&&(this.playerFocus=!1,this.emit(c.EVENT_PLAYER_UNFOCUS)),this.onUpdate()},c.prototype.onWindowBlur=function(){var a=this,b=function(){a.windowFocus=!1,a.onUpdate()};setTimeout(b.bind(this),100)},c.prototype.onWindowFocus=function(){var a=this,b=function(){a.windowFocus=!0,a.playerWindowFocus=!1,a.onUpdate()};setTimeout(b.bind(this),100)},c.prototype.onPlayerWindowFocus=function(){this.playerWindowFocus=!0,this.windowFocus=!1,this.onUpdate()},c.prototype.onPlayerWindowBlur=function(){this.playerWindowFocus=!1,this.onUpdate()},c.prototype.onDocumentVisible=function(){this.documentVisible=!0,this.onUpdate()},c.prototype.onDocumentHidden=function(){this.documentVisible=!1,this.onUpdate()},c.prototype.onUpdate=function(){var a=this.isFocused();this.viewable!=a&&(this.viewable=a,this.emit(a?c.EVENT_VIEWABLE:c.EVENT_UNVIEWABLE))},c.prototype.isFocused=function(){return this.playerFocus&&(this.playerWindowFocus||this.windowFocus)},c.EVENT_VIEWABLE="playerViewable",c.EVENT_UNVIEWABLE="playerUnviewable",c.EVENT_PLAYER_FOCUS="playerFocus",c.EVENT_PLAYER_UNFOCUS="playerUnfocus",c}(a.Emitter);b.Viewability=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=(a.thrift.events,a.thrift.buzzplayerEvents,function(b){function c(){b.call(this),this.viewability=new a.component.Viewability}return __extends(c,b),c.prototype.setupTracking=function(){a.hub.setupCallbacks(this,this.getTrackingCallbacks())},c.prototype.getTrackingCallbacks=function(){throw new Error("Not implemented")},c.prototype.containsTrackingCallbacksEvent=function(a){var b=this.getTrackingCallbacks();if(!b)return!1;for(var c=0;c<b.length;c++)if(b[c].event===a)return!0},c.prototype.connectVideoPlayer=function(b){var c=this;b.on(a.thrift.buzzplayerEvents.BUZZPLAYER_EVENT,function(b){c.emit(b.eventName,b.eventData),(b.eventName===a.thrift.buzzplayerEvents.VIDEO_START||b.eventName===a.thrift.buzzplayerEvents.QUARTILE_25||b.eventName===a.thrift.buzzplayerEvents.QUARTILE_50||b.eventName===a.thrift.buzzplayerEvents.QUARTILE_75||b.eventName===a.thrift.buzzplayerEvents.QUARTILE_90||b.eventName===a.thrift.buzzplayerEvents.VIDEO_ENDED)&&c.off(b.eventName)})},c.prototype.connectVideoPlayerToMoat=function(b,c){var d=.7;b.on(a.thrift.buzzplayerEvents.VOLUME_REQUEST,function(b){d=b,c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADVOLUMECHANGE,d))}),b.on(a.thrift.buzzplayerEvents.VIDEO_PLAY,function(){c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADPLAYING,d))}),b.on(a.thrift.buzzplayerEvents.VIDEO_PAUSE,function(){c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADPAUSED,d))}),b.on(a.thrift.buzzplayerEvents.SKIP_REQUEST,function(){b.off(a.thrift.buzzplayerEvents.VIDEO_PAUSE),c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADSKIPPED,d))}),b.once(a.thrift.buzzplayerEvents.VIDEO_START,function(){c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADVIDEOSTART,d))}),b.once(a.thrift.buzzplayerEvents.QUARTILE_25,function(){c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADVIDEOFIRSTQUARTILE,d))}),b.once(a.thrift.buzzplayerEvents.QUARTILE_50,function(){c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADVIDEOMIDPOINT,d))}),b.once(a.thrift.buzzplayerEvents.QUARTILE_75,function(){c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADVIDEOTHIRDQUARTILE,d))}),b.once(a.thrift.buzzplayerEvents.VIDEO_ENDED,function(){c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADVIDEOCOMPLETE,d)),c.dispatchEvent(a.helper.MoatViewability.eventMoat(a.thrift.VPAIDEvents.ADSTOPPED,d))})},c.prototype.connectShareBar=function(b,c){var d=this;for(var e in c)if(c.hasOwnProperty(e))switch(e){case"facebook":b.setFacebookCallback(function(b){d.emit(a.thrift.events.SHARE_FACEBOOK),a.helper.Context.isMraid()&&window.mraid.share?window.mraid.share("facebook",c.facebook):a.helper.Dom.openExternalPage(c.facebook)});break;case"twitter":b.setTwitterCallback(function(b){d.emit(a.thrift.events.SHARE_TWITTER),a.helper.Context.isMraid()&&window.mraid.share?window.mraid.share("twitter",c.twitter):a.helper.Dom.openExternalPage(c.twitter)});break;case"gplus":b.setGplusCallback(function(b){d.emit(a.thrift.events.SHARE_GPLUS),a.helper.Context.isMraid()&&window.mraid.share?window.mraid.share("gplus",c.gplus):a.helper.Dom.openExternalPage(c.gplus)});break;case"pinterest":b.setPinterestCallback(function(b){d.emit(a.thrift.events.SHARE_PINTEREST),a.helper.Context.isMraid()&&window.mraid.share?window.mraid.share("pinterest",c.pinterest):a.helper.Dom.openExternalPage(c.pinterest)});break;case"linkedin":b.setLinkedinCallback(function(b){d.emit(a.thrift.events.SHARE_LINKEDIN),a.helper.Context.isMraid()&&window.mraid.share?window.mraid.share("linkedin",c.linkedin):a.helper.Dom.openExternalPage(c.linkedin)});break;case"facebookPage":b.setFacebookpageCallback(function(b){d.emit(a.thrift.events.SHARE_FACEBOOKPAGE),a.helper.Dom.openExternalPage(c.facebookPage)});break;case"xing":b.setXingCallback(function(b){d.emit(a.thrift.events.SHARE_XING),a.helper.Context.isMraid()&&window.mraid.share?window.mraid.share("xing",c.xing):a.helper.Dom.openExternalPage(c.xing)});break;case"tuenti":b.setTuentiCallback(function(b){d.emit(a.thrift.events.SHARE_TUENTI),a.helper.Context.isMraid()&&window.mraid.share?window.mraid.share("tuenti",c.tuenti):a.helper.Dom.openExternalPage(c.tuenti)});break;case"vkontakte":b.setVkontakteCallback(function(b){d.emit(a.thrift.events.SHARE_VKONTAKTE),a.helper.Context.isMraid()&&window.mraid.share?window.mraid.share("vkontakte",c.vkontakte):a.helper.Dom.openExternalPage(c.vkontakte),a.helper.Dom.openExternalPage(c.vkontakte)});break;case"weibo":b.setWeiboCallback(function(b){d.emit(a.thrift.events.SHARE_WEIBO),a.helper.Dom.openExternalPage(c.weibo)});break;case"renren":b.setRenrenCallback(function(b){d.emit(a.thrift.events.SHARE_RENREN),a.helper.Dom.openExternalPage(c.renren)})}},c}(a.Emitter));b.AbstractFormat=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c,d,e,f){if("undefined"==typeof f&&(f={}),b.call(this),this.data=c,this.parentContainer=e,this.userData=f,this.logger=new a.helper.ConsoleLogger("Placeful"),this.setupTracking(),this.data.id=d,this.userData.width&&this.userData.height?this.data.displaySettings.dimension={id:this.userData.size&&a.config.playerSizes[this.userData.size]?this.userData.size:0,width:this.userData.width,height:this.userData.height}:this.userData.size&&a.config.playerSizes&&a.config.playerSizes[this.userData.size]?this.data.displaySettings.dimension=a.config.playerSizes[this.userData.size]:this.data.displaySettings.dimension&&this.data.displaySettings.dimension.width&&this.data.displaySettings.dimension.height||(this.data.displaySettings.dimension={id:15,width:560,height:315}),this.parentContainer.innerHTML="",this.parentContainer.id||(this.parentContainer.id=a.PREFIX+"Parent"+d),a.helper.Dom.applyStyle(this.parentContainer,{width:this.data.displaySettings.dimension.width+"px",height:this.data.displaySettings.dimension.height+"px",overflow:"hidden",backgroundColor:"black"}),c.tracking.adloox)try{var g=c.campaign.domain.code,h=c.publisherChannel.id;this.once("impression",a.hub.adloox(g,h))}catch(i){}}return __extends(c,b),c.prototype.getTrackingCallbacks=function(){try{return this.data.tracking.callbacks||[]}catch(a){return[]}},c}(a.format.AbstractFormat);b.AbstractPlacefulFormat=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c,d,e,f){"undefined"==typeof f&&(f={});var g=this;if(b.call(this,c,d,e,f),this.container=e,this.logger=new a.helper.ConsoleLogger("Buzzplayer"),this.player=new a.component.VideoPlayer(c,e,f.version),this.player.onError=this.onError.bind(this),this.connectVideoPlayer(this.player),c.moatCampaign){var h=a.helper.MoatViewability.init(e,window.ebzMoatIds,c.duration,a.helper.MediaProvider.getVideoUrlByMediaProvider(c));this.connectVideoPlayerToMoat(this.player,h)}4==c.mediaProvider?(this.player.on(a.thrift.events.VAST_LOADED,function(b){a.hub.setupCallbacks(g,g.getTrackingCallbacks()),g.emitImpressionEvent()}),this.player.on(a.thrift.events.VAST_ERROR,function(b){a.hub.setupCallbacks(g,g.getTrackingCallbacks()),g.emitEmptyVastEvent()})):(a.hub.setupCallbacks(this,this.getTrackingCallbacks()),this.emitImpressionEvent({type:f.context?5:2}))}return __extends(c,b),c.prototype.setupTracking=function(){},c.prototype.emitImpressionEvent=function(b){"undefined"==typeof b&&(b=null),this.emit(a.thrift.events.IMPRESSION,b)},c.prototype.emitEmptyVastEvent=function(b){"undefined"==typeof b&&(b=null),this.emit(a.thrift.events.EMPTY_VAST,b)},c.prototype.onError=function(b){a.helper.Dom.applyStyle(this.container,{display:"none"}),this.container.innerHTML="<!-- an error occured : "+b+" -->"},c}(a.format.AbstractPlacefulFormat);b.Buzzplayer=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(ebz){!function(placement){function updateConfigUrls(a){try{!a.urls&&ebz.config.urls&&(a.urls=ebz.config.urls),!a.deployedHash&&ebz.config.deployedHash&&(a.deployedHash=ebz.config.deployedHash)}catch(b){}return a&&a.urls&&!a.urls.ebzformats&&a.urls.playerAssets&&(a.urls.ebzformats=a.urls.playerAssets),a&&a.urls&&!a.urls.buzzplayer&&a.urls.ebzformats&&(a.urls.buzzplayer=a.urls.ebzformats+"/buzzplayer"),a&&a.urls&&!a.urls.playerAssets&&a.urls.ebzformats&&(a.urls.playerAssets=a.urls.ebzformats),a}!function(a){a[a.SINGLE=2]="SINGLE",a[a.EXPAND=5]="EXPAND"}(placement.SocialTypes||(placement.SocialTypes={}));var SocialTypes=placement.SocialTypes;!function(a){a[a.IN_CONTENT_NO_AD=0]="IN_CONTENT_NO_AD",a[a.IN_PAGE_NO_AD=1]="IN_PAGE_NO_AD"}(placement.PublisherCbk||(placement.PublisherCbk={}));var PublisherCbk=placement.PublisherCbk;window.Ebuzzing&&window.Ebuzzing.listeners||(window.Ebuzzing={receiveMessage:function(a){if(0!==a.data.indexOf("api:")){if(0===a.data.indexOf("buzzplayer_"))window.Ebuzzing.receiveEvent(a.data);else if(0===a.data.indexOf("js:"))window.Ebuzzing.executeJavascript(a.data.substr(3));else if(0===a.data.indexOf("exception:")){var b,c,d;try{d=a.data.substr(10),c=ebz.helper.ErrorTracker.IFRAME_BUZZPLAYER_INIT}catch(a){d=a,c=ebz.helper.ErrorTracker.BP_POSTED_EXCEPTION}var e=new ebz.helper.ConsoleLogger("BackwardCompatibility");e.error("Received error "+c+" from iframe: "+d),ebz.helper.ErrorTracker.fire(c,null,b,d)}}else for(var f=window.document.getElementsByTagName("iframe"),g=0,h=f.length;h>g;g++){var i=f[g];0===i.id.indexOf(ebz.PREFIX)&&i.contentWindow.postMessage(a.data,"*")}},executeJavascript:function(code,id){if("undefined"==typeof id&&(id=0),window.Ebuzzing.instances[id].userData.context&&window.self!==window.top)window.parent.postMessage("js:"+code,"*");else try{eval(code)}catch(e){window.Ebuzzing.trace("Error in third-party Javascript: "+(e.message||e)+"\nJS code was: "+code),ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.BP_JS_TRACKING,code,null,e)}},receiveEvent:function(a){var b=a.split("_");if(!(b.length<4)){b=b.slice(0,3).concat([b.slice(3).join("_")]);var c,d,e,f=parseInt(b[1],10),g=b[2],h=window.Ebuzzing.instances[f];if(h&&(d=window.Ebuzzing.instances[f].userData.context,h.format&&(e=h.format.constructor.name)),d&&window.self!==window.top?(window.Ebuzzing.trace("Pass event to parent frame too:",a),window.parent.postMessage(a,"*")):d="parent page","videoReady"===g){window.Ebuzzing.videoReady[f]=!0;for(var i=0,j=window.Ebuzzing.asyncTriggerEvent.length;j>i;i++)if(window.Ebuzzing.asyncTriggerEvent[i]){var k=window.Ebuzzing.asyncTriggerEvent[i];window.Ebuzzing.triggerEvent(k.name,k.data,k.id),window.Ebuzzing.asyncTriggerEvent[i]=void 0}}try{c=ebz.helper.Json.parse(b[3])}catch(k){window.Ebuzzing.trace("error",'Corrupted event info for "'+g+'": '+b[3],k),ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.BP_CORRUPTED_EVENT_DATA,a,this.data,k),c=null}for(var l,m=[],n=0,o=0,p=window.Ebuzzing.listeners.length;p>o;o++)l=window.Ebuzzing.listeners[o],l.name!==g||l.playerId!==f&&"undefined"!=typeof l.playerId||(l.callback(c,g,f),n++,l.once&&m.push(o));for(i=0,p=m.length;p>i;i++)window.Ebuzzing.listeners[o].splice(m[o],1);var q="error",r="videoError",s="onBuffer",t="onProgress",u="mousemove",v=[s,t,u];if(g!==window.Ebuzzing.lastEventName&&-1===v.indexOf(g)){var w=[ebz.thrift.buzzplayerEvents.BUZZPLAYER_EVENT,ebz.thrift.buzzplayerEvents.MOUSE_MOVE,ebz.thrift.buzzplayerEvents.PLAYER_FOCUS];-1===w.indexOf(g)&&window.Ebuzzing.trace("Got event '"+g+"' from "+e+" #"+f+" in "+d+" and trigerred "+n+" attached callbacks",c),(g===q||g===r)&&ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.BP_RECEIVED_ERROR,{name:g,format:e,data:c},this.data),window.Ebuzzing.lastEventName=g}}},addEventListener:function(a,b,c){"undefined"==typeof c&&(c=0),window.Ebuzzing.listeners.push({name:a,callback:b,playerId:c})},triggerEvent:function(a,b,c){"undefined"==typeof c&&(c=0);try{var d=window.Ebuzzing.instances[c];if(!d||!window.Ebuzzing.videoReady[c])return void window.Ebuzzing.asyncTriggerEvent.push({name:a,data:b,id:c});"undefined"!=typeof b&&-1===a.indexOf(":")&&(a+=":"+b),window.postMessage("api:"+a,"*")}catch(e){window.Ebuzzing.trace('window.Ebuzzing.triggerEvent("'+a+'") error (we have been notified): '+e),ebz.helper.ErrorTracker.fire(ebz.helper.ErrorTracker.BP_TRIGGER_EVENT,null,this.data,e)}},videoReady:[],listeners:[],asyncTriggerEvent:[],lastEventName:null,instances:ebz.playlists,attachScript:ebz.helper.Dom.attach,applyVendorProperties:ebz.helper.Dom.applyVendorProperties,trace:function(a,b,c){window.Ebuzzing.logger||(window.Ebuzzing.logger=new ebz.helper.ConsoleLogger("LegacyBuzzplayerAPI")),window.Ebuzzing.logger.info(a,b,c)},logger:null});try{ebz.helper.Context.isOldIE(8)||Object.defineProperty(window,"Ebuzzing",{writable:!1,enumerable:!1,configurable:!1,value:window.Ebuzzing})}catch(e){}for(var i in window._ebz)if(window._ebz.hasOwnProperty(i)&&window._ebz[i])switch(window._ebz[i].type){case"addEventListener":window.Ebuzzing.addEventListener(window._ebz[i].name,window._ebz[i].callback,window._ebz[i].id),window._ebz[i]=void 0;break;case"triggerEvent":window.Ebuzzing.triggerEvent(window._ebz[i].name,window._ebz[i].callback(),window._ebz[i].id),window._ebz[i]=void 0;break;case"applyVendorProperties":var args=window._ebz[i].callback();window.Ebuzzing.applyVendorProperties(args[0],args[1],args[2]),window._ebz[i]=void 0;break;case"attachScript":window.Ebuzzing.attachScript(window._ebz[i].callback()),window._ebz[i]=void 0}ebz.helper.Dom.addEvent("message",window,window.Ebuzzing.receiveMessage),placement.publisherCallback=function(a){switch(a){case 0:window.ebz_inContentNoAd&&window.ebz_inContentNoAd();break;case 1:window.beead_noAds&&window.beead_noAds()}},placement.updateConfigUrls=updateConfigUrls}(ebz.placement||(ebz.placement={}));var placement=ebz.placement}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(){this.isLoading=!1,this.loaded=0,this.callbacks=[],this.num=0,this.logger=new a.helper.ConsoleLogger("FileLoader")}return b.get=function(a,b){return new d(a,[b])},b.prototype.load=function(b,c){if(this.num=b.length,0===this.num)c&&c();else if(c&&this.callbacks.push(c),!this.isLoading){this.isLoading=!0;for(var d=0,e=b.length;e>d;d++){var f=b[d].split("?"),g=f[0].substr(f[0].lastIndexOf(".")+1);if("js"===g){var h=document.createElement("script");h.async=!0,h.defer=!0,a.helper.Dom.addEvent("load",h,function(a){a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(this.loaded++,this.loaded===this.num&&(this.fireCallbacks(),this.isLoading=!1),a.onreadystatechange=null,this.logger.debug("Loaded JS:",a.src))}.bind(this,h)),h.src=b[d],a.helper.Dom.attach(h)}else if("css"===g){var i=document.createElement("link");i.rel="stylesheet",a.helper.Dom.addEvent("load",i,function(a){this.loaded++,this.loaded===this.num&&(this.fireCallbacks(),this.isLoading=!1),this.logger.debug("Loaded CSS:",a.href)}.bind(this,i)),i.href=b[d],a.helper.Dom.attach(i),a.helper.Context.isAndroidNative()&&this.loaded++}}}},b.prototype.fireCallbacks=function(){for(;this.callbacks.length;)this.callbacks.shift()()},b}();b.FileLoader=c;var d=function(){function a(a,b){this.loaded="undefined"!==a,this.urls=b}return a.prototype.end=function(a){var b=this;return this.loaded?a():(new c).load(this.urls,function(){b.loaded=!0,a()}),this},a}();b.FileLoaderSequence=d}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(ebz){!function(format){var Fallback=function(){function Fallback(container,userData){if("undefined"==typeof userData&&(userData={}),this.logger=new ebz.helper.ConsoleLogger("Fallback"),this.logger.info("No video to display at the moment for this channel"),userData.fallback){var sandbox=document.createElement("div");sandbox.innerHTML=userData.fallback.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"'),this.logger.info("Using fallback code\n",sandbox.innerHTML);for(var scripts=sandbox.getElementsByTagName("script"),externalScripts=[],inlineScripts="",i=0,length=scripts.length,script=scripts[0];length>i;i++,script=scripts[i])script.getAttribute("src")?("https:"===window.location.protocol&&script.src.replace(/^http:/i,"https:"),externalScripts.push(script.src)):script.innerHTML&&(inlineScripts+=script.innerHTML+";");for(i=scripts.length-1;i>=0;i--)scripts[i].parentNode.removeChild(scripts[i]);container.innerHTML=sandbox.innerHTML;var loader=new ebz.helper.FileLoader;try{eval(inlineScripts),loader.load(externalScripts)}catch(e){loader.load(externalScripts,function(){eval(inlineScripts)})}}else if(this.logger.info("No fallback code"),!userData.noreplace){container.innerHTML="<!-- "+ebz.PREFIX+": no video to display -->";var abovePlaceholder=ebz.helper.Dom.getWindow().document.getElementById(ebz.PREFIX+"Native_above");null!=abovePlaceholder&&null!=abovePlaceholder.parentElement&&abovePlaceholder.parentElement.removeChild(abovePlaceholder);var containerParent=container.parentNode;null!=containerParent&&containerParent.className&&containerParent.className.indexOf(ebz.placement.Native.CENTER_NODE_CLASSNAME)>-1&&null!=containerParent.parentNode&&containerParent.parentNode.removeChild(containerParent)}}return Fallback}();format.Fallback=Fallback}(ebz.format||(ebz.format={}));var format=ebz.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(a,c,d,e){"undefined"==typeof e&&(e={}),b.call(this,a,c,d,e),this.pageIsLoad=!1,this.init()}return __extends(c,b),c.prototype.init=function(){var b=this;this.width=c.SIZE.width,this.height=c.SIZE.height;var d=this.data.displaySettings;(d.expand||!(d.dimension.width>=this.width||d.dimension.height>=this.height))&&(this.mainContainer=document.createElement("div"),a.helper.Dom.applyStyle(this.mainContainer,{position:"absolute",zIndex:9e4,backgroundColor:"black"}),a.helper.Dom.applyStyle(this.parentContainer,{background:"transparent"}),this.player.playerContainer.style.overflow="hidden",this.mainContainer.appendChild(this.player.playerContainer),this.trigger=document.createElement("div"),a.helper.Dom.applyStyle(this.trigger,{position:"absolute",top:0,left:0,width:d.dimension.width+"px",height:d.dimension.height+"px",backgroundColor:"black",opacity:0}),this.mainContainer.appendChild(this.trigger),1===d.startMode&&(this.closeButton=document.createElement("a"),this.closeButton.href="javascript:;",a.helper.Dom.applyStyle(this.closeButton,{opacity:0,position:"absolute",width:"23px",height:"19px",backgroundImage:"url("+this.data.urls.ebzformats+"/assets/img/miniexpand_close.png?t="+this.data.deployedHash+")",top:"-3px",right:"-5px"}),a.helper.Dom.applyVendorProperties(this.closeButton,"transitionProperty","opacity"),a.helper.Dom.applyVendorProperties(this.closeButton,"transitionDuration",c.EXPANDTIME+"ms"),this.mainContainer.appendChild(this.closeButton)),this.status="closed",this.reposition(),a.helper.Dom.addEvent("load",window,function(a){return b.pageIsLoad=!0}),a.helper.Dom.addEvent("resize",window,this.reposition.bind(this)),a.helper.Dom.addEvent("load",window,this.reposition.bind(this)),a.helper.Dom.onDomReady(this.reposition.bind(this)),this.repositionInterval=setInterval(this.reposition.bind(this),200),document.body.appendChild(this.mainContainer),a.helper.Dom.addEvent(1===d.startMode?"click":"mousemove",document,this.close.bind(this)),a.helper.Dom.addEvent("mousemove",this.trigger,this.open.bind(this)),this.player.on("campaign",this.clear.bind(this)))},c.prototype.clear=function(){document.body.contains(this.mainContainer)&&(document.body.removeChild(this.mainContainer),a.helper.Dom.removeEvent("resize",window,this.reposition.bind(this)),a.helper.Dom.removeEvent("load",window,this.reposition.bind(this)),clearInterval(this.repositionInterval))},c.prototype.calculateOpenedPosition=function(){var b=a.helper.Dom.getWindowScroll(),d=a.helper.Dom.getWindowSize(),e=[b[0]+c.MARGIN,b[1]+c.MARGIN],f=[b[0]+d[0]-this.width-c.MARGIN,b[1]+d[1]-this.height-c.MARGIN],g=Math.round((this.width-this.data.displaySettings.dimension.width)/2),h=Math.round((this.height-this.data.displaySettings.dimension.height)/2);return[Math.max(e[0],Math.min(f[0],this.position[0]-g)),Math.max(e[1],Math.min(f[1],this.position[1]-h))]},c.prototype.reposition=function(){if(!document.body.contains(this.container))return void this.clear();try{this.parentContainer=document.getElementById(this.parentContainer.id)}catch(b){this.clear()}if(this.position=a.helper.Dom.getOffset(this.parentContainer),"opened"===this.status){var c=this.calculateOpenedPosition();a.helper.Dom.applyStyle(this.mainContainer,{left:c[0]+"px",top:c[1]+"px"})}if("closed"===this.status){var d;d=0!==this.position[0]&&0!==this.position[1]||this.pageIsLoad?"visible":"hidden",a.helper.Dom.applyStyle(this.mainContainer,{left:this.position[0]+"px",top:this.position[1]+"px",width:this.data.displaySettings.dimension.width+"px",height:this.data.displaySettings.dimension.height+"px",visibility:d})}},c.prototype.open=function(){if("closed"===this.status){this.status="opening",setTimeout(function(){this.status="opened",this.player.triggerEvent("miniExpandEnter")}.bind(this),c.EXPANDTIME-150),this.trigger.style.display="none",a.helper.Dom.applyVendorProperties(this.mainContainer,"transitionProperty","width, height, top, left, boxShadow"),a.helper.Dom.applyVendorProperties(this.mainContainer,"transitionDuration",c.EXPANDTIME+"ms");var b=this.calculateOpenedPosition();a.helper.Dom.applyStyle(this.mainContainer,{left:b[0]+"px",top:b[1]+"px",width:this.width+"px",height:this.height+"px"}),a.helper.Dom.applyVendorProperties(this.mainContainer,"boxShadow","black 0px 0px 4px 1px"),this.closeButton&&a.helper.Dom.applyStyle(this.closeButton,{opacity:1}),this.initStatEngagementDuration()}},c.prototype.close=function(b){var d=new RegExp("^"+a.PREFIX+"(Player|Iframe)"+this.data.id+"$"),e=b.target;"opened"!==this.status||d.test(e.id)||(a.placement.advertiserViewTrackingTimeout&&(clearTimeout(a.placement.advertiserViewTrackingTimeout),a.placement.advertiserViewTrackingTimeout=null),a.placement.publisherViewTrackingTimeout&&(clearTimeout(a.placement.publisherViewTrackingTimeout),a.placement.publisherViewTrackingTimeout=null),this.trigger.style.display="block",this.position=a.helper.Dom.getOffset(this.parentContainer),a.helper.Dom.applyStyle(this.mainContainer,{left:this.position[0]+"px",top:this.position[1]+"px",width:this.data.displaySettings.dimension.width+"px",height:this.data.displaySettings.dimension.height+"px"}),this.status="closing",setTimeout(function(){a.helper.Dom.applyVendorProperties(this.mainContainer,"boxShadow","black 0px 0px 0px 0px"),this.status="closed",this.player.triggerEvent("miniExpandExit")}.bind(this),c.EXPANDTIME-150),this.closeButton&&a.helper.Dom.applyStyle(this.closeButton,{opacity:0}),this.callStatEngagementDuration())},c.prototype.initStatEngagementDuration=function(){var b=this;this.expandOpenDate||a.helper.Dom.addEvent("unload",window,function(a){return b.callStatEngagementDuration()},!0),this.expandOpenDate=Date.now()},c.prototype.callStatEngagementDuration=function(){this.emit(a.thrift.events.ENGAGEMENT_DURATION,{DURATION:Math.ceil((Date.now()-this.expandOpenDate)/1e3)}),this.off(a.thrift.events.ENGAGEMENT_DURATION)},c.prototype.onError=function(a){b.prototype.onError.call(this,a),this.mainContainer.parentNode.removeChild(this.mainContainer)},c.SIZE={width:560,height:315},c.MARGIN=40,c.EXPANDTIME=400,c}(a.format.Buzzplayer);b.ElasticoBuzzplayer=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(a,c,d,e,f){"undefined"==typeof e&&(e={}),this.onIframeReady=f,a.displaySettings.startMode=1,b.call(this,a,c,d,e),this.off("impression")}return __extends(c,b),c.prototype.init=function(){this.data.displaySettings.dimension.width>=this.data.displaySettings.expand.dimension.width||this.data.displaySettings.dimension.height>=this.data.displaySettings.expand.dimension.height||(b.prototype.init.call(this),this.width=this.data.displaySettings.expand.dimension.width,this.height=this.data.displaySettings.expand.dimension.height,this.richMediaIframe=a.helper.Dom.createIframe(),this.richMediaIframe.style.display="none",this.mainContainer.appendChild(this.richMediaIframe),this.emit(a.thrift.events.EXPAND_TEASER_IMPRESSION,{type:2}))},c.prototype.open=function(){b.prototype.open.call(this),setTimeout(function(){this.player.playerContainer.style.display="none",this.richMediaIframe.style.display="block",this.richMediaIframe.src=this.data.displaySettings.expand.url,"function"==typeof this.onIframeReady&&this.onIframeReady()}.bind(this),a.format.ElasticoBuzzplayer.EXPANDTIME-150)},c.prototype.close=function(c){b.prototype.close.call(this,c),this.player.playerContainer.style.display="block",this.richMediaIframe.style.display="none",this.richMediaIframe.src=null,a.placement.advertiserViewTrackingTimeout&&(clearTimeout(a.placement.advertiserViewTrackingTimeout),a.placement.advertiserViewTrackingTimeout=null),a.placement.publisherViewTrackingTimeout&&(clearTimeout(a.placement.publisherViewTrackingTimeout),a.placement.publisherViewTrackingTimeout=null)},c}(a.format.ElasticoBuzzplayer);b.ElasticoRichMedia=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c,d,e,f){"undefined"==typeof f&&(f={});var g=this;b.call(this,c,d,e,f),c.displaySettings.expand.lead&&a.helper.Dom.addEvent("message",window,function(b){0===b.data.indexOf("ebz:conversion")&&g.emit(a.thrift.events.CONVERSION)})}return __extends(c,b),c.prototype.getIframeUrl=function(){return this.data.displaySettings.expand.url+(this.data.tracking.freeView?"&freeView=true":"")},c}(a.format.AbstractPlacefulFormat);b.RichMedia=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c,d,e,f,g){"undefined"==typeof f&&(f={}),b.call(this,c,d,e,f);var h=null;if(c.displaySettings.expand.forceFullscreen){if(a.helper.Context.isMobile())h=a.helper.Dom.createIframe();else{var i={height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};h=a.helper.Dom.createIframe(i)}h.scrolling="auto"}else h=a.helper.Dom.createIframe(c.displaySettings.expand.dimension);h.id=a.PREFIX+"Inline"+c.id,this.parentContainer.parentNode.replaceChild(h,this.parentContainer),"function"==typeof g&&a.helper.Dom.addEvent("load",h,g.bind(this)),h.src=this.getIframeUrl(),c.displaySettings.expand.customContent&&this.emit(a.thrift.events.IMPRESSION,{type:5}),this.initStatEngagementDuration()}return __extends(c,b),c.prototype.initStatEngagementDuration=function(){var b=this,c=1,d=setInterval(function(){c++,36===c&&(clearInterval(d),b.off(a.thrift.events.ENGAGEMENT_DURATION)),b.callStatEngagementDuration(5)},5e3)},c.prototype.callStatEngagementDuration=function(b){this.emit(a.thrift.events.ENGAGEMENT_DURATION,{DURATION:b})},c}(a.format.RichMedia);b.RichMediaInline=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){
!function(b){b.openedExpand=b.openedExpand||!1;var c=function(c){function d(b,d,e,f,g){"undefined"==typeof f&&(f={});var h=this;c.call(this,b,d,e,f),this.teaserContainer=document.createElement("div"),this.teaserContainer.id=a.PREFIX+"Teaser"+this.data.id,this.parentContainer.appendChild(this.teaserContainer);var i=this.data.displaySettings;if(this.sizeId=String(i.dimension.id||7),i.assets&&i.assets.teasers&&i.assets.teasers[this.sizeId]){var j=i.assets.teasers[this.sizeId],k=this.open.bind(this,g.bind(this));if(2===this.data.mediaProvider&&this.data.youtubeVideo.id&&window.postMessage&&1===i.expand.startMode&&!/(Opera|OPR)/.test(navigator.userAgent)&&!/MSIE [5678]/.test(navigator.userAgent)){this.embedTeaser(j);var l=a.helper.Dom.createIframe(i.dimension);a.helper.Dom.applyStyle(l,{position:"relative",border:0,opacity:0}),a.helper.Dom.addEvent("message",window,function(a){var b=a.data.split(":");"open"===b[0]&&b[1]===String(h.data.id)&&k()}),l.src=a.config.urls.ebzformats+"/assets/html/youtube.html?h="+a.config.deployedHash+"#"+this.data.youtubeVideo.id+":"+this.data.id+":open",this.parentContainer.appendChild(l)}else this.embedTeaser(j,k);this.emit(a.thrift.events.EXPAND_TEASER_IMPRESSION)}else this.logger.error("Asset not found: teasers["+this.sizeId+"]",i.assets,i.dimension),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.RME_ASSET_NOT_FOUND,"teasers["+this.sizeId+"]",this.data)}return __extends(d,c),d.prototype.open=function(c){var e=this;if(!b.openedExpand){b.openedExpand=!0;for(var f=document.getElementsByClassName(a.PREFIX+"ExpandTeaser"),g=0,h=f.length;h>g;g++){f[g].style.display="none";var i=f[g].nextSibling;i&&i.className===a.PREFIX+"BlackTrigger"&&a.helper.Dom.applyStyle(i,{opacity:1})}var j=this.data.displaySettings,k=j.expand,l=document.createElement("div");l.id=a.PREFIX+"ExpandContainer",a.helper.Dom.applyStyle(l,{position:"fixed",background:k.overlayColor,border:0,zIndex:99999999});var m=document.createElement("div");m.id=a.PREFIX+"ExpandOverlay",a.helper.Dom.applyStyle(m,{position:"fixed",background:k.overlayColor,border:0,top:0,left:0,zIndex:99999998,overflow:"hidden",width:"100%",height:"100%",opacity:k.overlayOpacity/100}),a.helper.Dom.applyVendorProperties(m,"transitionProperty","opacity"),a.helper.Dom.applyVendorProperties(m,"transitionDuration",d.EXPANDTIME+"ms");var n=document.createElement("a");if(a.helper.Dom.applyStyle(n,{position:"absolute",top:0,right:"-5px",background:"url('"+a.config.urls.ebzformats+"/assets/img/expand_close.png?"+a.config.deployedHash+"') no-repeat",width:"37px",height:"25px",zIndex:65525}),n.href="#",l.appendChild(n),k.youtubeClose&&!/Opera/.test(navigator.userAgent)){var o=document.createElement("div");a.helper.Dom.applyStyle(o,{position:"absolute",top:"-5px",right:"-10px",width:"45px",height:"30px",opacity:0,overflow:"hidden",zIndex:65530});var p=a.helper.Dom.createIframe({width:150,height:120,id:null,type:null});p.id=a.PREFIX+"YoutubeClose",a.helper.Dom.applyStyle(p,{position:"absolute",top:"-30px",left:"-30px",border:0}),a.helper.Dom.addEvent("message",window,function(a){var b=a.data.split(":");"close"===b[0]&&e.close()}),p.src=a.config.urls.ebzformats+"/assets/html/youtube.html?h="+a.config.deployedHash+"#"+this.data.youtubeVideo.id+":"+this.data.id+":close",o.appendChild(p),l.appendChild(o)}else n.onclick=this.close.bind(this);var q=a.helper.Dom.getWindowSize(),r=a.helper.Dom.getWindowScroll(),s=[Math.round(q[0]/2)-Math.round(k.dimension.width/2),Math.round(q[1]/2)-Math.round(k.dimension.height/2)];q[0]<k.dimension.width+15&&(s[0]=q[0]-k.dimension.width-15),q[1]<k.dimension.height&&(s[1]=0);var t=a.helper.Dom.getOffset(this.parentContainer);t[0]-=r[0],t[1]-=r[1],a.helper.Dom.applyStyle(l,{left:t[0]+"px",top:t[1]+"px",width:j.dimension.width+"px",height:j.dimension.height+"px"}),a.helper.Dom.applyVendorProperties(l,"transitionProperty","width, height, top, left"),a.helper.Dom.applyVendorProperties(l,"transitionDuration",d.EXPANDTIME+"ms"),document.body.appendChild(m),document.body.appendChild(l);var u=function(){var b=a.helper.Dom.createIframe();b.id=a.PREFIX+"Expand",l.appendChild(b),a.helper.Dom.addEvent("load",b,function(a){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a.style.background="transparent","function"==typeof c&&c())}.bind(b,l)),b.src=e.getIframeUrl()},v=function(){a.helper.Dom.applyStyle(l,{left:s[0]+"px",top:s[1]+"px",width:k.dimension.width+"px",height:k.dimension.height+"px"})},w=function(){a.helper.Dom.applyStyle(m,{opacity:k.overlayOpacity/100})};setTimeout(v,10),setTimeout(w,10),setTimeout(u,Math.round(.8*d.EXPANDTIME)),k.customContent&&this.emit(a.thrift.events.IMPRESSION,{type:5}),this.emit(a.thrift.events.EXPAND_OPENING),this.initStatEngagementDuration()}},d.prototype.close=function(){if(!b.openedExpand)return!1;b.openedExpand=!1;for(var c=document.getElementsByClassName(a.PREFIX+"ExpandTeaser"),e=0,f=c.length;f>e;e++){c[e].style.display="block";var g=c[e].nextSibling;g&&g.className===a.PREFIX+"BlackTrigger"&&a.helper.Dom.applyStyle(g,{opacity:0})}var h=document.getElementById(a.PREFIX+"ExpandContainer"),i=document.getElementById(a.PREFIX+"ExpandOverlay");document.body.removeChild(h),a.helper.Dom.applyStyle(i,{opacity:0});var j=function(){i&&document.body.removeChild(i)};return setTimeout(j,d.EXPANDTIME),a.placement.advertiserViewTrackingTimeout&&(clearTimeout(a.placement.advertiserViewTrackingTimeout),a.placement.advertiserViewTrackingTimeout=null),a.placement.publisherViewTrackingTimeout&&(clearTimeout(a.placement.publisherViewTrackingTimeout),a.placement.publisherViewTrackingTimeout=null),this.callStatEngagementDuration(),!1},d.prototype.embedTeaser=function(b,c){var d=this,e=this.data.displaySettings;this.teaserContainer.style.position="absolute";var f=this.teaserContainer;if("swf"===b.extension||"flv"===b.extension){"flv"===b.extension&&(b.url=a.config.urls.buzzplayer+"/flvplayer.swf?url="+encodeURIComponent(b.url)+"&"+a.config.deployedHash);var g=function(){ebz_swfobject.embedSWF(b.url,d.teaserContainer.id,e.dimension.width,e.dimension.height,"10.2.0",null,null,{allowFullScreen:!0,allowScriptAccess:!0,wmode:"transparent",scale:"exactfit"},{style:"display:block; position: absolute; width: "+e.dimension.width+"px; height: "+e.dimension.height+"px"},function(b){if(!b.success){var c=ebz_swfobject.getFlashPlayerVersion(),e=c.major+"."+c.minor+"."+c.release;d.logger.error("Could not embed a teaser using swfobject. Client has Flash Player "+e),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.RME_SWFOBJECT_EMBED,e,d.data)}})};a.helper.FileLoader.get(typeof ebz_swfobject,a.config.urls.ebzformats+"/assets/js/swfobject.min.js?h="+a.config.deployedHash).end(g),c&&!e.playImage&&(f=document.createElement("div"),a.helper.Dom.applyStyle(f,{position:"absolute",width:e.dimension.width+"px",height:e.dimension.height+"px",cursor:"pointer",opacity:0,backgroundColor:"#000"}),f.className=a.PREFIX+"BlackTrigger",this.parentContainer.appendChild(f))}else a.helper.Dom.applyStyle(this.teaserContainer,{width:e.dimension.width+"px",height:e.dimension.height+"px",background:"url('"+b.url+"') no-repeat center center",cursor:"pointer"});var h=f;if(e.playImage&&(h=document.createElement("div"),h.className=a.PREFIX+"Trigger",a.helper.Dom.applyStyle(h,{position:"absolute",width:e.dimension.width+"px",height:e.dimension.height+"px",background:"url('"+a.config.urls.ebzformats+"/assets/img/play.png?"+a.config.deployedHash+"') no-repeat center center",cursor:"pointer"}),this.parentContainer.appendChild(h)),c)if(!e.expand||3!==e.expand.startMode&&5!==e.expand.startMode){var i=e.expand?1===e.expand.startMode:1===e.startMode;i?h.onclick=c:h.onmouseover=c}else{var j="countdown/",k=1515;5===e.expand.startMode&&(j="countdown_fast/",k=950);var l=a.config.urls.ebzformats+"/assets/img/"+j+this.sizeId+".gif?h="+a.config.deployedHash;(new Image).src=l;var m=document.createElement("img");a.helper.Dom.applyStyle(m,{position:"absolute",width:e.dimension.width+"px",height:e.dimension.height+"px",cursor:"pointer",border:0,margin:0,padding:0,display:"none"}),this.parentContainer.appendChild(m);var n;h.onmouseover=function(){d.teaserContainer.style.visibility="hidden",m.style.display="block",m.src=l,n=setTimeout(c,k)},m.onmouseout=function(){d.teaserContainer.style.visibility="visible",m.style.display="none",m.src="",clearTimeout(n)},m.onclick=c}},d.prototype.initStatEngagementDuration=function(){var b=this;this.expandOpenDate||a.helper.Dom.addEvent("unload",window,function(a){return b.callStatEngagementDuration()},!0),this.expandOpenDate=Date.now()},d.prototype.callStatEngagementDuration=function(){this.emit(a.thrift.events.ENGAGEMENT_DURATION,{DURATION:Math.ceil((Date.now()-this.expandOpenDate)/1e3)}),this.off(a.thrift.events.ENGAGEMENT_DURATION)},d.EXPANDTIME=400,d}(a.format.RichMedia);b.RichMediaExpand=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c,d,e,f,g){"undefined"==typeof f&&(f={}),"undefined"==typeof g&&(g=!1);var h=this;if(b.call(this,c,d,e,f),this.openedNative=!1,this.startedNative=!1,this.endedNative=!1,this.overridenAutoplay=!1,this.muted=!1,this.soundOptionCalled=!1,this.playing=!1,this.soundStopedByVisibility=!1,this.pausedByFocusOff=!1,this.overridenAutoplay=g,this.displaySettings=this.data.displaySettings,this.nativeNode=this.parentContainer.parentNode,this.pausedByFocusOff=!1,0!==this.displaySettings.marginTop&&a.helper.Dom.applyStyle(this.nativeNode,{marginTop:"0px"}),0!==this.displaySettings.marginBottom&&a.helper.Dom.applyStyle(this.nativeNode,{marginBottom:"0px"}),a.helper.Dom.applyVendorProperties(this.nativeNode,"transitionProperty","height, margin"),a.helper.Dom.applyVendorProperties(this.nativeNode,"transitionDuration","1s, 1s"),1!==this.displaySettings.startMode||this.overridenAutoplay)switch(this.displaySettings.nativeSoundOption){case 1:case 2:this.player.on("videoReady",function(){return h.muteControl(h.displaySettings.nativeSoundOnClick)});break;case 3:case 4:this.player.on("videoReady",function(){return h.muteControl(!0)}),this.displaySettings.nativeSoundOnClick||this.soundControlByMouse("mouseover",!1);break;case 5:this.player.on("videoReady",function(){return h.muteControl(!0)}),this.displaySettings.nativeSoundOnClick||(this.soundControlByMouse("mouseover",!1),this.soundControlByMouse("mouseout",!0));break;default:this.logger.error("Unknown '"+c.displaySettings.nativeSoundOption+"' NativeSoundOption")}this.init()}return __extends(c,b),c.prototype.emitImpressionEvent=function(b){"undefined"==typeof b&&(b=null),this.impressionEventOptions=b,this.emit(a.thrift.events.PRE_IMPRESSION)},c.prototype.muteControl=function(b){"undefined"!=typeof this.muted&&(b?!this.muted:this.muted)&&(this.player.triggerEvent("volumeRequest",b?0:1),this.muted=b,b||(this.emit(a.thrift.events.UNMUTE),this.off(a.thrift.events.UNMUTE)))},c.prototype.soundControlByMouse=function(b,c){var d=this;a.helper.Dom.addEvent(b,this.parentContainer.parentNode,function(a){d.muteControl(c),d.soundOptionCalled||5!==d.data.displaySettings.nativeSoundOption||(d.soundOptionCalled=!0)})},c.prototype.playControlByMouse=function(){var b=this;a.helper.Dom.addEvent("mousemove",window,function(a){b.requestPlay()},!0)},c.prototype.onScrollEvent=function(){var b=this;this.endedNative||(a.helper.DomViewability.targetVisibleOnScreen(this.player.playerContainer,{width:this.displaySettings.dimension.width,height:this.displaySettings.dimension.height},function(){return b.onViewable()},function(){return b.onUnviewable()}),this.openedNative&&this.player.triggerEvent(a.thrift.buzzplayerEvents.VIEWABILITY_REQUEST))},c.prototype.onViewabilityResponse=function(b){var c=this;b.measurable?b.viewable?this.onViewable():this.onUnviewable():a.helper.DomViewability.targetVisibleOnScreen(this.player.playerContainer,{width:this.displaySettings.dimension.width,height:this.displaySettings.dimension.height},function(){return c.onViewable()},function(){return c.onUnviewable()})},c.prototype.onUnviewable=function(){this.openedNative&&(1===this.data.displaySettings.nativeVideoPauseOption&&this.playing?this.requestPause():3===this.data.displaySettings.nativeVideoPauseOption&&(this.muted||this.soundOptionCalled||(this.muteControl(!0),this.soundStopedByVisibility=!0)))},c.prototype.onViewable=function(){this.openedNative||!this.viewability.isFocused()&&this.data.displaySettings.pauseOnFocusOff||this.requestOpen(),this.startedNative&&(this.requestPlay(),this.soundStopedByVisibility&&!this.soundOptionCalled&&this.muteControl(!1)),this.overridenAutoplay&&this.openedNative&&!this.startedNative&&(this.requestPlay(),this.soundStopedByVisibility&&!this.soundOptionCalled&&this.muteControl(!1)),this.emit(a.thrift.events.PLAYER_START),this.off(a.thrift.events.PLAYER_START)},c.prototype.requestOpen=function(){a.helper.Dom.applyStyle(this.nativeNode,{height:this.displaySettings.dimension.height+40+"px"}),0!=this.displaySettings.marginTop&&a.helper.Dom.applyStyle(this.nativeNode,{marginTop:this.displaySettings.marginTop+"px"}),0!=this.displaySettings.marginBottom&&a.helper.Dom.applyStyle(this.nativeNode,{marginBottom:this.displaySettings.marginBottom+"px"}),this.openedNative=!0,this.emit(a.thrift.events.NATIVE_OPENING),this.emit(a.thrift.events.IMPRESSION,this.impressionEventOptions)},c.prototype.requestPlay=function(){this.endedNative||(this.pausedByFocusOff=!1,this.playing||!this.openedNative||!this.viewability.isFocused()&&this.data.displaySettings.pauseOnFocusOff||(this.playing=!0,this.player.triggerEvent(a.thrift.buzzplayerEvents.PLAY_REQUEST)))},c.prototype.requestPause=function(){this.endedNative||(this.playing=!1,this.player.triggerEvent(a.thrift.buzzplayerEvents.PAUSE_REQUEST))},c.prototype.onSkip=function(b){var c=this;b&&this.emit(a.thrift.events.SKIP),this.endedNative=!0,a.helper.Dom.applyStyle(this.nativeNode,{height:0}),setTimeout(function(){return c.nativeNode.parentNode.removeChild(c.nativeNode)},1200)},c.prototype.onStart=function(){this.openedNative&&this.requestPlay(),this.startedNative=!0},c.prototype.onVideoReady=function(){var b=this;a.helper.Dom.addEvent("resize",window,function(){return b.onScrollEvent()}),a.helper.Dom.addEvent("scroll",window,function(){return b.onScrollEvent()}),this.viewability.on(a.component.Viewability.EVENT_VIEWABLE,function(){return b.onScrollEvent()}),this.onScrollEvent()},c.prototype.onTrackClick=function(a){"muteButton"===a&&(this.soundOptionCalled||(this.soundOptionCalled=!0))},c.prototype.onResize=function(){var b=this.nativeNode.offsetWidth/a.placement.Native.ASPECT_RATIO;this.displaySettings.dimension.width=this.nativeNode.offsetWidth,this.displaySettings.dimension.height=b,this.openedNative&&(a.helper.Dom.applyStyle(this.nativeNode,{height:b+40+"px"}),a.helper.Dom.applyStyle(this.container,{height:b+"px",width:this.nativeNode.offsetWidth+"px"}))},c.prototype.onRedirect=function(){this.requestPause(),this.playControlByMouse()},c.prototype.onPlay=function(){this.playing||this.requestPause()},c.prototype.init=function(){var b=this;a.helper.Dom.addCssClass(this.nativeNode,[c.NATIVE_CONTAINER_CLASS]),this.player.on("playerStart",function(){return b.onStart()}),this.player.on(a.thrift.buzzplayerEvents.VIDEO_PLAY,function(){return b.onPlay()}),this.player.on("skipRequest",function(){return b.onSkip(!0)}),this.player.on(a.thrift.buzzplayerEvents.PLAYER_END,function(){return b.onSkip(!1)}),this.player.on("redirect",function(){return b.onRedirect()}),this.player.on("trackClick",function(a){return b.onTrackClick(a)}),this.player.on(a.thrift.buzzplayerEvents.VIEWABILITY_RESPONSE,function(a){return b.onViewabilityResponse(a)}),this.player.on(a.thrift.buzzplayerEvents.VIDEO_ERROR,function(){return b.onSkip(!1)}),this.viewability.listen(this.player),a.helper.Context.isMobile()||this.player.on("videoReady",function(){return b.onVideoReady()}),this.displaySettings.pauseOnFocusOff&&(this.viewability.on(a.component.Viewability.EVENT_VIEWABLE,function(){b.pausedByFocusOff&&(b.requestPlay(),b.emit(a.thrift.events.VIEWABILITY_PLAY_ON_FOCUS_ON))}),this.viewability.on(a.component.Viewability.EVENT_UNVIEWABLE,function(){b.playing&&(b.pausedByFocusOff=!0,b.requestPause(),b.emit(a.thrift.events.VIEWABILITY_PAUSE_ON_FOCUS_OFF))})),a.helper.Context.isMobile()&&(this.logger.info("Touch interceptor is required"),this.player.on("apiReady",function(){return b.player.triggerEvent("touchInterceptor")}),this.player.on("touchCreated",function(){return a.helper.Dom.addCssClass(b.nativeNode,[c.NATIVE_INTERCEPT_CLASS])}),this.player.on("touchIntercepted",function(){b.logger.info("Touch event intercepted. Experience is now ready."),a.helper.Dom.removeCssClass(b.nativeNode,[c.NATIVE_INTERCEPT_CLASS]),b.onVideoReady()}),a.helper.Dom.addEvent("orientationchange",window,function(){return a.helper.Util.recurentCall(b.onResize.bind(b))}),a.helper.Dom.addEvent("resize",window,function(){return a.helper.Util.recurentCall(b.onResize.bind(b))}))},c.NATIVE_CONTAINER_CLASS="ebz_native",c.NATIVE_INTERCEPT_CLASS="ebz_intercept",c}(a.format.Buzzplayer);b.NativeBuzzplayer=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.HORIZONTAL=0]="HORIZONTAL",a[a.VERTICAL=1]="VERTICAL"}(b.ShareDirection||(b.ShareDirection={}));var c=(b.ShareDirection,function(){function b(a,b){"undefined"==typeof b&&(b=0),this.align=b,this.SHAREBAR_CLASS="ebz_sharebar",this.SHAREBAR_LOGO_CLASS="ebz_sharebar_logo",this.SHAREBAR_BUTTON_CLASS="ebz_sharebar_button",this.SHAREBAR_BUTTON_FACEBOOK_CLASS="ebz_sharebar_button_facebook",this.SHAREBAR_BUTTON_TWITTER_CLASS="ebz_sharebar_button_twitter",this.SHAREBAR_BUTTON_GPLUS_CLASS="ebz_sharebar_button_gplus",this.SHAREBAR_BUTTON_LINKEDIN_CLASS="ebz_sharebar_button_linkedin",this.SHAREBAR_BUTTON_PINTEREST_CLASS="ebz_sharebar_button_pinterest",this.SHAREBAR_BUTTON_FACEBOOKPAGE_CLASS="ebz_sharebar_button_facebookpage",this.SHAREBAR_BUTTON_XING_CLASS="ebz_sharebar_button_xing",this.SHAREBAR_BUTTON_TUENTI_CLASS="ebz_sharebar_button_tuenti",this.SHAREBAR_BUTTON_VKONTAKTE_CLASS="ebz_sharebar_button_vkontakte",this.SHAREBAR_BUTTON_WEIBO_CLASS="ebz_sharebar_button_weibo",this.SHAREBAR_BUTTON_RENREN_CLASS="ebz_sharebar_button_renren",this.initWrapper(a)}return b.prototype.initWrapper=function(b){this.wrapperSharebar=document.createElement("div");var c=0===this.align?"share_horizontal":"share_vertical";a.helper.Dom.addCssClass(this.wrapperSharebar,[this.SHAREBAR_CLASS,c]),this.wrapperLogo=document.createElement("div"),a.helper.Dom.addCssClass(this.wrapperLogo,[this.SHAREBAR_LOGO_CLASS]),a.helper.Dom.addEvent("click",this.wrapperLogo,this.onLogoClick.bind(this)),this.wrapperButton=document.createElement("div"),a.helper.Dom.addCssClass(this.wrapperButton,[this.SHAREBAR_BUTTON_CLASS]),b.appendChild(this.wrapperSharebar)},b.prototype.onLogoClick=function(a){this.callbackLogo&&this.callbackLogo(a)},b.prototype.onShareClick=function(a,b){switch(a){case this.buttonFacebook:this.callbackFacebook(b);break;case this.buttonTwitter:this.callbackTwitter(b);break;case this.buttonGplus:this.callbackGplus(b);break;case this.buttonLinkedin:this.callbackLinkedin(b);break;case this.buttonPinterest:this.callbackPinterest(b);break;case this.buttonFacebookpage:this.callbackFacebookpage(b);break;case this.buttonXing:this.callbackXing(b);break;case this.buttonTuenti:this.callbackTuenti(b);break;case this.buttonVkontakte:this.callbackVkontakte(b);break;case this.buttonWeibo:this.callbackWeibo(b);break;case this.buttonRenren:this.callbackRenren(b)}},b.prototype.createShareButton=function(b,c){function d(){return a.config.urls&&a.config.urls.assets?a.config.urls.assets:this.logoUrl?this.logoUrl.substr(0,this.logoUrl.indexOf(".io")+3).replace("static","assets"):"http://assets.ebz.io"}return this.wrapperButton.parentNode||(this.wrapperSharebar.appendChild(this.wrapperButton),this.setSize("20px")),b||(b=document.createElement("div"),a.helper.Dom.addCssClass(b,[c]),a.helper.Dom.addEvent("click",b,this.onShareClick.bind(this,b)),b.style.backgroundImage="url('"+d.bind(this)()+"/ebzFormats/assets/img/sharebar/"+c.replace("ebz_sharebar_button_","")+".png?h="+a.config.deployedHash+"')",this.wrapperButton.appendChild(b),this.updateButtonsSize()),b},b.prototype.updateButtonsSize=function(){var a,b=this.wrapperButton.childNodes.length,c=100/b;for(var d in this.wrapperButton.childNodes)this.wrapperButton.childNodes.hasOwnProperty(d)&&(a=this.wrapperButton.childNodes[d],a.style&&(0===this.align?a.style.width=c+"%":a.style.height=this.getSize()));this.wrapperButton.style.width=this.wrapperLogo.parentNode?"60%":"100%"},b.prototype.setSize=function(b){a.helper.Context.isMobile()&&!a.helper.Context.isViewport()?0===this.align?this.wrapperSharebar.style.height=a.helper.Dom.convertToDeviceSize({height:parseInt(b,10),convertInPercent:!1}).height+"px":this.wrapperSharebar.style.width=a.helper.Dom.convertToDeviceSize({width:parseInt(b,10),convertInPercent:!1}).width+"px":0===this.align?this.wrapperSharebar.style.height=b:this.wrapperSharebar.style.width=b},b.prototype.getSize=function(){return 0===this.align?this.wrapperSharebar.style.height:this.wrapperSharebar.style.width},b.prototype.setLogoCallback=function(b,c){var d=this;this.wrapperLogo.parentNode||(this.wrapperSharebar.appendChild(this.wrapperLogo),this.setSize("20px")),this.wrapperLogo.innerHTML="",this.logoUrl=b;var e=document.createElement("img");e.src=b,a.helper.Dom.addEvent("load",e,function(a){e.height>d.wrapperSharebar.offsetHeight&&(e.height=d.wrapperSharebar.offsetHeight),d.wrapperLogo.appendChild(e)},!0),c&&(this.callbackLogo=c)},b.prototype.getLogoCallback=function(){return this.callbackLogo},b.prototype.setFacebookCallback=function(a){this.buttonFacebook=this.createShareButton(this.buttonFacebook,this.SHAREBAR_BUTTON_FACEBOOK_CLASS),this.callbackFacebook=a},b.prototype.getFacebookCallback=function(){return this.callbackFacebook},b.prototype.setTwitterCallback=function(a){this.buttonTwitter=this.createShareButton(this.buttonTwitter,this.SHAREBAR_BUTTON_TWITTER_CLASS),this.callbackTwitter=a},b.prototype.getTwitterCallback=function(){return this.callbackTwitter},b.prototype.setGplusCallback=function(a){this.buttonGplus=this.createShareButton(this.buttonGplus,this.SHAREBAR_BUTTON_GPLUS_CLASS),this.callbackGplus=a},b.prototype.getGplusCallback=function(){return this.callbackGplus},b.prototype.setLinkedinCallback=function(a){this.buttonLinkedin=this.createShareButton(this.buttonLinkedin,this.SHAREBAR_BUTTON_LINKEDIN_CLASS),this.callbackLinkedin=a},b.prototype.getLinkedinCallback=function(){return this.callbackLinkedin},b.prototype.setPinterestCallback=function(a){this.buttonPinterest=this.createShareButton(this.buttonPinterest,this.SHAREBAR_BUTTON_PINTEREST_CLASS),this.callbackPinterest=a},b.prototype.getPinterestCallback=function(){return this.callbackPinterest},b.prototype.setFacebookpageCallback=function(a){this.buttonFacebookpage=this.createShareButton(this.buttonFacebookpage,this.SHAREBAR_BUTTON_FACEBOOKPAGE_CLASS),this.callbackFacebookpage=a},b.prototype.getFacebookpageCallback=function(){return this.callbackFacebookpage},b.prototype.setXingCallback=function(a){this.buttonXing=this.createShareButton(this.buttonXing,this.SHAREBAR_BUTTON_XING_CLASS),this.callbackXing=a},b.prototype.getXingCallback=function(){return this.callbackXing},b.prototype.setTuentiCallback=function(a){this.buttonTuenti=this.createShareButton(this.buttonTuenti,this.SHAREBAR_BUTTON_TUENTI_CLASS),this.callbackTuenti=a},b.prototype.getTuentiCallback=function(){return this.callbackTuenti},b.prototype.setVkontakteCallback=function(a){this.buttonVkontakte=this.createShareButton(this.buttonVkontakte,this.SHAREBAR_BUTTON_VKONTAKTE_CLASS),this.callbackVkontakte=a},b.prototype.getVkontakteCallback=function(){return this.callbackVkontakte},b.prototype.setWeiboCallback=function(a){this.buttonWeibo=this.createShareButton(this.buttonWeibo,this.SHAREBAR_BUTTON_WEIBO_CLASS),this.callbackWeibo=a},b.prototype.getWeiboCallback=function(){return this.callbackWeibo},b.prototype.setRenrenCallback=function(a){this.buttonRenren=this.createShareButton(this.buttonRenren,this.SHAREBAR_BUTTON_RENREN_CLASS),this.callbackRenren=a},b.prototype.getRenrenCallback=function(){return this.callbackRenren},b.prototype.autoHide=function(a){var b=this;this.stopHide(),this.timerHide=setTimeout(function(){return b.wrapperSharebar.style.marginRight="-"+b.getSize()},a)},b.prototype.stopHide=function(){this.wrapperSharebar.style.marginRight="0",this.timerHide&&clearTimeout(this.timerHide)},b.prototype.autoFade=function(a){var b=this;this.stopFade(),this.timerFade=setTimeout(function(){return b.wrapperSharebar.style.opacity="0.5"},a)},b.prototype.stopFade=function(){this.wrapperSharebar.style.opacity="1",this.timerFade&&clearTimeout(this.timerFade)},b.prototype.remove=function(){this.wrapperSharebar.parentNode&&this.wrapperSharebar.parentNode.removeChild(this.wrapperSharebar)},b}());b.Sharebar=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.CLOSABLE=0]="CLOSABLE",a[a.SKIPPABLE=1]="SKIPPABLE"}(b.HeaderState||(b.HeaderState={}));b.HeaderState;!function(a){a[a.NONE=0]="NONE",a[a.OK=1]="OK",a[a.NOT_OK=2]="NOT_OK"}(b.ProgressBarState||(b.ProgressBarState={}));var c=(b.ProgressBarState,function(){function b(c,d){this.headerHeight=25,this.state=0,this.headerContainer=document.createElement("div"),this.headerContainer.className=b.CLASS_HEADER,this.closeButtonContainer=document.createElement("div"),this.closeButtonContainer.className=b.CLASS_CLOSE,this.headerContainer.appendChild(this.closeButtonContainer),this.closeButton=new a.component.CloseButton(this.closeButtonContainer,d),this.closeButton.setBackgroundColor("transparent"),this.closeButton.setIconColor("#FFF"),this.setHeight(this.headerHeight),c.appendChild(this.headerContainer)}return b.prototype.setHeight=function(a){this.headerHeight=a,this.headerContainer.style.height=a+"px",this.closeButton.setSize(a/2,!0)},b.prototype.getHeight=function(){return this.headerHeight},b.prototype.createLogo=function(){this.logo=document.createElement("img"),this.logo.className=b.CLASS_LOGO,this.headerContainer.appendChild(this.logo)},b.prototype.setLogo=function(a){this.logo||this.createLogo(),this.logo.src=a},b.prototype.createText=function(){this.text=document.createElement("span"),this.text.className=b.CLASS_TEXT,this.headerContainer.appendChild(this.text)},b.prototype.setText=function(a){this.text||this.createText(),this.text.innerHTML=a},b.prototype.createProgressBar=function(){this.progressBar||(this.progressBar=document.createElement("div"),this.progressBar.className=b.CLASS_PROGRESS_BAR,this.progressBar.appendChild(document.createElement("div")),this.headerContainer.appendChild(this.progressBar),this.createProgressBarTicker())},b.prototype.createProgressBarTicker=function(){!this.ticker&&this.progressBar&&(this.ticker=new a.component.CloseButton(this.progressBar,null),this.ticker.setIcon(3),this.ticker.setBackgroundColor("transparent"),this.ticker.setSize(20,!0))},b.prototype.setProgressBar=function(a,b){switch("undefined"==typeof b&&(b=0),this.createProgressBar(),b){case 0:this.ticker.setIconColor("transparent");break;case 2:this.ticker.setIconColor("#7c7c7c");break;case 1:this.ticker.setIconColor("#2dc21e")}this.progressBar.firstChild.style.width=a+"%"},b.prototype.getProgressBar=function(){return this.progressBar?parseInt(this.progressBar.firstChild.style.width,10):void 0},b.prototype.setState=function(a){this.state=a,1===a?(this.closeButton.setIcon(3),this.closeButton.setIconColor("#458B00")):0===a&&(this.closeButton.setIcon(0),this.closeButton.setIconColor("#BF0000"))},b.prototype.getState=function(){return this.state},b.prototype.autoHide=function(a){var b=this;this.stopHide(),this.timerHide=setTimeout(function(){return b.headerContainer.style.marginTop="-"+b.getHeight()+"px"},a)},b.prototype.stopHide=function(){this.headerContainer.style.marginTop="0",this.timerHide&&clearTimeout(this.timerHide)},b.CLASS_HEADER="ebz_header",b.CLASS_LOGO="ebz_header_logo",b.CLASS_TEXT="ebz_header_text",b.CLASS_CLOSE="ebz_header_closeButton",b.CLASS_PROGRESS_BAR="ebz_header_pb",b}());b.Header=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.SQUARE=0]="SQUARE",a[a.CIRCLE=1]="CIRCLE",a[a.TRIANGLE=2]="TRIANGLE"}(b.Shape||(b.Shape={}));b.Shape;!function(a){a[a.CROSS=0]="CROSS",a[a.PREV=1]="PREV",a[a.NEXT=2]="NEXT",a[a.TICKER=3]="TICKER"}(b.Icon||(b.Icon={}));var c=(b.Icon,function(){function b(b,c){this.container=b,this.size=10,this.icon=0,this.shape=0,this.backgroundColor="#000000",this.iconColor="#FFFFFF",this.className="",this.CROSS_RATIO=.7,this.CROSS_LINE_WIDTH=30,this.CROSS_LINE_CAP="round",this.RATIO_QUALITY=8,this.canvas=document.createElement("canvas"),this.setSize(this.size),b.appendChild(this.canvas),c&&(a.helper.Context.isAndroid()?a.helper.Dom.addEvent("touchend",this.container,function(a){setTimeout(function(){return c(a)},500)}):a.helper.Dom.addEvent("click",this.container,c))}return b.prototype.draw=function(){var a=this.canvas.getContext("2d");a.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBg(a),this.drawIcon(a)},b.prototype.drawBg=function(a){var b=this.size*this.RATIO_QUALITY;switch(a.fillStyle=this.backgroundColor,this.shape){case 0:a.fillRect(0,0,b,b);break;case 1:a.beginPath(),a.arc(b/2,b/2,b/2,0,2*Math.PI,!0),a.fill();break;case 2:a.beginPath(),a.moveTo(b/2,0),a.lineTo(0,b),a.lineTo(b,b),a.lineTo(b/2,0),a.fill()}a.closePath()},b.prototype.drawIcon=function(a){a.lineWidth=this.CROSS_LINE_WIDTH,a.lineCap=this.CROSS_LINE_CAP,a.strokeStyle=this.iconColor;var b=this.size*this.RATIO_QUALITY,c=b-b*this.CROSS_RATIO,d=b-c;switch(a.beginPath(),this.icon){case 0:a.moveTo(c,c),a.lineTo(d,d),a.moveTo(c,d),a.lineTo(d,c);break;case 1:a.moveTo(d,c),a.lineTo(c,c/2+d/2),a.lineTo(d,d);break;case 2:a.moveTo(c,c),a.lineTo(d,c/2+d/2),a.lineTo(c,d);break;case 3:a.moveTo(c,c/2+d/2),a.lineTo(c/2+d/2,d),a.lineTo(d,c)}a.stroke(),a.closePath()},b.prototype.setSize=function(b,c){"undefined"==typeof c&&(c=!1),!a.helper.Context.isMobile()||a.helper.Context.isViewport()||c?(a.helper.Context.isMobile()&&a.helper.Context.isViewport()?this.CROSS_LINE_WIDTH=15:this.CROSS_LINE_WIDTH=30,this.size=b):(this.size=a.helper.Dom.convertToDeviceSize({height:b,convertInPercent:!1}).height,1!==a.helper.Dom.getOrientation()||a.helper.Context.isAndroid()||(this.size/=2)),this.canvas.width=this.canvas.height=this.size*this.RATIO_QUALITY,this.canvas.style.width=this.canvas.style.height=this.size+"px",this.draw()},b.prototype.getSize=function(){return this.size},b.prototype.setIcon=function(a){this.icon=a,this.draw()},b.prototype.getIcon=function(){return this.icon},b.prototype.setBackgroundShape=function(a){this.shape=a,this.draw()},b.prototype.getBackgroundShape=function(){return this.shape},b.prototype.setBackgroundColor=function(a){this.backgroundColor=a,this.draw()},b.prototype.getBackgroundColor=function(){return this.backgroundColor},b.prototype.setIconColor=function(a){this.iconColor=a,this.draw()},b.prototype.getIconColor=function(){return this.iconColor},b.prototype.setDelay=function(a){var b=this;this.startDelay=[Date.now(),a],this.container.style.display="none",clearTimeout(this.timeoutDelay),this.timeoutDelay=setTimeout(function(){return b.container.style.display="block"},a)},b.prototype.getDelay=function(){return this.startDelay[0]+this.startDelay[1]-Date.now()},b.prototype.domRefresh=function(){var a=this;this.container.style.display="none",setTimeout(function(){return a.container.style.display="block"},50)},b}());b.CloseButton=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(a){var b=function(){function a(){}return a.choosePositionClass=function(b){var c=a.TOP_LEFT_POSITION_CLASS;switch(b.toUpperCase()){case"TL":c=a.TOP_LEFT_POSITION_CLASS;break;case"TR":c=a.TOP_RIGHT_POSITION_CLASS;break;case"BL":c=a.BOTTOM_LEFT_POSITION_CLASS;
break;case"BR":c=a.BOTTOM_RIGHT_POSITION_CLASS}return c},a.TOP_LEFT_POSITION_CLASS="ebz_TL",a.TOP_RIGHT_POSITION_CLASS="ebz_TR",a.BOTTOM_LEFT_POSITION_CLASS="ebz_BL",a.BOTTOM_RIGHT_POSITION_CLASS="ebz_BR",a.SCROLLABLE_CLASS="ebz_scrollable",a.FULLSCREEN_ELEMENT="ebz_fullscreen",a.FULLSCREEN_ELEMENT_CLOSE_BUTTON="ebz_fullscreen_button",a.FULLSCREEN_ELEMENT_HIDE="ebz_fullscreen_hide",a.FULLSCREEN_ELEMENT_CLOSE_BUTTON_HIDE="ebz_fullscreen_button_hide",a.HIDE_ON_LANDSCAPE="ebz_hide_on_landscape",a.DISABLE_ANIM="ebz_disable_anim",a.MESSAGE_BOX_DISPLAY_ON_LANDSCAPE="ebz_message_on_landscape",a}();a.CommonCss=b}(a.helper||(a.helper={}));a.helper}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b,c){this.logger=new a.helper.ConsoleLogger("Iframe"),this.hasScrolling=!0,this.border=!1,this.allowTransparency=!0,this.iframeWidth="100%",this.iframeHeight="100%",this.pmKey="",this.ALLOW_FULLSCREEN=!0,this.iframe=document.createElement("iframe"),this.iframe.allowfullscreen=this.iframe.webkitallowfullscreen=this.iframe.mozallowfullscreen=this.ALLOW_FULLSCREEN,b.appendChild(this.iframe),this.setTransparency(this.allowTransparency),this.setBorder(this.border),this.setScrolling(this.hasScrolling),this.setIframeWidth(this.iframeWidth),this.setIframeHeight(this.iframeHeight),c&&(this.zoneClick=document.createElement("div"),this.zoneClick.className="ebz_iframe_zoneClick",a.helper.Dom.addEvent("click",this.zoneClick,c),b.appendChild(this.zoneClick))}return b.prototype.load=function(b,c,d){var e=-1!==b.indexOf("?")?"&":"?",f=a.config&&a.config.deployedHash?a.config.deployedHash:Date.now().toString(),g=b.match(/\.smartadserver\./gi)?"":e+"viewport="+a.helper.Context.isViewport()+"&android="+a.helper.Context.isAndroid()+"&mraid="+a.helper.Context.isMraid()+"&mraidPlayVideo="+(a.helper.Context.isMraid()&&window.mraid.playVideo?!0:!1)+"&sdk="+a.helper.Context.isSdk()+"&pmKey="+this.pmKey+"&v="+f;this.pmKey=a.helper.Util.hashString(b),this.iframe.src=b+g,c&&a.helper.Dom.addEvent("load",this.iframe,c,!0),d&&a.helper.Dom.addEvent("error",this.iframe,d,!0),window.addEventListener("message",this.receiveMessage.bind(this))},b.prototype.receiveMessage=function(b){if(b&&b.data&&-1!==b.data.indexOf(this.pmKey)){var c=a.helper.Json.parse(b.data);switch(this.logger.info("receive message",c),c.type){case"redirect":a.helper.Dom.openExternalPage(c.value);break;case"video":window.mraid.playVideo(c.value);break;case"scroll":this.postMessage({type:"scroll",value:this.hasScrolling.toString(),pmKey:this.pmKey})}}},b.prototype.postMessage=function(b){var c=this.iframe.contentWindow||this.iframe.contentDocument;c&&c.postMessage?(this.logger.info("post message",b),c.postMessage(a.helper.Json.stringify(b),"*")):this.logger.error("post message error",c)},b.prototype.setScrolling=function(b){this.hasScrolling=!!b,this.iframe.scrolling=b?"yes":"no",b?a.helper.Dom.addCssClass(this.iframe.parentElement,[a.helper.CommonCss.SCROLLABLE_CLASS]):a.helper.Dom.removeCssClass(this.iframe.parentElement,[a.helper.CommonCss.SCROLLABLE_CLASS]),a.helper.Context.isAndroid()&&this.postMessage({type:"scroll",value:this.hasScrolling.toString(),pmKey:this.pmKey})},b.prototype.getScrolling=function(){return this.hasScrolling},b.prototype.setBorder=function(a){this.border=a,this.iframe.border=this.iframe.frameBorder=this.iframe.style.border=a?"1":"0"},b.prototype.getBorder=function(){return this.border},b.prototype.setTransparency=function(a){this.allowTransparency=this.iframe.allowTransparency=a},b.prototype.getTransparency=function(){return this.allowTransparency},b.prototype.setIframeWidth=function(a){this.iframeWidth=this.iframe.style.width=a},b.prototype.getIframeWidth=function(){return this.iframeWidth},b.prototype.setIframeHeight=function(a){this.iframeHeight=this.iframe.style.height=a},b.prototype.getIframeHeight=function(){return this.iframeHeight},b.prototype.getHtmlElement=function(){return this.iframe},b}();b.Iframe=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.TOP=0]="TOP",a[a.MIDDLE=1]="MIDDLE",a[a.BOTTOM=2]="BOTTOM"}(b.MobileVideoPosition||(b.MobileVideoPosition={}));var c=(b.MobileVideoPosition,function(b){function c(c,d,e){"undefined"==typeof e&&(e=!1),b.call(this,c,d),this.cuePointCallback=[],this.isFirstViewable=!0,a.helper.Context.isMraid()&&this.mraidConf(),c.youtubeVideo&&this.youtubeReplayFix(),e||this.rewindAtEnd()}return __extends(c,b),c.prototype.setupConfig=function(){this.data.displaySettings.hideHeader=!0,this.data.displaySettings.hideFooter=!0,this.data.displaySettings.alwaysHideShareButtons=!0,this.data.displaySettings.disableExternalLinks=!0,this.data.displaySettings.noControls=!0,this.data.displaySettings.hideEndScreen=!this.data.displaySettings.customEndscreen},c.prototype.setCuePointCallback=function(b,c){this.cuePointCallback.push({time:b,callback:c,done:!1,once:!0}),this.listeningOnProgress||(this.listeningOnProgress=!0,this.on(a.thrift.buzzplayerEvents.ON_PROGRESS,this.onProgress.bind(this)),this.on(a.thrift.buzzplayerEvents.PLAYER_END,this.resetCuePoint.bind(this)))},c.prototype.onProgress=function(a){if(this.cuePointCallback&&a&&a.currentTime)for(var b in this.cuePointCallback)this.cuePointCallback.hasOwnProperty(b)&&!this.cuePointCallback[b].done&&a.currentTime>=this.cuePointCallback[b].time&&(this.cuePointCallback[b].callback(a),this.cuePointCallback[b].done=!0)},c.prototype.resetCuePoint=function(){for(var a in this.cuePointCallback)this.cuePointCallback.hasOwnProperty(a)&&!this.cuePointCallback[a].once&&(this.cuePointCallback[a].done=!1)},c.prototype.pauseVideo=function(){this.triggerEvent(a.thrift.buzzplayerEvents.PAUSE_REQUEST)},c.prototype.setPosition=function(b,c){if(this.container)switch(b){case 0:a.helper.Dom.addCssClass(this.container,[a.helper.CommonCss.TOP_LEFT_POSITION_CLASS]);break;case 1:c?this.setMiddlePosition(c):a.helper.Dom.centerMe(this.container,0,2);break;case 2:a.helper.Dom.addCssClass(this.container,[a.helper.CommonCss.BOTTOM_LEFT_POSITION_CLASS])}},c.prototype.setMiddlePosition=function(b){function c(b){b?(this.container.style.top=f?b.viewport:b.noViewport,a.helper.Dom.centerMe(this.container,0,0)):a.helper.Dom.centerMe(this.container,0,2)}var d=1===a.helper.Dom.getOrientation(),e=a.helper.Context.isMobile(3),f=a.helper.Context.isViewport();this.container.style.marginTop="",e?c.bind(this,d?b.tablet.landscape:b.tablet.portrait)():c.bind(this,d?b.mobile.landscape:b.mobile.portrait)()},c.prototype.rewindAtEnd=function(){var b=this;this.on(a.thrift.buzzplayerEvents.PLAYER_END,function(){b.once(a.thrift.buzzplayerEvents.VIDEO_PLAY,function(){a.helper.Context.isAndroid()||a.helper.Context.isMobile(3)?setTimeout(function(){return b.triggerEvent(a.thrift.buzzplayerEvents.PAUSE_REQUEST)},100):(b.container.removeChild(b.playerContainer),setTimeout(function(){return b.container.appendChild(b.playerContainer)},100))}),b.triggerEvent(a.thrift.buzzplayerEvents.REPLAY_REQUEST)})},c.prototype.mraidConf=function(){var b=this;this.on(a.thrift.buzzplayerEvents.VIDEO_PLAY,function(){window.mraid.isViewable()||b.pauseVideo()}),this.on(a.thrift.buzzplayerEvents.API_READY,function(){3!==b.data.displaySettings.startMode&&b.once(a.thrift.buzzplayerEvents.VIDEO_PLAY,function(){return b.triggerEvent(a.thrift.buzzplayerEvents.PAUSE_REQUEST)}),b.triggerEvent(a.thrift.buzzplayerEvents.PLAY_REQUEST)}),window.mraid.addEventListener("viewableChange",function(c){var d=(c===!0||"true"===c)&&"false"!==c,e=3===b.data.displaySettings.startMode,f=d&&e||d&&!e&&!b.isFirstViewable;setTimeout(function(){return b.triggerEvent(f?a.thrift.buzzplayerEvents.PLAY_REQUEST:a.thrift.buzzplayerEvents.PAUSE_REQUEST)},500),b.isFirstViewable=!1}),window.mraid.addEventListener("stateChange",function(a){"expanded"===b.currentState&&"default"===a&&b.pauseVideo(),b.currentState=a})},c.prototype.youtubeReplayFix=function(){var b=this;this.on(a.thrift.buzzplayerEvents.VIDEO_ENDED,function(){return b.on("youtubePlayerStateChange",function(c){c&&3===c&&b.triggerEvent(a.thrift.buzzplayerEvents.PLAY_REQUEST)})})},c}(a.component.VideoPlayer));b.MobileVideoPlayer=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(c,d,e){this.container=c,this.nodeText=document.createElement("span"),this.container.appendChild(this.nodeText),this.nodeText.innerHTML=d,this.setDimension(b.DEFAULT_DIMENSION),e&&a.helper.Dom.addEvent("click",this.container,e)}return b.prototype.setDimension=function(a){this.container.style.width=a.width+"px",this.container.style.height=a.height+"px"},b.prototype.centerText=function(){this.container.style.textAlign="center",this.nodeText.style.top=(this.container.offsetHeight-this.nodeText.offsetHeight)/2+"px",this.nodeText.style.display="inline-block",this.nodeText.style.position="relative"},b.prototype.setColor=function(a){this.nodeText.style.color=a},b.prototype.setBackgroundColor=function(a){this.container.style.backgroundColor=a},b.DEFAULT_DIMENSION={width:50,height:25},b.DEFAULT_TEXT="skip",b}();b.TextButton=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(c){this.container=c,this.logger=new a.helper.ConsoleLogger("AdDisplay"),this.components={background:{container:this.initContainerDiv(c,b.BACKGROUND_CLASS),content:null},iframe:{container:this.initContainerDiv(c,b.IFRAME_CLASS),content:null},image:{container:this.initContainerDiv(c,b.IMAGE_CLASS),content:null},clickOverCreation:{container:this.initContainerDiv(c,b.CLICK_OVER_CLASS),content:null},video:{container:this.initContainerDiv(c,b.VIDEO_CLASS),content:null},clickOverVideo:{container:this.initContainerDiv(c,b.CLICK_OVER_CLASS),content:null},btShare:{container:this.initContainerDiv(c,b.BT_SHARE_CLASS),content:null},header:{container:this.initContainerDiv(c,b.HEADER_CLASS),content:null},closeButton:{container:this.initContainerDiv(c,b.CLOSE_BUTTON_CLASS),content:null}},this.setBackground("#000","100%"),a.helper.Dom.addEvent("click",this.components.clickOverCreation.container,this.onClick.bind(this)),a.helper.Dom.addEvent("click",this.components.clickOverVideo.container,this.onClick.bind(this))}return b.prototype.initContainerDiv=function(b,c){var d=b.appendChild(document.createElement("div"));return a.helper.Dom.addCssClass(d,[c]),d},b.prototype.onClick=function(a){this.clickCallback&&this.clickCallback(a)},b.prototype.onClose=function(a){this.isFullScreen?this.hideVideoFullScreen():this.closeCallback&&this.closeCallback(a)},b.prototype.setBackground=function(b,c){return a.helper.Dom.applyStyle(this.components.background.container,{backgroundColor:b,height:c,display:"block"}),this.components.background},b.prototype.getBackground=function(a,b){return{color:this.components.background.container.style.backgroundColor,height:this.components.background.container.style.height}},b.prototype.setRedirectCallback=function(a){this.components.clickOverCreation.container.style.display="block",this.clickCallback=a},b.prototype.getRedirectCallback=function(){return this.clickCallback},b.prototype.setVideoClickable=function(a){this.components.clickOverVideo.container.style.display=a?"block":"none"},b.prototype.getVideoClickable=function(){return"block"===this.components.clickOverVideo.container.style.display?!0:!1},b.prototype.setCloseCallback=function(a){this.closeCallback=a},b.prototype.getCloseCallback=function(){return this.closeCallback},b.prototype.setPlayCallback=function(a){this.playCallback=a},b.prototype.getPlayCallback=function(){return this.playCallback},b.prototype.loadIframe=function(b,c){return"undefined"==typeof c&&(c=null),this.components.iframe.container.style.display="block",this.components.iframe.container.innerHTML="",this.components.iframe.content=new a.component.Iframe(this.components.iframe.container),this.components.iframe.content.load(b,c),this.components.iframe.content.setScrolling(!1),this.components.iframe},b.prototype.loadImage=function(b,c,d){function e(){this.components.image.content.src=1===a.helper.Dom.getOrientation()&&c?c:b}var f=this;return this.components.image.container.style.display="block",this.components.image.container.innerHTML="",this.components.image.content=document.createElement("img"),a.helper.Dom.addEvent("load",this.components.image.content,d),c&&a.helper.Dom.addEvent("orientationchange",window,function(){return a.helper.Util.recurentCall(e.bind(f))}),e.bind(this)(),this.components.image.container.appendChild(this.components.image.content),this.components.image},b.prototype.createVideo=function(b,c,d,e,f){"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=3);var g,h,i=this.components.video.container;return i.style.display="block",i.innerHTML="",g=a.component.VideoPlayer.getVideoCampaign(b,d),"function"==typeof e&&e(g),a.helper.Context.isMobile()?this.components.video.content=h=new a.component.MobileVideoPlayer(g,i,!!f):this.components.video.content=h=new a.component.VideoPlayer(g,i),"function"==typeof c&&h.on(a.thrift.buzzplayerEvents.PLAYER_END,c),this.components.video},b.prototype.createCloseButton=function(){return this.components.closeButton.container.style.display="block",this.components.closeButton.container.innerHTML="",this.components.closeButton.content=new a.component.CloseButton(this.components.closeButton.container,this.onClose.bind(this)),this.components.closeButton.content.setSize(25),this.components.closeButton.container.style.width=this.components.closeButton.container.style.height=this.components.closeButton.content.getSize()+"px",this.components.closeButton},b.prototype.createTextCloseButton=function(b){return this.components.closeButton.container.style.display="block",this.components.closeButton.container.innerHTML="",this.components.closeButton.content=new a.component.TextButton(this.components.closeButton.container,b,this.onClose.bind(this)),this.components.closeButton},b.prototype.createCloseButtonCustom=function(b){var c,d=this,e=this.components.closeButton.container;return e.style.display="block",e.innerHTML="",""!==b&&(c=document.createElement("img"),c.src=b,a.helper.Dom.addEvent("load",c,function(b){e.style.width=a.helper.Dom.convertToDeviceSize({width:c.width,convertInPercent:!1}).width+"px",e.style.height=a.helper.Dom.convertToDeviceSize({width:c.height,convertInPercent:!1}).width+"px",c.style.width=c.style.height="100%",a.helper.Dom.addEvent("click",e,d.onClose.bind(d)),e.appendChild(c)},!0)),this.components.closeButton.content=c,this.components.closeButton},b.prototype.createSharebar=function(b){return"undefined"==typeof b&&(b=0),this.components.btShare.container.style.display="block",this.components.btShare.content=new a.component.Sharebar(this.components.btShare.container,b),this.components.btShare},b.prototype.createHeader=function(b){return this.components.header.container.style.display="block",this.components.header.content=new a.component.Header(this.components.header.container,b),this.components.header},b.prototype.clickToPlayMode=function(c){var d=this;if(a.helper.Context.isAndroid()||a.helper.Context.isMobile(3))this.components.video.container.style.height="100%",this.components.video.container.style.width="80%",this.components.video.container.style.opacity="0.01",c?this.components.video.content.on("youtubePlayerStateChange",function(a){-1===a&&d.showVideoFullScreen()}):(this.components.video.content.on("apiReady",function(){return d.components.video.content.triggerEvent("touchInterceptor")}),this.components.video.content.on("touchIntercepted",function(){return d.showVideoFullScreen()})),this.components.video.content.on(a.thrift.buzzplayerEvents.PLAYER_END,function(){d.hideVideoFullScreen()});else{a.helper.Dom.addCssClass(this.components.video.container,[b.ZONE_CLICK_VIDEO_CLASS]);var e=c?"pause":"apiReady";this.components.video.content.on(e,function(){d.components.video.content.executeJavascriptInFrame("document.getElementsByClassName('VideoManager')[0].style.marginTop = '100%'")}),this.components.video.content.on(a.thrift.buzzplayerEvents.PLAYER_END,function(){d.components.video.content.on("trackClick",function(){return d.components.video.content.triggerEvent(a.thrift.buzzplayerEvents.PLAY_REQUEST)})})}this.components.video.content.on(a.thrift.buzzplayerEvents.VIDEO_PLAY,function(){return d.playCallback()})},b.prototype.showVideoFullScreen=function(){this.isFullScreen=!0,a.helper.Context.isMobile()&&this.components.video.content.triggerEvent(a.thrift.buzzplayerEvents.PLAY_REQUEST),a.helper.Context.isMobile(2)||(a.helper.Dom.removeCssClass(this.components.video.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT_HIDE]),a.helper.Dom.addCssClass(this.components.video.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT]),a.helper.Dom.addCssClass(this.components.closeButton.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT_CLOSE_BUTTON]),this.container.style.zIndex="100000001",this.components.closeButton.content.setSize(30),this.components.closeButton.container.style.width=this.components.closeButton.container.style.height=this.components.closeButton.content.getSize()+"px")},b.prototype.hideVideoFullScreen=function(){var b=this;this.isFullScreen=!1,a.helper.Context.isMobile()&&this.components.video.content.triggerEvent(a.thrift.buzzplayerEvents.PAUSE_REQUEST),a.helper.Context.isMobile(2)||(a.helper.Dom.removeCssClass(this.components.video.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT]),a.helper.Dom.addCssClass(this.components.video.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT_HIDE]),a.helper.Dom.removeCssClass(this.components.closeButton.container,[a.helper.CommonCss.FULLSCREEN_ELEMENT_CLOSE_BUTTON]),this.container.style.zIndex="100000000",this.components.closeButton.content.setSize(25),this.components.closeButton.container.style.width=this.components.closeButton.container.style.height=this.components.closeButton.content.getSize()+"px",this.components.closeButton.container.style.display="none",setTimeout(function(){b.components.closeButton.container.style.display="block"},100))},b.BACKGROUND_CLASS="ebz_adDisplay ebz_adDisplay_background",b.IFRAME_CLASS="ebz_adDisplay ebz_adDisplay_iframe",b.IMAGE_CLASS="ebz_adDisplay ebz_adDisplay_image",b.CLICK_OVER_CLASS="ebz_adDisplay ebz_adDisplay_clickOver",b.VIDEO_CLASS="ebz_adDisplay ebz_adDisplay_video",b.BT_SHARE_CLASS="ebz_adDisplay ebz_adDisplay_btShare",b.HEADER_CLASS="ebz_adDisplay ebz_adDisplay_header",b.CLOSE_BUTTON_CLASS="ebz_adDisplay ebz_adDisplay_closeButton",b.ZONE_CLICK_VIDEO_CLASS="ebz_zone_click_video",b}();b.AdDisplay=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(a){!function(a){a[a.BILLABLE_PUBLISHER=1]="BILLABLE_PUBLISHER",a[a.AFFICHAGE_CAMPAGNE=3]="AFFICHAGE_CAMPAGNE",a[a.AFFICHAGE_CREA=4]="AFFICHAGE_CREA",a[a.BILLABLE_ADVERTISER=2]="BILLABLE_ADVERTISER",a[a.BILLABLE_MIXTE=0]="BILLABLE_MIXTE"}(a.TrackingImpression||(a.TrackingImpression={}));a.TrackingImpression}(a.thrift||(a.thrift={}));a.thrift}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(d,e,f){b.call(this,document.createElement("div")),this.forcePortrait=d,this.showClass=e,this.hideClass=f,this.container.style.visibility="hidden",a.helper.Dom.addCssClass(this.container,[c.EXPAND_CLASS,f])}return __extends(c,b),c.prototype.show=function(){a.helper.Dom.removeCssClass(this.container,[this.hideClass]),a.helper.Dom.addCssClass(this.container,[this.showClass]),this.container.style.visibility="visible",this.components.closeButton.content.domRefresh()},c.prototype.hide=function(){a.helper.Dom.removeCssClass(this.container,[this.showClass]),a.helper.Dom.addCssClass(this.container,[this.hideClass])},c.prototype.kill=function(a){this.container.parentNode&&this.container.parentNode.removeChild(this.container)},c.prototype.updateContent=function(b){if(this.components){var c=1===a.helper.Dom.getOrientation();if(c?this.components.closeButton.content&&this.components.closeButton.content.setSize&&(a.helper.Context.isViewport()?this.components.closeButton.content.setSize(b.size):this.components.closeButton.content.setSize(b.size/2)):this.components.closeButton.content&&this.components.closeButton.content.setSize&&this.components.closeButton.content.setSize(b.size),this.components.closeButton.content&&this.components.closeButton.content.getSize&&(this.components.closeButton.container.style.width=this.components.closeButton.container.style.height=this.components.closeButton.content.getSize()+"px"),this.components.iframe.content&&(c&&this.forcePortrait?(this.components.iframe.content.setIframeHeight(window.innerWidth+"px"),this.components.iframe.content.setIframeWidth(window.innerHeight+"px")):(this.components.iframe.content.setIframeHeight(window.innerHeight+"px"),this.components.iframe.content.setIframeWidth(window.innerWidth+"px"))),this.components.video.content){var d=a.helper.Dom.getWindowSize()[0],e=c?a.helper.Dom.getWindowSize()[1]:9*d/16;this.components.video.container.style.width=d+"px",this.components.video.container.style.height=e+"px",this.components.video.content.setPosition?(this.videoMiddlePosition={tablet:{portrait:{viewport:317*window.innerWidth/980+"px",noViewport:317*window.innerWidth/980+"px"},landscape:{viewport:"0px",noViewport:"0px"}},mobile:{portrait:{viewport:260*window.innerWidth/640+"px",noViewport:260*window.innerWidth/640+"px"},landscape:{viewport:"0px",noViewport:"0px"}}},this.components.video.content.setPosition(1,this.videoMiddlePosition)):a.helper.Dom.centerMe(this.components.video.container,0,2),this.components.btShare.content&&!c?(this.components.btShare.container.style.top=parseFloat(this.components.video.container.style.top)+parseFloat(this.components.video.container.style.height)+"px",this.components.btShare.container.style.bottom="auto"):this.components.btShare.content&&(this.components.btShare.container.style.top="auto",this.components.btShare.container.style.bottom=this.components.btShare.content.getSize())}}},c.EXPAND_CLASS="ebz_expand",c}(a.component.AdDisplay);b.Expand=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){!function(a){a[a.WIDTH=0]="WIDTH",a[a.HEIGHT=1]="HEIGHT",a[a.BOTH=2]="BOTH"}(b.Resize||(b.Resize={}));var c=(b.Resize,function(b){function c(d,e,f,g,h,i,j,k){b.call(this,document.createElement("div")),this.width=d,this.height=e,this.forceResponsive=f,this.floatingInLandscape=g,this.containerClass=h,this.showClass=i,this.hideClass=j,this.resizeMode=k,a.helper.Dom.addCssClass(this.container,[c.BANNER_CLASS,this.containerClass,this.hideClass]),this.resizeContainer()}return __extends(c,b),c.prototype.updateContent=function(){var b=this,c=1===a.helper.Dom.getOrientation();if(this.components.closeButton.content&&this.components.closeButton.content.setSize&&this.components.closeButton.content.setSize(20),this.components.closeButton.content&&this.components.closeButton.content.getSize&&(this.components.closeButton.container.style.width=this.components.closeButton.container.style.height=this.components.closeButton.content.getSize()+"px"),this.resizeContainer(),this.components.image.content){if(window.innerWidth&&this.components.image.content.offsetWidth>window.innerWidth){var d=window.innerWidth*this.height/this.components.image.content.offsetWidth;this.height=Math.ceil(d),this.container.style.height=this.height+"px"}a.helper.Util.recurentCall(function(){a.helper.Dom.centerMe(b.components.image.content,0,2)})}if(this.components.iframe.content&&this.resizeIframeInContainer(),this.floatingInLandscape&&c){var e,f;this.components.iframe.content?(f=parseFloat(this.components.iframe.container.style.transform.substr(6)),e=parseInt(this.components.iframe.container.style.width,10)*f+"px",this.container.style.height=parseInt(this.components.iframe.container.style.height,10)*f+"px"):e=this.components.image.content.offsetWidth+"px",this.container.style.width=e,a.helper.Dom.centerMe(this.container,1,0)}else this.floatingInLandscape&&(this.container.style.width="100%",this.container.style.left="0",this.container.style.marginLeft="0")},c.prototype.resizeIframeInContainer=function(){var b=this.components.iframe;if(a.helper.Context.isMobile()&&!a.helper.Context.isViewport()&&this.forceResponsive&&!a.helper.Context.isMobile(3)){var c=a.helper.Context.isAndroid()?a.helper.Dom.convertToDeviceSize({height:1,convertInPercent:!1}).height:a.helper.Dom.convertToDeviceSize({width:1,convertInPercent:!1}).width,d=1!==a.helper.Dom.getOrientation()||a.helper.Context.isAndroid()?c/2:c;a.helper.Dom.applyVendorProperties(b.container,"transform","scale("+d+")"),(2===this.resizeMode||0===this.resizeMode)&&(b.container.style.width=2*this.width+"px"),(2===this.resizeMode||1===this.resizeMode)&&(b.container.style.height=2*this.height+"px")}else a.helper.Context.isMobile(3)&&this.forceResponsive?(b.container.style.width=this.width+"px",b.container.style.height=this.height+"px",0===this.resizeMode&&(d=window.innerHeight/this.height,a.helper.Dom.applyVendorProperties(b.container,"transform","scale("+d+")"),this.container.style.width=this.width*d+"px"),1===this.resizeMode&&(d=window.innerWidth/this.width,a.helper.Dom.applyVendorProperties(b.container,"transform","scale("+d+")"),this.container.style.height=this.height*d+"px")):a.helper.Context.isViewport()&&this.forceResponsive?(d=.5,a.helper.Dom.applyVendorProperties(b.container,"transform","scale("+d+")"),(2===this.resizeMode||0===this.resizeMode)&&(b.container.style.width=2*this.width+"px"),(2===this.resizeMode||1===this.resizeMode)&&(b.container.style.height=2*this.height+"px")):b.container.style.width="100%";this.forceResponsive&&a.helper.Dom.centerMe(b.container,0,2)},c.prototype.resizeContainer=function(){a.helper.Context.isMraid()||(a.helper.Context.isMobile()&&!a.helper.Context.isViewport()?a.helper.Context.isMobile(3)?((1===this.resizeMode||2===this.resizeMode)&&(this.container.style.height=this.height+"px"),(0===this.resizeMode||2===this.resizeMode)&&(this.container.style.width=this.width+"px")):a.helper.Context.isAndroid()?1===a.helper.Dom.getOrientation()?((1===this.resizeMode||2===this.resizeMode)&&(this.container.style.height=a.helper.Dom.convertToDeviceSize({height:this.height,convertInPercent:!1}).height+"px"),(0===this.resizeMode||2===this.resizeMode)&&(this.container.style.width=a.helper.Dom.convertToDeviceSize({height:this.width,convertInPercent:!1}).height+"px")):((1===this.resizeMode||2===this.resizeMode)&&(this.container.style.height=a.helper.Dom.convertToDeviceSize({height:this.height,convertInPercent:!1}).height+"px"),(0===this.resizeMode||2===this.resizeMode)&&(this.container.style.width=a.helper.Dom.convertToDeviceSize({width:this.width,convertInPercent:!1}).width+"px")):1===a.helper.Dom.getOrientation()?((1===this.resizeMode||2===this.resizeMode)&&(this.container.style.height=2*a.helper.Dom.convertToDeviceSize({width:this.height,convertInPercent:!1}).width+"px"),(0===this.resizeMode||2===this.resizeMode)&&(this.container.style.width=2*a.helper.Dom.convertToDeviceSize({width:this.width,convertInPercent:!1}).width+"px")):((1===this.resizeMode||2===this.resizeMode)&&(this.container.style.height=a.helper.Dom.convertToDeviceSize({height:this.height,convertInPercent:!1}).height+"px"),(0===this.resizeMode||2===this.resizeMode)&&(this.container.style.width=a.helper.Dom.convertToDeviceSize({width:this.width,convertInPercent:!1}).width+"px")):a.helper.Context.isMobile()&&a.helper.Context.isViewport()&&((1===this.resizeMode||2===this.resizeMode)&&(this.container.style.height=this.height+"px"),(0===this.resizeMode||2===this.resizeMode)&&(this.container.style.width=this.width+"px")))},c.prototype.fade=function(a){var b=this;this.container.style.opacity="0.5",clearTimeout(this.timeoutScroll),this.timeoutScroll=setTimeout(function(){return b.container.style.opacity="1"},100)},c.prototype.show=function(){this.updateContent(),a.helper.Dom.removeCssClass(this.container,[this.hideClass]),a.helper.Dom.addCssClass(this.container,[this.showClass])},c.prototype.hide=function(){a.helper.Dom.removeCssClass(this.container,[this.showClass]),a.helper.Dom.addCssClass(this.container,[this.hideClass])},c.BANNER_CLASS="ebz_banner",c.BANNER_CLOSEBTN_OUT_LEFT="ebz_banner_close_out_left",c.BANNER_CLOSEBTN_OUT_RIGHT="ebz_banner_close_out_right",c.BANNER_CLOSEBTN_IN="ebz_banner_close_in",c.BANNER_IFRAME_CLASS="ebz_banner_iframe",c.ZONE_CLICK_VIDEO_CLASS="ebz_zone_click_video",c}(a.component.AdDisplay));b.Banner=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c){b.call(this),this.config=c,this.logger=new a.helper.ConsoleLogger("AbstractFormatExpandable"),this.setupTracking(),this.init()}return __extends(c,b),c.prototype.getTrackingCallbacks=function(){try{return this.config.tracking.callbacks||[]}catch(a){return[]}},c.prototype.init=function(a){"undefined"==typeof a&&(a=null),this.logger.error("You must implement initOnLoad in your extended class (format)")},c.prototype.postLoad=function(){var b=this;this.config.fadeOnScroll&&(a.helper.Context.isMobile(2)||a.helper.Context.isMobile(3)?a.helper.Dom.addEvent("touchmove",window,this.banner.fade.bind(this.banner)):a.helper.Dom.addEvent("scroll",window,this.banner.fade.bind(this.banner))),a.helper.Context.isMobile()&&a.helper.Dom.addEvent("orientationchange",window,function(){return a.helper.Util.recurentCall(function(){return b.updateContent()},500)}),a.helper.Context.isMraid()?(a.helper.Dom.addCssClass(this.banner.container,[a.helper.CommonCss.DISABLE_ANIM]),this.expand.container&&a.helper.Dom.addCssClass(this.expand.container,[a.helper.CommonCss.DISABLE_ANIM]),window.mraid.addEventListener("stateChange",this.mraidStateChange.bind(this))):this.initBannerCloseButton(this.config.mobileCloseButtonPosition),this.emit(a.thrift.events.IMPRESSION),this.off(a.thrift.events.IMPRESSION)},c.prototype.mraidStateChange=function(b){var c=this;switch(b){case"expanded":default:a.helper.Util.recurentCall(function(){return c.updateContent()});break;case"default":"expanded"===this.currentMraidState&&this.hideExpand(),a.helper.Util.recurentCall(function(){return c.updateContent()})}this.currentMraidState=b},c.prototype.initBanner=function(b,c,d,e){var f=this;a.helper.Context.isMobile()&&!a.helper.Context.isMobile(3)&&(this.config.banner.forceResponsive&&2!==e||(this.config.banner.width=this.config.banner.width/2),this.config.banner.height=this.config.banner.height/2,this.config.banner.style&&this.config.banner.style.backgroundHeight&&(this.config.banner.style.backgroundHeight=this.config.banner.style.backgroundHeight/2)),this.banner=new a.component.Banner(this.config.banner.width,this.config.banner.height,this.config.banner.forceResponsive,this.config.banner.floatingInLandscape,b,c,d,e);var g="100%";switch(this.config.banner.style&&(this.config.banner.style.background||this.config.banner.style.backgroundHeight)&&((this.config.banner.style.backgroundHeight||0===this.config.banner.style.backgroundHeight)&&(g=100*this.config.banner.style.backgroundHeight/this.config.banner.height+"%"),this.banner.setBackground(this.config.banner.style.background,g)),a.helper.Dom.tagFromSrc(this.config.banner.src)){case 0:var h=this.banner.loadImage(this.config.banner.src,null,function(b){f.config.banner.width=2*h.content.width,f.banner.resizeContainer(),f.banner.show(),a.helper.Dom.centerMe(h.content,0,2)});break;case 1:var i=this.banner.loadIframe(this.config.banner.src,function(b){f.config.banner.forceResponsive&&a.helper.Dom.centerMe(i.container,0,2),f.banner.show()});a.helper.Dom.addCssClass(i.container,[a.component.Banner.BANNER_IFRAME_CLASS]),i.container.style.width=this.config.banner.width+"px",this.banner.resizeContainer(),this.banner.resizeIframeInContainer();break;default:this.logger.error("banner - unrecognized source")}this.banner.setPlayCallback(function(){f.emit(a.thrift.events.PUBLISHER_ENGAGEMENT),f.off(a.thrift.events.PUBLISHER_ENGAGEMENT),f.emit(a.thrift.events.ADVERTISER_ENGAGEMENT),f.off(a.thrift.events.ADVERTISER_ENGAGEMENT);
}),this.banner.setRedirectCallback(function(){return f.showExpand()}),document.body.appendChild(this.banner.container)},c.prototype.initBannerCloseButton=function(b){var c=this,d=this.banner.createCloseButton();a.helper.Context.isMobile()&&-1!==b.indexOf("outBanner")?("outBannerLeft"===b?a.helper.Dom.addCssClass(d.container,[a.component.Banner.BANNER_CLOSEBTN_OUT_LEFT]):("outBannerRight"===b||"outBanner"===b)&&a.helper.Dom.addCssClass(d.container,[a.component.Banner.BANNER_CLOSEBTN_OUT_RIGHT]),d.content.setBackgroundShape(1)):("inBannerLeft"===b?a.helper.Dom.addCssClass(d.container,[a.helper.CommonCss.TOP_LEFT_POSITION_CLASS,a.component.Banner.BANNER_CLOSEBTN_IN]):("inBannerRight"===b||"inBanner"===b)&&a.helper.Dom.addCssClass(d.container,[a.helper.CommonCss.TOP_RIGHT_POSITION_CLASS,a.component.Banner.BANNER_CLOSEBTN_IN]),d.content.setBackgroundColor("#FFF"),d.content.setIconColor("#000")),b&&"hidden"!==b||(d.container.style.display="none"),this.banner.setCloseCallback(function(){return c.hideBanner(!0)})},c.prototype.createVideoClickToPlay=function(){var b=this,c=this.banner.createVideo(this.config.expand.src,this.isVideoExpand&&this.config.expand.autoPlay&&this.config.closeAtEndOfVideo?function(){return b.hideExpand()}:null,1);this.banner.clickToPlayMode(this.isYoutubeVideo),this.isVideoExpand&&this.config.expand.autoPlay&&(a.helper.Context.isMobile(2)?c.content.on(a.thrift.buzzplayerEvents.TRACK_CLICK,function(){return b.showExpand()}):(c.content.on("touchIntercepted",function(){return b.showExpand()}),c.content.on("youtubePlayerStateChange",function(a){a&&-1===a&&b.showExpand()}))),this.connectVideoPlayer(c.content)},c.prototype.initExpand=function(b,c){var d=this;3===a.helper.Dom.tagFromSrc(this.config.expand.src)&&(this.isVideoExpand=!this.config.expand.clickToPlay,this.isVideoClickToPlay=this.config.expand.clickToPlay||this.config.expand.autoPlay,this.isYoutubeVideo=-1!==this.config.expand.src.indexOf("youtube.com/watch?v=")),this.expand=new a.component.Expand(this.config.expand.forcePortrait,b,c),!this.config.expand.preload||this.isVideoClickToPlay&&!this.config.expand.autoPlay||this.createExpand(),this.config.expand.closeButton&&this.initExpandCloseButton(this.config.expand.closeButton),this.expand.setPlayCallback(function(){d.emit(a.thrift.events.PUBLISHER_ENGAGEMENT),d.off(a.thrift.events.PUBLISHER_ENGAGEMENT),d.emit(a.thrift.events.ADVERTISER_ENGAGEMENT),d.off(a.thrift.events.ADVERTISER_ENGAGEMENT)}),this.isVideoClickToPlay&&(a.helper.Context.isMraid()||this.createVideoClickToPlay())},c.prototype.createExpand=function(b){"undefined"==typeof b&&(b=null);var c=this;if(this.isVideoExpand){var d=this.expand.createSharebar(),e=this.expand.createVideo(this.config.expand.src,this.config.closeAtEndOfVideo?function(){return c.hideExpand()}:null,1,function(a){c.config.expand.poster&&(a.displaySettings.assets={mobile:{url:c.config.expand.poster}},a.displaySettings.isMobile=!0)});this.expand.loadImage(this.config.expand.image,null,function(a){b&&b()});this.connectVideoPlayer(e.content),this.config.expand.logo&&d.content.setLogoCallback(this.config.expand.logo,function(a){return c.callRedirectFromBackground()}),this.config.tracking.socialRedirect&&this.connectShareBar(d.content,this.config.tracking.socialRedirect),this.expand.setRedirectCallback(function(a){return c.callRedirectFromBackground()}),this.config.expand.autoPlay&&!a.helper.Context.isMraid()&&(e.container.innerHTML="<img width='100%' height='100%' src='"+this.config.expand.poster+"' />",a.helper.Dom.addEvent("click",e.container,function(a){return c.banner.showVideoFullScreen()})),a.helper.Context.isMobile(2)&&(a.helper.Dom.addCssClass(d.container,[a.helper.CommonCss.HIDE_ON_LANDSCAPE]),a.helper.Dom.addCssClass(this.expand.components.closeButton.container,[a.helper.CommonCss.HIDE_ON_LANDSCAPE]))}else{var f=this.expand.loadIframe(this.config.expand.src,function(a){b&&b()});f.content.setScrolling(this.config.expand.scrollable),a.helper.Dom.addEvent("scroll",window,function(){return c.updateContent()})}this.config.expand.style&&this.config.expand.style.background&&this.expand.setBackground(this.config.expand.style.background,"100%"),this.config.expand.forcePortrait&&a.helper.Dom.forceOrientation(this.expand.container),this.updateContent(),document.body.appendChild(this.expand.container)},c.prototype.initExpandCloseButton=function(b){var c,d=this;b.customButton&&""!==b.customButton?c=this.expand.createCloseButtonCustom(b.customButton):(c=this.expand.createCloseButton(),c.content.setSize(b.size),c.container.style.width=c.container.style.height=c.content.getSize()+"px",c.content.setBackgroundColor("#FFF"),c.content.setIconColor("#000")),a.helper.Dom.addCssClass(c.container,[a.helper.CommonCss.choosePositionClass(b.position)]),this.expand.setCloseCallback(function(){return d.hideExpand()}),a.helper.Util.recurentCall(this.expand.updateContent.bind(this.expand,b))},c.prototype.updateContent=function(){this.banner.updateContent(),this.expand.updateContent(this.config.expand.closeButton)},c.prototype.hideBanner=function(b){this.banner.hide(),b&&(a.helper.Dom.addEvent("transitionend",this.banner.container,this.kill.bind(this),!0),this.emit(a.thrift.events.CLOSE_AD),this.off(a.thrift.events.CLOSE_AD))},c.prototype.showExpand=function(){var b=this;this.config.expand.openInNewTab&&(this.kill(),a.helper.Dom.openExternalPage(this.config.expand.src)),this.isVideoClickToPlay&&(a.helper.Context.isMraid()&&window.mraid.playVideo?this.isVideoExpand?this.expand.components.video.content.triggerEvent(a.thrift.buzzplayerEvents.PLAY_REQUEST):window.mraid.playVideo(this.config.expand.src):a.helper.Context.isMraid()||!a.helper.Context.isAndroid()&&!a.helper.Context.isMobile(3)||this.banner.showVideoFullScreen()),(this.isVideoExpand||!this.isVideoExpand&&!this.isVideoClickToPlay&&!this.config.expand.openInNewTab)&&(this.config.expand.preload?(this.expand.container.parentNode||document.body.appendChild(this.expand.container),setTimeout(this.expand.show.bind(this.expand),100)):(this.config.expand.preload=!0,this.createExpand(function(){}),this.showExpand()),a.helper.Context.isMobile()&&window.scrollTo(0,1),a.helper.Context.isMraid()&&"default"===window.mraid.getState()&&(window.mraid.setExpandProperties({useCustomClose:!0}),window.mraid.expand()),this.hideBanner(!1)),this.initStatEngagementDuration(),setTimeout(function(){b.emit(a.thrift.events.PUBLISHER_ENGAGEMENT),b.off(a.thrift.events.PUBLISHER_ENGAGEMENT)},1e3*(this.config.tracking.publisherEngagementDelay||0)),setTimeout(function(){b.emit(a.thrift.events.ADVERTISER_ENGAGEMENT),b.off(a.thrift.events.ADVERTISER_ENGAGEMENT)},1e3*(this.config.tracking.advertiserEngagementDelay||0))},c.prototype.hideExpand=function(){this.banner.show(),this.expand.hide(),a.helper.Context.isMraid()&&"expanded"===window.mraid.getState()?window.mraid.close():a.helper.Context.isMraid()||a.helper.Dom.addEvent("transitionend",this.expand.container,this.expand.kill.bind(this.expand),!0),this.expand.components.video.content&&this.expand.components.video.content.triggerEvent(a.thrift.buzzplayerEvents.PAUSE_REQUEST),this.emit(a.thrift.events.COLLAPSE),this.off(a.thrift.events.COLLAPSE),this.callStatEngagementDuration()},c.prototype.initStatEngagementDuration=function(){var b=this;this.expandOpenDate||a.helper.Dom.addEvent("unload",window,function(a){return b.callStatEngagementDuration()},!0),this.expandOpenDate=Date.now()},c.prototype.callStatEngagementDuration=function(){this.emit(a.thrift.events.ENGAGEMENT_DURATION,{DURATION:Math.ceil((Date.now()-this.expandOpenDate)/1e3)}),this.off(a.thrift.events.ENGAGEMENT_DURATION)},c.prototype.callRedirectFromBackground=function(){this.emit(a.thrift.events.CLICK_BACKGROUND),this.off(a.thrift.events.CLICK_BACKGROUND),a.helper.Dom.openExternalPage(this.config.tracking.openPageClicBackground)},c.prototype.kill=function(){this.banner.container.parentNode&&this.banner.container.parentNode.removeChild(this.banner.container),this.expand.container&&this.expand.container.parentNode&&this.expand.container.parentNode.removeChild(this.expand.container)},c}(a.format.AbstractFormat);b.AbstractFormatExpandable=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(a){function b(b){a.call(this,b)}return __extends(b,a),b.prototype.init=function(){this.logger.info("Function initOnLoad"),this.initBanner(b.BANNER_CLASS,b.BANNER_SHOW_CLASS,b.BANNER_HIDE_CLASS,1),this.initExpand(b.EXPAND_SHOW_CLASS,b.EXPAND_HIDE_CLASS),this.postLoad()},b.BANNER_CLASS="ebz_footer_banner",b.BANNER_SHOW_CLASS="ebz_footer_banner_show",b.BANNER_HIDE_CLASS="ebz_footer_banner_hide",b.EXPAND_SHOW_CLASS="ebz_footer_expand_show",b.EXPAND_HIDE_CLASS="ebz_footer_expand_hide",b}(a.format.AbstractFormatExpandable);b.Footer=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(){function b(b,c){var d=this;this.container=b,this.onDragEnd=c,a.helper.Dom.addEvent("touchstart",b,function(a){return d.onTouchStart(a)}),a.helper.Dom.addEvent("touchmove",b,function(a){return d.onTouchMove(a)}),a.helper.Dom.addEvent("touchend",b,function(a){return d.onTouchEnd(a)}),a.helper.Dom.addEvent("orientationchange",window,function(){return d.forceRedrawContainer()}),this.androidNoScroll()}return b.prototype.onTouchStart=function(b){a.helper.Dom.addCssClass(this.container,[a.helper.CommonCss.DISABLE_ANIM]),this.touchMove=0},b.prototype.onTouchMove=function(b){if(this.touchMove++,this.touchMove>=2){var c=b.targetTouches[0],d=c.pageX-a.helper.Dom.getWindowScroll()[0],e=c.pageY-a.helper.Dom.getWindowScroll()[1];this.container.style.left=d-this.container.offsetWidth/2+"px",this.container.style.top=e-this.container.offsetHeight/2+"px",b.preventDefault()}},b.prototype.onTouchEnd=function(b){"undefined"==typeof b&&(b=null),a.helper.Dom.removeCssClass(this.container,[a.helper.CommonCss.DISABLE_ANIM]),this.containerLeft=this.container.style.left,this.containerTop=this.container.style.top,this.touchMove=0,this.checkBorder(),this.onDragEnd&&this.onDragEnd(b)},b.prototype.checkBorder=function(){var b=a.helper.Dom.getWindowSize(),c=a.helper.Dom.getWindowScroll(),d=parseInt(this.container.style.top,10)+c[1],e=parseInt(this.container.style.left,10),f=1.5*this.container.offsetHeight,g=this.container.offsetWidth,h=c[1]+b[1];e>=b[0]/2-g/2?this.container.style.left=b[0]-g+"px":this.container.style.left="0",d+f>h?this.container.style.top=h-c[1]-f+"px":d-c[1]<0&&(this.container.style.top="0px")},b.prototype.forceRedrawContainer=function(){var b=this;this.container.style.display="none",setTimeout(function(){b.container.style.display="block",a.helper.Util.recurentCall(function(){return b.checkBorder()},500)},50)},b.prototype.androidNoScroll=function(){var a=function(a){a.preventDefault()},b=function(b){document.addEventListener("touchmove",a,!1)},c=function(b){document.removeEventListener("touchmove",a,!1)};this.container.addEventListener("touchstart",b,!1),this.container.addEventListener("touchend",c,!1)},b}();b.DragAndDrop=c}(a.component||(a.component={}));a.component}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(a){b.call(this,a)}return __extends(c,b),c.prototype.init=function(b){"undefined"==typeof b&&(b=null),this.initBanner(c.BANNER_CLASS,c.BANNER_SHOW_CLASS,c.BANNER_HIDE_CLASS,2),this.initExpand(c.EXPAND_SHOW_CLASS,c.EXPAND_HIDE_CLASS),this.postLoad(),this.config.banner.draggable&&(this.drag=new a.component.DragAndDrop(this.banner.container,this.moveCloseIfNeeded.bind(this)))},c.prototype.hideBanner=function(a){b.prototype.hideBanner.call(this,a),this.drag&&this.drag.containerLeft&&"0px"!==this.drag.containerLeft?(this.banner.container.style.left=window.innerWidth+"px",a||this.moveExpandWithoutTransition("200%")):(this.banner.container.style.left="",this.moveExpandWithoutTransition("-200%"))},c.prototype.hideExpand=function(){b.prototype.hideExpand.call(this),this.drag&&this.drag.containerLeft&&(this.banner.container.style.left=this.drag.containerLeft,"0px"!==this.drag.containerLeft&&(this.expand.container.style.left="200%"))},c.prototype.moveExpandWithoutTransition=function(a){var b=this;this.expand.container.style.transition="none",this.expand.container.style.left=a,setTimeout(function(){b.expand.container.style.transition="",b.expand.container.style.left=""},100)},c.prototype.moveCloseIfNeeded=function(b){var c=this.banner.components.closeButton.container,d="0px"===this.banner.container.style.left,e="inBanner"===this.config.mobileCloseButtonPosition,f=-1!==c.className.indexOf(e?a.helper.CommonCss.TOP_RIGHT_POSITION_CLASS:a.component.Banner.BANNER_CLOSEBTN_OUT_RIGHT),g=e?f?a.helper.CommonCss.TOP_RIGHT_POSITION_CLASS:a.helper.CommonCss.TOP_LEFT_POSITION_CLASS:f?a.component.Banner.BANNER_CLOSEBTN_OUT_RIGHT:a.component.Banner.BANNER_CLOSEBTN_OUT_LEFT,h=e?f?a.helper.CommonCss.TOP_LEFT_POSITION_CLASS:a.helper.CommonCss.TOP_RIGHT_POSITION_CLASS:f?a.component.Banner.BANNER_CLOSEBTN_OUT_LEFT:a.component.Banner.BANNER_CLOSEBTN_OUT_RIGHT;d!==f&&(a.helper.Dom.removeCssClass(c,[g]),a.helper.Dom.addCssClass(c,[h]))},c.BANNER_CLASS="ebz_intab_banner",c.BANNER_SHOW_CLASS="ebz_intab_banner_show",c.BANNER_HIDE_CLASS="ebz_intab_banner_hide",c.EXPAND_SHOW_CLASS="ebz_intab_expand_show",c.EXPAND_HIDE_CLASS="ebz_intab_expand_hide",c}(a.format.AbstractFormatExpandable);b.InTab=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(ebz){!function(format){var Flow=function(_super){function Flow(config){var _this=this;_super.call(this),this.config=config,this.logger=new ebz.helper.ConsoleLogger("Flow"),this.playing=!1,this.pausedByFocusOff=!1,this.logger.info("Function Constructor"),this.setupTracking(),this.isTypeVideo=this.config.expand.video?!0:!1,this.createExpand(),ebz.helper.Dom.addEvent("resize",window,this.updateContent.bind(this)),ebz.helper.Dom.addEvent("scroll",window,this.updateContent.bind(this)),ebz.helper.Dom.addEvent("orientationchange",window,this.updateContent.bind(this)),ebz.helper.Dom.addEvent("load",window.document,this.updateContent.bind(this)),this.isTypeVideo&&this.createVideoPlayer(),ebz.helper.Context.isMraid()?window.mraid.addEventListener("viewableChange",function(viewableRaw){var convertedViewable=eval(viewableRaw);convertedViewable&&!_this.mraidInitOk&&(_this.autoClose(),_this.mraidInitOk=!0,_this.updateContent(),_this.isVast||_this.callImpressionAndEngagement())}):(this.autoClose(),this.isVast||this.callImpressionAndEngagement())}return __extends(Flow,_super),Flow.prototype.getTrackingCallbacks=function(){try{return this.config.tracking.callbacks||[]}catch(a){return[]}},Flow.prototype.createExpand=function(){var a=this;switch(this.logger.info("Function createExpand"),this.expandContainer=document.createElement("div"),ebz.helper.Dom.addCssClass(this.expandContainer,[Flow.EXPAND_CLASS]),this.expandAdDisplay=new ebz.component.AdDisplay(this.expandContainer),ebz.helper.Dom.tagFromSrc(this.config.expand.background.portrait)){case 0:this.expandAdDisplay.loadImage(this.config.expand.background.portrait,this.config.expand.background.landscape,function(b){a.updateContent()}),this.expandAdDisplay.setRedirectCallback(function(b){a.emit(ebz.thrift.events.CLICK_BACKGROUND),a.off(ebz.thrift.events.CLICK_BACKGROUND),ebz.helper.Dom.openExternalPage(a.config.tracking.openPageClicBackground)});break;case 1:var b=this.expandAdDisplay.loadIframe(this.config.expand.background.portrait);b.content.setScrolling(this.config.expand.scrollable),this.updateContent();break;default:this.logger.error("expand - unrecognized source")}var c=this.expandAdDisplay.createCloseButton();c.content.setBackgroundColor("#FFF"),c.content.setIconColor("#000"),c.content.setDelay(1e3*this.config.expand.closeButton.delayDisplay),ebz.helper.Dom.addCssClass(c.container,[Flow.EXPAND_CLOSEBUTTON_CLASS,ebz.helper.CommonCss.choosePositionClass(this.config.expand.closeButton.position)]),this.expandAdDisplay.setCloseCallback(this.closeExpand.bind(this)),this.config.expand.style&&this.config.expand.style.background&&this.expandAdDisplay.setBackground(this.config.expand.style.background,"100%"),ebz.helper.Dom.useCustomClose(),document.body.appendChild(this.expandContainer)},Flow.prototype.createVideoPlayer=function(){var a=this;this.logger.info("Function createVideoPlayer");var b=3;this.config.expand.autoPlay||(b=1);var c=this.expandAdDisplay.createVideo(this.config.expand.video.videoUrl,this.closeExpand.bind(this),b,this.customConfig.bind(this));ebz.helper.Dom.addCssClass(c.container,[Flow.EXPAND_VIDEOPLAYER_CLASS]),this.handleVideoPosition(c,this.config.expand.video.position),this.updateContent(),this.connectVideoPlayer(c.content),this.isVast=!(4!==c.content.data.mediaProvider),this.isVast&&c.content.on(ebz.thrift.events.VAST_LOADED,function(b){ebz.hub.setupCallbacks(a,c.content.data.tracking.callbacks),a.callImpressionAndEngagement()}),this.viewability.listen(c.content),c.content.on(ebz.thrift.buzzplayerEvents.VIDEO_PLAYING,function(){a.pausedByFocusOff=!1,a.playing=!0}),c.content.on(ebz.thrift.buzzplayerEvents.VIDEO_PLAY,function(){a.pausedByFocusOff=!1,a.playing=!0}),c.content.on(ebz.thrift.buzzplayerEvents.VIDEO_PAUSE,function(){a.playing=!1}),c.content.on(ebz.thrift.buzzplayerEvents.VIDEO_ENDED,function(){a.playing=!1}),this.config.expand.video.pauseOnFocusOff&&(this.viewability.on(ebz.component.Viewability.EVENT_VIEWABLE,function(){a.pausedByFocusOff&&(c.content.triggerEvent(ebz.thrift.buzzplayerEvents.PLAY_REQUEST),a.emit(ebz.thrift.events.VIEWABILITY_PLAY_ON_FOCUS_ON))}),this.viewability.on(ebz.component.Viewability.EVENT_UNVIEWABLE,function(){a.playing&&(a.pausedByFocusOff=!0,c.content.triggerEvent(ebz.thrift.buzzplayerEvents.PAUSE_REQUEST),a.emit(ebz.thrift.events.VIEWABILITY_PAUSE_ON_FOCUS_OFF))}))},Flow.prototype.customConfig=function(a){a.displaySettings.hideEndScreen=!0,a.tracking={advertiserDelay:this.config.tracking.advertiserBillingDelay,publisherDelay:this.config.tracking.publisherBillingDelay},null!=this.config.expand.video&&(a.displaySettings.assets={mobile:{url:this.config.expand.video.poster}},a.displaySettings.isMobile=!0)},Flow.prototype.closeExpand=function(){this.logger.info("Function closeExpand"),this.emit(ebz.thrift.events.CLOSE_AD),this.off(ebz.thrift.events.CLOSE_AD),this.expandAdDisplay.components.video.content&&this.expandAdDisplay.components.video.content.triggerEvent(ebz.thrift.buzzplayerEvents.PAUSE_REQUEST),ebz.helper.Context.isMraid()?window.mraid.close():(ebz.helper.Dom.addCssClass(this.expandContainer,[Flow.EXPAND_CLASS_HIDE]),ebz.helper.Dom.addEvent("transitionend",this.expandContainer,this.kill.bind(this),!0))},Flow.prototype.autoClose=function(){!this.isTypeVideo&&this.config.expand.closeButton.delayAutomaticCall&&(this.timerAutoClose=setTimeout(this.closeExpand.bind(this),1e3*this.config.expand.closeButton.delayAutomaticCall))},Flow.prototype.updateContent=function(){this.logger.info("Function updateContent");var a=ebz.helper.Dom.getWindowSize(),b=1===ebz.helper.Dom.getOrientation(),c=ebz.helper.Context.isMobile(3),d=(ebz.helper.Context.isViewport(),b&&c&&!!this.config.expand.background.landscape),e=b&&c&&!this.config.expand.background.landscape,f=this.expandAdDisplay.components.video,g=this.expandAdDisplay.components.iframe;this.expandAdDisplay.components.image;if(this.isTypeVideo&&f.content){var h=d?692*a[0]/1024:a[0],i=e?a[1]:9*h/16;f.container.style.width=h+"px",f.container.style.height=i+"px",this.handleVideoPosition(f,this.config.expand.video.position)}g.content&&(g.content.setIframeWidth(a[0]+"px"),g.content.setIframeHeight(a[1]+"px"))},Flow.prototype.callImpressionAndEngagement=function(){this.emit(ebz.thrift.events.IMPRESSION),this.off(ebz.thrift.events.IMPRESSION),this.emit(ebz.thrift.events.PUBLISHER_ENGAGEMENT),this.off(ebz.thrift.events.PUBLISHER_ENGAGEMENT),this.emit(ebz.thrift.events.ADVERTISER_ENGAGEMENT),this.off(ebz.thrift.events.ADVERTISER_ENGAGEMENT)},Flow.prototype.handleVideoPosition=function(a,b){this.logger.info("Function handleVideoPosition",b);var c=ebz.helper.Dom.getWindowSize();if(this.videoMiddlePosition={tablet:{portrait:{viewport:317*c[0]/980+"px",noViewport:317*c[0]/980+"px"},landscape:{viewport:this.config.expand.background.landscape?142*c[0]/1024+"px":"0px",noViewport:this.config.expand.background.landscape?142*c[0]/1024+"px":"0px"}},mobile:{portrait:{viewport:260*c[0]/640+"px",noViewport:260*c[0]/640+"px"},landscape:{viewport:"0px",noViewport:"0px"}}},a.content.setPosition&&b)switch(b.toUpperCase()){case"BOTTOM":a.content.setPosition(2);break;case"MIDDLE":a.content.setPosition(1,this.videoMiddlePosition);break;case"TOP":a.content.setPosition(0)}else ebz.helper.Dom.centerMe(a.container,0,2)},Flow.prototype.kill=function(a){this.expandContainer.parentNode&&this.expandContainer.parentNode.removeChild(this.expandContainer)},Flow.EXPAND_CLASS="ebz_flow",Flow.EXPAND_CLASS_HIDE="ebz_flow_hide",Flow.EXPAND_CLOSEBUTTON_CLASS="ebz_closeButton",Flow.EXPAND_VIDEOPLAYER_CLASS="ebz_videoPlayer",Flow}(ebz.format.AbstractFormat);format.Flow=Flow}(ebz.format||(ebz.format={}));var format=ebz.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(c){var d=this;if(b.call(this),this.config=c,this.logger=new a.helper.ConsoleLogger("Social"),this.sdkCloseReason=[0,7],this.tickerState=2,this.logger.info("Function Constructor"),this.setupTracking(),a.helper.Context.isMraid()){var e=a.helper.Context.isAndroid()?200:0;window.mraid.addEventListener("ready",function(){return setTimeout(d.init.bind(d),e)})}else this.init()}return __extends(c,b),c.prototype.getTrackingCallbacks=function(){try{return this.config.tracking.callbacks||[]}catch(a){return[]}},c.prototype.init=function(){var b=this;this.logger.info("Function init"),a.helper.Dom.useCustomClose(),this.expandContainer=document.createElement("div"),this.expandContainer.className=c.EXPAND_SHOW,this.expandAdDisplay=new a.component.AdDisplay(this.expandContainer),this.createVideo(),this.createHeader(),this.createShareBar();var d=this.expandAdDisplay.components.video;4!==d.content.data.mediaProvider?this.callImpression():d.content.on(a.thrift.events.VAST_LOADED,function(c){a.hub.setupCallbacks(b,d.content.data.tracking.callbacks),b.callImpression()}),document.body.appendChild(this.expandContainer)},c.prototype.createVideo=function(){var b=this;this.logger.info("Function createVideo");var c=this.expandAdDisplay.createVideo(this.config.expand.video.videoUrl,this.config.expand.video.customEndScreen?function(){return b.showStatusAndShare()}:function(){return b.close()},1,this.setupVideoConfig.bind(this),!0);this.connectVideoPlayer(c.content),c.content.on(a.thrift.buzzplayerEvents.ON_PROGRESS,this.onProgress.bind(this)),c.content.on(a.thrift.events.PUBLISHER_BILLABLE,function(){return b.billableDelayPassed()}),2===c.content.data.mediaProvider&&c.content.on(a.thrift.buzzplayerEvents.PLAYER_START,function(){c.container.style.width=c.container.offsetWidth+"px",c.container.style.height=c.container.offsetHeight+"px"})},c.prototype.setupVideoConfig=function(a){a.tracking={advertiserDelay:this.config.tracking.advertiserBillingDelay,publisherDelay:this.config.tracking.publisherBillingDelay},this.config.expand.video.poster&&(a.displaySettings.assets={mobile:{url:this.config.expand.video.poster}},a.displaySettings.isMobile=!0),this.config.expand.video.customEndScreen&&(a.displaySettings.customEndscreen=this.config.expand.video.customEndScreen),a.displaySettings.canPlayInline=!0},c.prototype.createHeader=function(){var b=this;this.logger.info("Function createHeader");var c=this.expandAdDisplay.createHeader(function(c){b.close(c),b.emit(a.thrift.events.CLOSE_AD),b.off(a.thrift.events.CLOSE_AD)});c.content.setProgressBar(0,this.tickerState),c.content.setText(this.config.expand.header.text);var d=this.expandAdDisplay.components.video;d.content.on(a.thrift.buzzplayerEvents.VIDEO_PLAY,function(){b.config.hideStatusBar&&(c.content.autoHide(3e3),d.content.on(a.thrift.events.CLICK,function(){return c.content.autoHide(3e3)}))})},c.prototype.createShareBar=function(){var b=this;if(this.logger.info("Function createShareBar"),this.config.tracking.socialRedirect){var c=this.expandAdDisplay.createSharebar(1);c.content.setSize("40px"),this.connectShareBar(c.content,this.config.tracking.socialRedirect),setTimeout(function(){return a.helper.Dom.centerMe(c.container,0,1)},50);var d=this.expandAdDisplay.components.video;d.content.on(a.thrift.buzzplayerEvents.VIDEO_PLAY,function(){b.config.hideShareButtons?(c.content.autoHide(3e3),d.content.on(a.thrift.events.CLICK,function(){return c.content.autoHide(3e3)})):(c.content.autoFade(3e3),d.content.on(a.thrift.events.CLICK,function(){return c.content.autoFade(3e3)}))})}},c.prototype.onProgress=function(a){a&&a.progressPercent&&this.expandAdDisplay.components.header.content.setProgressBar(a.progressPercent,this.tickerState)},c.prototype.billableDelayPassed=function(){this.logger.info("Function billableDelayPassed for"),a.helper.Context.isSdk()?this.sdkCloseReason=[1,2]:a.helper.Context.isMraid()&&window.mraid.reward&&window.mraid.reward(),this.tickerState=1,this.expandAdDisplay.components.video.content.triggerEvent(a.thrift.buzzplayerEvents.PLAY_REQUEST)},c.prototype.showStatusAndShare=function(){this.expandAdDisplay.components.header.content.stopHide(),this.config.showSharesOnEndscreen?(this.expandAdDisplay.components.btShare.content.stopHide(),this.expandAdDisplay.components.btShare.content.stopFade()):this.expandAdDisplay.components.btShare.content.remove()},c.prototype.callImpression=function(){this.emit(a.thrift.events.IMPRESSION),this.off(a.thrift.events.IMPRESSION)},c.prototype.close=function(b){"undefined"==typeof b&&(b=null),this.logger.info("Function close"),this.expandContainer.className=c.EXPAND_HIDE,a.helper.Context.isSdk()?EbzSDK.close(this.sdkCloseReason[0],this.sdkCloseReason[1]):a.helper.Context.isMraid()&&window.mraid.close()},c.EXPAND_SHOW="ebz_social ebz_social_show",c.EXPAND_HIDE="ebz_social ebz_social_hide",c}(a.format.AbstractFormat);b.Social=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){!function(b){var c=function(b){function c(d){b.call(this),this.logger=new a.helper.ConsoleLogger("InReadDisplay"),this.containerHeight=0,this.isConversionReceived=!1,this.isExpanded=!1,this.isViewable=!1,this.expandDuration=0,this.timeoutAdvertiserEngagement=0,this.timeoutPublisherEngagement=0,this.config=d,this.expandContainer=document.getElementById(this.config.targetId),this.containerParent=this.expandContainer.parentNode,this.setupTracking(),this.handleAboveWaterLine(),a.helper.Dom.addCssClass(this.containerParent,[c.INREAD_CLASS]),a.helper.Dom.applyVendorProperties(this.containerParent,"transitionProperty","height, margin"),a.helper.Dom.applyVendorProperties(this.containerParent,"transitionDuration","1s, 1s")}return __extends(c,b),c.prototype.handleAboveWaterLine=function(){if("ebzNative"===this.config.targetId){var b=document.getElementById(a.PREFIX+"Native_above");b&&(this.config.nativeAboveWaterline?b.parentNode.replaceChild(this.expandContainer.parentNode,b):b.parentNode.removeChild(b))}},c.prototype.init=function(){this.expand=new a.component.AdDisplay(this.expandContainer),this.handleConversionEvent(),this.iframe=this.expand.loadIframe(this.config.src,this.onIframeLoaded.bind(this)),this.expand.components.background.container.className="",this.iframe.container.className="",this.expand.components.background.container.style.height="",this.expand.components.background.content=document.createElement("div"),this.expand.components.background.container.appendChild(this.expand.components.background.content),a.helper.Dom.addCssClass(this.expand.components.background.container,[c.BACKGROUND_CLASS]),a.helper.Dom.addCssClass(this.iframe.container,[c.IFRAME_CLASS]),this.onResizeFormat()},c.prototype.onResizeFormat=function(){if(this.isExpanded){var b=this.containerParent.firstChild.offsetHeight;a.helper.Dom.applyStyle(this.containerParent,{height:this.containerHeight+b+"px"})}this.containerHeight=this.config.dimension.height,this.config.dimension.type===c.DIMENSION_BY_RATIO&&(this.containerHeight=this.containerParent.offsetWidth*this.config.dimension.height/this.config.dimension.width),a.helper.Dom.applyStyle(this.expand.components.background.content,{height:this.containerHeight+"px"}),a.helper.Dom.applyStyle(this.iframe.container,{height:this.containerHeight+"px"}),this.setCloseButtonPosition()},c.prototype.handleConversionEvent=function(){var b=this;this.containsTrackingCallbacksEvent(a.thrift.events.CONVERSION)&&a.helper.Dom.addEvent("message",window,function(c){0===c.data.indexOf("ebz:conversion")&&(b.isExpanded?b.emit(a.thrift.events.CONVERSION):b.isConversionReceived=!0)})},c.prototype.getTrackingCallbacks=function(){try{return this.config.tracking.callbacks||[]}catch(a){return[]}},c.prototype.onIframeLoaded=function(b){this.onWindowScrollEventReference=this.onWindowScrollEvent.bind(this),a.helper.Dom.addEvent("resize",window,this.onWindowScrollEventReference),a.helper.Dom.addEvent("scroll",window,this.onWindowScrollEventReference),this.onWindowScrollEvent(null)},c.prototype.onWindowScrollEvent=function(b){var c=this;a.helper.DomViewability.targetVisibleOnScreen(this.containerParent,{width:this.containerParent.offsetWidth,height:this.containerHeight},function(){return c.onViewable()},function(){return c.onUnViewable()})},c.prototype.onViewable=function(){var b=this;if(this.isExpanded){if(this.isViewable)return;return this.isViewable=!0,void this.handleInReadVisible()}this.isExpanded=!0,this.isViewable=!0,this.onResizeFormat(),0!=this.config.marginTop&&a.helper.Dom.applyStyle(this.containerParent,{marginTop:this.config.marginTop+"px"}),0!=this.config.marginBottom&&a.helper.Dom.applyStyle(this.containerParent,{marginBottom:this.config.marginBottom+"px"}),this.config.closeButton&&setTimeout(function(){return b.createCloseButton()},1e3*this.config.closeButton.delayDisplay||0),this.handleAdvertiserEngagagementEvent(this.config.tracking.advertiserEngagementDelay),this.handlePublisherEngagementEvent(this.config.tracking.publisherEngagementDelay),this.emit(a.thrift.events.IMPRESSION),this.off(a.thrift.events.IMPRESSION),this.isConversionReceived&&this.emit(a.thrift.events.CONVERSION),this.initStatEngagementDuration(),this.onWindowFocusEventReference=this.onWindowFocusEvent.bind(this),this.onWindowBlurEventReference=this.onWindowBlurEvent.bind(this),this.viewability.on(a.component.Viewability.EVENT_VIEWABLE,this.onWindowFocusEventReference),this.viewability.on(a.component.Viewability.EVENT_UNVIEWABLE,this.onWindowBlurEventReference),a.helper.Context.isMobile()&&(a.helper.Dom.addEvent("orientationchange",window,function(){return a.helper.Util.recurentCall(b.onResizeFormat.bind(b))}),a.helper.Dom.addEvent("resize",window,function(){return a.helper.Util.recurentCall(b.onResizeFormat.bind(b))}))},c.prototype.onUnViewable=function(){this.isViewable&&(this.isViewable=!1,this.handleInReadHidden())},c.prototype.onWindowBlurEvent=function(a){this.isViewable&&this.handleInReadHidden()},c.prototype.onWindowFocusEvent=function(a){this.isViewable&&this.handleInReadVisible()},c.prototype.handleInReadHidden=function(){this.expandOpenDate&&(this.expandDuration+=Math.ceil((Date.now()-this.expandOpenDate)/1e3),clearTimeout(this.timeoutAdvertiserEngagement),clearTimeout(this.timeoutPublisherEngagement)),this.logger.warn("HIDDEN",this.expandDuration)},c.prototype.handleInReadVisible=function(){this.logger.debug("VISIBLE",this.expandDuration),this.isExpanded&&(this.initStatEngagementDuration(),this.config.tracking.advertiserEngagementDelay>=this.expandDuration&&this.handleAdvertiserEngagagementEvent(this.config.tracking.advertiserEngagementDelay-this.expandDuration),this.config.tracking.publisherEngagementDelay>=this.expandDuration&&this.handlePublisherEngagementEvent(this.config.tracking.publisherEngagementDelay-this.expandDuration))},c.prototype.handleAdvertiserEngagagementEvent=function(b){var c=this;this.logger.debug("handleAdvertiserEngagementEvent",b),
this.containsTrackingCallbacksEvent(a.thrift.events.ADVERTISER_ENGAGEMENT)&&!isNaN(this.config.tracking.advertiserEngagementDelay)&&(this.timeoutAdvertiserEngagement=setTimeout(function(){c.containerParent.parentNode&&(c.emit(a.thrift.events.ADVERTISER_ENGAGEMENT),c.off(a.thrift.events.ADVERTISER_ENGAGEMENT))},1e3*b))},c.prototype.handlePublisherEngagementEvent=function(b){var c=this;this.logger.warn("handlePublisherEngagementEvent",b),this.containsTrackingCallbacksEvent(a.thrift.events.PUBLISHER_ENGAGEMENT)&&!isNaN(this.config.tracking.publisherEngagementDelay)&&(this.timeoutPublisherEngagement=setTimeout(function(){c.containerParent.parentNode&&(c.emit(a.thrift.events.PUBLISHER_ENGAGEMENT),c.off(a.thrift.events.PUBLISHER_ENGAGEMENT))},1e3*b))},c.prototype.createCloseButton=function(){"TR"===this.config.closeButton.position?(this.expand.createCloseButton(),this.expand.components.closeButton.container.className="",a.helper.Dom.addCssClass(this.expand.components.closeButton.container,[c.CLOSE_BUTTON_CLASS])):(this.expand.createTextCloseButton(a.component.TextButton.DEFAULT_TEXT),this.expand.components.closeButton.container.className="",a.helper.Dom.addCssClass(this.expand.components.closeButton.container,[c.TEXT_CLOSE_BUTTON_CLASS]),this.expand.components.closeButton.container.style.backgroundImage="url('"+a.config.urls.buzzplayer+"/images/skip.png?"+a.config.deployedHash+"')",this.expand.components.closeButton.content.setDimension({width:32,height:26}),this.expand.components.closeButton.content.setColor("#FFF"),this.expand.components.closeButton.container.style.position="relative",this.config.closeButton.addBackground&&a.helper.Dom.addCssClass(this.expand.components.closeButton.container,[c.TEXT_CLOSE_BUTTON_BACKGROUND_CLASS])),this.setCloseButtonPosition(),this.expand.setCloseCallback(this.onClickOnCloseButton.bind(this))},c.prototype.setCloseButtonPosition=function(){this.expand.components.closeButton.content&&(this.expand.components.closeButton.container.style.position="relative","TR"===this.config.closeButton.position?(this.expand.components.closeButton.container.style.top=-this.containerHeight+c.TOP_RIGHT_BTN_MARGIN+"px",this.expand.components.closeButton.container.style.left=this.expandContainer.offsetWidth-this.expand.components.closeButton.container.offsetWidth-c.TOP_RIGHT_BTN_MARGIN+"px"):this.expand.components.closeButton.container.style.top=-this.expand.components.closeButton.container.offsetHeight+"px")},c.prototype.onClickOnCloseButton=function(b){var c=this;a.helper.Dom.addEvent("transitionend",this.containerParent,function(){c.containerParent.parentNode&&c.containerParent.parentNode.removeChild(c.containerParent)}),a.helper.Dom.applyStyle(this.containerParent,{height:"0px",marginTop:"0px",marginBottom:"0px"}),this.emit(a.thrift.events.CLOSE_AD),this.off(a.thrift.events.CLOSE_AD),this.callStatEngagementDuration()},c.prototype.initStatEngagementDuration=function(){var b=this;this.expandOpenDate||a.helper.Dom.addEvent("unload",window,function(a){return b.callStatEngagementDuration()},!0),this.expandOpenDate=Date.now()},c.prototype.callStatEngagementDuration=function(){this.emit(a.thrift.events.ENGAGEMENT_DURATION,{DURATION:Math.ceil((Date.now()-this.expandOpenDate)/1e3)+this.expandDuration}),this.off(a.thrift.events.ENGAGEMENT_DURATION)},c.INREAD_CLASS="ebz_inReadDisplay",c.BACKGROUND_CLASS="ebz_inReadDisplay_background",c.IFRAME_CLASS="ebz_inReadDisplay_iframe",c.CLOSE_BUTTON_CLASS="ebz_inReadDisplay_close_button",c.TEXT_CLOSE_BUTTON_CLASS="ebz_inReadDisplay_text_close_button",c.TEXT_CLOSE_BUTTON_BACKGROUND_CLASS="ebz_inReadDisplay_text_close_button_with_background",c.DIMENSION_BY_RATIO=1,c.DIMENSION_BY_HEIGHT=0,c.TOP_RIGHT_BTN_MARGIN=5,c}(a.format.AbstractFormat);b.InReadDisplay=c}(a.format||(a.format={}));a.format}(ebz||(ebz={}));var ebz;!function(a){a.PREFIX="ebz",a.instance,a.instanceName;var b=function(){function b(b){this.logger=new a.helper.ConsoleLogger("App"),b&&(b=a.placement.updateConfigUrls(b),a.config=this.customConfig=a.helper.Util.merge(b,a.config));try{a.isIframed=window!=window.top,a.page.url=window.top.location.href}catch(c){}a.page.url||(a.isIframed&&document.referrer?a.page.url=document.referrer:a.page.url=window.location.href),a.page.referer=document.referrer,a.page.title=document.title,this.logger.info("Framework initialized",this)}return b.prototype.init=function(b,c){switch(c=a.placement.updateConfigUrls(c)||{},a.instanceName=b,b){case"footer":a.instance=new a.format.Footer(c);break;case"intab":a.instance=new a.format.InTab(c);break;case"flow":a.instance=new a.format.Flow(c);break;case"social":a.instance=new a.format.Social(c);break;case"playlist":a.instance=new a.placement.Playlist(this.customConfig,c.campaigns,c.targetId,c.userData),a.instance.next();break;case"native":a.instance=new a.placement.Native(this.customConfig,c.channelId,c.campaignId,c.nativeSelectors,c.nativeInBoardSelectors,c.inReadText),a.instance.init();break;case"roll":a.instance=new a.placement.Roll(this.customConfig,c.channelId,c.preroll,c.postroll),a.instance.init();break;case"distribution":a.instance=new a.placement.Distribution(this.customConfig,c.legacy);break;case"inReadDisplay":a.instance=new a.format.InReadDisplay(c),a.instance.init();break;default:this.logger.error("Unknown format type: "+b),a.helper.ErrorTracker.fire(a.helper.ErrorTracker.APP_UNKNOWN_FORMAT,b)}return this.logger.info("Initialized "+b+":",a.instance),a.instance},b}();a.App=b,window.EbuzzingLibraryCallback&&(window.EbuzzingLibraryCallback(),window.EbuzzingLibraryCallback=null),window._ebz=window._ebz||[];for(var c in window._ebz)window._ebz.hasOwnProperty(c)&&window._ebz[c]&&("boot"===window._ebz[c].type||"lib"===window._ebz[c].name)&&(window._ebz[c].callback(),window._ebz[c]=void 0)}(ebz||(ebz={}));